(function () {
    'use strict';

    const getDefaultsFromPostinstall = () => (undefined);

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    const stringToByteArray$1 = function (str) {
        // TODO(user): Use native implementations if/when available
        const out = [];
        let p = 0;
        for (let i = 0; i < str.length; i++) {
            let c = str.charCodeAt(i);
            if (c < 128) {
                out[p++] = c;
            }
            else if (c < 2048) {
                out[p++] = (c >> 6) | 192;
                out[p++] = (c & 63) | 128;
            }
            else if ((c & 0xfc00) === 0xd800 &&
                i + 1 < str.length &&
                (str.charCodeAt(i + 1) & 0xfc00) === 0xdc00) {
                // Surrogate Pair
                c = 0x10000 + ((c & 0x03ff) << 10) + (str.charCodeAt(++i) & 0x03ff);
                out[p++] = (c >> 18) | 240;
                out[p++] = ((c >> 12) & 63) | 128;
                out[p++] = ((c >> 6) & 63) | 128;
                out[p++] = (c & 63) | 128;
            }
            else {
                out[p++] = (c >> 12) | 224;
                out[p++] = ((c >> 6) & 63) | 128;
                out[p++] = (c & 63) | 128;
            }
        }
        return out;
    };
    /**
     * Turns an array of numbers into the string given by the concatenation of the
     * characters to which the numbers correspond.
     * @param bytes Array of numbers representing characters.
     * @return Stringification of the array.
     */
    const byteArrayToString = function (bytes) {
        // TODO(user): Use native implementations if/when available
        const out = [];
        let pos = 0, c = 0;
        while (pos < bytes.length) {
            const c1 = bytes[pos++];
            if (c1 < 128) {
                out[c++] = String.fromCharCode(c1);
            }
            else if (c1 > 191 && c1 < 224) {
                const c2 = bytes[pos++];
                out[c++] = String.fromCharCode(((c1 & 31) << 6) | (c2 & 63));
            }
            else if (c1 > 239 && c1 < 365) {
                // Surrogate Pair
                const c2 = bytes[pos++];
                const c3 = bytes[pos++];
                const c4 = bytes[pos++];
                const u = (((c1 & 7) << 18) | ((c2 & 63) << 12) | ((c3 & 63) << 6) | (c4 & 63)) -
                    0x10000;
                out[c++] = String.fromCharCode(0xd800 + (u >> 10));
                out[c++] = String.fromCharCode(0xdc00 + (u & 1023));
            }
            else {
                const c2 = bytes[pos++];
                const c3 = bytes[pos++];
                out[c++] = String.fromCharCode(((c1 & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));
            }
        }
        return out.join('');
    };
    // We define it as an object literal instead of a class because a class compiled down to es5 can't
    // be treeshaked. https://github.com/rollup/rollup/issues/1691
    // Static lookup maps, lazily populated by init_()
    // TODO(dlarocque): Define this as a class, since we no longer target ES5.
    const base64 = {
        /**
         * Maps bytes to characters.
         */
        byteToCharMap_: null,
        /**
         * Maps characters to bytes.
         */
        charToByteMap_: null,
        /**
         * Maps bytes to websafe characters.
         * @private
         */
        byteToCharMapWebSafe_: null,
        /**
         * Maps websafe characters to bytes.
         * @private
         */
        charToByteMapWebSafe_: null,
        /**
         * Our default alphabet, shared between
         * ENCODED_VALS and ENCODED_VALS_WEBSAFE
         */
        ENCODED_VALS_BASE: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' + 'abcdefghijklmnopqrstuvwxyz' + '0123456789',
        /**
         * Our default alphabet. Value 64 (=) is special; it means "nothing."
         */
        get ENCODED_VALS() {
            return this.ENCODED_VALS_BASE + '+/=';
        },
        /**
         * Our websafe alphabet.
         */
        get ENCODED_VALS_WEBSAFE() {
            return this.ENCODED_VALS_BASE + '-_.';
        },
        /**
         * Whether this browser supports the atob and btoa functions. This extension
         * started at Mozilla but is now implemented by many browsers. We use the
         * ASSUME_* variables to avoid pulling in the full useragent detection library
         * but still allowing the standard per-browser compilations.
         *
         */
        HAS_NATIVE_SUPPORT: typeof atob === 'function',
        /**
         * Base64-encode an array of bytes.
         *
         * @param input An array of bytes (numbers with
         *     value in [0, 255]) to encode.
         * @param webSafe Boolean indicating we should use the
         *     alternative alphabet.
         * @return The base64 encoded string.
         */
        encodeByteArray(input, webSafe) {
            if (!Array.isArray(input)) {
                throw Error('encodeByteArray takes an array as a parameter');
            }
            this.init_();
            const byteToCharMap = webSafe
                ? this.byteToCharMapWebSafe_
                : this.byteToCharMap_;
            const output = [];
            for (let i = 0; i < input.length; i += 3) {
                const byte1 = input[i];
                const haveByte2 = i + 1 < input.length;
                const byte2 = haveByte2 ? input[i + 1] : 0;
                const haveByte3 = i + 2 < input.length;
                const byte3 = haveByte3 ? input[i + 2] : 0;
                const outByte1 = byte1 >> 2;
                const outByte2 = ((byte1 & 0x03) << 4) | (byte2 >> 4);
                let outByte3 = ((byte2 & 0x0f) << 2) | (byte3 >> 6);
                let outByte4 = byte3 & 0x3f;
                if (!haveByte3) {
                    outByte4 = 64;
                    if (!haveByte2) {
                        outByte3 = 64;
                    }
                }
                output.push(byteToCharMap[outByte1], byteToCharMap[outByte2], byteToCharMap[outByte3], byteToCharMap[outByte4]);
            }
            return output.join('');
        },
        /**
         * Base64-encode a string.
         *
         * @param input A string to encode.
         * @param webSafe If true, we should use the
         *     alternative alphabet.
         * @return The base64 encoded string.
         */
        encodeString(input, webSafe) {
            // Shortcut for Mozilla browsers that implement
            // a native base64 encoder in the form of "btoa/atob"
            if (this.HAS_NATIVE_SUPPORT && !webSafe) {
                return btoa(input);
            }
            return this.encodeByteArray(stringToByteArray$1(input), webSafe);
        },
        /**
         * Base64-decode a string.
         *
         * @param input to decode.
         * @param webSafe True if we should use the
         *     alternative alphabet.
         * @return string representing the decoded value.
         */
        decodeString(input, webSafe) {
            // Shortcut for Mozilla browsers that implement
            // a native base64 encoder in the form of "btoa/atob"
            if (this.HAS_NATIVE_SUPPORT && !webSafe) {
                return atob(input);
            }
            return byteArrayToString(this.decodeStringToByteArray(input, webSafe));
        },
        /**
         * Base64-decode a string.
         *
         * In base-64 decoding, groups of four characters are converted into three
         * bytes.  If the encoder did not apply padding, the input length may not
         * be a multiple of 4.
         *
         * In this case, the last group will have fewer than 4 characters, and
         * padding will be inferred.  If the group has one or two characters, it decodes
         * to one byte.  If the group has three characters, it decodes to two bytes.
         *
         * @param input Input to decode.
         * @param webSafe True if we should use the web-safe alphabet.
         * @return bytes representing the decoded value.
         */
        decodeStringToByteArray(input, webSafe) {
            this.init_();
            const charToByteMap = webSafe
                ? this.charToByteMapWebSafe_
                : this.charToByteMap_;
            const output = [];
            for (let i = 0; i < input.length;) {
                const byte1 = charToByteMap[input.charAt(i++)];
                const haveByte2 = i < input.length;
                const byte2 = haveByte2 ? charToByteMap[input.charAt(i)] : 0;
                ++i;
                const haveByte3 = i < input.length;
                const byte3 = haveByte3 ? charToByteMap[input.charAt(i)] : 64;
                ++i;
                const haveByte4 = i < input.length;
                const byte4 = haveByte4 ? charToByteMap[input.charAt(i)] : 64;
                ++i;
                if (byte1 == null || byte2 == null || byte3 == null || byte4 == null) {
                    throw new DecodeBase64StringError();
                }
                const outByte1 = (byte1 << 2) | (byte2 >> 4);
                output.push(outByte1);
                if (byte3 !== 64) {
                    const outByte2 = ((byte2 << 4) & 0xf0) | (byte3 >> 2);
                    output.push(outByte2);
                    if (byte4 !== 64) {
                        const outByte3 = ((byte3 << 6) & 0xc0) | byte4;
                        output.push(outByte3);
                    }
                }
            }
            return output;
        },
        /**
         * Lazy static initialization function. Called before
         * accessing any of the static map variables.
         * @private
         */
        init_() {
            if (!this.byteToCharMap_) {
                this.byteToCharMap_ = {};
                this.charToByteMap_ = {};
                this.byteToCharMapWebSafe_ = {};
                this.charToByteMapWebSafe_ = {};
                // We want quick mappings back and forth, so we precompute two maps.
                for (let i = 0; i < this.ENCODED_VALS.length; i++) {
                    this.byteToCharMap_[i] = this.ENCODED_VALS.charAt(i);
                    this.charToByteMap_[this.byteToCharMap_[i]] = i;
                    this.byteToCharMapWebSafe_[i] = this.ENCODED_VALS_WEBSAFE.charAt(i);
                    this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]] = i;
                    // Be forgiving when decoding and correctly decode both encodings.
                    if (i >= this.ENCODED_VALS_BASE.length) {
                        this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)] = i;
                        this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)] = i;
                    }
                }
            }
        }
    };
    /**
     * An error encountered while decoding base64 string.
     */
    class DecodeBase64StringError extends Error {
        constructor() {
            super(...arguments);
            this.name = 'DecodeBase64StringError';
        }
    }
    /**
     * URL-safe base64 encoding
     */
    const base64Encode = function (str) {
        const utf8Bytes = stringToByteArray$1(str);
        return base64.encodeByteArray(utf8Bytes, true);
    };
    /**
     * URL-safe base64 encoding (without "." padding in the end).
     * e.g. Used in JSON Web Token (JWT) parts.
     */
    const base64urlEncodeWithoutPadding = function (str) {
        // Use base64url encoding and remove padding in the end (dot characters).
        return base64Encode(str).replace(/\./g, '');
    };
    /**
     * URL-safe base64 decoding
     *
     * NOTE: DO NOT use the global atob() function - it does NOT support the
     * base64Url variant encoding.
     *
     * @param str To be decoded
     * @return Decoded result, if possible
     */
    const base64Decode = function (str) {
        try {
            return base64.decodeString(str, true);
        }
        catch (e) {
            console.error('base64Decode failed: ', e);
        }
        return null;
    };

    /**
     * @license
     * Copyright 2022 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * Polyfill for `globalThis` object.
     * @returns the `globalThis` object for the given environment.
     * @public
     */
    function getGlobal() {
        if (typeof self !== 'undefined') {
            return self;
        }
        if (typeof window !== 'undefined') {
            return window;
        }
        if (typeof global !== 'undefined') {
            return global;
        }
        throw new Error('Unable to locate global object.');
    }

    /**
     * @license
     * Copyright 2022 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    const getDefaultsFromGlobal = () => getGlobal().__FIREBASE_DEFAULTS__;
    /**
     * Attempt to read defaults from a JSON string provided to
     * process(.)env(.)__FIREBASE_DEFAULTS__ or a JSON file whose path is in
     * process(.)env(.)__FIREBASE_DEFAULTS_PATH__
     * The dots are in parens because certain compilers (Vite?) cannot
     * handle seeing that variable in comments.
     * See https://github.com/firebase/firebase-js-sdk/issues/6838
     */
    const getDefaultsFromEnvVariable = () => {
        if (typeof process === 'undefined' || typeof process.env === 'undefined') {
            return;
        }
        const defaultsJsonString = process.env.__FIREBASE_DEFAULTS__;
        if (defaultsJsonString) {
            return JSON.parse(defaultsJsonString);
        }
    };
    const getDefaultsFromCookie = () => {
        if (typeof document === 'undefined') {
            return;
        }
        let match;
        try {
            match = document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/);
        }
        catch (e) {
            // Some environments such as Angular Universal SSR have a
            // `document` object but error on accessing `document.cookie`.
            return;
        }
        const decoded = match && base64Decode(match[1]);
        return decoded && JSON.parse(decoded);
    };
    /**
     * Get the __FIREBASE_DEFAULTS__ object. It checks in order:
     * (1) if such an object exists as a property of `globalThis`
     * (2) if such an object was provided on a shell environment variable
     * (3) if such an object exists in a cookie
     * @public
     */
    const getDefaults = () => {
        try {
            return (getDefaultsFromPostinstall() ||
                getDefaultsFromGlobal() ||
                getDefaultsFromEnvVariable() ||
                getDefaultsFromCookie());
        }
        catch (e) {
            /**
             * Catch-all for being unable to get __FIREBASE_DEFAULTS__ due
             * to any environment case we have not accounted for. Log to
             * info instead of swallowing so we can find these unknown cases
             * and add paths for them if needed.
             */
            console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);
            return;
        }
    };
    /**
     * Returns emulator host stored in the __FIREBASE_DEFAULTS__ object
     * for the given product.
     * @returns a URL host formatted like `127.0.0.1:9999` or `[::1]:4000` if available
     * @public
     */
    const getDefaultEmulatorHost = (productName) => getDefaults()?.emulatorHosts?.[productName];
    /**
     * Returns emulator hostname and port stored in the __FIREBASE_DEFAULTS__ object
     * for the given product.
     * @returns a pair of hostname and port like `["::1", 4000]` if available
     * @public
     */
    const getDefaultEmulatorHostnameAndPort = (productName) => {
        const host = getDefaultEmulatorHost(productName);
        if (!host) {
            return undefined;
        }
        const separatorIndex = host.lastIndexOf(':'); // Finding the last since IPv6 addr also has colons.
        if (separatorIndex <= 0 || separatorIndex + 1 === host.length) {
            throw new Error(`Invalid host ${host} with no separate hostname and port!`);
        }
        // eslint-disable-next-line no-restricted-globals
        const port = parseInt(host.substring(separatorIndex + 1), 10);
        if (host[0] === '[') {
            // Bracket-quoted `[ipv6addr]:port` => return "ipv6addr" (without brackets).
            return [host.substring(1, separatorIndex - 1), port];
        }
        else {
            return [host.substring(0, separatorIndex), port];
        }
    };
    /**
     * Returns Firebase app config stored in the __FIREBASE_DEFAULTS__ object.
     * @public
     */
    const getDefaultAppConfig = () => getDefaults()?.config;

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    class Deferred {
        constructor() {
            this.reject = () => { };
            this.resolve = () => { };
            this.promise = new Promise((resolve, reject) => {
                this.resolve = resolve;
                this.reject = reject;
            });
        }
        /**
         * Our API internals are not promisified and cannot because our callback APIs have subtle expectations around
         * invoking promises inline, which Promises are forbidden to do. This method accepts an optional node-style callback
         * and returns a node-style callback which will resolve or reject the Deferred's promise.
         */
        wrapCallback(callback) {
            return (error, value) => {
                if (error) {
                    this.reject(error);
                }
                else {
                    this.resolve(value);
                }
                if (typeof callback === 'function') {
                    // Attaching noop handler just in case developer wasn't expecting
                    // promises
                    this.promise.catch(() => { });
                    // Some of our callbacks don't expect a value and our own tests
                    // assert that the parameter length is 1
                    if (callback.length === 1) {
                        callback(error);
                    }
                    else {
                        callback(error, value);
                    }
                }
            };
        }
    }

    /**
     * @license
     * Copyright 2025 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * Checks whether host is a cloud workstation or not.
     * @public
     */
    function isCloudWorkstation(url) {
        // `isCloudWorkstation` is called without protocol in certain connect*Emulator functions
        // In HTTP request builders, it's called with the protocol.
        // If called with protocol prefix, it's a valid URL, so we extract the hostname
        // If called without, we assume the string is the hostname.
        try {
            const host = url.startsWith('http://') || url.startsWith('https://')
                ? new URL(url).hostname
                : url;
            return host.endsWith('.cloudworkstations.dev');
        }
        catch {
            return false;
        }
    }
    /**
     * Makes a fetch request to the given server.
     * Mostly used for forwarding cookies in Firebase Studio.
     * @public
     */
    async function pingServer(endpoint) {
        const result = await fetch(endpoint, {
            credentials: 'include'
        });
        return result.ok;
    }

    /**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    function createMockUserToken(token, projectId) {
        if (token.uid) {
            throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');
        }
        // Unsecured JWTs use "none" as the algorithm.
        const header = {
            alg: 'none',
            type: 'JWT'
        };
        const project = projectId || 'demo-project';
        const iat = token.iat || 0;
        const sub = token.sub || token.user_id;
        if (!sub) {
            throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");
        }
        const payload = {
            // Set all required fields to decent defaults
            iss: `https://securetoken.google.com/${project}`,
            aud: project,
            iat,
            exp: iat + 3600,
            auth_time: iat,
            sub,
            user_id: sub,
            firebase: {
                sign_in_provider: 'custom',
                identities: {}
            },
            // Override with user options
            ...token
        };
        // Unsecured JWTs use the empty string as a signature.
        const signature = '';
        return [
            base64urlEncodeWithoutPadding(JSON.stringify(header)),
            base64urlEncodeWithoutPadding(JSON.stringify(payload)),
            signature
        ].join('.');
    }
    const emulatorStatus = {};
    // Checks whether any products are running on an emulator
    function getEmulatorSummary() {
        const summary = {
            prod: [],
            emulator: []
        };
        for (const key of Object.keys(emulatorStatus)) {
            if (emulatorStatus[key]) {
                summary.emulator.push(key);
            }
            else {
                summary.prod.push(key);
            }
        }
        return summary;
    }
    function getOrCreateEl(id) {
        let parentDiv = document.getElementById(id);
        let created = false;
        if (!parentDiv) {
            parentDiv = document.createElement('div');
            parentDiv.setAttribute('id', id);
            created = true;
        }
        return { created, element: parentDiv };
    }
    let previouslyDismissed = false;
    /**
     * Updates Emulator Banner. Primarily used for Firebase Studio
     * @param name
     * @param isRunningEmulator
     * @public
     */
    function updateEmulatorBanner(name, isRunningEmulator) {
        if (typeof window === 'undefined' ||
            typeof document === 'undefined' ||
            !isCloudWorkstation(window.location.host) ||
            emulatorStatus[name] === isRunningEmulator ||
            emulatorStatus[name] || // If already set to use emulator, can't go back to prod.
            previouslyDismissed) {
            return;
        }
        emulatorStatus[name] = isRunningEmulator;
        function prefixedId(id) {
            return `__firebase__banner__${id}`;
        }
        const bannerId = '__firebase__banner';
        const summary = getEmulatorSummary();
        const showError = summary.prod.length > 0;
        function tearDown() {
            const element = document.getElementById(bannerId);
            if (element) {
                element.remove();
            }
        }
        function setupBannerStyles(bannerEl) {
            bannerEl.style.display = 'flex';
            bannerEl.style.background = '#7faaf0';
            bannerEl.style.position = 'fixed';
            bannerEl.style.bottom = '5px';
            bannerEl.style.left = '5px';
            bannerEl.style.padding = '.5em';
            bannerEl.style.borderRadius = '5px';
            bannerEl.style.alignItems = 'center';
        }
        function setupIconStyles(prependIcon, iconId) {
            prependIcon.setAttribute('width', '24');
            prependIcon.setAttribute('id', iconId);
            prependIcon.setAttribute('height', '24');
            prependIcon.setAttribute('viewBox', '0 0 24 24');
            prependIcon.setAttribute('fill', 'none');
            prependIcon.style.marginLeft = '-6px';
        }
        function setupCloseBtn() {
            const closeBtn = document.createElement('span');
            closeBtn.style.cursor = 'pointer';
            closeBtn.style.marginLeft = '16px';
            closeBtn.style.fontSize = '24px';
            closeBtn.innerHTML = ' &times;';
            closeBtn.onclick = () => {
                previouslyDismissed = true;
                tearDown();
            };
            return closeBtn;
        }
        function setupLinkStyles(learnMoreLink, learnMoreId) {
            learnMoreLink.setAttribute('id', learnMoreId);
            learnMoreLink.innerText = 'Learn more';
            learnMoreLink.href =
                'https://firebase.google.com/docs/studio/preview-apps#preview-backend';
            learnMoreLink.setAttribute('target', '__blank');
            learnMoreLink.style.paddingLeft = '5px';
            learnMoreLink.style.textDecoration = 'underline';
        }
        function setupDom() {
            const banner = getOrCreateEl(bannerId);
            const firebaseTextId = prefixedId('text');
            const firebaseText = document.getElementById(firebaseTextId) || document.createElement('span');
            const learnMoreId = prefixedId('learnmore');
            const learnMoreLink = document.getElementById(learnMoreId) ||
                document.createElement('a');
            const prependIconId = prefixedId('preprendIcon');
            const prependIcon = document.getElementById(prependIconId) ||
                document.createElementNS('http://www.w3.org/2000/svg', 'svg');
            if (banner.created) {
                // update styles
                const bannerEl = banner.element;
                setupBannerStyles(bannerEl);
                setupLinkStyles(learnMoreLink, learnMoreId);
                const closeBtn = setupCloseBtn();
                setupIconStyles(prependIcon, prependIconId);
                bannerEl.append(prependIcon, firebaseText, learnMoreLink, closeBtn);
                document.body.appendChild(bannerEl);
            }
            if (showError) {
                firebaseText.innerText = `Preview backend disconnected.`;
                prependIcon.innerHTML = `<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`;
            }
            else {
                prependIcon.innerHTML = `<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`;
                firebaseText.innerText = 'Preview backend running in this workspace.';
            }
            firebaseText.setAttribute('id', firebaseTextId);
        }
        if (document.readyState === 'loading') {
            window.addEventListener('DOMContentLoaded', setupDom);
        }
        else {
            setupDom();
        }
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * Returns navigator.userAgent string or '' if it's not defined.
     * @return user agent string
     */
    function getUA() {
        if (typeof navigator !== 'undefined' &&
            typeof navigator['userAgent'] === 'string') {
            return navigator['userAgent'];
        }
        else {
            return '';
        }
    }
    /**
     * Detect Node.js.
     *
     * @return true if Node.js environment is detected or specified.
     */
    // Node detection logic from: https://github.com/iliakan/detect-node/
    function isNode() {
        const forceEnvironment = getDefaults()?.forceEnvironment;
        if (forceEnvironment === 'node') {
            return true;
        }
        else if (forceEnvironment === 'browser') {
            return false;
        }
        try {
            return (Object.prototype.toString.call(global.process) === '[object process]');
        }
        catch (e) {
            return false;
        }
    }
    /** Returns true if we are running in Safari. */
    function isSafari() {
        return (!isNode() &&
            !!navigator.userAgent &&
            navigator.userAgent.includes('Safari') &&
            !navigator.userAgent.includes('Chrome'));
    }
    /**
     * This method checks if indexedDB is supported by current browser/service worker context
     * @return true if indexedDB is supported by current browser/service worker context
     */
    function isIndexedDBAvailable() {
        try {
            return typeof indexedDB === 'object';
        }
        catch (e) {
            return false;
        }
    }
    /**
     * This method validates browser/sw context for indexedDB by opening a dummy indexedDB database and reject
     * if errors occur during the database open operation.
     *
     * @throws exception if current browser/sw context can't run idb.open (ex: Safari iframe, Firefox
     * private browsing)
     */
    function validateIndexedDBOpenable() {
        return new Promise((resolve, reject) => {
            try {
                let preExist = true;
                const DB_CHECK_NAME = 'validate-browser-context-for-indexeddb-analytics-module';
                const request = self.indexedDB.open(DB_CHECK_NAME);
                request.onsuccess = () => {
                    request.result.close();
                    // delete database only when it doesn't pre-exist
                    if (!preExist) {
                        self.indexedDB.deleteDatabase(DB_CHECK_NAME);
                    }
                    resolve(true);
                };
                request.onupgradeneeded = () => {
                    preExist = false;
                };
                request.onerror = () => {
                    reject(request.error?.message || '');
                };
            }
            catch (error) {
                reject(error);
            }
        });
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * @fileoverview Standardized Firebase Error.
     *
     * Usage:
     *
     *   // TypeScript string literals for type-safe codes
     *   type Err =
     *     'unknown' |
     *     'object-not-found'
     *     ;
     *
     *   // Closure enum for type-safe error codes
     *   // at-enum {string}
     *   var Err = {
     *     UNKNOWN: 'unknown',
     *     OBJECT_NOT_FOUND: 'object-not-found',
     *   }
     *
     *   let errors: Map<Err, string> = {
     *     'generic-error': "Unknown error",
     *     'file-not-found': "Could not find file: {$file}",
     *   };
     *
     *   // Type-safe function - must pass a valid error code as param.
     *   let error = new ErrorFactory<Err>('service', 'Service', errors);
     *
     *   ...
     *   throw error.create(Err.GENERIC);
     *   ...
     *   throw error.create(Err.FILE_NOT_FOUND, {'file': fileName});
     *   ...
     *   // Service: Could not file file: foo.txt (service/file-not-found).
     *
     *   catch (e) {
     *     assert(e.message === "Could not find file: foo.txt.");
     *     if ((e as FirebaseError)?.code === 'service/file-not-found') {
     *       console.log("Could not read file: " + e['file']);
     *     }
     *   }
     */
    const ERROR_NAME = 'FirebaseError';
    // Based on code from:
    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error#Custom_Error_Types
    class FirebaseError extends Error {
        constructor(
        /** The error code for this error. */
        code, message, 
        /** Custom data for this error. */
        customData) {
            super(message);
            this.code = code;
            this.customData = customData;
            /** The custom name for all FirebaseErrors. */
            this.name = ERROR_NAME;
            // Fix For ES5
            // https://github.com/Microsoft/TypeScript-wiki/blob/master/Breaking-Changes.md#extending-built-ins-like-error-array-and-map-may-no-longer-work
            // TODO(dlarocque): Replace this with `new.target`: https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-2.html#support-for-newtarget
            //                   which we can now use since we no longer target ES5.
            Object.setPrototypeOf(this, FirebaseError.prototype);
            // Maintains proper stack trace for where our error was thrown.
            // Only available on V8.
            if (Error.captureStackTrace) {
                Error.captureStackTrace(this, ErrorFactory.prototype.create);
            }
        }
    }
    class ErrorFactory {
        constructor(service, serviceName, errors) {
            this.service = service;
            this.serviceName = serviceName;
            this.errors = errors;
        }
        create(code, ...data) {
            const customData = data[0] || {};
            const fullCode = `${this.service}/${code}`;
            const template = this.errors[code];
            const message = template ? replaceTemplate(template, customData) : 'Error';
            // Service Name: Error message (service/code).
            const fullMessage = `${this.serviceName}: ${message} (${fullCode}).`;
            const error = new FirebaseError(fullCode, fullMessage, customData);
            return error;
        }
    }
    function replaceTemplate(template, data) {
        return template.replace(PATTERN, (_, key) => {
            const value = data[key];
            return value != null ? String(value) : `<${key}?>`;
        });
    }
    const PATTERN = /\{\$([^}]+)}/g;
    /**
     * Deep equal two objects. Support Arrays and Objects.
     */
    function deepEqual(a, b) {
        if (a === b) {
            return true;
        }
        const aKeys = Object.keys(a);
        const bKeys = Object.keys(b);
        for (const k of aKeys) {
            if (!bKeys.includes(k)) {
                return false;
            }
            const aProp = a[k];
            const bProp = b[k];
            if (isObject(aProp) && isObject(bProp)) {
                if (!deepEqual(aProp, bProp)) {
                    return false;
                }
            }
            else if (aProp !== bProp) {
                return false;
            }
        }
        for (const k of bKeys) {
            if (!aKeys.includes(k)) {
                return false;
            }
        }
        return true;
    }
    function isObject(thing) {
        return thing !== null && typeof thing === 'object';
    }

    /**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    function getModularInstance(service) {
        if (service && service._delegate) {
            return service._delegate;
        }
        else {
            return service;
        }
    }

    /**
     * Component for service name T, e.g. `auth`, `auth-internal`
     */
    class Component {
        /**
         *
         * @param name The public service name, e.g. app, auth, firestore, database
         * @param instanceFactory Service factory responsible for creating the public interface
         * @param type whether the service provided by the component is public or private
         */
        constructor(name, instanceFactory, type) {
            this.name = name;
            this.instanceFactory = instanceFactory;
            this.type = type;
            this.multipleInstances = false;
            /**
             * Properties to be added to the service namespace
             */
            this.serviceProps = {};
            this.instantiationMode = "LAZY" /* InstantiationMode.LAZY */;
            this.onInstanceCreated = null;
        }
        setInstantiationMode(mode) {
            this.instantiationMode = mode;
            return this;
        }
        setMultipleInstances(multipleInstances) {
            this.multipleInstances = multipleInstances;
            return this;
        }
        setServiceProps(props) {
            this.serviceProps = props;
            return this;
        }
        setInstanceCreatedCallback(callback) {
            this.onInstanceCreated = callback;
            return this;
        }
    }

    /**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    const DEFAULT_ENTRY_NAME$1 = '[DEFAULT]';

    /**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * Provider for instance for service name T, e.g. 'auth', 'auth-internal'
     * NameServiceMapping[T] is an alias for the type of the instance
     */
    class Provider {
        constructor(name, container) {
            this.name = name;
            this.container = container;
            this.component = null;
            this.instances = new Map();
            this.instancesDeferred = new Map();
            this.instancesOptions = new Map();
            this.onInitCallbacks = new Map();
        }
        /**
         * @param identifier A provider can provide multiple instances of a service
         * if this.component.multipleInstances is true.
         */
        get(identifier) {
            // if multipleInstances is not supported, use the default name
            const normalizedIdentifier = this.normalizeInstanceIdentifier(identifier);
            if (!this.instancesDeferred.has(normalizedIdentifier)) {
                const deferred = new Deferred();
                this.instancesDeferred.set(normalizedIdentifier, deferred);
                if (this.isInitialized(normalizedIdentifier) ||
                    this.shouldAutoInitialize()) {
                    // initialize the service if it can be auto-initialized
                    try {
                        const instance = this.getOrInitializeService({
                            instanceIdentifier: normalizedIdentifier
                        });
                        if (instance) {
                            deferred.resolve(instance);
                        }
                    }
                    catch (e) {
                        // when the instance factory throws an exception during get(), it should not cause
                        // a fatal error. We just return the unresolved promise in this case.
                    }
                }
            }
            return this.instancesDeferred.get(normalizedIdentifier).promise;
        }
        getImmediate(options) {
            // if multipleInstances is not supported, use the default name
            const normalizedIdentifier = this.normalizeInstanceIdentifier(options?.identifier);
            const optional = options?.optional ?? false;
            if (this.isInitialized(normalizedIdentifier) ||
                this.shouldAutoInitialize()) {
                try {
                    return this.getOrInitializeService({
                        instanceIdentifier: normalizedIdentifier
                    });
                }
                catch (e) {
                    if (optional) {
                        return null;
                    }
                    else {
                        throw e;
                    }
                }
            }
            else {
                // In case a component is not initialized and should/cannot be auto-initialized at the moment, return null if the optional flag is set, or throw
                if (optional) {
                    return null;
                }
                else {
                    throw Error(`Service ${this.name} is not available`);
                }
            }
        }
        getComponent() {
            return this.component;
        }
        setComponent(component) {
            if (component.name !== this.name) {
                throw Error(`Mismatching Component ${component.name} for Provider ${this.name}.`);
            }
            if (this.component) {
                throw Error(`Component for ${this.name} has already been provided`);
            }
            this.component = component;
            // return early without attempting to initialize the component if the component requires explicit initialization (calling `Provider.initialize()`)
            if (!this.shouldAutoInitialize()) {
                return;
            }
            // if the service is eager, initialize the default instance
            if (isComponentEager(component)) {
                try {
                    this.getOrInitializeService({ instanceIdentifier: DEFAULT_ENTRY_NAME$1 });
                }
                catch (e) {
                    // when the instance factory for an eager Component throws an exception during the eager
                    // initialization, it should not cause a fatal error.
                    // TODO: Investigate if we need to make it configurable, because some component may want to cause
                    // a fatal error in this case?
                }
            }
            // Create service instances for the pending promises and resolve them
            // NOTE: if this.multipleInstances is false, only the default instance will be created
            // and all promises with resolve with it regardless of the identifier.
            for (const [instanceIdentifier, instanceDeferred] of this.instancesDeferred.entries()) {
                const normalizedIdentifier = this.normalizeInstanceIdentifier(instanceIdentifier);
                try {
                    // `getOrInitializeService()` should always return a valid instance since a component is guaranteed. use ! to make typescript happy.
                    const instance = this.getOrInitializeService({
                        instanceIdentifier: normalizedIdentifier
                    });
                    instanceDeferred.resolve(instance);
                }
                catch (e) {
                    // when the instance factory throws an exception, it should not cause
                    // a fatal error. We just leave the promise unresolved.
                }
            }
        }
        clearInstance(identifier = DEFAULT_ENTRY_NAME$1) {
            this.instancesDeferred.delete(identifier);
            this.instancesOptions.delete(identifier);
            this.instances.delete(identifier);
        }
        // app.delete() will call this method on every provider to delete the services
        // TODO: should we mark the provider as deleted?
        async delete() {
            const services = Array.from(this.instances.values());
            await Promise.all([
                ...services
                    .filter(service => 'INTERNAL' in service) // legacy services
                    // eslint-disable-next-line @typescript-eslint/no-explicit-any
                    .map(service => service.INTERNAL.delete()),
                ...services
                    .filter(service => '_delete' in service) // modularized services
                    // eslint-disable-next-line @typescript-eslint/no-explicit-any
                    .map(service => service._delete())
            ]);
        }
        isComponentSet() {
            return this.component != null;
        }
        isInitialized(identifier = DEFAULT_ENTRY_NAME$1) {
            return this.instances.has(identifier);
        }
        getOptions(identifier = DEFAULT_ENTRY_NAME$1) {
            return this.instancesOptions.get(identifier) || {};
        }
        initialize(opts = {}) {
            const { options = {} } = opts;
            const normalizedIdentifier = this.normalizeInstanceIdentifier(opts.instanceIdentifier);
            if (this.isInitialized(normalizedIdentifier)) {
                throw Error(`${this.name}(${normalizedIdentifier}) has already been initialized`);
            }
            if (!this.isComponentSet()) {
                throw Error(`Component ${this.name} has not been registered yet`);
            }
            const instance = this.getOrInitializeService({
                instanceIdentifier: normalizedIdentifier,
                options
            });
            // resolve any pending promise waiting for the service instance
            for (const [instanceIdentifier, instanceDeferred] of this.instancesDeferred.entries()) {
                const normalizedDeferredIdentifier = this.normalizeInstanceIdentifier(instanceIdentifier);
                if (normalizedIdentifier === normalizedDeferredIdentifier) {
                    instanceDeferred.resolve(instance);
                }
            }
            return instance;
        }
        /**
         *
         * @param callback - a function that will be invoked  after the provider has been initialized by calling provider.initialize().
         * The function is invoked SYNCHRONOUSLY, so it should not execute any longrunning tasks in order to not block the program.
         *
         * @param identifier An optional instance identifier
         * @returns a function to unregister the callback
         */
        onInit(callback, identifier) {
            const normalizedIdentifier = this.normalizeInstanceIdentifier(identifier);
            const existingCallbacks = this.onInitCallbacks.get(normalizedIdentifier) ??
                new Set();
            existingCallbacks.add(callback);
            this.onInitCallbacks.set(normalizedIdentifier, existingCallbacks);
            const existingInstance = this.instances.get(normalizedIdentifier);
            if (existingInstance) {
                callback(existingInstance, normalizedIdentifier);
            }
            return () => {
                existingCallbacks.delete(callback);
            };
        }
        /**
         * Invoke onInit callbacks synchronously
         * @param instance the service instance`
         */
        invokeOnInitCallbacks(instance, identifier) {
            const callbacks = this.onInitCallbacks.get(identifier);
            if (!callbacks) {
                return;
            }
            for (const callback of callbacks) {
                try {
                    callback(instance, identifier);
                }
                catch {
                    // ignore errors in the onInit callback
                }
            }
        }
        getOrInitializeService({ instanceIdentifier, options = {} }) {
            let instance = this.instances.get(instanceIdentifier);
            if (!instance && this.component) {
                instance = this.component.instanceFactory(this.container, {
                    instanceIdentifier: normalizeIdentifierForFactory(instanceIdentifier),
                    options
                });
                this.instances.set(instanceIdentifier, instance);
                this.instancesOptions.set(instanceIdentifier, options);
                /**
                 * Invoke onInit listeners.
                 * Note this.component.onInstanceCreated is different, which is used by the component creator,
                 * while onInit listeners are registered by consumers of the provider.
                 */
                this.invokeOnInitCallbacks(instance, instanceIdentifier);
                /**
                 * Order is important
                 * onInstanceCreated() should be called after this.instances.set(instanceIdentifier, instance); which
                 * makes `isInitialized()` return true.
                 */
                if (this.component.onInstanceCreated) {
                    try {
                        this.component.onInstanceCreated(this.container, instanceIdentifier, instance);
                    }
                    catch {
                        // ignore errors in the onInstanceCreatedCallback
                    }
                }
            }
            return instance || null;
        }
        normalizeInstanceIdentifier(identifier = DEFAULT_ENTRY_NAME$1) {
            if (this.component) {
                return this.component.multipleInstances ? identifier : DEFAULT_ENTRY_NAME$1;
            }
            else {
                return identifier; // assume multiple instances are supported before the component is provided.
            }
        }
        shouldAutoInitialize() {
            return (!!this.component &&
                this.component.instantiationMode !== "EXPLICIT" /* InstantiationMode.EXPLICIT */);
        }
    }
    // undefined should be passed to the service factory for the default instance
    function normalizeIdentifierForFactory(identifier) {
        return identifier === DEFAULT_ENTRY_NAME$1 ? undefined : identifier;
    }
    function isComponentEager(component) {
        return component.instantiationMode === "EAGER" /* InstantiationMode.EAGER */;
    }

    /**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * ComponentContainer that provides Providers for service name T, e.g. `auth`, `auth-internal`
     */
    class ComponentContainer {
        constructor(name) {
            this.name = name;
            this.providers = new Map();
        }
        /**
         *
         * @param component Component being added
         * @param overwrite When a component with the same name has already been registered,
         * if overwrite is true: overwrite the existing component with the new component and create a new
         * provider with the new component. It can be useful in tests where you want to use different mocks
         * for different tests.
         * if overwrite is false: throw an exception
         */
        addComponent(component) {
            const provider = this.getProvider(component.name);
            if (provider.isComponentSet()) {
                throw new Error(`Component ${component.name} has already been registered with ${this.name}`);
            }
            provider.setComponent(component);
        }
        addOrOverwriteComponent(component) {
            const provider = this.getProvider(component.name);
            if (provider.isComponentSet()) {
                // delete the existing provider from the container, so we can register the new component
                this.providers.delete(component.name);
            }
            this.addComponent(component);
        }
        /**
         * getProvider provides a type safe interface where it can only be called with a field name
         * present in NameServiceMapping interface.
         *
         * Firebase SDKs providing services should extend NameServiceMapping interface to register
         * themselves.
         */
        getProvider(name) {
            if (this.providers.has(name)) {
                return this.providers.get(name);
            }
            // create a Provider for a service that hasn't registered with Firebase
            const provider = new Provider(name, this);
            this.providers.set(name, provider);
            return provider;
        }
        getProviders() {
            return Array.from(this.providers.values());
        }
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * A container for all of the Logger instances
     */
    /**
     * The JS SDK supports 5 log levels and also allows a user the ability to
     * silence the logs altogether.
     *
     * The order is a follows:
     * DEBUG < VERBOSE < INFO < WARN < ERROR
     *
     * All of the log types above the current log level will be captured (i.e. if
     * you set the log level to `INFO`, errors will still be logged, but `DEBUG` and
     * `VERBOSE` logs will not)
     */
    var LogLevel;
    (function (LogLevel) {
        LogLevel[LogLevel["DEBUG"] = 0] = "DEBUG";
        LogLevel[LogLevel["VERBOSE"] = 1] = "VERBOSE";
        LogLevel[LogLevel["INFO"] = 2] = "INFO";
        LogLevel[LogLevel["WARN"] = 3] = "WARN";
        LogLevel[LogLevel["ERROR"] = 4] = "ERROR";
        LogLevel[LogLevel["SILENT"] = 5] = "SILENT";
    })(LogLevel || (LogLevel = {}));
    const levelStringToEnum = {
        'debug': LogLevel.DEBUG,
        'verbose': LogLevel.VERBOSE,
        'info': LogLevel.INFO,
        'warn': LogLevel.WARN,
        'error': LogLevel.ERROR,
        'silent': LogLevel.SILENT
    };
    /**
     * The default log level
     */
    const defaultLogLevel = LogLevel.INFO;
    /**
     * By default, `console.debug` is not displayed in the developer console (in
     * chrome). To avoid forcing users to have to opt-in to these logs twice
     * (i.e. once for firebase, and once in the console), we are sending `DEBUG`
     * logs to the `console.log` function.
     */
    const ConsoleMethod = {
        [LogLevel.DEBUG]: 'log',
        [LogLevel.VERBOSE]: 'log',
        [LogLevel.INFO]: 'info',
        [LogLevel.WARN]: 'warn',
        [LogLevel.ERROR]: 'error'
    };
    /**
     * The default log handler will forward DEBUG, VERBOSE, INFO, WARN, and ERROR
     * messages on to their corresponding console counterparts (if the log method
     * is supported by the current log level)
     */
    const defaultLogHandler = (instance, logType, ...args) => {
        if (logType < instance.logLevel) {
            return;
        }
        const now = new Date().toISOString();
        const method = ConsoleMethod[logType];
        if (method) {
            console[method](`[${now}]  ${instance.name}:`, ...args);
        }
        else {
            throw new Error(`Attempted to log a message with an invalid logType (value: ${logType})`);
        }
    };
    class Logger {
        /**
         * Gives you an instance of a Logger to capture messages according to
         * Firebase's logging scheme.
         *
         * @param name The name that the logs will be associated with
         */
        constructor(name) {
            this.name = name;
            /**
             * The log level of the given Logger instance.
             */
            this._logLevel = defaultLogLevel;
            /**
             * The main (internal) log handler for the Logger instance.
             * Can be set to a new function in internal package code but not by user.
             */
            this._logHandler = defaultLogHandler;
            /**
             * The optional, additional, user-defined log handler for the Logger instance.
             */
            this._userLogHandler = null;
        }
        get logLevel() {
            return this._logLevel;
        }
        set logLevel(val) {
            if (!(val in LogLevel)) {
                throw new TypeError(`Invalid value "${val}" assigned to \`logLevel\``);
            }
            this._logLevel = val;
        }
        // Workaround for setter/getter having to be the same type.
        setLogLevel(val) {
            this._logLevel = typeof val === 'string' ? levelStringToEnum[val] : val;
        }
        get logHandler() {
            return this._logHandler;
        }
        set logHandler(val) {
            if (typeof val !== 'function') {
                throw new TypeError('Value assigned to `logHandler` must be a function');
            }
            this._logHandler = val;
        }
        get userLogHandler() {
            return this._userLogHandler;
        }
        set userLogHandler(val) {
            this._userLogHandler = val;
        }
        /**
         * The functions below are all based on the `console` interface
         */
        debug(...args) {
            this._userLogHandler && this._userLogHandler(this, LogLevel.DEBUG, ...args);
            this._logHandler(this, LogLevel.DEBUG, ...args);
        }
        log(...args) {
            this._userLogHandler &&
                this._userLogHandler(this, LogLevel.VERBOSE, ...args);
            this._logHandler(this, LogLevel.VERBOSE, ...args);
        }
        info(...args) {
            this._userLogHandler && this._userLogHandler(this, LogLevel.INFO, ...args);
            this._logHandler(this, LogLevel.INFO, ...args);
        }
        warn(...args) {
            this._userLogHandler && this._userLogHandler(this, LogLevel.WARN, ...args);
            this._logHandler(this, LogLevel.WARN, ...args);
        }
        error(...args) {
            this._userLogHandler && this._userLogHandler(this, LogLevel.ERROR, ...args);
            this._logHandler(this, LogLevel.ERROR, ...args);
        }
    }

    const instanceOfAny = (object, constructors) => constructors.some((c) => object instanceof c);

    let idbProxyableTypes;
    let cursorAdvanceMethods;
    // This is a function to prevent it throwing up in node environments.
    function getIdbProxyableTypes() {
        return (idbProxyableTypes ||
            (idbProxyableTypes = [
                IDBDatabase,
                IDBObjectStore,
                IDBIndex,
                IDBCursor,
                IDBTransaction,
            ]));
    }
    // This is a function to prevent it throwing up in node environments.
    function getCursorAdvanceMethods() {
        return (cursorAdvanceMethods ||
            (cursorAdvanceMethods = [
                IDBCursor.prototype.advance,
                IDBCursor.prototype.continue,
                IDBCursor.prototype.continuePrimaryKey,
            ]));
    }
    const cursorRequestMap = new WeakMap();
    const transactionDoneMap = new WeakMap();
    const transactionStoreNamesMap = new WeakMap();
    const transformCache = new WeakMap();
    const reverseTransformCache = new WeakMap();
    function promisifyRequest(request) {
        const promise = new Promise((resolve, reject) => {
            const unlisten = () => {
                request.removeEventListener('success', success);
                request.removeEventListener('error', error);
            };
            const success = () => {
                resolve(wrap(request.result));
                unlisten();
            };
            const error = () => {
                reject(request.error);
                unlisten();
            };
            request.addEventListener('success', success);
            request.addEventListener('error', error);
        });
        promise
            .then((value) => {
            // Since cursoring reuses the IDBRequest (*sigh*), we cache it for later retrieval
            // (see wrapFunction).
            if (value instanceof IDBCursor) {
                cursorRequestMap.set(value, request);
            }
            // Catching to avoid "Uncaught Promise exceptions"
        })
            .catch(() => { });
        // This mapping exists in reverseTransformCache but doesn't doesn't exist in transformCache. This
        // is because we create many promises from a single IDBRequest.
        reverseTransformCache.set(promise, request);
        return promise;
    }
    function cacheDonePromiseForTransaction(tx) {
        // Early bail if we've already created a done promise for this transaction.
        if (transactionDoneMap.has(tx))
            return;
        const done = new Promise((resolve, reject) => {
            const unlisten = () => {
                tx.removeEventListener('complete', complete);
                tx.removeEventListener('error', error);
                tx.removeEventListener('abort', error);
            };
            const complete = () => {
                resolve();
                unlisten();
            };
            const error = () => {
                reject(tx.error || new DOMException('AbortError', 'AbortError'));
                unlisten();
            };
            tx.addEventListener('complete', complete);
            tx.addEventListener('error', error);
            tx.addEventListener('abort', error);
        });
        // Cache it for later retrieval.
        transactionDoneMap.set(tx, done);
    }
    let idbProxyTraps = {
        get(target, prop, receiver) {
            if (target instanceof IDBTransaction) {
                // Special handling for transaction.done.
                if (prop === 'done')
                    return transactionDoneMap.get(target);
                // Polyfill for objectStoreNames because of Edge.
                if (prop === 'objectStoreNames') {
                    return target.objectStoreNames || transactionStoreNamesMap.get(target);
                }
                // Make tx.store return the only store in the transaction, or undefined if there are many.
                if (prop === 'store') {
                    return receiver.objectStoreNames[1]
                        ? undefined
                        : receiver.objectStore(receiver.objectStoreNames[0]);
                }
            }
            // Else transform whatever we get back.
            return wrap(target[prop]);
        },
        set(target, prop, value) {
            target[prop] = value;
            return true;
        },
        has(target, prop) {
            if (target instanceof IDBTransaction &&
                (prop === 'done' || prop === 'store')) {
                return true;
            }
            return prop in target;
        },
    };
    function replaceTraps(callback) {
        idbProxyTraps = callback(idbProxyTraps);
    }
    function wrapFunction(func) {
        // Due to expected object equality (which is enforced by the caching in `wrap`), we
        // only create one new func per func.
        // Edge doesn't support objectStoreNames (booo), so we polyfill it here.
        if (func === IDBDatabase.prototype.transaction &&
            !('objectStoreNames' in IDBTransaction.prototype)) {
            return function (storeNames, ...args) {
                const tx = func.call(unwrap(this), storeNames, ...args);
                transactionStoreNamesMap.set(tx, storeNames.sort ? storeNames.sort() : [storeNames]);
                return wrap(tx);
            };
        }
        // Cursor methods are special, as the behaviour is a little more different to standard IDB. In
        // IDB, you advance the cursor and wait for a new 'success' on the IDBRequest that gave you the
        // cursor. It's kinda like a promise that can resolve with many values. That doesn't make sense
        // with real promises, so each advance methods returns a new promise for the cursor object, or
        // undefined if the end of the cursor has been reached.
        if (getCursorAdvanceMethods().includes(func)) {
            return function (...args) {
                // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use
                // the original object.
                func.apply(unwrap(this), args);
                return wrap(cursorRequestMap.get(this));
            };
        }
        return function (...args) {
            // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use
            // the original object.
            return wrap(func.apply(unwrap(this), args));
        };
    }
    function transformCachableValue(value) {
        if (typeof value === 'function')
            return wrapFunction(value);
        // This doesn't return, it just creates a 'done' promise for the transaction,
        // which is later returned for transaction.done (see idbObjectHandler).
        if (value instanceof IDBTransaction)
            cacheDonePromiseForTransaction(value);
        if (instanceOfAny(value, getIdbProxyableTypes()))
            return new Proxy(value, idbProxyTraps);
        // Return the same value back if we're not going to transform it.
        return value;
    }
    function wrap(value) {
        // We sometimes generate multiple promises from a single IDBRequest (eg when cursoring), because
        // IDB is weird and a single IDBRequest can yield many responses, so these can't be cached.
        if (value instanceof IDBRequest)
            return promisifyRequest(value);
        // If we've already transformed this value before, reuse the transformed value.
        // This is faster, but it also provides object equality.
        if (transformCache.has(value))
            return transformCache.get(value);
        const newValue = transformCachableValue(value);
        // Not all types are transformed.
        // These may be primitive types, so they can't be WeakMap keys.
        if (newValue !== value) {
            transformCache.set(value, newValue);
            reverseTransformCache.set(newValue, value);
        }
        return newValue;
    }
    const unwrap = (value) => reverseTransformCache.get(value);

    /**
     * Open a database.
     *
     * @param name Name of the database.
     * @param version Schema version.
     * @param callbacks Additional callbacks.
     */
    function openDB(name, version, { blocked, upgrade, blocking, terminated } = {}) {
        const request = indexedDB.open(name, version);
        const openPromise = wrap(request);
        if (upgrade) {
            request.addEventListener('upgradeneeded', (event) => {
                upgrade(wrap(request.result), event.oldVersion, event.newVersion, wrap(request.transaction), event);
            });
        }
        if (blocked) {
            request.addEventListener('blocked', (event) => blocked(
            // Casting due to https://github.com/microsoft/TypeScript-DOM-lib-generator/pull/1405
            event.oldVersion, event.newVersion, event));
        }
        openPromise
            .then((db) => {
            if (terminated)
                db.addEventListener('close', () => terminated());
            if (blocking) {
                db.addEventListener('versionchange', (event) => blocking(event.oldVersion, event.newVersion, event));
            }
        })
            .catch(() => { });
        return openPromise;
    }

    const readMethods = ['get', 'getKey', 'getAll', 'getAllKeys', 'count'];
    const writeMethods = ['put', 'add', 'delete', 'clear'];
    const cachedMethods = new Map();
    function getMethod(target, prop) {
        if (!(target instanceof IDBDatabase &&
            !(prop in target) &&
            typeof prop === 'string')) {
            return;
        }
        if (cachedMethods.get(prop))
            return cachedMethods.get(prop);
        const targetFuncName = prop.replace(/FromIndex$/, '');
        const useIndex = prop !== targetFuncName;
        const isWrite = writeMethods.includes(targetFuncName);
        if (
        // Bail if the target doesn't exist on the target. Eg, getAll isn't in Edge.
        !(targetFuncName in (useIndex ? IDBIndex : IDBObjectStore).prototype) ||
            !(isWrite || readMethods.includes(targetFuncName))) {
            return;
        }
        const method = async function (storeName, ...args) {
            // isWrite ? 'readwrite' : undefined gzipps better, but fails in Edge :(
            const tx = this.transaction(storeName, isWrite ? 'readwrite' : 'readonly');
            let target = tx.store;
            if (useIndex)
                target = target.index(args.shift());
            // Must reject if op rejects.
            // If it's a write operation, must reject if tx.done rejects.
            // Must reject with op rejection first.
            // Must resolve with op value.
            // Must handle both promises (no unhandled rejections)
            return (await Promise.all([
                target[targetFuncName](...args),
                isWrite && tx.done,
            ]))[0];
        };
        cachedMethods.set(prop, method);
        return method;
    }
    replaceTraps((oldTraps) => ({
        ...oldTraps,
        get: (target, prop, receiver) => getMethod(target, prop) || oldTraps.get(target, prop, receiver),
        has: (target, prop) => !!getMethod(target, prop) || oldTraps.has(target, prop),
    }));

    /**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    class PlatformLoggerServiceImpl {
        constructor(container) {
            this.container = container;
        }
        // In initial implementation, this will be called by installations on
        // auth token refresh, and installations will send this string.
        getPlatformInfoString() {
            const providers = this.container.getProviders();
            // Loop through providers and get library/version pairs from any that are
            // version components.
            return providers
                .map(provider => {
                if (isVersionServiceProvider(provider)) {
                    const service = provider.getImmediate();
                    return `${service.library}/${service.version}`;
                }
                else {
                    return null;
                }
            })
                .filter(logString => logString)
                .join(' ');
        }
    }
    /**
     *
     * @param provider check if this provider provides a VersionService
     *
     * NOTE: Using Provider<'app-version'> is a hack to indicate that the provider
     * provides VersionService. The provider is not necessarily a 'app-version'
     * provider.
     */
    function isVersionServiceProvider(provider) {
        const component = provider.getComponent();
        return component?.type === "VERSION" /* ComponentType.VERSION */;
    }

    const name$q = "@firebase/app";
    const version$1 = "0.14.6";

    /**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    const logger = new Logger('@firebase/app');

    const name$p = "@firebase/app-compat";

    const name$o = "@firebase/analytics-compat";

    const name$n = "@firebase/analytics";

    const name$m = "@firebase/app-check-compat";

    const name$l = "@firebase/app-check";

    const name$k = "@firebase/auth";

    const name$j = "@firebase/auth-compat";

    const name$i = "@firebase/database";

    const name$h = "@firebase/data-connect";

    const name$g = "@firebase/database-compat";

    const name$f = "@firebase/functions";

    const name$e = "@firebase/functions-compat";

    const name$d = "@firebase/installations";

    const name$c = "@firebase/installations-compat";

    const name$b = "@firebase/messaging";

    const name$a = "@firebase/messaging-compat";

    const name$9 = "@firebase/performance";

    const name$8 = "@firebase/performance-compat";

    const name$7 = "@firebase/remote-config";

    const name$6 = "@firebase/remote-config-compat";

    const name$5 = "@firebase/storage";

    const name$4 = "@firebase/storage-compat";

    const name$3 = "@firebase/firestore";

    const name$2 = "@firebase/ai";

    const name$1 = "@firebase/firestore-compat";

    const name$r = "firebase";
    const version$2 = "12.6.0";

    /**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * The default app name
     *
     * @internal
     */
    const DEFAULT_ENTRY_NAME = '[DEFAULT]';
    const PLATFORM_LOG_STRING = {
        [name$q]: 'fire-core',
        [name$p]: 'fire-core-compat',
        [name$n]: 'fire-analytics',
        [name$o]: 'fire-analytics-compat',
        [name$l]: 'fire-app-check',
        [name$m]: 'fire-app-check-compat',
        [name$k]: 'fire-auth',
        [name$j]: 'fire-auth-compat',
        [name$i]: 'fire-rtdb',
        [name$h]: 'fire-data-connect',
        [name$g]: 'fire-rtdb-compat',
        [name$f]: 'fire-fn',
        [name$e]: 'fire-fn-compat',
        [name$d]: 'fire-iid',
        [name$c]: 'fire-iid-compat',
        [name$b]: 'fire-fcm',
        [name$a]: 'fire-fcm-compat',
        [name$9]: 'fire-perf',
        [name$8]: 'fire-perf-compat',
        [name$7]: 'fire-rc',
        [name$6]: 'fire-rc-compat',
        [name$5]: 'fire-gcs',
        [name$4]: 'fire-gcs-compat',
        [name$3]: 'fire-fst',
        [name$1]: 'fire-fst-compat',
        [name$2]: 'fire-vertex',
        'fire-js': 'fire-js', // Platform identifier for JS SDK.
        [name$r]: 'fire-js-all'
    };

    /**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * @internal
     */
    const _apps = new Map();
    /**
     * @internal
     */
    const _serverApps = new Map();
    /**
     * Registered components.
     *
     * @internal
     */
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    const _components = new Map();
    /**
     * @param component - the component being added to this app's container
     *
     * @internal
     */
    function _addComponent(app, component) {
        try {
            app.container.addComponent(component);
        }
        catch (e) {
            logger.debug(`Component ${component.name} failed to register with FirebaseApp ${app.name}`, e);
        }
    }
    /**
     *
     * @param component - the component to register
     * @returns whether or not the component is registered successfully
     *
     * @internal
     */
    function _registerComponent(component) {
        const componentName = component.name;
        if (_components.has(componentName)) {
            logger.debug(`There were multiple attempts to register component ${componentName}.`);
            return false;
        }
        _components.set(componentName, component);
        // add the component to existing app instances
        for (const app of _apps.values()) {
            _addComponent(app, component);
        }
        for (const serverApp of _serverApps.values()) {
            _addComponent(serverApp, component);
        }
        return true;
    }
    /**
     *
     * @param app - FirebaseApp instance
     * @param name - service name
     *
     * @returns the provider for the service with the matching name
     *
     * @internal
     */
    function _getProvider(app, name) {
        const heartbeatController = app.container
            .getProvider('heartbeat')
            .getImmediate({ optional: true });
        if (heartbeatController) {
            void heartbeatController.triggerHeartbeat();
        }
        return app.container.getProvider(name);
    }
    /**
     *
     * @param obj - an object of type FirebaseApp.
     *
     * @returns true if the provided object is of type FirebaseServerAppImpl.
     *
     * @internal
     */
    function _isFirebaseServerApp(obj) {
        if (obj === null || obj === undefined) {
            return false;
        }
        return obj.settings !== undefined;
    }

    /**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    const ERRORS = {
        ["no-app" /* AppError.NO_APP */]: "No Firebase App '{$appName}' has been created - " +
            'call initializeApp() first',
        ["bad-app-name" /* AppError.BAD_APP_NAME */]: "Illegal App name: '{$appName}'",
        ["duplicate-app" /* AppError.DUPLICATE_APP */]: "Firebase App named '{$appName}' already exists with different options or config",
        ["app-deleted" /* AppError.APP_DELETED */]: "Firebase App named '{$appName}' already deleted",
        ["server-app-deleted" /* AppError.SERVER_APP_DELETED */]: 'Firebase Server App has been deleted',
        ["no-options" /* AppError.NO_OPTIONS */]: 'Need to provide options, when not being deployed to hosting via source.',
        ["invalid-app-argument" /* AppError.INVALID_APP_ARGUMENT */]: 'firebase.{$appName}() takes either no argument or a ' +
            'Firebase App instance.',
        ["invalid-log-argument" /* AppError.INVALID_LOG_ARGUMENT */]: 'First argument to `onLog` must be null or a function.',
        ["idb-open" /* AppError.IDB_OPEN */]: 'Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.',
        ["idb-get" /* AppError.IDB_GET */]: 'Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.',
        ["idb-set" /* AppError.IDB_WRITE */]: 'Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.',
        ["idb-delete" /* AppError.IDB_DELETE */]: 'Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.',
        ["finalization-registry-not-supported" /* AppError.FINALIZATION_REGISTRY_NOT_SUPPORTED */]: 'FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.',
        ["invalid-server-app-environment" /* AppError.INVALID_SERVER_APP_ENVIRONMENT */]: 'FirebaseServerApp is not for use in browser environments.'
    };
    const ERROR_FACTORY = new ErrorFactory('app', 'Firebase', ERRORS);

    /**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    class FirebaseAppImpl {
        constructor(options, config, container) {
            this._isDeleted = false;
            this._options = { ...options };
            this._config = { ...config };
            this._name = config.name;
            this._automaticDataCollectionEnabled =
                config.automaticDataCollectionEnabled;
            this._container = container;
            this.container.addComponent(new Component('app', () => this, "PUBLIC" /* ComponentType.PUBLIC */));
        }
        get automaticDataCollectionEnabled() {
            this.checkDestroyed();
            return this._automaticDataCollectionEnabled;
        }
        set automaticDataCollectionEnabled(val) {
            this.checkDestroyed();
            this._automaticDataCollectionEnabled = val;
        }
        get name() {
            this.checkDestroyed();
            return this._name;
        }
        get options() {
            this.checkDestroyed();
            return this._options;
        }
        get config() {
            this.checkDestroyed();
            return this._config;
        }
        get container() {
            return this._container;
        }
        get isDeleted() {
            return this._isDeleted;
        }
        set isDeleted(val) {
            this._isDeleted = val;
        }
        /**
         * This function will throw an Error if the App has already been deleted -
         * use before performing API actions on the App.
         */
        checkDestroyed() {
            if (this.isDeleted) {
                throw ERROR_FACTORY.create("app-deleted" /* AppError.APP_DELETED */, { appName: this._name });
            }
        }
    }

    /**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * The current SDK version.
     *
     * @public
     */
    const SDK_VERSION = version$2;
    function initializeApp(_options, rawConfig = {}) {
        let options = _options;
        if (typeof rawConfig !== 'object') {
            const name = rawConfig;
            rawConfig = { name };
        }
        const config = {
            name: DEFAULT_ENTRY_NAME,
            automaticDataCollectionEnabled: true,
            ...rawConfig
        };
        const name = config.name;
        if (typeof name !== 'string' || !name) {
            throw ERROR_FACTORY.create("bad-app-name" /* AppError.BAD_APP_NAME */, {
                appName: String(name)
            });
        }
        options || (options = getDefaultAppConfig());
        if (!options) {
            throw ERROR_FACTORY.create("no-options" /* AppError.NO_OPTIONS */);
        }
        const existingApp = _apps.get(name);
        if (existingApp) {
            // return the existing app if options and config deep equal the ones in the existing app.
            if (deepEqual(options, existingApp.options) &&
                deepEqual(config, existingApp.config)) {
                return existingApp;
            }
            else {
                throw ERROR_FACTORY.create("duplicate-app" /* AppError.DUPLICATE_APP */, { appName: name });
            }
        }
        const container = new ComponentContainer(name);
        for (const component of _components.values()) {
            container.addComponent(component);
        }
        const newApp = new FirebaseAppImpl(options, config, container);
        _apps.set(name, newApp);
        return newApp;
    }
    /**
     * Retrieves a {@link @firebase/app#FirebaseApp} instance.
     *
     * When called with no arguments, the default app is returned. When an app name
     * is provided, the app corresponding to that name is returned.
     *
     * An exception is thrown if the app being retrieved has not yet been
     * initialized.
     *
     * @example
     * ```javascript
     * // Return the default app
     * const app = getApp();
     * ```
     *
     * @example
     * ```javascript
     * // Return a named app
     * const otherApp = getApp("otherApp");
     * ```
     *
     * @param name - Optional name of the app to return. If no name is
     *   provided, the default is `"[DEFAULT]"`.
     *
     * @returns The app corresponding to the provided app name.
     *   If no app name is provided, the default app is returned.
     *
     * @public
     */
    function getApp(name = DEFAULT_ENTRY_NAME) {
        const app = _apps.get(name);
        if (!app && name === DEFAULT_ENTRY_NAME && getDefaultAppConfig()) {
            return initializeApp();
        }
        if (!app) {
            throw ERROR_FACTORY.create("no-app" /* AppError.NO_APP */, { appName: name });
        }
        return app;
    }
    /**
     * Registers a library's name and version for platform logging purposes.
     * @param library - Name of 1p or 3p library (e.g. firestore, angularfire)
     * @param version - Current version of that library.
     * @param variant - Bundle variant, e.g., node, rn, etc.
     *
     * @public
     */
    function registerVersion(libraryKeyOrName, version, variant) {
        // TODO: We can use this check to whitelist strings when/if we set up
        // a good whitelist system.
        let library = PLATFORM_LOG_STRING[libraryKeyOrName] ?? libraryKeyOrName;
        if (variant) {
            library += `-${variant}`;
        }
        const libraryMismatch = library.match(/\s|\//);
        const versionMismatch = version.match(/\s|\//);
        if (libraryMismatch || versionMismatch) {
            const warning = [
                `Unable to register library "${library}" with version "${version}":`
            ];
            if (libraryMismatch) {
                warning.push(`library name "${library}" contains illegal characters (whitespace or "/")`);
            }
            if (libraryMismatch && versionMismatch) {
                warning.push('and');
            }
            if (versionMismatch) {
                warning.push(`version name "${version}" contains illegal characters (whitespace or "/")`);
            }
            logger.warn(warning.join(' '));
            return;
        }
        _registerComponent(new Component(`${library}-version`, () => ({ library, version }), "VERSION" /* ComponentType.VERSION */));
    }

    /**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    const DB_NAME = 'firebase-heartbeat-database';
    const DB_VERSION = 1;
    const STORE_NAME = 'firebase-heartbeat-store';
    let dbPromise = null;
    function getDbPromise() {
        if (!dbPromise) {
            dbPromise = openDB(DB_NAME, DB_VERSION, {
                upgrade: (db, oldVersion) => {
                    // We don't use 'break' in this switch statement, the fall-through
                    // behavior is what we want, because if there are multiple versions between
                    // the old version and the current version, we want ALL the migrations
                    // that correspond to those versions to run, not only the last one.
                    // eslint-disable-next-line default-case
                    switch (oldVersion) {
                        case 0:
                            try {
                                db.createObjectStore(STORE_NAME);
                            }
                            catch (e) {
                                // Safari/iOS browsers throw occasional exceptions on
                                // db.createObjectStore() that may be a bug. Avoid blocking
                                // the rest of the app functionality.
                                console.warn(e);
                            }
                    }
                }
            }).catch(e => {
                throw ERROR_FACTORY.create("idb-open" /* AppError.IDB_OPEN */, {
                    originalErrorMessage: e.message
                });
            });
        }
        return dbPromise;
    }
    async function readHeartbeatsFromIndexedDB(app) {
        try {
            const db = await getDbPromise();
            const tx = db.transaction(STORE_NAME);
            const result = await tx.objectStore(STORE_NAME).get(computeKey(app));
            // We already have the value but tx.done can throw,
            // so we need to await it here to catch errors
            await tx.done;
            return result;
        }
        catch (e) {
            if (e instanceof FirebaseError) {
                logger.warn(e.message);
            }
            else {
                const idbGetError = ERROR_FACTORY.create("idb-get" /* AppError.IDB_GET */, {
                    originalErrorMessage: e?.message
                });
                logger.warn(idbGetError.message);
            }
        }
    }
    async function writeHeartbeatsToIndexedDB(app, heartbeatObject) {
        try {
            const db = await getDbPromise();
            const tx = db.transaction(STORE_NAME, 'readwrite');
            const objectStore = tx.objectStore(STORE_NAME);
            await objectStore.put(heartbeatObject, computeKey(app));
            await tx.done;
        }
        catch (e) {
            if (e instanceof FirebaseError) {
                logger.warn(e.message);
            }
            else {
                const idbGetError = ERROR_FACTORY.create("idb-set" /* AppError.IDB_WRITE */, {
                    originalErrorMessage: e?.message
                });
                logger.warn(idbGetError.message);
            }
        }
    }
    function computeKey(app) {
        return `${app.name}!${app.options.appId}`;
    }

    /**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    const MAX_HEADER_BYTES = 1024;
    const MAX_NUM_STORED_HEARTBEATS = 30;
    class HeartbeatServiceImpl {
        constructor(container) {
            this.container = container;
            /**
             * In-memory cache for heartbeats, used by getHeartbeatsHeader() to generate
             * the header string.
             * Stores one record per date. This will be consolidated into the standard
             * format of one record per user agent string before being sent as a header.
             * Populated from indexedDB when the controller is instantiated and should
             * be kept in sync with indexedDB.
             * Leave public for easier testing.
             */
            this._heartbeatsCache = null;
            const app = this.container.getProvider('app').getImmediate();
            this._storage = new HeartbeatStorageImpl(app);
            this._heartbeatsCachePromise = this._storage.read().then(result => {
                this._heartbeatsCache = result;
                return result;
            });
        }
        /**
         * Called to report a heartbeat. The function will generate
         * a HeartbeatsByUserAgent object, update heartbeatsCache, and persist it
         * to IndexedDB.
         * Note that we only store one heartbeat per day. So if a heartbeat for today is
         * already logged, subsequent calls to this function in the same day will be ignored.
         */
        async triggerHeartbeat() {
            try {
                const platformLogger = this.container
                    .getProvider('platform-logger')
                    .getImmediate();
                // This is the "Firebase user agent" string from the platform logger
                // service, not the browser user agent.
                const agent = platformLogger.getPlatformInfoString();
                const date = getUTCDateString();
                if (this._heartbeatsCache?.heartbeats == null) {
                    this._heartbeatsCache = await this._heartbeatsCachePromise;
                    // If we failed to construct a heartbeats cache, then return immediately.
                    if (this._heartbeatsCache?.heartbeats == null) {
                        return;
                    }
                }
                // Do not store a heartbeat if one is already stored for this day
                // or if a header has already been sent today.
                if (this._heartbeatsCache.lastSentHeartbeatDate === date ||
                    this._heartbeatsCache.heartbeats.some(singleDateHeartbeat => singleDateHeartbeat.date === date)) {
                    return;
                }
                else {
                    // There is no entry for this date. Create one.
                    this._heartbeatsCache.heartbeats.push({ date, agent });
                    // If the number of stored heartbeats exceeds the maximum number of stored heartbeats, remove the heartbeat with the earliest date.
                    // Since this is executed each time a heartbeat is pushed, the limit can only be exceeded by one, so only one needs to be removed.
                    if (this._heartbeatsCache.heartbeats.length > MAX_NUM_STORED_HEARTBEATS) {
                        const earliestHeartbeatIdx = getEarliestHeartbeatIdx(this._heartbeatsCache.heartbeats);
                        this._heartbeatsCache.heartbeats.splice(earliestHeartbeatIdx, 1);
                    }
                }
                return this._storage.overwrite(this._heartbeatsCache);
            }
            catch (e) {
                logger.warn(e);
            }
        }
        /**
         * Returns a base64 encoded string which can be attached to the heartbeat-specific header directly.
         * It also clears all heartbeats from memory as well as in IndexedDB.
         *
         * NOTE: Consuming product SDKs should not send the header if this method
         * returns an empty string.
         */
        async getHeartbeatsHeader() {
            try {
                if (this._heartbeatsCache === null) {
                    await this._heartbeatsCachePromise;
                }
                // If it's still null or the array is empty, there is no data to send.
                if (this._heartbeatsCache?.heartbeats == null ||
                    this._heartbeatsCache.heartbeats.length === 0) {
                    return '';
                }
                const date = getUTCDateString();
                // Extract as many heartbeats from the cache as will fit under the size limit.
                const { heartbeatsToSend, unsentEntries } = extractHeartbeatsForHeader(this._heartbeatsCache.heartbeats);
                const headerString = base64urlEncodeWithoutPadding(JSON.stringify({ version: 2, heartbeats: heartbeatsToSend }));
                // Store last sent date to prevent another being logged/sent for the same day.
                this._heartbeatsCache.lastSentHeartbeatDate = date;
                if (unsentEntries.length > 0) {
                    // Store any unsent entries if they exist.
                    this._heartbeatsCache.heartbeats = unsentEntries;
                    // This seems more likely than emptying the array (below) to lead to some odd state
                    // since the cache isn't empty and this will be called again on the next request,
                    // and is probably safest if we await it.
                    await this._storage.overwrite(this._heartbeatsCache);
                }
                else {
                    this._heartbeatsCache.heartbeats = [];
                    // Do not wait for this, to reduce latency.
                    void this._storage.overwrite(this._heartbeatsCache);
                }
                return headerString;
            }
            catch (e) {
                logger.warn(e);
                return '';
            }
        }
    }
    function getUTCDateString() {
        const today = new Date();
        // Returns date format 'YYYY-MM-DD'
        return today.toISOString().substring(0, 10);
    }
    function extractHeartbeatsForHeader(heartbeatsCache, maxSize = MAX_HEADER_BYTES) {
        // Heartbeats grouped by user agent in the standard format to be sent in
        // the header.
        const heartbeatsToSend = [];
        // Single date format heartbeats that are not sent.
        let unsentEntries = heartbeatsCache.slice();
        for (const singleDateHeartbeat of heartbeatsCache) {
            // Look for an existing entry with the same user agent.
            const heartbeatEntry = heartbeatsToSend.find(hb => hb.agent === singleDateHeartbeat.agent);
            if (!heartbeatEntry) {
                // If no entry for this user agent exists, create one.
                heartbeatsToSend.push({
                    agent: singleDateHeartbeat.agent,
                    dates: [singleDateHeartbeat.date]
                });
                if (countBytes(heartbeatsToSend) > maxSize) {
                    // If the header would exceed max size, remove the added heartbeat
                    // entry and stop adding to the header.
                    heartbeatsToSend.pop();
                    break;
                }
            }
            else {
                heartbeatEntry.dates.push(singleDateHeartbeat.date);
                // If the header would exceed max size, remove the added date
                // and stop adding to the header.
                if (countBytes(heartbeatsToSend) > maxSize) {
                    heartbeatEntry.dates.pop();
                    break;
                }
            }
            // Pop unsent entry from queue. (Skipped if adding the entry exceeded
            // quota and the loop breaks early.)
            unsentEntries = unsentEntries.slice(1);
        }
        return {
            heartbeatsToSend,
            unsentEntries
        };
    }
    class HeartbeatStorageImpl {
        constructor(app) {
            this.app = app;
            this._canUseIndexedDBPromise = this.runIndexedDBEnvironmentCheck();
        }
        async runIndexedDBEnvironmentCheck() {
            if (!isIndexedDBAvailable()) {
                return false;
            }
            else {
                return validateIndexedDBOpenable()
                    .then(() => true)
                    .catch(() => false);
            }
        }
        /**
         * Read all heartbeats.
         */
        async read() {
            const canUseIndexedDB = await this._canUseIndexedDBPromise;
            if (!canUseIndexedDB) {
                return { heartbeats: [] };
            }
            else {
                const idbHeartbeatObject = await readHeartbeatsFromIndexedDB(this.app);
                if (idbHeartbeatObject?.heartbeats) {
                    return idbHeartbeatObject;
                }
                else {
                    return { heartbeats: [] };
                }
            }
        }
        // overwrite the storage with the provided heartbeats
        async overwrite(heartbeatsObject) {
            const canUseIndexedDB = await this._canUseIndexedDBPromise;
            if (!canUseIndexedDB) {
                return;
            }
            else {
                const existingHeartbeatsObject = await this.read();
                return writeHeartbeatsToIndexedDB(this.app, {
                    lastSentHeartbeatDate: heartbeatsObject.lastSentHeartbeatDate ??
                        existingHeartbeatsObject.lastSentHeartbeatDate,
                    heartbeats: heartbeatsObject.heartbeats
                });
            }
        }
        // add heartbeats
        async add(heartbeatsObject) {
            const canUseIndexedDB = await this._canUseIndexedDBPromise;
            if (!canUseIndexedDB) {
                return;
            }
            else {
                const existingHeartbeatsObject = await this.read();
                return writeHeartbeatsToIndexedDB(this.app, {
                    lastSentHeartbeatDate: heartbeatsObject.lastSentHeartbeatDate ??
                        existingHeartbeatsObject.lastSentHeartbeatDate,
                    heartbeats: [
                        ...existingHeartbeatsObject.heartbeats,
                        ...heartbeatsObject.heartbeats
                    ]
                });
            }
        }
    }
    /**
     * Calculate bytes of a HeartbeatsByUserAgent array after being wrapped
     * in a platform logging header JSON object, stringified, and converted
     * to base 64.
     */
    function countBytes(heartbeatsCache) {
        // base64 has a restricted set of characters, all of which should be 1 byte.
        return base64urlEncodeWithoutPadding(
        // heartbeatsCache wrapper properties
        JSON.stringify({ version: 2, heartbeats: heartbeatsCache })).length;
    }
    /**
     * Returns the index of the heartbeat with the earliest date.
     * If the heartbeats array is empty, -1 is returned.
     */
    function getEarliestHeartbeatIdx(heartbeats) {
        if (heartbeats.length === 0) {
            return -1;
        }
        let earliestHeartbeatIdx = 0;
        let earliestHeartbeatDate = heartbeats[0].date;
        for (let i = 1; i < heartbeats.length; i++) {
            if (heartbeats[i].date < earliestHeartbeatDate) {
                earliestHeartbeatDate = heartbeats[i].date;
                earliestHeartbeatIdx = i;
            }
        }
        return earliestHeartbeatIdx;
    }

    /**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    function registerCoreComponents(variant) {
        _registerComponent(new Component('platform-logger', container => new PlatformLoggerServiceImpl(container), "PRIVATE" /* ComponentType.PRIVATE */));
        _registerComponent(new Component('heartbeat', container => new HeartbeatServiceImpl(container), "PRIVATE" /* ComponentType.PRIVATE */));
        // Register `app` package.
        registerVersion(name$q, version$1, variant);
        // BUILD_TARGET will be replaced by values like esm, cjs, etc during the compilation
        registerVersion(name$q, version$1, 'esm2020');
        // Register platform SDK identifier (no version).
        registerVersion('fire-js', '');
    }

    /**
     * Firebase App
     *
     * @remarks This package coordinates the communication between the different Firebase components
     * @packageDocumentation
     */
    registerCoreComponents('');

    var name = "firebase";
    var version = "12.6.0";

    /**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    registerVersion(name, version, 'app');

    var commonjsGlobal$1 = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};

    /** @license
    Copyright The Closure Library Authors.
    SPDX-License-Identifier: Apache-2.0
    */

    var Integer;
    var Md5;
    (function() {var h;/** @license

     Copyright The Closure Library Authors.
     SPDX-License-Identifier: Apache-2.0
    */
    function k(d,a){function c(){}c.prototype=a.prototype;d.F=a.prototype;d.prototype=new c;d.prototype.constructor=d;d.D=function(f,e,g){for(var b=Array(arguments.length-2),r=2;r<arguments.length;r++)b[r-2]=arguments[r];return a.prototype[e].apply(f,b)};}function l(){this.blockSize=-1;}function m(){this.blockSize=-1;this.blockSize=64;this.g=Array(4);this.C=Array(this.blockSize);this.o=this.h=0;this.u();}k(m,l);m.prototype.u=function(){this.g[0]=1732584193;this.g[1]=4023233417;this.g[2]=2562383102;this.g[3]=271733878;this.o=this.h=0;};
    function n(d,a,c){c||(c=0);const f=Array(16);if(typeof a==="string")for(var e=0;e<16;++e)f[e]=a.charCodeAt(c++)|a.charCodeAt(c++)<<8|a.charCodeAt(c++)<<16|a.charCodeAt(c++)<<24;else for(e=0;e<16;++e)f[e]=a[c++]|a[c++]<<8|a[c++]<<16|a[c++]<<24;a=d.g[0];c=d.g[1];e=d.g[2];let g=d.g[3],b;b=a+(g^c&(e^g))+f[0]+3614090360&4294967295;a=c+(b<<7&4294967295|b>>>25);b=g+(e^a&(c^e))+f[1]+3905402710&4294967295;g=a+(b<<12&4294967295|b>>>20);b=e+(c^g&(a^c))+f[2]+606105819&4294967295;e=g+(b<<17&4294967295|b>>>15);
    b=c+(a^e&(g^a))+f[3]+3250441966&4294967295;c=e+(b<<22&4294967295|b>>>10);b=a+(g^c&(e^g))+f[4]+4118548399&4294967295;a=c+(b<<7&4294967295|b>>>25);b=g+(e^a&(c^e))+f[5]+1200080426&4294967295;g=a+(b<<12&4294967295|b>>>20);b=e+(c^g&(a^c))+f[6]+2821735955&4294967295;e=g+(b<<17&4294967295|b>>>15);b=c+(a^e&(g^a))+f[7]+4249261313&4294967295;c=e+(b<<22&4294967295|b>>>10);b=a+(g^c&(e^g))+f[8]+1770035416&4294967295;a=c+(b<<7&4294967295|b>>>25);b=g+(e^a&(c^e))+f[9]+2336552879&4294967295;g=a+(b<<12&4294967295|
    b>>>20);b=e+(c^g&(a^c))+f[10]+4294925233&4294967295;e=g+(b<<17&4294967295|b>>>15);b=c+(a^e&(g^a))+f[11]+2304563134&4294967295;c=e+(b<<22&4294967295|b>>>10);b=a+(g^c&(e^g))+f[12]+1804603682&4294967295;a=c+(b<<7&4294967295|b>>>25);b=g+(e^a&(c^e))+f[13]+4254626195&4294967295;g=a+(b<<12&4294967295|b>>>20);b=e+(c^g&(a^c))+f[14]+2792965006&4294967295;e=g+(b<<17&4294967295|b>>>15);b=c+(a^e&(g^a))+f[15]+1236535329&4294967295;c=e+(b<<22&4294967295|b>>>10);b=a+(e^g&(c^e))+f[1]+4129170786&4294967295;a=c+(b<<
    5&4294967295|b>>>27);b=g+(c^e&(a^c))+f[6]+3225465664&4294967295;g=a+(b<<9&4294967295|b>>>23);b=e+(a^c&(g^a))+f[11]+643717713&4294967295;e=g+(b<<14&4294967295|b>>>18);b=c+(g^a&(e^g))+f[0]+3921069994&4294967295;c=e+(b<<20&4294967295|b>>>12);b=a+(e^g&(c^e))+f[5]+3593408605&4294967295;a=c+(b<<5&4294967295|b>>>27);b=g+(c^e&(a^c))+f[10]+38016083&4294967295;g=a+(b<<9&4294967295|b>>>23);b=e+(a^c&(g^a))+f[15]+3634488961&4294967295;e=g+(b<<14&4294967295|b>>>18);b=c+(g^a&(e^g))+f[4]+3889429448&4294967295;c=
    e+(b<<20&4294967295|b>>>12);b=a+(e^g&(c^e))+f[9]+568446438&4294967295;a=c+(b<<5&4294967295|b>>>27);b=g+(c^e&(a^c))+f[14]+3275163606&4294967295;g=a+(b<<9&4294967295|b>>>23);b=e+(a^c&(g^a))+f[3]+4107603335&4294967295;e=g+(b<<14&4294967295|b>>>18);b=c+(g^a&(e^g))+f[8]+1163531501&4294967295;c=e+(b<<20&4294967295|b>>>12);b=a+(e^g&(c^e))+f[13]+2850285829&4294967295;a=c+(b<<5&4294967295|b>>>27);b=g+(c^e&(a^c))+f[2]+4243563512&4294967295;g=a+(b<<9&4294967295|b>>>23);b=e+(a^c&(g^a))+f[7]+1735328473&4294967295;
    e=g+(b<<14&4294967295|b>>>18);b=c+(g^a&(e^g))+f[12]+2368359562&4294967295;c=e+(b<<20&4294967295|b>>>12);b=a+(c^e^g)+f[5]+4294588738&4294967295;a=c+(b<<4&4294967295|b>>>28);b=g+(a^c^e)+f[8]+2272392833&4294967295;g=a+(b<<11&4294967295|b>>>21);b=e+(g^a^c)+f[11]+1839030562&4294967295;e=g+(b<<16&4294967295|b>>>16);b=c+(e^g^a)+f[14]+4259657740&4294967295;c=e+(b<<23&4294967295|b>>>9);b=a+(c^e^g)+f[1]+2763975236&4294967295;a=c+(b<<4&4294967295|b>>>28);b=g+(a^c^e)+f[4]+1272893353&4294967295;g=a+(b<<11&4294967295|
    b>>>21);b=e+(g^a^c)+f[7]+4139469664&4294967295;e=g+(b<<16&4294967295|b>>>16);b=c+(e^g^a)+f[10]+3200236656&4294967295;c=e+(b<<23&4294967295|b>>>9);b=a+(c^e^g)+f[13]+681279174&4294967295;a=c+(b<<4&4294967295|b>>>28);b=g+(a^c^e)+f[0]+3936430074&4294967295;g=a+(b<<11&4294967295|b>>>21);b=e+(g^a^c)+f[3]+3572445317&4294967295;e=g+(b<<16&4294967295|b>>>16);b=c+(e^g^a)+f[6]+76029189&4294967295;c=e+(b<<23&4294967295|b>>>9);b=a+(c^e^g)+f[9]+3654602809&4294967295;a=c+(b<<4&4294967295|b>>>28);b=g+(a^c^e)+f[12]+
    3873151461&4294967295;g=a+(b<<11&4294967295|b>>>21);b=e+(g^a^c)+f[15]+530742520&4294967295;e=g+(b<<16&4294967295|b>>>16);b=c+(e^g^a)+f[2]+3299628645&4294967295;c=e+(b<<23&4294967295|b>>>9);b=a+(e^(c|~g))+f[0]+4096336452&4294967295;a=c+(b<<6&4294967295|b>>>26);b=g+(c^(a|~e))+f[7]+1126891415&4294967295;g=a+(b<<10&4294967295|b>>>22);b=e+(a^(g|~c))+f[14]+2878612391&4294967295;e=g+(b<<15&4294967295|b>>>17);b=c+(g^(e|~a))+f[5]+4237533241&4294967295;c=e+(b<<21&4294967295|b>>>11);b=a+(e^(c|~g))+f[12]+1700485571&
    4294967295;a=c+(b<<6&4294967295|b>>>26);b=g+(c^(a|~e))+f[3]+2399980690&4294967295;g=a+(b<<10&4294967295|b>>>22);b=e+(a^(g|~c))+f[10]+4293915773&4294967295;e=g+(b<<15&4294967295|b>>>17);b=c+(g^(e|~a))+f[1]+2240044497&4294967295;c=e+(b<<21&4294967295|b>>>11);b=a+(e^(c|~g))+f[8]+1873313359&4294967295;a=c+(b<<6&4294967295|b>>>26);b=g+(c^(a|~e))+f[15]+4264355552&4294967295;g=a+(b<<10&4294967295|b>>>22);b=e+(a^(g|~c))+f[6]+2734768916&4294967295;e=g+(b<<15&4294967295|b>>>17);b=c+(g^(e|~a))+f[13]+1309151649&
    4294967295;c=e+(b<<21&4294967295|b>>>11);b=a+(e^(c|~g))+f[4]+4149444226&4294967295;a=c+(b<<6&4294967295|b>>>26);b=g+(c^(a|~e))+f[11]+3174756917&4294967295;g=a+(b<<10&4294967295|b>>>22);b=e+(a^(g|~c))+f[2]+718787259&4294967295;e=g+(b<<15&4294967295|b>>>17);b=c+(g^(e|~a))+f[9]+3951481745&4294967295;d.g[0]=d.g[0]+a&4294967295;d.g[1]=d.g[1]+(e+(b<<21&4294967295|b>>>11))&4294967295;d.g[2]=d.g[2]+e&4294967295;d.g[3]=d.g[3]+g&4294967295;}
    m.prototype.v=function(d,a){a===void 0&&(a=d.length);const c=a-this.blockSize,f=this.C;let e=this.h,g=0;for(;g<a;){if(e==0)for(;g<=c;)n(this,d,g),g+=this.blockSize;if(typeof d==="string")for(;g<a;){if(f[e++]=d.charCodeAt(g++),e==this.blockSize){n(this,f);e=0;break}}else for(;g<a;)if(f[e++]=d[g++],e==this.blockSize){n(this,f);e=0;break}}this.h=e;this.o+=a;};
    m.prototype.A=function(){var d=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);d[0]=128;for(var a=1;a<d.length-8;++a)d[a]=0;a=this.o*8;for(var c=d.length-8;c<d.length;++c)d[c]=a&255,a/=256;this.v(d);d=Array(16);a=0;for(c=0;c<4;++c)for(let f=0;f<32;f+=8)d[a++]=this.g[c]>>>f&255;return d};function p(d,a){var c=q;return Object.prototype.hasOwnProperty.call(c,d)?c[d]:c[d]=a(d)}function t(d,a){this.h=a;const c=[];let f=true;for(let e=d.length-1;e>=0;e--){const g=d[e]|0;f&&g==a||(c[e]=g,f=false);}this.g=c;}var q={};function u(d){return -128<=d&&d<128?p(d,function(a){return new t([a|0],a<0?-1:0)}):new t([d|0],d<0?-1:0)}function v(d){if(isNaN(d)||!isFinite(d))return w;if(d<0)return x(v(-d));const a=[];let c=1;for(let f=0;d>=c;f++)a[f]=d/c|0,c*=4294967296;return new t(a,0)}
    function y(d,a){if(d.length==0)throw Error("number format error: empty string");a=a||10;if(a<2||36<a)throw Error("radix out of range: "+a);if(d.charAt(0)=="-")return x(y(d.substring(1),a));if(d.indexOf("-")>=0)throw Error('number format error: interior "-" character');const c=v(Math.pow(a,8));let f=w;for(let g=0;g<d.length;g+=8){var e=Math.min(8,d.length-g);const b=parseInt(d.substring(g,g+e),a);e<8?(e=v(Math.pow(a,e)),f=f.j(e).add(v(b))):(f=f.j(c),f=f.add(v(b)));}return f}var w=u(0),z=u(1),A=u(16777216);
    h=t.prototype;h.m=function(){if(B(this))return -x(this).m();let d=0,a=1;for(let c=0;c<this.g.length;c++){const f=this.i(c);d+=(f>=0?f:4294967296+f)*a;a*=4294967296;}return d};
    h.toString=function(d){d=d||10;if(d<2||36<d)throw Error("radix out of range: "+d);if(C(this))return "0";if(B(this))return "-"+x(this).toString(d);const a=v(Math.pow(d,6));var c=this;let f="";for(;;){const e=D(c,a).g;c=F(c,e.j(a));let g=((c.g.length>0?c.g[0]:c.h)>>>0).toString(d);c=e;if(C(c))return g+f;for(;g.length<6;)g="0"+g;f=g+f;}};h.i=function(d){return d<0?0:d<this.g.length?this.g[d]:this.h};function C(d){if(d.h!=0)return false;for(let a=0;a<d.g.length;a++)if(d.g[a]!=0)return false;return true}
    function B(d){return d.h==-1}h.l=function(d){d=F(this,d);return B(d)?-1:C(d)?0:1};function x(d){const a=d.g.length,c=[];for(let f=0;f<a;f++)c[f]=~d.g[f];return (new t(c,~d.h)).add(z)}h.abs=function(){return B(this)?x(this):this};h.add=function(d){const a=Math.max(this.g.length,d.g.length),c=[];let f=0;for(let e=0;e<=a;e++){let g=f+(this.i(e)&65535)+(d.i(e)&65535),b=(g>>>16)+(this.i(e)>>>16)+(d.i(e)>>>16);f=b>>>16;g&=65535;b&=65535;c[e]=b<<16|g;}return new t(c,c[c.length-1]&-2147483648?-1:0)};
    function F(d,a){return d.add(x(a))}
    h.j=function(d){if(C(this)||C(d))return w;if(B(this))return B(d)?x(this).j(x(d)):x(x(this).j(d));if(B(d))return x(this.j(x(d)));if(this.l(A)<0&&d.l(A)<0)return v(this.m()*d.m());const a=this.g.length+d.g.length,c=[];for(var f=0;f<2*a;f++)c[f]=0;for(f=0;f<this.g.length;f++)for(let e=0;e<d.g.length;e++){const g=this.i(f)>>>16,b=this.i(f)&65535,r=d.i(e)>>>16,E=d.i(e)&65535;c[2*f+2*e]+=b*E;G(c,2*f+2*e);c[2*f+2*e+1]+=g*E;G(c,2*f+2*e+1);c[2*f+2*e+1]+=b*r;G(c,2*f+2*e+1);c[2*f+2*e+2]+=g*r;G(c,2*f+2*e+2);}for(d=
    0;d<a;d++)c[d]=c[2*d+1]<<16|c[2*d];for(d=a;d<2*a;d++)c[d]=0;return new t(c,0)};function G(d,a){for(;(d[a]&65535)!=d[a];)d[a+1]+=d[a]>>>16,d[a]&=65535,a++;}function H(d,a){this.g=d;this.h=a;}
    function D(d,a){if(C(a))throw Error("division by zero");if(C(d))return new H(w,w);if(B(d))return a=D(x(d),a),new H(x(a.g),x(a.h));if(B(a))return a=D(d,x(a)),new H(x(a.g),a.h);if(d.g.length>30){if(B(d)||B(a))throw Error("slowDivide_ only works with positive integers.");for(var c=z,f=a;f.l(d)<=0;)c=I(c),f=I(f);var e=J(c,1),g=J(f,1);f=J(f,2);for(c=J(c,2);!C(f);){var b=g.add(f);b.l(d)<=0&&(e=e.add(c),g=b);f=J(f,1);c=J(c,1);}a=F(d,e.j(a));return new H(e,a)}for(e=w;d.l(a)>=0;){c=Math.max(1,Math.floor(d.m()/
    a.m()));f=Math.ceil(Math.log(c)/Math.LN2);f=f<=48?1:Math.pow(2,f-48);g=v(c);for(b=g.j(a);B(b)||b.l(d)>0;)c-=f,g=v(c),b=g.j(a);C(g)&&(g=z);e=e.add(g);d=F(d,b);}return new H(e,d)}h.B=function(d){return D(this,d).h};h.and=function(d){const a=Math.max(this.g.length,d.g.length),c=[];for(let f=0;f<a;f++)c[f]=this.i(f)&d.i(f);return new t(c,this.h&d.h)};h.or=function(d){const a=Math.max(this.g.length,d.g.length),c=[];for(let f=0;f<a;f++)c[f]=this.i(f)|d.i(f);return new t(c,this.h|d.h)};
    h.xor=function(d){const a=Math.max(this.g.length,d.g.length),c=[];for(let f=0;f<a;f++)c[f]=this.i(f)^d.i(f);return new t(c,this.h^d.h)};function I(d){const a=d.g.length+1,c=[];for(let f=0;f<a;f++)c[f]=d.i(f)<<1|d.i(f-1)>>>31;return new t(c,d.h)}function J(d,a){const c=a>>5;a%=32;const f=d.g.length-c,e=[];for(let g=0;g<f;g++)e[g]=a>0?d.i(g+c)>>>a|d.i(g+c+1)<<32-a:d.i(g+c);return new t(e,d.h)}m.prototype.digest=m.prototype.A;m.prototype.reset=m.prototype.u;m.prototype.update=m.prototype.v;Md5 = m;t.prototype.add=t.prototype.add;t.prototype.multiply=t.prototype.j;t.prototype.modulo=t.prototype.B;t.prototype.compare=t.prototype.l;t.prototype.toNumber=t.prototype.m;t.prototype.toString=t.prototype.toString;t.prototype.getBits=t.prototype.i;t.fromNumber=v;t.fromString=y;Integer = t;}).apply( typeof commonjsGlobal$1 !== 'undefined' ? commonjsGlobal$1 : typeof self !== 'undefined' ? self  : typeof window !== 'undefined' ? window  : {});

    var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};

    /** @license
    Copyright The Closure Library Authors.
    SPDX-License-Identifier: Apache-2.0
    */

    var XhrIo;
    var WebChannel;
    var EventType;
    var ErrorCode;
    var Stat;
    var Event;
    var getStatEventTarget;
    var createWebChannelTransport;
    (function() {var h,aa=Object.defineProperty;function ba(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof commonjsGlobal&&commonjsGlobal];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");}var ca=ba(this);
    function da(a,b){if(b)a:{var c=ca;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))break a;c=c[e];}a=a[a.length-1];d=c[a];b=b(d);b!=d&&b!=null&&aa(c,a,{configurable:true,writable:true,value:b});}}da("Symbol.dispose",function(a){return a?a:Symbol("Symbol.dispose")});da("Array.prototype.values",function(a){return a?a:function(){return this[Symbol.iterator]()}});
    da("Object.entries",function(a){return a?a:function(b){var c=[],d;for(d in b)Object.prototype.hasOwnProperty.call(b,d)&&c.push([d,b[d]]);return c}});/** @license

     Copyright The Closure Library Authors.
     SPDX-License-Identifier: Apache-2.0
    */
    var ea=ea||{},l=this||self;function n(a){var b=typeof a;return b=="object"&&a!=null||b=="function"}function fa(a,b,c){return a.call.apply(a.bind,arguments)}function p(a,b,c){p=fa;return p.apply(null,arguments)}function ha(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var d=c.slice();d.push.apply(d,arguments);return a.apply(this,d)}}
    function t(a,b){function c(){}c.prototype=b.prototype;a.Z=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Ob=function(d,e,f){for(var g=Array(arguments.length-2),k=2;k<arguments.length;k++)g[k-2]=arguments[k];return b.prototype[e].apply(d,g)};}var ia=typeof AsyncContext!=="undefined"&&typeof AsyncContext.Snapshot==="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function ja(a){const b=a.length;if(b>0){const c=Array(b);for(let d=0;d<b;d++)c[d]=a[d];return c}return []}function ka(a,b){for(let d=1;d<arguments.length;d++){const e=arguments[d];var c=typeof e;c=c!="object"?c:e?Array.isArray(e)?"array":c:"null";if(c=="array"||c=="object"&&typeof e.length=="number"){c=a.length||0;const f=e.length||0;a.length=c+f;for(let g=0;g<f;g++)a[c+g]=e[g];}else a.push(e);}}class la{constructor(a,b){this.i=a;this.j=b;this.h=0;this.g=null;}get(){let a;this.h>0?(this.h--,a=this.g,this.g=a.next,a.next=null):a=this.i();return a}}function ma(a){l.setTimeout(()=>{throw a;},0);}function na(){var a=oa;let b=null;a.g&&(b=a.g,a.g=a.g.next,a.g||(a.h=null),b.next=null);return b}class pa{constructor(){this.h=this.g=null;}add(a,b){const c=qa.get();c.set(a,b);this.h?this.h.next=c:this.g=c;this.h=c;}}var qa=new la(()=>new ra,a=>a.reset());class ra{constructor(){this.next=this.g=this.h=null;}set(a,b){this.h=a;this.g=b;this.next=null;}reset(){this.next=this.g=this.h=null;}}let u,v=false,oa=new pa,ta=()=>{const a=Promise.resolve(void 0);u=()=>{a.then(sa);};};function sa(){for(var a;a=na();){try{a.h.call(a.g);}catch(c){ma(c);}var b=qa;b.j(a);b.h<100&&(b.h++,a.next=b.g,b.g=a);}v=false;}function w(){this.u=this.u;this.C=this.C;}w.prototype.u=false;w.prototype.dispose=function(){this.u||(this.u=true,this.N());};w.prototype[Symbol.dispose]=function(){this.dispose();};w.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()();};function x(a,b){this.type=a;this.g=this.target=b;this.defaultPrevented=false;}x.prototype.h=function(){this.defaultPrevented=true;};var ua=function(){if(!l.addEventListener||!Object.defineProperty)return false;var a=false,b=Object.defineProperty({},"passive",{get:function(){a=true;}});try{const c=()=>{};l.addEventListener("test",c,b);l.removeEventListener("test",c,b);}catch(c){}return a}();function y(a){return /^[\s\xa0]*$/.test(a)}function z(a,b){x.call(this,a?a.type:"");this.relatedTarget=this.g=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=0;this.key="";this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=false;this.state=null;this.pointerId=0;this.pointerType="";this.i=null;a&&this.init(a,b);}t(z,x);
    z.prototype.init=function(a,b){const c=this.type=a.type,d=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.g=b;b=a.relatedTarget;b||(c=="mouseover"?b=a.fromElement:c=="mouseout"&&(b=a.toElement));this.relatedTarget=b;d?(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==
    void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0);this.button=a.button;this.key=a.key||"";this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.pointerId=a.pointerId||0;this.pointerType=a.pointerType;this.state=a.state;this.i=a;a.defaultPrevented&&z.Z.h.call(this);};z.prototype.h=function(){z.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=false;};var B="closure_listenable_"+(Math.random()*1E6|0);var va=0;function wa(a,b,c,d,e){this.listener=a;this.proxy=null;this.src=b;this.type=c;this.capture=!!d;this.ha=e;this.key=++va;this.da=this.fa=false;}function xa(a){a.da=true;a.listener=null;a.proxy=null;a.src=null;a.ha=null;}function ya(a,b,c){for(const d in a)b.call(c,a[d],d,a);}function Aa(a,b){for(const c in a)b.call(void 0,a[c],c,a);}function Ba(a){const b={};for(const c in a)b[c]=a[c];return b}const Ca="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Da(a,b){let c,d;for(let e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(let f=0;f<Ca.length;f++)c=Ca[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c]);}}function Ea(a){this.src=a;this.g={};this.h=0;}Ea.prototype.add=function(a,b,c,d,e){const f=a.toString();a=this.g[f];a||(a=this.g[f]=[],this.h++);const g=Fa(a,b,d,e);g>-1?(b=a[g],c||(b.fa=false)):(b=new wa(b,this.src,f,!!d,e),b.fa=c,a.push(b));return b};function Ga(a,b){const c=b.type;if(c in a.g){var d=a.g[c],e=Array.prototype.indexOf.call(d,b,void 0),f;(f=e>=0)&&Array.prototype.splice.call(d,e,1);f&&(xa(b),a.g[c].length==0&&(delete a.g[c],a.h--));}}
    function Fa(a,b,c,d){for(let e=0;e<a.length;++e){const f=a[e];if(!f.da&&f.listener==b&&f.capture==!!c&&f.ha==d)return e}return -1}var Ha="closure_lm_"+(Math.random()*1E6|0),Ia={};function Ka(a,b,c,d,e){if(Array.isArray(b)){for(let f=0;f<b.length;f++)Ka(a,b[f],c,d,e);return null}c=Ma(c);return a&&a[B]?a.J(b,c,n(d)?!!d.capture:false,e):Na(a,b,c,false,d,e)}
    function Na(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");const g=n(e)?!!e.capture:!!e;let k=Oa(a);k||(a[Ha]=k=new Ea(a));c=k.add(b,c,d,g,f);if(c.proxy)return c;d=Pa();c.proxy=d;d.src=a;d.listener=c;if(a.addEventListener)ua||(e=g),e===void 0&&(e=false),a.addEventListener(b.toString(),d,e);else if(a.attachEvent)a.attachEvent(Qa(b.toString()),d);else if(a.addListener&&a.removeListener)a.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.");return c}
    function Pa(){function a(c){return b.call(a.src,a.listener,c)}const b=Ra;return a}function Sa(a,b,c,d,e){if(Array.isArray(b))for(var f=0;f<b.length;f++)Sa(a,b[f],c,d,e);else (d=n(d)?!!d.capture:!!d,c=Ma(c),a&&a[B])?(a=a.i,f=String(b).toString(),f in a.g&&(b=a.g[f],c=Fa(b,c,d,e),c>-1&&(xa(b[c]),Array.prototype.splice.call(b,c,1),b.length==0&&(delete a.g[f],a.h--)))):a&&(a=Oa(a))&&(b=a.g[b.toString()],a=-1,b&&(a=Fa(b,c,d,e)),(c=a>-1?b[a]:null)&&Ta(c));}
    function Ta(a){if(typeof a!=="number"&&a&&!a.da){var b=a.src;if(b&&b[B])Ga(b.i,a);else {var c=a.type,d=a.proxy;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent?b.detachEvent(Qa(c),d):b.addListener&&b.removeListener&&b.removeListener(d);(c=Oa(b))?(Ga(c,a),c.h==0&&(c.src=null,b[Ha]=null)):xa(a);}}}function Qa(a){return a in Ia?Ia[a]:Ia[a]="on"+a}function Ra(a,b){if(a.da)a=true;else {b=new z(b,this);const c=a.listener,d=a.ha||a.src;a.fa&&Ta(a);a=c.call(d,b);}return a}
    function Oa(a){a=a[Ha];return a instanceof Ea?a:null}var Ua="__closure_events_fn_"+(Math.random()*1E9>>>0);function Ma(a){if(typeof a==="function")return a;a[Ua]||(a[Ua]=function(b){return a.handleEvent(b)});return a[Ua]}function C(){w.call(this);this.i=new Ea(this);this.M=this;this.G=null;}t(C,w);C.prototype[B]=true;C.prototype.removeEventListener=function(a,b,c,d){Sa(this,a,b,c,d);};
    function D(a,b){var c,d=a.G;if(d)for(c=[];d;d=d.G)c.push(d);a=a.M;d=b.type||b;if(typeof b==="string")b=new x(b,a);else if(b instanceof x)b.target=b.target||a;else {var e=b;b=new x(d,a);Da(b,e);}e=true;let f,g;if(c)for(g=c.length-1;g>=0;g--)f=b.g=c[g],e=Va(f,d,true,b)&&e;f=b.g=a;e=Va(f,d,true,b)&&e;e=Va(f,d,false,b)&&e;if(c)for(g=0;g<c.length;g++)f=b.g=c[g],e=Va(f,d,false,b)&&e;}
    C.prototype.N=function(){C.Z.N.call(this);if(this.i){var a=this.i;for(const c in a.g){const d=a.g[c];for(let e=0;e<d.length;e++)xa(d[e]);delete a.g[c];a.h--;}}this.G=null;};C.prototype.J=function(a,b,c,d){return this.i.add(String(a),b,false,c,d)};C.prototype.K=function(a,b,c,d){return this.i.add(String(a),b,true,c,d)};
    function Va(a,b,c,d){b=a.i.g[String(b)];if(!b)return true;b=b.concat();let e=true;for(let f=0;f<b.length;++f){const g=b[f];if(g&&!g.da&&g.capture==c){const k=g.listener,q=g.ha||g.src;g.fa&&Ga(a.i,g);e=k.call(q,d)!==false&&e;}}return e&&!d.defaultPrevented}function Wa(a,b){if(typeof a!=="function")if(a&&typeof a.handleEvent=="function")a=p(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:l.setTimeout(a,b||0)}function Xa(a){a.g=Wa(()=>{a.g=null;a.i&&(a.i=false,Xa(a));},a.l);const b=a.h;a.h=null;a.m.apply(null,b);}class Ya extends w{constructor(a,b){super();this.m=a;this.l=b;this.h=null;this.i=false;this.g=null;}j(a){this.h=arguments;this.g?this.i=true:Xa(this);}N(){super.N();this.g&&(l.clearTimeout(this.g),this.g=null,this.i=false,this.h=null);}}function E(a){w.call(this);this.h=a;this.g={};}t(E,w);var Za=[];function $a(a){ya(a.g,function(b,c){this.g.hasOwnProperty(c)&&Ta(b);},a);a.g={};}E.prototype.N=function(){E.Z.N.call(this);$a(this);};E.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};var ab=l.JSON.stringify;var cb=l.JSON.parse;var db=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function eb(){}function fb(){}var H={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function gb(){x.call(this,"d");}t(gb,x);function hb(){x.call(this,"c");}t(hb,x);var I={},ib=null;function jb(){return ib=ib||new C}I.Ia="serverreachability";function kb(a){x.call(this,I.Ia,a);}t(kb,x);function lb(a){const b=jb();D(b,new kb(b));}I.STAT_EVENT="statevent";function mb(a,b){x.call(this,I.STAT_EVENT,a);this.stat=b;}t(mb,x);function J(a){const b=jb();D(b,new mb(b,a));}I.Ja="timingevent";function nb(a,b){x.call(this,I.Ja,a);this.size=b;}t(nb,x);
    function ob(a,b){if(typeof a!=="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a();},b)}function pb(){this.g=true;}pb.prototype.ua=function(){this.g=false;};function qb(a,b,c,d,e,f){a.info(function(){if(a.g)if(f){var g="";var k=f.split("&");for(let m=0;m<k.length;m++){var q=k[m].split("=");if(q.length>1){const r=q[0];q=q[1];const A=r.split("_");g=A.length>=2&&A[1]=="type"?g+(r+"="+q+"&"):g+(r+"=redacted&");}}}else g=null;else g=f;return "XMLHTTP REQ ("+d+") [attempt "+e+"]: "+b+"\n"+c+"\n"+g});}
    function rb(a,b,c,d,e,f,g){a.info(function(){return "XMLHTTP RESP ("+d+") [ attempt "+e+"]: "+b+"\n"+c+"\n"+f+" "+g});}function K(a,b,c,d){a.info(function(){return "XMLHTTP TEXT ("+b+"): "+sb(a,c)+(d?" "+d:"")});}function tb(a,b){a.info(function(){return "TIMEOUT: "+b});}pb.prototype.info=function(){};
    function sb(a,b){if(!a.g)return b;if(!b)return null;try{const f=JSON.parse(b);if(f)for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var c=f[a];if(!(c.length<2)){var d=c[1];if(Array.isArray(d)&&!(d.length<1)){var e=d[0];if(e!="noop"&&e!="stop"&&e!="close")for(let g=1;g<d.length;g++)d[g]="";}}}return ab(f)}catch(f){return b}}var ub={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9};var vb={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};var wb;function xb(){}t(xb,eb);xb.prototype.g=function(){return new XMLHttpRequest};wb=new xb;function L(a){return encodeURIComponent(String(a))}function yb(a){var b=1;a=a.split(":");const c=[];for(;b>0&&a.length;)c.push(a.shift()),b--;a.length&&c.push(a.join(":"));return c}function N(a,b,c,d){this.j=a;this.i=b;this.l=c;this.S=d||1;this.V=new E(this);this.H=45E3;this.J=null;this.o=false;this.u=this.B=this.A=this.M=this.F=this.T=this.D=null;this.G=[];this.g=null;this.C=0;this.m=this.v=null;this.X=-1;this.K=false;this.P=0;this.O=null;this.W=this.L=this.U=this.R=false;this.h=new zb;}function zb(){this.i=null;this.g="";this.h=false;}var Ab={},Bb={};function Cb(a,b,c){a.M=1;a.A=Db(O(b));a.u=c;a.R=true;Eb(a,null);}
    function Eb(a,b){a.F=Date.now();Fb(a);a.B=O(a.A);var c=a.B,d=a.S;Array.isArray(d)||(d=[String(d)]);Gb(c.i,"t",d);a.C=0;c=a.j.L;a.h=new zb;a.g=Hb(a.j,c?b:null,!a.u);a.P>0&&(a.O=new Ya(p(a.Y,a,a.g),a.P));b=a.V;c=a.g;d=a.ba;var e="readystatechange";Array.isArray(e)||(e&&(Za[0]=e.toString()),e=Za);for(let f=0;f<e.length;f++){const g=Ka(c,e[f],d||b.handleEvent,false,b.h||b);if(!g)break;b.g[g.key]=g;}b=a.J?Ba(a.J):{};a.u?(a.v||(a.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,
    a.u,b)):(a.v="GET",a.g.ea(a.B,a.v,null,b));lb();qb(a.i,a.v,a.B,a.l,a.S,a.u);}N.prototype.ba=function(a){a=a.target;const b=this.O;b&&P(a)==3?b.j():this.Y(a);};
    N.prototype.Y=function(a){try{if(a==this.g)a:{const k=P(this.g),q=this.g.ya(),m=this.g.ca();if(!(k<3)&&(k!=3||this.g&&(this.h.h||this.g.la()||Ib(this.g)))){this.K||k!=4||q==7||(q==8||m<=0?lb(3):lb(2));Jb(this);var b=this.g.ca();this.X=b;var c=Kb(this);this.o=b==200;rb(this.i,this.v,this.B,this.l,this.S,k,b);if(this.o){if(this.U&&!this.L){b:{if(this.g){var d,e=this.g;if((d=e.g?e.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(d)){var f=d;break b}}f=null;}if(a=f)K(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),
    this.L=!0,Lb(this,a);else {this.o=!1;this.m=3;J(12);Q(this);Mb(this);break a}}if(this.R){a=!0;let r;for(;!this.K&&this.C<c.length;)if(r=Nb(this,c),r==Bb){k==4&&(this.m=4,J(14),a=!1);K(this.i,this.l,null,"[Incomplete Response]");break}else if(r==Ab){this.m=4;J(15);K(this.i,this.l,c,"[Invalid Chunk]");a=!1;break}else K(this.i,this.l,r,null),Lb(this,r);Ob(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0);k!=4||c.length!=0||this.h.h||(this.m=1,J(16),a=!1);this.o=this.o&&a;if(!a)K(this.i,this.l,
    c,"[Invalid Chunked Response]"),Q(this),Mb(this);else if(c.length>0&&!this.W){this.W=!0;var g=this.j;g.g==this&&g.aa&&!g.P&&(g.j.info("Great, no buffering proxy detected. Bytes received: "+c.length),Pb(g),g.P=!0,J(11));}}else K(this.i,this.l,c,null),Lb(this,c);k==4&&Q(this);this.o&&!this.K&&(k==4?Qb(this.j,this):(this.o=!1,Fb(this)));}else Rb(this.g),b==400&&c.indexOf("Unknown SID")>0?(this.m=3,J(12)):(this.m=0,J(13)),Q(this),Mb(this);}}}catch(k){}finally{}};
    function Kb(a){if(!Ob(a))return a.g.la();const b=Ib(a.g);if(b==="")return "";let c="";const d=b.length,e=P(a.g)==4;if(!a.h.i){if(typeof TextDecoder==="undefined")return Q(a),Mb(a),"";a.h.i=new l.TextDecoder;}for(let f=0;f<d;f++)a.h.h=true,c+=a.h.i.decode(b[f],{stream:!(e&&f==d-1)});b.length=0;a.h.g+=c;a.C=0;return a.h.g}function Ob(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:false}
    function Nb(a,b){var c=a.C,d=b.indexOf("\n",c);if(d==-1)return Bb;c=Number(b.substring(c,d));if(isNaN(c))return Ab;d+=1;if(d+c>b.length)return Bb;b=b.slice(d,d+c);a.C=d+c;return b}N.prototype.cancel=function(){this.K=true;Q(this);};function Fb(a){a.T=Date.now()+a.H;Sb(a,a.H);}function Sb(a,b){if(a.D!=null)throw Error("WatchDog timer not null");a.D=ob(p(a.aa,a),b);}function Jb(a){a.D&&(l.clearTimeout(a.D),a.D=null);}
    N.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(tb(this.i,this.B),this.M!=2&&(lb(),J(17)),Q(this),this.m=2,Mb(this)):Sb(this,this.T-a);};function Mb(a){a.j.I==0||a.K||Qb(a.j,a);}function Q(a){Jb(a);var b=a.O;b&&typeof b.dispose=="function"&&b.dispose();a.O=null;$a(a.V);a.g&&(b=a.g,a.g=null,b.abort(),b.dispose());}
    function Lb(a,b){try{var c=a.j;if(c.I!=0&&(c.g==a||Tb(c.h,a)))if(!a.L&&Tb(c.h,a)&&c.I==3){try{var d=c.Ba.g.parse(b);}catch(m){d=null;}if(Array.isArray(d)&&d.length==3){var e=d;if(e[0]==0)a:{if(!c.v){if(c.g)if(c.g.F+3E3<a.F)Ub(c),Vb(c);else break a;Wb(c);J(18);}}else c.xa=e[1],0<c.xa-c.K&&e[2]<37500&&c.F&&c.A==0&&!c.C&&(c.C=ob(p(c.Va,c),6E3));Xb(c.h)<=1&&c.ta&&(c.ta=void 0);}else R(c,11);}else if((a.L||c.g==a)&&Ub(c),!y(b))for(e=c.Ba.g.parse(b),b=0;b<e.length;b++){let m=e[b];const r=m[0];if(!(r<=c.K))if(c.K=
    r,m=m[1],c.I==2)if(m[0]=="c"){c.M=m[1];c.ba=m[2];const A=m[3];A!=null&&(c.ka=A,c.j.info("VER="+c.ka));const M=m[4];M!=null&&(c.za=M,c.j.info("SVER="+c.za));const F=m[5];F!=null&&typeof F==="number"&&F>0&&(d=1.5*F,c.O=d,c.j.info("backChannelRequestTimeoutMs_="+d));d=c;const G=a.g;if(G){const za=G.g?G.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(za){var f=d.h;f.g||za.indexOf("spdy")==-1&&za.indexOf("quic")==-1&&za.indexOf("h2")==-1||(f.j=f.l,f.g=new Set,f.h&&(Yb(f,f.h),f.h=null));}if(d.G){const bb=
    G.g?G.g.getResponseHeader("X-HTTP-Session-Id"):null;bb&&(d.wa=bb,S(d.J,d.G,bb));}}c.I=3;c.l&&c.l.ra();c.aa&&(c.T=Date.now()-a.F,c.j.info("Handshake RTT: "+c.T+"ms"));d=c;var g=a;d.na=Zb(d,d.L?d.ba:null,d.W);if(g.L){$b(d.h,g);var k=g,q=d.O;q&&(k.H=q);k.D&&(Jb(k),Fb(k));d.g=g;}else ac(d);c.i.length>0&&bc(c);}else m[0]!="stop"&&m[0]!="close"||R(c,7);else c.I==3&&(m[0]=="stop"||m[0]=="close"?m[0]=="stop"?R(c,7):cc(c):m[0]!="noop"&&c.l&&c.l.qa(m),c.A=0);}lb(4);}catch(m){}}var dc=class{constructor(a,b){this.g=a;this.map=b;}};function ec(a){this.l=a||10;l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy);this.j=a?this.l:1;this.g=null;this.j>1&&(this.g=new Set);this.h=null;this.i=[];}function fc(a){return a.h?true:a.g?a.g.size>=a.j:false}function Xb(a){return a.h?1:a.g?a.g.size:0}function Tb(a,b){return a.h?a.h==b:a.g?a.g.has(b):false}
    function Yb(a,b){a.g?a.g.add(b):a.h=b;}function $b(a,b){a.h&&a.h==b?a.h=null:a.g&&a.g.has(b)&&a.g.delete(b);}ec.prototype.cancel=function(){this.i=hc(this);if(this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear();}};function hc(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let b=a.i;for(const c of a.g.values())b=b.concat(c.G);return b}return ja(a.i)}var ic=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jc(a,b){if(a){a=a.split("&");for(let c=0;c<a.length;c++){const d=a[c].indexOf("=");let e,f=null;d>=0?(e=a[c].substring(0,d),f=a[c].substring(d+1)):e=a[c];b(e,f?decodeURIComponent(f.replace(/\+/g," ")):"");}}}function T(a){this.g=this.o=this.j="";this.u=null;this.m=this.h="";this.l=false;let b;a instanceof T?(this.l=a.l,kc(this,a.j),this.o=a.o,this.g=a.g,lc(this,a.u),this.h=a.h,mc(this,nc(a.i)),this.m=a.m):a&&(b=String(a).match(ic))?(this.l=false,kc(this,b[1]||"",true),this.o=oc(b[2]||""),this.g=oc(b[3]||"",true),lc(this,b[4]),this.h=oc(b[5]||"",true),mc(this,b[6]||"",true),this.m=oc(b[7]||"")):(this.l=false,this.i=new pc(null,this.l));}
    T.prototype.toString=function(){const a=[];var b=this.j;b&&a.push(qc(b,rc,true),":");var c=this.g;if(c||b=="file")a.push("//"),(b=this.o)&&a.push(qc(b,rc,true),"@"),a.push(L(c).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c=this.u,c!=null&&a.push(":",String(c));if(c=this.h)this.g&&c.charAt(0)!="/"&&a.push("/"),a.push(qc(c,c.charAt(0)=="/"?sc:tc,true));(c=this.i.toString())&&a.push("?",c);(c=this.m)&&a.push("#",qc(c,uc));return a.join("")};
    T.prototype.resolve=function(a){const b=O(this);let c=!!a.j;c?kc(b,a.j):c=!!a.o;c?b.o=a.o:c=!!a.g;c?b.g=a.g:c=a.u!=null;var d=a.h;if(c)lc(b,a.u);else if(c=!!a.h){if(d.charAt(0)!="/")if(this.g&&!this.h)d="/"+d;else {var e=b.h.lastIndexOf("/");e!=-1&&(d=b.h.slice(0,e+1)+d);}e=d;if(e==".."||e==".")d="";else if(e.indexOf("./")!=-1||e.indexOf("/.")!=-1){d=e.lastIndexOf("/",0)==0;e=e.split("/");const f=[];for(let g=0;g<e.length;){const k=e[g++];k=="."?d&&g==e.length&&f.push(""):k==".."?((f.length>1||f.length==
    1&&f[0]!="")&&f.pop(),d&&g==e.length&&f.push("")):(f.push(k),d=true);}d=f.join("/");}else d=e;}c?b.h=d:c=a.i.toString()!=="";c?mc(b,nc(a.i)):c=!!a.m;c&&(b.m=a.m);return b};function O(a){return new T(a)}function kc(a,b,c){a.j=c?oc(b,true):b;a.j&&(a.j=a.j.replace(/:$/,""));}function lc(a,b){if(b){b=Number(b);if(isNaN(b)||b<0)throw Error("Bad port number "+b);a.u=b;}else a.u=null;}function mc(a,b,c){b instanceof pc?(a.i=b,vc(a.i,a.l)):(c||(b=qc(b,wc)),a.i=new pc(b,a.l));}function S(a,b,c){a.i.set(b,c);}
    function Db(a){S(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36));return a}function oc(a,b){return a?b?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function qc(a,b,c){return typeof a==="string"?(a=encodeURI(a).replace(b,xc),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function xc(a){a=a.charCodeAt(0);return "%"+(a>>4&15).toString(16)+(a&15).toString(16)}
    var rc=/[#\/\?@]/g,tc=/[#\?:]/g,sc=/[#\?]/g,wc=/[#\?@]/g,uc=/#/g;function pc(a,b){this.h=this.g=null;this.i=a||null;this.j=!!b;}function U(a){a.g||(a.g=new Map,a.h=0,a.i&&jc(a.i,function(b,c){a.add(decodeURIComponent(b.replace(/\+/g," ")),c);}));}h=pc.prototype;h.add=function(a,b){U(this);this.i=null;a=V(this,a);let c=this.g.get(a);c||this.g.set(a,c=[]);c.push(b);this.h+=1;return this};function yc(a,b){U(a);b=V(a,b);a.g.has(b)&&(a.i=null,a.h-=a.g.get(b).length,a.g.delete(b));}
    function zc(a,b){U(a);b=V(a,b);return a.g.has(b)}h.forEach=function(a,b){U(this);this.g.forEach(function(c,d){c.forEach(function(e){a.call(b,e,d,this);},this);},this);};function Ac(a,b){U(a);let c=[];if(typeof b==="string")zc(a,b)&&(c=c.concat(a.g.get(V(a,b))));else for(a=Array.from(a.g.values()),b=0;b<a.length;b++)c=c.concat(a[b]);return c}h.set=function(a,b){U(this);this.i=null;a=V(this,a);zc(this,a)&&(this.h-=this.g.get(a).length);this.g.set(a,[b]);this.h+=1;return this};
    h.get=function(a,b){if(!a)return b;a=Ac(this,a);return a.length>0?String(a[0]):b};function Gb(a,b,c){yc(a,b);c.length>0&&(a.i=null,a.g.set(V(a,b),ja(c)),a.h+=c.length);}h.toString=function(){if(this.i)return this.i;if(!this.g)return "";const a=[],b=Array.from(this.g.keys());for(let d=0;d<b.length;d++){var c=b[d];const e=L(c);c=Ac(this,c);for(let f=0;f<c.length;f++){let g=e;c[f]!==""&&(g+="="+L(c[f]));a.push(g);}}return this.i=a.join("&")};
    function nc(a){const b=new pc;b.i=a.i;a.g&&(b.g=new Map(a.g),b.h=a.h);return b}function V(a,b){b=String(b);a.j&&(b=b.toLowerCase());return b}function vc(a,b){b&&!a.j&&(U(a),a.i=null,a.g.forEach(function(c,d){const e=d.toLowerCase();d!=e&&(yc(this,d),Gb(this,e,c));},a));a.j=b;}function Bc(a,b){const c=new pb;if(l.Image){const d=new Image;d.onload=ha(W,c,"TestLoadImage: loaded",true,b,d);d.onerror=ha(W,c,"TestLoadImage: error",false,b,d);d.onabort=ha(W,c,"TestLoadImage: abort",false,b,d);d.ontimeout=ha(W,c,"TestLoadImage: timeout",false,b,d);l.setTimeout(function(){if(d.ontimeout)d.ontimeout();},1E4);d.src=a;}else b(false);}
    function Cc(a,b){const c=new pb,d=new AbortController,e=setTimeout(()=>{d.abort();W(c,"TestPingServer: timeout",false,b);},1E4);fetch(a,{signal:d.signal}).then(f=>{clearTimeout(e);f.ok?W(c,"TestPingServer: ok",true,b):W(c,"TestPingServer: server error",false,b);}).catch(()=>{clearTimeout(e);W(c,"TestPingServer: error",false,b);});}function W(a,b,c,d,e){try{e&&(e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null),d(c);}catch(f){}}function Dc(){this.g=new db;}function Ec(a){this.i=a.Sb||null;this.h=a.ab||false;}t(Ec,eb);Ec.prototype.g=function(){return new Fc(this.i,this.h)};function Fc(a,b){C.call(this);this.H=a;this.o=b;this.m=void 0;this.status=this.readyState=0;this.responseType=this.responseText=this.response=this.statusText="";this.onreadystatechange=null;this.A=new Headers;this.h=null;this.F="GET";this.D="";this.g=false;this.B=this.j=this.l=null;this.v=new AbortController;}t(Fc,C);h=Fc.prototype;
    h.open=function(a,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a;this.D=b;this.readyState=1;Gc(this);};h.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=true;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(b.body=a);(this.H||l).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this));};
    h.abort=function(){this.response=this.responseText="";this.A=new Headers;this.status=0;this.v.abort();this.j&&this.j.cancel("Request was aborted.").catch(()=>{});this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=false,Hc(this));this.readyState=0;};
    h.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Gc(this)),this.g&&(this.readyState=3,Gc(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream!=="undefined"&&"body"in a){this.j=a.body.getReader();if(this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=
    [];}else this.response=this.responseText="",this.B=new TextDecoder;Ic(this);}else a.text().then(this.Oa.bind(this),this.ga.bind(this));};function Ic(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a));}h.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var b=a.value?a.value:new Uint8Array(0);if(b=this.B.decode(b,{stream:!a.done}))this.response=this.responseText+=b;}a.done?Hc(this):Gc(this);this.readyState==3&&Ic(this);}};
    h.Oa=function(a){this.g&&(this.response=this.responseText=a,Hc(this));};h.Na=function(a){this.g&&(this.response=a,Hc(this));};h.ga=function(){this.g&&Hc(this);};function Hc(a){a.readyState=4;a.l=null;a.j=null;a.B=null;Gc(a);}h.setRequestHeader=function(a,b){this.A.append(a,b);};h.getResponseHeader=function(a){return this.h?this.h.get(a.toLowerCase())||"":""};
    h.getAllResponseHeaders=function(){if(!this.h)return "";const a=[],b=this.h.entries();for(var c=b.next();!c.done;)c=c.value,a.push(c[0]+": "+c[1]),c=b.next();return a.join("\r\n")};function Gc(a){a.onreadystatechange&&a.onreadystatechange.call(a);}Object.defineProperty(Fc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin";}});function Jc(a){let b="";ya(a,function(c,d){b+=d;b+=":";b+=c;b+="\r\n";});return b}function Kc(a,b,c){a:{for(d in c){var d=false;break a}d=true;}d||(c=Jc(c),typeof a==="string"?(c!=null&&L(c)):S(a,b,c));}function X(a){C.call(this);this.headers=new Map;this.L=a||null;this.h=false;this.g=null;this.D="";this.o=0;this.l="";this.j=this.B=this.v=this.A=false;this.m=null;this.F="";this.H=false;}t(X,C);var Lc=/^https?$/i,Mc=["POST","PUT"];h=X.prototype;h.Fa=function(a){this.H=a;};
    h.ea=function(a,b,c,d){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);b=b?b.toUpperCase():"GET";this.D=a;this.l="";this.o=0;this.A=false;this.h=true;this.g=this.L?this.L.g():wb.g();this.g.onreadystatechange=ia(p(this.Ca,this));try{this.B=!0,this.g.open(b,String(a),!0),this.B=!1;}catch(f){Nc(this,f);return}a=c||"";c=new Map(this.headers);if(d)if(Object.getPrototypeOf(d)===Object.prototype)for(var e in d)c.set(e,d[e]);else if(typeof d.keys==="function"&&
    typeof d.get==="function")for(const f of d.keys())c.set(f,d.get(f));else throw Error("Unknown input type for opt_headers: "+String(d));d=Array.from(c.keys()).find(f=>"content-type"==f.toLowerCase());e=l.FormData&&a instanceof l.FormData;!(Array.prototype.indexOf.call(Mc,b,void 0)>=0)||d||e||c.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const [f,g]of c)this.g.setRequestHeader(f,g);this.F&&(this.g.responseType=this.F);"withCredentials"in this.g&&this.g.withCredentials!==
    this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1;}catch(f){Nc(this,f);}};function Nc(a,b){a.h=false;a.g&&(a.j=true,a.g.abort(),a.j=false);a.l=b;a.o=5;Oc(a);Pc(a);}function Oc(a){a.A||(a.A=true,D(a,"complete"),D(a,"error"));}h.abort=function(a){this.g&&this.h&&(this.h=false,this.j=true,this.g.abort(),this.j=false,this.o=a||7,D(this,"complete"),D(this,"abort"),Pc(this));};
    h.N=function(){this.g&&(this.h&&(this.h=false,this.j=true,this.g.abort(),this.j=false),Pc(this,true));X.Z.N.call(this);};h.Ca=function(){this.u||(this.B||this.v||this.j?Qc(this):this.Xa());};h.Xa=function(){Qc(this);};
    function Qc(a){if(a.h&&typeof ea!="undefined")if(a.v&&P(a)==4)setTimeout(a.Ca.bind(a),0);else if(D(a,"readystatechange"),P(a)==4){a.h=false;try{const f=a.ca();a:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break a;default:b=!1;}var c;if(!(c=b)){var d;if(d=f===0){let g=String(a.D).match(ic)[1]||null;!g&&l.self&&l.self.location&&(g=l.self.location.protocol.slice(0,-1));d=!Lc.test(g?g.toLowerCase():"");}c=d;}if(c)D(a,"complete"),D(a,"success");else {a.o=6;try{var e=P(a)>
    2?a.g.statusText:"";}catch(g){e="";}a.l=e+" ["+a.ca()+"]";Oc(a);}}finally{Pc(a);}}}function Pc(a,b){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const c=a.g;a.g=null;b||D(a,"ready");try{c.onreadystatechange=null;}catch(d){}}}h.isActive=function(){return !!this.g};function P(a){return a.g?a.g.readyState:0}h.ca=function(){try{return P(this)>2?this.g.status:-1}catch(a){return -1}};h.la=function(){try{return this.g?this.g.responseText:""}catch(a){return ""}};
    h.La=function(a){if(this.g){var b=this.g.responseText;a&&b.indexOf(a)==0&&(b=b.substring(a.length));return cb(b)}};function Ib(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case "":case "text":return a.g.responseText;case "arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch(b){return null}}
    function Rb(a){const b={};a=(a.g&&P(a)>=2?a.g.getAllResponseHeaders()||"":"").split("\r\n");for(let d=0;d<a.length;d++){if(y(a[d]))continue;var c=yb(a[d]);const e=c[0];c=c[1];if(typeof c!=="string")continue;c=c.trim();const f=b[e]||[];b[e]=f;f.push(c);}Aa(b,function(d){return d.join(", ")});}h.ya=function(){return this.o};h.Ha=function(){return typeof this.l==="string"?this.l:String(this.l)};function Rc(a,b,c){return c&&c.internalChannelParams?c.internalChannelParams[a]||b:b}
    function Sc(a){this.za=0;this.i=[];this.j=new pb;this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null;this.Ya=this.V=0;this.Sa=Rc("failFast",false,a);this.F=this.C=this.v=this.m=this.l=null;this.X=true;this.xa=this.K=-1;this.Y=this.A=this.D=0;this.Qa=Rc("baseRetryDelayMs",5E3,a);this.Za=Rc("retryDelaySeedMs",1E4,a);this.Ta=Rc("forwardChannelMaxRetries",2,a);this.va=Rc("forwardChannelRequestTimeoutMs",2E4,a);this.ma=a&&a.xmlHttpFactory||void 0;this.Ua=a&&a.Rb||void 0;this.Aa=
    a&&a.useFetchStreams||false;this.O=void 0;this.L=a&&a.supportsCrossDomainXhr||false;this.M="";this.h=new ec(a&&a.concurrentRequestLimit);this.Ba=new Dc;this.S=a&&a.fastHandshake||false;this.R=a&&a.encodeInitMessageHeaders||false;this.S&&this.R&&(this.R=false);this.Ra=a&&a.Pb||false;a&&a.ua&&this.j.ua();a&&a.forceLongPolling&&(this.X=false);this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||false;this.ia=void 0;a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout);this.ta=void 0;this.T=0;this.P=
    false;this.ja=this.B=null;}h=Sc.prototype;h.ka=8;h.I=1;h.connect=function(a,b,c,d){J(0);this.W=a;this.H=b||{};c&&d!==void 0&&(this.H.OSID=c,this.H.OAID=d);this.F=this.X;this.J=Zb(this,null,this.W);bc(this);};
    function cc(a){Tc(a);if(a.I==3){var b=a.V++,c=O(a.J);S(c,"SID",a.M);S(c,"RID",b);S(c,"TYPE","terminate");Uc(a,c);b=new N(a,a.j,b);b.M=2;b.A=Db(O(c));c=false;if(l.navigator&&l.navigator.sendBeacon)try{c=l.navigator.sendBeacon(b.A.toString(),"");}catch(d){}!c&&l.Image&&((new Image).src=b.A,c=true);c||(b.g=Hb(b.j,null),b.g.ea(b.A));b.F=Date.now();Fb(b);}Vc(a);}function Vb(a){a.g&&(Pb(a),a.g.cancel(),a.g=null);}
    function Tc(a){Vb(a);a.v&&(l.clearTimeout(a.v),a.v=null);Ub(a);a.h.cancel();a.m&&(typeof a.m==="number"&&l.clearTimeout(a.m),a.m=null);}function bc(a){if(!fc(a.h)&&!a.m){a.m=true;var b=a.Ea;u||ta();v||(u(),v=true);oa.add(b,a);a.D=0;}}function Wc(a,b){if(Xb(a.h)>=a.h.j-(a.m?1:0))return false;if(a.m)return a.i=b.G.concat(a.i),true;if(a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta))return false;a.m=ob(p(a.Ea,a,b),Xc(a,a.D));a.D++;return true}
    h.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1E5);a=this.V++;const e=new N(this,this.j,a);let f=this.o;this.U&&(f?(f=Ba(f),Da(f,this.U)):f=this.U);this.u!==null||this.R||(e.J=f,f=null);if(this.S)a:{var b=0;for(var c=0;c<this.i.length;c++){b:{var d=this.i[c];if("__data__"in d.map&&(d=d.map.__data__,typeof d==="string")){d=d.length;break b}d=void 0;}if(d===void 0)break;b+=d;if(b>4096){b=c;break a}if(b===4096||c===this.i.length-1){b=c+1;break a}}b=1E3;}else b=
    1E3;b=Yc(this,e,b);c=O(this.J);S(c,"RID",a);S(c,"CVER",22);this.G&&S(c,"X-HTTP-Session-Id",this.G);Uc(this,c);f&&(this.R?b="headers="+L(Jc(f))+"&"+b:this.u&&Kc(c,this.u,f));Yb(this.h,e);this.Ra&&S(c,"TYPE","init");this.S?(S(c,"$req",b),S(c,"SID","null"),e.U=true,Cb(e,c,null)):Cb(e,c,b);this.I=2;}}else this.I==3&&(a?Zc(this,a):this.i.length==0||fc(this.h)||Zc(this));};
    function Zc(a,b){var c;b?c=b.l:c=a.V++;const d=O(a.J);S(d,"SID",a.M);S(d,"RID",c);S(d,"AID",a.K);Uc(a,d);a.u&&a.o&&Kc(d,a.u,a.o);c=new N(a,a.j,c,a.D+1);a.u===null&&(c.J=a.o);b&&(a.i=b.G.concat(a.i));b=Yc(a,c,1E3);c.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random());Yb(a.h,c);Cb(c,d,b);}function Uc(a,b){a.H&&ya(a.H,function(c,d){S(b,d,c);});a.l&&ya({},function(c,d){S(b,d,c);});}
    function Yc(a,b,c){c=Math.min(a.i.length,c);const d=a.l?p(a.l.Ka,a.l,a):null;a:{var e=a.i;let k=-1;for(;;){const q=["count="+c];k==-1?c>0?(k=e[0].g,q.push("ofs="+k)):k=0:q.push("ofs="+k);let m=true;for(let r=0;r<c;r++){var f=e[r].g;const A=e[r].map;f-=k;if(f<0)k=Math.max(0,e[r].g-100),m=false;else try{f="req"+f+"_"||"";try{var g=A instanceof Map?A:Object.entries(A);for(const [M,F]of g){let G=F;n(F)&&(G=ab(F));q.push(f+M+"="+encodeURIComponent(G));}}catch(M){throw q.push(f+"type="+encodeURIComponent("_badmap")),
    M;}}catch(M){d&&d(A);}}if(m){g=q.join("&");break a}}g=void 0;}a=a.i.splice(0,c);b.G=a;return g}function ac(a){if(!a.g&&!a.v){a.Y=1;var b=a.Da;u||ta();v||(u(),v=true);oa.add(b,a);a.A=0;}}function Wb(a){if(a.g||a.v||a.A>=3)return false;a.Y++;a.v=ob(p(a.Da,a),Xc(a,a.A));a.A++;return true}h.Da=function(){this.v=null;$c(this);if(this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a);this.B=ob(p(this.Wa,this),a);}};
    h.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=false,this.P=true,J(10),Vb(this),$c(this));};function Pb(a){a.B!=null&&(l.clearTimeout(a.B),a.B=null);}
    function $c(a){a.g=new N(a,a.j,"rpc",a.Y);a.u===null&&(a.g.J=a.o);a.g.P=0;var b=O(a.na);S(b,"RID","rpc");S(b,"SID",a.M);S(b,"AID",a.K);S(b,"CI",a.F?"0":"1");!a.F&&a.ia&&S(b,"TO",a.ia);S(b,"TYPE","xmlhttp");Uc(a,b);a.u&&a.o&&Kc(b,a.u,a.o);a.O&&(a.g.H=a.O);var c=a.g;a=a.ba;c.M=1;c.A=Db(O(b));c.u=null;c.R=true;Eb(c,a);}h.Va=function(){this.C!=null&&(this.C=null,Vb(this),Wb(this),J(19));};function Ub(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null);}
    function Qb(a,b){var c=null;if(a.g==b){Ub(a);Pb(a);a.g=null;var d=2;}else if(Tb(a.h,b))c=b.G,$b(a.h,b),d=1;else return;if(a.I!=0)if(b.o)if(d==1){c=b.u?b.u.length:0;b=Date.now()-b.F;var e=a.D;d=jb();D(d,new nb(d,c));bc(a);}else ac(a);else if(e=b.m,e==3||e==0&&b.X>0||!(d==1&&Wc(a,b)||d==2&&Wb(a)))switch(c&&c.length>0&&(b=a.h,b.i=b.i.concat(c)),e){case 1:R(a,5);break;case 4:R(a,10);break;case 3:R(a,6);break;default:R(a,2);}}
    function Xc(a,b){let c=a.Qa+Math.floor(Math.random()*a.Za);a.isActive()||(c*=2);return c*b}function R(a,b){a.j.info("Error code "+b);if(b==2){var c=p(a.bb,a),d=a.Ua;const e=!d;d=new T(d||"//www.google.com/images/cleardot.gif");l.location&&l.location.protocol=="http"||kc(d,"https");Db(d);e?Bc(d.toString(),c):Cc(d.toString(),c);}else J(2);a.I=0;a.l&&a.l.pa(b);Vc(a);Tc(a);}h.bb=function(a){a?(this.j.info("Successfully pinged google.com"),J(2)):(this.j.info("Failed to ping google.com"),J(1));};
    function Vc(a){a.I=0;a.ja=[];if(a.l){const b=hc(a.h);if(b.length!=0||a.i.length!=0)ka(a.ja,b),ka(a.ja,a.i),a.h.i.length=0,ja(a.i),a.i.length=0;a.l.oa();}}function Zb(a,b,c){var d=c instanceof T?O(c):new T(c);if(d.g!="")b&&(d.g=b+"."+d.g),lc(d,d.u);else {var e=l.location;d=e.protocol;b=b?b+"."+e.hostname:e.hostname;e=+e.port;const f=new T(null);d&&kc(f,d);b&&(f.g=b);e&&lc(f,e);c&&(f.h=c);d=f;}c=a.G;b=a.wa;c&&b&&S(d,c,b);S(d,"VER",a.ka);Uc(a,d);return d}
    function Hb(a,b,c){if(b&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");b=a.Aa&&!a.ma?new X(new Ec({ab:c})):new X(a.ma);b.Fa(a.L);return b}h.isActive=function(){return !!this.l&&this.l.isActive(this)};function ad(){}h=ad.prototype;h.ra=function(){};h.qa=function(){};h.pa=function(){};h.oa=function(){};h.isActive=function(){return true};h.Ka=function(){};function bd(){}bd.prototype.g=function(a,b){return new Y(a,b)};
    function Y(a,b){C.call(this);this.g=new Sc(b);this.l=a;this.h=b&&b.messageUrlParams||null;a=b&&b.messageHeaders||null;b&&b.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"});this.g.o=a;a=b&&b.initMessageHeaders||null;b&&b.messageContentType&&(a?a["X-WebChannel-Content-Type"]=b.messageContentType:a={"X-WebChannel-Content-Type":b.messageContentType});b&&b.sa&&(a?a["X-WebChannel-Client-Profile"]=b.sa:a={"X-WebChannel-Client-Profile":b.sa});this.g.U=
    a;(a=b&&b.Qb)&&!y(a)&&(this.g.u=a);this.A=b&&b.supportsCrossDomainXhr||false;this.v=b&&b.sendRawJson||false;(b=b&&b.httpSessionIdParam)&&!y(b)&&(this.g.G=b,a=this.h,a!==null&&b in a&&(a=this.h,b in a&&delete a[b]));this.j=new Z(this);}t(Y,C);Y.prototype.m=function(){this.g.l=this.j;this.A&&(this.g.L=true);this.g.connect(this.l,this.h||void 0);};Y.prototype.close=function(){cc(this.g);};
    Y.prototype.o=function(a){var b=this.g;if(typeof a==="string"){var c={};c.__data__=a;a=c;}else this.v&&(c={},c.__data__=ab(a),a=c);b.i.push(new dc(b.Ya++,a));b.I==3&&bc(b);};Y.prototype.N=function(){this.g.l=null;delete this.j;cc(this.g);delete this.g;Y.Z.N.call(this);};
    function cd(a){gb.call(this);a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var b=a.__sm__;if(b){a:{for(const c in b){a=c;break a}a=void 0;}if(this.i=a)a=this.i,b=b!==null&&a in b?b[a]:void 0;this.data=b;}else this.data=a;}t(cd,gb);function dd(){hb.call(this);this.status=1;}t(dd,hb);function Z(a){this.g=a;}t(Z,ad);Z.prototype.ra=function(){D(this.g,"a");};Z.prototype.qa=function(a){D(this.g,new cd(a));};
    Z.prototype.pa=function(a){D(this.g,new dd());};Z.prototype.oa=function(){D(this.g,"b");};bd.prototype.createWebChannel=bd.prototype.g;Y.prototype.send=Y.prototype.o;Y.prototype.open=Y.prototype.m;Y.prototype.close=Y.prototype.close;createWebChannelTransport = function(){return new bd};getStatEventTarget = function(){return jb()};Event = I;Stat = {jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20};ub.NO_ERROR=0;ub.TIMEOUT=8;ub.HTTP_ERROR=6;
    ErrorCode = ub;vb.COMPLETE="complete";EventType = vb;fb.EventType=H;H.OPEN="a";H.CLOSE="b";H.ERROR="c";H.MESSAGE="d";C.prototype.listen=C.prototype.J;WebChannel = fb;X.prototype.listenOnce=X.prototype.K;X.prototype.getLastError=X.prototype.Ha;X.prototype.getLastErrorCode=X.prototype.ya;X.prototype.getStatus=X.prototype.ca;X.prototype.getResponseJson=X.prototype.La;X.prototype.getResponseText=X.prototype.la;
    X.prototype.send=X.prototype.ea;X.prototype.setWithCredentials=X.prototype.Fa;XhrIo = X;}).apply( typeof commonjsGlobal !== 'undefined' ? commonjsGlobal : typeof self !== 'undefined' ? self  : typeof window !== 'undefined' ? window  : {});

    const F = "@firebase/firestore", M = "4.9.2";

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * Simple wrapper around a nullable UID. Mostly exists to make code more
     * readable.
     */
    class User {
        constructor(e) {
            this.uid = e;
        }
        isAuthenticated() {
            return null != this.uid;
        }
        /**
         * Returns a key representing this user, suitable for inclusion in a
         * dictionary.
         */    toKey() {
            return this.isAuthenticated() ? "uid:" + this.uid : "anonymous-user";
        }
        isEqual(e) {
            return e.uid === this.uid;
        }
    }

    /** A user with a null UID. */ User.UNAUTHENTICATED = new User(null), 
    // TODO(mikelehen): Look into getting a proper uid-equivalent for
    // non-FirebaseAuth providers.
    User.GOOGLE_CREDENTIALS = new User("google-credentials-uid"), User.FIRST_PARTY = new User("first-party-uid"), 
    User.MOCK_USER = new User("mock-user");

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    let x = "12.3.0";

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    const O = new Logger("@firebase/firestore");

    // Helper methods are needed because variables can't be exported as read/write
    function __PRIVATE_getLogLevel() {
        return O.logLevel;
    }

    function __PRIVATE_logDebug(e, ...t) {
        if (O.logLevel <= LogLevel.DEBUG) {
            const n = t.map(__PRIVATE_argToString);
            O.debug(`Firestore (${x}): ${e}`, ...n);
        }
    }

    function __PRIVATE_logError(e, ...t) {
        if (O.logLevel <= LogLevel.ERROR) {
            const n = t.map(__PRIVATE_argToString);
            O.error(`Firestore (${x}): ${e}`, ...n);
        }
    }

    /**
     * @internal
     */ function __PRIVATE_logWarn(e, ...t) {
        if (O.logLevel <= LogLevel.WARN) {
            const n = t.map(__PRIVATE_argToString);
            O.warn(`Firestore (${x}): ${e}`, ...n);
        }
    }

    /**
     * Converts an additional log parameter to a string representation.
     */ function __PRIVATE_argToString(e) {
        if ("string" == typeof e) return e;
        try {
            /**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
            /** Formats an object as a JSON string, suitable for logging. */
            return function __PRIVATE_formatJSON(e) {
                return JSON.stringify(e);
            }(e);
        } catch (t) {
            // Converting to JSON failed, just log the object directly
            return e;
        }
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */ function fail(e, t, n) {
        let r = "Unexpected state";
        "string" == typeof t ? r = t : n = t, __PRIVATE__fail(e, r, n);
    }

    function __PRIVATE__fail(e, t, n) {
        // Log the failure in addition to throw an exception, just in case the
        // exception is swallowed.
        let r = `FIRESTORE (${x}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;
        if (void 0 !== n) try {
            r += " CONTEXT: " + JSON.stringify(n);
        } catch (e) {
            r += " CONTEXT: " + n;
        }
        // NOTE: We don't use FirestoreError here because these are internal failures
        // that cannot be handled by the user. (Also it would create a circular
        // dependency between the error and assert modules which doesn't work.)
        throw __PRIVATE_logError(r), new Error(r);
    }

    function __PRIVATE_hardAssert(e, t, n, r) {
        let i = "Unexpected state";
        "string" == typeof n ? i = n : r = n, e || __PRIVATE__fail(t, i, r);
    }

    /**
     * Casts `obj` to `T`. In non-production builds, verifies that `obj` is an
     * instance of `T` before casting.
     */ function __PRIVATE_debugCast(e, 
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    t) {
        return e;
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */ const N = {
        // Causes are copied from:
        // https://github.com/grpc/grpc/blob/bceec94ea4fc5f0085d81235d8e1c06798dc341a/include/grpc%2B%2B/impl/codegen/status_code_enum.h
        /** Not an error; returned on success. */
        OK: "ok",
        /** The operation was cancelled (typically by the caller). */
        CANCELLED: "cancelled",
        /** Unknown error or an error from a different error domain. */
        UNKNOWN: "unknown",
        /**
         * Client specified an invalid argument. Note that this differs from
         * FAILED_PRECONDITION. INVALID_ARGUMENT indicates arguments that are
         * problematic regardless of the state of the system (e.g., a malformed file
         * name).
         */
        INVALID_ARGUMENT: "invalid-argument",
        /**
         * Deadline expired before operation could complete. For operations that
         * change the state of the system, this error may be returned even if the
         * operation has completed successfully. For example, a successful response
         * from a server could have been delayed long enough for the deadline to
         * expire.
         */
        DEADLINE_EXCEEDED: "deadline-exceeded",
        /** Some requested entity (e.g., file or directory) was not found. */
        NOT_FOUND: "not-found",
        /**
         * Some entity that we attempted to create (e.g., file or directory) already
         * exists.
         */
        ALREADY_EXISTS: "already-exists",
        /**
         * The caller does not have permission to execute the specified operation.
         * PERMISSION_DENIED must not be used for rejections caused by exhausting
         * some resource (use RESOURCE_EXHAUSTED instead for those errors).
         * PERMISSION_DENIED must not be used if the caller cannot be identified
         * (use UNAUTHENTICATED instead for those errors).
         */
        PERMISSION_DENIED: "permission-denied",
        /**
         * The request does not have valid authentication credentials for the
         * operation.
         */
        UNAUTHENTICATED: "unauthenticated",
        /**
         * Some resource has been exhausted, perhaps a per-user quota, or perhaps the
         * entire file system is out of space.
         */
        RESOURCE_EXHAUSTED: "resource-exhausted",
        /**
         * Operation was rejected because the system is not in a state required for
         * the operation's execution. For example, directory to be deleted may be
         * non-empty, an rmdir operation is applied to a non-directory, etc.
         *
         * A litmus test that may help a service implementor in deciding
         * between FAILED_PRECONDITION, ABORTED, and UNAVAILABLE:
         *  (a) Use UNAVAILABLE if the client can retry just the failing call.
         *  (b) Use ABORTED if the client should retry at a higher-level
         *      (e.g., restarting a read-modify-write sequence).
         *  (c) Use FAILED_PRECONDITION if the client should not retry until
         *      the system state has been explicitly fixed. E.g., if an "rmdir"
         *      fails because the directory is non-empty, FAILED_PRECONDITION
         *      should be returned since the client should not retry unless
         *      they have first fixed up the directory by deleting files from it.
         *  (d) Use FAILED_PRECONDITION if the client performs conditional
         *      REST Get/Update/Delete on a resource and the resource on the
         *      server does not match the condition. E.g., conflicting
         *      read-modify-write on the same resource.
         */
        FAILED_PRECONDITION: "failed-precondition",
        /**
         * The operation was aborted, typically due to a concurrency issue like
         * sequencer check failures, transaction aborts, etc.
         *
         * See litmus test above for deciding between FAILED_PRECONDITION, ABORTED,
         * and UNAVAILABLE.
         */
        ABORTED: "aborted",
        /**
         * Operation was attempted past the valid range. E.g., seeking or reading
         * past end of file.
         *
         * Unlike INVALID_ARGUMENT, this error indicates a problem that may be fixed
         * if the system state changes. For example, a 32-bit file system will
         * generate INVALID_ARGUMENT if asked to read at an offset that is not in the
         * range [0,2^32-1], but it will generate OUT_OF_RANGE if asked to read from
         * an offset past the current file size.
         *
         * There is a fair bit of overlap between FAILED_PRECONDITION and
         * OUT_OF_RANGE. We recommend using OUT_OF_RANGE (the more specific error)
         * when it applies so that callers who are iterating through a space can
         * easily look for an OUT_OF_RANGE error to detect when they are done.
         */
        OUT_OF_RANGE: "out-of-range",
        /** Operation is not implemented or not supported/enabled in this service. */
        UNIMPLEMENTED: "unimplemented",
        /**
         * Internal errors. Means some invariants expected by underlying System has
         * been broken. If you see one of these errors, Something is very broken.
         */
        INTERNAL: "internal",
        /**
         * The service is currently unavailable. This is a most likely a transient
         * condition and may be corrected by retrying with a backoff.
         *
         * See litmus test above for deciding between FAILED_PRECONDITION, ABORTED,
         * and UNAVAILABLE.
         */
        UNAVAILABLE: "unavailable",
        /** Unrecoverable data loss or corruption. */
        DATA_LOSS: "data-loss"
    };

    /** An error returned by a Firestore operation. */ class FirestoreError extends FirebaseError {
        /** @hideconstructor */
        constructor(
        /**
         * The backend error code associated with this error.
         */
        e, 
        /**
         * A custom error description.
         */
        t) {
            super(e, t), this.code = e, this.message = t, 
            // HACK: We write a toString property directly because Error is not a real
            // class and so inheritance does not work correctly. We could alternatively
            // do the same "back-door inheritance" trick that FirebaseError does.
            this.toString = () => `${this.name}: [code=${this.code}]: ${this.message}`;
        }
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */ class __PRIVATE_Deferred {
        constructor() {
            this.promise = new Promise(((e, t) => {
                this.resolve = e, this.reject = t;
            }));
        }
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */ class __PRIVATE_OAuthToken {
        constructor(e, t) {
            this.user = t, this.type = "OAuth", this.headers = new Map, this.headers.set("Authorization", `Bearer ${e}`);
        }
    }

    /**
     * A CredentialsProvider that always yields an empty token.
     * @internal
     */ class __PRIVATE_EmptyAuthCredentialsProvider {
        getToken() {
            return Promise.resolve(null);
        }
        invalidateToken() {}
        start(e, t) {
            // Fire with initial user.
            e.enqueueRetryable((() => t(User.UNAUTHENTICATED)));
        }
        shutdown() {}
    }

    /**
     * A CredentialsProvider that always returns a constant token. Used for
     * emulator token mocking.
     */ class __PRIVATE_EmulatorAuthCredentialsProvider {
        constructor(e) {
            this.token = e, 
            /**
             * Stores the listener registered with setChangeListener()
             * This isn't actually necessary since the UID never changes, but we use this
             * to verify the listen contract is adhered to in tests.
             */
            this.changeListener = null;
        }
        getToken() {
            return Promise.resolve(this.token);
        }
        invalidateToken() {}
        start(e, t) {
            this.changeListener = t, 
            // Fire with initial user.
            e.enqueueRetryable((() => t(this.token.user)));
        }
        shutdown() {
            this.changeListener = null;
        }
    }

    class __PRIVATE_FirebaseAuthCredentialsProvider {
        constructor(e) {
            this.t = e, 
            /** Tracks the current User. */
            this.currentUser = User.UNAUTHENTICATED, 
            /**
             * Counter used to detect if the token changed while a getToken request was
             * outstanding.
             */
            this.i = 0, this.forceRefresh = false, this.auth = null;
        }
        start(e, t) {
            __PRIVATE_hardAssert(void 0 === this.o, 42304);
            let n = this.i;
            // A change listener that prevents double-firing for the same token change.
                    const __PRIVATE_guardedChangeListener = e => this.i !== n ? (n = this.i, 
            t(e)) : Promise.resolve();
            // A promise that can be waited on to block on the next token change.
            // This promise is re-created after each change.
                    let r = new __PRIVATE_Deferred;
            this.o = () => {
                this.i++, this.currentUser = this.u(), r.resolve(), r = new __PRIVATE_Deferred, 
                e.enqueueRetryable((() => __PRIVATE_guardedChangeListener(this.currentUser)));
            };
            const __PRIVATE_awaitNextToken = () => {
                const t = r;
                e.enqueueRetryable((async () => {
                    await t.promise, await __PRIVATE_guardedChangeListener(this.currentUser);
                }));
            }, __PRIVATE_registerAuth = e => {
                __PRIVATE_logDebug("FirebaseAuthCredentialsProvider", "Auth detected"), this.auth = e, 
                this.o && (this.auth.addAuthTokenListener(this.o), __PRIVATE_awaitNextToken());
            };
            this.t.onInit((e => __PRIVATE_registerAuth(e))), 
            // Our users can initialize Auth right after Firestore, so we give it
            // a chance to register itself with the component framework before we
            // determine whether to start up in unauthenticated mode.
            setTimeout((() => {
                if (!this.auth) {
                    const e = this.t.getImmediate({
                        optional: true
                    });
                    e ? __PRIVATE_registerAuth(e) : (
                    // If auth is still not available, proceed with `null` user
                    __PRIVATE_logDebug("FirebaseAuthCredentialsProvider", "Auth not yet detected"), 
                    r.resolve(), r = new __PRIVATE_Deferred);
                }
            }), 0), __PRIVATE_awaitNextToken();
        }
        getToken() {
            // Take note of the current value of the tokenCounter so that this method
            // can fail (with an ABORTED error) if there is a token change while the
            // request is outstanding.
            const e = this.i, t = this.forceRefresh;
            return this.forceRefresh = false, this.auth ? this.auth.getToken(t).then((t => 
            // Cancel the request since the token changed while the request was
            // outstanding so the response is potentially for a previous user (which
            // user, we can't be sure).
            this.i !== e ? (__PRIVATE_logDebug("FirebaseAuthCredentialsProvider", "getToken aborted due to token change."), 
            this.getToken()) : t ? (__PRIVATE_hardAssert("string" == typeof t.accessToken, 31837, {
                l: t
            }), new __PRIVATE_OAuthToken(t.accessToken, this.currentUser)) : null)) : Promise.resolve(null);
        }
        invalidateToken() {
            this.forceRefresh = true;
        }
        shutdown() {
            this.auth && this.o && this.auth.removeAuthTokenListener(this.o), this.o = void 0;
        }
        // Auth.getUid() can return null even with a user logged in. It is because
        // getUid() is synchronous, but the auth code populating Uid is asynchronous.
        // This method should only be called in the AuthTokenListener callback
        // to guarantee to get the actual user.
        u() {
            const e = this.auth && this.auth.getUid();
            return __PRIVATE_hardAssert(null === e || "string" == typeof e, 2055, {
                h: e
            }), new User(e);
        }
    }

    /*
     * FirstPartyToken provides a fresh token each time its value
     * is requested, because if the token is too old, requests will be rejected.
     * Technically this may no longer be necessary since the SDK should gracefully
     * recover from unauthenticated errors (see b/33147818 for context), but it's
     * safer to keep the implementation as-is.
     */ class __PRIVATE_FirstPartyToken {
        constructor(e, t, n) {
            this.P = e, this.T = t, this.I = n, this.type = "FirstParty", this.user = User.FIRST_PARTY, 
            this.A = new Map;
        }
        /**
         * Gets an authorization token, using a provided factory function, or return
         * null.
         */    R() {
            return this.I ? this.I() : null;
        }
        get headers() {
            this.A.set("X-Goog-AuthUser", this.P);
            // Use array notation to prevent minification
            const e = this.R();
            return e && this.A.set("Authorization", e), this.T && this.A.set("X-Goog-Iam-Authorization-Token", this.T), 
            this.A;
        }
    }

    /*
     * Provides user credentials required for the Firestore JavaScript SDK
     * to authenticate the user, using technique that is only available
     * to applications hosted by Google.
     */ class __PRIVATE_FirstPartyAuthCredentialsProvider {
        constructor(e, t, n) {
            this.P = e, this.T = t, this.I = n;
        }
        getToken() {
            return Promise.resolve(new __PRIVATE_FirstPartyToken(this.P, this.T, this.I));
        }
        start(e, t) {
            // Fire with initial uid.
            e.enqueueRetryable((() => t(User.FIRST_PARTY)));
        }
        shutdown() {}
        invalidateToken() {}
    }

    class AppCheckToken {
        constructor(e) {
            this.value = e, this.type = "AppCheck", this.headers = new Map, e && e.length > 0 && this.headers.set("x-firebase-appcheck", this.value);
        }
    }

    class __PRIVATE_FirebaseAppCheckTokenProvider {
        constructor(t, n) {
            this.V = n, this.forceRefresh = false, this.appCheck = null, this.m = null, this.p = null, 
            _isFirebaseServerApp(t) && t.settings.appCheckToken && (this.p = t.settings.appCheckToken);
        }
        start(e, t) {
            __PRIVATE_hardAssert(void 0 === this.o, 3512);
            const onTokenChanged = e => {
                null != e.error && __PRIVATE_logDebug("FirebaseAppCheckTokenProvider", `Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);
                const n = e.token !== this.m;
                return this.m = e.token, __PRIVATE_logDebug("FirebaseAppCheckTokenProvider", `Received ${n ? "new" : "existing"} token.`), 
                n ? t(e.token) : Promise.resolve();
            };
            this.o = t => {
                e.enqueueRetryable((() => onTokenChanged(t)));
            };
            const __PRIVATE_registerAppCheck = e => {
                __PRIVATE_logDebug("FirebaseAppCheckTokenProvider", "AppCheck detected"), this.appCheck = e, 
                this.o && this.appCheck.addTokenListener(this.o);
            };
            this.V.onInit((e => __PRIVATE_registerAppCheck(e))), 
            // Our users can initialize AppCheck after Firestore, so we give it
            // a chance to register itself with the component framework.
            setTimeout((() => {
                if (!this.appCheck) {
                    const e = this.V.getImmediate({
                        optional: true
                    });
                    e ? __PRIVATE_registerAppCheck(e) : 
                    // If AppCheck is still not available, proceed without it.
                    __PRIVATE_logDebug("FirebaseAppCheckTokenProvider", "AppCheck not yet detected");
                }
            }), 0);
        }
        getToken() {
            if (this.p) return Promise.resolve(new AppCheckToken(this.p));
            const e = this.forceRefresh;
            return this.forceRefresh = false, this.appCheck ? this.appCheck.getToken(e).then((e => e ? (__PRIVATE_hardAssert("string" == typeof e.token, 44558, {
                tokenResult: e
            }), this.m = e.token, new AppCheckToken(e.token)) : null)) : Promise.resolve(null);
        }
        invalidateToken() {
            this.forceRefresh = true;
        }
        shutdown() {
            this.appCheck && this.o && this.appCheck.removeTokenListener(this.o), this.o = void 0;
        }
    }

    /**
     * Builds a CredentialsProvider depending on the type of
     * the credentials passed in.
     */
    /**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * Generates `nBytes` of random bytes.
     *
     * If `nBytes < 0` , an error will be thrown.
     */
    function __PRIVATE_randomBytes(e) {
        // Polyfills for IE and WebWorker by using `self` and `msCrypto` when `crypto` is not available.
        const t = 
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
        "undefined" != typeof self && (self.crypto || self.msCrypto), n = new Uint8Array(e);
        if (t && "function" == typeof t.getRandomValues) t.getRandomValues(n); else 
        // Falls back to Math.random
        for (let t = 0; t < e; t++) n[t] = Math.floor(256 * Math.random());
        return n;
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * A utility class for generating unique alphanumeric IDs of a specified length.
     *
     * @internal
     * Exported internally for testing purposes.
     */ class __PRIVATE_AutoId {
        static newId() {
            // Alphanumeric characters
            const e = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789", t = 62 * Math.floor(256 / 62);
            // The largest byte value that is a multiple of `char.length`.
                    let n = "";
            for (;n.length < 20; ) {
                const r = __PRIVATE_randomBytes(40);
                for (let i = 0; i < r.length; ++i) 
                // Only accept values that are [0, maxMultiple), this ensures they can
                // be evenly mapped to indices of `chars` via a modulo operation.
                n.length < 20 && r[i] < t && (n += e.charAt(r[i] % 62));
            }
            return n;
        }
    }

    function __PRIVATE_primitiveComparator(e, t) {
        return e < t ? -1 : e > t ? 1 : 0;
    }

    /** Compare strings in UTF-8 encoded byte order */ function __PRIVATE_compareUtf8Strings(e, t) {
        // Find the first differing character (a.k.a. "UTF-16 code unit") in the two strings and,
        // if found, use that character to determine the relative ordering of the two strings as a
        // whole. Comparing UTF-16 strings in UTF-8 byte order can be done simply and efficiently by
        // comparing the UTF-16 code units (chars). This serendipitously works because of the way UTF-8
        // and UTF-16 happen to represent Unicode code points.
        // After finding the first pair of differing characters, there are two cases:
        // Case 1: Both characters are non-surrogates (code points less than or equal to 0xFFFF) or
        // both are surrogates from a surrogate pair (that collectively represent code points greater
        // than 0xFFFF). In this case their numeric order as UTF-16 code units is the same as the
        // lexicographical order of their corresponding UTF-8 byte sequences. A direct comparison is
        // sufficient.
        // Case 2: One character is a surrogate and the other is not. In this case the surrogate-
        // containing string is always ordered after the non-surrogate. This is because surrogates are
        // used to represent code points greater than 0xFFFF which have 4-byte UTF-8 representations
        // and are lexicographically greater than the 1, 2, or 3-byte representations of code points
        // less than or equal to 0xFFFF.
        // An example of why Case 2 is required is comparing the following two Unicode code points:
        // |-----------------------|------------|---------------------|-----------------|
        // | Name                  | Code Point | UTF-8 Encoding      | UTF-16 Encoding |
        // |-----------------------|------------|---------------------|-----------------|
        // | Replacement Character | U+FFFD     | 0xEF 0xBF 0xBD      | 0xFFFD          |
        // | Grinning Face         | U+1F600    | 0xF0 0x9F 0x98 0x80 | 0xD83D 0xDE00   |
        // |-----------------------|------------|---------------------|-----------------|
        // A lexicographical comparison of the UTF-8 encodings of these code points would order
        // "Replacement Character" _before_ "Grinning Face" because 0xEF is less than 0xF0. However, a
        // direct comparison of the UTF-16 code units, as would be done in case 1, would erroneously
        // produce the _opposite_ ordering, because 0xFFFD is _greater than_ 0xD83D. As it turns out,
        // this relative ordering holds for all comparisons of UTF-16 code points requiring a surrogate
        // pair with those that do not.
        const n = Math.min(e.length, t.length);
        for (let r = 0; r < n; r++) {
            const n = e.charAt(r), i = t.charAt(r);
            if (n !== i) return __PRIVATE_isSurrogate(n) === __PRIVATE_isSurrogate(i) ? __PRIVATE_primitiveComparator(n, i) : __PRIVATE_isSurrogate(n) ? 1 : -1;
        }
        // Use the lengths of the strings to determine the overall comparison result since either the
        // strings were equal or one is a prefix of the other.
            return __PRIVATE_primitiveComparator(e.length, t.length);
    }

    const B = 55296, L = 57343;

    function __PRIVATE_isSurrogate(e) {
        const t = e.charCodeAt(0);
        return t >= B && t <= L;
    }

    /** Helper to compare arrays using isEqual(). */ function __PRIVATE_arrayEquals(e, t, n) {
        return e.length === t.length && e.every(((e, r) => n(e, t[r])));
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */ const k = "__name__";

    /**
     * Path represents an ordered sequence of string segments.
     */ class BasePath {
        constructor(e, t, n) {
            void 0 === t ? t = 0 : t > e.length && fail(637, {
                offset: t,
                range: e.length
            }), void 0 === n ? n = e.length - t : n > e.length - t && fail(1746, {
                length: n,
                range: e.length - t
            }), this.segments = e, this.offset = t, this.len = n;
        }
        get length() {
            return this.len;
        }
        isEqual(e) {
            return 0 === BasePath.comparator(this, e);
        }
        child(e) {
            const t = this.segments.slice(this.offset, this.limit());
            return e instanceof BasePath ? e.forEach((e => {
                t.push(e);
            })) : t.push(e), this.construct(t);
        }
        /** The index of one past the last segment of the path. */    limit() {
            return this.offset + this.length;
        }
        popFirst(e) {
            return e = void 0 === e ? 1 : e, this.construct(this.segments, this.offset + e, this.length - e);
        }
        popLast() {
            return this.construct(this.segments, this.offset, this.length - 1);
        }
        firstSegment() {
            return this.segments[this.offset];
        }
        lastSegment() {
            return this.get(this.length - 1);
        }
        get(e) {
            return this.segments[this.offset + e];
        }
        isEmpty() {
            return 0 === this.length;
        }
        isPrefixOf(e) {
            if (e.length < this.length) return false;
            for (let t = 0; t < this.length; t++) if (this.get(t) !== e.get(t)) return false;
            return true;
        }
        isImmediateParentOf(e) {
            if (this.length + 1 !== e.length) return false;
            for (let t = 0; t < this.length; t++) if (this.get(t) !== e.get(t)) return false;
            return true;
        }
        forEach(e) {
            for (let t = this.offset, n = this.limit(); t < n; t++) e(this.segments[t]);
        }
        toArray() {
            return this.segments.slice(this.offset, this.limit());
        }
        /**
         * Compare 2 paths segment by segment, prioritizing numeric IDs
         * (e.g., "__id123__") in numeric ascending order, followed by string
         * segments in lexicographical order.
         */    static comparator(e, t) {
            const n = Math.min(e.length, t.length);
            for (let r = 0; r < n; r++) {
                const n = BasePath.compareSegments(e.get(r), t.get(r));
                if (0 !== n) return n;
            }
            return __PRIVATE_primitiveComparator(e.length, t.length);
        }
        static compareSegments(e, t) {
            const n = BasePath.isNumericId(e), r = BasePath.isNumericId(t);
            return n && !r ? -1 : !n && r ? 1 : n && r ? BasePath.extractNumericId(e).compare(BasePath.extractNumericId(t)) : __PRIVATE_compareUtf8Strings(e, t);
        }
        // Checks if a segment is a numeric ID (starts with "__id" and ends with "__").
        static isNumericId(e) {
            return e.startsWith("__id") && e.endsWith("__");
        }
        static extractNumericId(e) {
            return Integer.fromString(e.substring(4, e.length - 2));
        }
    }

    /**
     * A slash-separated path for navigating resources (documents and collections)
     * within Firestore.
     *
     * @internal
     */ class ResourcePath extends BasePath {
        construct(e, t, n) {
            return new ResourcePath(e, t, n);
        }
        canonicalString() {
            // NOTE: The client is ignorant of any path segments containing escape
            // sequences (e.g. __id123__) and just passes them through raw (they exist
            // for legacy reasons and should not be used frequently).
            return this.toArray().join("/");
        }
        toString() {
            return this.canonicalString();
        }
        /**
         * Returns a string representation of this path
         * where each path segment has been encoded with
         * `encodeURIComponent`.
         */    toUriEncodedString() {
            return this.toArray().map(encodeURIComponent).join("/");
        }
        /**
         * Creates a resource path from the given slash-delimited string. If multiple
         * arguments are provided, all components are combined. Leading and trailing
         * slashes from all components are ignored.
         */    static fromString(...e) {
            // NOTE: The client is ignorant of any path segments containing escape
            // sequences (e.g. __id123__) and just passes them through raw (they exist
            // for legacy reasons and should not be used frequently).
            const t = [];
            for (const n of e) {
                if (n.indexOf("//") >= 0) throw new FirestoreError(N.INVALID_ARGUMENT, `Invalid segment (${n}). Paths must not contain // in them.`);
                // Strip leading and trailing slashed.
                            t.push(...n.split("/").filter((e => e.length > 0)));
            }
            return new ResourcePath(t);
        }
        static emptyPath() {
            return new ResourcePath([]);
        }
    }

    const q = /^[_a-zA-Z][_a-zA-Z0-9]*$/;

    /**
     * A dot-separated path for navigating sub-objects within a document.
     * @internal
     */ class FieldPath$1 extends BasePath {
        construct(e, t, n) {
            return new FieldPath$1(e, t, n);
        }
        /**
         * Returns true if the string could be used as a segment in a field path
         * without escaping.
         */    static isValidIdentifier(e) {
            return q.test(e);
        }
        canonicalString() {
            return this.toArray().map((e => (e = e.replace(/\\/g, "\\\\").replace(/`/g, "\\`"), 
            FieldPath$1.isValidIdentifier(e) || (e = "`" + e + "`"), e))).join(".");
        }
        toString() {
            return this.canonicalString();
        }
        /**
         * Returns true if this field references the key of a document.
         */    isKeyField() {
            return 1 === this.length && this.get(0) === k;
        }
        /**
         * The field designating the key of a document.
         */    static keyField() {
            return new FieldPath$1([ k ]);
        }
        /**
         * Parses a field string from the given server-formatted string.
         *
         * - Splitting the empty string is not allowed (for now at least).
         * - Empty segments within the string (e.g. if there are two consecutive
         *   separators) are not allowed.
         *
         * TODO(b/37244157): we should make this more strict. Right now, it allows
         * non-identifier path components, even if they aren't escaped.
         */    static fromServerFormat(e) {
            const t = [];
            let n = "", r = 0;
            const __PRIVATE_addCurrentSegment = () => {
                if (0 === n.length) throw new FirestoreError(N.INVALID_ARGUMENT, `Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);
                t.push(n), n = "";
            };
            let i = false;
            for (;r < e.length; ) {
                const t = e[r];
                if ("\\" === t) {
                    if (r + 1 === e.length) throw new FirestoreError(N.INVALID_ARGUMENT, "Path has trailing escape character: " + e);
                    const t = e[r + 1];
                    if ("\\" !== t && "." !== t && "`" !== t) throw new FirestoreError(N.INVALID_ARGUMENT, "Path has invalid escape sequence: " + e);
                    n += t, r += 2;
                } else "`" === t ? (i = !i, r++) : "." !== t || i ? (n += t, r++) : (__PRIVATE_addCurrentSegment(), 
                r++);
            }
            if (__PRIVATE_addCurrentSegment(), i) throw new FirestoreError(N.INVALID_ARGUMENT, "Unterminated ` in path: " + e);
            return new FieldPath$1(t);
        }
        static emptyPath() {
            return new FieldPath$1([]);
        }
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * @internal
     */ class DocumentKey {
        constructor(e) {
            this.path = e;
        }
        static fromPath(e) {
            return new DocumentKey(ResourcePath.fromString(e));
        }
        static fromName(e) {
            return new DocumentKey(ResourcePath.fromString(e).popFirst(5));
        }
        static empty() {
            return new DocumentKey(ResourcePath.emptyPath());
        }
        get collectionGroup() {
            return this.path.popLast().lastSegment();
        }
        /** Returns true if the document is in the specified collectionId. */    hasCollectionId(e) {
            return this.path.length >= 2 && this.path.get(this.path.length - 2) === e;
        }
        /** Returns the collection group (i.e. the name of the parent collection) for this key. */    getCollectionGroup() {
            return this.path.get(this.path.length - 2);
        }
        /** Returns the fully qualified path to the parent collection. */    getCollectionPath() {
            return this.path.popLast();
        }
        isEqual(e) {
            return null !== e && 0 === ResourcePath.comparator(this.path, e.path);
        }
        toString() {
            return this.path.toString();
        }
        static comparator(e, t) {
            return ResourcePath.comparator(e.path, t.path);
        }
        static isDocumentKey(e) {
            return e.length % 2 == 0;
        }
        /**
         * Creates and returns a new document key with the given segments.
         *
         * @param segments - The segments of the path to the document
         * @returns A new instance of DocumentKey
         */    static fromSegments(e) {
            return new DocumentKey(new ResourcePath(e.slice()));
        }
    }

    /**
     * Validates that two boolean options are not set at the same time.
     * @internal
     */ function __PRIVATE_validateIsNotUsedTogether(e, t, n, r) {
        if (true === t && true === r) throw new FirestoreError(N.INVALID_ARGUMENT, `${e} and ${n} cannot be used together.`);
    }

    /**
     * Validates that `path` refers to a collection (indicated by the fact it
     * contains an odd numbers of segments).
     */ function __PRIVATE_validateCollectionPath(e) {
        if (DocumentKey.isDocumentKey(e)) throw new FirestoreError(N.INVALID_ARGUMENT, `Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`);
    }

    /**
     * Returns true if it's a non-null object without a custom prototype
     * (i.e. excludes Array, Date, etc.).
     */ function __PRIVATE_isPlainObject(e) {
        return "object" == typeof e && null !== e && (Object.getPrototypeOf(e) === Object.prototype || null === Object.getPrototypeOf(e));
    }

    /** Returns a string describing the type / value of the provided input. */ function __PRIVATE_valueDescription(e) {
        if (void 0 === e) return "undefined";
        if (null === e) return "null";
        if ("string" == typeof e) return e.length > 20 && (e = `${e.substring(0, 20)}...`), 
        JSON.stringify(e);
        if ("number" == typeof e || "boolean" == typeof e) return "" + e;
        if ("object" == typeof e) {
            if (e instanceof Array) return "an array";
            {
                const t = 
                /** try to get the constructor name for an object. */
                function __PRIVATE_tryGetCustomObjectType(e) {
                    if (e.constructor) return e.constructor.name;
                    return null;
                }
                /**
     * Casts `obj` to `T`, optionally unwrapping Compat types to expose the
     * underlying instance. Throws if  `obj` is not an instance of `T`.
     *
     * This cast is used in the Lite and Full SDK to verify instance types for
     * arguments passed to the public API.
     * @internal
     */ (e);
                return t ? `a custom ${t} object` : "an object";
            }
        }
        return "function" == typeof e ? "a function" : fail(12329, {
            type: typeof e
        });
    }

    function __PRIVATE_cast(e, 
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    t) {
        if ("_delegate" in e && (
        // Unwrap Compat types
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
        e = e._delegate), !(e instanceof t)) {
            if (t.name === e.constructor.name) throw new FirestoreError(N.INVALID_ARGUMENT, "Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");
            {
                const n = __PRIVATE_valueDescription(e);
                throw new FirestoreError(N.INVALID_ARGUMENT, `Expected type '${t.name}', but it was: ${n}`);
            }
        }
        return e;
    }

    /**
     * @license
     * Copyright 2025 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * Helper function to define a JSON schema {@link Property}.
     * @private
     * @internal
     */ function property(e, t) {
        const n = {
            typeString: e
        };
        return t && (n.value = t), n;
    }

    /**
     * Validates the JSON object based on the provided schema, and narrows the type to the provided
     * JSON schema.
     * @private
     * @internal
     *
     * @param json A JSON object to validate.
     * @param scheme a {@link JsonSchema} that defines the properties to validate.
     * @returns true if the JSON schema exists within the object. Throws a FirestoreError otherwise.
     */ function __PRIVATE_validateJSON(e, t) {
        if (!__PRIVATE_isPlainObject(e)) throw new FirestoreError(N.INVALID_ARGUMENT, "JSON must be an object");
        let n;
        for (const r in t) if (t[r]) {
            const i = t[r].typeString, s = "value" in t[r] ? {
                value: t[r].value
            } : void 0;
            if (!(r in e)) {
                n = `JSON missing required field: '${r}'`;
                break;
            }
            // eslint-disable-next-line @typescript-eslint/no-explicit-any
                    const o = e[r];
            if (i && typeof o !== i) {
                n = `JSON field '${r}' must be a ${i}.`;
                break;
            }
            if (void 0 !== s && o !== s.value) {
                n = `Expected '${r}' field to equal '${s.value}'`;
                break;
            }
        }
        if (n) throw new FirestoreError(N.INVALID_ARGUMENT, n);
        return true;
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    // The earliest date supported by Firestore timestamps (0001-01-01T00:00:00Z).
    const Q = -62135596800, $ = 1e6;

    // Number of nanoseconds in a millisecond.
    /**
     * A `Timestamp` represents a point in time independent of any time zone or
     * calendar, represented as seconds and fractions of seconds at nanosecond
     * resolution in UTC Epoch time.
     *
     * It is encoded using the Proleptic Gregorian Calendar which extends the
     * Gregorian calendar backwards to year one. It is encoded assuming all minutes
     * are 60 seconds long, i.e. leap seconds are "smeared" so that no leap second
     * table is needed for interpretation. Range is from 0001-01-01T00:00:00Z to
     * 9999-12-31T23:59:59.999999999Z.
     *
     * For examples and further specifications, refer to the
     * {@link https://github.com/google/protobuf/blob/master/src/google/protobuf/timestamp.proto | Timestamp definition}.
     */
    class Timestamp {
        /**
         * Creates a new timestamp with the current date, with millisecond precision.
         *
         * @returns a new timestamp representing the current date.
         */
        static now() {
            return Timestamp.fromMillis(Date.now());
        }
        /**
         * Creates a new timestamp from the given date.
         *
         * @param date - The date to initialize the `Timestamp` from.
         * @returns A new `Timestamp` representing the same point in time as the given
         *     date.
         */    static fromDate(e) {
            return Timestamp.fromMillis(e.getTime());
        }
        /**
         * Creates a new timestamp from the given number of milliseconds.
         *
         * @param milliseconds - Number of milliseconds since Unix epoch
         *     1970-01-01T00:00:00Z.
         * @returns A new `Timestamp` representing the same point in time as the given
         *     number of milliseconds.
         */    static fromMillis(e) {
            const t = Math.floor(e / 1e3), n = Math.floor((e - 1e3 * t) * $);
            return new Timestamp(t, n);
        }
        /**
         * Creates a new timestamp.
         *
         * @param seconds - The number of seconds of UTC time since Unix epoch
         *     1970-01-01T00:00:00Z. Must be from 0001-01-01T00:00:00Z to
         *     9999-12-31T23:59:59Z inclusive.
         * @param nanoseconds - The non-negative fractions of a second at nanosecond
         *     resolution. Negative second values with fractions must still have
         *     non-negative nanoseconds values that count forward in time. Must be
         *     from 0 to 999,999,999 inclusive.
         */    constructor(
        /**
         * The number of seconds of UTC time since Unix epoch 1970-01-01T00:00:00Z.
         */
        e, 
        /**
         * The fractions of a second at nanosecond resolution.*
         */
        t) {
            if (this.seconds = e, this.nanoseconds = t, t < 0) throw new FirestoreError(N.INVALID_ARGUMENT, "Timestamp nanoseconds out of range: " + t);
            if (t >= 1e9) throw new FirestoreError(N.INVALID_ARGUMENT, "Timestamp nanoseconds out of range: " + t);
            if (e < Q) throw new FirestoreError(N.INVALID_ARGUMENT, "Timestamp seconds out of range: " + e);
            // This will break in the year 10,000.
                    if (e >= 253402300800) throw new FirestoreError(N.INVALID_ARGUMENT, "Timestamp seconds out of range: " + e);
        }
        /**
         * Converts a `Timestamp` to a JavaScript `Date` object. This conversion
         * causes a loss of precision since `Date` objects only support millisecond
         * precision.
         *
         * @returns JavaScript `Date` object representing the same point in time as
         *     this `Timestamp`, with millisecond precision.
         */    toDate() {
            return new Date(this.toMillis());
        }
        /**
         * Converts a `Timestamp` to a numeric timestamp (in milliseconds since
         * epoch). This operation causes a loss of precision.
         *
         * @returns The point in time corresponding to this timestamp, represented as
         *     the number of milliseconds since Unix epoch 1970-01-01T00:00:00Z.
         */    toMillis() {
            return 1e3 * this.seconds + this.nanoseconds / $;
        }
        _compareTo(e) {
            return this.seconds === e.seconds ? __PRIVATE_primitiveComparator(this.nanoseconds, e.nanoseconds) : __PRIVATE_primitiveComparator(this.seconds, e.seconds);
        }
        /**
         * Returns true if this `Timestamp` is equal to the provided one.
         *
         * @param other - The `Timestamp` to compare against.
         * @returns true if this `Timestamp` is equal to the provided one.
         */    isEqual(e) {
            return e.seconds === this.seconds && e.nanoseconds === this.nanoseconds;
        }
        /** Returns a textual representation of this `Timestamp`. */    toString() {
            return "Timestamp(seconds=" + this.seconds + ", nanoseconds=" + this.nanoseconds + ")";
        }
        /**
         * Returns a JSON-serializable representation of this `Timestamp`.
         */    toJSON() {
            return {
                type: Timestamp._jsonSchemaVersion,
                seconds: this.seconds,
                nanoseconds: this.nanoseconds
            };
        }
        /**
         * Builds a `Timestamp` instance from a JSON object created by {@link Timestamp.toJSON}.
         */    static fromJSON(e) {
            if (__PRIVATE_validateJSON(e, Timestamp._jsonSchema)) return new Timestamp(e.seconds, e.nanoseconds);
        }
        /**
         * Converts this object to a primitive string, which allows `Timestamp` objects
         * to be compared using the `>`, `<=`, `>=` and `>` operators.
         */    valueOf() {
            // This method returns a string of the form <seconds>.<nanoseconds> where
            // <seconds> is translated to have a non-negative value and both <seconds>
            // and <nanoseconds> are left-padded with zeroes to be a consistent length.
            // Strings with this format then have a lexicographical ordering that matches
            // the expected ordering. The <seconds> translation is done to avoid having
            // a leading negative sign (i.e. a leading '-' character) in its string
            // representation, which would affect its lexicographical ordering.
            const e = this.seconds - Q;
            // Note: Up to 12 decimal digits are required to represent all valid
            // 'seconds' values.
                    return String(e).padStart(12, "0") + "." + String(this.nanoseconds).padStart(9, "0");
        }
    }

    Timestamp._jsonSchemaVersion = "firestore/timestamp/1.0", Timestamp._jsonSchema = {
        type: property("string", Timestamp._jsonSchemaVersion),
        seconds: property("number"),
        nanoseconds: property("number")
    };

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * A version of a document in Firestore. This corresponds to the version
     * timestamp, such as update_time or read_time.
     */
    class SnapshotVersion {
        static fromTimestamp(e) {
            return new SnapshotVersion(e);
        }
        static min() {
            return new SnapshotVersion(new Timestamp(0, 0));
        }
        static max() {
            return new SnapshotVersion(new Timestamp(253402300799, 999999999));
        }
        constructor(e) {
            this.timestamp = e;
        }
        compareTo(e) {
            return this.timestamp._compareTo(e.timestamp);
        }
        isEqual(e) {
            return this.timestamp.isEqual(e.timestamp);
        }
        /** Returns a number representation of the version for use in spec tests. */    toMicroseconds() {
            // Convert to microseconds.
            return 1e6 * this.timestamp.seconds + this.timestamp.nanoseconds / 1e3;
        }
        toString() {
            return "SnapshotVersion(" + this.timestamp.toString() + ")";
        }
        toTimestamp() {
            return this.timestamp;
        }
    }

    /**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * The initial mutation batch id for each index. Gets updated during index
     * backfill.
     */ const U = -1;

    /**
     * Creates an offset that matches all documents with a read time higher than
     * `readTime`.
     */ function __PRIVATE_newIndexOffsetSuccessorFromReadTime(e, t) {
        // We want to create an offset that matches all documents with a read time
        // greater than the provided read time. To do so, we technically need to
        // create an offset for `(readTime, MAX_DOCUMENT_KEY)`. While we could use
        // Unicode codepoints to generate MAX_DOCUMENT_KEY, it is much easier to use
        // `(readTime + 1, DocumentKey.empty())` since `> DocumentKey.empty()` matches
        // all valid document IDs.
        const n = e.toTimestamp().seconds, r = e.toTimestamp().nanoseconds + 1, i = SnapshotVersion.fromTimestamp(1e9 === r ? new Timestamp(n + 1, 0) : new Timestamp(n, r));
        return new IndexOffset(i, DocumentKey.empty(), t);
    }

    /** Creates a new offset based on the provided document. */ function __PRIVATE_newIndexOffsetFromDocument(e) {
        return new IndexOffset(e.readTime, e.key, U);
    }

    /**
     * Stores the latest read time, document and batch ID that were processed for an
     * index.
     */ class IndexOffset {
        constructor(
        /**
         * The latest read time version that has been indexed by Firestore for this
         * field index.
         */
        e, 
        /**
         * The key of the last document that was indexed for this query. Use
         * `DocumentKey.empty()` if no document has been indexed.
         */
        t, 
        /*
         * The largest mutation batch id that's been processed by Firestore.
         */
        n) {
            this.readTime = e, this.documentKey = t, this.largestBatchId = n;
        }
        /** Returns an offset that sorts before all regular offsets. */    static min() {
            return new IndexOffset(SnapshotVersion.min(), DocumentKey.empty(), U);
        }
        /** Returns an offset that sorts after all regular offsets. */    static max() {
            return new IndexOffset(SnapshotVersion.max(), DocumentKey.empty(), U);
        }
    }

    function __PRIVATE_indexOffsetComparator(e, t) {
        let n = e.readTime.compareTo(t.readTime);
        return 0 !== n ? n : (n = DocumentKey.comparator(e.documentKey, t.documentKey), 
        0 !== n ? n : __PRIVATE_primitiveComparator(e.largestBatchId, t.largestBatchId));
    }

    /**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */ const K = "The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";

    /**
     * A base class representing a persistence transaction, encapsulating both the
     * transaction's sequence numbers as well as a list of onCommitted listeners.
     *
     * When you call Persistence.runTransaction(), it will create a transaction and
     * pass it to your callback. You then pass it to any method that operates
     * on persistence.
     */ class PersistenceTransaction {
        constructor() {
            this.onCommittedListeners = [];
        }
        addOnCommittedListener(e) {
            this.onCommittedListeners.push(e);
        }
        raiseOnCommittedEvent() {
            this.onCommittedListeners.forEach((e => e()));
        }
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * Verifies the error thrown by a LocalStore operation. If a LocalStore
     * operation fails because the primary lease has been taken by another client,
     * we ignore the error (the persistence layer will immediately call
     * `applyPrimaryLease` to propagate the primary state change). All other errors
     * are re-thrown.
     *
     * @param err - An error returned by a LocalStore operation.
     * @returns A Promise that resolves after we recovered, or the original error.
     */ async function __PRIVATE_ignoreIfPrimaryLeaseLoss(e) {
        if (e.code !== N.FAILED_PRECONDITION || e.message !== K) throw e;
        __PRIVATE_logDebug("LocalStore", "Unexpectedly lost primary lease");
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * PersistencePromise is essentially a re-implementation of Promise except
     * it has a .next() method instead of .then() and .next() and .catch() callbacks
     * are executed synchronously when a PersistencePromise resolves rather than
     * asynchronously (Promise implementations use setImmediate() or similar).
     *
     * This is necessary to interoperate with IndexedDB which will automatically
     * commit transactions if control is returned to the event loop without
     * synchronously initiating another operation on the transaction.
     *
     * NOTE: .then() and .catch() only allow a single consumer, unlike normal
     * Promises.
     */ class PersistencePromise {
        constructor(e) {
            // NOTE: next/catchCallback will always point to our own wrapper functions,
            // not the user's raw next() or catch() callbacks.
            this.nextCallback = null, this.catchCallback = null, 
            // When the operation resolves, we'll set result or error and mark isDone.
            this.result = void 0, this.error = void 0, this.isDone = false, 
            // Set to true when .then() or .catch() are called and prevents additional
            // chaining.
            this.callbackAttached = false, e((e => {
                this.isDone = true, this.result = e, this.nextCallback && 
                // value should be defined unless T is Void, but we can't express
                // that in the type system.
                this.nextCallback(e);
            }), (e => {
                this.isDone = true, this.error = e, this.catchCallback && this.catchCallback(e);
            }));
        }
        catch(e) {
            return this.next(void 0, e);
        }
        next(e, t) {
            return this.callbackAttached && fail(59440), this.callbackAttached = true, this.isDone ? this.error ? this.wrapFailure(t, this.error) : this.wrapSuccess(e, this.result) : new PersistencePromise(((n, r) => {
                this.nextCallback = t => {
                    this.wrapSuccess(e, t).next(n, r);
                }, this.catchCallback = e => {
                    this.wrapFailure(t, e).next(n, r);
                };
            }));
        }
        toPromise() {
            return new Promise(((e, t) => {
                this.next(e, t);
            }));
        }
        wrapUserFunction(e) {
            try {
                const t = e();
                return t instanceof PersistencePromise ? t : PersistencePromise.resolve(t);
            } catch (e) {
                return PersistencePromise.reject(e);
            }
        }
        wrapSuccess(e, t) {
            return e ? this.wrapUserFunction((() => e(t))) : PersistencePromise.resolve(t);
        }
        wrapFailure(e, t) {
            return e ? this.wrapUserFunction((() => e(t))) : PersistencePromise.reject(t);
        }
        static resolve(e) {
            return new PersistencePromise(((t, n) => {
                t(e);
            }));
        }
        static reject(e) {
            return new PersistencePromise(((t, n) => {
                n(e);
            }));
        }
        static waitFor(
        // Accept all Promise types in waitFor().
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
        e) {
            return new PersistencePromise(((t, n) => {
                let r = 0, i = 0, s = false;
                e.forEach((e => {
                    ++r, e.next((() => {
                        ++i, s && i === r && t();
                    }), (e => n(e)));
                })), s = true, i === r && t();
            }));
        }
        /**
         * Given an array of predicate functions that asynchronously evaluate to a
         * boolean, implements a short-circuiting `or` between the results. Predicates
         * will be evaluated until one of them returns `true`, then stop. The final
         * result will be whether any of them returned `true`.
         */    static or(e) {
            let t = PersistencePromise.resolve(false);
            for (const n of e) t = t.next((e => e ? PersistencePromise.resolve(e) : n()));
            return t;
        }
        static forEach(e, t) {
            const n = [];
            return e.forEach(((e, r) => {
                n.push(t.call(this, e, r));
            })), this.waitFor(n);
        }
        /**
         * Concurrently map all array elements through asynchronous function.
         */    static mapArray(e, t) {
            return new PersistencePromise(((n, r) => {
                const i = e.length, s = new Array(i);
                let o = 0;
                for (let _ = 0; _ < i; _++) {
                    const a = _;
                    t(e[a]).next((e => {
                        s[a] = e, ++o, o === i && n(s);
                    }), (e => r(e)));
                }
            }));
        }
        /**
         * An alternative to recursive PersistencePromise calls, that avoids
         * potential memory problems from unbounded chains of promises.
         *
         * The `action` will be called repeatedly while `condition` is true.
         */    static doWhile(e, t) {
            return new PersistencePromise(((n, r) => {
                const process = () => {
                    true === e() ? t().next((() => {
                        process();
                    }), r) : n();
                };
                process();
            }));
        }
    }

    /** Parse User Agent to determine Android version. Returns -1 if not found. */ function __PRIVATE_getAndroidVersion(e) {
        const t = e.match(/Android ([\d.]+)/i), n = t ? t[1].split(".").slice(0, 2).join(".") : "-1";
        return Number(n);
    }

    /** Verifies whether `e` is an IndexedDbTransactionError. */ function __PRIVATE_isIndexedDbTransactionError(e) {
        // Use name equality, as instanceof checks on errors don't work with errors
        // that wrap other errors.
        return "IndexedDbTransactionError" === e.name;
    }

    /**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * `ListenSequence` is a monotonic sequence. It is initialized with a minimum value to
     * exceed. All subsequent calls to next will return increasing values. If provided with a
     * `SequenceNumberSyncer`, it will additionally bump its next value when told of a new value, as
     * well as write out sequence numbers that it produces via `next()`.
     */ class __PRIVATE_ListenSequence {
        constructor(e, t) {
            this.previousValue = e, t && (t.sequenceNumberHandler = e => this.ae(e), this.ue = e => t.writeSequenceNumber(e));
        }
        ae(e) {
            return this.previousValue = Math.max(e, this.previousValue), this.previousValue;
        }
        next() {
            const e = ++this.previousValue;
            return this.ue && this.ue(e), e;
        }
    }

    __PRIVATE_ListenSequence.ce = -1;

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /** Sentinel value that sorts before any Mutation Batch ID. */
    const j = -1;

    /**
     * Returns whether a variable is either undefined or null.
     */ function __PRIVATE_isNullOrUndefined(e) {
        return null == e;
    }

    /** Returns whether the value represents -0. */ function __PRIVATE_isNegativeZero(e) {
        // Detect if the value is -0.0. Based on polyfill from
        // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is
        return 0 === e && 1 / e == -1 / 0;
    }

    /**
     * Returns whether a value is an integer and in the safe integer range
     * @param value - The value to test for being an integer and in the safe range
     */ function isSafeInteger(e) {
        return "number" == typeof e && Number.isInteger(e) && !__PRIVATE_isNegativeZero(e) && e <= Number.MAX_SAFE_INTEGER && e >= Number.MIN_SAFE_INTEGER;
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */ const J = "";

    /**
     * Encodes a resource path into a IndexedDb-compatible string form.
     */
    function __PRIVATE_encodeResourcePath(e) {
        let t = "";
        for (let n = 0; n < e.length; n++) t.length > 0 && (t = __PRIVATE_encodeSeparator(t)), 
        t = __PRIVATE_encodeSegment(e.get(n), t);
        return __PRIVATE_encodeSeparator(t);
    }

    /** Encodes a single segment of a resource path into the given result */ function __PRIVATE_encodeSegment(e, t) {
        let n = t;
        const r = e.length;
        for (let t = 0; t < r; t++) {
            const r = e.charAt(t);
            switch (r) {
              case "\0":
                n += "";
                break;

              case J:
                n += "";
                break;

              default:
                n += r;
            }
        }
        return n;
    }

    /** Encodes a path separator into the given result */ function __PRIVATE_encodeSeparator(e) {
        return e + J + "";
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */ function __PRIVATE_objectSize(e) {
        let t = 0;
        for (const n in e) Object.prototype.hasOwnProperty.call(e, n) && t++;
        return t;
    }

    function forEach(e, t) {
        for (const n in e) Object.prototype.hasOwnProperty.call(e, n) && t(n, e[n]);
    }

    function isEmpty(e) {
        for (const t in e) if (Object.prototype.hasOwnProperty.call(e, t)) return false;
        return true;
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    // An immutable sorted map implementation, based on a Left-leaning Red-Black
    // tree.
    class SortedMap {
        constructor(e, t) {
            this.comparator = e, this.root = t || LLRBNode.EMPTY;
        }
        // Returns a copy of the map, with the specified key/value added or replaced.
        insert(e, t) {
            return new SortedMap(this.comparator, this.root.insert(e, t, this.comparator).copy(null, null, LLRBNode.BLACK, null, null));
        }
        // Returns a copy of the map, with the specified key removed.
        remove(e) {
            return new SortedMap(this.comparator, this.root.remove(e, this.comparator).copy(null, null, LLRBNode.BLACK, null, null));
        }
        // Returns the value of the node with the given key, or null.
        get(e) {
            let t = this.root;
            for (;!t.isEmpty(); ) {
                const n = this.comparator(e, t.key);
                if (0 === n) return t.value;
                n < 0 ? t = t.left : n > 0 && (t = t.right);
            }
            return null;
        }
        // Returns the index of the element in this sorted map, or -1 if it doesn't
        // exist.
        indexOf(e) {
            // Number of nodes that were pruned when descending right
            let t = 0, n = this.root;
            for (;!n.isEmpty(); ) {
                const r = this.comparator(e, n.key);
                if (0 === r) return t + n.left.size;
                r < 0 ? n = n.left : (
                // Count all nodes left of the node plus the node itself
                t += n.left.size + 1, n = n.right);
            }
            // Node not found
                    return -1;
        }
        isEmpty() {
            return this.root.isEmpty();
        }
        // Returns the total number of nodes in the map.
        get size() {
            return this.root.size;
        }
        // Returns the minimum key in the map.
        minKey() {
            return this.root.minKey();
        }
        // Returns the maximum key in the map.
        maxKey() {
            return this.root.maxKey();
        }
        // Traverses the map in key order and calls the specified action function
        // for each key/value pair. If action returns true, traversal is aborted.
        // Returns the first truthy value returned by action, or the last falsey
        // value returned by action.
        inorderTraversal(e) {
            return this.root.inorderTraversal(e);
        }
        forEach(e) {
            this.inorderTraversal(((t, n) => (e(t, n), false)));
        }
        toString() {
            const e = [];
            return this.inorderTraversal(((t, n) => (e.push(`${t}:${n}`), false))), `{${e.join(", ")}}`;
        }
        // Traverses the map in reverse key order and calls the specified action
        // function for each key/value pair. If action returns true, traversal is
        // aborted.
        // Returns the first truthy value returned by action, or the last falsey
        // value returned by action.
        reverseTraversal(e) {
            return this.root.reverseTraversal(e);
        }
        // Returns an iterator over the SortedMap.
        getIterator() {
            return new SortedMapIterator(this.root, null, this.comparator, false);
        }
        getIteratorFrom(e) {
            return new SortedMapIterator(this.root, e, this.comparator, false);
        }
        getReverseIterator() {
            return new SortedMapIterator(this.root, null, this.comparator, true);
        }
        getReverseIteratorFrom(e) {
            return new SortedMapIterator(this.root, e, this.comparator, true);
        }
    }

     // end SortedMap
    // An iterator over an LLRBNode.
    class SortedMapIterator {
        constructor(e, t, n, r) {
            this.isReverse = r, this.nodeStack = [];
            let i = 1;
            for (;!e.isEmpty(); ) if (i = t ? n(e.key, t) : 1, 
            // flip the comparison if we're going in reverse
            t && r && (i *= -1), i < 0) 
            // This node is less than our start key. ignore it
            e = this.isReverse ? e.left : e.right; else {
                if (0 === i) {
                    // This node is exactly equal to our start key. Push it on the stack,
                    // but stop iterating;
                    this.nodeStack.push(e);
                    break;
                }
                // This node is greater than our start key, add it to the stack and move
                // to the next one
                this.nodeStack.push(e), e = this.isReverse ? e.right : e.left;
            }
        }
        getNext() {
            let e = this.nodeStack.pop();
            const t = {
                key: e.key,
                value: e.value
            };
            if (this.isReverse) for (e = e.left; !e.isEmpty(); ) this.nodeStack.push(e), e = e.right; else for (e = e.right; !e.isEmpty(); ) this.nodeStack.push(e), 
            e = e.left;
            return t;
        }
        hasNext() {
            return this.nodeStack.length > 0;
        }
        peek() {
            if (0 === this.nodeStack.length) return null;
            const e = this.nodeStack[this.nodeStack.length - 1];
            return {
                key: e.key,
                value: e.value
            };
        }
    }

     // end SortedMapIterator
    // Represents a node in a Left-leaning Red-Black tree.
    class LLRBNode {
        constructor(e, t, n, r, i) {
            this.key = e, this.value = t, this.color = null != n ? n : LLRBNode.RED, this.left = null != r ? r : LLRBNode.EMPTY, 
            this.right = null != i ? i : LLRBNode.EMPTY, this.size = this.left.size + 1 + this.right.size;
        }
        // Returns a copy of the current node, optionally replacing pieces of it.
        copy(e, t, n, r, i) {
            return new LLRBNode(null != e ? e : this.key, null != t ? t : this.value, null != n ? n : this.color, null != r ? r : this.left, null != i ? i : this.right);
        }
        isEmpty() {
            return false;
        }
        // Traverses the tree in key order and calls the specified action function
        // for each node. If action returns true, traversal is aborted.
        // Returns the first truthy value returned by action, or the last falsey
        // value returned by action.
        inorderTraversal(e) {
            return this.left.inorderTraversal(e) || e(this.key, this.value) || this.right.inorderTraversal(e);
        }
        // Traverses the tree in reverse key order and calls the specified action
        // function for each node. If action returns true, traversal is aborted.
        // Returns the first truthy value returned by action, or the last falsey
        // value returned by action.
        reverseTraversal(e) {
            return this.right.reverseTraversal(e) || e(this.key, this.value) || this.left.reverseTraversal(e);
        }
        // Returns the minimum node in the tree.
        min() {
            return this.left.isEmpty() ? this : this.left.min();
        }
        // Returns the maximum key in the tree.
        minKey() {
            return this.min().key;
        }
        // Returns the maximum key in the tree.
        maxKey() {
            return this.right.isEmpty() ? this.key : this.right.maxKey();
        }
        // Returns new tree, with the key/value added.
        insert(e, t, n) {
            let r = this;
            const i = n(e, r.key);
            return r = i < 0 ? r.copy(null, null, null, r.left.insert(e, t, n), null) : 0 === i ? r.copy(null, t, null, null, null) : r.copy(null, null, null, null, r.right.insert(e, t, n)), 
            r.fixUp();
        }
        removeMin() {
            if (this.left.isEmpty()) return LLRBNode.EMPTY;
            let e = this;
            return e.left.isRed() || e.left.left.isRed() || (e = e.moveRedLeft()), e = e.copy(null, null, null, e.left.removeMin(), null), 
            e.fixUp();
        }
        // Returns new tree, with the specified item removed.
        remove(e, t) {
            let n, r = this;
            if (t(e, r.key) < 0) r.left.isEmpty() || r.left.isRed() || r.left.left.isRed() || (r = r.moveRedLeft()), 
            r = r.copy(null, null, null, r.left.remove(e, t), null); else {
                if (r.left.isRed() && (r = r.rotateRight()), r.right.isEmpty() || r.right.isRed() || r.right.left.isRed() || (r = r.moveRedRight()), 
                0 === t(e, r.key)) {
                    if (r.right.isEmpty()) return LLRBNode.EMPTY;
                    n = r.right.min(), r = r.copy(n.key, n.value, null, null, r.right.removeMin());
                }
                r = r.copy(null, null, null, null, r.right.remove(e, t));
            }
            return r.fixUp();
        }
        isRed() {
            return this.color;
        }
        // Returns new tree after performing any needed rotations.
        fixUp() {
            let e = this;
            return e.right.isRed() && !e.left.isRed() && (e = e.rotateLeft()), e.left.isRed() && e.left.left.isRed() && (e = e.rotateRight()), 
            e.left.isRed() && e.right.isRed() && (e = e.colorFlip()), e;
        }
        moveRedLeft() {
            let e = this.colorFlip();
            return e.right.left.isRed() && (e = e.copy(null, null, null, null, e.right.rotateRight()), 
            e = e.rotateLeft(), e = e.colorFlip()), e;
        }
        moveRedRight() {
            let e = this.colorFlip();
            return e.left.left.isRed() && (e = e.rotateRight(), e = e.colorFlip()), e;
        }
        rotateLeft() {
            const e = this.copy(null, null, LLRBNode.RED, null, this.right.left);
            return this.right.copy(null, null, this.color, e, null);
        }
        rotateRight() {
            const e = this.copy(null, null, LLRBNode.RED, this.left.right, null);
            return this.left.copy(null, null, this.color, null, e);
        }
        colorFlip() {
            const e = this.left.copy(null, null, !this.left.color, null, null), t = this.right.copy(null, null, !this.right.color, null, null);
            return this.copy(null, null, !this.color, e, t);
        }
        // For testing.
        checkMaxDepth() {
            const e = this.check();
            return Math.pow(2, e) <= this.size + 1;
        }
        // In a balanced RB tree, the black-depth (number of black nodes) from root to
        // leaves is equal on both sides.  This function verifies that or asserts.
        check() {
            if (this.isRed() && this.left.isRed()) throw fail(43730, {
                key: this.key,
                value: this.value
            });
            if (this.right.isRed()) throw fail(14113, {
                key: this.key,
                value: this.value
            });
            const e = this.left.check();
            if (e !== this.right.check()) throw fail(27949);
            return e + (this.isRed() ? 0 : 1);
        }
    }

     // end LLRBNode
    // Empty node is shared between all LLRB trees.
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    LLRBNode.EMPTY = null, LLRBNode.RED = true, LLRBNode.BLACK = false;

    // end LLRBEmptyNode
    LLRBNode.EMPTY = new 
    // Represents an empty node (a leaf node in the Red-Black Tree).
    class LLRBEmptyNode {
        constructor() {
            this.size = 0;
        }
        get key() {
            throw fail(57766);
        }
        get value() {
            throw fail(16141);
        }
        get color() {
            throw fail(16727);
        }
        get left() {
            throw fail(29726);
        }
        get right() {
            throw fail(36894);
        }
        // Returns a copy of the current node.
        copy(e, t, n, r, i) {
            return this;
        }
        // Returns a copy of the tree, with the specified key/value added.
        insert(e, t, n) {
            return new LLRBNode(e, t);
        }
        // Returns a copy of the tree, with the specified key removed.
        remove(e, t) {
            return this;
        }
        isEmpty() {
            return true;
        }
        inorderTraversal(e) {
            return false;
        }
        reverseTraversal(e) {
            return false;
        }
        minKey() {
            return null;
        }
        maxKey() {
            return null;
        }
        isRed() {
            return false;
        }
        // For testing.
        checkMaxDepth() {
            return true;
        }
        check() {
            return 0;
        }
    };

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * SortedSet is an immutable (copy-on-write) collection that holds elements
     * in order specified by the provided comparator.
     *
     * NOTE: if provided comparator returns 0 for two elements, we consider them to
     * be equal!
     */
    class SortedSet {
        constructor(e) {
            this.comparator = e, this.data = new SortedMap(this.comparator);
        }
        has(e) {
            return null !== this.data.get(e);
        }
        first() {
            return this.data.minKey();
        }
        last() {
            return this.data.maxKey();
        }
        get size() {
            return this.data.size;
        }
        indexOf(e) {
            return this.data.indexOf(e);
        }
        /** Iterates elements in order defined by "comparator" */    forEach(e) {
            this.data.inorderTraversal(((t, n) => (e(t), false)));
        }
        /** Iterates over `elem`s such that: range[0] &lt;= elem &lt; range[1]. */    forEachInRange(e, t) {
            const n = this.data.getIteratorFrom(e[0]);
            for (;n.hasNext(); ) {
                const r = n.getNext();
                if (this.comparator(r.key, e[1]) >= 0) return;
                t(r.key);
            }
        }
        /**
         * Iterates over `elem`s such that: start &lt;= elem until false is returned.
         */    forEachWhile(e, t) {
            let n;
            for (n = void 0 !== t ? this.data.getIteratorFrom(t) : this.data.getIterator(); n.hasNext(); ) {
                if (!e(n.getNext().key)) return;
            }
        }
        /** Finds the least element greater than or equal to `elem`. */    firstAfterOrEqual(e) {
            const t = this.data.getIteratorFrom(e);
            return t.hasNext() ? t.getNext().key : null;
        }
        getIterator() {
            return new SortedSetIterator(this.data.getIterator());
        }
        getIteratorFrom(e) {
            return new SortedSetIterator(this.data.getIteratorFrom(e));
        }
        /** Inserts or updates an element */    add(e) {
            return this.copy(this.data.remove(e).insert(e, true));
        }
        /** Deletes an element */    delete(e) {
            return this.has(e) ? this.copy(this.data.remove(e)) : this;
        }
        isEmpty() {
            return this.data.isEmpty();
        }
        unionWith(e) {
            let t = this;
            // Make sure `result` always refers to the larger one of the two sets.
                    return t.size < e.size && (t = e, e = this), e.forEach((e => {
                t = t.add(e);
            })), t;
        }
        isEqual(e) {
            if (!(e instanceof SortedSet)) return false;
            if (this.size !== e.size) return false;
            const t = this.data.getIterator(), n = e.data.getIterator();
            for (;t.hasNext(); ) {
                const e = t.getNext().key, r = n.getNext().key;
                if (0 !== this.comparator(e, r)) return false;
            }
            return true;
        }
        toArray() {
            const e = [];
            return this.forEach((t => {
                e.push(t);
            })), e;
        }
        toString() {
            const e = [];
            return this.forEach((t => e.push(t))), "SortedSet(" + e.toString() + ")";
        }
        copy(e) {
            const t = new SortedSet(this.comparator);
            return t.data = e, t;
        }
    }

    class SortedSetIterator {
        constructor(e) {
            this.iter = e;
        }
        getNext() {
            return this.iter.getNext().key;
        }
        hasNext() {
            return this.iter.hasNext();
        }
    }

    /**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * Provides a set of fields that can be used to partially patch a document.
     * FieldMask is used in conjunction with ObjectValue.
     * Examples:
     *   foo - Overwrites foo entirely with the provided value. If foo is not
     *         present in the companion ObjectValue, the field is deleted.
     *   foo.bar - Overwrites only the field bar of the object foo.
     *             If foo is not an object, foo is replaced with an object
     *             containing foo
     */ class FieldMask {
        constructor(e) {
            this.fields = e, 
            // TODO(dimond): validation of FieldMask
            // Sort the field mask to support `FieldMask.isEqual()` and assert below.
            e.sort(FieldPath$1.comparator);
        }
        static empty() {
            return new FieldMask([]);
        }
        /**
         * Returns a new FieldMask object that is the result of adding all the given
         * fields paths to this field mask.
         */    unionWith(e) {
            let t = new SortedSet(FieldPath$1.comparator);
            for (const e of this.fields) t = t.add(e);
            for (const n of e) t = t.add(n);
            return new FieldMask(t.toArray());
        }
        /**
         * Verifies that `fieldPath` is included by at least one field in this field
         * mask.
         *
         * This is an O(n) operation, where `n` is the size of the field mask.
         */    covers(e) {
            for (const t of this.fields) if (t.isPrefixOf(e)) return true;
            return false;
        }
        isEqual(e) {
            return __PRIVATE_arrayEquals(this.fields, e.fields, ((e, t) => e.isEqual(t)));
        }
    }

    /**
     * @license
     * Copyright 2023 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * An error encountered while decoding base64 string.
     */ class __PRIVATE_Base64DecodeError extends Error {
        constructor() {
            super(...arguments), this.name = "Base64DecodeError";
        }
    }

    /**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * Immutable class that represents a "proto" byte string.
     *
     * Proto byte strings can either be Base64-encoded strings or Uint8Arrays when
     * sent on the wire. This class abstracts away this differentiation by holding
     * the proto byte string in a common class that must be converted into a string
     * before being sent as a proto.
     * @internal
     */ class ByteString {
        constructor(e) {
            this.binaryString = e;
        }
        static fromBase64String(e) {
            const t = function __PRIVATE_decodeBase64(e) {
                try {
                    return atob(e);
                } catch (e) {
                    // Check that `DOMException` is defined before using it to avoid
                    // "ReferenceError: Property 'DOMException' doesn't exist" in react-native.
                    // (https://github.com/firebase/firebase-js-sdk/issues/7115)
                    throw "undefined" != typeof DOMException && e instanceof DOMException ? new __PRIVATE_Base64DecodeError("Invalid base64 string: " + e) : e;
                }
            }
            /** Converts a binary string to a Base64 encoded string. */ (e);
            return new ByteString(t);
        }
        static fromUint8Array(e) {
            // TODO(indexing); Remove the copy of the byte string here as this method
            // is frequently called during indexing.
            const t = 
            /**
     * Helper function to convert an Uint8array to a binary string.
     */
            function __PRIVATE_binaryStringFromUint8Array(e) {
                let t = "";
                for (let n = 0; n < e.length; ++n) t += String.fromCharCode(e[n]);
                return t;
            }
            /**
     * Helper function to convert a binary string to an Uint8Array.
     */ (e);
            return new ByteString(t);
        }
        [Symbol.iterator]() {
            let e = 0;
            return {
                next: () => e < this.binaryString.length ? {
                    value: this.binaryString.charCodeAt(e++),
                    done: false
                } : {
                    value: void 0,
                    done: true
                }
            };
        }
        toBase64() {
            return function __PRIVATE_encodeBase64(e) {
                return btoa(e);
            }(this.binaryString);
        }
        toUint8Array() {
            return function __PRIVATE_uint8ArrayFromBinaryString(e) {
                const t = new Uint8Array(e.length);
                for (let n = 0; n < e.length; n++) t[n] = e.charCodeAt(n);
                return t;
            }
            /**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
            // A RegExp matching ISO 8601 UTC timestamps with optional fraction.
            (this.binaryString);
        }
        approximateByteSize() {
            return 2 * this.binaryString.length;
        }
        compareTo(e) {
            return __PRIVATE_primitiveComparator(this.binaryString, e.binaryString);
        }
        isEqual(e) {
            return this.binaryString === e.binaryString;
        }
    }

    ByteString.EMPTY_BYTE_STRING = new ByteString("");

    const ot = new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);

    /**
     * Converts the possible Proto values for a timestamp value into a "seconds and
     * nanos" representation.
     */ function __PRIVATE_normalizeTimestamp(e) {
        // The json interface (for the browser) will return an iso timestamp string,
        // while the proto js library (for node) will return a
        // google.protobuf.Timestamp instance.
        if (__PRIVATE_hardAssert(!!e, 39018), "string" == typeof e) {
            // The date string can have higher precision (nanos) than the Date class
            // (millis), so we do some custom parsing here.
            // Parse the nanos right out of the string.
            let t = 0;
            const n = ot.exec(e);
            if (__PRIVATE_hardAssert(!!n, 46558, {
                timestamp: e
            }), n[1]) {
                // Pad the fraction out to 9 digits (nanos).
                let e = n[1];
                e = (e + "000000000").substr(0, 9), t = Number(e);
            }
            // Parse the date to get the seconds.
                    const r = new Date(e);
            return {
                seconds: Math.floor(r.getTime() / 1e3),
                nanos: t
            };
        }
        return {
            seconds: __PRIVATE_normalizeNumber(e.seconds),
            nanos: __PRIVATE_normalizeNumber(e.nanos)
        };
    }

    /**
     * Converts the possible Proto types for numbers into a JavaScript number.
     * Returns 0 if the value is not numeric.
     */ function __PRIVATE_normalizeNumber(e) {
        // TODO(bjornick): Handle int64 greater than 53 bits.
        return "number" == typeof e ? e : "string" == typeof e ? Number(e) : 0;
    }

    /** Converts the possible Proto types for Blobs into a ByteString. */ function __PRIVATE_normalizeByteString(e) {
        return "string" == typeof e ? ByteString.fromBase64String(e) : ByteString.fromUint8Array(e);
    }

    /**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * Represents a locally-applied ServerTimestamp.
     *
     * Server Timestamps are backed by MapValues that contain an internal field
     * `__type__` with a value of `server_timestamp`. The previous value and local
     * write time are stored in its `__previous_value__` and `__local_write_time__`
     * fields respectively.
     *
     * Notes:
     * - ServerTimestampValue instances are created as the result of applying a
     *   transform. They can only exist in the local view of a document. Therefore
     *   they do not need to be parsed or serialized.
     * - When evaluated locally (e.g. for snapshot.data()), they by default
     *   evaluate to `null`. This behavior can be configured by passing custom
     *   FieldValueOptions to value().
     * - With respect to other ServerTimestampValues, they sort by their
     *   localWriteTime.
     */ const _t = "server_timestamp", at = "__type__", ut = "__previous_value__", ct = "__local_write_time__";

    function __PRIVATE_isServerTimestamp(e) {
        const t = (e?.mapValue?.fields || {})[at]?.stringValue;
        return t === _t;
    }

    /**
     * Creates a new ServerTimestamp proto value (using the internal format).
     */
    /**
     * Returns the value of the field before this ServerTimestamp was set.
     *
     * Preserving the previous values allows the user to display the last resoled
     * value until the backend responds with the timestamp.
     */
    function __PRIVATE_getPreviousValue(e) {
        const t = e.mapValue.fields[ut];
        return __PRIVATE_isServerTimestamp(t) ? __PRIVATE_getPreviousValue(t) : t;
    }

    /**
     * Returns the local time at which this timestamp was first set.
     */ function __PRIVATE_getLocalWriteTime(e) {
        const t = __PRIVATE_normalizeTimestamp(e.mapValue.fields[ct].timestampValue);
        return new Timestamp(t.seconds, t.nanos);
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */ class DatabaseInfo {
        /**
         * Constructs a DatabaseInfo using the provided host, databaseId and
         * persistenceKey.
         *
         * @param databaseId - The database to use.
         * @param appId - The Firebase App Id.
         * @param persistenceKey - A unique identifier for this Firestore's local
         * storage (used in conjunction with the databaseId).
         * @param host - The Firestore backend host to connect to.
         * @param ssl - Whether to use SSL when connecting.
         * @param forceLongPolling - Whether to use the forceLongPolling option
         * when using WebChannel as the network transport.
         * @param autoDetectLongPolling - Whether to use the detectBufferingProxy
         * option when using WebChannel as the network transport.
         * @param longPollingOptions Options that configure long-polling.
         * @param useFetchStreams Whether to use the Fetch API instead of
         * XMLHTTPRequest
         */
        constructor(e, t, n, r, i, s, o, _, a, u) {
            this.databaseId = e, this.appId = t, this.persistenceKey = n, this.host = r, this.ssl = i, 
            this.forceLongPolling = s, this.autoDetectLongPolling = o, this.longPollingOptions = _, 
            this.useFetchStreams = a, this.isUsingEmulator = u;
        }
    }

    /** The default database name for a project. */ const lt = "(default)";

    /**
     * Represents the database ID a Firestore client is associated with.
     * @internal
     */ class DatabaseId {
        constructor(e, t) {
            this.projectId = e, this.database = t || lt;
        }
        static empty() {
            return new DatabaseId("", "");
        }
        get isDefaultDatabase() {
            return this.database === lt;
        }
        isEqual(e) {
            return e instanceof DatabaseId && e.projectId === this.projectId && e.database === this.database;
        }
    }

    /**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    const ht = "__type__", Pt = "__max__", Tt = {
        mapValue: {
            }
    }, It = "__vector__", Et = "value";

    /** Extracts the backend's type order for the provided value. */
    function __PRIVATE_typeOrder(e) {
        return "nullValue" in e ? 0 /* TypeOrder.NullValue */ : "booleanValue" in e ? 1 /* TypeOrder.BooleanValue */ : "integerValue" in e || "doubleValue" in e ? 2 /* TypeOrder.NumberValue */ : "timestampValue" in e ? 3 /* TypeOrder.TimestampValue */ : "stringValue" in e ? 5 /* TypeOrder.StringValue */ : "bytesValue" in e ? 6 /* TypeOrder.BlobValue */ : "referenceValue" in e ? 7 /* TypeOrder.RefValue */ : "geoPointValue" in e ? 8 /* TypeOrder.GeoPointValue */ : "arrayValue" in e ? 9 /* TypeOrder.ArrayValue */ : "mapValue" in e ? __PRIVATE_isServerTimestamp(e) ? 4 /* TypeOrder.ServerTimestampValue */ : __PRIVATE_isMaxValue(e) ? 9007199254740991 /* TypeOrder.MaxValue */ : __PRIVATE_isVectorValue(e) ? 10 /* TypeOrder.VectorValue */ : 11 /* TypeOrder.ObjectValue */ : fail(28295, {
            value: e
        });
    }

    /** Tests `left` and `right` for equality based on the backend semantics. */ function __PRIVATE_valueEquals(e, t) {
        if (e === t) return true;
        const n = __PRIVATE_typeOrder(e);
        if (n !== __PRIVATE_typeOrder(t)) return false;
        switch (n) {
          case 0 /* TypeOrder.NullValue */ :
          case 9007199254740991 /* TypeOrder.MaxValue */ :
            return true;

          case 1 /* TypeOrder.BooleanValue */ :
            return e.booleanValue === t.booleanValue;

          case 4 /* TypeOrder.ServerTimestampValue */ :
            return __PRIVATE_getLocalWriteTime(e).isEqual(__PRIVATE_getLocalWriteTime(t));

          case 3 /* TypeOrder.TimestampValue */ :
            return function __PRIVATE_timestampEquals(e, t) {
                if ("string" == typeof e.timestampValue && "string" == typeof t.timestampValue && e.timestampValue.length === t.timestampValue.length) 
                // Use string equality for ISO 8601 timestamps
                return e.timestampValue === t.timestampValue;
                const n = __PRIVATE_normalizeTimestamp(e.timestampValue), r = __PRIVATE_normalizeTimestamp(t.timestampValue);
                return n.seconds === r.seconds && n.nanos === r.nanos;
            }(e, t);

          case 5 /* TypeOrder.StringValue */ :
            return e.stringValue === t.stringValue;

          case 6 /* TypeOrder.BlobValue */ :
            return function __PRIVATE_blobEquals(e, t) {
                return __PRIVATE_normalizeByteString(e.bytesValue).isEqual(__PRIVATE_normalizeByteString(t.bytesValue));
            }(e, t);

          case 7 /* TypeOrder.RefValue */ :
            return e.referenceValue === t.referenceValue;

          case 8 /* TypeOrder.GeoPointValue */ :
            return function __PRIVATE_geoPointEquals(e, t) {
                return __PRIVATE_normalizeNumber(e.geoPointValue.latitude) === __PRIVATE_normalizeNumber(t.geoPointValue.latitude) && __PRIVATE_normalizeNumber(e.geoPointValue.longitude) === __PRIVATE_normalizeNumber(t.geoPointValue.longitude);
            }(e, t);

          case 2 /* TypeOrder.NumberValue */ :
            return function __PRIVATE_numberEquals(e, t) {
                if ("integerValue" in e && "integerValue" in t) return __PRIVATE_normalizeNumber(e.integerValue) === __PRIVATE_normalizeNumber(t.integerValue);
                if ("doubleValue" in e && "doubleValue" in t) {
                    const n = __PRIVATE_normalizeNumber(e.doubleValue), r = __PRIVATE_normalizeNumber(t.doubleValue);
                    return n === r ? __PRIVATE_isNegativeZero(n) === __PRIVATE_isNegativeZero(r) : isNaN(n) && isNaN(r);
                }
                return false;
            }(e, t);

          case 9 /* TypeOrder.ArrayValue */ :
            return __PRIVATE_arrayEquals(e.arrayValue.values || [], t.arrayValue.values || [], __PRIVATE_valueEquals);

          case 10 /* TypeOrder.VectorValue */ :
          case 11 /* TypeOrder.ObjectValue */ :
            return function __PRIVATE_objectEquals(e, t) {
                const n = e.mapValue.fields || {}, r = t.mapValue.fields || {};
                if (__PRIVATE_objectSize(n) !== __PRIVATE_objectSize(r)) return false;
                for (const e in n) if (n.hasOwnProperty(e) && (void 0 === r[e] || !__PRIVATE_valueEquals(n[e], r[e]))) return false;
                return true;
            }
            /** Returns true if the ArrayValue contains the specified element. */ (e, t);

          default:
            return fail(52216, {
                left: e
            });
        }
    }

    function __PRIVATE_arrayValueContains(e, t) {
        return void 0 !== (e.values || []).find((e => __PRIVATE_valueEquals(e, t)));
    }

    function __PRIVATE_valueCompare(e, t) {
        if (e === t) return 0;
        const n = __PRIVATE_typeOrder(e), r = __PRIVATE_typeOrder(t);
        if (n !== r) return __PRIVATE_primitiveComparator(n, r);
        switch (n) {
          case 0 /* TypeOrder.NullValue */ :
          case 9007199254740991 /* TypeOrder.MaxValue */ :
            return 0;

          case 1 /* TypeOrder.BooleanValue */ :
            return __PRIVATE_primitiveComparator(e.booleanValue, t.booleanValue);

          case 2 /* TypeOrder.NumberValue */ :
            return function __PRIVATE_compareNumbers(e, t) {
                const n = __PRIVATE_normalizeNumber(e.integerValue || e.doubleValue), r = __PRIVATE_normalizeNumber(t.integerValue || t.doubleValue);
                return n < r ? -1 : n > r ? 1 : n === r ? 0 : 
                // one or both are NaN.
                isNaN(n) ? isNaN(r) ? 0 : -1 : 1;
            }(e, t);

          case 3 /* TypeOrder.TimestampValue */ :
            return __PRIVATE_compareTimestamps(e.timestampValue, t.timestampValue);

          case 4 /* TypeOrder.ServerTimestampValue */ :
            return __PRIVATE_compareTimestamps(__PRIVATE_getLocalWriteTime(e), __PRIVATE_getLocalWriteTime(t));

          case 5 /* TypeOrder.StringValue */ :
            return __PRIVATE_compareUtf8Strings(e.stringValue, t.stringValue);

          case 6 /* TypeOrder.BlobValue */ :
            return function __PRIVATE_compareBlobs(e, t) {
                const n = __PRIVATE_normalizeByteString(e), r = __PRIVATE_normalizeByteString(t);
                return n.compareTo(r);
            }(e.bytesValue, t.bytesValue);

          case 7 /* TypeOrder.RefValue */ :
            return function __PRIVATE_compareReferences(e, t) {
                const n = e.split("/"), r = t.split("/");
                for (let e = 0; e < n.length && e < r.length; e++) {
                    const t = __PRIVATE_primitiveComparator(n[e], r[e]);
                    if (0 !== t) return t;
                }
                return __PRIVATE_primitiveComparator(n.length, r.length);
            }(e.referenceValue, t.referenceValue);

          case 8 /* TypeOrder.GeoPointValue */ :
            return function __PRIVATE_compareGeoPoints(e, t) {
                const n = __PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(e.latitude), __PRIVATE_normalizeNumber(t.latitude));
                if (0 !== n) return n;
                return __PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(e.longitude), __PRIVATE_normalizeNumber(t.longitude));
            }(e.geoPointValue, t.geoPointValue);

          case 9 /* TypeOrder.ArrayValue */ :
            return __PRIVATE_compareArrays(e.arrayValue, t.arrayValue);

          case 10 /* TypeOrder.VectorValue */ :
            return function __PRIVATE_compareVectors(e, t) {
                const n = e.fields || {}, r = t.fields || {}, i = n[Et]?.arrayValue, s = r[Et]?.arrayValue, o = __PRIVATE_primitiveComparator(i?.values?.length || 0, s?.values?.length || 0);
                if (0 !== o) return o;
                return __PRIVATE_compareArrays(i, s);
            }(e.mapValue, t.mapValue);

          case 11 /* TypeOrder.ObjectValue */ :
            return function __PRIVATE_compareMaps(e, t) {
                if (e === Tt.mapValue && t === Tt.mapValue) return 0;
                if (e === Tt.mapValue) return 1;
                if (t === Tt.mapValue) return -1;
                const n = e.fields || {}, r = Object.keys(n), i = t.fields || {}, s = Object.keys(i);
                // Even though MapValues are likely sorted correctly based on their insertion
                // order (e.g. when received from the backend), local modifications can bring
                // elements out of order. We need to re-sort the elements to ensure that
                // canonical IDs are independent of insertion order.
                r.sort(), s.sort();
                for (let e = 0; e < r.length && e < s.length; ++e) {
                    const t = __PRIVATE_compareUtf8Strings(r[e], s[e]);
                    if (0 !== t) return t;
                    const o = __PRIVATE_valueCompare(n[r[e]], i[s[e]]);
                    if (0 !== o) return o;
                }
                return __PRIVATE_primitiveComparator(r.length, s.length);
            }
            /**
     * Generates the canonical ID for the provided field value (as used in Target
     * serialization).
     */ (e.mapValue, t.mapValue);

          default:
            throw fail(23264, {
                he: n
            });
        }
    }

    function __PRIVATE_compareTimestamps(e, t) {
        if ("string" == typeof e && "string" == typeof t && e.length === t.length) return __PRIVATE_primitiveComparator(e, t);
        const n = __PRIVATE_normalizeTimestamp(e), r = __PRIVATE_normalizeTimestamp(t), i = __PRIVATE_primitiveComparator(n.seconds, r.seconds);
        return 0 !== i ? i : __PRIVATE_primitiveComparator(n.nanos, r.nanos);
    }

    function __PRIVATE_compareArrays(e, t) {
        const n = e.values || [], r = t.values || [];
        for (let e = 0; e < n.length && e < r.length; ++e) {
            const t = __PRIVATE_valueCompare(n[e], r[e]);
            if (t) return t;
        }
        return __PRIVATE_primitiveComparator(n.length, r.length);
    }

    function canonicalId(e) {
        return __PRIVATE_canonifyValue(e);
    }

    function __PRIVATE_canonifyValue(e) {
        return "nullValue" in e ? "null" : "booleanValue" in e ? "" + e.booleanValue : "integerValue" in e ? "" + e.integerValue : "doubleValue" in e ? "" + e.doubleValue : "timestampValue" in e ? function __PRIVATE_canonifyTimestamp(e) {
            const t = __PRIVATE_normalizeTimestamp(e);
            return `time(${t.seconds},${t.nanos})`;
        }(e.timestampValue) : "stringValue" in e ? e.stringValue : "bytesValue" in e ? function __PRIVATE_canonifyByteString(e) {
            return __PRIVATE_normalizeByteString(e).toBase64();
        }(e.bytesValue) : "referenceValue" in e ? function __PRIVATE_canonifyReference(e) {
            return DocumentKey.fromName(e).toString();
        }(e.referenceValue) : "geoPointValue" in e ? function __PRIVATE_canonifyGeoPoint(e) {
            return `geo(${e.latitude},${e.longitude})`;
        }(e.geoPointValue) : "arrayValue" in e ? function __PRIVATE_canonifyArray(e) {
            let t = "[", n = true;
            for (const r of e.values || []) n ? n = false : t += ",", t += __PRIVATE_canonifyValue(r);
            return t + "]";
        }
        /**
     * Returns an approximate (and wildly inaccurate) in-memory size for the field
     * value.
     *
     * The memory size takes into account only the actual user data as it resides
     * in memory and ignores object overhead.
     */ (e.arrayValue) : "mapValue" in e ? function __PRIVATE_canonifyMap(e) {
            // Iteration order in JavaScript is not guaranteed. To ensure that we generate
            // matching canonical IDs for identical maps, we need to sort the keys.
            const t = Object.keys(e.fields || {}).sort();
            let n = "{", r = true;
            for (const i of t) r ? r = false : n += ",", n += `${i}:${__PRIVATE_canonifyValue(e.fields[i])}`;
            return n + "}";
        }(e.mapValue) : fail(61005, {
            value: e
        });
    }

    function __PRIVATE_estimateByteSize(e) {
        switch (__PRIVATE_typeOrder(e)) {
          case 0 /* TypeOrder.NullValue */ :
          case 1 /* TypeOrder.BooleanValue */ :
            return 4;

          case 2 /* TypeOrder.NumberValue */ :
            return 8;

          case 3 /* TypeOrder.TimestampValue */ :
          case 8 /* TypeOrder.GeoPointValue */ :
            // GeoPoints are made up of two distinct numbers (latitude + longitude)
            return 16;

          case 4 /* TypeOrder.ServerTimestampValue */ :
            const t = __PRIVATE_getPreviousValue(e);
            return t ? 16 + __PRIVATE_estimateByteSize(t) : 16;

          case 5 /* TypeOrder.StringValue */ :
            // See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures:
            // "JavaScript's String type is [...] a set of elements of 16-bit unsigned
            // integer values"
            return 2 * e.stringValue.length;

          case 6 /* TypeOrder.BlobValue */ :
            return __PRIVATE_normalizeByteString(e.bytesValue).approximateByteSize();

          case 7 /* TypeOrder.RefValue */ :
            return e.referenceValue.length;

          case 9 /* TypeOrder.ArrayValue */ :
            return function __PRIVATE_estimateArrayByteSize(e) {
                return (e.values || []).reduce(((e, t) => e + __PRIVATE_estimateByteSize(t)), 0);
            }
            /** Returns a reference value for the provided database and key. */ (e.arrayValue);

          case 10 /* TypeOrder.VectorValue */ :
          case 11 /* TypeOrder.ObjectValue */ :
            return function __PRIVATE_estimateMapByteSize(e) {
                let t = 0;
                return forEach(e.fields, ((e, n) => {
                    t += e.length + __PRIVATE_estimateByteSize(n);
                })), t;
            }(e.mapValue);

          default:
            throw fail(13486, {
                value: e
            });
        }
    }

    function __PRIVATE_refValue(e, t) {
        return {
            referenceValue: `projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`
        };
    }

    /** Returns true if `value` is an IntegerValue . */ function isInteger(e) {
        return !!e && "integerValue" in e;
    }

    /** Returns true if `value` is a DoubleValue. */
    /** Returns true if `value` is an ArrayValue. */
    function isArray(e) {
        return !!e && "arrayValue" in e;
    }

    /** Returns true if `value` is a NullValue. */ function __PRIVATE_isNullValue(e) {
        return !!e && "nullValue" in e;
    }

    /** Returns true if `value` is NaN. */ function __PRIVATE_isNanValue(e) {
        return !!e && "doubleValue" in e && isNaN(Number(e.doubleValue));
    }

    /** Returns true if `value` is a MapValue. */ function __PRIVATE_isMapValue(e) {
        return !!e && "mapValue" in e;
    }

    /** Returns true if `value` is a VetorValue. */ function __PRIVATE_isVectorValue(e) {
        const t = (e?.mapValue?.fields || {})[ht]?.stringValue;
        return t === It;
    }

    /** Creates a deep copy of `source`. */ function __PRIVATE_deepClone(e) {
        if (e.geoPointValue) return {
            geoPointValue: {
                ...e.geoPointValue
            }
        };
        if (e.timestampValue && "object" == typeof e.timestampValue) return {
            timestampValue: {
                ...e.timestampValue
            }
        };
        if (e.mapValue) {
            const t = {
                mapValue: {
                    fields: {}
                }
            };
            return forEach(e.mapValue.fields, ((e, n) => t.mapValue.fields[e] = __PRIVATE_deepClone(n))), 
            t;
        }
        if (e.arrayValue) {
            const t = {
                arrayValue: {
                    values: []
                }
            };
            for (let n = 0; n < (e.arrayValue.values || []).length; ++n) t.arrayValue.values[n] = __PRIVATE_deepClone(e.arrayValue.values[n]);
            return t;
        }
        return {
            ...e
        };
    }

    /** Returns true if the Value represents the canonical {@link #MAX_VALUE} . */ function __PRIVATE_isMaxValue(e) {
        return (((e.mapValue || {}).fields || {}).__type__ || {}).stringValue === Pt;
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * An ObjectValue represents a MapValue in the Firestore Proto and offers the
     * ability to add and remove fields (via the ObjectValueBuilder).
     */ class ObjectValue {
        constructor(e) {
            this.value = e;
        }
        static empty() {
            return new ObjectValue({
                mapValue: {}
            });
        }
        /**
         * Returns the value at the given path or null.
         *
         * @param path - the path to search
         * @returns The value at the path or null if the path is not set.
         */    field(e) {
            if (e.isEmpty()) return this.value;
            {
                let t = this.value;
                for (let n = 0; n < e.length - 1; ++n) if (t = (t.mapValue.fields || {})[e.get(n)], 
                !__PRIVATE_isMapValue(t)) return null;
                return t = (t.mapValue.fields || {})[e.lastSegment()], t || null;
            }
        }
        /**
         * Sets the field to the provided value.
         *
         * @param path - The field path to set.
         * @param value - The value to set.
         */    set(e, t) {
            this.getFieldsMap(e.popLast())[e.lastSegment()] = __PRIVATE_deepClone(t);
        }
        /**
         * Sets the provided fields to the provided values.
         *
         * @param data - A map of fields to values (or null for deletes).
         */    setAll(e) {
            let t = FieldPath$1.emptyPath(), n = {}, r = [];
            e.forEach(((e, i) => {
                if (!t.isImmediateParentOf(i)) {
                    // Insert the accumulated changes at this parent location
                    const e = this.getFieldsMap(t);
                    this.applyChanges(e, n, r), n = {}, r = [], t = i.popLast();
                }
                e ? n[i.lastSegment()] = __PRIVATE_deepClone(e) : r.push(i.lastSegment());
            }));
            const i = this.getFieldsMap(t);
            this.applyChanges(i, n, r);
        }
        /**
         * Removes the field at the specified path. If there is no field at the
         * specified path, nothing is changed.
         *
         * @param path - The field path to remove.
         */    delete(e) {
            const t = this.field(e.popLast());
            __PRIVATE_isMapValue(t) && t.mapValue.fields && delete t.mapValue.fields[e.lastSegment()];
        }
        isEqual(e) {
            return __PRIVATE_valueEquals(this.value, e.value);
        }
        /**
         * Returns the map that contains the leaf element of `path`. If the parent
         * entry does not yet exist, or if it is not a map, a new map will be created.
         */    getFieldsMap(e) {
            let t = this.value;
            t.mapValue.fields || (t.mapValue = {
                fields: {}
            });
            for (let n = 0; n < e.length; ++n) {
                let r = t.mapValue.fields[e.get(n)];
                __PRIVATE_isMapValue(r) && r.mapValue.fields || (r = {
                    mapValue: {
                        fields: {}
                    }
                }, t.mapValue.fields[e.get(n)] = r), t = r;
            }
            return t.mapValue.fields;
        }
        /**
         * Modifies `fieldsMap` by adding, replacing or deleting the specified
         * entries.
         */    applyChanges(e, t, n) {
            forEach(t, ((t, n) => e[t] = n));
            for (const t of n) delete e[t];
        }
        clone() {
            return new ObjectValue(__PRIVATE_deepClone(this.value));
        }
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * Represents a document in Firestore with a key, version, data and whether it
     * has local mutations applied to it.
     *
     * Documents can transition between states via `convertToFoundDocument()`,
     * `convertToNoDocument()` and `convertToUnknownDocument()`. If a document does
     * not transition to one of these states even after all mutations have been
     * applied, `isValidDocument()` returns false and the document should be removed
     * from all views.
     */ class MutableDocument {
        constructor(e, t, n, r, i, s, o) {
            this.key = e, this.documentType = t, this.version = n, this.readTime = r, this.createTime = i, 
            this.data = s, this.documentState = o;
        }
        /**
         * Creates a document with no known version or data, but which can serve as
         * base document for mutations.
         */    static newInvalidDocument(e) {
            return new MutableDocument(e, 0 /* DocumentType.INVALID */ , 
            /* version */ SnapshotVersion.min(), 
            /* readTime */ SnapshotVersion.min(), 
            /* createTime */ SnapshotVersion.min(), ObjectValue.empty(), 0 /* DocumentState.SYNCED */);
        }
        /**
         * Creates a new document that is known to exist with the given data at the
         * given version.
         */    static newFoundDocument(e, t, n, r) {
            return new MutableDocument(e, 1 /* DocumentType.FOUND_DOCUMENT */ , 
            /* version */ t, 
            /* readTime */ SnapshotVersion.min(), 
            /* createTime */ n, r, 0 /* DocumentState.SYNCED */);
        }
        /** Creates a new document that is known to not exist at the given version. */    static newNoDocument(e, t) {
            return new MutableDocument(e, 2 /* DocumentType.NO_DOCUMENT */ , 
            /* version */ t, 
            /* readTime */ SnapshotVersion.min(), 
            /* createTime */ SnapshotVersion.min(), ObjectValue.empty(), 0 /* DocumentState.SYNCED */);
        }
        /**
         * Creates a new document that is known to exist at the given version but
         * whose data is not known (e.g. a document that was updated without a known
         * base document).
         */    static newUnknownDocument(e, t) {
            return new MutableDocument(e, 3 /* DocumentType.UNKNOWN_DOCUMENT */ , 
            /* version */ t, 
            /* readTime */ SnapshotVersion.min(), 
            /* createTime */ SnapshotVersion.min(), ObjectValue.empty(), 2 /* DocumentState.HAS_COMMITTED_MUTATIONS */);
        }
        /**
         * Changes the document type to indicate that it exists and that its version
         * and data are known.
         */    convertToFoundDocument(e, t) {
            // If a document is switching state from being an invalid or deleted
            // document to a valid (FOUND_DOCUMENT) document, either due to receiving an
            // update from Watch or due to applying a local set mutation on top
            // of a deleted document, our best guess about its createTime would be the
            // version at which the document transitioned to a FOUND_DOCUMENT.
            return !this.createTime.isEqual(SnapshotVersion.min()) || 2 /* DocumentType.NO_DOCUMENT */ !== this.documentType && 0 /* DocumentType.INVALID */ !== this.documentType || (this.createTime = e), 
            this.version = e, this.documentType = 1 /* DocumentType.FOUND_DOCUMENT */ , this.data = t, 
            this.documentState = 0 /* DocumentState.SYNCED */ , this;
        }
        /**
         * Changes the document type to indicate that it doesn't exist at the given
         * version.
         */    convertToNoDocument(e) {
            return this.version = e, this.documentType = 2 /* DocumentType.NO_DOCUMENT */ , 
            this.data = ObjectValue.empty(), this.documentState = 0 /* DocumentState.SYNCED */ , 
            this;
        }
        /**
         * Changes the document type to indicate that it exists at a given version but
         * that its data is not known (e.g. a document that was updated without a known
         * base document).
         */    convertToUnknownDocument(e) {
            return this.version = e, this.documentType = 3 /* DocumentType.UNKNOWN_DOCUMENT */ , 
            this.data = ObjectValue.empty(), this.documentState = 2 /* DocumentState.HAS_COMMITTED_MUTATIONS */ , 
            this;
        }
        setHasCommittedMutations() {
            return this.documentState = 2 /* DocumentState.HAS_COMMITTED_MUTATIONS */ , this;
        }
        setHasLocalMutations() {
            return this.documentState = 1 /* DocumentState.HAS_LOCAL_MUTATIONS */ , this.version = SnapshotVersion.min(), 
            this;
        }
        setReadTime(e) {
            return this.readTime = e, this;
        }
        get hasLocalMutations() {
            return 1 /* DocumentState.HAS_LOCAL_MUTATIONS */ === this.documentState;
        }
        get hasCommittedMutations() {
            return 2 /* DocumentState.HAS_COMMITTED_MUTATIONS */ === this.documentState;
        }
        get hasPendingWrites() {
            return this.hasLocalMutations || this.hasCommittedMutations;
        }
        isValidDocument() {
            return 0 /* DocumentType.INVALID */ !== this.documentType;
        }
        isFoundDocument() {
            return 1 /* DocumentType.FOUND_DOCUMENT */ === this.documentType;
        }
        isNoDocument() {
            return 2 /* DocumentType.NO_DOCUMENT */ === this.documentType;
        }
        isUnknownDocument() {
            return 3 /* DocumentType.UNKNOWN_DOCUMENT */ === this.documentType;
        }
        isEqual(e) {
            return e instanceof MutableDocument && this.key.isEqual(e.key) && this.version.isEqual(e.version) && this.documentType === e.documentType && this.documentState === e.documentState && this.data.isEqual(e.data);
        }
        mutableCopy() {
            return new MutableDocument(this.key, this.documentType, this.version, this.readTime, this.createTime, this.data.clone(), this.documentState);
        }
        toString() {
            return `Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`;
        }
    }

    /**
     * Compares the value for field `field` in the provided documents. Throws if
     * the field does not exist in both documents.
     */
    /**
     * @license
     * Copyright 2022 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * Represents a bound of a query.
     *
     * The bound is specified with the given components representing a position and
     * whether it's just before or just after the position (relative to whatever the
     * query order is).
     *
     * The position represents a logical index position for a query. It's a prefix
     * of values for the (potentially implicit) order by clauses of a query.
     *
     * Bound provides a function to determine whether a document comes before or
     * after a bound. This is influenced by whether the position is just before or
     * just after the provided values.
     */
    class Bound {
        constructor(e, t) {
            this.position = e, this.inclusive = t;
        }
    }

    function __PRIVATE_boundCompareToDocument(e, t, n) {
        let r = 0;
        for (let i = 0; i < e.position.length; i++) {
            const s = t[i], o = e.position[i];
            if (s.field.isKeyField()) r = DocumentKey.comparator(DocumentKey.fromName(o.referenceValue), n.key); else {
                r = __PRIVATE_valueCompare(o, n.data.field(s.field));
            }
            if ("desc" /* Direction.DESCENDING */ === s.dir && (r *= -1), 0 !== r) break;
        }
        return r;
    }

    /**
     * Returns true if a document sorts after a bound using the provided sort
     * order.
     */ function __PRIVATE_boundEquals(e, t) {
        if (null === e) return null === t;
        if (null === t) return false;
        if (e.inclusive !== t.inclusive || e.position.length !== t.position.length) return false;
        for (let n = 0; n < e.position.length; n++) {
            if (!__PRIVATE_valueEquals(e.position[n], t.position[n])) return false;
        }
        return true;
    }

    /**
     * @license
     * Copyright 2022 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * An ordering on a field, in some Direction. Direction defaults to ASCENDING.
     */ class OrderBy {
        constructor(e, t = "asc" /* Direction.ASCENDING */) {
            this.field = e, this.dir = t;
        }
    }

    function __PRIVATE_orderByEquals(e, t) {
        return e.dir === t.dir && e.field.isEqual(t.field);
    }

    /**
     * @license
     * Copyright 2022 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */ class Filter {}

    class FieldFilter extends Filter {
        constructor(e, t, n) {
            super(), this.field = e, this.op = t, this.value = n;
        }
        /**
         * Creates a filter based on the provided arguments.
         */    static create(e, t, n) {
            return e.isKeyField() ? "in" /* Operator.IN */ === t || "not-in" /* Operator.NOT_IN */ === t ? this.createKeyFieldInFilter(e, t, n) : new __PRIVATE_KeyFieldFilter(e, t, n) : "array-contains" /* Operator.ARRAY_CONTAINS */ === t ? new __PRIVATE_ArrayContainsFilter(e, n) : "in" /* Operator.IN */ === t ? new __PRIVATE_InFilter(e, n) : "not-in" /* Operator.NOT_IN */ === t ? new __PRIVATE_NotInFilter(e, n) : "array-contains-any" /* Operator.ARRAY_CONTAINS_ANY */ === t ? new __PRIVATE_ArrayContainsAnyFilter(e, n) : new FieldFilter(e, t, n);
        }
        static createKeyFieldInFilter(e, t, n) {
            return "in" /* Operator.IN */ === t ? new __PRIVATE_KeyFieldInFilter(e, n) : new __PRIVATE_KeyFieldNotInFilter(e, n);
        }
        matches(e) {
            const t = e.data.field(this.field);
            // Types do not have to match in NOT_EQUAL filters.
                    return "!=" /* Operator.NOT_EQUAL */ === this.op ? null !== t && void 0 === t.nullValue && this.matchesComparison(__PRIVATE_valueCompare(t, this.value)) : null !== t && __PRIVATE_typeOrder(this.value) === __PRIVATE_typeOrder(t) && this.matchesComparison(__PRIVATE_valueCompare(t, this.value));
            // Only compare types with matching backend order (such as double and int).
            }
        matchesComparison(e) {
            switch (this.op) {
              case "<" /* Operator.LESS_THAN */ :
                return e < 0;

              case "<=" /* Operator.LESS_THAN_OR_EQUAL */ :
                return e <= 0;

              case "==" /* Operator.EQUAL */ :
                return 0 === e;

              case "!=" /* Operator.NOT_EQUAL */ :
                return 0 !== e;

              case ">" /* Operator.GREATER_THAN */ :
                return e > 0;

              case ">=" /* Operator.GREATER_THAN_OR_EQUAL */ :
                return e >= 0;

              default:
                return fail(47266, {
                    operator: this.op
                });
            }
        }
        isInequality() {
            return [ "<" /* Operator.LESS_THAN */ , "<=" /* Operator.LESS_THAN_OR_EQUAL */ , ">" /* Operator.GREATER_THAN */ , ">=" /* Operator.GREATER_THAN_OR_EQUAL */ , "!=" /* Operator.NOT_EQUAL */ , "not-in" /* Operator.NOT_IN */ ].indexOf(this.op) >= 0;
        }
        getFlattenedFilters() {
            return [ this ];
        }
        getFilters() {
            return [ this ];
        }
    }

    class CompositeFilter extends Filter {
        constructor(e, t) {
            super(), this.filters = e, this.op = t, this.Pe = null;
        }
        /**
         * Creates a filter based on the provided arguments.
         */    static create(e, t) {
            return new CompositeFilter(e, t);
        }
        matches(e) {
            return __PRIVATE_compositeFilterIsConjunction(this) ? void 0 === this.filters.find((t => !t.matches(e))) : void 0 !== this.filters.find((t => t.matches(e)));
        }
        getFlattenedFilters() {
            return null !== this.Pe || (this.Pe = this.filters.reduce(((e, t) => e.concat(t.getFlattenedFilters())), [])), 
            this.Pe;
        }
        // Returns a mutable copy of `this.filters`
        getFilters() {
            return Object.assign([], this.filters);
        }
    }

    function __PRIVATE_compositeFilterIsConjunction(e) {
        return "and" /* CompositeOperator.AND */ === e.op;
    }

    /**
     * Returns true if this filter is a conjunction of field filters only. Returns false otherwise.
     */ function __PRIVATE_compositeFilterIsFlatConjunction(e) {
        return __PRIVATE_compositeFilterIsFlat(e) && __PRIVATE_compositeFilterIsConjunction(e);
    }

    /**
     * Returns true if this filter does not contain any composite filters. Returns false otherwise.
     */ function __PRIVATE_compositeFilterIsFlat(e) {
        for (const t of e.filters) if (t instanceof CompositeFilter) return false;
        return true;
    }

    function __PRIVATE_canonifyFilter(e) {
        if (e instanceof FieldFilter) 
        // TODO(b/29183165): Technically, this won't be unique if two values have
        // the same description, such as the int 3 and the string "3". So we should
        // add the types in here somehow, too.
        return e.field.canonicalString() + e.op.toString() + canonicalId(e.value);
        if (__PRIVATE_compositeFilterIsFlatConjunction(e)) 
        // Older SDK versions use an implicit AND operation between their filters.
        // In the new SDK versions, the developer may use an explicit AND filter.
        // To stay consistent with the old usages, we add a special case to ensure
        // the canonical ID for these two are the same. For example:
        // `col.whereEquals("a", 1).whereEquals("b", 2)` should have the same
        // canonical ID as `col.where(and(equals("a",1), equals("b",2)))`.
        return e.filters.map((e => __PRIVATE_canonifyFilter(e))).join(",");
        {
            // filter instanceof CompositeFilter
            const t = e.filters.map((e => __PRIVATE_canonifyFilter(e))).join(",");
            return `${e.op}(${t})`;
        }
    }

    function __PRIVATE_filterEquals(e, t) {
        return e instanceof FieldFilter ? function __PRIVATE_fieldFilterEquals(e, t) {
            return t instanceof FieldFilter && e.op === t.op && e.field.isEqual(t.field) && __PRIVATE_valueEquals(e.value, t.value);
        }(e, t) : e instanceof CompositeFilter ? function __PRIVATE_compositeFilterEquals(e, t) {
            if (t instanceof CompositeFilter && e.op === t.op && e.filters.length === t.filters.length) {
                return e.filters.reduce(((e, n, r) => e && __PRIVATE_filterEquals(n, t.filters[r])), true);
            }
            return false;
        }
        /**
     * Returns a new composite filter that contains all filter from
     * `compositeFilter` plus all the given filters in `otherFilters`.
     */ (e, t) : void fail(19439);
    }

    /** Returns a debug description for `filter`. */ function __PRIVATE_stringifyFilter(e) {
        return e instanceof FieldFilter ? function __PRIVATE_stringifyFieldFilter(e) {
            return `${e.field.canonicalString()} ${e.op} ${canonicalId(e.value)}`;
        }
        /** Filter that matches on key fields (i.e. '__name__'). */ (e) : e instanceof CompositeFilter ? function __PRIVATE_stringifyCompositeFilter(e) {
            return e.op.toString() + " {" + e.getFilters().map(__PRIVATE_stringifyFilter).join(" ,") + "}";
        }(e) : "Filter";
    }

    class __PRIVATE_KeyFieldFilter extends FieldFilter {
        constructor(e, t, n) {
            super(e, t, n), this.key = DocumentKey.fromName(n.referenceValue);
        }
        matches(e) {
            const t = DocumentKey.comparator(e.key, this.key);
            return this.matchesComparison(t);
        }
    }

    /** Filter that matches on key fields within an array. */ class __PRIVATE_KeyFieldInFilter extends FieldFilter {
        constructor(e, t) {
            super(e, "in" /* Operator.IN */ , t), this.keys = __PRIVATE_extractDocumentKeysFromArrayValue("in" /* Operator.IN */ , t);
        }
        matches(e) {
            return this.keys.some((t => t.isEqual(e.key)));
        }
    }

    /** Filter that matches on key fields not present within an array. */ class __PRIVATE_KeyFieldNotInFilter extends FieldFilter {
        constructor(e, t) {
            super(e, "not-in" /* Operator.NOT_IN */ , t), this.keys = __PRIVATE_extractDocumentKeysFromArrayValue("not-in" /* Operator.NOT_IN */ , t);
        }
        matches(e) {
            return !this.keys.some((t => t.isEqual(e.key)));
        }
    }

    function __PRIVATE_extractDocumentKeysFromArrayValue(e, t) {
        return (t.arrayValue?.values || []).map((e => DocumentKey.fromName(e.referenceValue)));
    }

    /** A Filter that implements the array-contains operator. */ class __PRIVATE_ArrayContainsFilter extends FieldFilter {
        constructor(e, t) {
            super(e, "array-contains" /* Operator.ARRAY_CONTAINS */ , t);
        }
        matches(e) {
            const t = e.data.field(this.field);
            return isArray(t) && __PRIVATE_arrayValueContains(t.arrayValue, this.value);
        }
    }

    /** A Filter that implements the IN operator. */ class __PRIVATE_InFilter extends FieldFilter {
        constructor(e, t) {
            super(e, "in" /* Operator.IN */ , t);
        }
        matches(e) {
            const t = e.data.field(this.field);
            return null !== t && __PRIVATE_arrayValueContains(this.value.arrayValue, t);
        }
    }

    /** A Filter that implements the not-in operator. */ class __PRIVATE_NotInFilter extends FieldFilter {
        constructor(e, t) {
            super(e, "not-in" /* Operator.NOT_IN */ , t);
        }
        matches(e) {
            if (__PRIVATE_arrayValueContains(this.value.arrayValue, {
                nullValue: "NULL_VALUE"
            })) return false;
            const t = e.data.field(this.field);
            return null !== t && void 0 === t.nullValue && !__PRIVATE_arrayValueContains(this.value.arrayValue, t);
        }
    }

    /** A Filter that implements the array-contains-any operator. */ class __PRIVATE_ArrayContainsAnyFilter extends FieldFilter {
        constructor(e, t) {
            super(e, "array-contains-any" /* Operator.ARRAY_CONTAINS_ANY */ , t);
        }
        matches(e) {
            const t = e.data.field(this.field);
            return !(!isArray(t) || !t.arrayValue.values) && t.arrayValue.values.some((e => __PRIVATE_arrayValueContains(this.value.arrayValue, e)));
        }
    }

    /**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    // Visible for testing
    class __PRIVATE_TargetImpl {
        constructor(e, t = null, n = [], r = [], i = null, s = null, o = null) {
            this.path = e, this.collectionGroup = t, this.orderBy = n, this.filters = r, this.limit = i, 
            this.startAt = s, this.endAt = o, this.Te = null;
        }
    }

    /**
     * Initializes a Target with a path and optional additional query constraints.
     * Path must currently be empty if this is a collection group query.
     *
     * NOTE: you should always construct `Target` from `Query.toTarget` instead of
     * using this factory method, because `Query` provides an implicit `orderBy`
     * property.
     */ function __PRIVATE_newTarget(e, t = null, n = [], r = [], i = null, s = null, o = null) {
        return new __PRIVATE_TargetImpl(e, t, n, r, i, s, o);
    }

    function __PRIVATE_canonifyTarget(e) {
        const t = __PRIVATE_debugCast(e);
        if (null === t.Te) {
            let e = t.path.canonicalString();
            null !== t.collectionGroup && (e += "|cg:" + t.collectionGroup), e += "|f:", e += t.filters.map((e => __PRIVATE_canonifyFilter(e))).join(","), 
            e += "|ob:", e += t.orderBy.map((e => function __PRIVATE_canonifyOrderBy(e) {
                // TODO(b/29183165): Make this collision robust.
                return e.field.canonicalString() + e.dir;
            }(e))).join(","), __PRIVATE_isNullOrUndefined(t.limit) || (e += "|l:", e += t.limit), 
            t.startAt && (e += "|lb:", e += t.startAt.inclusive ? "b:" : "a:", e += t.startAt.position.map((e => canonicalId(e))).join(",")), 
            t.endAt && (e += "|ub:", e += t.endAt.inclusive ? "a:" : "b:", e += t.endAt.position.map((e => canonicalId(e))).join(",")), 
            t.Te = e;
        }
        return t.Te;
    }

    function __PRIVATE_targetEquals(e, t) {
        if (e.limit !== t.limit) return false;
        if (e.orderBy.length !== t.orderBy.length) return false;
        for (let n = 0; n < e.orderBy.length; n++) if (!__PRIVATE_orderByEquals(e.orderBy[n], t.orderBy[n])) return false;
        if (e.filters.length !== t.filters.length) return false;
        for (let n = 0; n < e.filters.length; n++) if (!__PRIVATE_filterEquals(e.filters[n], t.filters[n])) return false;
        return e.collectionGroup === t.collectionGroup && (!!e.path.isEqual(t.path) && (!!__PRIVATE_boundEquals(e.startAt, t.startAt) && __PRIVATE_boundEquals(e.endAt, t.endAt)));
    }

    function __PRIVATE_targetIsDocumentTarget(e) {
        return DocumentKey.isDocumentKey(e.path) && null === e.collectionGroup && 0 === e.filters.length;
    }

    /** Returns the number of segments of a perfect index for this target. */
    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * Query encapsulates all the query attributes we support in the SDK. It can
     * be run against the LocalStore, as well as be converted to a `Target` to
     * query the RemoteStore results.
     *
     * Visible for testing.
     */
    class __PRIVATE_QueryImpl {
        /**
         * Initializes a Query with a path and optional additional query constraints.
         * Path must currently be empty if this is a collection group query.
         */
        constructor(e, t = null, n = [], r = [], i = null, s = "F" /* LimitType.First */ , o = null, _ = null) {
            this.path = e, this.collectionGroup = t, this.explicitOrderBy = n, this.filters = r, 
            this.limit = i, this.limitType = s, this.startAt = o, this.endAt = _, this.Ie = null, 
            // The corresponding `Target` of this `Query` instance, for use with
            // non-aggregate queries.
            this.Ee = null, 
            // The corresponding `Target` of this `Query` instance, for use with
            // aggregate queries. Unlike targets for non-aggregate queries,
            // aggregate query targets do not contain normalized order-bys, they only
            // contain explicit order-bys.
            this.de = null, this.startAt, this.endAt;
        }
    }

    /** Creates a new Query instance with the options provided. */ function __PRIVATE_newQuery(e, t, n, r, i, s, o, _) {
        return new __PRIVATE_QueryImpl(e, t, n, r, i, s, o, _);
    }

    /** Creates a new Query for a query that matches all documents at `path` */ function __PRIVATE_newQueryForPath(e) {
        return new __PRIVATE_QueryImpl(e);
    }

    /**
     * Helper to convert a collection group query into a collection query at a
     * specific path. This is used when executing collection group queries, since
     * we have to split the query into a set of collection queries at multiple
     * paths.
     */
    /**
     * Returns true if this query does not specify any query constraints that
     * could remove results.
     */
    function __PRIVATE_queryMatchesAllDocuments(e) {
        return 0 === e.filters.length && null === e.limit && null == e.startAt && null == e.endAt && (0 === e.explicitOrderBy.length || 1 === e.explicitOrderBy.length && e.explicitOrderBy[0].field.isKeyField());
    }

    // Returns the sorted set of inequality filter fields used in this query.
    /**
     * Returns whether the query matches a collection group rather than a specific
     * collection.
     */
    function __PRIVATE_isCollectionGroupQuery(e) {
        return null !== e.collectionGroup;
    }

    /**
     * Returns the normalized order-by constraint that is used to execute the Query,
     * which can be different from the order-by constraints the user provided (e.g.
     * the SDK and backend always orders by `__name__`). The normalized order-by
     * includes implicit order-bys in addition to the explicit user provided
     * order-bys.
     */ function __PRIVATE_queryNormalizedOrderBy(e) {
        const t = __PRIVATE_debugCast(e);
        if (null === t.Ie) {
            t.Ie = [];
            const e = new Set;
            // Any explicit order by fields should be added as is.
                    for (const n of t.explicitOrderBy) t.Ie.push(n), e.add(n.field.canonicalString());
            // The order of the implicit ordering always matches the last explicit order by.
                    const n = t.explicitOrderBy.length > 0 ? t.explicitOrderBy[t.explicitOrderBy.length - 1].dir : "asc" /* Direction.ASCENDING */ , r = function __PRIVATE_getInequalityFilterFields(e) {
                let t = new SortedSet(FieldPath$1.comparator);
                return e.filters.forEach((e => {
                    e.getFlattenedFilters().forEach((e => {
                        e.isInequality() && (t = t.add(e.field));
                    }));
                })), t;
            }
            /**
     * Creates a new Query for a collection group query that matches all documents
     * within the provided collection group.
     */ (t);
            // Any inequality fields not explicitly ordered should be implicitly ordered in a lexicographical
            // order. When there are multiple inequality filters on the same field, the field should be added
            // only once.
            // Note: `SortedSet<FieldPath>` sorts the key field before other fields. However, we want the key
            // field to be sorted last.
                    r.forEach((r => {
                e.has(r.canonicalString()) || r.isKeyField() || t.Ie.push(new OrderBy(r, n));
            })), 
            // Add the document key field to the last if it is not explicitly ordered.
            e.has(FieldPath$1.keyField().canonicalString()) || t.Ie.push(new OrderBy(FieldPath$1.keyField(), n));
        }
        return t.Ie;
    }

    /**
     * Converts this `Query` instance to its corresponding `Target` representation.
     */ function __PRIVATE_queryToTarget(e) {
        const t = __PRIVATE_debugCast(e);
        return t.Ee || (t.Ee = __PRIVATE__queryToTarget(t, __PRIVATE_queryNormalizedOrderBy(e))), 
        t.Ee;
    }

    function __PRIVATE__queryToTarget(e, t) {
        if ("F" /* LimitType.First */ === e.limitType) return __PRIVATE_newTarget(e.path, e.collectionGroup, t, e.filters, e.limit, e.startAt, e.endAt);
        {
            // Flip the orderBy directions since we want the last results
            t = t.map((e => {
                const t = "desc" /* Direction.DESCENDING */ === e.dir ? "asc" /* Direction.ASCENDING */ : "desc" /* Direction.DESCENDING */;
                return new OrderBy(e.field, t);
            }));
            // We need to swap the cursors to match the now-flipped query ordering.
            const n = e.endAt ? new Bound(e.endAt.position, e.endAt.inclusive) : null, r = e.startAt ? new Bound(e.startAt.position, e.startAt.inclusive) : null;
            // Now return as a LimitType.First query.
            return __PRIVATE_newTarget(e.path, e.collectionGroup, t, e.filters, e.limit, n, r);
        }
    }

    function __PRIVATE_queryWithAddedFilter(e, t) {
        const n = e.filters.concat([ t ]);
        return new __PRIVATE_QueryImpl(e.path, e.collectionGroup, e.explicitOrderBy.slice(), n, e.limit, e.limitType, e.startAt, e.endAt);
    }

    function __PRIVATE_queryWithLimit(e, t, n) {
        return new __PRIVATE_QueryImpl(e.path, e.collectionGroup, e.explicitOrderBy.slice(), e.filters.slice(), t, n, e.startAt, e.endAt);
    }

    function __PRIVATE_queryEquals(e, t) {
        return __PRIVATE_targetEquals(__PRIVATE_queryToTarget(e), __PRIVATE_queryToTarget(t)) && e.limitType === t.limitType;
    }

    // TODO(b/29183165): This is used to get a unique string from a query to, for
    // example, use as a dictionary key, but the implementation is subject to
    // collisions. Make it collision-free.
    function __PRIVATE_canonifyQuery(e) {
        return `${__PRIVATE_canonifyTarget(__PRIVATE_queryToTarget(e))}|lt:${e.limitType}`;
    }

    function __PRIVATE_stringifyQuery(e) {
        return `Query(target=${function __PRIVATE_stringifyTarget(e) {
        let t = e.path.canonicalString();
        return null !== e.collectionGroup && (t += " collectionGroup=" + e.collectionGroup), 
        e.filters.length > 0 && (t += `, filters: [${e.filters.map((e => __PRIVATE_stringifyFilter(e))).join(", ")}]`), 
        __PRIVATE_isNullOrUndefined(e.limit) || (t += ", limit: " + e.limit), e.orderBy.length > 0 && (t += `, orderBy: [${e.orderBy.map((e => function __PRIVATE_stringifyOrderBy(e) {
            return `${e.field.canonicalString()} (${e.dir})`;
        }(e))).join(", ")}]`), e.startAt && (t += ", startAt: ", t += e.startAt.inclusive ? "b:" : "a:", 
        t += e.startAt.position.map((e => canonicalId(e))).join(",")), e.endAt && (t += ", endAt: ", 
        t += e.endAt.inclusive ? "a:" : "b:", t += e.endAt.position.map((e => canonicalId(e))).join(",")), 
        `Target(${t})`;
    }(__PRIVATE_queryToTarget(e))}; limitType=${e.limitType})`;
    }

    /** Returns whether `doc` matches the constraints of `query`. */ function __PRIVATE_queryMatches(e, t) {
        return t.isFoundDocument() && function __PRIVATE_queryMatchesPathAndCollectionGroup(e, t) {
            const n = t.key.path;
            return null !== e.collectionGroup ? t.key.hasCollectionId(e.collectionGroup) && e.path.isPrefixOf(n) : DocumentKey.isDocumentKey(e.path) ? e.path.isEqual(n) : e.path.isImmediateParentOf(n);
        }
        /**
     * A document must have a value for every ordering clause in order to show up
     * in the results.
     */ (e, t) && function __PRIVATE_queryMatchesOrderBy(e, t) {
            // We must use `queryNormalizedOrderBy()` to get the list of all orderBys (both implicit and explicit).
            // Note that for OR queries, orderBy applies to all disjunction terms and implicit orderBys must
            // be taken into account. For example, the query "a > 1 || b==1" has an implicit "orderBy a" due
            // to the inequality, and is evaluated as "a > 1 orderBy a || b==1 orderBy a".
            // A document with content of {b:1} matches the filters, but does not match the orderBy because
            // it's missing the field 'a'.
            for (const n of __PRIVATE_queryNormalizedOrderBy(e)) 
            // order-by key always matches
            if (!n.field.isKeyField() && null === t.data.field(n.field)) return false;
            return true;
        }(e, t) && function __PRIVATE_queryMatchesFilters(e, t) {
            for (const n of e.filters) if (!n.matches(t)) return false;
            return true;
        }
        /** Makes sure a document is within the bounds, if provided. */ (e, t) && function __PRIVATE_queryMatchesBounds(e, t) {
            if (e.startAt && !
            /**
     * Returns true if a document sorts before a bound using the provided sort
     * order.
     */
            function __PRIVATE_boundSortsBeforeDocument(e, t, n) {
                const r = __PRIVATE_boundCompareToDocument(e, t, n);
                return e.inclusive ? r <= 0 : r < 0;
            }(e.startAt, __PRIVATE_queryNormalizedOrderBy(e), t)) return false;
            if (e.endAt && !function __PRIVATE_boundSortsAfterDocument(e, t, n) {
                const r = __PRIVATE_boundCompareToDocument(e, t, n);
                return e.inclusive ? r >= 0 : r > 0;
            }(e.endAt, __PRIVATE_queryNormalizedOrderBy(e), t)) return false;
            return true;
        }
        /**
     * Returns the collection group that this query targets.
     *
     * PORTING NOTE: This is only used in the Web SDK to facilitate multi-tab
     * synchronization for query results.
     */ (e, t);
    }

    function __PRIVATE_queryCollectionGroup(e) {
        return e.collectionGroup || (e.path.length % 2 == 1 ? e.path.lastSegment() : e.path.get(e.path.length - 2));
    }

    /**
     * Returns a new comparator function that can be used to compare two documents
     * based on the Query's ordering constraint.
     */ function __PRIVATE_newQueryComparator(e) {
        return (t, n) => {
            let r = false;
            for (const i of __PRIVATE_queryNormalizedOrderBy(e)) {
                const e = __PRIVATE_compareDocs(i, t, n);
                if (0 !== e) return e;
                r = r || i.field.isKeyField();
            }
            return 0;
        };
    }

    function __PRIVATE_compareDocs(e, t, n) {
        const r = e.field.isKeyField() ? DocumentKey.comparator(t.key, n.key) : function __PRIVATE_compareDocumentsByField(e, t, n) {
            const r = t.data.field(e), i = n.data.field(e);
            return null !== r && null !== i ? __PRIVATE_valueCompare(r, i) : fail(42886);
        }(e.field, t, n);
        switch (e.dir) {
          case "asc" /* Direction.ASCENDING */ :
            return r;

          case "desc" /* Direction.DESCENDING */ :
            return -1 * r;

          default:
            return fail(19790, {
                direction: e.dir
            });
        }
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * A map implementation that uses objects as keys. Objects must have an
     * associated equals function and must be immutable. Entries in the map are
     * stored together with the key being produced from the mapKeyFn. This map
     * automatically handles collisions of keys.
     */ class ObjectMap {
        constructor(e, t) {
            this.mapKeyFn = e, this.equalsFn = t, 
            /**
             * The inner map for a key/value pair. Due to the possibility of collisions we
             * keep a list of entries that we do a linear search through to find an actual
             * match. Note that collisions should be rare, so we still expect near
             * constant time lookups in practice.
             */
            this.inner = {}, 
            /** The number of entries stored in the map */
            this.innerSize = 0;
        }
        /** Get a value for this key, or undefined if it does not exist. */    get(e) {
            const t = this.mapKeyFn(e), n = this.inner[t];
            if (void 0 !== n) for (const [t, r] of n) if (this.equalsFn(t, e)) return r;
        }
        has(e) {
            return void 0 !== this.get(e);
        }
        /** Put this key and value in the map. */    set(e, t) {
            const n = this.mapKeyFn(e), r = this.inner[n];
            if (void 0 === r) return this.inner[n] = [ [ e, t ] ], void this.innerSize++;
            for (let n = 0; n < r.length; n++) if (this.equalsFn(r[n][0], e)) 
            // This is updating an existing entry and does not increase `innerSize`.
            return void (r[n] = [ e, t ]);
            r.push([ e, t ]), this.innerSize++;
        }
        /**
         * Remove this key from the map. Returns a boolean if anything was deleted.
         */    delete(e) {
            const t = this.mapKeyFn(e), n = this.inner[t];
            if (void 0 === n) return false;
            for (let r = 0; r < n.length; r++) if (this.equalsFn(n[r][0], e)) return 1 === n.length ? delete this.inner[t] : n.splice(r, 1), 
            this.innerSize--, true;
            return false;
        }
        forEach(e) {
            forEach(this.inner, ((t, n) => {
                for (const [t, r] of n) e(t, r);
            }));
        }
        isEmpty() {
            return isEmpty(this.inner);
        }
        size() {
            return this.innerSize;
        }
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */ const Rt = new SortedMap(DocumentKey.comparator);

    function __PRIVATE_mutableDocumentMap() {
        return Rt;
    }

    const Vt = new SortedMap(DocumentKey.comparator);

    function documentMap(...e) {
        let t = Vt;
        for (const n of e) t = t.insert(n.key, n);
        return t;
    }

    function __PRIVATE_convertOverlayedDocumentMapToDocumentMap(e) {
        let t = Vt;
        return e.forEach(((e, n) => t = t.insert(e, n.overlayedDocument))), t;
    }

    function __PRIVATE_newOverlayMap() {
        return __PRIVATE_newDocumentKeyMap();
    }

    function __PRIVATE_newMutationMap() {
        return __PRIVATE_newDocumentKeyMap();
    }

    function __PRIVATE_newDocumentKeyMap() {
        return new ObjectMap((e => e.toString()), ((e, t) => e.isEqual(t)));
    }

    const ft = new SortedSet(DocumentKey.comparator);

    function __PRIVATE_documentKeySet(...e) {
        let t = ft;
        for (const n of e) t = t.add(n);
        return t;
    }

    const gt = new SortedSet(__PRIVATE_primitiveComparator);

    function __PRIVATE_targetIdSet() {
        return gt;
    }

    /**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * Returns an DoubleValue for `value` that is encoded based the serializer's
     * `useProto3Json` setting.
     */ function __PRIVATE_toDouble(e, t) {
        if (e.useProto3Json) {
            if (isNaN(t)) return {
                doubleValue: "NaN"
            };
            if (t === 1 / 0) return {
                doubleValue: "Infinity"
            };
            if (t === -1 / 0) return {
                doubleValue: "-Infinity"
            };
        }
        return {
            doubleValue: __PRIVATE_isNegativeZero(t) ? "-0" : t
        };
    }

    /**
     * Returns an IntegerValue for `value`.
     */ function __PRIVATE_toInteger(e) {
        return {
            integerValue: "" + e
        };
    }

    /**
     * Returns a value for a number that's appropriate to put into a proto.
     * The return value is an IntegerValue if it can safely represent the value,
     * otherwise a DoubleValue is returned.
     */ function toNumber(e, t) {
        return isSafeInteger(t) ? __PRIVATE_toInteger(t) : __PRIVATE_toDouble(e, t);
    }

    /**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /** Used to represent a field transform on a mutation. */ class TransformOperation {
        constructor() {
            // Make sure that the structural type of `TransformOperation` is unique.
            // See https://github.com/microsoft/TypeScript/issues/5451
            this._ = void 0;
        }
    }

    /**
     * Computes the local transform result against the provided `previousValue`,
     * optionally using the provided localWriteTime.
     */ function __PRIVATE_applyTransformOperationToLocalView(e, t, n) {
        return e instanceof __PRIVATE_ServerTimestampTransform ? function serverTimestamp$1(e, t) {
            const n = {
                fields: {
                    [at]: {
                        stringValue: _t
                    },
                    [ct]: {
                        timestampValue: {
                            seconds: e.seconds,
                            nanos: e.nanoseconds
                        }
                    }
                }
            };
            // We should avoid storing deeply nested server timestamp map values
            // because we never use the intermediate "previous values".
            // For example:
            // previous: 42L, add: t1, result: t1 -> 42L
            // previous: t1,  add: t2, result: t2 -> 42L (NOT t2 -> t1 -> 42L)
            // previous: t2,  add: t3, result: t3 -> 42L (NOT t3 -> t2 -> t1 -> 42L)
            // `getPreviousValue` recursively traverses server timestamps to find the
            // least recent Value.
                    return t && __PRIVATE_isServerTimestamp(t) && (t = __PRIVATE_getPreviousValue(t)), 
            t && (n.fields[ut] = t), {
                mapValue: n
            };
        }(n, t) : e instanceof __PRIVATE_ArrayUnionTransformOperation ? __PRIVATE_applyArrayUnionTransformOperation(e, t) : e instanceof __PRIVATE_ArrayRemoveTransformOperation ? __PRIVATE_applyArrayRemoveTransformOperation(e, t) : function __PRIVATE_applyNumericIncrementTransformOperationToLocalView(e, t) {
            // PORTING NOTE: Since JavaScript's integer arithmetic is limited to 53 bit
            // precision and resolves overflows by reducing precision, we do not
            // manually cap overflows at 2^63.
            const n = __PRIVATE_computeTransformOperationBaseValue(e, t), r = asNumber(n) + asNumber(e.Ae);
            return isInteger(n) && isInteger(e.Ae) ? __PRIVATE_toInteger(r) : __PRIVATE_toDouble(e.serializer, r);
        }(e, t);
    }

    /**
     * Computes a final transform result after the transform has been acknowledged
     * by the server, potentially using the server-provided transformResult.
     */ function __PRIVATE_applyTransformOperationToRemoteDocument(e, t, n) {
        // The server just sends null as the transform result for array operations,
        // so we have to calculate a result the same as we do for local
        // applications.
        return e instanceof __PRIVATE_ArrayUnionTransformOperation ? __PRIVATE_applyArrayUnionTransformOperation(e, t) : e instanceof __PRIVATE_ArrayRemoveTransformOperation ? __PRIVATE_applyArrayRemoveTransformOperation(e, t) : n;
    }

    /**
     * If this transform operation is not idempotent, returns the base value to
     * persist for this transform. If a base value is returned, the transform
     * operation is always applied to this base value, even if document has
     * already been updated.
     *
     * Base values provide consistent behavior for non-idempotent transforms and
     * allow us to return the same latency-compensated value even if the backend
     * has already applied the transform operation. The base value is null for
     * idempotent transforms, as they can be re-played even if the backend has
     * already applied them.
     *
     * @returns a base value to store along with the mutation, or null for
     * idempotent transforms.
     */ function __PRIVATE_computeTransformOperationBaseValue(e, t) {
        return e instanceof __PRIVATE_NumericIncrementTransformOperation ? 
        /** Returns true if `value` is either an IntegerValue or a DoubleValue. */
        function __PRIVATE_isNumber(e) {
            return isInteger(e) || function __PRIVATE_isDouble(e) {
                return !!e && "doubleValue" in e;
            }(e);
        }(t) ? t : {
            integerValue: 0
        } : null;
    }

    /** Transforms a value into a server-generated timestamp. */
    class __PRIVATE_ServerTimestampTransform extends TransformOperation {}

    /** Transforms an array value via a union operation. */ class __PRIVATE_ArrayUnionTransformOperation extends TransformOperation {
        constructor(e) {
            super(), this.elements = e;
        }
    }

    function __PRIVATE_applyArrayUnionTransformOperation(e, t) {
        const n = __PRIVATE_coercedFieldValuesArray(t);
        for (const t of e.elements) n.some((e => __PRIVATE_valueEquals(e, t))) || n.push(t);
        return {
            arrayValue: {
                values: n
            }
        };
    }

    /** Transforms an array value via a remove operation. */ class __PRIVATE_ArrayRemoveTransformOperation extends TransformOperation {
        constructor(e) {
            super(), this.elements = e;
        }
    }

    function __PRIVATE_applyArrayRemoveTransformOperation(e, t) {
        let n = __PRIVATE_coercedFieldValuesArray(t);
        for (const t of e.elements) n = n.filter((e => !__PRIVATE_valueEquals(e, t)));
        return {
            arrayValue: {
                values: n
            }
        };
    }

    /**
     * Implements the backend semantics for locally computed NUMERIC_ADD (increment)
     * transforms. Converts all field values to integers or doubles, but unlike the
     * backend does not cap integer values at 2^63. Instead, JavaScript number
     * arithmetic is used and precision loss can occur for values greater than 2^53.
     */ class __PRIVATE_NumericIncrementTransformOperation extends TransformOperation {
        constructor(e, t) {
            super(), this.serializer = e, this.Ae = t;
        }
    }

    function asNumber(e) {
        return __PRIVATE_normalizeNumber(e.integerValue || e.doubleValue);
    }

    function __PRIVATE_coercedFieldValuesArray(e) {
        return isArray(e) && e.arrayValue.values ? e.arrayValue.values.slice() : [];
    }

    function __PRIVATE_fieldTransformEquals(e, t) {
        return e.field.isEqual(t.field) && function __PRIVATE_transformOperationEquals(e, t) {
            return e instanceof __PRIVATE_ArrayUnionTransformOperation && t instanceof __PRIVATE_ArrayUnionTransformOperation || e instanceof __PRIVATE_ArrayRemoveTransformOperation && t instanceof __PRIVATE_ArrayRemoveTransformOperation ? __PRIVATE_arrayEquals(e.elements, t.elements, __PRIVATE_valueEquals) : e instanceof __PRIVATE_NumericIncrementTransformOperation && t instanceof __PRIVATE_NumericIncrementTransformOperation ? __PRIVATE_valueEquals(e.Ae, t.Ae) : e instanceof __PRIVATE_ServerTimestampTransform && t instanceof __PRIVATE_ServerTimestampTransform;
        }(e.transform, t.transform);
    }

    /**
     * Encodes a precondition for a mutation. This follows the model that the
     * backend accepts with the special case of an explicit "empty" precondition
     * (meaning no precondition).
     */ class Precondition {
        constructor(e, t) {
            this.updateTime = e, this.exists = t;
        }
        /** Creates a new empty Precondition. */    static none() {
            return new Precondition;
        }
        /** Creates a new Precondition with an exists flag. */    static exists(e) {
            return new Precondition(void 0, e);
        }
        /** Creates a new Precondition based on a version a document exists at. */    static updateTime(e) {
            return new Precondition(e);
        }
        /** Returns whether this Precondition is empty. */    get isNone() {
            return void 0 === this.updateTime && void 0 === this.exists;
        }
        isEqual(e) {
            return this.exists === e.exists && (this.updateTime ? !!e.updateTime && this.updateTime.isEqual(e.updateTime) : !e.updateTime);
        }
    }

    /** Returns true if the preconditions is valid for the given document. */ function __PRIVATE_preconditionIsValidForDocument(e, t) {
        return void 0 !== e.updateTime ? t.isFoundDocument() && t.version.isEqual(e.updateTime) : void 0 === e.exists || e.exists === t.isFoundDocument();
    }

    /**
     * A mutation describes a self-contained change to a document. Mutations can
     * create, replace, delete, and update subsets of documents.
     *
     * Mutations not only act on the value of the document but also its version.
     *
     * For local mutations (mutations that haven't been committed yet), we preserve
     * the existing version for Set and Patch mutations. For Delete mutations, we
     * reset the version to 0.
     *
     * Here's the expected transition table.
     *
     * MUTATION           APPLIED TO            RESULTS IN
     *
     * SetMutation        Document(v3)          Document(v3)
     * SetMutation        NoDocument(v3)        Document(v0)
     * SetMutation        InvalidDocument(v0)   Document(v0)
     * PatchMutation      Document(v3)          Document(v3)
     * PatchMutation      NoDocument(v3)        NoDocument(v3)
     * PatchMutation      InvalidDocument(v0)   UnknownDocument(v3)
     * DeleteMutation     Document(v3)          NoDocument(v0)
     * DeleteMutation     NoDocument(v3)        NoDocument(v0)
     * DeleteMutation     InvalidDocument(v0)   NoDocument(v0)
     *
     * For acknowledged mutations, we use the updateTime of the WriteResponse as
     * the resulting version for Set and Patch mutations. As deletes have no
     * explicit update time, we use the commitTime of the WriteResponse for
     * Delete mutations.
     *
     * If a mutation is acknowledged by the backend but fails the precondition check
     * locally, we transition to an `UnknownDocument` and rely on Watch to send us
     * the updated version.
     *
     * Field transforms are used only with Patch and Set Mutations. We use the
     * `updateTransforms` message to store transforms, rather than the `transforms`s
     * messages.
     *
     * ## Subclassing Notes
     *
     * Every type of mutation needs to implement its own applyToRemoteDocument() and
     * applyToLocalView() to implement the actual behavior of applying the mutation
     * to some source document (see `setMutationApplyToRemoteDocument()` for an
     * example).
     */ class Mutation {}

    /**
     * A utility method to calculate a `Mutation` representing the overlay from the
     * final state of the document, and a `FieldMask` representing the fields that
     * are mutated by the local mutations.
     */ function __PRIVATE_calculateOverlayMutation(e, t) {
        if (!e.hasLocalMutations || t && 0 === t.fields.length) return null;
        // mask is null when sets or deletes are applied to the current document.
            if (null === t) return e.isNoDocument() ? new __PRIVATE_DeleteMutation(e.key, Precondition.none()) : new __PRIVATE_SetMutation(e.key, e.data, Precondition.none());
        {
            const n = e.data, r = ObjectValue.empty();
            let i = new SortedSet(FieldPath$1.comparator);
            for (let e of t.fields) if (!i.has(e)) {
                let t = n.field(e);
                // If we are deleting a nested field, we take the immediate parent as
                // the mask used to construct the resulting mutation.
                // Justification: Nested fields can create parent fields implicitly. If
                // only a leaf entry is deleted in later mutations, the parent field
                // should still remain, but we may have lost this information.
                // Consider mutation (foo.bar 1), then mutation (foo.bar delete()).
                // This leaves the final result (foo, {}). Despite the fact that `doc`
                // has the correct result, `foo` is not in `mask`, and the resulting
                // mutation would miss `foo`.
                            null === t && e.length > 1 && (e = e.popLast(), t = n.field(e)), null === t ? r.delete(e) : r.set(e, t), 
                i = i.add(e);
            }
            return new __PRIVATE_PatchMutation(e.key, r, new FieldMask(i.toArray()), Precondition.none());
        }
    }

    /**
     * Applies this mutation to the given document for the purposes of computing a
     * new remote document. If the input document doesn't match the expected state
     * (e.g. it is invalid or outdated), the document type may transition to
     * unknown.
     *
     * @param mutation - The mutation to apply.
     * @param document - The document to mutate. The input document can be an
     *     invalid document if the client has no knowledge of the pre-mutation state
     *     of the document.
     * @param mutationResult - The result of applying the mutation from the backend.
     */ function __PRIVATE_mutationApplyToRemoteDocument(e, t, n) {
        e instanceof __PRIVATE_SetMutation ? function __PRIVATE_setMutationApplyToRemoteDocument(e, t, n) {
            // Unlike setMutationApplyToLocalView, if we're applying a mutation to a
            // remote document the server has accepted the mutation so the precondition
            // must have held.
            const r = e.value.clone(), i = __PRIVATE_serverTransformResults(e.fieldTransforms, t, n.transformResults);
            r.setAll(i), t.convertToFoundDocument(n.version, r).setHasCommittedMutations();
        }(e, t, n) : e instanceof __PRIVATE_PatchMutation ? function __PRIVATE_patchMutationApplyToRemoteDocument(e, t, n) {
            if (!__PRIVATE_preconditionIsValidForDocument(e.precondition, t)) 
            // Since the mutation was not rejected, we know that the precondition
            // matched on the backend. We therefore must not have the expected version
            // of the document in our cache and convert to an UnknownDocument with a
            // known updateTime.
            return void t.convertToUnknownDocument(n.version);
            const r = __PRIVATE_serverTransformResults(e.fieldTransforms, t, n.transformResults), i = t.data;
            i.setAll(__PRIVATE_getPatch(e)), i.setAll(r), t.convertToFoundDocument(n.version, i).setHasCommittedMutations();
        }(e, t, n) : function __PRIVATE_deleteMutationApplyToRemoteDocument(e, t, n) {
            // Unlike applyToLocalView, if we're applying a mutation to a remote
            // document the server has accepted the mutation so the precondition must
            // have held.
            t.convertToNoDocument(n.version).setHasCommittedMutations();
        }(0, t, n);
    }

    /**
     * Applies this mutation to the given document for the purposes of computing
     * the new local view of a document. If the input document doesn't match the
     * expected state, the document is not modified.
     *
     * @param mutation - The mutation to apply.
     * @param document - The document to mutate. The input document can be an
     *     invalid document if the client has no knowledge of the pre-mutation state
     *     of the document.
     * @param previousMask - The fields that have been updated before applying this mutation.
     * @param localWriteTime - A timestamp indicating the local write time of the
     *     batch this mutation is a part of.
     * @returns A `FieldMask` representing the fields that are changed by applying this mutation.
     */ function __PRIVATE_mutationApplyToLocalView(e, t, n, r) {
        return e instanceof __PRIVATE_SetMutation ? function __PRIVATE_setMutationApplyToLocalView(e, t, n, r) {
            if (!__PRIVATE_preconditionIsValidForDocument(e.precondition, t)) 
            // The mutation failed to apply (e.g. a document ID created with add()
            // caused a name collision).
            return n;
            const i = e.value.clone(), s = __PRIVATE_localTransformResults(e.fieldTransforms, r, t);
            return i.setAll(s), t.convertToFoundDocument(t.version, i).setHasLocalMutations(), 
            null;
     // SetMutation overwrites all fields.
            }
        /**
     * A mutation that modifies fields of the document at the given key with the
     * given values. The values are applied through a field mask:
     *
     *  * When a field is in both the mask and the values, the corresponding field
     *    is updated.
     *  * When a field is in neither the mask nor the values, the corresponding
     *    field is unmodified.
     *  * When a field is in the mask but not in the values, the corresponding field
     *    is deleted.
     *  * When a field is not in the mask but is in the values, the values map is
     *    ignored.
     */ (e, t, n, r) : e instanceof __PRIVATE_PatchMutation ? function __PRIVATE_patchMutationApplyToLocalView(e, t, n, r) {
            if (!__PRIVATE_preconditionIsValidForDocument(e.precondition, t)) return n;
            const i = __PRIVATE_localTransformResults(e.fieldTransforms, r, t), s = t.data;
            if (s.setAll(__PRIVATE_getPatch(e)), s.setAll(i), t.convertToFoundDocument(t.version, s).setHasLocalMutations(), 
            null === n) return null;
            return n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e => e.field)));
        }
        /**
     * Returns a FieldPath/Value map with the content of the PatchMutation.
     */ (e, t, n, r) : function __PRIVATE_deleteMutationApplyToLocalView(e, t, n) {
            if (__PRIVATE_preconditionIsValidForDocument(e.precondition, t)) return t.convertToNoDocument(t.version).setHasLocalMutations(), 
            null;
            return n;
        }
        /**
     * A mutation that verifies the existence of the document at the given key with
     * the provided precondition.
     *
     * The `verify` operation is only used in Transactions, and this class serves
     * primarily to facilitate serialization into protos.
     */ (e, t, n);
    }

    function __PRIVATE_mutationEquals(e, t) {
        return e.type === t.type && (!!e.key.isEqual(t.key) && (!!e.precondition.isEqual(t.precondition) && (!!function __PRIVATE_fieldTransformsAreEqual(e, t) {
            return void 0 === e && void 0 === t || !(!e || !t) && __PRIVATE_arrayEquals(e, t, ((e, t) => __PRIVATE_fieldTransformEquals(e, t)));
        }(e.fieldTransforms, t.fieldTransforms) && (0 /* MutationType.Set */ === e.type ? e.value.isEqual(t.value) : 1 /* MutationType.Patch */ !== e.type || e.data.isEqual(t.data) && e.fieldMask.isEqual(t.fieldMask)))));
    }

    /**
     * A mutation that creates or replaces the document at the given key with the
     * object value contents.
     */ class __PRIVATE_SetMutation extends Mutation {
        constructor(e, t, n, r = []) {
            super(), this.key = e, this.value = t, this.precondition = n, this.fieldTransforms = r, 
            this.type = 0 /* MutationType.Set */;
        }
        getFieldMask() {
            return null;
        }
    }

    class __PRIVATE_PatchMutation extends Mutation {
        constructor(e, t, n, r, i = []) {
            super(), this.key = e, this.data = t, this.fieldMask = n, this.precondition = r, 
            this.fieldTransforms = i, this.type = 1 /* MutationType.Patch */;
        }
        getFieldMask() {
            return this.fieldMask;
        }
    }

    function __PRIVATE_getPatch(e) {
        const t = new Map;
        return e.fieldMask.fields.forEach((n => {
            if (!n.isEmpty()) {
                const r = e.data.field(n);
                t.set(n, r);
            }
        })), t;
    }

    /**
     * Creates a list of "transform results" (a transform result is a field value
     * representing the result of applying a transform) for use after a mutation
     * containing transforms has been acknowledged by the server.
     *
     * @param fieldTransforms - The field transforms to apply the result to.
     * @param mutableDocument - The current state of the document after applying all
     * previous mutations.
     * @param serverTransformResults - The transform results received by the server.
     * @returns The transform results list.
     */ function __PRIVATE_serverTransformResults(e, t, n) {
        const r = new Map;
        __PRIVATE_hardAssert(e.length === n.length, 32656, {
            Re: n.length,
            Ve: e.length
        });
        for (let i = 0; i < n.length; i++) {
            const s = e[i], o = s.transform, _ = t.data.field(s.field);
            r.set(s.field, __PRIVATE_applyTransformOperationToRemoteDocument(o, _, n[i]));
        }
        return r;
    }

    /**
     * Creates a list of "transform results" (a transform result is a field value
     * representing the result of applying a transform) for use when applying a
     * transform locally.
     *
     * @param fieldTransforms - The field transforms to apply the result to.
     * @param localWriteTime - The local time of the mutation (used to
     *     generate ServerTimestampValues).
     * @param mutableDocument - The document to apply transforms on.
     * @returns The transform results list.
     */ function __PRIVATE_localTransformResults(e, t, n) {
        const r = new Map;
        for (const i of e) {
            const e = i.transform, s = n.data.field(i.field);
            r.set(i.field, __PRIVATE_applyTransformOperationToLocalView(e, s, t));
        }
        return r;
    }

    /** A mutation that deletes the document at the given key. */ class __PRIVATE_DeleteMutation extends Mutation {
        constructor(e, t) {
            super(), this.key = e, this.precondition = t, this.type = 2 /* MutationType.Delete */ , 
            this.fieldTransforms = [];
        }
        getFieldMask() {
            return null;
        }
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * A batch of mutations that will be sent as one unit to the backend.
     */ class MutationBatch {
        /**
         * @param batchId - The unique ID of this mutation batch.
         * @param localWriteTime - The original write time of this mutation.
         * @param baseMutations - Mutations that are used to populate the base
         * values when this mutation is applied locally. This can be used to locally
         * overwrite values that are persisted in the remote document cache. Base
         * mutations are never sent to the backend.
         * @param mutations - The user-provided mutations in this mutation batch.
         * User-provided mutations are applied both locally and remotely on the
         * backend.
         */
        constructor(e, t, n, r) {
            this.batchId = e, this.localWriteTime = t, this.baseMutations = n, this.mutations = r;
        }
        /**
         * Applies all the mutations in this MutationBatch to the specified document
         * to compute the state of the remote document
         *
         * @param document - The document to apply mutations to.
         * @param batchResult - The result of applying the MutationBatch to the
         * backend.
         */    applyToRemoteDocument(e, t) {
            const n = t.mutationResults;
            for (let t = 0; t < this.mutations.length; t++) {
                const r = this.mutations[t];
                if (r.key.isEqual(e.key)) {
                    __PRIVATE_mutationApplyToRemoteDocument(r, e, n[t]);
                }
            }
        }
        /**
         * Computes the local view of a document given all the mutations in this
         * batch.
         *
         * @param document - The document to apply mutations to.
         * @param mutatedFields - Fields that have been updated before applying this mutation batch.
         * @returns A `FieldMask` representing all the fields that are mutated.
         */    applyToLocalView(e, t) {
            // First, apply the base state. This allows us to apply non-idempotent
            // transform against a consistent set of values.
            for (const n of this.baseMutations) n.key.isEqual(e.key) && (t = __PRIVATE_mutationApplyToLocalView(n, e, t, this.localWriteTime));
            // Second, apply all user-provided mutations.
                    for (const n of this.mutations) n.key.isEqual(e.key) && (t = __PRIVATE_mutationApplyToLocalView(n, e, t, this.localWriteTime));
            return t;
        }
        /**
         * Computes the local view for all provided documents given the mutations in
         * this batch. Returns a `DocumentKey` to `Mutation` map which can be used to
         * replace all the mutation applications.
         */    applyToLocalDocumentSet(e, t) {
            // TODO(mrschmidt): This implementation is O(n^2). If we apply the mutations
            // directly (as done in `applyToLocalView()`), we can reduce the complexity
            // to O(n).
            const n = __PRIVATE_newMutationMap();
            return this.mutations.forEach((r => {
                const i = e.get(r.key), s = i.overlayedDocument;
                // TODO(mutabledocuments): This method should take a MutableDocumentMap
                // and we should remove this cast.
                            let o = this.applyToLocalView(s, i.mutatedFields);
                // Set mutatedFields to null if the document is only from local mutations.
                // This creates a Set or Delete mutation, instead of trying to create a
                // patch mutation as the overlay.
                            o = t.has(r.key) ? null : o;
                const _ = __PRIVATE_calculateOverlayMutation(s, o);
                null !== _ && n.set(r.key, _), s.isValidDocument() || s.convertToNoDocument(SnapshotVersion.min());
            })), n;
        }
        keys() {
            return this.mutations.reduce(((e, t) => e.add(t.key)), __PRIVATE_documentKeySet());
        }
        isEqual(e) {
            return this.batchId === e.batchId && __PRIVATE_arrayEquals(this.mutations, e.mutations, ((e, t) => __PRIVATE_mutationEquals(e, t))) && __PRIVATE_arrayEquals(this.baseMutations, e.baseMutations, ((e, t) => __PRIVATE_mutationEquals(e, t)));
        }
    }

    /**
     * @license
     * Copyright 2022 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * Representation of an overlay computed by Firestore.
     *
     * Holds information about a mutation and the largest batch id in Firestore when
     * the mutation was created.
     */ class Overlay {
        constructor(e, t) {
            this.largestBatchId = e, this.mutation = t;
        }
        getKey() {
            return this.mutation.key;
        }
        isEqual(e) {
            return null !== e && this.mutation === e.mutation;
        }
        toString() {
            return `Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`;
        }
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */ class ExistenceFilter {
        constructor(e, t) {
            this.count = e, this.unchangedNames = t;
        }
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * Error Codes describing the different ways GRPC can fail. These are copied
     * directly from GRPC's sources here:
     *
     * https://github.com/grpc/grpc/blob/bceec94ea4fc5f0085d81235d8e1c06798dc341a/include/grpc%2B%2B/impl/codegen/status_code_enum.h
     *
     * Important! The names of these identifiers matter because the string forms
     * are used for reverse lookups from the webchannel stream. Do NOT change the
     * names of these identifiers or change this into a const enum.
     */ var pt, yt;

    /**
     * Determines whether an error code represents a permanent error when received
     * in response to a write operation.
     *
     * Write operations must be handled specially because as of b/119437764, ABORTED
     * errors on the write stream should be retried too (even though ABORTED errors
     * are not generally retryable).
     *
     * Note that during the initial handshake on the write stream an ABORTED error
     * signals that we should discard our stream token (i.e. it is permanent). This
     * means a handshake error should be classified with isPermanentError, above.
     */
    /**
     * Maps an error Code from GRPC status code number, like 0, 1, or 14. These
     * are not the same as HTTP status codes.
     *
     * @returns The Code equivalent to the given GRPC status code. Fails if there
     *     is no match.
     */
    function __PRIVATE_mapCodeFromRpcCode(e) {
        if (void 0 === e) 
        // This shouldn't normally happen, but in certain error cases (like trying
        // to send invalid proto messages) we may get an error with no GRPC code.
        return __PRIVATE_logError("GRPC error has no .code"), N.UNKNOWN;
        switch (e) {
          case pt.OK:
            return N.OK;

          case pt.CANCELLED:
            return N.CANCELLED;

          case pt.UNKNOWN:
            return N.UNKNOWN;

          case pt.DEADLINE_EXCEEDED:
            return N.DEADLINE_EXCEEDED;

          case pt.RESOURCE_EXHAUSTED:
            return N.RESOURCE_EXHAUSTED;

          case pt.INTERNAL:
            return N.INTERNAL;

          case pt.UNAVAILABLE:
            return N.UNAVAILABLE;

          case pt.UNAUTHENTICATED:
            return N.UNAUTHENTICATED;

          case pt.INVALID_ARGUMENT:
            return N.INVALID_ARGUMENT;

          case pt.NOT_FOUND:
            return N.NOT_FOUND;

          case pt.ALREADY_EXISTS:
            return N.ALREADY_EXISTS;

          case pt.PERMISSION_DENIED:
            return N.PERMISSION_DENIED;

          case pt.FAILED_PRECONDITION:
            return N.FAILED_PRECONDITION;

          case pt.ABORTED:
            return N.ABORTED;

          case pt.OUT_OF_RANGE:
            return N.OUT_OF_RANGE;

          case pt.UNIMPLEMENTED:
            return N.UNIMPLEMENTED;

          case pt.DATA_LOSS:
            return N.DATA_LOSS;

          default:
            return fail(39323, {
                code: e
            });
        }
    }

    /**
     * Converts an HTTP response's error status to the equivalent error code.
     *
     * @param status - An HTTP error response status ("FAILED_PRECONDITION",
     * "UNKNOWN", etc.)
     * @returns The equivalent Code. Non-matching responses are mapped to
     *     Code.UNKNOWN.
     */ (yt = pt || (pt = {}))[yt.OK = 0] = "OK", yt[yt.CANCELLED = 1] = "CANCELLED", 
    yt[yt.UNKNOWN = 2] = "UNKNOWN", yt[yt.INVALID_ARGUMENT = 3] = "INVALID_ARGUMENT", 
    yt[yt.DEADLINE_EXCEEDED = 4] = "DEADLINE_EXCEEDED", yt[yt.NOT_FOUND = 5] = "NOT_FOUND", 
    yt[yt.ALREADY_EXISTS = 6] = "ALREADY_EXISTS", yt[yt.PERMISSION_DENIED = 7] = "PERMISSION_DENIED", 
    yt[yt.UNAUTHENTICATED = 16] = "UNAUTHENTICATED", yt[yt.RESOURCE_EXHAUSTED = 8] = "RESOURCE_EXHAUSTED", 
    yt[yt.FAILED_PRECONDITION = 9] = "FAILED_PRECONDITION", yt[yt.ABORTED = 10] = "ABORTED", 
    yt[yt.OUT_OF_RANGE = 11] = "OUT_OF_RANGE", yt[yt.UNIMPLEMENTED = 12] = "UNIMPLEMENTED", 
    yt[yt.INTERNAL = 13] = "INTERNAL", yt[yt.UNAVAILABLE = 14] = "UNAVAILABLE", yt[yt.DATA_LOSS = 15] = "DATA_LOSS";

    /**
     * Sets the value of the `testingHooksSpi` object.
     * @param instance the instance to set.
     */
    /**
     * @license
     * Copyright 2023 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * An instance of the Platform's 'TextEncoder' implementation.
     */
    function __PRIVATE_newTextEncoder() {
        return new TextEncoder;
    }

    /**
     * An instance of the Platform's 'TextDecoder' implementation.
     */
    /**
     * @license
     * Copyright 2022 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    const St = new Integer([ 4294967295, 4294967295 ], 0);

    // Hash a string using md5 hashing algorithm.
    function __PRIVATE_getMd5HashValue(e) {
        const t = __PRIVATE_newTextEncoder().encode(e), n = new Md5;
        return n.update(t), new Uint8Array(n.digest());
    }

    // Interpret the 16 bytes array as two 64-bit unsigned integers, encoded using
    // 2s complement using little endian.
    function __PRIVATE_get64BitUints(e) {
        const t = new DataView(e.buffer), n = t.getUint32(0, /* littleEndian= */ true), r = t.getUint32(4, /* littleEndian= */ true), i = t.getUint32(8, /* littleEndian= */ true), s = t.getUint32(12, /* littleEndian= */ true);
        return [ new Integer([ n, r ], 0), new Integer([ i, s ], 0) ];
    }

    class BloomFilter {
        constructor(e, t, n) {
            if (this.bitmap = e, this.padding = t, this.hashCount = n, t < 0 || t >= 8) throw new __PRIVATE_BloomFilterError(`Invalid padding: ${t}`);
            if (n < 0) throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${n}`);
            if (e.length > 0 && 0 === this.hashCount) 
            // Only empty bloom filter can have 0 hash count.
            throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${n}`);
            if (0 === e.length && 0 !== t) 
            // Empty bloom filter should have 0 padding.
            throw new __PRIVATE_BloomFilterError(`Invalid padding when bitmap length is 0: ${t}`);
            this.ge = 8 * e.length - t, 
            // Set the bit count in Integer to avoid repetition in mightContain().
            this.pe = Integer.fromNumber(this.ge);
        }
        // Calculate the ith hash value based on the hashed 64bit integers,
        // and calculate its corresponding bit index in the bitmap to be checked.
        ye(e, t, n) {
            // Calculate hashed value h(i) = h1 + (i * h2).
            let r = e.add(t.multiply(Integer.fromNumber(n)));
            // Wrap if hash value overflow 64bit.
                    return 1 === r.compare(St) && (r = new Integer([ r.getBits(0), r.getBits(1) ], 0)), 
            r.modulo(this.pe).toNumber();
        }
        // Return whether the bit on the given index in the bitmap is set to 1.
        we(e) {
            return !!(this.bitmap[Math.floor(e / 8)] & 1 << e % 8);
        }
        mightContain(e) {
            // Empty bitmap should always return false on membership check.
            if (0 === this.ge) return false;
            const t = __PRIVATE_getMd5HashValue(e), [n, r] = __PRIVATE_get64BitUints(t);
            for (let e = 0; e < this.hashCount; e++) {
                const t = this.ye(n, r, e);
                if (!this.we(t)) return false;
            }
            return true;
        }
        /** Create bloom filter for testing purposes only. */    static create(e, t, n) {
            const r = e % 8 == 0 ? 0 : 8 - e % 8, i = new Uint8Array(Math.ceil(e / 8)), s = new BloomFilter(i, r, t);
            return n.forEach((e => s.insert(e))), s;
        }
        insert(e) {
            if (0 === this.ge) return;
            const t = __PRIVATE_getMd5HashValue(e), [n, r] = __PRIVATE_get64BitUints(t);
            for (let e = 0; e < this.hashCount; e++) {
                const t = this.ye(n, r, e);
                this.Se(t);
            }
        }
        Se(e) {
            const t = Math.floor(e / 8), n = e % 8;
            this.bitmap[t] |= 1 << n;
        }
    }

    class __PRIVATE_BloomFilterError extends Error {
        constructor() {
            super(...arguments), this.name = "BloomFilterError";
        }
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * An event from the RemoteStore. It is split into targetChanges (changes to the
     * state or the set of documents in our watched targets) and documentUpdates
     * (changes to the actual documents).
     */ class RemoteEvent {
        constructor(
        /**
         * The snapshot version this event brings us up to, or MIN if not set.
         */
        e, 
        /**
         * A map from target to changes to the target. See TargetChange.
         */
        t, 
        /**
         * A map of targets that is known to be inconsistent, and the purpose for
         * re-listening. Listens for these targets should be re-established without
         * resume tokens.
         */
        n, 
        /**
         * A set of which documents have changed or been deleted, along with the
         * doc's new values (if not deleted).
         */
        r, 
        /**
         * A set of which document updates are due only to limbo resolution targets.
         */
        i) {
            this.snapshotVersion = e, this.targetChanges = t, this.targetMismatches = n, this.documentUpdates = r, 
            this.resolvedLimboDocuments = i;
        }
        /**
         * HACK: Views require RemoteEvents in order to determine whether the view is
         * CURRENT, but secondary tabs don't receive remote events. So this method is
         * used to create a synthesized RemoteEvent that can be used to apply a
         * CURRENT status change to a View, for queries executed in a different tab.
         */
        // PORTING NOTE: Multi-tab only
        static createSynthesizedRemoteEventForCurrentChange(e, t, n) {
            const r = new Map;
            return r.set(e, TargetChange.createSynthesizedTargetChangeForCurrentChange(e, t, n)), 
            new RemoteEvent(SnapshotVersion.min(), r, new SortedMap(__PRIVATE_primitiveComparator), __PRIVATE_mutableDocumentMap(), __PRIVATE_documentKeySet());
        }
    }

    /**
     * A TargetChange specifies the set of changes for a specific target as part of
     * a RemoteEvent. These changes track which documents are added, modified or
     * removed, as well as the target's resume token and whether the target is
     * marked CURRENT.
     * The actual changes *to* documents are not part of the TargetChange since
     * documents may be part of multiple targets.
     */ class TargetChange {
        constructor(
        /**
         * An opaque, server-assigned token that allows watching a query to be resumed
         * after disconnecting without retransmitting all the data that matches the
         * query. The resume token essentially identifies a point in time from which
         * the server should resume sending results.
         */
        e, 
        /**
         * The "current" (synced) status of this target. Note that "current"
         * has special meaning in the RPC protocol that implies that a target is
         * both up-to-date and consistent with the rest of the watch stream.
         */
        t, 
        /**
         * The set of documents that were newly assigned to this target as part of
         * this remote event.
         */
        n, 
        /**
         * The set of documents that were already assigned to this target but received
         * an update during this remote event.
         */
        r, 
        /**
         * The set of documents that were removed from this target as part of this
         * remote event.
         */
        i) {
            this.resumeToken = e, this.current = t, this.addedDocuments = n, this.modifiedDocuments = r, 
            this.removedDocuments = i;
        }
        /**
         * This method is used to create a synthesized TargetChanges that can be used to
         * apply a CURRENT status change to a View (for queries executed in a different
         * tab) or for new queries (to raise snapshots with correct CURRENT status).
         */    static createSynthesizedTargetChangeForCurrentChange(e, t, n) {
            return new TargetChange(n, t, __PRIVATE_documentKeySet(), __PRIVATE_documentKeySet(), __PRIVATE_documentKeySet());
        }
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * Represents a changed document and a list of target ids to which this change
     * applies.
     *
     * If document has been deleted NoDocument will be provided.
     */ class __PRIVATE_DocumentWatchChange {
        constructor(
        /** The new document applies to all of these targets. */
        e, 
        /** The new document is removed from all of these targets. */
        t, 
        /** The key of the document for this change. */
        n, 
        /**
         * The new document or NoDocument if it was deleted. Is null if the
         * document went out of view without the server sending a new document.
         */
        r) {
            this.be = e, this.removedTargetIds = t, this.key = n, this.De = r;
        }
    }

    class __PRIVATE_ExistenceFilterChange {
        constructor(e, t) {
            this.targetId = e, this.Ce = t;
        }
    }

    class __PRIVATE_WatchTargetChange {
        constructor(
        /** What kind of change occurred to the watch target. */
        e, 
        /** The target IDs that were added/removed/set. */
        t, 
        /**
         * An opaque, server-assigned token that allows watching a target to be
         * resumed after disconnecting without retransmitting all the data that
         * matches the target. The resume token essentially identifies a point in
         * time from which the server should resume sending results.
         */
        n = ByteString.EMPTY_BYTE_STRING
        /** An RPC error indicating why the watch failed. */ , r = null) {
            this.state = e, this.targetIds = t, this.resumeToken = n, this.cause = r;
        }
    }

    /** Tracks the internal state of a Watch target. */ class __PRIVATE_TargetState {
        constructor() {
            /**
             * The number of pending responses (adds or removes) that we are waiting on.
             * We only consider targets active that have no pending responses.
             */
            this.ve = 0, 
            /**
             * Keeps track of the document changes since the last raised snapshot.
             *
             * These changes are continuously updated as we receive document updates and
             * always reflect the current set of changes against the last issued snapshot.
             */
            this.Fe = __PRIVATE_snapshotChangesMap(), 
            /** See public getters for explanations of these fields. */
            this.Me = ByteString.EMPTY_BYTE_STRING, this.xe = false, 
            /**
             * Whether this target state should be included in the next snapshot. We
             * initialize to true so that newly-added targets are included in the next
             * RemoteEvent.
             */
            this.Oe = true;
        }
        /**
         * Whether this target has been marked 'current'.
         *
         * 'Current' has special meaning in the RPC protocol: It implies that the
         * Watch backend has sent us all changes up to the point at which the target
         * was added and that the target is consistent with the rest of the watch
         * stream.
         */    get current() {
            return this.xe;
        }
        /** The last resume token sent to us for this target. */    get resumeToken() {
            return this.Me;
        }
        /** Whether this target has pending target adds or target removes. */    get Ne() {
            return 0 !== this.ve;
        }
        /** Whether we have modified any state that should trigger a snapshot. */    get Be() {
            return this.Oe;
        }
        /**
         * Applies the resume token to the TargetChange, but only when it has a new
         * value. Empty resumeTokens are discarded.
         */    Le(e) {
            e.approximateByteSize() > 0 && (this.Oe = true, this.Me = e);
        }
        /**
         * Creates a target change from the current set of changes.
         *
         * To reset the document changes after raising this snapshot, call
         * `clearPendingChanges()`.
         */    ke() {
            let e = __PRIVATE_documentKeySet(), t = __PRIVATE_documentKeySet(), n = __PRIVATE_documentKeySet();
            return this.Fe.forEach(((r, i) => {
                switch (i) {
                  case 0 /* ChangeType.Added */ :
                    e = e.add(r);
                    break;

                  case 2 /* ChangeType.Modified */ :
                    t = t.add(r);
                    break;

                  case 1 /* ChangeType.Removed */ :
                    n = n.add(r);
                    break;

                  default:
                    fail(38017, {
                        changeType: i
                    });
                }
            })), new TargetChange(this.Me, this.xe, e, t, n);
        }
        /**
         * Resets the document changes and sets `hasPendingChanges` to false.
         */    qe() {
            this.Oe = false, this.Fe = __PRIVATE_snapshotChangesMap();
        }
        Qe(e, t) {
            this.Oe = true, this.Fe = this.Fe.insert(e, t);
        }
        $e(e) {
            this.Oe = true, this.Fe = this.Fe.remove(e);
        }
        Ue() {
            this.ve += 1;
        }
        Ke() {
            this.ve -= 1, __PRIVATE_hardAssert(this.ve >= 0, 3241, {
                ve: this.ve
            });
        }
        We() {
            this.Oe = true, this.xe = true;
        }
    }

    /**
     * A helper class to accumulate watch changes into a RemoteEvent.
     */
    class __PRIVATE_WatchChangeAggregator {
        constructor(e) {
            this.Ge = e, 
            /** The internal state of all tracked targets. */
            this.ze = new Map, 
            /** Keeps track of the documents to update since the last raised snapshot. */
            this.je = __PRIVATE_mutableDocumentMap(), this.Je = __PRIVATE_documentTargetMap(), 
            /** A mapping of document keys to their set of target IDs. */
            this.He = __PRIVATE_documentTargetMap(), 
            /**
             * A map of targets with existence filter mismatches. These targets are
             * known to be inconsistent and their listens needs to be re-established by
             * RemoteStore.
             */
            this.Ye = new SortedMap(__PRIVATE_primitiveComparator);
        }
        /**
         * Processes and adds the DocumentWatchChange to the current set of changes.
         */    Ze(e) {
            for (const t of e.be) e.De && e.De.isFoundDocument() ? this.Xe(t, e.De) : this.et(t, e.key, e.De);
            for (const t of e.removedTargetIds) this.et(t, e.key, e.De);
        }
        /** Processes and adds the WatchTargetChange to the current set of changes. */    tt(e) {
            this.forEachTarget(e, (t => {
                const n = this.nt(t);
                switch (e.state) {
                  case 0 /* WatchTargetChangeState.NoChange */ :
                    this.rt(t) && n.Le(e.resumeToken);
                    break;

                  case 1 /* WatchTargetChangeState.Added */ :
                    // We need to decrement the number of pending acks needed from watch
                    // for this targetId.
                    n.Ke(), n.Ne || 
                    // We have a freshly added target, so we need to reset any state
                    // that we had previously. This can happen e.g. when remove and add
                    // back a target for existence filter mismatches.
                    n.qe(), n.Le(e.resumeToken);
                    break;

                  case 2 /* WatchTargetChangeState.Removed */ :
                    // We need to keep track of removed targets to we can post-filter and
                    // remove any target changes.
                    // We need to decrement the number of pending acks needed from watch
                    // for this targetId.
                    n.Ke(), n.Ne || this.removeTarget(t);
                    break;

                  case 3 /* WatchTargetChangeState.Current */ :
                    this.rt(t) && (n.We(), n.Le(e.resumeToken));
                    break;

                  case 4 /* WatchTargetChangeState.Reset */ :
                    this.rt(t) && (
                    // Reset the target and synthesizes removes for all existing
                    // documents. The backend will re-add any documents that still
                    // match the target before it sends the next global snapshot.
                    this.it(t), n.Le(e.resumeToken));
                    break;

                  default:
                    fail(56790, {
                        state: e.state
                    });
                }
            }));
        }
        /**
         * Iterates over all targetIds that the watch change applies to: either the
         * targetIds explicitly listed in the change or the targetIds of all currently
         * active targets.
         */    forEachTarget(e, t) {
            e.targetIds.length > 0 ? e.targetIds.forEach(t) : this.ze.forEach(((e, n) => {
                this.rt(n) && t(n);
            }));
        }
        /**
         * Handles existence filters and synthesizes deletes for filter mismatches.
         * Targets that are invalidated by filter mismatches are added to
         * `pendingTargetResets`.
         */    st(e) {
            const t = e.targetId, n = e.Ce.count, r = this.ot(t);
            if (r) {
                const i = r.target;
                if (__PRIVATE_targetIsDocumentTarget(i)) if (0 === n) {
                    // The existence filter told us the document does not exist. We deduce
                    // that this document does not exist and apply a deleted document to
                    // our updates. Without applying this deleted document there might be
                    // another query that will raise this document as part of a snapshot
                    // until it is resolved, essentially exposing inconsistency between
                    // queries.
                    const e = new DocumentKey(i.path);
                    this.et(t, e, MutableDocument.newNoDocument(e, SnapshotVersion.min()));
                } else __PRIVATE_hardAssert(1 === n, 20013, {
                    expectedCount: n
                }); else {
                    const r = this._t(t);
                    // Existence filter mismatch. Mark the documents as being in limbo, and
                    // raise a snapshot with `isFromCache:true`.
                                    if (r !== n) {
                        // Apply bloom filter to identify and mark removed documents.
                        const n = this.ut(e), i = n ? this.ct(n, e, r) : 1 /* BloomFilterApplicationStatus.Skipped */;
                        if (0 /* BloomFilterApplicationStatus.Success */ !== i) {
                            // If bloom filter application fails, we reset the mapping and
                            // trigger re-run of the query.
                            this.it(t);
                            const e = 2 /* BloomFilterApplicationStatus.FalsePositive */ === i ? "TargetPurposeExistenceFilterMismatchBloom" /* TargetPurpose.ExistenceFilterMismatchBloom */ : "TargetPurposeExistenceFilterMismatch" /* TargetPurpose.ExistenceFilterMismatch */;
                            this.Ye = this.Ye.insert(t, e);
                        }
                    }
                }
            }
        }
        /**
         * Parse the bloom filter from the "unchanged_names" field of an existence
         * filter.
         */    ut(e) {
            const t = e.Ce.unchangedNames;
            if (!t || !t.bits) return null;
            const {bits: {bitmap: n = "", padding: r = 0}, hashCount: i = 0} = t;
            let s, o;
            try {
                s = __PRIVATE_normalizeByteString(n).toUint8Array();
            } catch (e) {
                if (e instanceof __PRIVATE_Base64DecodeError) return __PRIVATE_logWarn("Decoding the base64 bloom filter in existence filter failed (" + e.message + "); ignoring the bloom filter and falling back to full re-query."), 
                null;
                throw e;
            }
            try {
                // BloomFilter throws error if the inputs are invalid.
                o = new BloomFilter(s, r, i);
            } catch (e) {
                return __PRIVATE_logWarn(e instanceof __PRIVATE_BloomFilterError ? "BloomFilter error: " : "Applying bloom filter failed: ", e), 
                null;
            }
            return 0 === o.ge ? null : o;
        }
        /**
         * Apply bloom filter to remove the deleted documents, and return the
         * application status.
         */    ct(e, t, n) {
            return t.Ce.count === n - this.Pt(e, t.targetId) ? 0 /* BloomFilterApplicationStatus.Success */ : 2 /* BloomFilterApplicationStatus.FalsePositive */;
        }
        /**
         * Filter out removed documents based on bloom filter membership result and
         * return number of documents removed.
         */    Pt(e, t) {
            const n = this.Ge.getRemoteKeysForTarget(t);
            let r = 0;
            return n.forEach((n => {
                const i = this.Ge.ht(), s = `projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;
                e.mightContain(s) || (this.et(t, n, /*updatedDocument=*/ null), r++);
            })), r;
        }
        /**
         * Converts the currently accumulated state into a remote event at the
         * provided snapshot version. Resets the accumulated changes before returning.
         */    Tt(e) {
            const t = new Map;
            this.ze.forEach(((n, r) => {
                const i = this.ot(r);
                if (i) {
                    if (n.current && __PRIVATE_targetIsDocumentTarget(i.target)) {
                        // Document queries for document that don't exist can produce an empty
                        // result set. To update our local cache, we synthesize a document
                        // delete if we have not previously received the document for this
                        // target. This resolves the limbo state of the document, removing it
                        // from limboDocumentRefs.
                        // TODO(dimond): Ideally we would have an explicit lookup target
                        // instead resulting in an explicit delete message and we could
                        // remove this special logic.
                        const t = new DocumentKey(i.target.path);
                        this.It(t).has(r) || this.Et(r, t) || this.et(r, t, MutableDocument.newNoDocument(t, e));
                    }
                    n.Be && (t.set(r, n.ke()), n.qe());
                }
            }));
            let n = __PRIVATE_documentKeySet();
            // We extract the set of limbo-only document updates as the GC logic
            // special-cases documents that do not appear in the target cache.
            
            // TODO(gsoltis): Expand on this comment once GC is available in the JS
            // client.
                    this.He.forEach(((e, t) => {
                let r = true;
                t.forEachWhile((e => {
                    const t = this.ot(e);
                    return !t || "TargetPurposeLimboResolution" /* TargetPurpose.LimboResolution */ === t.purpose || (r = false, 
                    false);
                })), r && (n = n.add(e));
            })), this.je.forEach(((t, n) => n.setReadTime(e)));
            const r = new RemoteEvent(e, t, this.Ye, this.je, n);
            return this.je = __PRIVATE_mutableDocumentMap(), this.Je = __PRIVATE_documentTargetMap(), 
            this.He = __PRIVATE_documentTargetMap(), this.Ye = new SortedMap(__PRIVATE_primitiveComparator), 
            r;
        }
        /**
         * Adds the provided document to the internal list of document updates and
         * its document key to the given target's mapping.
         */
        // Visible for testing.
        Xe(e, t) {
            if (!this.rt(e)) return;
            const n = this.Et(e, t.key) ? 2 /* ChangeType.Modified */ : 0 /* ChangeType.Added */;
            this.nt(e).Qe(t.key, n), this.je = this.je.insert(t.key, t), this.Je = this.Je.insert(t.key, this.It(t.key).add(e)), 
            this.He = this.He.insert(t.key, this.dt(t.key).add(e));
        }
        /**
         * Removes the provided document from the target mapping. If the
         * document no longer matches the target, but the document's state is still
         * known (e.g. we know that the document was deleted or we received the change
         * that caused the filter mismatch), the new document can be provided
         * to update the remote document cache.
         */
        // Visible for testing.
        et(e, t, n) {
            if (!this.rt(e)) return;
            const r = this.nt(e);
            this.Et(e, t) ? r.Qe(t, 1 /* ChangeType.Removed */) : 
            // The document may have entered and left the target before we raised a
            // snapshot, so we can just ignore the change.
            r.$e(t), this.He = this.He.insert(t, this.dt(t).delete(e)), this.He = this.He.insert(t, this.dt(t).add(e)), 
            n && (this.je = this.je.insert(t, n));
        }
        removeTarget(e) {
            this.ze.delete(e);
        }
        /**
         * Returns the current count of documents in the target. This includes both
         * the number of documents that the LocalStore considers to be part of the
         * target as well as any accumulated changes.
         */    _t(e) {
            const t = this.nt(e).ke();
            return this.Ge.getRemoteKeysForTarget(e).size + t.addedDocuments.size - t.removedDocuments.size;
        }
        /**
         * Increment the number of acks needed from watch before we can consider the
         * server to be 'in-sync' with the client's active targets.
         */    Ue(e) {
            this.nt(e).Ue();
        }
        nt(e) {
            let t = this.ze.get(e);
            return t || (t = new __PRIVATE_TargetState, this.ze.set(e, t)), t;
        }
        dt(e) {
            let t = this.He.get(e);
            return t || (t = new SortedSet(__PRIVATE_primitiveComparator), this.He = this.He.insert(e, t)), 
            t;
        }
        It(e) {
            let t = this.Je.get(e);
            return t || (t = new SortedSet(__PRIVATE_primitiveComparator), this.Je = this.Je.insert(e, t)), 
            t;
        }
        /**
         * Verifies that the user is still interested in this target (by calling
         * `getTargetDataForTarget()`) and that we are not waiting for pending ADDs
         * from watch.
         */    rt(e) {
            const t = null !== this.ot(e);
            return t || __PRIVATE_logDebug("WatchChangeAggregator", "Detected inactive target", e), 
            t;
        }
        /**
         * Returns the TargetData for an active target (i.e. a target that the user
         * is still interested in that has no outstanding target change requests).
         */    ot(e) {
            const t = this.ze.get(e);
            return t && t.Ne ? null : this.Ge.At(e);
        }
        /**
         * Resets the state of a Watch target to its initial state (e.g. sets
         * 'current' to false, clears the resume token and removes its target mapping
         * from all documents).
         */    it(e) {
            this.ze.set(e, new __PRIVATE_TargetState);
            this.Ge.getRemoteKeysForTarget(e).forEach((t => {
                this.et(e, t, /*updatedDocument=*/ null);
            }));
        }
        /**
         * Returns whether the LocalStore considers the document to be part of the
         * specified target.
         */    Et(e, t) {
            return this.Ge.getRemoteKeysForTarget(e).has(t);
        }
    }

    function __PRIVATE_documentTargetMap() {
        return new SortedMap(DocumentKey.comparator);
    }

    function __PRIVATE_snapshotChangesMap() {
        return new SortedMap(DocumentKey.comparator);
    }

    const bt = (() => {
        const e = {
            asc: "ASCENDING",
            desc: "DESCENDING"
        };
        return e;
    })(), Dt = (() => {
        const e = {
            "<": "LESS_THAN",
            "<=": "LESS_THAN_OR_EQUAL",
            ">": "GREATER_THAN",
            ">=": "GREATER_THAN_OR_EQUAL",
            "==": "EQUAL",
            "!=": "NOT_EQUAL",
            "array-contains": "ARRAY_CONTAINS",
            in: "IN",
            "not-in": "NOT_IN",
            "array-contains-any": "ARRAY_CONTAINS_ANY"
        };
        return e;
    })(), Ct = (() => {
        const e = {
            and: "AND",
            or: "OR"
        };
        return e;
    })();

    /**
     * This class generates JsonObject values for the Datastore API suitable for
     * sending to either GRPC stub methods or via the JSON/HTTP REST API.
     *
     * The serializer supports both Protobuf.js and Proto3 JSON formats. By
     * setting `useProto3Json` to true, the serializer will use the Proto3 JSON
     * format.
     *
     * For a description of the Proto3 JSON format check
     * https://developers.google.com/protocol-buffers/docs/proto3#json
     *
     * TODO(klimt): We can remove the databaseId argument if we keep the full
     * resource name in documents.
     */
    class JsonProtoSerializer {
        constructor(e, t) {
            this.databaseId = e, this.useProto3Json = t;
        }
    }

    /**
     * Returns a value for a number (or null) that's appropriate to put into
     * a google.protobuf.Int32Value proto.
     * DO NOT USE THIS FOR ANYTHING ELSE.
     * This method cheats. It's typed as returning "number" because that's what
     * our generated proto interfaces say Int32Value must be. But GRPC actually
     * expects a { value: <number> } struct.
     */
    function __PRIVATE_toInt32Proto(e, t) {
        return e.useProto3Json || __PRIVATE_isNullOrUndefined(t) ? t : {
            value: t
        };
    }

    /**
     * Returns a number (or null) from a google.protobuf.Int32Value proto.
     */
    /**
     * Returns a value for a Date that's appropriate to put into a proto.
     */
    function toTimestamp(e, t) {
        if (e.useProto3Json) {
            return `${new Date(1e3 * t.seconds).toISOString().replace(/\.\d*/, "").replace("Z", "")}.${("000000000" + t.nanoseconds).slice(-9)}Z`;
        }
        return {
            seconds: "" + t.seconds,
            nanos: t.nanoseconds
        };
    }

    /**
     * Returns a Timestamp typed object given protobuf timestamp value.
     */
    /**
     * Returns a value for bytes that's appropriate to put in a proto.
     *
     * Visible for testing.
     */
    function __PRIVATE_toBytes(e, t) {
        return e.useProto3Json ? t.toBase64() : t.toUint8Array();
    }

    function __PRIVATE_fromVersion(e) {
        return __PRIVATE_hardAssert(!!e, 49232), SnapshotVersion.fromTimestamp(function fromTimestamp(e) {
            const t = __PRIVATE_normalizeTimestamp(e);
            return new Timestamp(t.seconds, t.nanos);
        }(e));
    }

    function __PRIVATE_toResourceName(e, t) {
        return __PRIVATE_toResourcePath(e, t).canonicalString();
    }

    function __PRIVATE_toResourcePath(e, t) {
        const n = function __PRIVATE_fullyQualifiedPrefixPath(e) {
            return new ResourcePath([ "projects", e.projectId, "databases", e.database ]);
        }(e).child("documents");
        return void 0 === t ? n : n.child(t);
    }

    function __PRIVATE_fromResourceName(e) {
        const t = ResourcePath.fromString(e);
        return __PRIVATE_hardAssert(__PRIVATE_isValidResourceName(t), 10190, {
            key: t.toString()
        }), t;
    }

    function fromName(e, t) {
        const n = __PRIVATE_fromResourceName(t);
        if (n.get(1) !== e.databaseId.projectId) throw new FirestoreError(N.INVALID_ARGUMENT, "Tried to deserialize key from different project: " + n.get(1) + " vs " + e.databaseId.projectId);
        if (n.get(3) !== e.databaseId.database) throw new FirestoreError(N.INVALID_ARGUMENT, "Tried to deserialize key from different database: " + n.get(3) + " vs " + e.databaseId.database);
        return new DocumentKey(__PRIVATE_extractLocalPathFromResourceName(n));
    }

    function __PRIVATE_toQueryPath(e, t) {
        return __PRIVATE_toResourceName(e.databaseId, t);
    }

    function __PRIVATE_fromQueryPath(e) {
        const t = __PRIVATE_fromResourceName(e);
        // In v1beta1 queries for collections at the root did not have a trailing
        // "/documents". In v1 all resource paths contain "/documents". Preserve the
        // ability to read the v1beta1 form for compatibility with queries persisted
        // in the local target cache.
            return 4 === t.length ? ResourcePath.emptyPath() : __PRIVATE_extractLocalPathFromResourceName(t);
    }

    function __PRIVATE_getEncodedDatabaseId(e) {
        return new ResourcePath([ "projects", e.databaseId.projectId, "databases", e.databaseId.database ]).canonicalString();
    }

    function __PRIVATE_extractLocalPathFromResourceName(e) {
        return __PRIVATE_hardAssert(e.length > 4 && "documents" === e.get(4), 29091, {
            key: e.toString()
        }), e.popFirst(5);
    }

    function __PRIVATE_fromWatchChange(e, t) {
        let n;
        if ("targetChange" in t) {
            t.targetChange;
            // proto3 default value is unset in JSON (undefined), so use 'NO_CHANGE'
            // if unset
            const r = function __PRIVATE_fromWatchTargetChangeState(e) {
                return "NO_CHANGE" === e ? 0 /* WatchTargetChangeState.NoChange */ : "ADD" === e ? 1 /* WatchTargetChangeState.Added */ : "REMOVE" === e ? 2 /* WatchTargetChangeState.Removed */ : "CURRENT" === e ? 3 /* WatchTargetChangeState.Current */ : "RESET" === e ? 4 /* WatchTargetChangeState.Reset */ : fail(39313, {
                    state: e
                });
            }(t.targetChange.targetChangeType || "NO_CHANGE"), i = t.targetChange.targetIds || [], s = function __PRIVATE_fromBytes(e, t) {
                return e.useProto3Json ? (__PRIVATE_hardAssert(void 0 === t || "string" == typeof t, 58123), 
                ByteString.fromBase64String(t || "")) : (__PRIVATE_hardAssert(void 0 === t || 
                // Check if the value is an instance of both Buffer and Uint8Array,
                // despite the fact that Buffer extends Uint8Array. In some
                // environments, such as jsdom, the prototype chain of Buffer
                // does not indicate that it extends Uint8Array.
                t instanceof Buffer || t instanceof Uint8Array, 16193), ByteString.fromUint8Array(t || new Uint8Array));
            }(e, t.targetChange.resumeToken), o = t.targetChange.cause, _ = o && function __PRIVATE_fromRpcStatus(e) {
                const t = void 0 === e.code ? N.UNKNOWN : __PRIVATE_mapCodeFromRpcCode(e.code);
                return new FirestoreError(t, e.message || "");
            }(o);
            n = new __PRIVATE_WatchTargetChange(r, i, s, _ || null);
        } else if ("documentChange" in t) {
            t.documentChange;
            const r = t.documentChange;
            r.document, r.document.name, r.document.updateTime;
            const i = fromName(e, r.document.name), s = __PRIVATE_fromVersion(r.document.updateTime), o = r.document.createTime ? __PRIVATE_fromVersion(r.document.createTime) : SnapshotVersion.min(), _ = new ObjectValue({
                mapValue: {
                    fields: r.document.fields
                }
            }), a = MutableDocument.newFoundDocument(i, s, o, _), u = r.targetIds || [], c = r.removedTargetIds || [];
            n = new __PRIVATE_DocumentWatchChange(u, c, a.key, a);
        } else if ("documentDelete" in t) {
            t.documentDelete;
            const r = t.documentDelete;
            r.document;
            const i = fromName(e, r.document), s = r.readTime ? __PRIVATE_fromVersion(r.readTime) : SnapshotVersion.min(), o = MutableDocument.newNoDocument(i, s), _ = r.removedTargetIds || [];
            n = new __PRIVATE_DocumentWatchChange([], _, o.key, o);
        } else if ("documentRemove" in t) {
            t.documentRemove;
            const r = t.documentRemove;
            r.document;
            const i = fromName(e, r.document), s = r.removedTargetIds || [];
            n = new __PRIVATE_DocumentWatchChange([], s, i, null);
        } else {
            if (!("filter" in t)) return fail(11601, {
                Rt: t
            });
            {
                t.filter;
                const e = t.filter;
                e.targetId;
                const {count: r = 0, unchangedNames: i} = e, s = new ExistenceFilter(r, i), o = e.targetId;
                n = new __PRIVATE_ExistenceFilterChange(o, s);
            }
        }
        return n;
    }

    function __PRIVATE_toDocumentsTarget(e, t) {
        return {
            documents: [ __PRIVATE_toQueryPath(e, t.path) ]
        };
    }

    function __PRIVATE_toQueryTarget(e, t) {
        // Dissect the path into parent, collectionId, and optional key filter.
        const n = {
            structuredQuery: {}
        }, r = t.path;
        let i;
        null !== t.collectionGroup ? (i = r, n.structuredQuery.from = [ {
            collectionId: t.collectionGroup,
            allDescendants: true
        } ]) : (i = r.popLast(), n.structuredQuery.from = [ {
            collectionId: r.lastSegment()
        } ]), n.parent = __PRIVATE_toQueryPath(e, i);
        const s = function __PRIVATE_toFilters(e) {
            if (0 === e.length) return;
            return __PRIVATE_toFilter(CompositeFilter.create(e, "and" /* CompositeOperator.AND */));
        }(t.filters);
        s && (n.structuredQuery.where = s);
        const o = function __PRIVATE_toOrder(e) {
            if (0 === e.length) return;
            return e.map((e => 
            // visible for testing
            function __PRIVATE_toPropertyOrder(e) {
                return {
                    field: __PRIVATE_toFieldPathReference(e.field),
                    direction: __PRIVATE_toDirection(e.dir)
                };
            }(e)));
        }(t.orderBy);
        o && (n.structuredQuery.orderBy = o);
        const _ = __PRIVATE_toInt32Proto(e, t.limit);
        return null !== _ && (n.structuredQuery.limit = _), t.startAt && (n.structuredQuery.startAt = function __PRIVATE_toStartAtCursor(e) {
            return {
                before: e.inclusive,
                values: e.position
            };
        }(t.startAt)), t.endAt && (n.structuredQuery.endAt = function __PRIVATE_toEndAtCursor(e) {
            return {
                before: !e.inclusive,
                values: e.position
            };
        }(t.endAt)), {
            ft: n,
            parent: i
        };
    }

    function __PRIVATE_convertQueryTargetToQuery(e) {
        let t = __PRIVATE_fromQueryPath(e.parent);
        const n = e.structuredQuery, r = n.from ? n.from.length : 0;
        let i = null;
        if (r > 0) {
            __PRIVATE_hardAssert(1 === r, 65062);
            const e = n.from[0];
            e.allDescendants ? i = e.collectionId : t = t.child(e.collectionId);
        }
        let s = [];
        n.where && (s = function __PRIVATE_fromFilters(e) {
            const t = __PRIVATE_fromFilter(e);
            if (t instanceof CompositeFilter && __PRIVATE_compositeFilterIsFlatConjunction(t)) return t.getFilters();
            return [ t ];
        }(n.where));
        let o = [];
        n.orderBy && (o = function __PRIVATE_fromOrder(e) {
            return e.map((e => function __PRIVATE_fromPropertyOrder(e) {
                return new OrderBy(__PRIVATE_fromFieldPathReference(e.field), 
                // visible for testing
                function __PRIVATE_fromDirection(e) {
                    switch (e) {
                      case "ASCENDING":
                        return "asc" /* Direction.ASCENDING */;

                      case "DESCENDING":
                        return "desc" /* Direction.DESCENDING */;

                      default:
                        return;
                    }
                }
                // visible for testing
                (e.direction));
            }
            // visible for testing
            (e)));
        }(n.orderBy));
        let _ = null;
        n.limit && (_ = function __PRIVATE_fromInt32Proto(e) {
            let t;
            return t = "object" == typeof e ? e.value : e, __PRIVATE_isNullOrUndefined(t) ? null : t;
        }(n.limit));
        let a = null;
        n.startAt && (a = function __PRIVATE_fromStartAtCursor(e) {
            const t = !!e.before, n = e.values || [];
            return new Bound(n, t);
        }(n.startAt));
        let u = null;
        return n.endAt && (u = function __PRIVATE_fromEndAtCursor(e) {
            const t = !e.before, n = e.values || [];
            return new Bound(n, t);
        }
        // visible for testing
        (n.endAt)), __PRIVATE_newQuery(t, i, o, s, _, "F" /* LimitType.First */ , a, u);
    }

    function __PRIVATE_toListenRequestLabels(e, t) {
        const n = function __PRIVATE_toLabel(e) {
            switch (e) {
              case "TargetPurposeListen" /* TargetPurpose.Listen */ :
                return null;

              case "TargetPurposeExistenceFilterMismatch" /* TargetPurpose.ExistenceFilterMismatch */ :
                return "existence-filter-mismatch";

              case "TargetPurposeExistenceFilterMismatchBloom" /* TargetPurpose.ExistenceFilterMismatchBloom */ :
                return "existence-filter-mismatch-bloom";

              case "TargetPurposeLimboResolution" /* TargetPurpose.LimboResolution */ :
                return "limbo-document";

              default:
                return fail(28987, {
                    purpose: e
                });
            }
        }(t.purpose);
        return null == n ? null : {
            "goog-listen-tags": n
        };
    }

    function __PRIVATE_fromFilter(e) {
        return void 0 !== e.unaryFilter ? function __PRIVATE_fromUnaryFilter(e) {
            switch (e.unaryFilter.op) {
              case "IS_NAN":
                const t = __PRIVATE_fromFieldPathReference(e.unaryFilter.field);
                return FieldFilter.create(t, "==" /* Operator.EQUAL */ , {
                    doubleValue: NaN
                });

              case "IS_NULL":
                const n = __PRIVATE_fromFieldPathReference(e.unaryFilter.field);
                return FieldFilter.create(n, "==" /* Operator.EQUAL */ , {
                    nullValue: "NULL_VALUE"
                });

              case "IS_NOT_NAN":
                const r = __PRIVATE_fromFieldPathReference(e.unaryFilter.field);
                return FieldFilter.create(r, "!=" /* Operator.NOT_EQUAL */ , {
                    doubleValue: NaN
                });

              case "IS_NOT_NULL":
                const i = __PRIVATE_fromFieldPathReference(e.unaryFilter.field);
                return FieldFilter.create(i, "!=" /* Operator.NOT_EQUAL */ , {
                    nullValue: "NULL_VALUE"
                });

              case "OPERATOR_UNSPECIFIED":
                return fail(61313);

              default:
                return fail(60726);
            }
        }(e) : void 0 !== e.fieldFilter ? function __PRIVATE_fromFieldFilter(e) {
            return FieldFilter.create(__PRIVATE_fromFieldPathReference(e.fieldFilter.field), function __PRIVATE_fromOperatorName(e) {
                switch (e) {
                  case "EQUAL":
                    return "==" /* Operator.EQUAL */;

                  case "NOT_EQUAL":
                    return "!=" /* Operator.NOT_EQUAL */;

                  case "GREATER_THAN":
                    return ">" /* Operator.GREATER_THAN */;

                  case "GREATER_THAN_OR_EQUAL":
                    return ">=" /* Operator.GREATER_THAN_OR_EQUAL */;

                  case "LESS_THAN":
                    return "<" /* Operator.LESS_THAN */;

                  case "LESS_THAN_OR_EQUAL":
                    return "<=" /* Operator.LESS_THAN_OR_EQUAL */;

                  case "ARRAY_CONTAINS":
                    return "array-contains" /* Operator.ARRAY_CONTAINS */;

                  case "IN":
                    return "in" /* Operator.IN */;

                  case "NOT_IN":
                    return "not-in" /* Operator.NOT_IN */;

                  case "ARRAY_CONTAINS_ANY":
                    return "array-contains-any" /* Operator.ARRAY_CONTAINS_ANY */;

                  case "OPERATOR_UNSPECIFIED":
                    return fail(58110);

                  default:
                    return fail(50506);
                }
            }(e.fieldFilter.op), e.fieldFilter.value);
        }(e) : void 0 !== e.compositeFilter ? function __PRIVATE_fromCompositeFilter(e) {
            return CompositeFilter.create(e.compositeFilter.filters.map((e => __PRIVATE_fromFilter(e))), function __PRIVATE_fromCompositeOperatorName(e) {
                switch (e) {
                  case "AND":
                    return "and" /* CompositeOperator.AND */;

                  case "OR":
                    return "or" /* CompositeOperator.OR */;

                  default:
                    return fail(1026);
                }
            }(e.compositeFilter.op));
        }(e) : fail(30097, {
            filter: e
        });
    }

    function __PRIVATE_toDirection(e) {
        return bt[e];
    }

    function __PRIVATE_toOperatorName(e) {
        return Dt[e];
    }

    function __PRIVATE_toCompositeOperatorName(e) {
        return Ct[e];
    }

    function __PRIVATE_toFieldPathReference(e) {
        return {
            fieldPath: e.canonicalString()
        };
    }

    function __PRIVATE_fromFieldPathReference(e) {
        return FieldPath$1.fromServerFormat(e.fieldPath);
    }

    function __PRIVATE_toFilter(e) {
        return e instanceof FieldFilter ? function __PRIVATE_toUnaryOrFieldFilter(e) {
            if ("==" /* Operator.EQUAL */ === e.op) {
                if (__PRIVATE_isNanValue(e.value)) return {
                    unaryFilter: {
                        field: __PRIVATE_toFieldPathReference(e.field),
                        op: "IS_NAN"
                    }
                };
                if (__PRIVATE_isNullValue(e.value)) return {
                    unaryFilter: {
                        field: __PRIVATE_toFieldPathReference(e.field),
                        op: "IS_NULL"
                    }
                };
            } else if ("!=" /* Operator.NOT_EQUAL */ === e.op) {
                if (__PRIVATE_isNanValue(e.value)) return {
                    unaryFilter: {
                        field: __PRIVATE_toFieldPathReference(e.field),
                        op: "IS_NOT_NAN"
                    }
                };
                if (__PRIVATE_isNullValue(e.value)) return {
                    unaryFilter: {
                        field: __PRIVATE_toFieldPathReference(e.field),
                        op: "IS_NOT_NULL"
                    }
                };
            }
            return {
                fieldFilter: {
                    field: __PRIVATE_toFieldPathReference(e.field),
                    op: __PRIVATE_toOperatorName(e.op),
                    value: e.value
                }
            };
        }(e) : e instanceof CompositeFilter ? function __PRIVATE_toCompositeFilter(e) {
            const t = e.getFilters().map((e => __PRIVATE_toFilter(e)));
            if (1 === t.length) return t[0];
            return {
                compositeFilter: {
                    op: __PRIVATE_toCompositeOperatorName(e.op),
                    filters: t
                }
            };
        }(e) : fail(54877, {
            filter: e
        });
    }

    function __PRIVATE_isValidResourceName(e) {
        // Resource names have at least 4 components (project ID, database ID)
        return e.length >= 4 && "projects" === e.get(0) && "databases" === e.get(2);
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * An immutable set of metadata that the local store tracks for each target.
     */ class TargetData {
        constructor(
        /** The target being listened to. */
        e, 
        /**
         * The target ID to which the target corresponds; Assigned by the
         * LocalStore for user listens and by the SyncEngine for limbo watches.
         */
        t, 
        /** The purpose of the target. */
        n, 
        /**
         * The sequence number of the last transaction during which this target data
         * was modified.
         */
        r, 
        /** The latest snapshot version seen for this target. */
        i = SnapshotVersion.min()
        /**
         * The maximum snapshot version at which the associated view
         * contained no limbo documents.
         */ , s = SnapshotVersion.min()
        /**
         * An opaque, server-assigned token that allows watching a target to be
         * resumed after disconnecting without retransmitting all the data that
         * matches the target. The resume token essentially identifies a point in
         * time from which the server should resume sending results.
         */ , o = ByteString.EMPTY_BYTE_STRING
        /**
         * The number of documents that last matched the query at the resume token or
         * read time. Documents are counted only when making a listen request with
         * resume token or read time, otherwise, keep it null.
         */ , _ = null) {
            this.target = e, this.targetId = t, this.purpose = n, this.sequenceNumber = r, this.snapshotVersion = i, 
            this.lastLimboFreeSnapshotVersion = s, this.resumeToken = o, this.expectedCount = _;
        }
        /** Creates a new target data instance with an updated sequence number. */    withSequenceNumber(e) {
            return new TargetData(this.target, this.targetId, this.purpose, e, this.snapshotVersion, this.lastLimboFreeSnapshotVersion, this.resumeToken, this.expectedCount);
        }
        /**
         * Creates a new target data instance with an updated resume token and
         * snapshot version.
         */    withResumeToken(e, t) {
            return new TargetData(this.target, this.targetId, this.purpose, this.sequenceNumber, t, this.lastLimboFreeSnapshotVersion, e, 
            /* expectedCount= */ null);
        }
        /**
         * Creates a new target data instance with an updated expected count.
         */    withExpectedCount(e) {
            return new TargetData(this.target, this.targetId, this.purpose, this.sequenceNumber, this.snapshotVersion, this.lastLimboFreeSnapshotVersion, this.resumeToken, e);
        }
        /**
         * Creates a new target data instance with an updated last limbo free
         * snapshot version number.
         */    withLastLimboFreeSnapshotVersion(e) {
            return new TargetData(this.target, this.targetId, this.purpose, this.sequenceNumber, this.snapshotVersion, e, this.resumeToken, this.expectedCount);
        }
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /** Serializer for values stored in the LocalStore. */ class __PRIVATE_LocalSerializer {
        constructor(e) {
            this.yt = e;
        }
    }

    /**
     * Encodes a `BundledQuery` from bundle proto to a Query object.
     *
     * This reconstructs the original query used to build the bundle being loaded,
     * including features exists only in SDKs (for example: limit-to-last).
     */
    function __PRIVATE_fromBundledQuery(e) {
        const t = __PRIVATE_convertQueryTargetToQuery({
            parent: e.parent,
            structuredQuery: e.structuredQuery
        });
        return "LAST" === e.limitType ? __PRIVATE_queryWithLimit(t, t.limit, "L" /* LimitType.Last */) : t;
    }

    /**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * An in-memory implementation of IndexManager.
     */ class __PRIVATE_MemoryIndexManager {
        constructor() {
            this.Cn = new __PRIVATE_MemoryCollectionParentIndex;
        }
        addToCollectionParentIndex(e, t) {
            return this.Cn.add(t), PersistencePromise.resolve();
        }
        getCollectionParents(e, t) {
            return PersistencePromise.resolve(this.Cn.getEntries(t));
        }
        addFieldIndex(e, t) {
            // Field indices are not supported with memory persistence.
            return PersistencePromise.resolve();
        }
        deleteFieldIndex(e, t) {
            // Field indices are not supported with memory persistence.
            return PersistencePromise.resolve();
        }
        deleteAllFieldIndexes(e) {
            // Field indices are not supported with memory persistence.
            return PersistencePromise.resolve();
        }
        createTargetIndexes(e, t) {
            // Field indices are not supported with memory persistence.
            return PersistencePromise.resolve();
        }
        getDocumentsMatchingTarget(e, t) {
            // Field indices are not supported with memory persistence.
            return PersistencePromise.resolve(null);
        }
        getIndexType(e, t) {
            // Field indices are not supported with memory persistence.
            return PersistencePromise.resolve(0 /* IndexType.NONE */);
        }
        getFieldIndexes(e, t) {
            // Field indices are not supported with memory persistence.
            return PersistencePromise.resolve([]);
        }
        getNextCollectionGroupToUpdate(e) {
            // Field indices are not supported with memory persistence.
            return PersistencePromise.resolve(null);
        }
        getMinOffset(e, t) {
            return PersistencePromise.resolve(IndexOffset.min());
        }
        getMinOffsetFromCollectionGroup(e, t) {
            return PersistencePromise.resolve(IndexOffset.min());
        }
        updateCollectionGroup(e, t, n) {
            // Field indices are not supported with memory persistence.
            return PersistencePromise.resolve();
        }
        updateIndexEntries(e, t) {
            // Field indices are not supported with memory persistence.
            return PersistencePromise.resolve();
        }
    }

    /**
     * Internal implementation of the collection-parent index exposed by MemoryIndexManager.
     * Also used for in-memory caching by IndexedDbIndexManager and initial index population
     * in indexeddb_schema.ts
     */ class __PRIVATE_MemoryCollectionParentIndex {
        constructor() {
            this.index = {};
        }
        // Returns false if the entry already existed.
        add(e) {
            const t = e.lastSegment(), n = e.popLast(), r = this.index[t] || new SortedSet(ResourcePath.comparator), i = !r.has(n);
            return this.index[t] = r.add(n), i;
        }
        has(e) {
            const t = e.lastSegment(), n = e.popLast(), r = this.index[t];
            return r && r.has(n);
        }
        getEntries(e) {
            return (this.index[e] || new SortedSet(ResourcePath.comparator)).toArray();
        }
    }

    /**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */ const xt = {
        didRun: false,
        sequenceNumbersCollected: 0,
        targetsRemoved: 0,
        documentsRemoved: 0
    }, Ot = 41943040;

    class LruParams {
        static withCacheSize(e) {
            return new LruParams(e, LruParams.DEFAULT_COLLECTION_PERCENTILE, LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT);
        }
        constructor(
        // When we attempt to collect, we will only do so if the cache size is greater than this
        // threshold. Passing `COLLECTION_DISABLED` here will cause collection to always be skipped.
        e, 
        // The percentage of sequence numbers that we will attempt to collect
        t, 
        // A cap on the total number of sequence numbers that will be collected. This prevents
        // us from collecting a huge number of sequence numbers if the cache has grown very large.
        n) {
            this.cacheSizeCollectionThreshold = e, this.percentileToCollect = t, this.maximumSequenceNumbersToCollect = n;
        }
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /** A mutation queue for a specific user, backed by IndexedDB. */ LruParams.DEFAULT_COLLECTION_PERCENTILE = 10, 
    LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT = 1e3, LruParams.DEFAULT = new LruParams(Ot, LruParams.DEFAULT_COLLECTION_PERCENTILE, LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT), 
    LruParams.DISABLED = new LruParams(-1, 0, 0);

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /** Offset to ensure non-overlapping target ids. */
    /**
     * Generates monotonically increasing target IDs for sending targets to the
     * watch stream.
     *
     * The client constructs two generators, one for the target cache, and one for
     * for the sync engine (to generate limbo documents targets). These
     * generators produce non-overlapping IDs (by using even and odd IDs
     * respectively).
     *
     * By separating the target ID space, the query cache can generate target IDs
     * that persist across client restarts, while sync engine can independently
     * generate in-memory target IDs that are transient and can be reused after a
     * restart.
     */
    class __PRIVATE_TargetIdGenerator {
        constructor(e) {
            this.ar = e;
        }
        next() {
            return this.ar += 2, this.ar;
        }
        static ur() {
            // The target cache generator must return '2' in its first call to `next()`
            // as there is no differentiation in the protocol layer between an unset
            // number and the number '0'. If we were to sent a target with target ID
            // '0', the backend would consider it unset and replace it with its own ID.
            return new __PRIVATE_TargetIdGenerator(0);
        }
        static cr() {
            // Sync engine assigns target IDs for limbo document detection.
            return new __PRIVATE_TargetIdGenerator(-1);
        }
    }

    /**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */ const Nt = "LruGarbageCollector", Bt = 1048576;

    function __PRIVATE_bufferEntryComparator([e, t], [n, r]) {
        const i = __PRIVATE_primitiveComparator(e, n);
        return 0 === i ? __PRIVATE_primitiveComparator(t, r) : i;
    }

    /**
     * Used to calculate the nth sequence number. Keeps a rolling buffer of the
     * lowest n values passed to `addElement`, and finally reports the largest of
     * them in `maxValue`.
     */ class __PRIVATE_RollingSequenceNumberBuffer {
        constructor(e) {
            this.Ir = e, this.buffer = new SortedSet(__PRIVATE_bufferEntryComparator), this.Er = 0;
        }
        dr() {
            return ++this.Er;
        }
        Ar(e) {
            const t = [ e, this.dr() ];
            if (this.buffer.size < this.Ir) this.buffer = this.buffer.add(t); else {
                const e = this.buffer.last();
                __PRIVATE_bufferEntryComparator(t, e) < 0 && (this.buffer = this.buffer.delete(e).add(t));
            }
        }
        get maxValue() {
            // Guaranteed to be non-empty. If we decide we are not collecting any
            // sequence numbers, nthSequenceNumber below short-circuits. If we have
            // decided that we are collecting n sequence numbers, it's because n is some
            // percentage of the existing sequence numbers. That means we should never
            // be in a situation where we are collecting sequence numbers but don't
            // actually have any.
            return this.buffer.last()[0];
        }
    }

    /**
     * This class is responsible for the scheduling of LRU garbage collection. It handles checking
     * whether or not GC is enabled, as well as which delay to use before the next run.
     */ class __PRIVATE_LruScheduler {
        constructor(e, t, n) {
            this.garbageCollector = e, this.asyncQueue = t, this.localStore = n, this.Rr = null;
        }
        start() {
            -1 !== this.garbageCollector.params.cacheSizeCollectionThreshold && this.Vr(6e4);
        }
        stop() {
            this.Rr && (this.Rr.cancel(), this.Rr = null);
        }
        get started() {
            return null !== this.Rr;
        }
        Vr(e) {
            __PRIVATE_logDebug(Nt, `Garbage collection scheduled in ${e}ms`), this.Rr = this.asyncQueue.enqueueAfterDelay("lru_garbage_collection" /* TimerId.LruGarbageCollection */ , e, (async () => {
                this.Rr = null;
                try {
                    await this.localStore.collectGarbage(this.garbageCollector);
                } catch (e) {
                    __PRIVATE_isIndexedDbTransactionError(e) ? __PRIVATE_logDebug(Nt, "Ignoring IndexedDB error during garbage collection: ", e) : await __PRIVATE_ignoreIfPrimaryLeaseLoss(e);
                }
                await this.Vr(3e5);
            }));
        }
    }

    /**
     * Implements the steps for LRU garbage collection.
     */ class __PRIVATE_LruGarbageCollectorImpl {
        constructor(e, t) {
            this.mr = e, this.params = t;
        }
        calculateTargetCount(e, t) {
            return this.mr.gr(e).next((e => Math.floor(t / 100 * e)));
        }
        nthSequenceNumber(e, t) {
            if (0 === t) return PersistencePromise.resolve(__PRIVATE_ListenSequence.ce);
            const n = new __PRIVATE_RollingSequenceNumberBuffer(t);
            return this.mr.forEachTarget(e, (e => n.Ar(e.sequenceNumber))).next((() => this.mr.pr(e, (e => n.Ar(e))))).next((() => n.maxValue));
        }
        removeTargets(e, t, n) {
            return this.mr.removeTargets(e, t, n);
        }
        removeOrphanedDocuments(e, t) {
            return this.mr.removeOrphanedDocuments(e, t);
        }
        collect(e, t) {
            return -1 === this.params.cacheSizeCollectionThreshold ? (__PRIVATE_logDebug("LruGarbageCollector", "Garbage collection skipped; disabled"), 
            PersistencePromise.resolve(xt)) : this.getCacheSize(e).next((n => n < this.params.cacheSizeCollectionThreshold ? (__PRIVATE_logDebug("LruGarbageCollector", `Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`), 
            xt) : this.yr(e, t)));
        }
        getCacheSize(e) {
            return this.mr.getCacheSize(e);
        }
        yr(e, t) {
            let n, r, i, s, o, _, u;
            const c = Date.now();
            return this.calculateTargetCount(e, this.params.percentileToCollect).next((t => (
            // Cap at the configured max
            t > this.params.maximumSequenceNumbersToCollect ? (__PRIVATE_logDebug("LruGarbageCollector", `Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`), 
            r = this.params.maximumSequenceNumbersToCollect) : r = t, s = Date.now(), this.nthSequenceNumber(e, r)))).next((r => (n = r, 
            o = Date.now(), this.removeTargets(e, n, t)))).next((t => (i = t, _ = Date.now(), 
            this.removeOrphanedDocuments(e, n)))).next((e => {
                if (u = Date.now(), __PRIVATE_getLogLevel() <= LogLevel.DEBUG) {
                    __PRIVATE_logDebug("LruGarbageCollector", `LRU Garbage Collection\n\tCounted targets in ${s - c}ms\n\tDetermined least recently used ${r} in ` + (o - s) + "ms\n" + `\tRemoved ${i} targets in ` + (_ - o) + "ms\n" + `\tRemoved ${e} documents in ` + (u - _) + "ms\n" + `Total Duration: ${u - c}ms`);
                }
                return PersistencePromise.resolve({
                    didRun: true,
                    sequenceNumbersCollected: r,
                    targetsRemoved: i,
                    documentsRemoved: e
                });
            }));
        }
    }

    function __PRIVATE_newLruGarbageCollector(e, t) {
        return new __PRIVATE_LruGarbageCollectorImpl(e, t);
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * An in-memory buffer of entries to be written to a RemoteDocumentCache.
     * It can be used to batch up a set of changes to be written to the cache, but
     * additionally supports reading entries back with the `getEntry()` method,
     * falling back to the underlying RemoteDocumentCache if no entry is
     * buffered.
     *
     * Entries added to the cache *must* be read first. This is to facilitate
     * calculating the size delta of the pending changes.
     *
     * PORTING NOTE: This class was implemented then removed from other platforms.
     * If byte-counting ends up being needed on the other platforms, consider
     * porting this class as part of that implementation work.
     */ class RemoteDocumentChangeBuffer {
        constructor() {
            // A mapping of document key to the new cache entry that should be written.
            this.changes = new ObjectMap((e => e.toString()), ((e, t) => e.isEqual(t))), this.changesApplied = false;
        }
        /**
         * Buffers a `RemoteDocumentCache.addEntry()` call.
         *
         * You can only modify documents that have already been retrieved via
         * `getEntry()/getEntries()` (enforced via IndexedDbs `apply()`).
         */    addEntry(e) {
            this.assertNotApplied(), this.changes.set(e.key, e);
        }
        /**
         * Buffers a `RemoteDocumentCache.removeEntry()` call.
         *
         * You can only remove documents that have already been retrieved via
         * `getEntry()/getEntries()` (enforced via IndexedDbs `apply()`).
         */    removeEntry(e, t) {
            this.assertNotApplied(), this.changes.set(e, MutableDocument.newInvalidDocument(e).setReadTime(t));
        }
        /**
         * Looks up an entry in the cache. The buffered changes will first be checked,
         * and if no buffered change applies, this will forward to
         * `RemoteDocumentCache.getEntry()`.
         *
         * @param transaction - The transaction in which to perform any persistence
         *     operations.
         * @param documentKey - The key of the entry to look up.
         * @returns The cached document or an invalid document if we have nothing
         * cached.
         */    getEntry(e, t) {
            this.assertNotApplied();
            const n = this.changes.get(t);
            return void 0 !== n ? PersistencePromise.resolve(n) : this.getFromCache(e, t);
        }
        /**
         * Looks up several entries in the cache, forwarding to
         * `RemoteDocumentCache.getEntry()`.
         *
         * @param transaction - The transaction in which to perform any persistence
         *     operations.
         * @param documentKeys - The keys of the entries to look up.
         * @returns A map of cached documents, indexed by key. If an entry cannot be
         *     found, the corresponding key will be mapped to an invalid document.
         */    getEntries(e, t) {
            return this.getAllFromCache(e, t);
        }
        /**
         * Applies buffered changes to the underlying RemoteDocumentCache, using
         * the provided transaction.
         */    apply(e) {
            return this.assertNotApplied(), this.changesApplied = true, this.applyChanges(e);
        }
        /** Helper to assert this.changes is not null  */    assertNotApplied() {}
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * Schema Version for the Web client:
     * 1.  Initial version including Mutation Queue, Query Cache, and Remote
     *     Document Cache
     * 2.  Used to ensure a targetGlobal object exists and add targetCount to it. No
     *     longer required because migration 3 unconditionally clears it.
     * 3.  Dropped and re-created Query Cache to deal with cache corruption related
     *     to limbo resolution. Addresses
     *     https://github.com/firebase/firebase-ios-sdk/issues/1548
     * 4.  Multi-Tab Support.
     * 5.  Removal of held write acks.
     * 6.  Create document global for tracking document cache size.
     * 7.  Ensure every cached document has a sentinel row with a sequence number.
     * 8.  Add collection-parent index for Collection Group queries.
     * 9.  Change RemoteDocumentChanges store to be keyed by readTime rather than
     *     an auto-incrementing ID. This is required for Index-Free queries.
     * 10. Rewrite the canonical IDs to the explicit Protobuf-based format.
     * 11. Add bundles and named_queries for bundle support.
     * 12. Add document overlays.
     * 13. Rewrite the keys of the remote document cache to allow for efficient
     *     document lookup via `getAll()`.
     * 14. Add overlays.
     * 15. Add indexing support.
     * 16. Parse timestamp strings before creating index entries.
     * 17. TODO(tomandersen)
     * 18. Encode key safe representations of IndexEntry in DbIndexEntryStore.
     */
    /**
     * @license
     * Copyright 2022 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * Represents a local view (overlay) of a document, and the fields that are
     * locally mutated.
     */
    class OverlayedDocument {
        constructor(e, 
        /**
         * The fields that are locally mutated by patch mutations.
         *
         * If the overlayed	document is from set or delete mutations, this is `null`.
         * If there is no overlay (mutation) for the document, this is an empty `FieldMask`.
         */
        t) {
            this.overlayedDocument = e, this.mutatedFields = t;
        }
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * A readonly view of the local state of all documents we're tracking (i.e. we
     * have a cached version in remoteDocumentCache or local mutations for the
     * document). The view is computed by applying the mutations in the
     * MutationQueue to the RemoteDocumentCache.
     */ class LocalDocumentsView {
        constructor(e, t, n, r) {
            this.remoteDocumentCache = e, this.mutationQueue = t, this.documentOverlayCache = n, 
            this.indexManager = r;
        }
        /**
         * Get the local view of the document identified by `key`.
         *
         * @returns Local view of the document or null if we don't have any cached
         * state for it.
         */    getDocument(e, t) {
            let n = null;
            return this.documentOverlayCache.getOverlay(e, t).next((r => (n = r, this.remoteDocumentCache.getEntry(e, t)))).next((e => (null !== n && __PRIVATE_mutationApplyToLocalView(n.mutation, e, FieldMask.empty(), Timestamp.now()), 
            e)));
        }
        /**
         * Gets the local view of the documents identified by `keys`.
         *
         * If we don't have cached state for a document in `keys`, a NoDocument will
         * be stored for that key in the resulting set.
         */    getDocuments(e, t) {
            return this.remoteDocumentCache.getEntries(e, t).next((t => this.getLocalViewOfDocuments(e, t, __PRIVATE_documentKeySet()).next((() => t))));
        }
        /**
         * Similar to `getDocuments`, but creates the local view from the given
         * `baseDocs` without retrieving documents from the local store.
         *
         * @param transaction - The transaction this operation is scoped to.
         * @param docs - The documents to apply local mutations to get the local views.
         * @param existenceStateChanged - The set of document keys whose existence state
         *   is changed. This is useful to determine if some documents overlay needs
         *   to be recalculated.
         */    getLocalViewOfDocuments(e, t, n = __PRIVATE_documentKeySet()) {
            const r = __PRIVATE_newOverlayMap();
            return this.populateOverlays(e, r, t).next((() => this.computeViews(e, t, r, n).next((e => {
                let t = documentMap();
                return e.forEach(((e, n) => {
                    t = t.insert(e, n.overlayedDocument);
                })), t;
            }))));
        }
        /**
         * Gets the overlayed documents for the given document map, which will include
         * the local view of those documents and a `FieldMask` indicating which fields
         * are mutated locally, `null` if overlay is a Set or Delete mutation.
         */    getOverlayedDocuments(e, t) {
            const n = __PRIVATE_newOverlayMap();
            return this.populateOverlays(e, n, t).next((() => this.computeViews(e, t, n, __PRIVATE_documentKeySet())));
        }
        /**
         * Fetches the overlays for {@code docs} and adds them to provided overlay map
         * if the map does not already contain an entry for the given document key.
         */    populateOverlays(e, t, n) {
            const r = [];
            return n.forEach((e => {
                t.has(e) || r.push(e);
            })), this.documentOverlayCache.getOverlays(e, r).next((e => {
                e.forEach(((e, n) => {
                    t.set(e, n);
                }));
            }));
        }
        /**
         * Computes the local view for the given documents.
         *
         * @param docs - The documents to compute views for. It also has the base
         *   version of the documents.
         * @param overlays - The overlays that need to be applied to the given base
         *   version of the documents.
         * @param existenceStateChanged - A set of documents whose existence states
         *   might have changed. This is used to determine if we need to re-calculate
         *   overlays from mutation queues.
         * @return A map represents the local documents view.
         */    computeViews(e, t, n, r) {
            let i = __PRIVATE_mutableDocumentMap();
            const s = __PRIVATE_newDocumentKeyMap(), o = function __PRIVATE_newOverlayedDocumentMap() {
                return __PRIVATE_newDocumentKeyMap();
            }();
            return t.forEach(((e, t) => {
                const o = n.get(t.key);
                // Recalculate an overlay if the document's existence state changed due to
                // a remote event *and* the overlay is a PatchMutation. This is because
                // document existence state can change if some patch mutation's
                // preconditions are met.
                // NOTE: we recalculate when `overlay` is undefined as well, because there
                // might be a patch mutation whose precondition does not match before the
                // change (hence overlay is undefined), but would now match.
                            r.has(t.key) && (void 0 === o || o.mutation instanceof __PRIVATE_PatchMutation) ? i = i.insert(t.key, t) : void 0 !== o ? (s.set(t.key, o.mutation.getFieldMask()), 
                __PRIVATE_mutationApplyToLocalView(o.mutation, t, o.mutation.getFieldMask(), Timestamp.now())) : 
                // no overlay exists
                // Using EMPTY to indicate there is no overlay for the document.
                s.set(t.key, FieldMask.empty());
            })), this.recalculateAndSaveOverlays(e, i).next((e => (e.forEach(((e, t) => s.set(e, t))), 
            t.forEach(((e, t) => o.set(e, new OverlayedDocument(t, s.get(e) ?? null)))), o)));
        }
        recalculateAndSaveOverlays(e, t) {
            const n = __PRIVATE_newDocumentKeyMap();
            // A reverse lookup map from batch id to the documents within that batch.
                    let r = new SortedMap(((e, t) => e - t)), i = __PRIVATE_documentKeySet();
            return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e, t).next((e => {
                for (const i of e) i.keys().forEach((e => {
                    const s = t.get(e);
                    if (null === s) return;
                    let o = n.get(e) || FieldMask.empty();
                    o = i.applyToLocalView(s, o), n.set(e, o);
                    const _ = (r.get(i.batchId) || __PRIVATE_documentKeySet()).add(e);
                    r = r.insert(i.batchId, _);
                }));
            })).next((() => {
                const s = [], o = r.getReverseIterator();
                // Iterate in descending order of batch IDs, and skip documents that are
                // already saved.
                            for (;o.hasNext(); ) {
                    const r = o.getNext(), _ = r.key, a = r.value, u = __PRIVATE_newMutationMap();
                    a.forEach((e => {
                        if (!i.has(e)) {
                            const r = __PRIVATE_calculateOverlayMutation(t.get(e), n.get(e));
                            null !== r && u.set(e, r), i = i.add(e);
                        }
                    })), s.push(this.documentOverlayCache.saveOverlays(e, _, u));
                }
                return PersistencePromise.waitFor(s);
            })).next((() => n));
        }
        /**
         * Recalculates overlays by reading the documents from remote document cache
         * first, and saves them after they are calculated.
         */    recalculateAndSaveOverlaysForDocumentKeys(e, t) {
            return this.remoteDocumentCache.getEntries(e, t).next((t => this.recalculateAndSaveOverlays(e, t)));
        }
        /**
         * Performs a query against the local view of all documents.
         *
         * @param transaction - The persistence transaction.
         * @param query - The query to match documents against.
         * @param offset - Read time and key to start scanning by (exclusive).
         * @param context - A optional tracker to keep a record of important details
         *   during database local query execution.
         */    getDocumentsMatchingQuery(e, t, n, r) {
            /**
     * Returns whether the query matches a single document by path (rather than a
     * collection).
     */
            return function __PRIVATE_isDocumentQuery$1(e) {
                return DocumentKey.isDocumentKey(e.path) && null === e.collectionGroup && 0 === e.filters.length;
            }(t) ? this.getDocumentsMatchingDocumentQuery(e, t.path) : __PRIVATE_isCollectionGroupQuery(t) ? this.getDocumentsMatchingCollectionGroupQuery(e, t, n, r) : this.getDocumentsMatchingCollectionQuery(e, t, n, r);
        }
        /**
         * Given a collection group, returns the next documents that follow the provided offset, along
         * with an updated batch ID.
         *
         * <p>The documents returned by this method are ordered by remote version from the provided
         * offset. If there are no more remote documents after the provided offset, documents with
         * mutations in order of batch id from the offset are returned. Since all documents in a batch are
         * returned together, the total number of documents returned can exceed {@code count}.
         *
         * @param transaction
         * @param collectionGroup The collection group for the documents.
         * @param offset The offset to index into.
         * @param count The number of documents to return
         * @return A LocalWriteResult with the documents that follow the provided offset and the last processed batch id.
         */    getNextDocuments(e, t, n, r) {
            return this.remoteDocumentCache.getAllFromCollectionGroup(e, t, n, r).next((i => {
                const s = r - i.size > 0 ? this.documentOverlayCache.getOverlaysForCollectionGroup(e, t, n.largestBatchId, r - i.size) : PersistencePromise.resolve(__PRIVATE_newOverlayMap());
                // The callsite will use the largest batch ID together with the latest read time to create
                // a new index offset. Since we only process batch IDs if all remote documents have been read,
                // no overlay will increase the overall read time. This is why we only need to special case
                // the batch id.
                            let o = U, _ = i;
                return s.next((t => PersistencePromise.forEach(t, ((t, n) => (o < n.largestBatchId && (o = n.largestBatchId), 
                i.get(t) ? PersistencePromise.resolve() : this.remoteDocumentCache.getEntry(e, t).next((e => {
                    _ = _.insert(t, e);
                }))))).next((() => this.populateOverlays(e, t, i))).next((() => this.computeViews(e, _, t, __PRIVATE_documentKeySet()))).next((e => ({
                    batchId: o,
                    changes: __PRIVATE_convertOverlayedDocumentMapToDocumentMap(e)
                })))));
            }));
        }
        getDocumentsMatchingDocumentQuery(e, t) {
            // Just do a simple document lookup.
            return this.getDocument(e, new DocumentKey(t)).next((e => {
                let t = documentMap();
                return e.isFoundDocument() && (t = t.insert(e.key, e)), t;
            }));
        }
        getDocumentsMatchingCollectionGroupQuery(e, t, n, r) {
            const i = t.collectionGroup;
            let s = documentMap();
            return this.indexManager.getCollectionParents(e, i).next((o => PersistencePromise.forEach(o, (o => {
                const _ = function __PRIVATE_asCollectionQueryAtPath(e, t) {
                    return new __PRIVATE_QueryImpl(t, 
                    /*collectionGroup=*/ null, e.explicitOrderBy.slice(), e.filters.slice(), e.limit, e.limitType, e.startAt, e.endAt);
                }(t, o.child(i));
                return this.getDocumentsMatchingCollectionQuery(e, _, n, r).next((e => {
                    e.forEach(((e, t) => {
                        s = s.insert(e, t);
                    }));
                }));
            })).next((() => s))));
        }
        getDocumentsMatchingCollectionQuery(e, t, n, r) {
            // Query the remote documents and overlay mutations.
            let i;
            return this.documentOverlayCache.getOverlaysForCollection(e, t.path, n.largestBatchId).next((s => (i = s, 
            this.remoteDocumentCache.getDocumentsMatchingQuery(e, t, n, i, r)))).next((e => {
                // As documents might match the query because of their overlay we need to
                // include documents for all overlays in the initial document set.
                i.forEach(((t, n) => {
                    const r = n.getKey();
                    null === e.get(r) && (e = e.insert(r, MutableDocument.newInvalidDocument(r)));
                }));
                // Apply the overlays and match against the query.
                let n = documentMap();
                return e.forEach(((e, r) => {
                    const s = i.get(e);
                    void 0 !== s && __PRIVATE_mutationApplyToLocalView(s.mutation, r, FieldMask.empty(), Timestamp.now()), 
                    // Finally, insert the documents that still match the query
                    __PRIVATE_queryMatches(t, r) && (n = n.insert(e, r));
                })), n;
            }));
        }
    }

    /**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */ class __PRIVATE_MemoryBundleCache {
        constructor(e) {
            this.serializer = e, this.Lr = new Map, this.kr = new Map;
        }
        getBundleMetadata(e, t) {
            return PersistencePromise.resolve(this.Lr.get(t));
        }
        saveBundleMetadata(e, t) {
            return this.Lr.set(t.id, 
            /** Decodes a BundleMetadata proto into a BundleMetadata object. */
            function __PRIVATE_fromBundleMetadata(e) {
                return {
                    id: e.id,
                    version: e.version,
                    createTime: __PRIVATE_fromVersion(e.createTime)
                };
            }(t)), PersistencePromise.resolve();
        }
        getNamedQuery(e, t) {
            return PersistencePromise.resolve(this.kr.get(t));
        }
        saveNamedQuery(e, t) {
            return this.kr.set(t.name, function __PRIVATE_fromProtoNamedQuery(e) {
                return {
                    name: e.name,
                    query: __PRIVATE_fromBundledQuery(e.bundledQuery),
                    readTime: __PRIVATE_fromVersion(e.readTime)
                };
            }(t)), PersistencePromise.resolve();
        }
    }

    /**
     * @license
     * Copyright 2022 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * An in-memory implementation of DocumentOverlayCache.
     */ class __PRIVATE_MemoryDocumentOverlayCache {
        constructor() {
            // A map sorted by DocumentKey, whose value is a pair of the largest batch id
            // for the overlay and the overlay itself.
            this.overlays = new SortedMap(DocumentKey.comparator), this.qr = new Map;
        }
        getOverlay(e, t) {
            return PersistencePromise.resolve(this.overlays.get(t));
        }
        getOverlays(e, t) {
            const n = __PRIVATE_newOverlayMap();
            return PersistencePromise.forEach(t, (t => this.getOverlay(e, t).next((e => {
                null !== e && n.set(t, e);
            })))).next((() => n));
        }
        saveOverlays(e, t, n) {
            return n.forEach(((n, r) => {
                this.St(e, t, r);
            })), PersistencePromise.resolve();
        }
        removeOverlaysForBatchId(e, t, n) {
            const r = this.qr.get(n);
            return void 0 !== r && (r.forEach((e => this.overlays = this.overlays.remove(e))), 
            this.qr.delete(n)), PersistencePromise.resolve();
        }
        getOverlaysForCollection(e, t, n) {
            const r = __PRIVATE_newOverlayMap(), i = t.length + 1, s = new DocumentKey(t.child("")), o = this.overlays.getIteratorFrom(s);
            for (;o.hasNext(); ) {
                const e = o.getNext().value, s = e.getKey();
                if (!t.isPrefixOf(s.path)) break;
                // Documents from sub-collections
                            s.path.length === i && (e.largestBatchId > n && r.set(e.getKey(), e));
            }
            return PersistencePromise.resolve(r);
        }
        getOverlaysForCollectionGroup(e, t, n, r) {
            let i = new SortedMap(((e, t) => e - t));
            const s = this.overlays.getIterator();
            for (;s.hasNext(); ) {
                const e = s.getNext().value;
                if (e.getKey().getCollectionGroup() === t && e.largestBatchId > n) {
                    let t = i.get(e.largestBatchId);
                    null === t && (t = __PRIVATE_newOverlayMap(), i = i.insert(e.largestBatchId, t)), 
                    t.set(e.getKey(), e);
                }
            }
            const o = __PRIVATE_newOverlayMap(), _ = i.getIterator();
            for (;_.hasNext(); ) {
                if (_.getNext().value.forEach(((e, t) => o.set(e, t))), o.size() >= r) break;
            }
            return PersistencePromise.resolve(o);
        }
        St(e, t, n) {
            // Remove the association of the overlay to its batch id.
            const r = this.overlays.get(n.key);
            if (null !== r) {
                const e = this.qr.get(r.largestBatchId).delete(n.key);
                this.qr.set(r.largestBatchId, e);
            }
            this.overlays = this.overlays.insert(n.key, new Overlay(t, n));
            // Create the association of this overlay to the given largestBatchId.
            let i = this.qr.get(t);
            void 0 === i && (i = __PRIVATE_documentKeySet(), this.qr.set(t, i)), this.qr.set(t, i.add(n.key));
        }
    }

    /**
     * @license
     * Copyright 2024 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */ class __PRIVATE_MemoryGlobalsCache {
        constructor() {
            this.sessionToken = ByteString.EMPTY_BYTE_STRING;
        }
        getSessionToken(e) {
            return PersistencePromise.resolve(this.sessionToken);
        }
        setSessionToken(e, t) {
            return this.sessionToken = t, PersistencePromise.resolve();
        }
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * A collection of references to a document from some kind of numbered entity
     * (either a target ID or batch ID). As references are added to or removed from
     * the set corresponding events are emitted to a registered garbage collector.
     *
     * Each reference is represented by a DocumentReference object. Each of them
     * contains enough information to uniquely identify the reference. They are all
     * stored primarily in a set sorted by key. A document is considered garbage if
     * there's no references in that set (this can be efficiently checked thanks to
     * sorting by key).
     *
     * ReferenceSet also keeps a secondary set that contains references sorted by
     * IDs. This one is used to efficiently implement removal of all references by
     * some target ID.
     */ class __PRIVATE_ReferenceSet {
        constructor() {
            // A set of outstanding references to a document sorted by key.
            this.Qr = new SortedSet(__PRIVATE_DocReference.$r), 
            // A set of outstanding references to a document sorted by target id.
            this.Ur = new SortedSet(__PRIVATE_DocReference.Kr);
        }
        /** Returns true if the reference set contains no references. */    isEmpty() {
            return this.Qr.isEmpty();
        }
        /** Adds a reference to the given document key for the given ID. */    addReference(e, t) {
            const n = new __PRIVATE_DocReference(e, t);
            this.Qr = this.Qr.add(n), this.Ur = this.Ur.add(n);
        }
        /** Add references to the given document keys for the given ID. */    Wr(e, t) {
            e.forEach((e => this.addReference(e, t)));
        }
        /**
         * Removes a reference to the given document key for the given
         * ID.
         */    removeReference(e, t) {
            this.Gr(new __PRIVATE_DocReference(e, t));
        }
        zr(e, t) {
            e.forEach((e => this.removeReference(e, t)));
        }
        /**
         * Clears all references with a given ID. Calls removeRef() for each key
         * removed.
         */    jr(e) {
            const t = new DocumentKey(new ResourcePath([])), n = new __PRIVATE_DocReference(t, e), r = new __PRIVATE_DocReference(t, e + 1), i = [];
            return this.Ur.forEachInRange([ n, r ], (e => {
                this.Gr(e), i.push(e.key);
            })), i;
        }
        Jr() {
            this.Qr.forEach((e => this.Gr(e)));
        }
        Gr(e) {
            this.Qr = this.Qr.delete(e), this.Ur = this.Ur.delete(e);
        }
        Hr(e) {
            const t = new DocumentKey(new ResourcePath([])), n = new __PRIVATE_DocReference(t, e), r = new __PRIVATE_DocReference(t, e + 1);
            let i = __PRIVATE_documentKeySet();
            return this.Ur.forEachInRange([ n, r ], (e => {
                i = i.add(e.key);
            })), i;
        }
        containsKey(e) {
            const t = new __PRIVATE_DocReference(e, 0), n = this.Qr.firstAfterOrEqual(t);
            return null !== n && e.isEqual(n.key);
        }
    }

    class __PRIVATE_DocReference {
        constructor(e, t) {
            this.key = e, this.Yr = t;
        }
        /** Compare by key then by ID */    static $r(e, t) {
            return DocumentKey.comparator(e.key, t.key) || __PRIVATE_primitiveComparator(e.Yr, t.Yr);
        }
        /** Compare by ID then by key */    static Kr(e, t) {
            return __PRIVATE_primitiveComparator(e.Yr, t.Yr) || DocumentKey.comparator(e.key, t.key);
        }
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */ class __PRIVATE_MemoryMutationQueue {
        constructor(e, t) {
            this.indexManager = e, this.referenceDelegate = t, 
            /**
             * The set of all mutations that have been sent but not yet been applied to
             * the backend.
             */
            this.mutationQueue = [], 
            /** Next value to use when assigning sequential IDs to each mutation batch. */
            this.tr = 1, 
            /** An ordered mapping between documents and the mutations batch IDs. */
            this.Zr = new SortedSet(__PRIVATE_DocReference.$r);
        }
        checkEmpty(e) {
            return PersistencePromise.resolve(0 === this.mutationQueue.length);
        }
        addMutationBatch(e, t, n, r) {
            const i = this.tr;
            this.tr++, this.mutationQueue.length > 0 && this.mutationQueue[this.mutationQueue.length - 1];
            const s = new MutationBatch(i, t, n, r);
            this.mutationQueue.push(s);
            // Track references by document key and index collection parents.
            for (const t of r) this.Zr = this.Zr.add(new __PRIVATE_DocReference(t.key, i)), 
            this.indexManager.addToCollectionParentIndex(e, t.key.path.popLast());
            return PersistencePromise.resolve(s);
        }
        lookupMutationBatch(e, t) {
            return PersistencePromise.resolve(this.Xr(t));
        }
        getNextMutationBatchAfterBatchId(e, t) {
            const n = t + 1, r = this.ei(n), i = r < 0 ? 0 : r;
            // The requested batchId may still be out of range so normalize it to the
            // start of the queue.
                    return PersistencePromise.resolve(this.mutationQueue.length > i ? this.mutationQueue[i] : null);
        }
        getHighestUnacknowledgedBatchId() {
            return PersistencePromise.resolve(0 === this.mutationQueue.length ? j : this.tr - 1);
        }
        getAllMutationBatches(e) {
            return PersistencePromise.resolve(this.mutationQueue.slice());
        }
        getAllMutationBatchesAffectingDocumentKey(e, t) {
            const n = new __PRIVATE_DocReference(t, 0), r = new __PRIVATE_DocReference(t, Number.POSITIVE_INFINITY), i = [];
            return this.Zr.forEachInRange([ n, r ], (e => {
                const t = this.Xr(e.Yr);
                i.push(t);
            })), PersistencePromise.resolve(i);
        }
        getAllMutationBatchesAffectingDocumentKeys(e, t) {
            let n = new SortedSet(__PRIVATE_primitiveComparator);
            return t.forEach((e => {
                const t = new __PRIVATE_DocReference(e, 0), r = new __PRIVATE_DocReference(e, Number.POSITIVE_INFINITY);
                this.Zr.forEachInRange([ t, r ], (e => {
                    n = n.add(e.Yr);
                }));
            })), PersistencePromise.resolve(this.ti(n));
        }
        getAllMutationBatchesAffectingQuery(e, t) {
            // Use the query path as a prefix for testing if a document matches the
            // query.
            const n = t.path, r = n.length + 1;
            // Construct a document reference for actually scanning the index. Unlike
            // the prefix the document key in this reference must have an even number of
            // segments. The empty segment can be used a suffix of the query path
            // because it precedes all other segments in an ordered traversal.
            let i = n;
            DocumentKey.isDocumentKey(i) || (i = i.child(""));
            const s = new __PRIVATE_DocReference(new DocumentKey(i), 0);
            // Find unique batchIDs referenced by all documents potentially matching the
            // query.
                    let o = new SortedSet(__PRIVATE_primitiveComparator);
            return this.Zr.forEachWhile((e => {
                const t = e.key.path;
                return !!n.isPrefixOf(t) && (
                // Rows with document keys more than one segment longer than the query
                // path can't be matches. For example, a query on 'rooms' can't match
                // the document /rooms/abc/messages/xyx.
                // TODO(mcg): we'll need a different scanner when we implement
                // ancestor queries.
                t.length === r && (o = o.add(e.Yr)), true);
            }), s), PersistencePromise.resolve(this.ti(o));
        }
        ti(e) {
            // Construct an array of matching batches, sorted by batchID to ensure that
            // multiple mutations affecting the same document key are applied in order.
            const t = [];
            return e.forEach((e => {
                const n = this.Xr(e);
                null !== n && t.push(n);
            })), t;
        }
        removeMutationBatch(e, t) {
            __PRIVATE_hardAssert(0 === this.ni(t.batchId, "removed"), 55003), this.mutationQueue.shift();
            let n = this.Zr;
            return PersistencePromise.forEach(t.mutations, (r => {
                const i = new __PRIVATE_DocReference(r.key, t.batchId);
                return n = n.delete(i), this.referenceDelegate.markPotentiallyOrphaned(e, r.key);
            })).next((() => {
                this.Zr = n;
            }));
        }
        ir(e) {
            // No-op since the memory mutation queue does not maintain a separate cache.
        }
        containsKey(e, t) {
            const n = new __PRIVATE_DocReference(t, 0), r = this.Zr.firstAfterOrEqual(n);
            return PersistencePromise.resolve(t.isEqual(r && r.key));
        }
        performConsistencyCheck(e) {
            return this.mutationQueue.length, PersistencePromise.resolve();
        }
        /**
         * Finds the index of the given batchId in the mutation queue and asserts that
         * the resulting index is within the bounds of the queue.
         *
         * @param batchId - The batchId to search for
         * @param action - A description of what the caller is doing, phrased in passive
         * form (e.g. "acknowledged" in a routine that acknowledges batches).
         */    ni(e, t) {
            return this.ei(e);
        }
        /**
         * Finds the index of the given batchId in the mutation queue. This operation
         * is O(1).
         *
         * @returns The computed index of the batch with the given batchId, based on
         * the state of the queue. Note this index can be negative if the requested
         * batchId has already been removed from the queue or past the end of the
         * queue if the batchId is larger than the last added batch.
         */    ei(e) {
            if (0 === this.mutationQueue.length) 
            // As an index this is past the end of the queue
            return 0;
            // Examine the front of the queue to figure out the difference between the
            // batchId and indexes in the array. Note that since the queue is ordered
            // by batchId, if the first batch has a larger batchId then the requested
            // batchId doesn't exist in the queue.
                    return e - this.mutationQueue[0].batchId;
        }
        /**
         * A version of lookupMutationBatch that doesn't return a promise, this makes
         * other functions that uses this code easier to read and more efficient.
         */    Xr(e) {
            const t = this.ei(e);
            if (t < 0 || t >= this.mutationQueue.length) return null;
            return this.mutationQueue[t];
        }
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * The smallest value representable by a 64-bit signed integer (long).
     */
    /**
     * The memory-only RemoteDocumentCache for IndexedDb. To construct, invoke
     * `newMemoryRemoteDocumentCache()`.
     */
    class __PRIVATE_MemoryRemoteDocumentCacheImpl {
        /**
         * @param sizer - Used to assess the size of a document. For eager GC, this is
         * expected to just return 0 to avoid unnecessarily doing the work of
         * calculating the size.
         */
        constructor(e) {
            this.ri = e, 
            /** Underlying cache of documents and their read times. */
            this.docs = function __PRIVATE_documentEntryMap() {
                return new SortedMap(DocumentKey.comparator);
            }(), 
            /** Size of all cached documents. */
            this.size = 0;
        }
        setIndexManager(e) {
            this.indexManager = e;
        }
        /**
         * Adds the supplied entry to the cache and updates the cache size as appropriate.
         *
         * All calls of `addEntry`  are required to go through the RemoteDocumentChangeBuffer
         * returned by `newChangeBuffer()`.
         */    addEntry(e, t) {
            const n = t.key, r = this.docs.get(n), i = r ? r.size : 0, s = this.ri(t);
            return this.docs = this.docs.insert(n, {
                document: t.mutableCopy(),
                size: s
            }), this.size += s - i, this.indexManager.addToCollectionParentIndex(e, n.path.popLast());
        }
        /**
         * Removes the specified entry from the cache and updates the cache size as appropriate.
         *
         * All calls of `removeEntry` are required to go through the RemoteDocumentChangeBuffer
         * returned by `newChangeBuffer()`.
         */    removeEntry(e) {
            const t = this.docs.get(e);
            t && (this.docs = this.docs.remove(e), this.size -= t.size);
        }
        getEntry(e, t) {
            const n = this.docs.get(t);
            return PersistencePromise.resolve(n ? n.document.mutableCopy() : MutableDocument.newInvalidDocument(t));
        }
        getEntries(e, t) {
            let n = __PRIVATE_mutableDocumentMap();
            return t.forEach((e => {
                const t = this.docs.get(e);
                n = n.insert(e, t ? t.document.mutableCopy() : MutableDocument.newInvalidDocument(e));
            })), PersistencePromise.resolve(n);
        }
        getDocumentsMatchingQuery(e, t, n, r) {
            let i = __PRIVATE_mutableDocumentMap();
            // Documents are ordered by key, so we can use a prefix scan to narrow down
            // the documents we need to match the query against.
                    const s = t.path, o = new DocumentKey(s.child("__id-9223372036854775808__")), _ = this.docs.getIteratorFrom(o);
            // Document keys are ordered first by numeric value ("__id<Long>__"),
            // then lexicographically by string value. Start the iterator at the minimum
            // possible Document key value.
                    for (;_.hasNext(); ) {
                const {key: e, value: {document: o}} = _.getNext();
                if (!s.isPrefixOf(e.path)) break;
                e.path.length > s.length + 1 || (__PRIVATE_indexOffsetComparator(__PRIVATE_newIndexOffsetFromDocument(o), n) <= 0 || (r.has(o.key) || __PRIVATE_queryMatches(t, o)) && (i = i.insert(o.key, o.mutableCopy())));
            }
            return PersistencePromise.resolve(i);
        }
        getAllFromCollectionGroup(e, t, n, r) {
            // This method should only be called from the IndexBackfiller if persistence
            // is enabled.
            fail(9500);
        }
        ii(e, t) {
            return PersistencePromise.forEach(this.docs, (e => t(e)));
        }
        newChangeBuffer(e) {
            // `trackRemovals` is ignores since the MemoryRemoteDocumentCache keeps
            // a separate changelog and does not need special handling for removals.
            return new __PRIVATE_MemoryRemoteDocumentChangeBuffer(this);
        }
        getSize(e) {
            return PersistencePromise.resolve(this.size);
        }
    }

    /**
     * Creates a new memory-only RemoteDocumentCache.
     *
     * @param sizer - Used to assess the size of a document. For eager GC, this is
     * expected to just return 0 to avoid unnecessarily doing the work of
     * calculating the size.
     */
    /**
     * Handles the details of adding and updating documents in the MemoryRemoteDocumentCache.
     */
    class __PRIVATE_MemoryRemoteDocumentChangeBuffer extends RemoteDocumentChangeBuffer {
        constructor(e) {
            super(), this.Nr = e;
        }
        applyChanges(e) {
            const t = [];
            return this.changes.forEach(((n, r) => {
                r.isValidDocument() ? t.push(this.Nr.addEntry(e, r)) : this.Nr.removeEntry(n);
            })), PersistencePromise.waitFor(t);
        }
        getFromCache(e, t) {
            return this.Nr.getEntry(e, t);
        }
        getAllFromCache(e, t) {
            return this.Nr.getEntries(e, t);
        }
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */ class __PRIVATE_MemoryTargetCache {
        constructor(e) {
            this.persistence = e, 
            /**
             * Maps a target to the data about that target
             */
            this.si = new ObjectMap((e => __PRIVATE_canonifyTarget(e)), __PRIVATE_targetEquals), 
            /** The last received snapshot version. */
            this.lastRemoteSnapshotVersion = SnapshotVersion.min(), 
            /** The highest numbered target ID encountered. */
            this.highestTargetId = 0, 
            /** The highest sequence number encountered. */
            this.oi = 0, 
            /**
             * A ordered bidirectional mapping between documents and the remote target
             * IDs.
             */
            this._i = new __PRIVATE_ReferenceSet, this.targetCount = 0, this.ai = __PRIVATE_TargetIdGenerator.ur();
        }
        forEachTarget(e, t) {
            return this.si.forEach(((e, n) => t(n))), PersistencePromise.resolve();
        }
        getLastRemoteSnapshotVersion(e) {
            return PersistencePromise.resolve(this.lastRemoteSnapshotVersion);
        }
        getHighestSequenceNumber(e) {
            return PersistencePromise.resolve(this.oi);
        }
        allocateTargetId(e) {
            return this.highestTargetId = this.ai.next(), PersistencePromise.resolve(this.highestTargetId);
        }
        setTargetsMetadata(e, t, n) {
            return n && (this.lastRemoteSnapshotVersion = n), t > this.oi && (this.oi = t), 
            PersistencePromise.resolve();
        }
        Pr(e) {
            this.si.set(e.target, e);
            const t = e.targetId;
            t > this.highestTargetId && (this.ai = new __PRIVATE_TargetIdGenerator(t), this.highestTargetId = t), 
            e.sequenceNumber > this.oi && (this.oi = e.sequenceNumber);
        }
        addTargetData(e, t) {
            return this.Pr(t), this.targetCount += 1, PersistencePromise.resolve();
        }
        updateTargetData(e, t) {
            return this.Pr(t), PersistencePromise.resolve();
        }
        removeTargetData(e, t) {
            return this.si.delete(t.target), this._i.jr(t.targetId), this.targetCount -= 1, 
            PersistencePromise.resolve();
        }
        removeTargets(e, t, n) {
            let r = 0;
            const i = [];
            return this.si.forEach(((s, o) => {
                o.sequenceNumber <= t && null === n.get(o.targetId) && (this.si.delete(s), i.push(this.removeMatchingKeysForTargetId(e, o.targetId)), 
                r++);
            })), PersistencePromise.waitFor(i).next((() => r));
        }
        getTargetCount(e) {
            return PersistencePromise.resolve(this.targetCount);
        }
        getTargetData(e, t) {
            const n = this.si.get(t) || null;
            return PersistencePromise.resolve(n);
        }
        addMatchingKeys(e, t, n) {
            return this._i.Wr(t, n), PersistencePromise.resolve();
        }
        removeMatchingKeys(e, t, n) {
            this._i.zr(t, n);
            const r = this.persistence.referenceDelegate, i = [];
            return r && t.forEach((t => {
                i.push(r.markPotentiallyOrphaned(e, t));
            })), PersistencePromise.waitFor(i);
        }
        removeMatchingKeysForTargetId(e, t) {
            return this._i.jr(t), PersistencePromise.resolve();
        }
        getMatchingKeysForTargetId(e, t) {
            const n = this._i.Hr(t);
            return PersistencePromise.resolve(n);
        }
        containsKey(e, t) {
            return PersistencePromise.resolve(this._i.containsKey(t));
        }
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * A memory-backed instance of Persistence. Data is stored only in RAM and
     * not persisted across sessions.
     */
    class __PRIVATE_MemoryPersistence {
        /**
         * The constructor accepts a factory for creating a reference delegate. This
         * allows both the delegate and this instance to have strong references to
         * each other without having nullable fields that would then need to be
         * checked or asserted on every access.
         */
        constructor(e, t) {
            this.ui = {}, this.overlays = {}, this.ci = new __PRIVATE_ListenSequence(0), this.li = false, 
            this.li = true, this.hi = new __PRIVATE_MemoryGlobalsCache, this.referenceDelegate = e(this), 
            this.Pi = new __PRIVATE_MemoryTargetCache(this);
            this.indexManager = new __PRIVATE_MemoryIndexManager, this.remoteDocumentCache = function __PRIVATE_newMemoryRemoteDocumentCache(e) {
                return new __PRIVATE_MemoryRemoteDocumentCacheImpl(e);
            }((e => this.referenceDelegate.Ti(e))), this.serializer = new __PRIVATE_LocalSerializer(t), 
            this.Ii = new __PRIVATE_MemoryBundleCache(this.serializer);
        }
        start() {
            return Promise.resolve();
        }
        shutdown() {
            // No durable state to ensure is closed on shutdown.
            return this.li = false, Promise.resolve();
        }
        get started() {
            return this.li;
        }
        setDatabaseDeletedListener() {
            // No op.
        }
        setNetworkEnabled() {
            // No op.
        }
        getIndexManager(e) {
            // We do not currently support indices for memory persistence, so we can
            // return the same shared instance of the memory index manager.
            return this.indexManager;
        }
        getDocumentOverlayCache(e) {
            let t = this.overlays[e.toKey()];
            return t || (t = new __PRIVATE_MemoryDocumentOverlayCache, this.overlays[e.toKey()] = t), 
            t;
        }
        getMutationQueue(e, t) {
            let n = this.ui[e.toKey()];
            return n || (n = new __PRIVATE_MemoryMutationQueue(t, this.referenceDelegate), this.ui[e.toKey()] = n), 
            n;
        }
        getGlobalsCache() {
            return this.hi;
        }
        getTargetCache() {
            return this.Pi;
        }
        getRemoteDocumentCache() {
            return this.remoteDocumentCache;
        }
        getBundleCache() {
            return this.Ii;
        }
        runTransaction(e, t, n) {
            __PRIVATE_logDebug("MemoryPersistence", "Starting transaction:", e);
            const r = new __PRIVATE_MemoryTransaction(this.ci.next());
            return this.referenceDelegate.Ei(), n(r).next((e => this.referenceDelegate.di(r).next((() => e)))).toPromise().then((e => (r.raiseOnCommittedEvent(), 
            e)));
        }
        Ai(e, t) {
            return PersistencePromise.or(Object.values(this.ui).map((n => () => n.containsKey(e, t))));
        }
    }

    /**
     * Memory persistence is not actually transactional, but future implementations
     * may have transaction-scoped state.
     */ class __PRIVATE_MemoryTransaction extends PersistenceTransaction {
        constructor(e) {
            super(), this.currentSequenceNumber = e;
        }
    }

    class __PRIVATE_MemoryEagerDelegate {
        constructor(e) {
            this.persistence = e, 
            /** Tracks all documents that are active in Query views. */
            this.Ri = new __PRIVATE_ReferenceSet, 
            /** The list of documents that are potentially GCed after each transaction. */
            this.Vi = null;
        }
        static mi(e) {
            return new __PRIVATE_MemoryEagerDelegate(e);
        }
        get fi() {
            if (this.Vi) return this.Vi;
            throw fail(60996);
        }
        addReference(e, t, n) {
            return this.Ri.addReference(n, t), this.fi.delete(n.toString()), PersistencePromise.resolve();
        }
        removeReference(e, t, n) {
            return this.Ri.removeReference(n, t), this.fi.add(n.toString()), PersistencePromise.resolve();
        }
        markPotentiallyOrphaned(e, t) {
            return this.fi.add(t.toString()), PersistencePromise.resolve();
        }
        removeTarget(e, t) {
            this.Ri.jr(t.targetId).forEach((e => this.fi.add(e.toString())));
            const n = this.persistence.getTargetCache();
            return n.getMatchingKeysForTargetId(e, t.targetId).next((e => {
                e.forEach((e => this.fi.add(e.toString())));
            })).next((() => n.removeTargetData(e, t)));
        }
        Ei() {
            this.Vi = new Set;
        }
        di(e) {
            // Remove newly orphaned documents.
            const t = this.persistence.getRemoteDocumentCache().newChangeBuffer();
            return PersistencePromise.forEach(this.fi, (n => {
                const r = DocumentKey.fromPath(n);
                return this.gi(e, r).next((e => {
                    e || t.removeEntry(r, SnapshotVersion.min());
                }));
            })).next((() => (this.Vi = null, t.apply(e))));
        }
        updateLimboDocument(e, t) {
            return this.gi(e, t).next((e => {
                e ? this.fi.delete(t.toString()) : this.fi.add(t.toString());
            }));
        }
        Ti(e) {
            // For eager GC, we don't care about the document size, there are no size thresholds.
            return 0;
        }
        gi(e, t) {
            return PersistencePromise.or([ () => PersistencePromise.resolve(this.Ri.containsKey(t)), () => this.persistence.getTargetCache().containsKey(e, t), () => this.persistence.Ai(e, t) ]);
        }
    }

    class __PRIVATE_MemoryLruDelegate {
        constructor(e, t) {
            this.persistence = e, this.pi = new ObjectMap((e => __PRIVATE_encodeResourcePath(e.path)), ((e, t) => e.isEqual(t))), 
            this.garbageCollector = __PRIVATE_newLruGarbageCollector(this, t);
        }
        static mi(e, t) {
            return new __PRIVATE_MemoryLruDelegate(e, t);
        }
        // No-ops, present so memory persistence doesn't have to care which delegate
        // it has.
        Ei() {}
        di(e) {
            return PersistencePromise.resolve();
        }
        forEachTarget(e, t) {
            return this.persistence.getTargetCache().forEachTarget(e, t);
        }
        gr(e) {
            const t = this.wr(e);
            return this.persistence.getTargetCache().getTargetCount(e).next((e => t.next((t => e + t))));
        }
        wr(e) {
            let t = 0;
            return this.pr(e, (e => {
                t++;
            })).next((() => t));
        }
        pr(e, t) {
            return PersistencePromise.forEach(this.pi, ((n, r) => this.br(e, n, r).next((e => e ? PersistencePromise.resolve() : t(r)))));
        }
        removeTargets(e, t, n) {
            return this.persistence.getTargetCache().removeTargets(e, t, n);
        }
        removeOrphanedDocuments(e, t) {
            let n = 0;
            const r = this.persistence.getRemoteDocumentCache(), i = r.newChangeBuffer();
            return r.ii(e, (r => this.br(e, r, t).next((e => {
                e || (n++, i.removeEntry(r, SnapshotVersion.min()));
            })))).next((() => i.apply(e))).next((() => n));
        }
        markPotentiallyOrphaned(e, t) {
            return this.pi.set(t, e.currentSequenceNumber), PersistencePromise.resolve();
        }
        removeTarget(e, t) {
            const n = t.withSequenceNumber(e.currentSequenceNumber);
            return this.persistence.getTargetCache().updateTargetData(e, n);
        }
        addReference(e, t, n) {
            return this.pi.set(n, e.currentSequenceNumber), PersistencePromise.resolve();
        }
        removeReference(e, t, n) {
            return this.pi.set(n, e.currentSequenceNumber), PersistencePromise.resolve();
        }
        updateLimboDocument(e, t) {
            return this.pi.set(t, e.currentSequenceNumber), PersistencePromise.resolve();
        }
        Ti(e) {
            let t = e.key.toString().length;
            return e.isFoundDocument() && (t += __PRIVATE_estimateByteSize(e.data.value)), t;
        }
        br(e, t, n) {
            return PersistencePromise.or([ () => this.persistence.Ai(e, t), () => this.persistence.getTargetCache().containsKey(e, t), () => {
                const e = this.pi.get(t);
                return PersistencePromise.resolve(void 0 !== e && e > n);
            } ]);
        }
        getCacheSize(e) {
            return this.persistence.getRemoteDocumentCache().getSize(e);
        }
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * A set of changes to what documents are currently in view and out of view for
     * a given query. These changes are sent to the LocalStore by the View (via
     * the SyncEngine) and are used to pin / unpin documents as appropriate.
     */
    class __PRIVATE_LocalViewChanges {
        constructor(e, t, n, r) {
            this.targetId = e, this.fromCache = t, this.Es = n, this.ds = r;
        }
        static As(e, t) {
            let n = __PRIVATE_documentKeySet(), r = __PRIVATE_documentKeySet();
            for (const e of t.docChanges) switch (e.type) {
              case 0 /* ChangeType.Added */ :
                n = n.add(e.doc.key);
                break;

              case 1 /* ChangeType.Removed */ :
                r = r.add(e.doc.key);
     // do nothing
                    }
            return new __PRIVATE_LocalViewChanges(e, t.fromCache, n, r);
        }
    }

    /**
     * @license
     * Copyright 2023 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * A tracker to keep a record of important details during database local query
     * execution.
     */ class QueryContext {
        constructor() {
            /**
             * Counts the number of documents passed through during local query execution.
             */
            this._documentReadCount = 0;
        }
        get documentReadCount() {
            return this._documentReadCount;
        }
        incrementDocumentReadCount(e) {
            this._documentReadCount += e;
        }
    }

    /**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * The Firestore query engine.
     *
     * Firestore queries can be executed in three modes. The Query Engine determines
     * what mode to use based on what data is persisted. The mode only determines
     * the runtime complexity of the query - the result set is equivalent across all
     * implementations.
     *
     * The Query engine will use indexed-based execution if a user has configured
     * any index that can be used to execute query (via `setIndexConfiguration()`).
     * Otherwise, the engine will try to optimize the query by re-using a previously
     * persisted query result. If that is not possible, the query will be executed
     * via a full collection scan.
     *
     * Index-based execution is the default when available. The query engine
     * supports partial indexed execution and merges the result from the index
     * lookup with documents that have not yet been indexed. The index evaluation
     * matches the backend's format and as such, the SDK can use indexing for all
     * queries that the backend supports.
     *
     * If no index exists, the query engine tries to take advantage of the target
     * document mapping in the TargetCache. These mappings exists for all queries
     * that have been synced with the backend at least once and allow the query
     * engine to only read documents that previously matched a query plus any
     * documents that were edited after the query was last listened to.
     *
     * There are some cases when this optimization is not guaranteed to produce
     * the same results as full collection scans. In these cases, query
     * processing falls back to full scans. These cases are:
     *
     * - Limit queries where a document that matched the query previously no longer
     *   matches the query.
     *
     * - Limit queries where a document edit may cause the document to sort below
     *   another document that is in the local cache.
     *
     * - Queries that have never been CURRENT or free of limbo documents.
     */
    class __PRIVATE_QueryEngine {
        constructor() {
            this.Rs = false, this.Vs = false, 
            /**
             * SDK only decides whether it should create index when collection size is
             * larger than this.
             */
            this.fs = 100, this.gs = 
            /**
     * This cost represents the evaluation result of
     * (([index, docKey] + [docKey, docContent]) per document in the result set)
     * / ([docKey, docContent] per documents in full collection scan) coming from
     * experiment [enter PR experiment URL here].
     */
            function __PRIVATE_getDefaultRelativeIndexReadCostPerDocument() {
                // These values were derived from an experiment where several members of the
                // Firestore SDK team ran a performance test in various environments.
                // Googlers can see b/299284287 for details.
                return isSafari() ? 8 : __PRIVATE_getAndroidVersion(getUA()) > 0 ? 6 : 4;
            }();
        }
        /** Sets the document view to query against. */    initialize(e, t) {
            this.ps = e, this.indexManager = t, this.Rs = true;
        }
        /** Returns all local documents matching the specified query. */    getDocumentsMatchingQuery(e, t, n, r) {
            // Stores the result from executing the query; using this object is more
            // convenient than passing the result between steps of the persistence
            // transaction and improves readability comparatively.
            const i = {
                result: null
            };
            return this.ys(e, t).next((e => {
                i.result = e;
            })).next((() => {
                if (!i.result) return this.ws(e, t, r, n).next((e => {
                    i.result = e;
                }));
            })).next((() => {
                if (i.result) return;
                const n = new QueryContext;
                return this.Ss(e, t, n).next((r => {
                    if (i.result = r, this.Vs) return this.bs(e, t, n, r.size);
                }));
            })).next((() => i.result));
        }
        bs(e, t, n, r) {
            return n.documentReadCount < this.fs ? (__PRIVATE_getLogLevel() <= LogLevel.DEBUG && __PRIVATE_logDebug("QueryEngine", "SDK will not create cache indexes for query:", __PRIVATE_stringifyQuery(t), "since it only creates cache indexes for collection contains", "more than or equal to", this.fs, "documents"), 
            PersistencePromise.resolve()) : (__PRIVATE_getLogLevel() <= LogLevel.DEBUG && __PRIVATE_logDebug("QueryEngine", "Query:", __PRIVATE_stringifyQuery(t), "scans", n.documentReadCount, "local documents and returns", r, "documents as results."), 
            n.documentReadCount > this.gs * r ? (__PRIVATE_getLogLevel() <= LogLevel.DEBUG && __PRIVATE_logDebug("QueryEngine", "The SDK decides to create cache indexes for query:", __PRIVATE_stringifyQuery(t), "as using cache indexes may help improve performance."), 
            this.indexManager.createTargetIndexes(e, __PRIVATE_queryToTarget(t))) : PersistencePromise.resolve());
        }
        /**
         * Performs an indexed query that evaluates the query based on a collection's
         * persisted index values. Returns `null` if an index is not available.
         */    ys(e, t) {
            if (__PRIVATE_queryMatchesAllDocuments(t)) 
            // Queries that match all documents don't benefit from using
            // key-based lookups. It is more efficient to scan all documents in a
            // collection, rather than to perform individual lookups.
            return PersistencePromise.resolve(null);
            let n = __PRIVATE_queryToTarget(t);
            return this.indexManager.getIndexType(e, n).next((r => 0 /* IndexType.NONE */ === r ? null : (null !== t.limit && 1 /* IndexType.PARTIAL */ === r && (
            // We cannot apply a limit for targets that are served using a partial
            // index. If a partial index will be used to serve the target, the
            // query may return a superset of documents that match the target
            // (e.g. if the index doesn't include all the target's filters), or
            // may return the correct set of documents in the wrong order (e.g. if
            // the index doesn't include a segment for one of the orderBys).
            // Therefore, a limit should not be applied in such cases.
            t = __PRIVATE_queryWithLimit(t, null, "F" /* LimitType.First */), n = __PRIVATE_queryToTarget(t)), 
            this.indexManager.getDocumentsMatchingTarget(e, n).next((r => {
                const i = __PRIVATE_documentKeySet(...r);
                return this.ps.getDocuments(e, i).next((r => this.indexManager.getMinOffset(e, n).next((n => {
                    const s = this.Ds(t, r);
                    return this.Cs(t, s, i, n.readTime) ? this.ys(e, __PRIVATE_queryWithLimit(t, null, "F" /* LimitType.First */)) : this.vs(e, s, t, n);
                }))));
            })))));
        }
        /**
         * Performs a query based on the target's persisted query mapping. Returns
         * `null` if the mapping is not available or cannot be used.
         */    ws(e, t, n, r) {
            return __PRIVATE_queryMatchesAllDocuments(t) || r.isEqual(SnapshotVersion.min()) ? PersistencePromise.resolve(null) : this.ps.getDocuments(e, n).next((i => {
                const s = this.Ds(t, i);
                return this.Cs(t, s, n, r) ? PersistencePromise.resolve(null) : (__PRIVATE_getLogLevel() <= LogLevel.DEBUG && __PRIVATE_logDebug("QueryEngine", "Re-using previous result from %s to execute query: %s", r.toString(), __PRIVATE_stringifyQuery(t)), 
                this.vs(e, s, t, __PRIVATE_newIndexOffsetSuccessorFromReadTime(r, U)).next((e => e)));
            }));
            // Queries that have never seen a snapshot without limbo free documents
            // should also be run as a full collection scan.
            }
        /** Applies the query filter and sorting to the provided documents.  */    Ds(e, t) {
            // Sort the documents and re-apply the query filter since previously
            // matching documents do not necessarily still match the query.
            let n = new SortedSet(__PRIVATE_newQueryComparator(e));
            return t.forEach(((t, r) => {
                __PRIVATE_queryMatches(e, r) && (n = n.add(r));
            })), n;
        }
        /**
         * Determines if a limit query needs to be refilled from cache, making it
         * ineligible for index-free execution.
         *
         * @param query - The query.
         * @param sortedPreviousResults - The documents that matched the query when it
         * was last synchronized, sorted by the query's comparator.
         * @param remoteKeys - The document keys that matched the query at the last
         * snapshot.
         * @param limboFreeSnapshotVersion - The version of the snapshot when the
         * query was last synchronized.
         */    Cs(e, t, n, r) {
            if (null === e.limit) 
            // Queries without limits do not need to be refilled.
            return false;
            if (n.size !== t.size) 
            // The query needs to be refilled if a previously matching document no
            // longer matches.
            return true;
            // Limit queries are not eligible for index-free query execution if there is
            // a potential that an older document from cache now sorts before a document
            // that was previously part of the limit. This, however, can only happen if
            // the document at the edge of the limit goes out of limit.
            // If a document that is not the limit boundary sorts differently,
            // the boundary of the limit itself did not change and documents from cache
            // will continue to be "rejected" by this boundary. Therefore, we can ignore
            // any modifications that don't affect the last document.
                    const i = "F" /* LimitType.First */ === e.limitType ? t.last() : t.first();
            return !!i && (i.hasPendingWrites || i.version.compareTo(r) > 0);
        }
        Ss(e, t, n) {
            return __PRIVATE_getLogLevel() <= LogLevel.DEBUG && __PRIVATE_logDebug("QueryEngine", "Using full collection scan to execute query:", __PRIVATE_stringifyQuery(t)), 
            this.ps.getDocumentsMatchingQuery(e, t, IndexOffset.min(), n);
        }
        /**
         * Combines the results from an indexed execution with the remaining documents
         * that have not yet been indexed.
         */    vs(e, t, n, r) {
            // Retrieve all results for documents that were updated since the offset.
            return this.ps.getDocumentsMatchingQuery(e, n, r).next((e => (
            // Merge with existing results
            t.forEach((t => {
                e = e.insert(t.key, t);
            })), e)));
        }
    }

    /**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */ const Ut = "LocalStore", Kt = 3e8;

    /**
     * The maximum time to leave a resume token buffered without writing it out.
     * This value is arbitrary: it's long enough to avoid several writes
     * (possibly indefinitely if updates come more frequently than this) but
     * short enough that restarting after crashing will still have a pretty
     * recent resume token.
     */
    /**
     * Implements `LocalStore` interface.
     *
     * Note: some field defined in this class might have public access level, but
     * the class is not exported so they are only accessible from this module.
     * This is useful to implement optional features (like bundles) in free
     * functions, such that they are tree-shakeable.
     */
    class __PRIVATE_LocalStoreImpl {
        constructor(
        /** Manages our in-memory or durable persistence. */
        e, t, n, r) {
            this.persistence = e, this.Fs = t, this.serializer = r, 
            /**
             * Maps a targetID to data about its target.
             *
             * PORTING NOTE: We are using an immutable data structure on Web to make re-runs
             * of `applyRemoteEvent()` idempotent.
             */
            this.Ms = new SortedMap(__PRIVATE_primitiveComparator), 
            /** Maps a target to its targetID. */
            // TODO(wuandy): Evaluate if TargetId can be part of Target.
            this.xs = new ObjectMap((e => __PRIVATE_canonifyTarget(e)), __PRIVATE_targetEquals), 
            /**
             * A per collection group index of the last read time processed by
             * `getNewDocumentChanges()`.
             *
             * PORTING NOTE: This is only used for multi-tab synchronization.
             */
            this.Os = new Map, this.Ns = e.getRemoteDocumentCache(), this.Pi = e.getTargetCache(), 
            this.Ii = e.getBundleCache(), this.Bs(n);
        }
        Bs(e) {
            // TODO(indexing): Add spec tests that test these components change after a
            // user change
            this.documentOverlayCache = this.persistence.getDocumentOverlayCache(e), this.indexManager = this.persistence.getIndexManager(e), 
            this.mutationQueue = this.persistence.getMutationQueue(e, this.indexManager), this.localDocuments = new LocalDocumentsView(this.Ns, this.mutationQueue, this.documentOverlayCache, this.indexManager), 
            this.Ns.setIndexManager(this.indexManager), this.Fs.initialize(this.localDocuments, this.indexManager);
        }
        collectGarbage(e) {
            return this.persistence.runTransaction("Collect garbage", "readwrite-primary", (t => e.collect(t, this.Ms)));
        }
    }

    function __PRIVATE_newLocalStore(
    /** Manages our in-memory or durable persistence. */
    e, t, n, r) {
        return new __PRIVATE_LocalStoreImpl(e, t, n, r);
    }

    /**
     * Tells the LocalStore that the currently authenticated user has changed.
     *
     * In response the local store switches the mutation queue to the new user and
     * returns any resulting document changes.
     */
    // PORTING NOTE: Android and iOS only return the documents affected by the
    // change.
    async function __PRIVATE_localStoreHandleUserChange(e, t) {
        const n = __PRIVATE_debugCast(e);
        return await n.persistence.runTransaction("Handle user change", "readonly", (e => {
            // Swap out the mutation queue, grabbing the pending mutation batches
            // before and after.
            let r;
            return n.mutationQueue.getAllMutationBatches(e).next((i => (r = i, n.Bs(t), n.mutationQueue.getAllMutationBatches(e)))).next((t => {
                const i = [], s = [];
                // Union the old/new changed keys.
                let o = __PRIVATE_documentKeySet();
                for (const e of r) {
                    i.push(e.batchId);
                    for (const t of e.mutations) o = o.add(t.key);
                }
                for (const e of t) {
                    s.push(e.batchId);
                    for (const t of e.mutations) o = o.add(t.key);
                }
                // Return the set of all (potentially) changed documents and the list
                // of mutation batch IDs that were affected by change.
                            return n.localDocuments.getDocuments(e, o).next((e => ({
                    Ls: e,
                    removedBatchIds: i,
                    addedBatchIds: s
                })));
            }));
        }));
    }

    /**
     * Returns the last consistent snapshot processed (used by the RemoteStore to
     * determine whether to buffer incoming snapshots from the backend).
     */
    function __PRIVATE_localStoreGetLastRemoteSnapshotVersion(e) {
        const t = __PRIVATE_debugCast(e);
        return t.persistence.runTransaction("Get last remote snapshot version", "readonly", (e => t.Pi.getLastRemoteSnapshotVersion(e)));
    }

    /**
     * Updates the "ground-state" (remote) documents. We assume that the remote
     * event reflects any write batches that have been acknowledged or rejected
     * (i.e. we do not re-apply local mutations to updates from this event).
     *
     * LocalDocuments are re-calculated if there are remaining mutations in the
     * queue.
     */ function __PRIVATE_localStoreApplyRemoteEventToLocalCache(e, t) {
        const n = __PRIVATE_debugCast(e), r = t.snapshotVersion;
        let i = n.Ms;
        return n.persistence.runTransaction("Apply remote event", "readwrite-primary", (e => {
            const s = n.Ns.newChangeBuffer({
                trackRemovals: true
            });
            // Reset newTargetDataByTargetMap in case this transaction gets re-run.
                    i = n.Ms;
            const o = [];
            t.targetChanges.forEach(((s, _) => {
                const a = i.get(_);
                if (!a) return;
                // Only update the remote keys if the target is still active. This
                // ensures that we can persist the updated target data along with
                // the updated assignment.
                            o.push(n.Pi.removeMatchingKeys(e, s.removedDocuments, _).next((() => n.Pi.addMatchingKeys(e, s.addedDocuments, _))));
                let u = a.withSequenceNumber(e.currentSequenceNumber);
                null !== t.targetMismatches.get(_) ? u = u.withResumeToken(ByteString.EMPTY_BYTE_STRING, SnapshotVersion.min()).withLastLimboFreeSnapshotVersion(SnapshotVersion.min()) : s.resumeToken.approximateByteSize() > 0 && (u = u.withResumeToken(s.resumeToken, r)), 
                i = i.insert(_, u), 
                // Update the target data if there are target changes (or if
                // sufficient time has passed since the last update).
                /**
     * Returns true if the newTargetData should be persisted during an update of
     * an active target. TargetData should always be persisted when a target is
     * being released and should not call this function.
     *
     * While the target is active, TargetData updates can be omitted when nothing
     * about the target has changed except metadata like the resume token or
     * snapshot version. Occasionally it's worth the extra write to prevent these
     * values from getting too stale after a crash, but this doesn't have to be
     * too frequent.
     */
                function __PRIVATE_shouldPersistTargetData(e, t, n) {
                    // Always persist target data if we don't already have a resume token.
                    if (0 === e.resumeToken.approximateByteSize()) return true;
                    // Don't allow resume token changes to be buffered indefinitely. This
                    // allows us to be reasonably up-to-date after a crash and avoids needing
                    // to loop over all active queries on shutdown. Especially in the browser
                    // we may not get time to do anything interesting while the current tab is
                    // closing.
                                    const r = t.snapshotVersion.toMicroseconds() - e.snapshotVersion.toMicroseconds();
                    if (r >= Kt) return true;
                    // Otherwise if the only thing that has changed about a target is its resume
                    // token it's not worth persisting. Note that the RemoteStore keeps an
                    // in-memory view of the currently active targets which includes the current
                    // resume token, so stream failure or user changes will still use an
                    // up-to-date resume token regardless of what we do here.
                                    const i = n.addedDocuments.size + n.modifiedDocuments.size + n.removedDocuments.size;
                    return i > 0;
                }
                /**
     * Notifies local store of the changed views to locally pin documents.
     */ (a, u, s) && o.push(n.Pi.updateTargetData(e, u));
            }));
            let _ = __PRIVATE_mutableDocumentMap(), a = __PRIVATE_documentKeySet();
            // HACK: The only reason we allow a null snapshot version is so that we
            // can synthesize remote events when we get permission denied errors while
            // trying to resolve the state of a locally cached document that is in
            // limbo.
            if (t.documentUpdates.forEach((r => {
                t.resolvedLimboDocuments.has(r) && o.push(n.persistence.referenceDelegate.updateLimboDocument(e, r));
            })), 
            // Each loop iteration only affects its "own" doc, so it's safe to get all
            // the remote documents in advance in a single call.
            o.push(__PRIVATE_populateDocumentChangeBuffer(e, s, t.documentUpdates).next((e => {
                _ = e.ks, a = e.qs;
            }))), !r.isEqual(SnapshotVersion.min())) {
                const t = n.Pi.getLastRemoteSnapshotVersion(e).next((t => n.Pi.setTargetsMetadata(e, e.currentSequenceNumber, r)));
                o.push(t);
            }
            return PersistencePromise.waitFor(o).next((() => s.apply(e))).next((() => n.localDocuments.getLocalViewOfDocuments(e, _, a))).next((() => _));
        })).then((e => (n.Ms = i, e)));
    }

    /**
     * Populates document change buffer with documents from backend or a bundle.
     * Returns the document changes resulting from applying those documents, and
     * also a set of documents whose existence state are changed as a result.
     *
     * @param txn - Transaction to use to read existing documents from storage.
     * @param documentBuffer - Document buffer to collect the resulted changes to be
     *        applied to storage.
     * @param documents - Documents to be applied.
     */ function __PRIVATE_populateDocumentChangeBuffer(e, t, n) {
        let r = __PRIVATE_documentKeySet(), i = __PRIVATE_documentKeySet();
        return n.forEach((e => r = r.add(e))), t.getEntries(e, r).next((e => {
            let r = __PRIVATE_mutableDocumentMap();
            return n.forEach(((n, s) => {
                const o = e.get(n);
                // Check if see if there is a existence state change for this document.
                            s.isFoundDocument() !== o.isFoundDocument() && (i = i.add(n)), 
                // Note: The order of the steps below is important, since we want
                // to ensure that rejected limbo resolutions (which fabricate
                // NoDocuments with SnapshotVersion.min()) never add documents to
                // cache.
                s.isNoDocument() && s.version.isEqual(SnapshotVersion.min()) ? (
                // NoDocuments with SnapshotVersion.min() are used in manufactured
                // events. We remove these documents from cache since we lost
                // access.
                t.removeEntry(n, s.readTime), r = r.insert(n, s)) : !o.isValidDocument() || s.version.compareTo(o.version) > 0 || 0 === s.version.compareTo(o.version) && o.hasPendingWrites ? (t.addEntry(s), 
                r = r.insert(n, s)) : __PRIVATE_logDebug(Ut, "Ignoring outdated watch update for ", n, ". Current version:", o.version, " Watch version:", s.version);
            })), {
                ks: r,
                qs: i
            };
        }));
    }

    /**
     * Reads the current value of a Document with a given key or null if not
     * found - used for testing.
     */
    /**
     * Assigns the given target an internal ID so that its results can be pinned so
     * they don't get GC'd. A target must be allocated in the local store before
     * the store can be used to manage its view.
     *
     * Allocating an already allocated `Target` will return the existing `TargetData`
     * for that `Target`.
     */
    function __PRIVATE_localStoreAllocateTarget(e, t) {
        const n = __PRIVATE_debugCast(e);
        return n.persistence.runTransaction("Allocate target", "readwrite", (e => {
            let r;
            return n.Pi.getTargetData(e, t).next((i => i ? (
            // This target has been listened to previously, so reuse the
            // previous targetID.
            // TODO(mcg): freshen last accessed date?
            r = i, PersistencePromise.resolve(r)) : n.Pi.allocateTargetId(e).next((i => (r = new TargetData(t, i, "TargetPurposeListen" /* TargetPurpose.Listen */ , e.currentSequenceNumber), 
            n.Pi.addTargetData(e, r).next((() => r)))))));
        })).then((e => {
            // If Multi-Tab is enabled, the existing target data may be newer than
            // the in-memory data
            const r = n.Ms.get(e.targetId);
            return (null === r || e.snapshotVersion.compareTo(r.snapshotVersion) > 0) && (n.Ms = n.Ms.insert(e.targetId, e), 
            n.xs.set(t, e.targetId)), e;
        }));
    }

    /**
     * Returns the TargetData as seen by the LocalStore, including updates that may
     * have not yet been persisted to the TargetCache.
     */
    // Visible for testing.
    /**
     * Unpins all the documents associated with the given target. If
     * `keepPersistedTargetData` is set to false and Eager GC enabled, the method
     * directly removes the associated target data from the target cache.
     *
     * Releasing a non-existing `Target` is a no-op.
     */
    // PORTING NOTE: `keepPersistedTargetData` is multi-tab only.
    async function __PRIVATE_localStoreReleaseTarget(e, t, n) {
        const r = __PRIVATE_debugCast(e), i = r.Ms.get(t), s = n ? "readwrite" : "readwrite-primary";
        try {
            n || await r.persistence.runTransaction("Release target", s, (e => r.persistence.referenceDelegate.removeTarget(e, i)));
        } catch (e) {
            if (!__PRIVATE_isIndexedDbTransactionError(e)) throw e;
            // All `releaseTarget` does is record the final metadata state for the
            // target, but we've been recording this periodically during target
            // activity. If we lose this write this could cause a very slight
            // difference in the order of target deletion during GC, but we
            // don't define exact LRU semantics so this is acceptable.
            __PRIVATE_logDebug(Ut, `Failed to update sequence numbers for target ${t}: ${e}`);
        }
        r.Ms = r.Ms.remove(t), r.xs.delete(i.target);
    }

    /**
     * Runs the specified query against the local store and returns the results,
     * potentially taking advantage of query data from previous executions (such
     * as the set of remote keys).
     *
     * @param usePreviousResults - Whether results from previous executions can
     * be used to optimize this query execution.
     */ function __PRIVATE_localStoreExecuteQuery(e, t, n) {
        const r = __PRIVATE_debugCast(e);
        let i = SnapshotVersion.min(), s = __PRIVATE_documentKeySet();
        return r.persistence.runTransaction("Execute query", "readwrite", (// Use readwrite instead of readonly so indexes can be created
        // Use readwrite instead of readonly so indexes can be created
        e => function __PRIVATE_localStoreGetTargetData(e, t, n) {
            const r = __PRIVATE_debugCast(e), i = r.xs.get(n);
            return void 0 !== i ? PersistencePromise.resolve(r.Ms.get(i)) : r.Pi.getTargetData(t, n);
        }(r, e, __PRIVATE_queryToTarget(t)).next((t => {
            if (t) return i = t.lastLimboFreeSnapshotVersion, r.Pi.getMatchingKeysForTargetId(e, t.targetId).next((e => {
                s = e;
            }));
        })).next((() => r.Fs.getDocumentsMatchingQuery(e, t, n ? i : SnapshotVersion.min(), n ? s : __PRIVATE_documentKeySet()))).next((e => (__PRIVATE_setMaxReadTime(r, __PRIVATE_queryCollectionGroup(t), e), 
        {
            documents: e,
            Qs: s
        })))));
    }

    /** Sets the collection group's maximum read time from the given documents. */
    // PORTING NOTE: Multi-Tab only.
    function __PRIVATE_setMaxReadTime(e, t, n) {
        let r = e.Os.get(t) || SnapshotVersion.min();
        n.forEach(((e, t) => {
            t.readTime.compareTo(r) > 0 && (r = t.readTime);
        })), e.Os.set(t, r);
    }

    /**
     * Metadata state of the local client. Unlike `RemoteClientState`, this class is
     * mutable and keeps track of all pending mutations, which allows us to
     * update the range of pending mutation batch IDs as new mutations are added or
     * removed.
     *
     * The data in `LocalClientState` is not read from WebStorage and instead
     * updated via its instance methods. The updated state can be serialized via
     * `toWebStorageJSON()`.
     */
    // Visible for testing.
    class __PRIVATE_LocalClientState {
        constructor() {
            this.activeTargetIds = __PRIVATE_targetIdSet();
        }
        zs(e) {
            this.activeTargetIds = this.activeTargetIds.add(e);
        }
        js(e) {
            this.activeTargetIds = this.activeTargetIds.delete(e);
        }
        /**
         * Converts this entry into a JSON-encoded format we can use for WebStorage.
         * Does not encode `clientId` as it is part of the key in WebStorage.
         */    Gs() {
            const e = {
                activeTargetIds: this.activeTargetIds.toArray(),
                updateTimeMs: Date.now()
            };
            return JSON.stringify(e);
        }
    }

    class __PRIVATE_MemorySharedClientState {
        constructor() {
            this.Mo = new __PRIVATE_LocalClientState, this.xo = {}, this.onlineStateHandler = null, 
            this.sequenceNumberHandler = null;
        }
        addPendingMutation(e) {
            // No op.
        }
        updateMutationState(e, t, n) {
            // No op.
        }
        addLocalQueryTarget(e, t = true) {
            return t && this.Mo.zs(e), this.xo[e] || "not-current";
        }
        updateQueryState(e, t, n) {
            this.xo[e] = t;
        }
        removeLocalQueryTarget(e) {
            this.Mo.js(e);
        }
        isLocalQueryTarget(e) {
            return this.Mo.activeTargetIds.has(e);
        }
        clearQueryState(e) {
            delete this.xo[e];
        }
        getAllActiveQueryTargets() {
            return this.Mo.activeTargetIds;
        }
        isActiveQueryTarget(e) {
            return this.Mo.activeTargetIds.has(e);
        }
        start() {
            return this.Mo = new __PRIVATE_LocalClientState, Promise.resolve();
        }
        handleUserChange(e, t, n) {
            // No op.
        }
        setOnlineState(e) {
            // No op.
        }
        shutdown() {}
        writeSequenceNumber(e) {}
        notifyBundleLoaded(e) {
            // No op.
        }
    }

    /**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */ class __PRIVATE_NoopConnectivityMonitor {
        Oo(e) {
            // No-op.
        }
        shutdown() {
            // No-op.
        }
    }

    /**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    // References to `window` are guarded by BrowserConnectivityMonitor.isAvailable()
    /* eslint-disable no-restricted-globals */ const Jt = "ConnectivityMonitor";

    /**
     * Browser implementation of ConnectivityMonitor.
     */ class __PRIVATE_BrowserConnectivityMonitor {
        constructor() {
            this.No = () => this.Bo(), this.Lo = () => this.ko(), this.qo = [], this.Qo();
        }
        Oo(e) {
            this.qo.push(e);
        }
        shutdown() {
            window.removeEventListener("online", this.No), window.removeEventListener("offline", this.Lo);
        }
        Qo() {
            window.addEventListener("online", this.No), window.addEventListener("offline", this.Lo);
        }
        Bo() {
            __PRIVATE_logDebug(Jt, "Network connectivity changed: AVAILABLE");
            for (const e of this.qo) e(0 /* NetworkStatus.AVAILABLE */);
        }
        ko() {
            __PRIVATE_logDebug(Jt, "Network connectivity changed: UNAVAILABLE");
            for (const e of this.qo) e(1 /* NetworkStatus.UNAVAILABLE */);
        }
        // TODO(chenbrian): Consider passing in window either into this component or
        // here for testing via FakeWindow.
        /** Checks that all used attributes of window are available. */
        static v() {
            return "undefined" != typeof window && void 0 !== window.addEventListener && void 0 !== window.removeEventListener;
        }
    }

    /**
     * @license
     * Copyright 2023 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * The value returned from the most recent invocation of
     * `generateUniqueDebugId()`, or null if it has never been invoked.
     */ let Ht = null;

    /**
     * Generates and returns an initial value for `lastUniqueDebugId`.
     *
     * The returned value is randomly selected from a range of integers that are
     * represented as 8 hexadecimal digits. This means that (within reason) any
     * numbers generated by incrementing the returned number by 1 will also be
     * represented by 8 hexadecimal digits. This leads to all "IDs" having the same
     * length when converted to a hexadecimal string, making reading logs containing
     * these IDs easier to follow. And since the return value is randomly selected
     * it will help to differentiate between logs from different executions.
     */
    /**
     * Generates and returns a unique ID as a hexadecimal string.
     *
     * The returned ID is intended to be used in debug logging messages to help
     * correlate log messages that may be spatially separated in the logs, but
     * logically related. For example, a network connection could include the same
     * "debug ID" string in all of its log messages to help trace a specific
     * connection over time.
     *
     * @return the 10-character generated ID (e.g. "0xa1b2c3d4").
     */
    function __PRIVATE_generateUniqueDebugId() {
        return null === Ht ? Ht = function __PRIVATE_generateInitialUniqueDebugId() {
            return 268435456 + Math.round(2147483648 * Math.random());
        }() : Ht++, "0x" + Ht.toString(16);
    }

    /**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */ const Yt = "RestConnection", Zt = {
        BatchGetDocuments: "batchGet",
        Commit: "commit",
        RunQuery: "runQuery",
        RunAggregationQuery: "runAggregationQuery"
    };

    /**
     * Maps RPC names to the corresponding REST endpoint name.
     *
     * We use array notation to avoid mangling.
     */
    /**
     * Base class for all Rest-based connections to the backend (WebChannel and
     * HTTP).
     */
    class __PRIVATE_RestConnection {
        get $o() {
            // Both `invokeRPC()` and `invokeStreamingRPC()` use their `path` arguments to determine
            // where to run the query, and expect the `request` to NOT specify the "path".
            return false;
        }
        constructor(e) {
            this.databaseInfo = e, this.databaseId = e.databaseId;
            const t = e.ssl ? "https" : "http", n = encodeURIComponent(this.databaseId.projectId), r = encodeURIComponent(this.databaseId.database);
            this.Uo = t + "://" + e.host, this.Ko = `projects/${n}/databases/${r}`, this.Wo = this.databaseId.database === lt ? `project_id=${n}` : `project_id=${n}&database_id=${r}`;
        }
        Go(e, t, n, r, i) {
            const s = __PRIVATE_generateUniqueDebugId(), o = this.zo(e, t.toUriEncodedString());
            __PRIVATE_logDebug(Yt, `Sending RPC '${e}' ${s}:`, o, n);
            const _ = {
                "google-cloud-resource-prefix": this.Ko,
                "x-goog-request-params": this.Wo
            };
            this.jo(_, r, i);
            const {host: a} = new URL(o), u = isCloudWorkstation(a);
            return this.Jo(e, o, _, n, u).then((t => (__PRIVATE_logDebug(Yt, `Received RPC '${e}' ${s}: `, t), 
            t)), (t => {
                throw __PRIVATE_logWarn(Yt, `RPC '${e}' ${s} failed with error: `, t, "url: ", o, "request:", n), 
                t;
            }));
        }
        Ho(e, t, n, r, i, s) {
            // The REST API automatically aggregates all of the streamed results, so we
            // can just use the normal invoke() method.
            return this.Go(e, t, n, r, i);
        }
        /**
         * Modifies the headers for a request, adding any authorization token if
         * present and any additional headers for the request.
         */    jo(e, t, n) {
            e["X-Goog-Api-Client"] = 
            // SDK_VERSION is updated to different value at runtime depending on the entry point,
            // so we need to get its value when we need it in a function.
            function __PRIVATE_getGoogApiClientValue() {
                return "gl-js/ fire/" + x;
            }(), 
            // Content-Type: text/plain will avoid preflight requests which might
            // mess with CORS and redirects by proxies. If we add custom headers
            // we will need to change this code to potentially use the $httpOverwrite
            // parameter supported by ESF to avoid triggering preflight requests.
            e["Content-Type"] = "text/plain", this.databaseInfo.appId && (e["X-Firebase-GMPID"] = this.databaseInfo.appId), 
            t && t.headers.forEach(((t, n) => e[n] = t)), n && n.headers.forEach(((t, n) => e[n] = t));
        }
        zo(e, t) {
            const n = Zt[e];
            return `${this.Uo}/v1/${t}:${n}`;
        }
        /**
         * Closes and cleans up any resources associated with the connection. This
         * implementation is a no-op because there are no resources associated
         * with the RestConnection that need to be cleaned up.
         */    terminate() {
            // No-op
        }
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * Provides a simple helper class that implements the Stream interface to
     * bridge to other implementations that are streams but do not implement the
     * interface. The stream callbacks are invoked with the callOn... methods.
     */ class __PRIVATE_StreamBridge {
        constructor(e) {
            this.Yo = e.Yo, this.Zo = e.Zo;
        }
        Xo(e) {
            this.e_ = e;
        }
        t_(e) {
            this.n_ = e;
        }
        r_(e) {
            this.i_ = e;
        }
        onMessage(e) {
            this.s_ = e;
        }
        close() {
            this.Zo();
        }
        send(e) {
            this.Yo(e);
        }
        o_() {
            this.e_();
        }
        __() {
            this.n_();
        }
        a_(e) {
            this.i_(e);
        }
        u_(e) {
            this.s_(e);
        }
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */ const Xt = "WebChannelConnection";

    class __PRIVATE_WebChannelConnection extends __PRIVATE_RestConnection {
        constructor(e) {
            super(e), 
            /** A collection of open WebChannel instances */
            this.c_ = [], this.forceLongPolling = e.forceLongPolling, this.autoDetectLongPolling = e.autoDetectLongPolling, 
            this.useFetchStreams = e.useFetchStreams, this.longPollingOptions = e.longPollingOptions;
        }
        Jo(e, t, n, r, i) {
            const s = __PRIVATE_generateUniqueDebugId();
            return new Promise(((i, o) => {
                const _ = new XhrIo;
                _.setWithCredentials(true), _.listenOnce(EventType.COMPLETE, (() => {
                    try {
                        switch (_.getLastErrorCode()) {
                          case ErrorCode.NO_ERROR:
                            const t = _.getResponseJson();
                            __PRIVATE_logDebug(Xt, `XHR for RPC '${e}' ${s} received:`, JSON.stringify(t)), 
                            i(t);
                            break;

                          case ErrorCode.TIMEOUT:
                            __PRIVATE_logDebug(Xt, `RPC '${e}' ${s} timed out`), o(new FirestoreError(N.DEADLINE_EXCEEDED, "Request time out"));
                            break;

                          case ErrorCode.HTTP_ERROR:
                            const n = _.getStatus();
                            if (__PRIVATE_logDebug(Xt, `RPC '${e}' ${s} failed with status:`, n, "response text:", _.getResponseText()), 
                            n > 0) {
                                let e = _.getResponseJson();
                                Array.isArray(e) && (e = e[0]);
                                const t = e?.error;
                                if (t && t.status && t.message) {
                                    const e = function __PRIVATE_mapCodeFromHttpResponseErrorStatus(e) {
                                        const t = e.toLowerCase().replace(/_/g, "-");
                                        return Object.values(N).indexOf(t) >= 0 ? t : N.UNKNOWN;
                                    }(t.status);
                                    o(new FirestoreError(e, t.message));
                                } else o(new FirestoreError(N.UNKNOWN, "Server responded with status " + _.getStatus()));
                            } else 
                            // If we received an HTTP_ERROR but there's no status code,
                            // it's most probably a connection issue
                            o(new FirestoreError(N.UNAVAILABLE, "Connection failed."));
                            break;

                          default:
                            fail(9055, {
                                l_: e,
                                streamId: s,
                                h_: _.getLastErrorCode(),
                                P_: _.getLastError()
                            });
                        }
                    } finally {
                        __PRIVATE_logDebug(Xt, `RPC '${e}' ${s} completed.`);
                    }
                }));
                const a = JSON.stringify(r);
                __PRIVATE_logDebug(Xt, `RPC '${e}' ${s} sending request:`, r), _.send(t, "POST", a, n, 15);
            }));
        }
        T_(e, t, n) {
            const r = __PRIVATE_generateUniqueDebugId(), i = [ this.Uo, "/", "google.firestore.v1.Firestore", "/", e, "/channel" ], s = createWebChannelTransport(), o = getStatEventTarget(), _ = {
                // Required for backend stickiness, routing behavior is based on this
                // parameter.
                httpSessionIdParam: "gsessionid",
                initMessageHeaders: {},
                messageUrlParams: {
                    // This param is used to improve routing and project isolation by the
                    // backend and must be included in every request.
                    database: `projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`
                },
                sendRawJson: true,
                supportsCrossDomainXhr: true,
                internalChannelParams: {
                    // Override the default timeout (randomized between 10-20 seconds) since
                    // a large write batch on a slow internet connection may take a long
                    // time to send to the backend. Rather than have WebChannel impose a
                    // tight timeout which could lead to infinite timeouts and retries, we
                    // set it very large (5-10 minutes) and rely on the browser's builtin
                    // timeouts to kick in if the request isn't working.
                    forwardChannelRequestTimeoutMs: 6e5
                },
                forceLongPolling: this.forceLongPolling,
                detectBufferingProxy: this.autoDetectLongPolling
            }, a = this.longPollingOptions.timeoutSeconds;
            void 0 !== a && (_.longPollingTimeout = Math.round(1e3 * a)), this.useFetchStreams && (_.useFetchStreams = true), 
            this.jo(_.initMessageHeaders, t, n), 
            // Sending the custom headers we just added to request.initMessageHeaders
            // (Authorization, etc.) will trigger the browser to make a CORS preflight
            // request because the XHR will no longer meet the criteria for a "simple"
            // CORS request:
            // https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS#Simple_requests
            // Therefore to avoid the CORS preflight request (an extra network
            // roundtrip), we use the encodeInitMessageHeaders option to specify that
            // the headers should instead be encoded in the request's POST payload,
            // which is recognized by the webchannel backend.
            _.encodeInitMessageHeaders = true;
            const u = i.join("");
            __PRIVATE_logDebug(Xt, `Creating RPC '${e}' stream ${r}: ${u}`, _);
            const c = s.createWebChannel(u, _);
            this.I_(c);
            // WebChannel supports sending the first message with the handshake - saving
            // a network round trip. However, it will have to call send in the same
            // JS event loop as open. In order to enforce this, we delay actually
            // opening the WebChannel until send is called. Whether we have called
            // open is tracked with this variable.
            let l = false, h = false;
            // A flag to determine whether the stream was closed (by us or through an
            // error/close event) to avoid delivering multiple close events or sending
            // on a closed stream
                    const P = new __PRIVATE_StreamBridge({
                Yo: t => {
                    h ? __PRIVATE_logDebug(Xt, `Not sending because RPC '${e}' stream ${r} is closed:`, t) : (l || (__PRIVATE_logDebug(Xt, `Opening RPC '${e}' stream ${r} transport.`), 
                    c.open(), l = true), __PRIVATE_logDebug(Xt, `RPC '${e}' stream ${r} sending:`, t), 
                    c.send(t));
                },
                Zo: () => c.close()
            }), __PRIVATE_unguardedEventListen = (e, t, n) => {
                // TODO(dimond): closure typing seems broken because WebChannel does
                // not implement goog.events.Listenable
                e.listen(t, (e => {
                    try {
                        n(e);
                    } catch (e) {
                        setTimeout((() => {
                            throw e;
                        }), 0);
                    }
                }));
            };
            // Closure events are guarded and exceptions are swallowed, so catch any
            // exception and rethrow using a setTimeout so they become visible again.
            // Note that eventually this function could go away if we are confident
            // enough the code is exception free.
                    return __PRIVATE_unguardedEventListen(c, WebChannel.EventType.OPEN, (() => {
                h || (__PRIVATE_logDebug(Xt, `RPC '${e}' stream ${r} transport opened.`), P.o_());
            })), __PRIVATE_unguardedEventListen(c, WebChannel.EventType.CLOSE, (() => {
                h || (h = !0, __PRIVATE_logDebug(Xt, `RPC '${e}' stream ${r} transport closed`), 
                P.a_(), this.E_(c));
            })), __PRIVATE_unguardedEventListen(c, WebChannel.EventType.ERROR, (t => {
                h || (h = !0, __PRIVATE_logWarn(Xt, `RPC '${e}' stream ${r} transport errored. Name:`, t.name, "Message:", t.message), 
                P.a_(new FirestoreError(N.UNAVAILABLE, "The operation could not be completed")));
            })), __PRIVATE_unguardedEventListen(c, WebChannel.EventType.MESSAGE, (t => {
                if (!h) {
                    const n = t.data[0];
                    __PRIVATE_hardAssert(!!n, 16349);
                    // TODO(b/35143891): There is a bug in One Platform that caused errors
                    // (and only errors) to be wrapped in an extra array. To be forward
                    // compatible with the bug we need to check either condition. The latter
                    // can be removed once the fix has been rolled out.
                    // Use any because msgData.error is not typed.
                    const i = n, s = i?.error || i[0]?.error;
                    if (s) {
                        __PRIVATE_logDebug(Xt, `RPC '${e}' stream ${r} received error:`, s);
                        // error.status will be a string like 'OK' or 'NOT_FOUND'.
                        const t = s.status;
                        let n = 
                        /**
     * Maps an error Code from a GRPC status identifier like 'NOT_FOUND'.
     *
     * @returns The Code equivalent to the given status string or undefined if
     *     there is no match.
     */
                        function __PRIVATE_mapCodeFromRpcStatus(e) {
                            // lookup by string
                            // eslint-disable-next-line @typescript-eslint/no-explicit-any
                            const t = pt[e];
                            if (void 0 !== t) return __PRIVATE_mapCodeFromRpcCode(t);
                        }(t), i = s.message;
                        void 0 === n && (n = N.INTERNAL, i = "Unknown error status: " + t + " with message " + s.message), 
                        // Mark closed so no further events are propagated
                        h = !0, P.a_(new FirestoreError(n, i)), c.close();
                    } else __PRIVATE_logDebug(Xt, `RPC '${e}' stream ${r} received:`, n), P.u_(n);
                }
            })), __PRIVATE_unguardedEventListen(o, Event.STAT_EVENT, (t => {
                t.stat === Stat.PROXY ? __PRIVATE_logDebug(Xt, `RPC '${e}' stream ${r} detected buffering proxy`) : t.stat === Stat.NOPROXY && __PRIVATE_logDebug(Xt, `RPC '${e}' stream ${r} detected no buffering proxy`);
            })), setTimeout((() => {
                // Technically we could/should wait for the WebChannel opened event,
                // but because we want to send the first message with the WebChannel
                // handshake we pretend the channel opened here (asynchronously), and
                // then delay the actual open until the first message is sent.
                P.__();
            }), 0), P;
        }
        /**
         * Closes and cleans up any resources associated with the connection.
         */    terminate() {
            // If the Firestore instance is terminated, we will explicitly
            // close any remaining open WebChannel instances.
            this.c_.forEach((e => e.close())), this.c_ = [];
        }
        /**
         * Add a WebChannel instance to the collection of open instances.
         * @param webChannel
         */    I_(e) {
            this.c_.push(e);
        }
        /**
         * Remove a WebChannel instance from the collection of open instances.
         * @param webChannel
         */    E_(e) {
            this.c_ = this.c_.filter((t => t === e));
        }
    }

    /** The Platform's 'document' implementation or null if not available. */ function getDocument() {
        // `document` is not always available, e.g. in ReactNative and WebWorkers.
        // eslint-disable-next-line no-restricted-globals
        return "undefined" != typeof document ? document : null;
    }

    /**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */ function __PRIVATE_newSerializer(e) {
        return new JsonProtoSerializer(e, /* useProto3Json= */ true);
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * A helper for running delayed tasks following an exponential backoff curve
     * between attempts.
     *
     * Each delay is made up of a "base" delay which follows the exponential
     * backoff curve, and a +/- 50% "jitter" that is calculated and added to the
     * base delay. This prevents clients from accidentally synchronizing their
     * delays causing spikes of load to the backend.
     */
    class __PRIVATE_ExponentialBackoff {
        constructor(
        /**
         * The AsyncQueue to run backoff operations on.
         */
        e, 
        /**
         * The ID to use when scheduling backoff operations on the AsyncQueue.
         */
        t, 
        /**
         * The initial delay (used as the base delay on the first retry attempt).
         * Note that jitter will still be applied, so the actual delay could be as
         * little as 0.5*initialDelayMs.
         */
        n = 1e3
        /**
         * The multiplier to use to determine the extended base delay after each
         * attempt.
         */ , r = 1.5
        /**
         * The maximum base delay after which no further backoff is performed.
         * Note that jitter will still be applied, so the actual delay could be as
         * much as 1.5*maxDelayMs.
         */ , i = 6e4) {
            this.Mi = e, this.timerId = t, this.d_ = n, this.A_ = r, this.R_ = i, this.V_ = 0, 
            this.m_ = null, 
            /** The last backoff attempt, as epoch milliseconds. */
            this.f_ = Date.now(), this.reset();
        }
        /**
         * Resets the backoff delay.
         *
         * The very next backoffAndWait() will have no delay. If it is called again
         * (i.e. due to an error), initialDelayMs (plus jitter) will be used, and
         * subsequent ones will increase according to the backoffFactor.
         */    reset() {
            this.V_ = 0;
        }
        /**
         * Resets the backoff delay to the maximum delay (e.g. for use after a
         * RESOURCE_EXHAUSTED error).
         */    g_() {
            this.V_ = this.R_;
        }
        /**
         * Returns a promise that resolves after currentDelayMs, and increases the
         * delay for any subsequent attempts. If there was a pending backoff operation
         * already, it will be canceled.
         */    p_(e) {
            // Cancel any pending backoff operation.
            this.cancel();
            // First schedule using the current base (which may be 0 and should be
            // honored as such).
            const t = Math.floor(this.V_ + this.y_()), n = Math.max(0, Date.now() - this.f_), r = Math.max(0, t - n);
            // Guard against lastAttemptTime being in the future due to a clock change.
                    r > 0 && __PRIVATE_logDebug("ExponentialBackoff", `Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`), 
            this.m_ = this.Mi.enqueueAfterDelay(this.timerId, r, (() => (this.f_ = Date.now(), 
            e()))), 
            // Apply backoff factor to determine next delay and ensure it is within
            // bounds.
            this.V_ *= this.A_, this.V_ < this.d_ && (this.V_ = this.d_), this.V_ > this.R_ && (this.V_ = this.R_);
        }
        w_() {
            null !== this.m_ && (this.m_.skipDelay(), this.m_ = null);
        }
        cancel() {
            null !== this.m_ && (this.m_.cancel(), this.m_ = null);
        }
        /** Returns a random value in the range [-currentBaseMs/2, currentBaseMs/2] */    y_() {
            return (Math.random() - .5) * this.V_;
        }
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */ const en = "PersistentStream";

    /** The time a stream stays open after it is marked idle. */
    /**
     * A PersistentStream is an abstract base class that represents a streaming RPC
     * to the Firestore backend. It's built on top of the connections own support
     * for streaming RPCs, and adds several critical features for our clients:
     *
     *   - Exponential backoff on failure
     *   - Authentication via CredentialsProvider
     *   - Dispatching all callbacks into the shared worker queue
     *   - Closing idle streams after 60 seconds of inactivity
     *
     * Subclasses of PersistentStream implement serialization of models to and
     * from the JSON representation of the protocol buffers for a specific
     * streaming RPC.
     *
     * ## Starting and Stopping
     *
     * Streaming RPCs are stateful and need to be start()ed before messages can
     * be sent and received. The PersistentStream will call the onOpen() function
     * of the listener once the stream is ready to accept requests.
     *
     * Should a start() fail, PersistentStream will call the registered onClose()
     * listener with a FirestoreError indicating what went wrong.
     *
     * A PersistentStream can be started and stopped repeatedly.
     *
     * Generic types:
     *  SendType: The type of the outgoing message of the underlying
     *    connection stream
     *  ReceiveType: The type of the incoming message of the underlying
     *    connection stream
     *  ListenerType: The type of the listener that will be used for callbacks
     */
    class __PRIVATE_PersistentStream {
        constructor(e, t, n, r, i, s, o, _) {
            this.Mi = e, this.S_ = n, this.b_ = r, this.connection = i, this.authCredentialsProvider = s, 
            this.appCheckCredentialsProvider = o, this.listener = _, this.state = 0 /* PersistentStreamState.Initial */ , 
            /**
             * A close count that's incremented every time the stream is closed; used by
             * getCloseGuardedDispatcher() to invalidate callbacks that happen after
             * close.
             */
            this.D_ = 0, this.C_ = null, this.v_ = null, this.stream = null, 
            /**
             * Count of response messages received.
             */
            this.F_ = 0, this.M_ = new __PRIVATE_ExponentialBackoff(e, t);
        }
        /**
         * Returns true if start() has been called and no error has occurred. True
         * indicates the stream is open or in the process of opening (which
         * encompasses respecting backoff, getting auth tokens, and starting the
         * actual RPC). Use isOpen() to determine if the stream is open and ready for
         * outbound requests.
         */    x_() {
            return 1 /* PersistentStreamState.Starting */ === this.state || 5 /* PersistentStreamState.Backoff */ === this.state || this.O_();
        }
        /**
         * Returns true if the underlying RPC is open (the onOpen() listener has been
         * called) and the stream is ready for outbound requests.
         */    O_() {
            return 2 /* PersistentStreamState.Open */ === this.state || 3 /* PersistentStreamState.Healthy */ === this.state;
        }
        /**
         * Starts the RPC. Only allowed if isStarted() returns false. The stream is
         * not immediately ready for use: onOpen() will be invoked when the RPC is
         * ready for outbound requests, at which point isOpen() will return true.
         *
         * When start returns, isStarted() will return true.
         */    start() {
            this.F_ = 0, 4 /* PersistentStreamState.Error */ !== this.state ? this.auth() : this.N_();
        }
        /**
         * Stops the RPC. This call is idempotent and allowed regardless of the
         * current isStarted() state.
         *
         * When stop returns, isStarted() and isOpen() will both return false.
         */    async stop() {
            this.x_() && await this.close(0 /* PersistentStreamState.Initial */);
        }
        /**
         * After an error the stream will usually back off on the next attempt to
         * start it. If the error warrants an immediate restart of the stream, the
         * sender can use this to indicate that the receiver should not back off.
         *
         * Each error will call the onClose() listener. That function can decide to
         * inhibit backoff if required.
         */    B_() {
            this.state = 0 /* PersistentStreamState.Initial */ , this.M_.reset();
        }
        /**
         * Marks this stream as idle. If no further actions are performed on the
         * stream for one minute, the stream will automatically close itself and
         * notify the stream's onClose() handler with Status.OK. The stream will then
         * be in a !isStarted() state, requiring the caller to start the stream again
         * before further use.
         *
         * Only streams that are in state 'Open' can be marked idle, as all other
         * states imply pending network operations.
         */    L_() {
            // Starts the idle time if we are in state 'Open' and are not yet already
            // running a timer (in which case the previous idle timeout still applies).
            this.O_() && null === this.C_ && (this.C_ = this.Mi.enqueueAfterDelay(this.S_, 6e4, (() => this.k_())));
        }
        /** Sends a message to the underlying stream. */    q_(e) {
            this.Q_(), this.stream.send(e);
        }
        /** Called by the idle timer when the stream should close due to inactivity. */    async k_() {
            if (this.O_()) 
            // When timing out an idle stream there's no reason to force the stream into backoff when
            // it restarts so set the stream state to Initial instead of Error.
            return this.close(0 /* PersistentStreamState.Initial */);
        }
        /** Marks the stream as active again. */    Q_() {
            this.C_ && (this.C_.cancel(), this.C_ = null);
        }
        /** Cancels the health check delayed operation. */    U_() {
            this.v_ && (this.v_.cancel(), this.v_ = null);
        }
        /**
         * Closes the stream and cleans up as necessary:
         *
         * * closes the underlying GRPC stream;
         * * calls the onClose handler with the given 'error';
         * * sets internal stream state to 'finalState';
         * * adjusts the backoff timer based on the error
         *
         * A new stream can be opened by calling start().
         *
         * @param finalState - the intended state of the stream after closing.
         * @param error - the error the connection was closed with.
         */    async close(e, t) {
            // Cancel any outstanding timers (they're guaranteed not to execute).
            this.Q_(), this.U_(), this.M_.cancel(), 
            // Invalidates any stream-related callbacks (e.g. from auth or the
            // underlying stream), guaranteeing they won't execute.
            this.D_++, 4 /* PersistentStreamState.Error */ !== e ? 
            // If this is an intentional close ensure we don't delay our next connection attempt.
            this.M_.reset() : t && t.code === N.RESOURCE_EXHAUSTED ? (
            // Log the error. (Probably either 'quota exceeded' or 'max queue length reached'.)
            __PRIVATE_logError(t.toString()), __PRIVATE_logError("Using maximum backoff delay to prevent overloading the backend."), 
            this.M_.g_()) : t && t.code === N.UNAUTHENTICATED && 3 /* PersistentStreamState.Healthy */ !== this.state && (
            // "unauthenticated" error means the token was rejected. This should rarely
            // happen since both Auth and AppCheck ensure a sufficient TTL when we
            // request a token. If a user manually resets their system clock this can
            // fail, however. In this case, we should get a Code.UNAUTHENTICATED error
            // before we received the first message and we need to invalidate the token
            // to ensure that we fetch a new token.
            this.authCredentialsProvider.invalidateToken(), this.appCheckCredentialsProvider.invalidateToken()), 
            // Clean up the underlying stream because we are no longer interested in events.
            null !== this.stream && (this.K_(), this.stream.close(), this.stream = null), 
            // This state must be assigned before calling onClose() to allow the callback to
            // inhibit backoff or otherwise manipulate the state in its non-started state.
            this.state = e, 
            // Notify the listener that the stream closed.
            await this.listener.r_(t);
        }
        /**
         * Can be overridden to perform additional cleanup before the stream is closed.
         * Calling super.tearDown() is not required.
         */    K_() {}
        auth() {
            this.state = 1 /* PersistentStreamState.Starting */;
            const e = this.W_(this.D_), t = this.D_;
            // TODO(mikelehen): Just use dispatchIfNotClosed, but see TODO below.
                    Promise.all([ this.authCredentialsProvider.getToken(), this.appCheckCredentialsProvider.getToken() ]).then((([e, n]) => {
                // Stream can be stopped while waiting for authentication.
                // TODO(mikelehen): We really should just use dispatchIfNotClosed
                // and let this dispatch onto the queue, but that opened a spec test can
                // of worms that I don't want to deal with in this PR.
                this.D_ === t && 
                // Normally we'd have to schedule the callback on the AsyncQueue.
                // However, the following calls are safe to be called outside the
                // AsyncQueue since they don't chain asynchronous calls
                this.G_(e, n);
            }), (t => {
                e((() => {
                    const e = new FirestoreError(N.UNKNOWN, "Fetching auth token failed: " + t.message);
                    return this.z_(e);
                }));
            }));
        }
        G_(e, t) {
            const n = this.W_(this.D_);
            this.stream = this.j_(e, t), this.stream.Xo((() => {
                n((() => this.listener.Xo()));
            })), this.stream.t_((() => {
                n((() => (this.state = 2 /* PersistentStreamState.Open */ , this.v_ = this.Mi.enqueueAfterDelay(this.b_, 1e4, (() => (this.O_() && (this.state = 3 /* PersistentStreamState.Healthy */), 
                Promise.resolve()))), this.listener.t_())));
            })), this.stream.r_((e => {
                n((() => this.z_(e)));
            })), this.stream.onMessage((e => {
                n((() => 1 == ++this.F_ ? this.J_(e) : this.onNext(e)));
            }));
        }
        N_() {
            this.state = 5 /* PersistentStreamState.Backoff */ , this.M_.p_((async () => {
                this.state = 0 /* PersistentStreamState.Initial */ , this.start();
            }));
        }
        // Visible for tests
        z_(e) {
            // In theory the stream could close cleanly, however, in our current model
            // we never expect this to happen because if we stop a stream ourselves,
            // this callback will never be called. To prevent cases where we retry
            // without a backoff accidentally, we set the stream to error in all cases.
            return __PRIVATE_logDebug(en, `close with error: ${e}`), this.stream = null, this.close(4 /* PersistentStreamState.Error */ , e);
        }
        /**
         * Returns a "dispatcher" function that dispatches operations onto the
         * AsyncQueue but only runs them if closeCount remains unchanged. This allows
         * us to turn auth / stream callbacks into no-ops if the stream is closed /
         * re-opened, etc.
         */    W_(e) {
            return t => {
                this.Mi.enqueueAndForget((() => this.D_ === e ? t() : (__PRIVATE_logDebug(en, "stream callback skipped by getCloseGuardedDispatcher."), 
                Promise.resolve())));
            };
        }
    }

    /**
     * A PersistentStream that implements the Listen RPC.
     *
     * Once the Listen stream has called the onOpen() listener, any number of
     * listen() and unlisten() calls can be made to control what changes will be
     * sent from the server for ListenResponses.
     */ class __PRIVATE_PersistentListenStream extends __PRIVATE_PersistentStream {
        constructor(e, t, n, r, i, s) {
            super(e, "listen_stream_connection_backoff" /* TimerId.ListenStreamConnectionBackoff */ , "listen_stream_idle" /* TimerId.ListenStreamIdle */ , "health_check_timeout" /* TimerId.HealthCheckTimeout */ , t, n, r, s), 
            this.serializer = i;
        }
        j_(e, t) {
            return this.connection.T_("Listen", e, t);
        }
        J_(e) {
            return this.onNext(e);
        }
        onNext(e) {
            // A successful response means the stream is healthy
            this.M_.reset();
            const t = __PRIVATE_fromWatchChange(this.serializer, e), n = function __PRIVATE_versionFromListenResponse(e) {
                // We have only reached a consistent snapshot for the entire stream if there
                // is a read_time set and it applies to all targets (i.e. the list of
                // targets is empty). The backend is guaranteed to send such responses.
                if (!("targetChange" in e)) return SnapshotVersion.min();
                const t = e.targetChange;
                return t.targetIds && t.targetIds.length ? SnapshotVersion.min() : t.readTime ? __PRIVATE_fromVersion(t.readTime) : SnapshotVersion.min();
            }(e);
            return this.listener.H_(t, n);
        }
        /**
         * Registers interest in the results of the given target. If the target
         * includes a resumeToken it will be included in the request. Results that
         * affect the target will be streamed back as WatchChange messages that
         * reference the targetId.
         */    Y_(e) {
            const t = {};
            t.database = __PRIVATE_getEncodedDatabaseId(this.serializer), t.addTarget = function __PRIVATE_toTarget(e, t) {
                let n;
                const r = t.target;
                if (n = __PRIVATE_targetIsDocumentTarget(r) ? {
                    documents: __PRIVATE_toDocumentsTarget(e, r)
                } : {
                    query: __PRIVATE_toQueryTarget(e, r).ft
                }, n.targetId = t.targetId, t.resumeToken.approximateByteSize() > 0) {
                    n.resumeToken = __PRIVATE_toBytes(e, t.resumeToken);
                    const r = __PRIVATE_toInt32Proto(e, t.expectedCount);
                    null !== r && (n.expectedCount = r);
                } else if (t.snapshotVersion.compareTo(SnapshotVersion.min()) > 0) {
                    // TODO(wuandy): Consider removing above check because it is most likely true.
                    // Right now, many tests depend on this behaviour though (leaving min() out
                    // of serialization).
                    n.readTime = toTimestamp(e, t.snapshotVersion.toTimestamp());
                    const r = __PRIVATE_toInt32Proto(e, t.expectedCount);
                    null !== r && (n.expectedCount = r);
                }
                return n;
            }(this.serializer, e);
            const n = __PRIVATE_toListenRequestLabels(this.serializer, e);
            n && (t.labels = n), this.q_(t);
        }
        /**
         * Unregisters interest in the results of the target associated with the
         * given targetId.
         */    Z_(e) {
            const t = {};
            t.database = __PRIVATE_getEncodedDatabaseId(this.serializer), t.removeTarget = e, 
            this.q_(t);
        }
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * Datastore and its related methods are a wrapper around the external Google
     * Cloud Datastore grpc API, which provides an interface that is more convenient
     * for the rest of the client SDK architecture to consume.
     */ class Datastore {}

    /**
     * An implementation of Datastore that exposes additional state for internal
     * consumption.
     */ class __PRIVATE_DatastoreImpl extends Datastore {
        constructor(e, t, n, r) {
            super(), this.authCredentials = e, this.appCheckCredentials = t, this.connection = n, 
            this.serializer = r, this.ia = false;
        }
        sa() {
            if (this.ia) throw new FirestoreError(N.FAILED_PRECONDITION, "The client has already been terminated.");
        }
        /** Invokes the provided RPC with auth and AppCheck tokens. */    Go(e, t, n, r) {
            return this.sa(), Promise.all([ this.authCredentials.getToken(), this.appCheckCredentials.getToken() ]).then((([i, s]) => this.connection.Go(e, __PRIVATE_toResourcePath(t, n), r, i, s))).catch((e => {
                throw "FirebaseError" === e.name ? (e.code === N.UNAUTHENTICATED && (this.authCredentials.invalidateToken(), 
                this.appCheckCredentials.invalidateToken()), e) : new FirestoreError(N.UNKNOWN, e.toString());
            }));
        }
        /** Invokes the provided RPC with streamed results with auth and AppCheck tokens. */    Ho(e, t, n, r, i) {
            return this.sa(), Promise.all([ this.authCredentials.getToken(), this.appCheckCredentials.getToken() ]).then((([s, o]) => this.connection.Ho(e, __PRIVATE_toResourcePath(t, n), r, s, o, i))).catch((e => {
                throw "FirebaseError" === e.name ? (e.code === N.UNAUTHENTICATED && (this.authCredentials.invalidateToken(), 
                this.appCheckCredentials.invalidateToken()), e) : new FirestoreError(N.UNKNOWN, e.toString());
            }));
        }
        terminate() {
            this.ia = true, this.connection.terminate();
        }
    }

    // TODO(firestorexp): Make sure there is only one Datastore instance per
    // firestore-exp client.
    /**
     * A component used by the RemoteStore to track the OnlineState (that is,
     * whether or not the client as a whole should be considered to be online or
     * offline), implementing the appropriate heuristics.
     *
     * In particular, when the client is trying to connect to the backend, we
     * allow up to MAX_WATCH_STREAM_FAILURES within ONLINE_STATE_TIMEOUT_MS for
     * a connection to succeed. If we have too many failures or the timeout elapses,
     * then we set the OnlineState to Offline, and the client will behave as if
     * it is offline (get()s will return cached data, etc.).
     */
    class __PRIVATE_OnlineStateTracker {
        constructor(e, t) {
            this.asyncQueue = e, this.onlineStateHandler = t, 
            /** The current OnlineState. */
            this.state = "Unknown" /* OnlineState.Unknown */ , 
            /**
             * A count of consecutive failures to open the stream. If it reaches the
             * maximum defined by MAX_WATCH_STREAM_FAILURES, we'll set the OnlineState to
             * Offline.
             */
            this.oa = 0, 
            /**
             * A timer that elapses after ONLINE_STATE_TIMEOUT_MS, at which point we
             * transition from OnlineState.Unknown to OnlineState.Offline without waiting
             * for the stream to actually fail (MAX_WATCH_STREAM_FAILURES times).
             */
            this._a = null, 
            /**
             * Whether the client should log a warning message if it fails to connect to
             * the backend (initially true, cleared after a successful stream, or if we've
             * logged the message already).
             */
            this.aa = true;
        }
        /**
         * Called by RemoteStore when a watch stream is started (including on each
         * backoff attempt).
         *
         * If this is the first attempt, it sets the OnlineState to Unknown and starts
         * the onlineStateTimer.
         */    ua() {
            0 === this.oa && (this.ca("Unknown" /* OnlineState.Unknown */), this._a = this.asyncQueue.enqueueAfterDelay("online_state_timeout" /* TimerId.OnlineStateTimeout */ , 1e4, (() => (this._a = null, 
            this.la("Backend didn't respond within 10 seconds."), this.ca("Offline" /* OnlineState.Offline */), 
            Promise.resolve()))));
        }
        /**
         * Updates our OnlineState as appropriate after the watch stream reports a
         * failure. The first failure moves us to the 'Unknown' state. We then may
         * allow multiple failures (based on MAX_WATCH_STREAM_FAILURES) before we
         * actually transition to the 'Offline' state.
         */    ha(e) {
            "Online" /* OnlineState.Online */ === this.state ? this.ca("Unknown" /* OnlineState.Unknown */) : (this.oa++, 
            this.oa >= 1 && (this.Pa(), this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`), 
            this.ca("Offline" /* OnlineState.Offline */)));
        }
        /**
         * Explicitly sets the OnlineState to the specified state.
         *
         * Note that this resets our timers / failure counters, etc. used by our
         * Offline heuristics, so must not be used in place of
         * handleWatchStreamStart() and handleWatchStreamFailure().
         */    set(e) {
            this.Pa(), this.oa = 0, "Online" /* OnlineState.Online */ === e && (
            // We've connected to watch at least once. Don't warn the developer
            // about being offline going forward.
            this.aa = false), this.ca(e);
        }
        ca(e) {
            e !== this.state && (this.state = e, this.onlineStateHandler(e));
        }
        la(e) {
            const t = `Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;
            this.aa ? (__PRIVATE_logError(t), this.aa = false) : __PRIVATE_logDebug("OnlineStateTracker", t);
        }
        Pa() {
            null !== this._a && (this._a.cancel(), this._a = null);
        }
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */ const tn = "RemoteStore";

    // TODO(b/35853402): Negotiate this with the stream.
    class __PRIVATE_RemoteStoreImpl {
        constructor(
        /**
         * The local store, used to fill the write pipeline with outbound mutations.
         */
        e, 
        /** The client-side proxy for interacting with the backend. */
        t, n, r, i) {
            this.localStore = e, this.datastore = t, this.asyncQueue = n, this.remoteSyncer = {}, 
            /**
             * A list of up to MAX_PENDING_WRITES writes that we have fetched from the
             * LocalStore via fillWritePipeline() and have or will send to the write
             * stream.
             *
             * Whenever writePipeline.length > 0 the RemoteStore will attempt to start or
             * restart the write stream. When the stream is established the writes in the
             * pipeline will be sent in order.
             *
             * Writes remain in writePipeline until they are acknowledged by the backend
             * and thus will automatically be re-sent if the stream is interrupted /
             * restarted before they're acknowledged.
             *
             * Write responses from the backend are linked to their originating request
             * purely based on order, and so we can just shift() writes from the front of
             * the writePipeline as we receive responses.
             */
            this.Ta = [], 
            /**
             * A mapping of watched targets that the client cares about tracking and the
             * user has explicitly called a 'listen' for this target.
             *
             * These targets may or may not have been sent to or acknowledged by the
             * server. On re-establishing the listen stream, these targets should be sent
             * to the server. The targets removed with unlistens are removed eagerly
             * without waiting for confirmation from the listen stream.
             */
            this.Ia = new Map, 
            /**
             * A set of reasons for why the RemoteStore may be offline. If empty, the
             * RemoteStore may start its network connections.
             */
            this.Ea = new Set, 
            /**
             * Event handlers that get called when the network is disabled or enabled.
             *
             * PORTING NOTE: These functions are used on the Web client to create the
             * underlying streams (to support tree-shakeable streams). On Android and iOS,
             * the streams are created during construction of RemoteStore.
             */
            this.da = [], this.Aa = i, this.Aa.Oo((e => {
                n.enqueueAndForget((async () => {
                    // Porting Note: Unlike iOS, `restartNetwork()` is called even when the
                    // network becomes unreachable as we don't have any other way to tear
                    // down our streams.
                    __PRIVATE_canUseNetwork(this) && (__PRIVATE_logDebug(tn, "Restarting streams for network reachability change."), 
                    await async function __PRIVATE_restartNetwork(e) {
                        const t = __PRIVATE_debugCast(e);
                        t.Ea.add(4 /* OfflineCause.ConnectivityChange */), await __PRIVATE_disableNetworkInternal(t), 
                        t.Ra.set("Unknown" /* OnlineState.Unknown */), t.Ea.delete(4 /* OfflineCause.ConnectivityChange */), 
                        await __PRIVATE_enableNetworkInternal(t);
                    }(this));
                }));
            })), this.Ra = new __PRIVATE_OnlineStateTracker(n, r);
        }
    }

    async function __PRIVATE_enableNetworkInternal(e) {
        if (__PRIVATE_canUseNetwork(e)) for (const t of e.da) await t(/* enabled= */ true);
    }

    /**
     * Temporarily disables the network. The network can be re-enabled using
     * enableNetwork().
     */ async function __PRIVATE_disableNetworkInternal(e) {
        for (const t of e.da) await t(/* enabled= */ false);
    }

    /**
     * Starts new listen for the given target. Uses resume token if provided. It
     * is a no-op if the target of given `TargetData` is already being listened to.
     */
    function __PRIVATE_remoteStoreListen(e, t) {
        const n = __PRIVATE_debugCast(e);
        n.Ia.has(t.targetId) || (
        // Mark this as something the client is currently listening for.
        n.Ia.set(t.targetId, t), __PRIVATE_shouldStartWatchStream(n) ? 
        // The listen will be sent in onWatchStreamOpen
        __PRIVATE_startWatchStream(n) : __PRIVATE_ensureWatchStream(n).O_() && __PRIVATE_sendWatchRequest(n, t));
    }

    /**
     * Removes the listen from server. It is a no-op if the given target id is
     * not being listened to.
     */ function __PRIVATE_remoteStoreUnlisten(e, t) {
        const n = __PRIVATE_debugCast(e), r = __PRIVATE_ensureWatchStream(n);
        n.Ia.delete(t), r.O_() && __PRIVATE_sendUnwatchRequest(n, t), 0 === n.Ia.size && (r.O_() ? r.L_() : __PRIVATE_canUseNetwork(n) && 
        // Revert to OnlineState.Unknown if the watch stream is not open and we
        // have no listeners, since without any listens to send we cannot
        // confirm if the stream is healthy and upgrade to OnlineState.Online.
        n.Ra.set("Unknown" /* OnlineState.Unknown */));
    }

    /**
     * We need to increment the expected number of pending responses we're due
     * from watch so we wait for the ack to process any messages from this target.
     */ function __PRIVATE_sendWatchRequest(e, t) {
        if (e.Va.Ue(t.targetId), t.resumeToken.approximateByteSize() > 0 || t.snapshotVersion.compareTo(SnapshotVersion.min()) > 0) {
            const n = e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;
            t = t.withExpectedCount(n);
        }
        __PRIVATE_ensureWatchStream(e).Y_(t);
    }

    /**
     * We need to increment the expected number of pending responses we're due
     * from watch so we wait for the removal on the server before we process any
     * messages from this target.
     */ function __PRIVATE_sendUnwatchRequest(e, t) {
        e.Va.Ue(t), __PRIVATE_ensureWatchStream(e).Z_(t);
    }

    function __PRIVATE_startWatchStream(e) {
        e.Va = new __PRIVATE_WatchChangeAggregator({
            getRemoteKeysForTarget: t => e.remoteSyncer.getRemoteKeysForTarget(t),
            At: t => e.Ia.get(t) || null,
            ht: () => e.datastore.serializer.databaseId
        }), __PRIVATE_ensureWatchStream(e).start(), e.Ra.ua();
    }

    /**
     * Returns whether the watch stream should be started because it's necessary
     * and has not yet been started.
     */ function __PRIVATE_shouldStartWatchStream(e) {
        return __PRIVATE_canUseNetwork(e) && !__PRIVATE_ensureWatchStream(e).x_() && e.Ia.size > 0;
    }

    function __PRIVATE_canUseNetwork(e) {
        return 0 === __PRIVATE_debugCast(e).Ea.size;
    }

    function __PRIVATE_cleanUpWatchStreamState(e) {
        e.Va = void 0;
    }

    async function __PRIVATE_onWatchStreamConnected(e) {
        // Mark the client as online since we got a "connected" notification.
        e.Ra.set("Online" /* OnlineState.Online */);
    }

    async function __PRIVATE_onWatchStreamOpen(e) {
        e.Ia.forEach(((t, n) => {
            __PRIVATE_sendWatchRequest(e, t);
        }));
    }

    async function __PRIVATE_onWatchStreamClose(e, t) {
        __PRIVATE_cleanUpWatchStreamState(e), 
        // If we still need the watch stream, retry the connection.
        __PRIVATE_shouldStartWatchStream(e) ? (e.Ra.ha(t), __PRIVATE_startWatchStream(e)) : 
        // No need to restart watch stream because there are no active targets.
        // The online state is set to unknown because there is no active attempt
        // at establishing a connection
        e.Ra.set("Unknown" /* OnlineState.Unknown */);
    }

    async function __PRIVATE_onWatchStreamChange(e, t, n) {
        if (
        // Mark the client as online since we got a message from the server
        e.Ra.set("Online" /* OnlineState.Online */), t instanceof __PRIVATE_WatchTargetChange && 2 /* WatchTargetChangeState.Removed */ === t.state && t.cause) 
        // There was an error on a target, don't wait for a consistent snapshot
        // to raise events
        try {
            /** Handles an error on a target */
            await async function __PRIVATE_handleTargetError(e, t) {
                const n = t.cause;
                for (const r of t.targetIds) 
                // A watched target might have been removed already.
                e.Ia.has(r) && (await e.remoteSyncer.rejectListen(r, n), e.Ia.delete(r), e.Va.removeTarget(r));
            }
            /**
     * Attempts to fill our write pipeline with writes from the LocalStore.
     *
     * Called internally to bootstrap or refill the write pipeline and by
     * SyncEngine whenever there are new mutations to process.
     *
     * Starts the write stream if necessary.
     */ (e, t);
        } catch (n) {
            __PRIVATE_logDebug(tn, "Failed to remove targets %s: %s ", t.targetIds.join(","), n), 
            await __PRIVATE_disableNetworkUntilRecovery(e, n);
        } else if (t instanceof __PRIVATE_DocumentWatchChange ? e.Va.Ze(t) : t instanceof __PRIVATE_ExistenceFilterChange ? e.Va.st(t) : e.Va.tt(t), 
        !n.isEqual(SnapshotVersion.min())) try {
            const t = await __PRIVATE_localStoreGetLastRemoteSnapshotVersion(e.localStore);
            n.compareTo(t) >= 0 && 
            // We have received a target change with a global snapshot if the snapshot
            // version is not equal to SnapshotVersion.min().
            /**
     * Takes a batch of changes from the Datastore, repackages them as a
     * RemoteEvent, and passes that on to the listener, which is typically the
     * SyncEngine.
     */
            await function __PRIVATE_raiseWatchSnapshot(e, t) {
                const n = e.Va.Tt(t);
                // Update in-memory resume tokens. LocalStore will update the
                // persistent view of these when applying the completed RemoteEvent.
                            return n.targetChanges.forEach(((n, r) => {
                    if (n.resumeToken.approximateByteSize() > 0) {
                        const i = e.Ia.get(r);
                        // A watched target might have been removed already.
                                            i && e.Ia.set(r, i.withResumeToken(n.resumeToken, t));
                    }
                })), 
                // Re-establish listens for the targets that have been invalidated by
                // existence filter mismatches.
                n.targetMismatches.forEach(((t, n) => {
                    const r = e.Ia.get(t);
                    if (!r) 
                    // A watched target might have been removed already.
                    return;
                    // Clear the resume token for the target, since we're in a known mismatch
                    // state.
                                    e.Ia.set(t, r.withResumeToken(ByteString.EMPTY_BYTE_STRING, r.snapshotVersion)), 
                    // Cause a hard reset by unwatching and rewatching immediately, but
                    // deliberately don't send a resume token so that we get a full update.
                    __PRIVATE_sendUnwatchRequest(e, t);
                    // Mark the target we send as being on behalf of an existence filter
                    // mismatch, but don't actually retain that in listenTargets. This ensures
                    // that we flag the first re-listen this way without impacting future
                    // listens of this target (that might happen e.g. on reconnect).
                    const i = new TargetData(r.target, t, n, r.sequenceNumber);
                    __PRIVATE_sendWatchRequest(e, i);
                })), e.remoteSyncer.applyRemoteEvent(n);
            }(e, n);
        } catch (t) {
            __PRIVATE_logDebug(tn, "Failed to raise snapshot:", t), await __PRIVATE_disableNetworkUntilRecovery(e, t);
        }
    }

    /**
     * Recovery logic for IndexedDB errors that takes the network offline until
     * `op` succeeds. Retries are scheduled with backoff using
     * `enqueueRetryable()`. If `op()` is not provided, IndexedDB access is
     * validated via a generic operation.
     *
     * The returned Promise is resolved once the network is disabled and before
     * any retry attempt.
     */ async function __PRIVATE_disableNetworkUntilRecovery(e, t, n) {
        if (!__PRIVATE_isIndexedDbTransactionError(t)) throw t;
        e.Ea.add(1 /* OfflineCause.IndexedDbFailed */), 
        // Disable network and raise offline snapshots
        await __PRIVATE_disableNetworkInternal(e), e.Ra.set("Offline" /* OnlineState.Offline */), 
        n || (
        // Use a simple read operation to determine if IndexedDB recovered.
        // Ideally, we would expose a health check directly on SimpleDb, but
        // RemoteStore only has access to persistence through LocalStore.
        n = () => __PRIVATE_localStoreGetLastRemoteSnapshotVersion(e.localStore)), 
        // Probe IndexedDB periodically and re-enable network
        e.asyncQueue.enqueueRetryable((async () => {
            __PRIVATE_logDebug(tn, "Retrying IndexedDB access"), await n(), e.Ea.delete(1 /* OfflineCause.IndexedDbFailed */), 
            await __PRIVATE_enableNetworkInternal(e);
        }));
    }

    async function __PRIVATE_remoteStoreHandleCredentialChange(e, t) {
        const n = __PRIVATE_debugCast(e);
        n.asyncQueue.verifyOperationInProgress(), __PRIVATE_logDebug(tn, "RemoteStore received new credentials");
        const r = __PRIVATE_canUseNetwork(n);
        // Tear down and re-create our network streams. This will ensure we get a
        // fresh auth token for the new user and re-fill the write pipeline with
        // new mutations from the LocalStore (since mutations are per-user).
            n.Ea.add(3 /* OfflineCause.CredentialChange */), await __PRIVATE_disableNetworkInternal(n), 
        r && 
        // Don't set the network status to Unknown if we are offline.
        n.Ra.set("Unknown" /* OnlineState.Unknown */), await n.remoteSyncer.handleCredentialChange(t), 
        n.Ea.delete(3 /* OfflineCause.CredentialChange */), await __PRIVATE_enableNetworkInternal(n);
    }

    /**
     * Toggles the network state when the client gains or loses its primary lease.
     */ async function __PRIVATE_remoteStoreApplyPrimaryState(e, t) {
        const n = __PRIVATE_debugCast(e);
        t ? (n.Ea.delete(2 /* OfflineCause.IsSecondary */), await __PRIVATE_enableNetworkInternal(n)) : t || (n.Ea.add(2 /* OfflineCause.IsSecondary */), 
        await __PRIVATE_disableNetworkInternal(n), n.Ra.set("Unknown" /* OnlineState.Unknown */));
    }

    /**
     * If not yet initialized, registers the WatchStream and its network state
     * callback with `remoteStoreImpl`. Returns the existing stream if one is
     * already available.
     *
     * PORTING NOTE: On iOS and Android, the WatchStream gets registered on startup.
     * This is not done on Web to allow it to be tree-shaken.
     */ function __PRIVATE_ensureWatchStream(e) {
        return e.ma || (
        // Create stream (but note that it is not started yet).
        e.ma = function __PRIVATE_newPersistentWatchStream(e, t, n) {
            const r = __PRIVATE_debugCast(e);
            return r.sa(), new __PRIVATE_PersistentListenStream(t, r.connection, r.authCredentials, r.appCheckCredentials, r.serializer, n);
        }
        /**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */ (e.datastore, e.asyncQueue, {
            Xo: __PRIVATE_onWatchStreamConnected.bind(null, e),
            t_: __PRIVATE_onWatchStreamOpen.bind(null, e),
            r_: __PRIVATE_onWatchStreamClose.bind(null, e),
            H_: __PRIVATE_onWatchStreamChange.bind(null, e)
        }), e.da.push((async t => {
            t ? (e.ma.B_(), __PRIVATE_shouldStartWatchStream(e) ? __PRIVATE_startWatchStream(e) : e.Ra.set("Unknown" /* OnlineState.Unknown */)) : (await e.ma.stop(), 
            __PRIVATE_cleanUpWatchStreamState(e));
        }))), e.ma;
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * Represents an operation scheduled to be run in the future on an AsyncQueue.
     *
     * It is created via DelayedOperation.createAndSchedule().
     *
     * Supports cancellation (via cancel()) and early execution (via skipDelay()).
     *
     * Note: We implement `PromiseLike` instead of `Promise`, as the `Promise` type
     * in newer versions of TypeScript defines `finally`, which is not available in
     * IE.
     */
    class DelayedOperation {
        constructor(e, t, n, r, i) {
            this.asyncQueue = e, this.timerId = t, this.targetTimeMs = n, this.op = r, this.removalCallback = i, 
            this.deferred = new __PRIVATE_Deferred, this.then = this.deferred.promise.then.bind(this.deferred.promise), 
            // It's normal for the deferred promise to be canceled (due to cancellation)
            // and so we attach a dummy catch callback to avoid
            // 'UnhandledPromiseRejectionWarning' log spam.
            this.deferred.promise.catch((e => {}));
        }
        get promise() {
            return this.deferred.promise;
        }
        /**
         * Creates and returns a DelayedOperation that has been scheduled to be
         * executed on the provided asyncQueue after the provided delayMs.
         *
         * @param asyncQueue - The queue to schedule the operation on.
         * @param id - A Timer ID identifying the type of operation this is.
         * @param delayMs - The delay (ms) before the operation should be scheduled.
         * @param op - The operation to run.
         * @param removalCallback - A callback to be called synchronously once the
         *   operation is executed or canceled, notifying the AsyncQueue to remove it
         *   from its delayedOperations list.
         *   PORTING NOTE: This exists to prevent making removeDelayedOperation() and
         *   the DelayedOperation class public.
         */    static createAndSchedule(e, t, n, r, i) {
            const s = Date.now() + n, o = new DelayedOperation(e, t, s, r, i);
            return o.start(n), o;
        }
        /**
         * Starts the timer. This is called immediately after construction by
         * createAndSchedule().
         */    start(e) {
            this.timerHandle = setTimeout((() => this.handleDelayElapsed()), e);
        }
        /**
         * Queues the operation to run immediately (if it hasn't already been run or
         * canceled).
         */    skipDelay() {
            return this.handleDelayElapsed();
        }
        /**
         * Cancels the operation if it hasn't already been executed or canceled. The
         * promise will be rejected.
         *
         * As long as the operation has not yet been run, calling cancel() provides a
         * guarantee that the operation will not be run.
         */    cancel(e) {
            null !== this.timerHandle && (this.clearTimeout(), this.deferred.reject(new FirestoreError(N.CANCELLED, "Operation cancelled" + (e ? ": " + e : ""))));
        }
        handleDelayElapsed() {
            this.asyncQueue.enqueueAndForget((() => null !== this.timerHandle ? (this.clearTimeout(), 
            this.op().then((e => this.deferred.resolve(e)))) : Promise.resolve()));
        }
        clearTimeout() {
            null !== this.timerHandle && (this.removalCallback(this), clearTimeout(this.timerHandle), 
            this.timerHandle = null);
        }
    }

    /**
     * Returns a FirestoreError that can be surfaced to the user if the provided
     * error is an IndexedDbTransactionError. Re-throws the error otherwise.
     */ function __PRIVATE_wrapInUserErrorIfRecoverable(e, t) {
        if (__PRIVATE_logError("AsyncQueue", `${t}: ${e}`), __PRIVATE_isIndexedDbTransactionError(e)) return new FirestoreError(N.UNAVAILABLE, `${t}: ${e}`);
        throw e;
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * DocumentSet is an immutable (copy-on-write) collection that holds documents
     * in order specified by the provided comparator. We always add a document key
     * comparator on top of what is provided to guarantee document equality based on
     * the key.
     */ class DocumentSet {
        /**
         * Returns an empty copy of the existing DocumentSet, using the same
         * comparator.
         */
        static emptySet(e) {
            return new DocumentSet(e.comparator);
        }
        /** The default ordering is by key if the comparator is omitted */    constructor(e) {
            // We are adding document key comparator to the end as it's the only
            // guaranteed unique property of a document.
            this.comparator = e ? (t, n) => e(t, n) || DocumentKey.comparator(t.key, n.key) : (e, t) => DocumentKey.comparator(e.key, t.key), 
            this.keyedMap = documentMap(), this.sortedSet = new SortedMap(this.comparator);
        }
        has(e) {
            return null != this.keyedMap.get(e);
        }
        get(e) {
            return this.keyedMap.get(e);
        }
        first() {
            return this.sortedSet.minKey();
        }
        last() {
            return this.sortedSet.maxKey();
        }
        isEmpty() {
            return this.sortedSet.isEmpty();
        }
        /**
         * Returns the index of the provided key in the document set, or -1 if the
         * document key is not present in the set;
         */    indexOf(e) {
            const t = this.keyedMap.get(e);
            return t ? this.sortedSet.indexOf(t) : -1;
        }
        get size() {
            return this.sortedSet.size;
        }
        /** Iterates documents in order defined by "comparator" */    forEach(e) {
            this.sortedSet.inorderTraversal(((t, n) => (e(t), false)));
        }
        /** Inserts or updates a document with the same key */    add(e) {
            // First remove the element if we have it.
            const t = this.delete(e.key);
            return t.copy(t.keyedMap.insert(e.key, e), t.sortedSet.insert(e, null));
        }
        /** Deletes a document with a given key */    delete(e) {
            const t = this.get(e);
            return t ? this.copy(this.keyedMap.remove(e), this.sortedSet.remove(t)) : this;
        }
        isEqual(e) {
            if (!(e instanceof DocumentSet)) return false;
            if (this.size !== e.size) return false;
            const t = this.sortedSet.getIterator(), n = e.sortedSet.getIterator();
            for (;t.hasNext(); ) {
                const e = t.getNext().key, r = n.getNext().key;
                if (!e.isEqual(r)) return false;
            }
            return true;
        }
        toString() {
            const e = [];
            return this.forEach((t => {
                e.push(t.toString());
            })), 0 === e.length ? "DocumentSet ()" : "DocumentSet (\n  " + e.join("  \n") + "\n)";
        }
        copy(e, t) {
            const n = new DocumentSet;
            return n.comparator = this.comparator, n.keyedMap = e, n.sortedSet = t, n;
        }
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * DocumentChangeSet keeps track of a set of changes to docs in a query, merging
     * duplicate events for the same doc.
     */ class __PRIVATE_DocumentChangeSet {
        constructor() {
            this.ga = new SortedMap(DocumentKey.comparator);
        }
        track(e) {
            const t = e.doc.key, n = this.ga.get(t);
            n ? 
            // Merge the new change with the existing change.
            0 /* ChangeType.Added */ !== e.type && 3 /* ChangeType.Metadata */ === n.type ? this.ga = this.ga.insert(t, e) : 3 /* ChangeType.Metadata */ === e.type && 1 /* ChangeType.Removed */ !== n.type ? this.ga = this.ga.insert(t, {
                type: n.type,
                doc: e.doc
            }) : 2 /* ChangeType.Modified */ === e.type && 2 /* ChangeType.Modified */ === n.type ? this.ga = this.ga.insert(t, {
                type: 2 /* ChangeType.Modified */ ,
                doc: e.doc
            }) : 2 /* ChangeType.Modified */ === e.type && 0 /* ChangeType.Added */ === n.type ? this.ga = this.ga.insert(t, {
                type: 0 /* ChangeType.Added */ ,
                doc: e.doc
            }) : 1 /* ChangeType.Removed */ === e.type && 0 /* ChangeType.Added */ === n.type ? this.ga = this.ga.remove(t) : 1 /* ChangeType.Removed */ === e.type && 2 /* ChangeType.Modified */ === n.type ? this.ga = this.ga.insert(t, {
                type: 1 /* ChangeType.Removed */ ,
                doc: n.doc
            }) : 0 /* ChangeType.Added */ === e.type && 1 /* ChangeType.Removed */ === n.type ? this.ga = this.ga.insert(t, {
                type: 2 /* ChangeType.Modified */ ,
                doc: e.doc
            }) : 
            // This includes these cases, which don't make sense:
            // Added->Added
            // Removed->Removed
            // Modified->Added
            // Removed->Modified
            // Metadata->Added
            // Removed->Metadata
            fail(63341, {
                Rt: e,
                pa: n
            }) : this.ga = this.ga.insert(t, e);
        }
        ya() {
            const e = [];
            return this.ga.inorderTraversal(((t, n) => {
                e.push(n);
            })), e;
        }
    }

    class ViewSnapshot {
        constructor(e, t, n, r, i, s, o, _, a) {
            this.query = e, this.docs = t, this.oldDocs = n, this.docChanges = r, this.mutatedKeys = i, 
            this.fromCache = s, this.syncStateChanged = o, this.excludesMetadataChanges = _, 
            this.hasCachedResults = a;
        }
        /** Returns a view snapshot as if all documents in the snapshot were added. */    static fromInitialDocuments(e, t, n, r, i) {
            const s = [];
            return t.forEach((e => {
                s.push({
                    type: 0 /* ChangeType.Added */ ,
                    doc: e
                });
            })), new ViewSnapshot(e, t, DocumentSet.emptySet(t), s, n, r, 
            /* syncStateChanged= */ true, 
            /* excludesMetadataChanges= */ false, i);
        }
        get hasPendingWrites() {
            return !this.mutatedKeys.isEmpty();
        }
        isEqual(e) {
            if (!(this.fromCache === e.fromCache && this.hasCachedResults === e.hasCachedResults && this.syncStateChanged === e.syncStateChanged && this.mutatedKeys.isEqual(e.mutatedKeys) && __PRIVATE_queryEquals(this.query, e.query) && this.docs.isEqual(e.docs) && this.oldDocs.isEqual(e.oldDocs))) return false;
            const t = this.docChanges, n = e.docChanges;
            if (t.length !== n.length) return false;
            for (let e = 0; e < t.length; e++) if (t[e].type !== n[e].type || !t[e].doc.isEqual(n[e].doc)) return false;
            return true;
        }
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * Holds the listeners and the last received ViewSnapshot for a query being
     * tracked by EventManager.
     */ class __PRIVATE_QueryListenersInfo {
        constructor() {
            this.wa = void 0, this.Sa = [];
        }
        // Helper methods that checks if the query has listeners that listening to remote store
        ba() {
            return this.Sa.some((e => e.Da()));
        }
    }

    class __PRIVATE_EventManagerImpl {
        constructor() {
            this.queries = __PRIVATE_newQueriesObjectMap(), this.onlineState = "Unknown" /* OnlineState.Unknown */ , 
            this.Ca = new Set;
        }
        terminate() {
            !function __PRIVATE_errorAllTargets(e, t) {
                const n = __PRIVATE_debugCast(e), r = n.queries;
                // Prevent further access by clearing ObjectMap.
                n.queries = __PRIVATE_newQueriesObjectMap(), r.forEach(((e, n) => {
                    for (const e of n.Sa) e.onError(t);
                }));
            }
            // Call all global snapshot listeners that have been set.
            (this, new FirestoreError(N.ABORTED, "Firestore shutting down"));
        }
    }

    function __PRIVATE_newQueriesObjectMap() {
        return new ObjectMap((e => __PRIVATE_canonifyQuery(e)), __PRIVATE_queryEquals);
    }

    async function __PRIVATE_eventManagerListen(e, t) {
        const n = __PRIVATE_debugCast(e);
        let r = 3 /* ListenerSetupAction.NoActionRequired */;
        const i = t.query;
        let s = n.queries.get(i);
        s ? !s.ba() && t.Da() && (
        // Query has been listening to local cache, and tries to add a new listener sourced from watch.
        r = 2 /* ListenerSetupAction.RequireWatchConnectionOnly */) : (s = new __PRIVATE_QueryListenersInfo, 
        r = t.Da() ? 0 /* ListenerSetupAction.InitializeLocalListenAndRequireWatchConnection */ : 1 /* ListenerSetupAction.InitializeLocalListenOnly */);
        try {
            switch (r) {
              case 0 /* ListenerSetupAction.InitializeLocalListenAndRequireWatchConnection */ :
                s.wa = await n.onListen(i, 
                /** enableRemoteListen= */ !0);
                break;

              case 1 /* ListenerSetupAction.InitializeLocalListenOnly */ :
                s.wa = await n.onListen(i, 
                /** enableRemoteListen= */ !1);
                break;

              case 2 /* ListenerSetupAction.RequireWatchConnectionOnly */ :
                await n.onFirstRemoteStoreListen(i);
            }
        } catch (e) {
            const n = __PRIVATE_wrapInUserErrorIfRecoverable(e, `Initialization of query '${__PRIVATE_stringifyQuery(t.query)}' failed`);
            return void t.onError(n);
        }
        if (n.queries.set(i, s), s.Sa.push(t), 
        // Run global snapshot listeners if a consistent snapshot has been emitted.
        t.va(n.onlineState), s.wa) {
            t.Fa(s.wa) && __PRIVATE_raiseSnapshotsInSyncEvent(n);
        }
    }

    async function __PRIVATE_eventManagerUnlisten(e, t) {
        const n = __PRIVATE_debugCast(e), r = t.query;
        let i = 3 /* ListenerRemovalAction.NoActionRequired */;
        const s = n.queries.get(r);
        if (s) {
            const e = s.Sa.indexOf(t);
            e >= 0 && (s.Sa.splice(e, 1), 0 === s.Sa.length ? i = t.Da() ? 0 /* ListenerRemovalAction.TerminateLocalListenAndRequireWatchDisconnection */ : 1 /* ListenerRemovalAction.TerminateLocalListenOnly */ : !s.ba() && t.Da() && (
            // The removed listener is the last one that sourced from watch.
            i = 2 /* ListenerRemovalAction.RequireWatchDisconnectionOnly */));
        }
        switch (i) {
          case 0 /* ListenerRemovalAction.TerminateLocalListenAndRequireWatchDisconnection */ :
            return n.queries.delete(r), n.onUnlisten(r, 
            /** disableRemoteListen= */ true);

          case 1 /* ListenerRemovalAction.TerminateLocalListenOnly */ :
            return n.queries.delete(r), n.onUnlisten(r, 
            /** disableRemoteListen= */ false);

          case 2 /* ListenerRemovalAction.RequireWatchDisconnectionOnly */ :
            return n.onLastRemoteStoreUnlisten(r);

          default:
            return;
        }
    }

    function __PRIVATE_eventManagerOnWatchChange(e, t) {
        const n = __PRIVATE_debugCast(e);
        let r = false;
        for (const e of t) {
            const t = e.query, i = n.queries.get(t);
            if (i) {
                for (const t of i.Sa) t.Fa(e) && (r = true);
                i.wa = e;
            }
        }
        r && __PRIVATE_raiseSnapshotsInSyncEvent(n);
    }

    function __PRIVATE_eventManagerOnWatchError(e, t, n) {
        const r = __PRIVATE_debugCast(e), i = r.queries.get(t);
        if (i) for (const e of i.Sa) e.onError(n);
        // Remove all listeners. NOTE: We don't need to call syncEngine.unlisten()
        // after an error.
            r.queries.delete(t);
    }

    function __PRIVATE_raiseSnapshotsInSyncEvent(e) {
        e.Ca.forEach((e => {
            e.next();
        }));
    }

    var nn, rn;

    /** Listen to both cache and server changes */
    (rn = nn || (nn = {})).Ma = "default", 
    /** Listen to changes in cache only */
    rn.Cache = "cache";

    /**
     * QueryListener takes a series of internal view snapshots and determines
     * when to raise the event.
     *
     * It uses an Observer to dispatch events.
     */
    class __PRIVATE_QueryListener {
        constructor(e, t, n) {
            this.query = e, this.xa = t, 
            /**
             * Initial snapshots (e.g. from cache) may not be propagated to the wrapped
             * observer. This flag is set to true once we've actually raised an event.
             */
            this.Oa = false, this.Na = null, this.onlineState = "Unknown" /* OnlineState.Unknown */ , 
            this.options = n || {};
        }
        /**
         * Applies the new ViewSnapshot to this listener, raising a user-facing event
         * if applicable (depending on what changed, whether the user has opted into
         * metadata-only changes, etc.). Returns true if a user-facing event was
         * indeed raised.
         */    Fa(e) {
            if (!this.options.includeMetadataChanges) {
                // Remove the metadata only changes.
                const t = [];
                for (const n of e.docChanges) 3 /* ChangeType.Metadata */ !== n.type && t.push(n);
                e = new ViewSnapshot(e.query, e.docs, e.oldDocs, t, e.mutatedKeys, e.fromCache, e.syncStateChanged, 
                /* excludesMetadataChanges= */ true, e.hasCachedResults);
            }
            let t = false;
            return this.Oa ? this.Ba(e) && (this.xa.next(e), t = true) : this.La(e, this.onlineState) && (this.ka(e), 
            t = true), this.Na = e, t;
        }
        onError(e) {
            this.xa.error(e);
        }
        /** Returns whether a snapshot was raised. */    va(e) {
            this.onlineState = e;
            let t = false;
            return this.Na && !this.Oa && this.La(this.Na, e) && (this.ka(this.Na), t = true), 
            t;
        }
        La(e, t) {
            // Always raise the first event when we're synced
            if (!e.fromCache) return true;
            // Always raise event if listening to cache
                    if (!this.Da()) return true;
            // NOTE: We consider OnlineState.Unknown as online (it should become Offline
            // or Online if we wait long enough).
                    const n = "Offline" /* OnlineState.Offline */ !== t;
            // Don't raise the event if we're online, aren't synced yet (checked
            // above) and are waiting for a sync.
                    return (!this.options.qa || !n) && (!e.docs.isEmpty() || e.hasCachedResults || "Offline" /* OnlineState.Offline */ === t);
            // Raise data from cache if we have any documents, have cached results before,
            // or we are offline.
            }
        Ba(e) {
            // We don't need to handle includeDocumentMetadataChanges here because
            // the Metadata only changes have already been stripped out if needed.
            // At this point the only changes we will see are the ones we should
            // propagate.
            if (e.docChanges.length > 0) return true;
            const t = this.Na && this.Na.hasPendingWrites !== e.hasPendingWrites;
            return !(!e.syncStateChanged && !t) && true === this.options.includeMetadataChanges;
            // Generally we should have hit one of the cases above, but it's possible
            // to get here if there were only metadata docChanges and they got
            // stripped out.
            }
        ka(e) {
            e = ViewSnapshot.fromInitialDocuments(e.query, e.docs, e.mutatedKeys, e.fromCache, e.hasCachedResults), 
            this.Oa = true, this.xa.next(e);
        }
        Da() {
            return this.options.source !== nn.Cache;
        }
    }

    /**
     * Returns a `LoadBundleTaskProgress` representing the progress that the loading
     * has succeeded.
     */
    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    class __PRIVATE_AddedLimboDocument {
        constructor(e) {
            this.key = e;
        }
    }

    class __PRIVATE_RemovedLimboDocument {
        constructor(e) {
            this.key = e;
        }
    }

    /**
     * View is responsible for computing the final merged truth of what docs are in
     * a query. It gets notified of local and remote changes to docs, and applies
     * the query filters and limits to determine the most correct possible results.
     */ class __PRIVATE_View {
        constructor(e, 
        /** Documents included in the remote target */
        t) {
            this.query = e, this.Ya = t, this.Za = null, this.hasCachedResults = false, 
            /**
             * A flag whether the view is current with the backend. A view is considered
             * current after it has seen the current flag from the backend and did not
             * lose consistency within the watch stream (e.g. because of an existence
             * filter mismatch).
             */
            this.current = false, 
            /** Documents in the view but not in the remote target */
            this.Xa = __PRIVATE_documentKeySet(), 
            /** Document Keys that have local changes */
            this.mutatedKeys = __PRIVATE_documentKeySet(), this.eu = __PRIVATE_newQueryComparator(e), 
            this.tu = new DocumentSet(this.eu);
        }
        /**
         * The set of remote documents that the server has told us belongs to the target associated with
         * this view.
         */    get nu() {
            return this.Ya;
        }
        /**
         * Iterates over a set of doc changes, applies the query limit, and computes
         * what the new results should be, what the changes were, and whether we may
         * need to go back to the local cache for more results. Does not make any
         * changes to the view.
         * @param docChanges - The doc changes to apply to this view.
         * @param previousChanges - If this is being called with a refill, then start
         *        with this set of docs and changes instead of the current view.
         * @returns a new set of docs, changes, and refill flag.
         */    ru(e, t) {
            const n = t ? t.iu : new __PRIVATE_DocumentChangeSet, r = t ? t.tu : this.tu;
            let i = t ? t.mutatedKeys : this.mutatedKeys, s = r, o = false;
            // Track the last doc in a (full) limit. This is necessary, because some
            // update (a delete, or an update moving a doc past the old limit) might
            // mean there is some other document in the local cache that either should
            // come (1) between the old last limit doc and the new last document, in the
            // case of updates, or (2) after the new last document, in the case of
            // deletes. So we keep this doc at the old limit to compare the updates to.
            // Note that this should never get used in a refill (when previousChanges is
            // set), because there will only be adds -- no deletes or updates.
            const _ = "F" /* LimitType.First */ === this.query.limitType && r.size === this.query.limit ? r.last() : null, a = "L" /* LimitType.Last */ === this.query.limitType && r.size === this.query.limit ? r.first() : null;
            // Drop documents out to meet limit/limitToLast requirement.
            if (e.inorderTraversal(((e, t) => {
                const u = r.get(e), c = __PRIVATE_queryMatches(this.query, t) ? t : null, l = !!u && this.mutatedKeys.has(u.key), h = !!c && (c.hasLocalMutations || 
                // We only consider committed mutations for documents that were
                // mutated during the lifetime of the view.
                this.mutatedKeys.has(c.key) && c.hasCommittedMutations);
                let P = false;
                // Calculate change
                            if (u && c) {
                    u.data.isEqual(c.data) ? l !== h && (n.track({
                        type: 3 /* ChangeType.Metadata */ ,
                        doc: c
                    }), P = true) : this.su(u, c) || (n.track({
                        type: 2 /* ChangeType.Modified */ ,
                        doc: c
                    }), P = true, (_ && this.eu(c, _) > 0 || a && this.eu(c, a) < 0) && (
                    // This doc moved from inside the limit to outside the limit.
                    // That means there may be some other doc in the local cache
                    // that should be included instead.
                    o = true));
                } else !u && c ? (n.track({
                    type: 0 /* ChangeType.Added */ ,
                    doc: c
                }), P = true) : u && !c && (n.track({
                    type: 1 /* ChangeType.Removed */ ,
                    doc: u
                }), P = true, (_ || a) && (
                // A doc was removed from a full limit query. We'll need to
                // requery from the local cache to see if we know about some other
                // doc that should be in the results.
                o = true));
                P && (c ? (s = s.add(c), i = h ? i.add(e) : i.delete(e)) : (s = s.delete(e), i = i.delete(e)));
            })), null !== this.query.limit) for (;s.size > this.query.limit; ) {
                const e = "F" /* LimitType.First */ === this.query.limitType ? s.last() : s.first();
                s = s.delete(e.key), i = i.delete(e.key), n.track({
                    type: 1 /* ChangeType.Removed */ ,
                    doc: e
                });
            }
            return {
                tu: s,
                iu: n,
                Cs: o,
                mutatedKeys: i
            };
        }
        su(e, t) {
            // We suppress the initial change event for documents that were modified as
            // part of a write acknowledgment (e.g. when the value of a server transform
            // is applied) as Watch will send us the same document again.
            // By suppressing the event, we only raise two user visible events (one with
            // `hasPendingWrites` and the final state of the document) instead of three
            // (one with `hasPendingWrites`, the modified document with
            // `hasPendingWrites` and the final state of the document).
            return e.hasLocalMutations && t.hasCommittedMutations && !t.hasLocalMutations;
        }
        /**
         * Updates the view with the given ViewDocumentChanges and optionally updates
         * limbo docs and sync state from the provided target change.
         * @param docChanges - The set of changes to make to the view's docs.
         * @param limboResolutionEnabled - Whether to update limbo documents based on
         *        this change.
         * @param targetChange - A target change to apply for computing limbo docs and
         *        sync state.
         * @param targetIsPendingReset - Whether the target is pending to reset due to
         *        existence filter mismatch. If not explicitly specified, it is treated
         *        equivalently to `false`.
         * @returns A new ViewChange with the given docs, changes, and sync state.
         */
        // PORTING NOTE: The iOS/Android clients always compute limbo document changes.
        applyChanges(e, t, n, r) {
            const i = this.tu;
            this.tu = e.tu, this.mutatedKeys = e.mutatedKeys;
            // Sort changes based on type and query comparator
            const s = e.iu.ya();
            s.sort(((e, t) => function __PRIVATE_compareChangeType(e, t) {
                const order = e => {
                    switch (e) {
                      case 0 /* ChangeType.Added */ :
                        return 1;

                      case 2 /* ChangeType.Modified */ :
                      case 3 /* ChangeType.Metadata */ :
                        // A metadata change is converted to a modified change at the public
                        // api layer.  Since we sort by document key and then change type,
                        // metadata and modified changes must be sorted equivalently.
                        return 2;

                      case 1 /* ChangeType.Removed */ :
                        return 0;

                      default:
                        return fail(20277, {
                            Rt: e
                        });
                    }
                };
                return order(e) - order(t);
            }
            /**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */ (e.type, t.type) || this.eu(e.doc, t.doc))), this.ou(n), r = r ?? false;
            const o = t && !r ? this._u() : [], _ = 0 === this.Xa.size && this.current && !r ? 1 /* SyncState.Synced */ : 0 /* SyncState.Local */ , a = _ !== this.Za;
            // We are at synced state if there is no limbo docs are waiting to be resolved, view is current
            // with the backend, and the query is not pending to reset due to existence filter mismatch.
                    if (this.Za = _, 0 !== s.length || a) {
                return {
                    snapshot: new ViewSnapshot(this.query, e.tu, i, s, e.mutatedKeys, 0 /* SyncState.Local */ === _, a, 
                    /* excludesMetadataChanges= */ false, !!n && n.resumeToken.approximateByteSize() > 0),
                    au: o
                };
            }
            // no changes
            return {
                au: o
            };
        }
        /**
         * Applies an OnlineState change to the view, potentially generating a
         * ViewChange if the view's syncState changes as a result.
         */    va(e) {
            return this.current && "Offline" /* OnlineState.Offline */ === e ? (
            // If we're offline, set `current` to false and then call applyChanges()
            // to refresh our syncState and generate a ViewChange as appropriate. We
            // are guaranteed to get a new TargetChange that sets `current` back to
            // true once the client is back online.
            this.current = false, this.applyChanges({
                tu: this.tu,
                iu: new __PRIVATE_DocumentChangeSet,
                mutatedKeys: this.mutatedKeys,
                Cs: false
            }, 
            /* limboResolutionEnabled= */ false)) : {
                au: []
            };
        }
        /**
         * Returns whether the doc for the given key should be in limbo.
         */    uu(e) {
            // If the remote end says it's part of this query, it's not in limbo.
            return !this.Ya.has(e) && (
            // The local store doesn't think it's a result, so it shouldn't be in limbo.
            !!this.tu.has(e) && !this.tu.get(e).hasLocalMutations);
        }
        /**
         * Updates syncedDocuments, current, and limbo docs based on the given change.
         * Returns the list of changes to which docs are in limbo.
         */    ou(e) {
            e && (e.addedDocuments.forEach((e => this.Ya = this.Ya.add(e))), e.modifiedDocuments.forEach((e => {})), 
            e.removedDocuments.forEach((e => this.Ya = this.Ya.delete(e))), this.current = e.current);
        }
        _u() {
            // We can only determine limbo documents when we're in-sync with the server.
            if (!this.current) return [];
            // TODO(klimt): Do this incrementally so that it's not quadratic when
            // updating many documents.
                    const e = this.Xa;
            this.Xa = __PRIVATE_documentKeySet(), this.tu.forEach((e => {
                this.uu(e.key) && (this.Xa = this.Xa.add(e.key));
            }));
            // Diff the new limbo docs with the old limbo docs.
            const t = [];
            return e.forEach((e => {
                this.Xa.has(e) || t.push(new __PRIVATE_RemovedLimboDocument(e));
            })), this.Xa.forEach((n => {
                e.has(n) || t.push(new __PRIVATE_AddedLimboDocument(n));
            })), t;
        }
        /**
         * Update the in-memory state of the current view with the state read from
         * persistence.
         *
         * We update the query view whenever a client's primary status changes:
         * - When a client transitions from primary to secondary, it can miss
         *   LocalStorage updates and its query views may temporarily not be
         *   synchronized with the state on disk.
         * - For secondary to primary transitions, the client needs to update the list
         *   of `syncedDocuments` since secondary clients update their query views
         *   based purely on synthesized RemoteEvents.
         *
         * @param queryResult.documents - The documents that match the query according
         * to the LocalStore.
         * @param queryResult.remoteKeys - The keys of the documents that match the
         * query according to the backend.
         *
         * @returns The ViewChange that resulted from this synchronization.
         */
        // PORTING NOTE: Multi-tab only.
        cu(e) {
            this.Ya = e.Qs, this.Xa = __PRIVATE_documentKeySet();
            const t = this.ru(e.documents);
            return this.applyChanges(t, /* limboResolutionEnabled= */ true);
        }
        /**
         * Returns a view snapshot as if this query was just listened to. Contains
         * a document add for every existing document and the `fromCache` and
         * `hasPendingWrites` status of the already established view.
         */
        // PORTING NOTE: Multi-tab only.
        lu() {
            return ViewSnapshot.fromInitialDocuments(this.query, this.tu, this.mutatedKeys, 0 /* SyncState.Local */ === this.Za, this.hasCachedResults);
        }
    }

    const sn = "SyncEngine";

    /**
     * QueryView contains all of the data that SyncEngine needs to keep track of for
     * a particular query.
     */ class __PRIVATE_QueryView {
        constructor(
        /**
         * The query itself.
         */
        e, 
        /**
         * The target number created by the client that is used in the watch
         * stream to identify this query.
         */
        t, 
        /**
         * The view is responsible for computing the final merged truth of what
         * docs are in the query. It gets notified of local and remote changes,
         * and applies the query filters and limits to determine the most correct
         * possible results.
         */
        n) {
            this.query = e, this.targetId = t, this.view = n;
        }
    }

    /** Tracks a limbo resolution. */ class LimboResolution {
        constructor(e) {
            this.key = e, 
            /**
             * Set to true once we've received a document. This is used in
             * getRemoteKeysForTarget() and ultimately used by WatchChangeAggregator to
             * decide whether it needs to manufacture a delete event for the target once
             * the target is CURRENT.
             */
            this.hu = false;
        }
    }

    /**
     * An implementation of `SyncEngine` coordinating with other parts of SDK.
     *
     * The parts of SyncEngine that act as a callback to RemoteStore need to be
     * registered individually. This is done in `syncEngineWrite()` and
     * `syncEngineListen()` (as well as `applyPrimaryState()`) as these methods
     * serve as entry points to RemoteStore's functionality.
     *
     * Note: some field defined in this class might have public access level, but
     * the class is not exported so they are only accessible from this module.
     * This is useful to implement optional features (like bundles) in free
     * functions, such that they are tree-shakeable.
     */ class __PRIVATE_SyncEngineImpl {
        constructor(e, t, n, 
        // PORTING NOTE: Manages state synchronization in multi-tab environments.
        r, i, s) {
            this.localStore = e, this.remoteStore = t, this.eventManager = n, this.sharedClientState = r, 
            this.currentUser = i, this.maxConcurrentLimboResolutions = s, this.Pu = {}, this.Tu = new ObjectMap((e => __PRIVATE_canonifyQuery(e)), __PRIVATE_queryEquals), 
            this.Iu = new Map, 
            /**
             * The keys of documents that are in limbo for which we haven't yet started a
             * limbo resolution query. The strings in this set are the result of calling
             * `key.path.canonicalString()` where `key` is a `DocumentKey` object.
             *
             * The `Set` type was chosen because it provides efficient lookup and removal
             * of arbitrary elements and it also maintains insertion order, providing the
             * desired queue-like FIFO semantics.
             */
            this.Eu = new Set, 
            /**
             * Keeps track of the target ID for each document that is in limbo with an
             * active target.
             */
            this.du = new SortedMap(DocumentKey.comparator), 
            /**
             * Keeps track of the information about an active limbo resolution for each
             * active target ID that was started for the purpose of limbo resolution.
             */
            this.Au = new Map, this.Ru = new __PRIVATE_ReferenceSet, 
            /** Stores user completion handlers, indexed by User and BatchId. */
            this.Vu = {}, 
            /** Stores user callbacks waiting for all pending writes to be acknowledged. */
            this.mu = new Map, this.fu = __PRIVATE_TargetIdGenerator.cr(), this.onlineState = "Unknown" /* OnlineState.Unknown */ , 
            // The primary state is set to `true` or `false` immediately after Firestore
            // startup. In the interim, a client should only be considered primary if
            // `isPrimary` is true.
            this.gu = void 0;
        }
        get isPrimaryClient() {
            return true === this.gu;
        }
    }

    /**
     * Initiates the new listen, resolves promise when listen enqueued to the
     * server. All the subsequent view snapshots or errors are sent to the
     * subscribed handlers. Returns the initial snapshot.
     */
    async function __PRIVATE_syncEngineListen(e, t, n = true) {
        const r = __PRIVATE_ensureWatchCallbacks(e);
        let i;
        const s = r.Tu.get(t);
        return s ? (
        // PORTING NOTE: With Multi-Tab Web, it is possible that a query view
        // already exists when EventManager calls us for the first time. This
        // happens when the primary tab is already listening to this query on
        // behalf of another tab and the user of the primary also starts listening
        // to the query. EventManager will not have an assigned target ID in this
        // case and calls `listen` to obtain this ID.
        r.sharedClientState.addLocalQueryTarget(s.targetId), i = s.view.lu()) : i = await __PRIVATE_allocateTargetAndMaybeListen(r, t, n, 
        /** shouldInitializeView= */ true), i;
    }

    /** Query has been listening to the cache, and tries to initiate the remote store listen */ async function __PRIVATE_triggerRemoteStoreListen(e, t) {
        const n = __PRIVATE_ensureWatchCallbacks(e);
        await __PRIVATE_allocateTargetAndMaybeListen(n, t, 
        /** shouldListenToRemote= */ true, 
        /** shouldInitializeView= */ false);
    }

    async function __PRIVATE_allocateTargetAndMaybeListen(e, t, n, r) {
        const i = await __PRIVATE_localStoreAllocateTarget(e.localStore, __PRIVATE_queryToTarget(t)), s = i.targetId, o = e.sharedClientState.addLocalQueryTarget(s, n);
        let _;
        return r && (_ = await __PRIVATE_initializeViewAndComputeSnapshot(e, t, s, "current" === o, i.resumeToken)), 
        e.isPrimaryClient && n && __PRIVATE_remoteStoreListen(e.remoteStore, i), _;
    }

    /**
     * Registers a view for a previously unknown query and computes its initial
     * snapshot.
     */ async function __PRIVATE_initializeViewAndComputeSnapshot(e, t, n, r, i) {
        // PORTING NOTE: On Web only, we inject the code that registers new Limbo
        // targets based on view changes. This allows us to only depend on Limbo
        // changes when user code includes queries.
        e.pu = (t, n, r) => async function __PRIVATE_applyDocChanges(e, t, n, r) {
            let i = t.view.ru(n);
            i.Cs && (
            // The query has a limit and some docs were removed, so we need
            // to re-run the query against the local store to make sure we
            // didn't lose any good docs that had been past the limit.
            i = await __PRIVATE_localStoreExecuteQuery(e.localStore, t.query, 
            /* usePreviousResults= */ false).then((({documents: e}) => t.view.ru(e, i))));
            const s = r && r.targetChanges.get(t.targetId), o = r && null != r.targetMismatches.get(t.targetId), _ = t.view.applyChanges(i, 
            /* limboResolutionEnabled= */ e.isPrimaryClient, s, o);
            return __PRIVATE_updateTrackedLimbos(e, t.targetId, _.au), _.snapshot;
        }(e, t, n, r);
        const s = await __PRIVATE_localStoreExecuteQuery(e.localStore, t, 
        /* usePreviousResults= */ true), o = new __PRIVATE_View(t, s.Qs), _ = o.ru(s.documents), a = TargetChange.createSynthesizedTargetChangeForCurrentChange(n, r && "Offline" /* OnlineState.Offline */ !== e.onlineState, i), u = o.applyChanges(_, 
        /* limboResolutionEnabled= */ e.isPrimaryClient, a);
        __PRIVATE_updateTrackedLimbos(e, n, u.au);
        const c = new __PRIVATE_QueryView(t, n, o);
        return e.Tu.set(t, c), e.Iu.has(n) ? e.Iu.get(n).push(t) : e.Iu.set(n, [ t ]), u.snapshot;
    }

    /** Stops listening to the query. */ async function __PRIVATE_syncEngineUnlisten(e, t, n) {
        const r = __PRIVATE_debugCast(e), i = r.Tu.get(t), s = r.Iu.get(i.targetId);
        if (s.length > 1) return r.Iu.set(i.targetId, s.filter((e => !__PRIVATE_queryEquals(e, t)))), 
        void r.Tu.delete(t);
        // No other queries are mapped to the target, clean up the query and the target.
            if (r.isPrimaryClient) {
            // We need to remove the local query target first to allow us to verify
            // whether any other client is still interested in this target.
            r.sharedClientState.removeLocalQueryTarget(i.targetId);
            r.sharedClientState.isActiveQueryTarget(i.targetId) || await __PRIVATE_localStoreReleaseTarget(r.localStore, i.targetId, 
            /*keepPersistedTargetData=*/ false).then((() => {
                r.sharedClientState.clearQueryState(i.targetId), n && __PRIVATE_remoteStoreUnlisten(r.remoteStore, i.targetId), 
                __PRIVATE_removeAndCleanupTarget(r, i.targetId);
            })).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss);
        } else __PRIVATE_removeAndCleanupTarget(r, i.targetId), await __PRIVATE_localStoreReleaseTarget(r.localStore, i.targetId, 
        /*keepPersistedTargetData=*/ true);
    }

    /** Unlistens to the remote store while still listening to the cache. */ async function __PRIVATE_triggerRemoteStoreUnlisten(e, t) {
        const n = __PRIVATE_debugCast(e), r = n.Tu.get(t), i = n.Iu.get(r.targetId);
        n.isPrimaryClient && 1 === i.length && (
        // PORTING NOTE: Unregister the target ID with local Firestore client as
        // watch target.
        n.sharedClientState.removeLocalQueryTarget(r.targetId), __PRIVATE_remoteStoreUnlisten(n.remoteStore, r.targetId));
    }

    /**
     * Applies one remote event to the sync engine, notifying any views of the
     * changes, and releasing any pending mutation batches that would become
     * visible because of the snapshot version the remote event contains.
     */ async function __PRIVATE_syncEngineApplyRemoteEvent(e, t) {
        const n = __PRIVATE_debugCast(e);
        try {
            const e = await __PRIVATE_localStoreApplyRemoteEventToLocalCache(n.localStore, t);
            // Update `receivedDocument` as appropriate for any limbo targets.
                    t.targetChanges.forEach(((e, t) => {
                const r = n.Au.get(t);
                r && (
                // Since this is a limbo resolution lookup, it's for a single document
                // and it could be added, modified, or removed, but not a combination.
                __PRIVATE_hardAssert(e.addedDocuments.size + e.modifiedDocuments.size + e.removedDocuments.size <= 1, 22616), 
                e.addedDocuments.size > 0 ? r.hu = !0 : e.modifiedDocuments.size > 0 ? __PRIVATE_hardAssert(r.hu, 14607) : e.removedDocuments.size > 0 && (__PRIVATE_hardAssert(r.hu, 42227), 
                r.hu = !1));
            })), await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(n, e, t);
        } catch (e) {
            await __PRIVATE_ignoreIfPrimaryLeaseLoss(e);
        }
    }

    /**
     * Applies an OnlineState change to the sync engine and notifies any views of
     * the change.
     */ function __PRIVATE_syncEngineApplyOnlineStateChange(e, t, n) {
        const r = __PRIVATE_debugCast(e);
        // If we are the secondary client, we explicitly ignore the remote store's
        // online state (the local client may go offline, even though the primary
        // tab remains online) and only apply the primary tab's online state from
        // SharedClientState.
            if (r.isPrimaryClient && 0 /* OnlineStateSource.RemoteStore */ === n || !r.isPrimaryClient && 1 /* OnlineStateSource.SharedClientState */ === n) {
            const e = [];
            r.Tu.forEach(((n, r) => {
                const i = r.view.va(t);
                i.snapshot && e.push(i.snapshot);
            })), function __PRIVATE_eventManagerOnOnlineStateChange(e, t) {
                const n = __PRIVATE_debugCast(e);
                n.onlineState = t;
                let r = false;
                n.queries.forEach(((e, n) => {
                    for (const e of n.Sa) 
                    // Run global snapshot listeners if a consistent snapshot has been emitted.
                    e.va(t) && (r = true);
                })), r && __PRIVATE_raiseSnapshotsInSyncEvent(n);
            }(r.eventManager, t), e.length && r.Pu.H_(e), r.onlineState = t, r.isPrimaryClient && r.sharedClientState.setOnlineState(t);
        }
    }

    /**
     * Rejects the listen for the given targetID. This can be triggered by the
     * backend for any active target.
     *
     * @param syncEngine - The sync engine implementation.
     * @param targetId - The targetID corresponds to one previously initiated by the
     * user as part of TargetData passed to listen() on RemoteStore.
     * @param err - A description of the condition that has forced the rejection.
     * Nearly always this will be an indication that the user is no longer
     * authorized to see the data matching the target.
     */ async function __PRIVATE_syncEngineRejectListen(e, t, n) {
        const r = __PRIVATE_debugCast(e);
        // PORTING NOTE: Multi-tab only.
            r.sharedClientState.updateQueryState(t, "rejected", n);
        const i = r.Au.get(t), s = i && i.key;
        if (s) {
            // TODO(klimt): We really only should do the following on permission
            // denied errors, but we don't have the cause code here.
            // It's a limbo doc. Create a synthetic event saying it was deleted.
            // This is kind of a hack. Ideally, we would have a method in the local
            // store to purge a document. However, it would be tricky to keep all of
            // the local store's invariants with another method.
            let e = new SortedMap(DocumentKey.comparator);
            // TODO(b/217189216): This limbo document should ideally have a read time,
            // so that it is picked up by any read-time based scans. The backend,
            // however, does not send a read time for target removals.
                    e = e.insert(s, MutableDocument.newNoDocument(s, SnapshotVersion.min()));
            const n = __PRIVATE_documentKeySet().add(s), i = new RemoteEvent(SnapshotVersion.min(), 
            /* targetChanges= */ new Map, 
            /* targetMismatches= */ new SortedMap(__PRIVATE_primitiveComparator), e, n);
            await __PRIVATE_syncEngineApplyRemoteEvent(r, i), 
            // Since this query failed, we won't want to manually unlisten to it.
            // We only remove it from bookkeeping after we successfully applied the
            // RemoteEvent. If `applyRemoteEvent()` throws, we want to re-listen to
            // this query when the RemoteStore restarts the Watch stream, which should
            // re-trigger the target failure.
            r.du = r.du.remove(s), r.Au.delete(t), __PRIVATE_pumpEnqueuedLimboResolutions(r);
        } else await __PRIVATE_localStoreReleaseTarget(r.localStore, t, 
        /* keepPersistedTargetData */ false).then((() => __PRIVATE_removeAndCleanupTarget(r, t, n))).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss);
    }

    function __PRIVATE_removeAndCleanupTarget(e, t, n = null) {
        e.sharedClientState.removeLocalQueryTarget(t);
        for (const r of e.Iu.get(t)) e.Tu.delete(r), n && e.Pu.yu(r, n);
        if (e.Iu.delete(t), e.isPrimaryClient) {
            e.Ru.jr(t).forEach((t => {
                e.Ru.containsKey(t) || 
                // We removed the last reference for this key
                __PRIVATE_removeLimboTarget(e, t);
            }));
        }
    }

    function __PRIVATE_removeLimboTarget(e, t) {
        e.Eu.delete(t.path.canonicalString());
        // It's possible that the target already got removed because the query failed. In that case,
        // the key won't exist in `limboTargetsByKey`. Only do the cleanup if we still have the target.
        const n = e.du.get(t);
        null !== n && (__PRIVATE_remoteStoreUnlisten(e.remoteStore, n), e.du = e.du.remove(t), 
        e.Au.delete(n), __PRIVATE_pumpEnqueuedLimboResolutions(e));
    }

    function __PRIVATE_updateTrackedLimbos(e, t, n) {
        for (const r of n) if (r instanceof __PRIVATE_AddedLimboDocument) e.Ru.addReference(r.key, t), 
        __PRIVATE_trackLimboChange(e, r); else if (r instanceof __PRIVATE_RemovedLimboDocument) {
            __PRIVATE_logDebug(sn, "Document no longer in limbo: " + r.key), e.Ru.removeReference(r.key, t);
            e.Ru.containsKey(r.key) || 
            // We removed the last reference for this key
            __PRIVATE_removeLimboTarget(e, r.key);
        } else fail(19791, {
            wu: r
        });
    }

    function __PRIVATE_trackLimboChange(e, t) {
        const n = t.key, r = n.path.canonicalString();
        e.du.get(n) || e.Eu.has(r) || (__PRIVATE_logDebug(sn, "New document in limbo: " + n), 
        e.Eu.add(r), __PRIVATE_pumpEnqueuedLimboResolutions(e));
    }

    /**
     * Starts listens for documents in limbo that are enqueued for resolution,
     * subject to a maximum number of concurrent resolutions.
     *
     * Without bounding the number of concurrent resolutions, the server can fail
     * with "resource exhausted" errors which can lead to pathological client
     * behavior as seen in https://github.com/firebase/firebase-js-sdk/issues/2683.
     */ function __PRIVATE_pumpEnqueuedLimboResolutions(e) {
        for (;e.Eu.size > 0 && e.du.size < e.maxConcurrentLimboResolutions; ) {
            const t = e.Eu.values().next().value;
            e.Eu.delete(t);
            const n = new DocumentKey(ResourcePath.fromString(t)), r = e.fu.next();
            e.Au.set(r, new LimboResolution(n)), e.du = e.du.insert(n, r), __PRIVATE_remoteStoreListen(e.remoteStore, new TargetData(__PRIVATE_queryToTarget(__PRIVATE_newQueryForPath(n.path)), r, "TargetPurposeLimboResolution" /* TargetPurpose.LimboResolution */ , __PRIVATE_ListenSequence.ce));
        }
    }

    async function __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(e, t, n) {
        const r = __PRIVATE_debugCast(e), i = [], s = [], o = [];
        r.Tu.isEmpty() || (r.Tu.forEach(((e, _) => {
            o.push(r.pu(_, t, n).then((e => {
                // If there are changes, or we are handling a global snapshot, notify
                // secondary clients to update query state.
                if ((e || n) && r.isPrimaryClient) {
                    // Query state is set to `current` if:
                    // - There is a view change and it is up-to-date, or,
                    // - There is a global snapshot, the Target is current, and no changes to be resolved
                    const t = e ? !e.fromCache : n?.targetChanges.get(_.targetId)?.current;
                    r.sharedClientState.updateQueryState(_.targetId, t ? "current" : "not-current");
                }
                // Update views if there are actual changes.
                            if (e) {
                    i.push(e);
                    const t = __PRIVATE_LocalViewChanges.As(_.targetId, e);
                    s.push(t);
                }
            })));
        })), await Promise.all(o), r.Pu.H_(i), await async function __PRIVATE_localStoreNotifyLocalViewChanges(e, t) {
            const n = __PRIVATE_debugCast(e);
            try {
                await n.persistence.runTransaction("notifyLocalViewChanges", "readwrite", (e => PersistencePromise.forEach(t, (t => PersistencePromise.forEach(t.Es, (r => n.persistence.referenceDelegate.addReference(e, t.targetId, r))).next((() => PersistencePromise.forEach(t.ds, (r => n.persistence.referenceDelegate.removeReference(e, t.targetId, r)))))))));
            } catch (e) {
                if (!__PRIVATE_isIndexedDbTransactionError(e)) throw e;
                // If `notifyLocalViewChanges` fails, we did not advance the sequence
                // number for the documents that were included in this transaction.
                // This might trigger them to be deleted earlier than they otherwise
                // would have, but it should not invalidate the integrity of the data.
                __PRIVATE_logDebug(Ut, "Failed to update sequence numbers: " + e);
            }
            for (const e of t) {
                const t = e.targetId;
                if (!e.fromCache) {
                    const e = n.Ms.get(t), r = e.snapshotVersion, i = e.withLastLimboFreeSnapshotVersion(r);
                    // Advance the last limbo free snapshot version
                                    n.Ms = n.Ms.insert(t, i);
                }
            }
        }(r.localStore, s));
    }

    async function __PRIVATE_syncEngineHandleCredentialChange(e, t) {
        const n = __PRIVATE_debugCast(e);
        if (!n.currentUser.isEqual(t)) {
            __PRIVATE_logDebug(sn, "User change. New user:", t.toKey());
            const e = await __PRIVATE_localStoreHandleUserChange(n.localStore, t);
            n.currentUser = t, 
            // Fails tasks waiting for pending writes requested by previous user.
            function __PRIVATE_rejectOutstandingPendingWritesCallbacks(e, t) {
                e.mu.forEach((e => {
                    e.forEach((e => {
                        e.reject(new FirestoreError(N.CANCELLED, t));
                    }));
                })), e.mu.clear();
            }(n, "'waitForPendingWrites' promise is rejected due to a user change."), 
            // TODO(b/114226417): Consider calling this only in the primary tab.
            n.sharedClientState.handleUserChange(t, e.removedBatchIds, e.addedBatchIds), await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(n, e.Ls);
        }
    }

    function __PRIVATE_syncEngineGetRemoteKeysForTarget(e, t) {
        const n = __PRIVATE_debugCast(e), r = n.Au.get(t);
        if (r && r.hu) return __PRIVATE_documentKeySet().add(r.key);
        {
            let e = __PRIVATE_documentKeySet();
            const r = n.Iu.get(t);
            if (!r) return e;
            for (const t of r) {
                const r = n.Tu.get(t);
                e = e.unionWith(r.view.nu);
            }
            return e;
        }
    }

    function __PRIVATE_ensureWatchCallbacks(e) {
        const t = __PRIVATE_debugCast(e);
        return t.remoteStore.remoteSyncer.applyRemoteEvent = __PRIVATE_syncEngineApplyRemoteEvent.bind(null, t), 
        t.remoteStore.remoteSyncer.getRemoteKeysForTarget = __PRIVATE_syncEngineGetRemoteKeysForTarget.bind(null, t), 
        t.remoteStore.remoteSyncer.rejectListen = __PRIVATE_syncEngineRejectListen.bind(null, t), 
        t.Pu.H_ = __PRIVATE_eventManagerOnWatchChange.bind(null, t.eventManager), t.Pu.yu = __PRIVATE_eventManagerOnWatchError.bind(null, t.eventManager), 
        t;
    }

    class __PRIVATE_MemoryOfflineComponentProvider {
        constructor() {
            this.kind = "memory", this.synchronizeTabs = false;
        }
        async initialize(e) {
            this.serializer = __PRIVATE_newSerializer(e.databaseInfo.databaseId), this.sharedClientState = this.Du(e), 
            this.persistence = this.Cu(e), await this.persistence.start(), this.localStore = this.vu(e), 
            this.gcScheduler = this.Fu(e, this.localStore), this.indexBackfillerScheduler = this.Mu(e, this.localStore);
        }
        Fu(e, t) {
            return null;
        }
        Mu(e, t) {
            return null;
        }
        vu(e) {
            return __PRIVATE_newLocalStore(this.persistence, new __PRIVATE_QueryEngine, e.initialUser, this.serializer);
        }
        Cu(e) {
            return new __PRIVATE_MemoryPersistence(__PRIVATE_MemoryEagerDelegate.mi, this.serializer);
        }
        Du(e) {
            return new __PRIVATE_MemorySharedClientState;
        }
        async terminate() {
            this.gcScheduler?.stop(), this.indexBackfillerScheduler?.stop(), this.sharedClientState.shutdown(), 
            await this.persistence.shutdown();
        }
    }

    __PRIVATE_MemoryOfflineComponentProvider.provider = {
        build: () => new __PRIVATE_MemoryOfflineComponentProvider
    };

    class __PRIVATE_LruGcMemoryOfflineComponentProvider extends __PRIVATE_MemoryOfflineComponentProvider {
        constructor(e) {
            super(), this.cacheSizeBytes = e;
        }
        Fu(e, t) {
            __PRIVATE_hardAssert(this.persistence.referenceDelegate instanceof __PRIVATE_MemoryLruDelegate, 46915);
            const n = this.persistence.referenceDelegate.garbageCollector;
            return new __PRIVATE_LruScheduler(n, e.asyncQueue, t);
        }
        Cu(e) {
            const t = void 0 !== this.cacheSizeBytes ? LruParams.withCacheSize(this.cacheSizeBytes) : LruParams.DEFAULT;
            return new __PRIVATE_MemoryPersistence((e => __PRIVATE_MemoryLruDelegate.mi(e, t)), this.serializer);
        }
    }

    /**
     * Initializes and wires the components that are needed to interface with the
     * network.
     */ class OnlineComponentProvider {
        async initialize(e, t) {
            this.localStore || (this.localStore = e.localStore, this.sharedClientState = e.sharedClientState, 
            this.datastore = this.createDatastore(t), this.remoteStore = this.createRemoteStore(t), 
            this.eventManager = this.createEventManager(t), this.syncEngine = this.createSyncEngine(t, 
            /* startAsPrimary=*/ !e.synchronizeTabs), this.sharedClientState.onlineStateHandler = e => __PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine, e, 1 /* OnlineStateSource.SharedClientState */), 
            this.remoteStore.remoteSyncer.handleCredentialChange = __PRIVATE_syncEngineHandleCredentialChange.bind(null, this.syncEngine), 
            await __PRIVATE_remoteStoreApplyPrimaryState(this.remoteStore, this.syncEngine.isPrimaryClient));
        }
        createEventManager(e) {
            return function __PRIVATE_newEventManager() {
                return new __PRIVATE_EventManagerImpl;
            }();
        }
        createDatastore(e) {
            const t = __PRIVATE_newSerializer(e.databaseInfo.databaseId), n = function __PRIVATE_newConnection(e) {
                return new __PRIVATE_WebChannelConnection(e);
            }
            /** Return the Platform-specific connectivity monitor. */ (e.databaseInfo);
            return function __PRIVATE_newDatastore(e, t, n, r) {
                return new __PRIVATE_DatastoreImpl(e, t, n, r);
            }(e.authCredentials, e.appCheckCredentials, n, t);
        }
        createRemoteStore(e) {
            return function __PRIVATE_newRemoteStore(e, t, n, r, i) {
                return new __PRIVATE_RemoteStoreImpl(e, t, n, r, i);
            }
            /** Re-enables the network. Idempotent. */ (this.localStore, this.datastore, e.asyncQueue, (e => __PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine, e, 0 /* OnlineStateSource.RemoteStore */)), function __PRIVATE_newConnectivityMonitor() {
                return __PRIVATE_BrowserConnectivityMonitor.v() ? new __PRIVATE_BrowserConnectivityMonitor : new __PRIVATE_NoopConnectivityMonitor;
            }());
        }
        createSyncEngine(e, t) {
            return function __PRIVATE_newSyncEngine(e, t, n, 
            // PORTING NOTE: Manages state synchronization in multi-tab environments.
            r, i, s, o) {
                const _ = new __PRIVATE_SyncEngineImpl(e, t, n, r, i, s);
                return o && (_.gu = true), _;
            }(this.localStore, this.remoteStore, this.eventManager, this.sharedClientState, e.initialUser, e.maxConcurrentLimboResolutions, t);
        }
        async terminate() {
            await async function __PRIVATE_remoteStoreShutdown(e) {
                const t = __PRIVATE_debugCast(e);
                __PRIVATE_logDebug(tn, "RemoteStore shutting down."), t.Ea.add(5 /* OfflineCause.Shutdown */), 
                await __PRIVATE_disableNetworkInternal(t), t.Aa.shutdown(), 
                // Set the OnlineState to Unknown (rather than Offline) to avoid potentially
                // triggering spurious listener events with cached data, etc.
                t.Ra.set("Unknown" /* OnlineState.Unknown */);
            }(this.remoteStore), this.datastore?.terminate(), this.eventManager?.terminate();
        }
    }

    OnlineComponentProvider.provider = {
        build: () => new OnlineComponentProvider
    };

    /**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * On web, a `ReadableStream` is wrapped around by a `ByteStreamReader`.
     */
    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /*
     * A wrapper implementation of Observer<T> that will dispatch events
     * asynchronously. To allow immediate silencing, a mute call is added which
     * causes events scheduled to no longer be raised.
     */
    class __PRIVATE_AsyncObserver {
        constructor(e) {
            this.observer = e, 
            /**
             * When set to true, will not raise future events. Necessary to deal with
             * async detachment of listener.
             */
            this.muted = false;
        }
        next(e) {
            this.muted || this.observer.next && this.Ou(this.observer.next, e);
        }
        error(e) {
            this.muted || (this.observer.error ? this.Ou(this.observer.error, e) : __PRIVATE_logError("Uncaught Error in snapshot listener:", e.toString()));
        }
        Nu() {
            this.muted = true;
        }
        Ou(e, t) {
            setTimeout((() => {
                this.muted || e(t);
            }), 0);
        }
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */ const on = "FirestoreClient";

    /**
     * FirestoreClient is a top-level class that constructs and owns all of the //
     * pieces of the client SDK architecture. It is responsible for creating the //
     * async queue that is shared by all of the other components in the system. //
     */
    class FirestoreClient {
        constructor(e, t, 
        /**
         * Asynchronous queue responsible for all of our internal processing. When
         * we get incoming work from the user (via public API) or the network
         * (incoming GRPC messages), we should always schedule onto this queue.
         * This ensures all of our work is properly serialized (e.g. we don't
         * start processing a new operation while the previous one is waiting for
         * an async I/O to complete).
         */
        n, r, i) {
            this.authCredentials = e, this.appCheckCredentials = t, this.asyncQueue = n, this.databaseInfo = r, 
            this.user = User.UNAUTHENTICATED, this.clientId = __PRIVATE_AutoId.newId(), this.authCredentialListener = () => Promise.resolve(), 
            this.appCheckCredentialListener = () => Promise.resolve(), this._uninitializedComponentsProvider = i, 
            this.authCredentials.start(n, (async e => {
                __PRIVATE_logDebug(on, "Received user=", e.uid), await this.authCredentialListener(e), 
                this.user = e;
            })), this.appCheckCredentials.start(n, (e => (__PRIVATE_logDebug(on, "Received new app check token=", e), 
            this.appCheckCredentialListener(e, this.user))));
        }
        get configuration() {
            return {
                asyncQueue: this.asyncQueue,
                databaseInfo: this.databaseInfo,
                clientId: this.clientId,
                authCredentials: this.authCredentials,
                appCheckCredentials: this.appCheckCredentials,
                initialUser: this.user,
                maxConcurrentLimboResolutions: 100
            };
        }
        setCredentialChangeListener(e) {
            this.authCredentialListener = e;
        }
        setAppCheckTokenChangeListener(e) {
            this.appCheckCredentialListener = e;
        }
        terminate() {
            this.asyncQueue.enterRestrictedMode();
            const e = new __PRIVATE_Deferred;
            return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async () => {
                try {
                    this._onlineComponents && await this._onlineComponents.terminate(), this._offlineComponents && await this._offlineComponents.terminate(), 
                    // The credentials provider must be terminated after shutting down the
                    // RemoteStore as it will prevent the RemoteStore from retrieving auth
                    // tokens.
                    this.authCredentials.shutdown(), this.appCheckCredentials.shutdown(), e.resolve();
                } catch (t) {
                    const n = __PRIVATE_wrapInUserErrorIfRecoverable(t, "Failed to shutdown persistence");
                    e.reject(n);
                }
            })), e.promise;
        }
    }

    async function __PRIVATE_setOfflineComponentProvider(e, t) {
        e.asyncQueue.verifyOperationInProgress(), __PRIVATE_logDebug(on, "Initializing OfflineComponentProvider");
        const n = e.configuration;
        await t.initialize(n);
        let r = n.initialUser;
        e.setCredentialChangeListener((async e => {
            r.isEqual(e) || (await __PRIVATE_localStoreHandleUserChange(t.localStore, e), r = e);
        })), 
        // When a user calls clearPersistence() in one client, all other clients
        // need to be terminated to allow the delete to succeed.
        t.persistence.setDatabaseDeletedListener((() => e.terminate())), e._offlineComponents = t;
    }

    async function __PRIVATE_setOnlineComponentProvider(e, t) {
        e.asyncQueue.verifyOperationInProgress();
        const n = await __PRIVATE_ensureOfflineComponents(e);
        __PRIVATE_logDebug(on, "Initializing OnlineComponentProvider"), await t.initialize(n, e.configuration), 
        // The CredentialChangeListener of the online component provider takes
        // precedence over the offline component provider.
        e.setCredentialChangeListener((e => __PRIVATE_remoteStoreHandleCredentialChange(t.remoteStore, e))), 
        e.setAppCheckTokenChangeListener(((e, n) => __PRIVATE_remoteStoreHandleCredentialChange(t.remoteStore, n))), 
        e._onlineComponents = t;
    }

    /**
     * Decides whether the provided error allows us to gracefully disable
     * persistence (as opposed to crashing the client).
     */ async function __PRIVATE_ensureOfflineComponents(e) {
        if (!e._offlineComponents) if (e._uninitializedComponentsProvider) {
            __PRIVATE_logDebug(on, "Using user provided OfflineComponentProvider");
            try {
                await __PRIVATE_setOfflineComponentProvider(e, e._uninitializedComponentsProvider._offline);
            } catch (t) {
                const n = t;
                if (!function __PRIVATE_canFallbackFromIndexedDbError(e) {
                    return "FirebaseError" === e.name ? e.code === N.FAILED_PRECONDITION || e.code === N.UNIMPLEMENTED : !("undefined" != typeof DOMException && e instanceof DOMException) || 
                    // When the browser is out of quota we could get either quota exceeded
                    // or an aborted error depending on whether the error happened during
                    // schema migration.
                    22 === e.code || 20 === e.code || 
                    // Firefox Private Browsing mode disables IndexedDb and returns
                    // INVALID_STATE for any usage.
                    11 === e.code;
                }(n)) throw n;
                __PRIVATE_logWarn("Error using user provided cache. Falling back to memory cache: " + n), 
                await __PRIVATE_setOfflineComponentProvider(e, new __PRIVATE_MemoryOfflineComponentProvider);
            }
        } else __PRIVATE_logDebug(on, "Using default OfflineComponentProvider"), await __PRIVATE_setOfflineComponentProvider(e, new __PRIVATE_LruGcMemoryOfflineComponentProvider(void 0));
        return e._offlineComponents;
    }

    async function __PRIVATE_ensureOnlineComponents(e) {
        return e._onlineComponents || (e._uninitializedComponentsProvider ? (__PRIVATE_logDebug(on, "Using user provided OnlineComponentProvider"), 
        await __PRIVATE_setOnlineComponentProvider(e, e._uninitializedComponentsProvider._online)) : (__PRIVATE_logDebug(on, "Using default OnlineComponentProvider"), 
        await __PRIVATE_setOnlineComponentProvider(e, new OnlineComponentProvider))), e._onlineComponents;
    }

    async function __PRIVATE_getEventManager(e) {
        const t = await __PRIVATE_ensureOnlineComponents(e), n = t.eventManager;
        return n.onListen = __PRIVATE_syncEngineListen.bind(null, t.syncEngine), n.onUnlisten = __PRIVATE_syncEngineUnlisten.bind(null, t.syncEngine), 
        n.onFirstRemoteStoreListen = __PRIVATE_triggerRemoteStoreListen.bind(null, t.syncEngine), 
        n.onLastRemoteStoreUnlisten = __PRIVATE_triggerRemoteStoreUnlisten.bind(null, t.syncEngine), 
        n;
    }

    function __PRIVATE_firestoreClientGetDocumentsViaSnapshotListener(e, t, n = {}) {
        const r = new __PRIVATE_Deferred;
        return e.asyncQueue.enqueueAndForget((async () => function __PRIVATE_executeQueryViaSnapshotListener(e, t, n, r, i) {
            const s = new __PRIVATE_AsyncObserver({
                next: n => {
                    // Mute and remove query first before passing event to user to avoid
                    // user actions affecting the now stale query.
                    s.Nu(), t.enqueueAndForget((() => __PRIVATE_eventManagerUnlisten(e, o))), n.fromCache && "server" === r.source ? i.reject(new FirestoreError(N.UNAVAILABLE, 'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')) : i.resolve(n);
                },
                error: e => i.reject(e)
            }), o = new __PRIVATE_QueryListener(n, s, {
                includeMetadataChanges: true,
                qa: true
            });
            return __PRIVATE_eventManagerListen(e, o);
        }(await __PRIVATE_getEventManager(e), e.asyncQueue, t, n, r))), r.promise;
    }

    /**
     * @license
     * Copyright 2023 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * Compares two `ExperimentalLongPollingOptions` objects for equality.
     */
    /**
     * Creates and returns a new `ExperimentalLongPollingOptions` with the same
     * option values as the given instance.
     */
    function __PRIVATE_cloneLongPollingOptions(e) {
        const t = {};
        return void 0 !== e.timeoutSeconds && (t.timeoutSeconds = e.timeoutSeconds), t;
    }

    /**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */ const _n = new Map;

    /**
     * An instance map that ensures only one Datastore exists per Firestore
     * instance.
     */
    /**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    // settings() defaults:
    const an = "firestore.googleapis.com", un = true;

    /**
     * A concrete type describing all the values that can be applied via a
     * user-supplied `FirestoreSettings` object. This is a separate type so that
     * defaults can be supplied and the value can be checked for equality.
     */
    class FirestoreSettingsImpl {
        constructor(e) {
            if (void 0 === e.host) {
                if (void 0 !== e.ssl) throw new FirestoreError(N.INVALID_ARGUMENT, "Can't provide ssl option if host option is not set");
                this.host = an, this.ssl = un;
            } else this.host = e.host, this.ssl = e.ssl ?? un;
            if (this.isUsingEmulator = void 0 !== e.emulatorOptions, this.credentials = e.credentials, 
            this.ignoreUndefinedProperties = !!e.ignoreUndefinedProperties, this.localCache = e.localCache, 
            void 0 === e.cacheSizeBytes) this.cacheSizeBytes = Ot; else {
                if (-1 !== e.cacheSizeBytes && e.cacheSizeBytes < Bt) throw new FirestoreError(N.INVALID_ARGUMENT, "cacheSizeBytes must be at least 1048576");
                this.cacheSizeBytes = e.cacheSizeBytes;
            }
            __PRIVATE_validateIsNotUsedTogether("experimentalForceLongPolling", e.experimentalForceLongPolling, "experimentalAutoDetectLongPolling", e.experimentalAutoDetectLongPolling), 
            this.experimentalForceLongPolling = !!e.experimentalForceLongPolling, this.experimentalForceLongPolling ? this.experimentalAutoDetectLongPolling = false : void 0 === e.experimentalAutoDetectLongPolling ? this.experimentalAutoDetectLongPolling = true : 
            // For backwards compatibility, coerce the value to boolean even though
            // the TypeScript compiler has narrowed the type to boolean already.
            // noinspection PointlessBooleanExpressionJS
            this.experimentalAutoDetectLongPolling = !!e.experimentalAutoDetectLongPolling, 
            this.experimentalLongPollingOptions = __PRIVATE_cloneLongPollingOptions(e.experimentalLongPollingOptions ?? {}), 
            function __PRIVATE_validateLongPollingOptions(e) {
                if (void 0 !== e.timeoutSeconds) {
                    if (isNaN(e.timeoutSeconds)) throw new FirestoreError(N.INVALID_ARGUMENT, `invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);
                    if (e.timeoutSeconds < 5) throw new FirestoreError(N.INVALID_ARGUMENT, `invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);
                    if (e.timeoutSeconds > 30) throw new FirestoreError(N.INVALID_ARGUMENT, `invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`);
                }
            }
            /**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
            /**
     * The Cloud Firestore service interface.
     *
     * Do not call this constructor directly. Instead, use {@link (getFirestore:1)}.
     */ (this.experimentalLongPollingOptions), this.useFetchStreams = !!e.useFetchStreams;
        }
        isEqual(e) {
            return this.host === e.host && this.ssl === e.ssl && this.credentials === e.credentials && this.cacheSizeBytes === e.cacheSizeBytes && this.experimentalForceLongPolling === e.experimentalForceLongPolling && this.experimentalAutoDetectLongPolling === e.experimentalAutoDetectLongPolling && function __PRIVATE_longPollingOptionsEqual(e, t) {
                return e.timeoutSeconds === t.timeoutSeconds;
            }(this.experimentalLongPollingOptions, e.experimentalLongPollingOptions) && this.ignoreUndefinedProperties === e.ignoreUndefinedProperties && this.useFetchStreams === e.useFetchStreams;
        }
    }

    class Firestore$1 {
        /** @hideconstructor */
        constructor(e, t, n, r) {
            this._authCredentials = e, this._appCheckCredentials = t, this._databaseId = n, 
            this._app = r, 
            /**
             * Whether it's a Firestore or Firestore Lite instance.
             */
            this.type = "firestore-lite", this._persistenceKey = "(lite)", this._settings = new FirestoreSettingsImpl({}), 
            this._settingsFrozen = false, this._emulatorOptions = {}, 
            // A task that is assigned when the terminate() is invoked and resolved when
            // all components have shut down. Otherwise, Firestore is not terminated,
            // which can mean either the FirestoreClient is in the process of starting,
            // or restarting.
            this._terminateTask = "notTerminated";
        }
        /**
         * The {@link @firebase/app#FirebaseApp} associated with this `Firestore` service
         * instance.
         */    get app() {
            if (!this._app) throw new FirestoreError(N.FAILED_PRECONDITION, "Firestore was not initialized using the Firebase SDK. 'app' is not available");
            return this._app;
        }
        get _initialized() {
            return this._settingsFrozen;
        }
        get _terminated() {
            return "notTerminated" !== this._terminateTask;
        }
        _setSettings(e) {
            if (this._settingsFrozen) throw new FirestoreError(N.FAILED_PRECONDITION, "Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");
            this._settings = new FirestoreSettingsImpl(e), this._emulatorOptions = e.emulatorOptions || {}, 
            void 0 !== e.credentials && (this._authCredentials = function __PRIVATE_makeAuthCredentialsProvider(e) {
                if (!e) return new __PRIVATE_EmptyAuthCredentialsProvider;
                switch (e.type) {
                  case "firstParty":
                    return new __PRIVATE_FirstPartyAuthCredentialsProvider(e.sessionIndex || "0", e.iamToken || null, e.authTokenFactory || null);

                  case "provider":
                    return e.client;

                  default:
                    throw new FirestoreError(N.INVALID_ARGUMENT, "makeAuthCredentialsProvider failed due to invalid credential type");
                }
            }(e.credentials));
        }
        _getSettings() {
            return this._settings;
        }
        _getEmulatorOptions() {
            return this._emulatorOptions;
        }
        _freezeSettings() {
            return this._settingsFrozen = true, this._settings;
        }
        _delete() {
            // The `_terminateTask` must be assigned future that completes when
            // terminate is complete. The existence of this future puts SDK in state
            // that will not accept further API interaction.
            return "notTerminated" === this._terminateTask && (this._terminateTask = this._terminate()), 
            this._terminateTask;
        }
        async _restart() {
            // The `_terminateTask` must equal 'notTerminated' after restart to
            // signal that client is in a state that accepts API calls.
            "notTerminated" === this._terminateTask ? await this._terminate() : this._terminateTask = "notTerminated";
        }
        /** Returns a JSON-serializable representation of this `Firestore` instance. */    toJSON() {
            return {
                app: this._app,
                databaseId: this._databaseId,
                settings: this._settings
            };
        }
        /**
         * Terminates all components used by this client. Subclasses can override
         * this method to clean up their own dependencies, but must also call this
         * method.
         *
         * Only ever called once.
         */    _terminate() {
            /**
     * Removes all components associated with the provided instance. Must be called
     * when the `Firestore` instance is terminated.
     */
            return function __PRIVATE_removeComponents(e) {
                const t = _n.get(e);
                t && (__PRIVATE_logDebug("ComponentProvider", "Removing Datastore"), _n.delete(e), 
                t.terminate());
            }(this), Promise.resolve();
        }
    }

    /**
     * Modify this instance to communicate with the Cloud Firestore emulator.
     *
     * Note: This must be called before this instance has been used to do any
     * operations.
     *
     * @param firestore - The `Firestore` instance to configure to connect to the
     * emulator.
     * @param host - the emulator host (ex: localhost).
     * @param port - the emulator port (ex: 9000).
     * @param options.mockUserToken - the mock auth token to use for unit testing
     * Security Rules.
     */ function connectFirestoreEmulator(e, t, n, r = {}) {
        e = __PRIVATE_cast(e, Firestore$1);
        const i = isCloudWorkstation(t), s = e._getSettings(), o = {
            ...s,
            emulatorOptions: e._getEmulatorOptions()
        }, _ = `${t}:${n}`;
        i && (pingServer(`https://${_}`), updateEmulatorBanner("Firestore", true)), s.host !== an && s.host !== _ && __PRIVATE_logWarn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");
        const a = {
            ...s,
            host: _,
            ssl: i,
            emulatorOptions: r
        };
        // No-op if the new configuration matches the current configuration. This supports SSR
        // enviornments which might call `connectFirestoreEmulator` multiple times as a standard practice.
            if (!deepEqual(a, o) && (e._setSettings(a), r.mockUserToken)) {
            let t, n;
            if ("string" == typeof r.mockUserToken) t = r.mockUserToken, n = User.MOCK_USER; else {
                // Let createMockUserToken validate first (catches common mistakes like
                // invalid field "uid" and missing field "sub" / "user_id".)
                t = createMockUserToken(r.mockUserToken, e._app?.options.projectId);
                const i = r.mockUserToken.sub || r.mockUserToken.user_id;
                if (!i) throw new FirestoreError(N.INVALID_ARGUMENT, "mockUserToken must contain 'sub' or 'user_id' field!");
                n = new User(i);
            }
            e._authCredentials = new __PRIVATE_EmulatorAuthCredentialsProvider(new __PRIVATE_OAuthToken(t, n));
        }
    }

    /**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * A `Query` refers to a query which you can read or listen to. You can also
     * construct refined `Query` objects by adding filters and ordering.
     */ class Query {
        // This is the lite version of the Query class in the main SDK.
        /** @hideconstructor protected */
        constructor(e, 
        /**
         * If provided, the `FirestoreDataConverter` associated with this instance.
         */
        t, n) {
            this.converter = t, this._query = n, 
            /** The type of this Firestore reference. */
            this.type = "query", this.firestore = e;
        }
        withConverter(e) {
            return new Query(this.firestore, e, this._query);
        }
    }

    /**
     * A `DocumentReference` refers to a document location in a Firestore database
     * and can be used to write, read, or listen to the location. The document at
     * the referenced location may or may not exist.
     */ class DocumentReference {
        /** @hideconstructor */
        constructor(e, 
        /**
         * If provided, the `FirestoreDataConverter` associated with this instance.
         */
        t, n) {
            this.converter = t, this._key = n, 
            /** The type of this Firestore reference. */
            this.type = "document", this.firestore = e;
        }
        get _path() {
            return this._key.path;
        }
        /**
         * The document's identifier within its collection.
         */    get id() {
            return this._key.path.lastSegment();
        }
        /**
         * A string representing the path of the referenced document (relative
         * to the root of the database).
         */    get path() {
            return this._key.path.canonicalString();
        }
        /**
         * The collection this `DocumentReference` belongs to.
         */    get parent() {
            return new CollectionReference(this.firestore, this.converter, this._key.path.popLast());
        }
        withConverter(e) {
            return new DocumentReference(this.firestore, e, this._key);
        }
        /**
         * Returns a JSON-serializable representation of this `DocumentReference` instance.
         *
         * @returns a JSON representation of this object.
         */    toJSON() {
            return {
                type: DocumentReference._jsonSchemaVersion,
                referencePath: this._key.toString()
            };
        }
        static fromJSON(e, t, n) {
            if (__PRIVATE_validateJSON(t, DocumentReference._jsonSchema)) return new DocumentReference(e, n || null, new DocumentKey(ResourcePath.fromString(t.referencePath)));
        }
    }

    DocumentReference._jsonSchemaVersion = "firestore/documentReference/1.0", DocumentReference._jsonSchema = {
        type: property("string", DocumentReference._jsonSchemaVersion),
        referencePath: property("string")
    };

    /**
     * A `CollectionReference` object can be used for adding documents, getting
     * document references, and querying for documents (using {@link (query:1)}).
     */
    class CollectionReference extends Query {
        /** @hideconstructor */
        constructor(e, t, n) {
            super(e, t, __PRIVATE_newQueryForPath(n)), this._path = n, 
            /** The type of this Firestore reference. */
            this.type = "collection";
        }
        /** The collection's identifier. */    get id() {
            return this._query.path.lastSegment();
        }
        /**
         * A string representing the path of the referenced collection (relative
         * to the root of the database).
         */    get path() {
            return this._query.path.canonicalString();
        }
        /**
         * A reference to the containing `DocumentReference` if this is a
         * subcollection. If this isn't a subcollection, the reference is null.
         */    get parent() {
            const e = this._path.popLast();
            return e.isEmpty() ? null : new DocumentReference(this.firestore, 
            /* converter= */ null, new DocumentKey(e));
        }
        withConverter(e) {
            return new CollectionReference(this.firestore, e, this._path);
        }
    }

    function collection(e, t, ...n) {
        if (e = getModularInstance(e), e instanceof Firestore$1) {
            const r = ResourcePath.fromString(t, ...n);
            return __PRIVATE_validateCollectionPath(r), new CollectionReference(e, /* converter= */ null, r);
        }
        {
            if (!(e instanceof DocumentReference || e instanceof CollectionReference)) throw new FirestoreError(N.INVALID_ARGUMENT, "Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");
            const r = e._path.child(ResourcePath.fromString(t, ...n));
            return __PRIVATE_validateCollectionPath(r), new CollectionReference(e.firestore, 
            /* converter= */ null, r);
        }
    }

    /**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */ const cn = "AsyncQueue";

    class __PRIVATE_AsyncQueueImpl {
        constructor(e = Promise.resolve()) {
            // A list of retryable operations. Retryable operations are run in order and
            // retried with backoff.
            this.Xu = [], 
            // Is this AsyncQueue being shut down? Once it is set to true, it will not
            // be changed again.
            this.ec = false, 
            // Operations scheduled to be queued in the future. Operations are
            // automatically removed after they are run or canceled.
            this.tc = [], 
            // visible for testing
            this.nc = null, 
            // Flag set while there's an outstanding AsyncQueue operation, used for
            // assertion sanity-checks.
            this.rc = false, 
            // Enabled during shutdown on Safari to prevent future access to IndexedDB.
            this.sc = false, 
            // List of TimerIds to fast-forward delays for.
            this.oc = [], 
            // Backoff timer used to schedule retries for retryable operations
            this.M_ = new __PRIVATE_ExponentialBackoff(this, "async_queue_retry" /* TimerId.AsyncQueueRetry */), 
            // Visibility handler that triggers an immediate retry of all retryable
            // operations. Meant to speed up recovery when we regain file system access
            // after page comes into foreground.
            this._c = () => {
                const e = getDocument();
                e && __PRIVATE_logDebug(cn, "Visibility state changed to " + e.visibilityState), 
                this.M_.w_();
            }, this.ac = e;
            const t = getDocument();
            t && "function" == typeof t.addEventListener && t.addEventListener("visibilitychange", this._c);
        }
        get isShuttingDown() {
            return this.ec;
        }
        /**
         * Adds a new operation to the queue without waiting for it to complete (i.e.
         * we ignore the Promise result).
         */    enqueueAndForget(e) {
            // eslint-disable-next-line @typescript-eslint/no-floating-promises
            this.enqueue(e);
        }
        enqueueAndForgetEvenWhileRestricted(e) {
            this.uc(), 
            // eslint-disable-next-line @typescript-eslint/no-floating-promises
            this.cc(e);
        }
        enterRestrictedMode(e) {
            if (!this.ec) {
                this.ec = true, this.sc = e || false;
                const t = getDocument();
                t && "function" == typeof t.removeEventListener && t.removeEventListener("visibilitychange", this._c);
            }
        }
        enqueue(e) {
            if (this.uc(), this.ec) 
            // Return a Promise which never resolves.
            return new Promise((() => {}));
            // Create a deferred Promise that we can return to the callee. This
            // allows us to return a "hanging Promise" only to the callee and still
            // advance the queue even when the operation is not run.
                    const t = new __PRIVATE_Deferred;
            return this.cc((() => this.ec && this.sc ? Promise.resolve() : (e().then(t.resolve, t.reject), 
            t.promise))).then((() => t.promise));
        }
        enqueueRetryable(e) {
            this.enqueueAndForget((() => (this.Xu.push(e), this.lc())));
        }
        /**
         * Runs the next operation from the retryable queue. If the operation fails,
         * reschedules with backoff.
         */    async lc() {
            if (0 !== this.Xu.length) {
                try {
                    await this.Xu[0](), this.Xu.shift(), this.M_.reset();
                } catch (e) {
                    if (!__PRIVATE_isIndexedDbTransactionError(e)) throw e;
     // Failure will be handled by AsyncQueue
                                    __PRIVATE_logDebug(cn, "Operation failed with retryable error: " + e);
                }
                this.Xu.length > 0 && 
                // If there are additional operations, we re-schedule `retryNextOp()`.
                // This is necessary to run retryable operations that failed during
                // their initial attempt since we don't know whether they are already
                // enqueued. If, for example, `op1`, `op2`, `op3` are enqueued and `op1`
                // needs to  be re-run, we will run `op1`, `op1`, `op2` using the
                // already enqueued calls to `retryNextOp()`. `op3()` will then run in the
                // call scheduled here.
                // Since `backoffAndRun()` cancels an existing backoff and schedules a
                // new backoff on every call, there is only ever a single additional
                // operation in the queue.
                this.M_.p_((() => this.lc()));
            }
        }
        cc(e) {
            const t = this.ac.then((() => (this.rc = true, e().catch((e => {
                this.nc = e, this.rc = false;
                // Re-throw the error so that this.tail becomes a rejected Promise and
                // all further attempts to chain (via .then) will just short-circuit
                // and return the rejected Promise.
                throw __PRIVATE_logError("INTERNAL UNHANDLED ERROR: ", __PRIVATE_getMessageOrStack(e)), 
                e;
            })).then((e => (this.rc = false, e))))));
            return this.ac = t, t;
        }
        enqueueAfterDelay(e, t, n) {
            this.uc(), 
            // Fast-forward delays for timerIds that have been overridden.
            this.oc.indexOf(e) > -1 && (t = 0);
            const r = DelayedOperation.createAndSchedule(this, e, t, n, (e => this.hc(e)));
            return this.tc.push(r), r;
        }
        uc() {
            this.nc && fail(47125, {
                Pc: __PRIVATE_getMessageOrStack(this.nc)
            });
        }
        verifyOperationInProgress() {}
        /**
         * Waits until all currently queued tasks are finished executing. Delayed
         * operations are not run.
         */    async Tc() {
            // Operations in the queue prior to draining may have enqueued additional
            // operations. Keep draining the queue until the tail is no longer advanced,
            // which indicates that no more new operations were enqueued and that all
            // operations were executed.
            let e;
            do {
                e = this.ac, await e;
            } while (e !== this.ac);
        }
        /**
         * For Tests: Determine if a delayed operation with a particular TimerId
         * exists.
         */    Ic(e) {
            for (const t of this.tc) if (t.timerId === e) return true;
            return false;
        }
        /**
         * For Tests: Runs some or all delayed operations early.
         *
         * @param lastTimerId - Delayed operations up to and including this TimerId
         * will be drained. Pass TimerId.All to run all delayed operations.
         * @returns a Promise that resolves once all operations have been run.
         */    Ec(e) {
            // Note that draining may generate more delayed ops, so we do that first.
            return this.Tc().then((() => {
                // Run ops in the same order they'd run if they ran naturally.
                /* eslint-disable-next-line @typescript-eslint/no-floating-promises */
                this.tc.sort(((e, t) => e.targetTimeMs - t.targetTimeMs));
                for (const t of this.tc) if (t.skipDelay(), "all" /* TimerId.All */ !== e && t.timerId === e) break;
                return this.Tc();
            }));
        }
        /**
         * For Tests: Skip all subsequent delays for a timer id.
         */    dc(e) {
            this.oc.push(e);
        }
        /** Called once a DelayedOperation is run or canceled. */    hc(e) {
            // NOTE: indexOf / slice are O(n), but delayedOperations is expected to be small.
            const t = this.tc.indexOf(e);
            /* eslint-disable-next-line @typescript-eslint/no-floating-promises */        this.tc.splice(t, 1);
        }
    }

    /**
     * Chrome includes Error.message in Error.stack. Other browsers do not.
     * This returns expected output of message + stack when available.
     * @param error - Error or FirestoreError
     */ function __PRIVATE_getMessageOrStack(e) {
        let t = e.message || "";
        return e.stack && (t = e.stack.includes(e.message) ? e.stack : e.message + "\n" + e.stack), 
        t;
    }

    /**
     * The Cloud Firestore service interface.
     *
     * Do not call this constructor directly. Instead, use {@link (getFirestore:1)}.
     */ class Firestore extends Firestore$1 {
        /** @hideconstructor */
        constructor(e, t, n, r) {
            super(e, t, n, r), 
            /**
             * Whether it's a {@link Firestore} or Firestore Lite instance.
             */
            this.type = "firestore", this._queue = new __PRIVATE_AsyncQueueImpl, this._persistenceKey = r?.name || "[DEFAULT]";
        }
        async _terminate() {
            if (this._firestoreClient) {
                const e = this._firestoreClient.terminate();
                this._queue = new __PRIVATE_AsyncQueueImpl(e), this._firestoreClient = void 0, await e;
            }
        }
    }

    function getFirestore(e, n) {
        const r = "object" == typeof e ? e : getApp(), i = "string" == typeof e ? e : lt, s = _getProvider(r, "firestore").getImmediate({
            identifier: i
        });
        if (!s._initialized) {
            const e = getDefaultEmulatorHostnameAndPort("firestore");
            e && connectFirestoreEmulator(s, ...e);
        }
        return s;
    }

    /**
     * @internal
     */ function ensureFirestoreConfigured(e) {
        if (e._terminated) throw new FirestoreError(N.FAILED_PRECONDITION, "The client has already been terminated.");
        return e._firestoreClient || __PRIVATE_configureFirestore(e), e._firestoreClient;
    }

    function __PRIVATE_configureFirestore(e) {
        const t = e._freezeSettings(), n = function __PRIVATE_makeDatabaseInfo(e, t, n, r) {
            return new DatabaseInfo(e, t, n, r.host, r.ssl, r.experimentalForceLongPolling, r.experimentalAutoDetectLongPolling, __PRIVATE_cloneLongPollingOptions(r.experimentalLongPollingOptions), r.useFetchStreams, r.isUsingEmulator);
        }(e._databaseId, e._app?.options.appId || "", e._persistenceKey, t);
        e._componentsProvider || t.localCache?._offlineComponentProvider && t.localCache?._onlineComponentProvider && (e._componentsProvider = {
            _offline: t.localCache._offlineComponentProvider,
            _online: t.localCache._onlineComponentProvider
        }), e._firestoreClient = new FirestoreClient(e._authCredentials, e._appCheckCredentials, e._queue, n, e._componentsProvider && function __PRIVATE_buildComponentProvider(e) {
            const t = e?._online.build();
            return {
                _offline: e?._offline.build(t),
                _online: t
            };
        }
        /**
     * Attempts to enable persistent storage, if possible.
     *
     * On failure, `enableIndexedDbPersistence()` will reject the promise or
     * throw an exception. There are several reasons why this can fail, which can be
     * identified by the `code` on the error.
     *
     *   * failed-precondition: The app is already open in another browser tab.
     *   * unimplemented: The browser is incompatible with the offline persistence
     *     implementation.
     *
     * Note that even after a failure, the {@link Firestore} instance will remain
     * usable, however offline persistence will be disabled.
     *
     * Note: `enableIndexedDbPersistence()` must be called before any other functions
     * (other than {@link initializeFirestore}, {@link (getFirestore:1)} or
     * {@link clearIndexedDbPersistence}.
     *
     * Persistence cannot be used in a Node.js environment.
     *
     * @param firestore - The {@link Firestore} instance to enable persistence for.
     * @param persistenceSettings - Optional settings object to configure
     * persistence.
     * @returns A `Promise` that represents successfully enabling persistent storage.
     * @deprecated This function will be removed in a future major release. Instead, set
     * `FirestoreSettings.localCache` to an instance of `PersistentLocalCache` to
     * turn on IndexedDb cache. Calling this function when `FirestoreSettings.localCache`
     * is already specified will throw an exception.
     */ (e._componentsProvider));
    }

    /**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * An immutable object representing an array of bytes.
     */ class Bytes {
        /** @hideconstructor */
        constructor(e) {
            this._byteString = e;
        }
        /**
         * Creates a new `Bytes` object from the given Base64 string, converting it to
         * bytes.
         *
         * @param base64 - The Base64 string used to create the `Bytes` object.
         */    static fromBase64String(e) {
            try {
                return new Bytes(ByteString.fromBase64String(e));
            } catch (e) {
                throw new FirestoreError(N.INVALID_ARGUMENT, "Failed to construct data from Base64 string: " + e);
            }
        }
        /**
         * Creates a new `Bytes` object from the given Uint8Array.
         *
         * @param array - The Uint8Array used to create the `Bytes` object.
         */    static fromUint8Array(e) {
            return new Bytes(ByteString.fromUint8Array(e));
        }
        /**
         * Returns the underlying bytes as a Base64-encoded string.
         *
         * @returns The Base64-encoded string created from the `Bytes` object.
         */    toBase64() {
            return this._byteString.toBase64();
        }
        /**
         * Returns the underlying bytes in a new `Uint8Array`.
         *
         * @returns The Uint8Array created from the `Bytes` object.
         */    toUint8Array() {
            return this._byteString.toUint8Array();
        }
        /**
         * Returns a string representation of the `Bytes` object.
         *
         * @returns A string representation of the `Bytes` object.
         */    toString() {
            return "Bytes(base64: " + this.toBase64() + ")";
        }
        /**
         * Returns true if this `Bytes` object is equal to the provided one.
         *
         * @param other - The `Bytes` object to compare against.
         * @returns true if this `Bytes` object is equal to the provided one.
         */    isEqual(e) {
            return this._byteString.isEqual(e._byteString);
        }
        /**
         * Returns a JSON-serializable representation of this `Bytes` instance.
         *
         * @returns a JSON representation of this object.
         */    toJSON() {
            return {
                type: Bytes._jsonSchemaVersion,
                bytes: this.toBase64()
            };
        }
        /**
         * Builds a `Bytes` instance from a JSON object created by {@link Bytes.toJSON}.
         *
         * @param json a JSON object represention of a `Bytes` instance
         * @returns an instance of {@link Bytes} if the JSON object could be parsed. Throws a
         * {@link FirestoreError} if an error occurs.
         */    static fromJSON(e) {
            if (__PRIVATE_validateJSON(e, Bytes._jsonSchema)) return Bytes.fromBase64String(e.bytes);
        }
    }

    Bytes._jsonSchemaVersion = "firestore/bytes/1.0", Bytes._jsonSchema = {
        type: property("string", Bytes._jsonSchemaVersion),
        bytes: property("string")
    };

    /**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * A `FieldPath` refers to a field in a document. The path may consist of a
     * single field name (referring to a top-level field in the document), or a
     * list of field names (referring to a nested field in the document).
     *
     * Create a `FieldPath` by providing field names. If more than one field
     * name is provided, the path will point to a nested field in a document.
     */
    class FieldPath {
        /**
         * Creates a `FieldPath` from the provided field names. If more than one field
         * name is provided, the path will point to a nested field in a document.
         *
         * @param fieldNames - A list of field names.
         */
        constructor(...e) {
            for (let t = 0; t < e.length; ++t) if (0 === e[t].length) throw new FirestoreError(N.INVALID_ARGUMENT, "Invalid field name at argument $(i + 1). Field names must not be empty.");
            this._internalPath = new FieldPath$1(e);
        }
        /**
         * Returns true if this `FieldPath` is equal to the provided one.
         *
         * @param other - The `FieldPath` to compare against.
         * @returns true if this `FieldPath` is equal to the provided one.
         */    isEqual(e) {
            return this._internalPath.isEqual(e._internalPath);
        }
    }

    /**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * Sentinel values that can be used when writing document fields with `set()`
     * or `update()`.
     */ class FieldValue {
        /**
         * @param _methodName - The public API endpoint that returns this class.
         * @hideconstructor
         */
        constructor(e) {
            this._methodName = e;
        }
    }

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * An immutable object representing a geographic location in Firestore. The
     * location is represented as latitude/longitude pair.
     *
     * Latitude values are in the range of [-90, 90].
     * Longitude values are in the range of [-180, 180].
     */ class GeoPoint {
        /**
         * Creates a new immutable `GeoPoint` object with the provided latitude and
         * longitude values.
         * @param latitude - The latitude as number between -90 and 90.
         * @param longitude - The longitude as number between -180 and 180.
         */
        constructor(e, t) {
            if (!isFinite(e) || e < -90 || e > 90) throw new FirestoreError(N.INVALID_ARGUMENT, "Latitude must be a number between -90 and 90, but was: " + e);
            if (!isFinite(t) || t < -180 || t > 180) throw new FirestoreError(N.INVALID_ARGUMENT, "Longitude must be a number between -180 and 180, but was: " + t);
            this._lat = e, this._long = t;
        }
        /**
         * The latitude of this `GeoPoint` instance.
         */    get latitude() {
            return this._lat;
        }
        /**
         * The longitude of this `GeoPoint` instance.
         */    get longitude() {
            return this._long;
        }
        /**
         * Returns true if this `GeoPoint` is equal to the provided one.
         *
         * @param other - The `GeoPoint` to compare against.
         * @returns true if this `GeoPoint` is equal to the provided one.
         */    isEqual(e) {
            return this._lat === e._lat && this._long === e._long;
        }
        /**
         * Actually private to JS consumers of our API, so this function is prefixed
         * with an underscore.
         */    _compareTo(e) {
            return __PRIVATE_primitiveComparator(this._lat, e._lat) || __PRIVATE_primitiveComparator(this._long, e._long);
        }
        /**
         * Returns a JSON-serializable representation of this `GeoPoint` instance.
         *
         * @returns a JSON representation of this object.
         */    toJSON() {
            return {
                latitude: this._lat,
                longitude: this._long,
                type: GeoPoint._jsonSchemaVersion
            };
        }
        /**
         * Builds a `GeoPoint` instance from a JSON object created by {@link GeoPoint.toJSON}.
         *
         * @param json a JSON object represention of a `GeoPoint` instance
         * @returns an instance of {@link GeoPoint} if the JSON object could be parsed. Throws a
         * {@link FirestoreError} if an error occurs.
         */    static fromJSON(e) {
            if (__PRIVATE_validateJSON(e, GeoPoint._jsonSchema)) return new GeoPoint(e.latitude, e.longitude);
        }
    }

    GeoPoint._jsonSchemaVersion = "firestore/geoPoint/1.0", GeoPoint._jsonSchema = {
        type: property("string", GeoPoint._jsonSchemaVersion),
        latitude: property("number"),
        longitude: property("number")
    };

    /**
     * @license
     * Copyright 2024 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * Represents a vector type in Firestore documents.
     * Create an instance with <code>{@link vector}</code>.
     *
     * @class VectorValue
     */
    class VectorValue {
        /**
         * @private
         * @internal
         */
        constructor(e) {
            // Making a copy of the parameter.
            this._values = (e || []).map((e => e));
        }
        /**
         * Returns a copy of the raw number array form of the vector.
         */    toArray() {
            return this._values.map((e => e));
        }
        /**
         * Returns `true` if the two `VectorValue` values have the same raw number arrays, returns `false` otherwise.
         */    isEqual(e) {
            return function __PRIVATE_isPrimitiveArrayEqual(e, t) {
                if (e.length !== t.length) return false;
                for (let n = 0; n < e.length; ++n) if (e[n] !== t[n]) return false;
                return true;
            }(this._values, e._values);
        }
        /**
         * Returns a JSON-serializable representation of this `VectorValue` instance.
         *
         * @returns a JSON representation of this object.
         */    toJSON() {
            return {
                type: VectorValue._jsonSchemaVersion,
                vectorValues: this._values
            };
        }
        /**
         * Builds a `VectorValue` instance from a JSON object created by {@link VectorValue.toJSON}.
         *
         * @param json a JSON object represention of a `VectorValue` instance.
         * @returns an instance of {@link VectorValue} if the JSON object could be parsed. Throws a
         * {@link FirestoreError} if an error occurs.
         */    static fromJSON(e) {
            if (__PRIVATE_validateJSON(e, VectorValue._jsonSchema)) {
                if (Array.isArray(e.vectorValues) && e.vectorValues.every((e => "number" == typeof e))) return new VectorValue(e.vectorValues);
                throw new FirestoreError(N.INVALID_ARGUMENT, "Expected 'vectorValues' field to be a number array");
            }
        }
    }

    VectorValue._jsonSchemaVersion = "firestore/vectorValue/1.0", VectorValue._jsonSchema = {
        type: property("string", VectorValue._jsonSchemaVersion),
        vectorValues: property("object")
    };

    /**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    const hn = /^__.*__$/;

    function __PRIVATE_isWrite(e) {
        switch (e) {
          case 0 /* UserDataSource.Set */ :
     // fall through
                  case 2 /* UserDataSource.MergeSet */ :
     // fall through
                  case 1 /* UserDataSource.Update */ :
            return true;

          case 3 /* UserDataSource.Argument */ :
          case 4 /* UserDataSource.ArrayArgument */ :
            return false;

          default:
            throw fail(40011, {
                Ac: e
            });
        }
    }

    /** A "context" object passed around while parsing user data. */ class __PRIVATE_ParseContextImpl {
        /**
         * Initializes a ParseContext with the given source and path.
         *
         * @param settings - The settings for the parser.
         * @param databaseId - The database ID of the Firestore instance.
         * @param serializer - The serializer to use to generate the Value proto.
         * @param ignoreUndefinedProperties - Whether to ignore undefined properties
         * rather than throw.
         * @param fieldTransforms - A mutable list of field transforms encountered
         * while parsing the data.
         * @param fieldMask - A mutable list of field paths encountered while parsing
         * the data.
         *
         * TODO(b/34871131): We don't support array paths right now, so path can be
         * null to indicate the context represents any location within an array (in
         * which case certain features will not work and errors will be somewhat
         * compromised).
         */
        constructor(e, t, n, r, i, s) {
            this.settings = e, this.databaseId = t, this.serializer = n, this.ignoreUndefinedProperties = r, 
            // Minor hack: If fieldTransforms is undefined, we assume this is an
            // external call and we need to validate the entire path.
            void 0 === i && this.Rc(), this.fieldTransforms = i || [], this.fieldMask = s || [];
        }
        get path() {
            return this.settings.path;
        }
        get Ac() {
            return this.settings.Ac;
        }
        /** Returns a new context with the specified settings overwritten. */    Vc(e) {
            return new __PRIVATE_ParseContextImpl({
                ...this.settings,
                ...e
            }, this.databaseId, this.serializer, this.ignoreUndefinedProperties, this.fieldTransforms, this.fieldMask);
        }
        mc(e) {
            const t = this.path?.child(e), n = this.Vc({
                path: t,
                fc: false
            });
            return n.gc(e), n;
        }
        yc(e) {
            const t = this.path?.child(e), n = this.Vc({
                path: t,
                fc: false
            });
            return n.Rc(), n;
        }
        wc(e) {
            // TODO(b/34871131): We don't support array paths right now; so make path
            // undefined.
            return this.Vc({
                path: void 0,
                fc: true
            });
        }
        Sc(e) {
            return __PRIVATE_createError(e, this.settings.methodName, this.settings.bc || false, this.path, this.settings.Dc);
        }
        /** Returns 'true' if 'fieldPath' was traversed when creating this context. */    contains(e) {
            return void 0 !== this.fieldMask.find((t => e.isPrefixOf(t))) || void 0 !== this.fieldTransforms.find((t => e.isPrefixOf(t.field)));
        }
        Rc() {
            // TODO(b/34871131): Remove null check once we have proper paths for fields
            // within arrays.
            if (this.path) for (let e = 0; e < this.path.length; e++) this.gc(this.path.get(e));
        }
        gc(e) {
            if (0 === e.length) throw this.Sc("Document fields must not be empty");
            if (__PRIVATE_isWrite(this.Ac) && hn.test(e)) throw this.Sc('Document fields cannot begin and end with "__"');
        }
    }

    /**
     * Helper for parsing raw user input (provided via the API) into internal model
     * classes.
     */ class __PRIVATE_UserDataReader {
        constructor(e, t, n) {
            this.databaseId = e, this.ignoreUndefinedProperties = t, this.serializer = n || __PRIVATE_newSerializer(e);
        }
        /** Creates a new top-level parse context. */    Cc(e, t, n, r = false) {
            return new __PRIVATE_ParseContextImpl({
                Ac: e,
                methodName: t,
                Dc: n,
                path: FieldPath$1.emptyPath(),
                fc: false,
                bc: r
            }, this.databaseId, this.serializer, this.ignoreUndefinedProperties);
        }
    }

    function __PRIVATE_newUserDataReader(e) {
        const t = e._freezeSettings(), n = __PRIVATE_newSerializer(e._databaseId);
        return new __PRIVATE_UserDataReader(e._databaseId, !!t.ignoreUndefinedProperties, n);
    }

    /**
     * Parse a "query value" (e.g. value in a where filter or a value in a cursor
     * bound).
     *
     * @param allowArrays - Whether the query value is an array that may directly
     * contain additional arrays (e.g. the operand of an `in` query).
     */ function __PRIVATE_parseQueryValue(e, t, n, r = false) {
        return __PRIVATE_parseData(n, e.Cc(r ? 4 /* UserDataSource.ArrayArgument */ : 3 /* UserDataSource.Argument */ , t));
    }

    /**
     * Parses user data to Protobuf Values.
     *
     * @param input - Data to be parsed.
     * @param context - A context object representing the current path being parsed,
     * the source of the data being parsed, etc.
     * @returns The parsed value, or null if the value was a FieldValue sentinel
     * that should not be included in the resulting parsed data.
     */ function __PRIVATE_parseData(e, t) {
        if (__PRIVATE_looksLikeJsonObject(
        // Unwrap the API type from the Compat SDK. This will return the API type
        // from firestore-exp.
        e = getModularInstance(e))) return __PRIVATE_validatePlainObject("Unsupported field value:", t, e), 
        __PRIVATE_parseObject(e, t);
        if (e instanceof FieldValue) 
        // FieldValues usually parse into transforms (except deleteField())
        // in which case we do not want to include this field in our parsed data
        // (as doing so will overwrite the field directly prior to the transform
        // trying to transform it). So we don't add this location to
        // context.fieldMask and we return null as our parsing result.
        /**
     * "Parses" the provided FieldValueImpl, adding any necessary transforms to
     * context.fieldTransforms.
     */
        return function __PRIVATE_parseSentinelFieldValue(e, t) {
            // Sentinels are only supported with writes, and not within arrays.
            if (!__PRIVATE_isWrite(t.Ac)) throw t.Sc(`${e._methodName}() can only be used with update() and set()`);
            if (!t.path) throw t.Sc(`${e._methodName}() is not currently supported inside arrays`);
            const n = e._toFieldTransform(t);
            n && t.fieldTransforms.push(n);
        }
        /**
     * Helper to parse a scalar value (i.e. not an Object, Array, or FieldValue)
     *
     * @returns The parsed value
     */ (e, t), null;
        if (void 0 === e && t.ignoreUndefinedProperties) 
        // If the input is undefined it can never participate in the fieldMask, so
        // don't handle this below. If `ignoreUndefinedProperties` is false,
        // `parseScalarValue` will reject an undefined value.
        return null;
        if (
        // If context.path is null we are inside an array and we don't support
        // field mask paths more granular than the top-level array.
        t.path && t.fieldMask.push(t.path), e instanceof Array) {
            // TODO(b/34871131): Include the path containing the array in the error
            // message.
            // In the case of IN queries, the parsed data is an array (representing
            // the set of values to be included for the IN query) that may directly
            // contain additional arrays (each representing an individual field
            // value), so we disable this validation.
            if (t.settings.fc && 4 /* UserDataSource.ArrayArgument */ !== t.Ac) throw t.Sc("Nested arrays are not supported");
            return function __PRIVATE_parseArray(e, t) {
                const n = [];
                let r = 0;
                for (const i of e) {
                    let e = __PRIVATE_parseData(i, t.wc(r));
                    null == e && (
                    // Just include nulls in the array for fields being replaced with a
                    // sentinel.
                    e = {
                        nullValue: "NULL_VALUE"
                    }), n.push(e), r++;
                }
                return {
                    arrayValue: {
                        values: n
                    }
                };
            }(e, t);
        }
        return function __PRIVATE_parseScalarValue(e, t) {
            if (null === (e = getModularInstance(e))) return {
                nullValue: "NULL_VALUE"
            };
            if ("number" == typeof e) return toNumber(t.serializer, e);
            if ("boolean" == typeof e) return {
                booleanValue: e
            };
            if ("string" == typeof e) return {
                stringValue: e
            };
            if (e instanceof Date) {
                const n = Timestamp.fromDate(e);
                return {
                    timestampValue: toTimestamp(t.serializer, n)
                };
            }
            if (e instanceof Timestamp) {
                // Firestore backend truncates precision down to microseconds. To ensure
                // offline mode works the same with regards to truncation, perform the
                // truncation immediately without waiting for the backend to do that.
                const n = new Timestamp(e.seconds, 1e3 * Math.floor(e.nanoseconds / 1e3));
                return {
                    timestampValue: toTimestamp(t.serializer, n)
                };
            }
            if (e instanceof GeoPoint) return {
                geoPointValue: {
                    latitude: e.latitude,
                    longitude: e.longitude
                }
            };
            if (e instanceof Bytes) return {
                bytesValue: __PRIVATE_toBytes(t.serializer, e._byteString)
            };
            if (e instanceof DocumentReference) {
                const n = t.databaseId, r = e.firestore._databaseId;
                if (!r.isEqual(n)) throw t.Sc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);
                return {
                    referenceValue: __PRIVATE_toResourceName(e.firestore._databaseId || t.databaseId, e._key.path)
                };
            }
            if (e instanceof VectorValue) 
            /**
     * Creates a new VectorValue proto value (using the internal format).
     */
            return function __PRIVATE_parseVectorValue(e, t) {
                const n = {
                    fields: {
                        [ht]: {
                            stringValue: It
                        },
                        [Et]: {
                            arrayValue: {
                                values: e.toArray().map((e => {
                                    if ("number" != typeof e) throw t.Sc("VectorValues must only contain numeric values.");
                                    return __PRIVATE_toDouble(t.serializer, e);
                                }))
                            }
                        }
                    }
                };
                return {
                    mapValue: n
                };
            }
            /**
     * Checks whether an object looks like a JSON object that should be converted
     * into a struct. Normal class/prototype instances are considered to look like
     * JSON objects since they should be converted to a struct value. Arrays, Dates,
     * GeoPoints, etc. are not considered to look like JSON objects since they map
     * to specific FieldValue types other than ObjectValue.
     */ (e, t);
            throw t.Sc(`Unsupported field value: ${__PRIVATE_valueDescription(e)}`);
        }(e, t);
    }

    function __PRIVATE_parseObject(e, t) {
        const n = {};
        return isEmpty(e) ? 
        // If we encounter an empty object, we explicitly add it to the update
        // mask to ensure that the server creates a map entry.
        t.path && t.path.length > 0 && t.fieldMask.push(t.path) : forEach(e, ((e, r) => {
            const i = __PRIVATE_parseData(r, t.mc(e));
            null != i && (n[e] = i);
        })), {
            mapValue: {
                fields: n
            }
        };
    }

    function __PRIVATE_looksLikeJsonObject(e) {
        return !("object" != typeof e || null === e || e instanceof Array || e instanceof Date || e instanceof Timestamp || e instanceof GeoPoint || e instanceof Bytes || e instanceof DocumentReference || e instanceof FieldValue || e instanceof VectorValue);
    }

    function __PRIVATE_validatePlainObject(e, t, n) {
        if (!__PRIVATE_looksLikeJsonObject(n) || !__PRIVATE_isPlainObject(n)) {
            const r = __PRIVATE_valueDescription(n);
            throw "an object" === r ? t.Sc(e + " a custom object") : t.Sc(e + " " + r);
        }
    }

    /**
     * Matches any characters in a field path string that are reserved.
     */ const Pn = new RegExp("[~\\*/\\[\\]]");

    /**
     * Wraps fromDotSeparatedString with an error message about the method that
     * was thrown.
     * @param methodName - The publicly visible method name
     * @param path - The dot-separated string form of a field path which will be
     * split on dots.
     * @param targetDoc - The document against which the field path will be
     * evaluated.
     */ function __PRIVATE_fieldPathFromDotSeparatedString(e, t, n) {
        if (t.search(Pn) >= 0) throw __PRIVATE_createError(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`, e, 
        /* hasConverter= */ false, 
        /* path= */ void 0, n);
        try {
            return new FieldPath(...t.split("."))._internalPath;
        } catch (r) {
            throw __PRIVATE_createError(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`, e, 
            /* hasConverter= */ false, 
            /* path= */ void 0, n);
        }
    }

    function __PRIVATE_createError(e, t, n, r, i) {
        const s = r && !r.isEmpty(), o = void 0 !== i;
        let _ = `Function ${t}() called with invalid data`;
        n && (_ += " (via `toFirestore()`)"), _ += ". ";
        let a = "";
        return (s || o) && (a += " (found", s && (a += ` in field ${r}`), o && (a += ` in document ${i}`), 
        a += ")"), new FirestoreError(N.INVALID_ARGUMENT, _ + e + a);
    }

    /**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
    /**
     * A `DocumentSnapshot` contains data read from a document in your Firestore
     * database. The data can be extracted with `.data()` or `.get(<field>)` to
     * get a specific field.
     *
     * For a `DocumentSnapshot` that points to a non-existing document, any data
     * access will return 'undefined'. You can use the `exists()` method to
     * explicitly verify a document's existence.
     */ class DocumentSnapshot$1 {
        // Note: This class is stripped down version of the DocumentSnapshot in
        // the legacy SDK. The changes are:
        // - No support for SnapshotMetadata.
        // - No support for SnapshotOptions.
        /** @hideconstructor protected */
        constructor(e, t, n, r, i) {
            this._firestore = e, this._userDataWriter = t, this._key = n, this._document = r, 
            this._converter = i;
        }
        /** Property of the `DocumentSnapshot` that provides the document's ID. */    get id() {
            return this._key.path.lastSegment();
        }
        /**
         * The `DocumentReference` for the document included in the `DocumentSnapshot`.
         */    get ref() {
            return new DocumentReference(this._firestore, this._converter, this._key);
        }
        /**
         * Signals whether or not the document at the snapshot's location exists.
         *
         * @returns true if the document exists.
         */    exists() {
            return null !== this._document;
        }
        /**
         * Retrieves all fields in the document as an `Object`. Returns `undefined` if
         * the document doesn't exist.
         *
         * @returns An `Object` containing all fields in the document or `undefined`
         * if the document doesn't exist.
         */    data() {
            if (this._document) {
                if (this._converter) {
                    // We only want to use the converter and create a new DocumentSnapshot
                    // if a converter has been provided.
                    const e = new QueryDocumentSnapshot$1(this._firestore, this._userDataWriter, this._key, this._document, 
                    /* converter= */ null);
                    return this._converter.fromFirestore(e);
                }
                return this._userDataWriter.convertValue(this._document.data.value);
            }
        }
        /**
         * Retrieves the field specified by `fieldPath`. Returns `undefined` if the
         * document or field doesn't exist.
         *
         * @param fieldPath - The path (for example 'foo' or 'foo.bar') to a specific
         * field.
         * @returns The data at the specified field location or undefined if no such
         * field exists in the document.
         */
        // We are using `any` here to avoid an explicit cast by our users.
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
        get(e) {
            if (this._document) {
                const t = this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get", e));
                if (null !== t) return this._userDataWriter.convertValue(t);
            }
        }
    }

    /**
     * A `QueryDocumentSnapshot` contains data read from a document in your
     * Firestore database as part of a query. The document is guaranteed to exist
     * and its data can be extracted with `.data()` or `.get(<field>)` to get a
     * specific field.
     *
     * A `QueryDocumentSnapshot` offers the same API surface as a
     * `DocumentSnapshot`. Since query results contain only existing documents, the
     * `exists` property will always be true and `data()` will never return
     * 'undefined'.
     */ class QueryDocumentSnapshot$1 extends DocumentSnapshot$1 {
        /**
         * Retrieves all fields in the document as an `Object`.
         *
         * @override
         * @returns An `Object` containing all fields in the document.
         */
        data() {
            return super.data();
        }
    }

    /**
     * Helper that calls `fromDotSeparatedString()` but wraps any error thrown.
     */ function __PRIVATE_fieldPathFromArgument(e, t) {
        return "string" == typeof t ? __PRIVATE_fieldPathFromDotSeparatedString(e, t) : t instanceof FieldPath ? t._internalPath : t._delegate._internalPath;
    }

    /**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */ function __PRIVATE_validateHasExplicitOrderByForLimitToLast(e) {
        if ("L" /* LimitType.Last */ === e.limitType && 0 === e.explicitOrderBy.length) throw new FirestoreError(N.UNIMPLEMENTED, "limitToLast() queries require specifying at least one orderBy() clause");
    }

    /**
     * An `AppliableConstraint` is an abstraction of a constraint that can be applied
     * to a Firestore query.
     */ class AppliableConstraint {}

    /**
     * A `QueryConstraint` is used to narrow the set of documents returned by a
     * Firestore query. `QueryConstraint`s are created by invoking {@link where},
     * {@link orderBy}, {@link (startAt:1)}, {@link (startAfter:1)}, {@link
     * (endBefore:1)}, {@link (endAt:1)}, {@link limit}, {@link limitToLast} and
     * can then be passed to {@link (query:1)} to create a new query instance that
     * also contains this `QueryConstraint`.
     */ class QueryConstraint extends AppliableConstraint {}

    function query(e, t, ...n) {
        let r = [];
        t instanceof AppliableConstraint && r.push(t), r = r.concat(n), function __PRIVATE_validateQueryConstraintArray(e) {
            const t = e.filter((e => e instanceof QueryCompositeFilterConstraint)).length, n = e.filter((e => e instanceof QueryFieldFilterConstraint)).length;
            if (t > 1 || t > 0 && n > 0) throw new FirestoreError(N.INVALID_ARGUMENT, "InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.");
        }
        /**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
        /**
     * Converts Firestore's internal types to the JavaScript types that we expose
     * to the user.
     *
     * @internal
     */ (r);
        for (const t of r) e = t._apply(e);
        return e;
    }

    /**
     * A `QueryFieldFilterConstraint` is used to narrow the set of documents returned by
     * a Firestore query by filtering on one or more document fields.
     * `QueryFieldFilterConstraint`s are created by invoking {@link where} and can then
     * be passed to {@link (query:1)} to create a new query instance that also contains
     * this `QueryFieldFilterConstraint`.
     */ class QueryFieldFilterConstraint extends QueryConstraint {
        /**
         * @internal
         */
        constructor(e, t, n) {
            super(), this._field = e, this._op = t, this._value = n, 
            /** The type of this query constraint */
            this.type = "where";
        }
        static _create(e, t, n) {
            return new QueryFieldFilterConstraint(e, t, n);
        }
        _apply(e) {
            const t = this._parse(e);
            return __PRIVATE_validateNewFieldFilter(e._query, t), new Query(e.firestore, e.converter, __PRIVATE_queryWithAddedFilter(e._query, t));
        }
        _parse(e) {
            const t = __PRIVATE_newUserDataReader(e.firestore), n = function __PRIVATE_newQueryFilter(e, t, n, r, i, s, o) {
                let _;
                if (i.isKeyField()) {
                    if ("array-contains" /* Operator.ARRAY_CONTAINS */ === s || "array-contains-any" /* Operator.ARRAY_CONTAINS_ANY */ === s) throw new FirestoreError(N.INVALID_ARGUMENT, `Invalid Query. You can't perform '${s}' queries on documentId().`);
                    if ("in" /* Operator.IN */ === s || "not-in" /* Operator.NOT_IN */ === s) {
                        __PRIVATE_validateDisjunctiveFilterElements(o, s);
                        const t = [];
                        for (const n of o) t.push(__PRIVATE_parseDocumentIdValue(r, e, n));
                        _ = {
                            arrayValue: {
                                values: t
                            }
                        };
                    } else _ = __PRIVATE_parseDocumentIdValue(r, e, o);
                } else "in" /* Operator.IN */ !== s && "not-in" /* Operator.NOT_IN */ !== s && "array-contains-any" /* Operator.ARRAY_CONTAINS_ANY */ !== s || __PRIVATE_validateDisjunctiveFilterElements(o, s), 
                _ = __PRIVATE_parseQueryValue(n, t, o, 
                /* allowArrays= */ "in" /* Operator.IN */ === s || "not-in" /* Operator.NOT_IN */ === s);
                const a = FieldFilter.create(i, s, _);
                return a;
            }(e._query, "where", t, e.firestore._databaseId, this._field, this._op, this._value);
            return n;
        }
    }

    /**
     * A `QueryCompositeFilterConstraint` is used to narrow the set of documents
     * returned by a Firestore query by performing the logical OR or AND of multiple
     * {@link QueryFieldFilterConstraint}s or {@link QueryCompositeFilterConstraint}s.
     * `QueryCompositeFilterConstraint`s are created by invoking {@link or} or
     * {@link and} and can then be passed to {@link (query:1)} to create a new query
     * instance that also contains the `QueryCompositeFilterConstraint`.
     */ class QueryCompositeFilterConstraint extends AppliableConstraint {
        /**
         * @internal
         */
        constructor(
        /** The type of this query constraint */
        e, t) {
            super(), this.type = e, this._queryConstraints = t;
        }
        static _create(e, t) {
            return new QueryCompositeFilterConstraint(e, t);
        }
        _parse(e) {
            const t = this._queryConstraints.map((t => t._parse(e))).filter((e => e.getFilters().length > 0));
            return 1 === t.length ? t[0] : CompositeFilter.create(t, this._getOperator());
        }
        _apply(e) {
            const t = this._parse(e);
            return 0 === t.getFilters().length ? e : (function __PRIVATE_validateNewFilter(e, t) {
                let n = e;
                const r = t.getFlattenedFilters();
                for (const e of r) __PRIVATE_validateNewFieldFilter(n, e), n = __PRIVATE_queryWithAddedFilter(n, e);
            }
            // Checks if any of the provided filter operators are included in the given list of filters and
            // returns the first one that is, or null if none are.
            (e._query, t), new Query(e.firestore, e.converter, __PRIVATE_queryWithAddedFilter(e._query, t)));
        }
        _getQueryConstraints() {
            return this._queryConstraints;
        }
        _getOperator() {
            return "and" === this.type ? "and" /* CompositeOperator.AND */ : "or" /* CompositeOperator.OR */;
        }
    }

    /**
     * A `QueryOrderByConstraint` is used to sort the set of documents returned by a
     * Firestore query. `QueryOrderByConstraint`s are created by invoking
     * {@link orderBy} and can then be passed to {@link (query:1)} to create a new query
     * instance that also contains this `QueryOrderByConstraint`.
     *
     * Note: Documents that do not contain the orderBy field will not be present in
     * the query result.
     */ class QueryOrderByConstraint extends QueryConstraint {
        /**
         * @internal
         */
        constructor(e, t) {
            super(), this._field = e, this._direction = t, 
            /** The type of this query constraint */
            this.type = "orderBy";
        }
        static _create(e, t) {
            return new QueryOrderByConstraint(e, t);
        }
        _apply(e) {
            const t = function __PRIVATE_newQueryOrderBy(e, t, n) {
                if (null !== e.startAt) throw new FirestoreError(N.INVALID_ARGUMENT, "Invalid query. You must not call startAt() or startAfter() before calling orderBy().");
                if (null !== e.endAt) throw new FirestoreError(N.INVALID_ARGUMENT, "Invalid query. You must not call endAt() or endBefore() before calling orderBy().");
                const r = new OrderBy(t, n);
                return r;
            }
            /**
     * Create a `Bound` from a query and a document.
     *
     * Note that the `Bound` will always include the key of the document
     * and so only the provided document will compare equal to the returned
     * position.
     *
     * Will throw if the document does not contain all fields of the order by
     * of the query or if any of the fields in the order by are an uncommitted
     * server timestamp.
     */ (e._query, this._field, this._direction);
            return new Query(e.firestore, e.converter, function __PRIVATE_queryWithAddedOrderBy(e, t) {
                // TODO(dimond): validate that orderBy does not list the same key twice.
                const n = e.explicitOrderBy.concat([ t ]);
                return new __PRIVATE_QueryImpl(e.path, e.collectionGroup, n, e.filters.slice(), e.limit, e.limitType, e.startAt, e.endAt);
            }(e._query, t));
        }
    }

    /**
     * Creates a {@link QueryOrderByConstraint} that sorts the query result by the
     * specified field, optionally in descending order instead of ascending.
     *
     * Note: Documents that do not contain the specified field will not be present
     * in the query result.
     *
     * @param fieldPath - The field to sort by.
     * @param directionStr - Optional direction to sort by ('asc' or 'desc'). If
     * not specified, order will be ascending.
     * @returns The created {@link QueryOrderByConstraint}.
     */ function orderBy(e, t = "asc") {
        const n = t, r = __PRIVATE_fieldPathFromArgument("orderBy", e);
        return QueryOrderByConstraint._create(r, n);
    }

    /**
     * A `QueryLimitConstraint` is used to limit the number of documents returned by
     * a Firestore query.
     * `QueryLimitConstraint`s are created by invoking {@link limit} or
     * {@link limitToLast} and can then be passed to {@link (query:1)} to create a new
     * query instance that also contains this `QueryLimitConstraint`.
     */ class QueryLimitConstraint extends QueryConstraint {
        /**
         * @internal
         */
        constructor(
        /** The type of this query constraint */
        e, t, n) {
            super(), this.type = e, this._limit = t, this._limitType = n;
        }
        static _create(e, t, n) {
            return new QueryLimitConstraint(e, t, n);
        }
        _apply(e) {
            return new Query(e.firestore, e.converter, __PRIVATE_queryWithLimit(e._query, this._limit, this._limitType));
        }
    }

    /**
     * Creates a {@link QueryLimitConstraint} that only returns the first matching
     * documents.
     *
     * @param limit - The maximum number of items to return.
     * @returns The created {@link QueryLimitConstraint}.
     */ function limit(e) {
        return QueryLimitConstraint._create("limit", e, "F" /* LimitType.First */);
    }

    /**
     * A `QueryStartAtConstraint` is used to exclude documents from the start of a
     * result set returned by a Firestore query.
     * `QueryStartAtConstraint`s are created by invoking {@link (startAt:1)} or
     * {@link (startAfter:1)} and can then be passed to {@link (query:1)} to create a
     * new query instance that also contains this `QueryStartAtConstraint`.
     */ class QueryStartAtConstraint extends QueryConstraint {
        /**
         * @internal
         */
        constructor(
        /** The type of this query constraint */
        e, t, n) {
            super(), this.type = e, this._docOrFields = t, this._inclusive = n;
        }
        static _create(e, t, n) {
            return new QueryStartAtConstraint(e, t, n);
        }
        _apply(e) {
            const t = __PRIVATE_newQueryBoundFromDocOrFields(e, this.type, this._docOrFields, this._inclusive);
            return new Query(e.firestore, e.converter, function __PRIVATE_queryWithStartAt(e, t) {
                return new __PRIVATE_QueryImpl(e.path, e.collectionGroup, e.explicitOrderBy.slice(), e.filters.slice(), e.limit, e.limitType, t, e.endAt);
            }(e._query, t));
        }
    }

    function startAfter(...e) {
        return QueryStartAtConstraint._create("startAfter", e, 
        /*inclusive=*/ false);
    }

    /** Helper function to create a bound from a document or fields */ function __PRIVATE_newQueryBoundFromDocOrFields(e, t, n, r) {
        if (n[0] = getModularInstance(n[0]), n[0] instanceof DocumentSnapshot$1) return function __PRIVATE_newQueryBoundFromDocument(e, t, n, r, i) {
            if (!r) throw new FirestoreError(N.NOT_FOUND, `Can't use a DocumentSnapshot that doesn't exist for ${n}().`);
            const s = [];
            // Because people expect to continue/end a query at the exact document
            // provided, we need to use the implicit sort order rather than the explicit
            // sort order, because it's guaranteed to contain the document key. That way
            // the position becomes unambiguous and the query continues/ends exactly at
            // the provided document. Without the key (by using the explicit sort
            // orders), multiple documents could match the position, yielding duplicate
            // results.
                    for (const n of __PRIVATE_queryNormalizedOrderBy(e)) if (n.field.isKeyField()) s.push(__PRIVATE_refValue(t, r.key)); else {
                const e = r.data.field(n.field);
                if (__PRIVATE_isServerTimestamp(e)) throw new FirestoreError(N.INVALID_ARGUMENT, 'Invalid query. You are trying to start or end a query using a document for which the field "' + n.field + '" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');
                if (null === e) {
                    const e = n.field.canonicalString();
                    throw new FirestoreError(N.INVALID_ARGUMENT, `Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`);
                }
                s.push(e);
            }
            return new Bound(s, i);
        }
        /**
     * Converts a list of field values to a `Bound` for the given query.
     */ (e._query, e.firestore._databaseId, t, n[0]._document, r);
        {
            const i = __PRIVATE_newUserDataReader(e.firestore);
            return function __PRIVATE_newQueryBoundFromFields(e, t, n, r, i, s) {
                // Use explicit order by's because it has to match the query the user made
                const o = e.explicitOrderBy;
                if (i.length > o.length) throw new FirestoreError(N.INVALID_ARGUMENT, `Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);
                const _ = [];
                for (let s = 0; s < i.length; s++) {
                    const a = i[s];
                    if (o[s].field.isKeyField()) {
                        if ("string" != typeof a) throw new FirestoreError(N.INVALID_ARGUMENT, `Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof a}`);
                        if (!__PRIVATE_isCollectionGroupQuery(e) && -1 !== a.indexOf("/")) throw new FirestoreError(N.INVALID_ARGUMENT, `Invalid query. When querying a collection and ordering by documentId(), the value passed to ${r}() must be a plain document ID, but '${a}' contains a slash.`);
                        const n = e.path.child(ResourcePath.fromString(a));
                        if (!DocumentKey.isDocumentKey(n)) throw new FirestoreError(N.INVALID_ARGUMENT, `Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);
                        const i = new DocumentKey(n);
                        _.push(__PRIVATE_refValue(t, i));
                    } else {
                        const e = __PRIVATE_parseQueryValue(n, r, a);
                        _.push(e);
                    }
                }
                return new Bound(_, s);
            }
            /**
     * Parses the given `documentIdValue` into a `ReferenceValue`, throwing
     * appropriate errors if the value is anything other than a `DocumentReference`
     * or `string`, or if the string is malformed.
     */ (e._query, e.firestore._databaseId, i, t, n, r);
        }
    }

    function __PRIVATE_parseDocumentIdValue(e, t, n) {
        if ("string" == typeof (n = getModularInstance(n))) {
            if ("" === n) throw new FirestoreError(N.INVALID_ARGUMENT, "Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");
            if (!__PRIVATE_isCollectionGroupQuery(t) && -1 !== n.indexOf("/")) throw new FirestoreError(N.INVALID_ARGUMENT, `Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);
            const r = t.path.child(ResourcePath.fromString(n));
            if (!DocumentKey.isDocumentKey(r)) throw new FirestoreError(N.INVALID_ARGUMENT, `Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);
            return __PRIVATE_refValue(e, new DocumentKey(r));
        }
        if (n instanceof DocumentReference) return __PRIVATE_refValue(e, n._key);
        throw new FirestoreError(N.INVALID_ARGUMENT, `Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${__PRIVATE_valueDescription(n)}.`);
    }

    /**
     * Validates that the value passed into a disjunctive filter satisfies all
     * array requirements.
     */ function __PRIVATE_validateDisjunctiveFilterElements(e, t) {
        if (!Array.isArray(e) || 0 === e.length) throw new FirestoreError(N.INVALID_ARGUMENT, `Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);
    }

    /**
     * Given an operator, returns the set of operators that cannot be used with it.
     *
     * This is not a comprehensive check, and this function should be removed in the
     * long term. Validations should occur in the Firestore backend.
     *
     * Operators in a query must adhere to the following set of rules:
     * 1. Only one inequality per query.
     * 2. `NOT_IN` cannot be used with array, disjunctive, or `NOT_EQUAL` operators.
     */ function __PRIVATE_validateNewFieldFilter(e, t) {
        const n = function __PRIVATE_findOpInsideFilters(e, t) {
            for (const n of e) for (const e of n.getFlattenedFilters()) if (t.indexOf(e.op) >= 0) return e.op;
            return null;
        }(e.filters, function __PRIVATE_conflictingOps(e) {
            switch (e) {
              case "!=" /* Operator.NOT_EQUAL */ :
                return [ "!=" /* Operator.NOT_EQUAL */ , "not-in" /* Operator.NOT_IN */ ];

              case "array-contains-any" /* Operator.ARRAY_CONTAINS_ANY */ :
              case "in" /* Operator.IN */ :
                return [ "not-in" /* Operator.NOT_IN */ ];

              case "not-in" /* Operator.NOT_IN */ :
                return [ "array-contains-any" /* Operator.ARRAY_CONTAINS_ANY */ , "in" /* Operator.IN */ , "not-in" /* Operator.NOT_IN */ , "!=" /* Operator.NOT_EQUAL */ ];

              default:
                return [];
            }
        }(t.op));
        if (null !== n) 
        // Special case when it's a duplicate op to give a slightly clearer error message.
        throw n === t.op ? new FirestoreError(N.INVALID_ARGUMENT, `Invalid query. You cannot use more than one '${t.op.toString()}' filter.`) : new FirestoreError(N.INVALID_ARGUMENT, `Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`);
    }

    class AbstractUserDataWriter {
        convertValue(e, t = "none") {
            switch (__PRIVATE_typeOrder(e)) {
              case 0 /* TypeOrder.NullValue */ :
                return null;

              case 1 /* TypeOrder.BooleanValue */ :
                return e.booleanValue;

              case 2 /* TypeOrder.NumberValue */ :
                return __PRIVATE_normalizeNumber(e.integerValue || e.doubleValue);

              case 3 /* TypeOrder.TimestampValue */ :
                return this.convertTimestamp(e.timestampValue);

              case 4 /* TypeOrder.ServerTimestampValue */ :
                return this.convertServerTimestamp(e, t);

              case 5 /* TypeOrder.StringValue */ :
                return e.stringValue;

              case 6 /* TypeOrder.BlobValue */ :
                return this.convertBytes(__PRIVATE_normalizeByteString(e.bytesValue));

              case 7 /* TypeOrder.RefValue */ :
                return this.convertReference(e.referenceValue);

              case 8 /* TypeOrder.GeoPointValue */ :
                return this.convertGeoPoint(e.geoPointValue);

              case 9 /* TypeOrder.ArrayValue */ :
                return this.convertArray(e.arrayValue, t);

              case 11 /* TypeOrder.ObjectValue */ :
                return this.convertObject(e.mapValue, t);

              case 10 /* TypeOrder.VectorValue */ :
                return this.convertVectorValue(e.mapValue);

              default:
                throw fail(62114, {
                    value: e
                });
            }
        }
        convertObject(e, t) {
            return this.convertObjectMap(e.fields, t);
        }
        /**
         * @internal
         */    convertObjectMap(e, t = "none") {
            const n = {};
            return forEach(e, ((e, r) => {
                n[e] = this.convertValue(r, t);
            })), n;
        }
        /**
         * @internal
         */    convertVectorValue(e) {
            const t = e.fields?.[Et].arrayValue?.values?.map((e => __PRIVATE_normalizeNumber(e.doubleValue)));
            return new VectorValue(t);
        }
        convertGeoPoint(e) {
            return new GeoPoint(__PRIVATE_normalizeNumber(e.latitude), __PRIVATE_normalizeNumber(e.longitude));
        }
        convertArray(e, t) {
            return (e.values || []).map((e => this.convertValue(e, t)));
        }
        convertServerTimestamp(e, t) {
            switch (t) {
              case "previous":
                const n = __PRIVATE_getPreviousValue(e);
                return null == n ? null : this.convertValue(n, t);

              case "estimate":
                return this.convertTimestamp(__PRIVATE_getLocalWriteTime(e));

              default:
                return null;
            }
        }
        convertTimestamp(e) {
            const t = __PRIVATE_normalizeTimestamp(e);
            return new Timestamp(t.seconds, t.nanos);
        }
        convertDocumentKey(e, t) {
            const n = ResourcePath.fromString(e);
            __PRIVATE_hardAssert(__PRIVATE_isValidResourceName(n), 9688, {
                name: e
            });
            const r = new DatabaseId(n.get(1), n.get(3)), i = new DocumentKey(n.popFirst(5));
            return r.isEqual(t) || 
            // TODO(b/64130202): Somehow support foreign references.
            __PRIVATE_logError(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`), 
            i;
        }
    }

    /**
     * Metadata about a snapshot, describing the state of the snapshot.
     */ class SnapshotMetadata {
        /** @hideconstructor */
        constructor(e, t) {
            this.hasPendingWrites = e, this.fromCache = t;
        }
        /**
         * Returns true if this `SnapshotMetadata` is equal to the provided one.
         *
         * @param other - The `SnapshotMetadata` to compare against.
         * @returns true if this `SnapshotMetadata` is equal to the provided one.
         */    isEqual(e) {
            return this.hasPendingWrites === e.hasPendingWrites && this.fromCache === e.fromCache;
        }
    }

    /**
     * A `DocumentSnapshot` contains data read from a document in your Firestore
     * database. The data can be extracted with `.data()` or `.get(<field>)` to
     * get a specific field.
     *
     * For a `DocumentSnapshot` that points to a non-existing document, any data
     * access will return 'undefined'. You can use the `exists()` method to
     * explicitly verify a document's existence.
     */ class DocumentSnapshot extends DocumentSnapshot$1 {
        /** @hideconstructor protected */
        constructor(e, t, n, r, i, s) {
            super(e, t, n, r, s), this._firestore = e, this._firestoreImpl = e, this.metadata = i;
        }
        /**
         * Returns whether or not the data exists. True if the document exists.
         */    exists() {
            return super.exists();
        }
        /**
         * Retrieves all fields in the document as an `Object`. Returns `undefined` if
         * the document doesn't exist.
         *
         * By default, `serverTimestamp()` values that have not yet been
         * set to their final value will be returned as `null`. You can override
         * this by passing an options object.
         *
         * @param options - An options object to configure how data is retrieved from
         * the snapshot (for example the desired behavior for server timestamps that
         * have not yet been set to their final value).
         * @returns An `Object` containing all fields in the document or `undefined` if
         * the document doesn't exist.
         */    data(e = {}) {
            if (this._document) {
                if (this._converter) {
                    // We only want to use the converter and create a new DocumentSnapshot
                    // if a converter has been provided.
                    const t = new QueryDocumentSnapshot(this._firestore, this._userDataWriter, this._key, this._document, this.metadata, 
                    /* converter= */ null);
                    return this._converter.fromFirestore(t, e);
                }
                return this._userDataWriter.convertValue(this._document.data.value, e.serverTimestamps);
            }
        }
        /**
         * Retrieves the field specified by `fieldPath`. Returns `undefined` if the
         * document or field doesn't exist.
         *
         * By default, a `serverTimestamp()` that has not yet been set to
         * its final value will be returned as `null`. You can override this by
         * passing an options object.
         *
         * @param fieldPath - The path (for example 'foo' or 'foo.bar') to a specific
         * field.
         * @param options - An options object to configure how the field is retrieved
         * from the snapshot (for example the desired behavior for server timestamps
         * that have not yet been set to their final value).
         * @returns The data at the specified field location or undefined if no such
         * field exists in the document.
         */
        // We are using `any` here to avoid an explicit cast by our users.
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
        get(e, t = {}) {
            if (this._document) {
                const n = this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get", e));
                if (null !== n) return this._userDataWriter.convertValue(n, t.serverTimestamps);
            }
        }
        /**
         * Returns a JSON-serializable representation of this `DocumentSnapshot` instance.
         *
         * @returns a JSON representation of this object.  Throws a {@link FirestoreError} if this
         * `DocumentSnapshot` has pending writes.
         */    toJSON() {
            if (this.metadata.hasPendingWrites) throw new FirestoreError(N.FAILED_PRECONDITION, "DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");
            const e = this._document, t = {};
            // eslint-disable-next-line @typescript-eslint/no-explicit-any
                    if (t.type = DocumentSnapshot._jsonSchemaVersion, t.bundle = "", t.bundleSource = "DocumentSnapshot", 
            t.bundleName = this._key.toString(), !e || !e.isValidDocument() || !e.isFoundDocument()) return t;
            this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields, "previous");
            return t.bundle = (this._firestore, this.ref.path, "NOT SUPPORTED"), t;
        }
    }

    /**
     * A `QueryDocumentSnapshot` contains data read from a document in your
     * Firestore database as part of a query. The document is guaranteed to exist
     * and its data can be extracted with `.data()` or `.get(<field>)` to get a
     * specific field.
     *
     * A `QueryDocumentSnapshot` offers the same API surface as a
     * `DocumentSnapshot`. Since query results contain only existing documents, the
     * `exists` property will always be true and `data()` will never return
     * 'undefined'.
     */ DocumentSnapshot._jsonSchemaVersion = "firestore/documentSnapshot/1.0", DocumentSnapshot._jsonSchema = {
        type: property("string", DocumentSnapshot._jsonSchemaVersion),
        bundleSource: property("string", "DocumentSnapshot"),
        bundleName: property("string"),
        bundle: property("string")
    };

    class QueryDocumentSnapshot extends DocumentSnapshot {
        /**
         * Retrieves all fields in the document as an `Object`.
         *
         * By default, `serverTimestamp()` values that have not yet been
         * set to their final value will be returned as `null`. You can override
         * this by passing an options object.
         *
         * @override
         * @param options - An options object to configure how data is retrieved from
         * the snapshot (for example the desired behavior for server timestamps that
         * have not yet been set to their final value).
         * @returns An `Object` containing all fields in the document.
         */
        data(e = {}) {
            return super.data(e);
        }
    }

    /**
     * A `QuerySnapshot` contains zero or more `DocumentSnapshot` objects
     * representing the results of a query. The documents can be accessed as an
     * array via the `docs` property or enumerated using the `forEach` method. The
     * number of documents can be determined via the `empty` and `size`
     * properties.
     */ class QuerySnapshot {
        /** @hideconstructor */
        constructor(e, t, n, r) {
            this._firestore = e, this._userDataWriter = t, this._snapshot = r, this.metadata = new SnapshotMetadata(r.hasPendingWrites, r.fromCache), 
            this.query = n;
        }
        /** An array of all the documents in the `QuerySnapshot`. */    get docs() {
            const e = [];
            return this.forEach((t => e.push(t))), e;
        }
        /** The number of documents in the `QuerySnapshot`. */    get size() {
            return this._snapshot.docs.size;
        }
        /** True if there are no documents in the `QuerySnapshot`. */    get empty() {
            return 0 === this.size;
        }
        /**
         * Enumerates all of the documents in the `QuerySnapshot`.
         *
         * @param callback - A callback to be called with a `QueryDocumentSnapshot` for
         * each document in the snapshot.
         * @param thisArg - The `this` binding for the callback.
         */    forEach(e, t) {
            this._snapshot.docs.forEach((n => {
                e.call(t, new QueryDocumentSnapshot(this._firestore, this._userDataWriter, n.key, n, new SnapshotMetadata(this._snapshot.mutatedKeys.has(n.key), this._snapshot.fromCache), this.query.converter));
            }));
        }
        /**
         * Returns an array of the documents changes since the last snapshot. If this
         * is the first snapshot, all documents will be in the list as 'added'
         * changes.
         *
         * @param options - `SnapshotListenOptions` that control whether metadata-only
         * changes (i.e. only `DocumentSnapshot.metadata` changed) should trigger
         * snapshot events.
         */    docChanges(e = {}) {
            const t = !!e.includeMetadataChanges;
            if (t && this._snapshot.excludesMetadataChanges) throw new FirestoreError(N.INVALID_ARGUMENT, "To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");
            return this._cachedChanges && this._cachedChangesIncludeMetadataChanges === t || (this._cachedChanges = 
            /** Calculates the array of `DocumentChange`s for a given `ViewSnapshot`. */
            function __PRIVATE_changesFromSnapshot(e, t) {
                if (e._snapshot.oldDocs.isEmpty()) {
                    let t = 0;
                    return e._snapshot.docChanges.map((n => {
                        const r = new QueryDocumentSnapshot(e._firestore, e._userDataWriter, n.doc.key, n.doc, new SnapshotMetadata(e._snapshot.mutatedKeys.has(n.doc.key), e._snapshot.fromCache), e.query.converter);
                        return n.doc, {
                            type: "added",
                            doc: r,
                            oldIndex: -1,
                            newIndex: t++
                        };
                    }));
                }
                {
                    // A `DocumentSet` that is updated incrementally as changes are applied to use
                    // to lookup the index of a document.
                    let n = e._snapshot.oldDocs;
                    return e._snapshot.docChanges.filter((e => t || 3 /* ChangeType.Metadata */ !== e.type)).map((t => {
                        const r = new QueryDocumentSnapshot(e._firestore, e._userDataWriter, t.doc.key, t.doc, new SnapshotMetadata(e._snapshot.mutatedKeys.has(t.doc.key), e._snapshot.fromCache), e.query.converter);
                        let i = -1, s = -1;
                        return 0 /* ChangeType.Added */ !== t.type && (i = n.indexOf(t.doc.key), n = n.delete(t.doc.key)), 
                        1 /* ChangeType.Removed */ !== t.type && (n = n.add(t.doc), s = n.indexOf(t.doc.key)), 
                        {
                            type: __PRIVATE_resultChangeType(t.type),
                            doc: r,
                            oldIndex: i,
                            newIndex: s
                        };
                    }));
                }
            }(this, t), this._cachedChangesIncludeMetadataChanges = t), this._cachedChanges;
        }
        /**
         * Returns a JSON-serializable representation of this `QuerySnapshot` instance.
         *
         * @returns a JSON representation of this object. Throws a {@link FirestoreError} if this
         * `QuerySnapshot` has pending writes.
         */    toJSON() {
            if (this.metadata.hasPendingWrites) throw new FirestoreError(N.FAILED_PRECONDITION, "QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");
            // eslint-disable-next-line @typescript-eslint/no-explicit-any
                    const e = {};
            e.type = QuerySnapshot._jsonSchemaVersion, e.bundleSource = "QuerySnapshot", e.bundleName = __PRIVATE_AutoId.newId(), 
            this._firestore._databaseId.database, this._firestore._databaseId.projectId;
            const t = [], n = [], r = [];
            return this.docs.forEach((e => {
                null !== e._document && (t.push(e._document), n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields, "previous")), 
                r.push(e.ref.path));
            })), e.bundle = (this._firestore, this.query._query, e.bundleName, "NOT SUPPORTED"), 
            e;
        }
    }

    function __PRIVATE_resultChangeType(e) {
        switch (e) {
          case 0 /* ChangeType.Added */ :
            return "added";

          case 2 /* ChangeType.Modified */ :
          case 3 /* ChangeType.Metadata */ :
            return "modified";

          case 1 /* ChangeType.Removed */ :
            return "removed";

          default:
            return fail(61501, {
                type: e
            });
        }
    }

    QuerySnapshot._jsonSchemaVersion = "firestore/querySnapshot/1.0", QuerySnapshot._jsonSchema = {
        type: property("string", QuerySnapshot._jsonSchemaVersion),
        bundleSource: property("string", "QuerySnapshot"),
        bundleName: property("string"),
        bundle: property("string")
    };

    class __PRIVATE_ExpUserDataWriter extends AbstractUserDataWriter {
        constructor(e) {
            super(), this.firestore = e;
        }
        convertBytes(e) {
            return new Bytes(e);
        }
        convertReference(e) {
            const t = this.convertDocumentKey(e, this.firestore._databaseId);
            return new DocumentReference(this.firestore, /* converter= */ null, t);
        }
    }

    /**
     * Executes the query and returns the results as a `QuerySnapshot`.
     *
     * Note: `getDocs()` attempts to provide up-to-date data when possible by
     * waiting for data from the server, but it may return cached data or fail if
     * you are offline and the server cannot be reached. To specify this behavior,
     * invoke {@link getDocsFromCache} or {@link getDocsFromServer}.
     *
     * @returns A `Promise` that will be resolved with the results of the query.
     */ function getDocs(e) {
        e = __PRIVATE_cast(e, Query);
        const t = __PRIVATE_cast(e.firestore, Firestore), n = ensureFirestoreConfigured(t), r = new __PRIVATE_ExpUserDataWriter(t);
        return __PRIVATE_validateHasExplicitOrderByForLimitToLast(e._query), __PRIVATE_firestoreClientGetDocumentsViaSnapshotListener(n, e._query).then((n => new QuerySnapshot(t, r, e, n)));
    }

    /**
     * Cloud Firestore
     *
     * @packageDocumentation
     */ !function __PRIVATE_registerFirestore(e, t = true) {
        !function __PRIVATE_setSDKVersion(e) {
            x = e;
        }(SDK_VERSION), _registerComponent(new Component("firestore", ((e, {instanceIdentifier: n, options: r}) => {
            const i = e.getProvider("app").getImmediate(), s = new Firestore(new __PRIVATE_FirebaseAuthCredentialsProvider(e.getProvider("auth-internal")), new __PRIVATE_FirebaseAppCheckTokenProvider(i, e.getProvider("app-check-internal")), function __PRIVATE_databaseIdFromApp(e, t) {
                if (!Object.prototype.hasOwnProperty.apply(e.options, [ "projectId" ])) throw new FirestoreError(N.INVALID_ARGUMENT, '"projectId" not provided in firebase.initializeApp.');
                return new DatabaseId(e.options.projectId, t);
            }(i, n), i);
            return r = {
                useFetchStreams: t,
                ...r
            }, s._setSettings(r), s;
        }), "PUBLIC").setMultipleInstances(true)), registerVersion(F, M, e), 
        // BUILD_TARGET will be replaced by values like esm, cjs, etc during the compilation
        registerVersion(F, M, "esm2020");
    }();

    const firebaseConfig = {
        apiKey: "AIzaSyCFRsEOAv57VH2SvyXcxOvaHYtobeb5ihQ",
        authDomain: "test-1e3e5.firebaseapp.com",
        databaseURL: "https://test-1e3e5-default-rtdb.europe-west1.firebasedatabase.app",
        projectId: "test-1e3e5",
        storageBucket: "test-1e3e5.firebasestorage.app",
        messagingSenderId: "72363023240",
        appId: "1:72363023240:web:46e9bc35ef4a4aa31ff83d",
        measurementId: "G-EBGKHLJDTV"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);


    const factsContainer = document.getElementById("quickFacts");
    const factsInfo = document.getElementById("factsInfo");
    const searchInput = document.getElementById("searchFactInput");

    let currentPage = 1;
    let lastVisible = null;
    const PAGE_SIZE = 10;

    async function loadQuickFacts(customQuery) {
        let q = query(
            collection(db, "quickFacts"),
            orderBy("date", "desc"),
            limit(PAGE_SIZE)
        );

        if (currentPage > 1 && lastVisible) {
            q = query(q, startAfter(lastVisible));
        }

        const snapshot = await getDocs(q);

        factsContainer.innerHTML = "";

        const facts = [];
        snapshot.forEach(doc => {
            const fact = doc.data();
            fact.id = doc.id;
            facts.push(fact);
        });

        if (facts.length === 0) {
            factsContainer.innerHTML = "<p>    .</p>";
            factsInfo.textContent = "";
            return;
        }

        // Render
        facts.forEach(fact => {
            const dateStr = fact.date?.toDate().toLocaleDateString() || " ";
            factsContainer.innerHTML += `
            <div class="fact-card">
                <img src="${fact.imageURL || 'placeholder.png'}" alt="icon">
                <div class="fact-content">
                    <h2><strong>:</strong> ${fact.claim}</h2>
                    <p class="accuracy"><strong>:</strong> ${fact.accuracy}</p>
                    <h2><strong>:</strong> ${fact.correction}</h2>
                    <p><strong>:</strong> <a href="${fact.source}" target="_blank">${fact.source}</a></p>
                    <p><strong>:</strong> ${fact.tag || ''}</p>
                    <p><strong>:</strong> ${dateStr}</p>
                </div>
            </div>
        `;
        });

        factsInfo.textContent = ` ${currentPage}  ${facts.length}   ${snapshot.size}`;

        lastVisible = snapshot.docs[snapshot.docs.length - 1];
        document.getElementById("prevFactBtn").disabled = currentPage === 1;
        document.getElementById("nextFactBtn").disabled = snapshot.size < PAGE_SIZE;
    }

    // Search
    async function searchFacts() {
        const term = searchInput.value.trim();
        currentPage = 1;
        lastVisible = null;

        if (!term) {
            loadQuickFacts();
            return;
        }

        // Client-side search (OR tag/claim)
        const snapshot = await getDocs(collection(db, "quickFacts"));
        const filtered = [];
        snapshot.forEach(doc => {
            const fact = doc.data();
            fact.id = doc.id;
            if (fact.tag?.toLowerCase().includes(term.toLowerCase()) || fact.claim?.toLowerCase().includes(term.toLowerCase())) {
                filtered.push(fact);
            }
        });

        // Sort by date descending
        filtered.sort((a, b) => b.date.toDate() - a.date.toDate());

        factsContainer.innerHTML = "";
        filtered.slice(0, PAGE_SIZE).forEach(fact => {
            const dateStr = fact.date?.toDate().toLocaleDateString() || " ";
            factsContainer.innerHTML += `
            <div class="fact-card">
                <img src="${fact.imageURL || 'placeholder.png'}" alt="icon">
                <div class="fact-content">
                    <p><strong>:</strong> ${fact.claim}</p>
                    <p class="accuracy"><strong>:</strong> ${fact.accuracy}</p>
                    <p><strong>:</strong> ${fact.correction}</p>
                    <p><strong>:</strong> <a href="${fact.source}" target="_blank">${fact.source}</a></p>
                    <p><strong>:</strong> ${fact.tag || ''}</p>
                    <p><strong>:</strong> ${dateStr}</p>
                </div>
            </div>
        `;
        });

        factsInfo.textContent = ` ${currentPage}  ${filtered.length} `;
        document.getElementById("prevFactBtn").disabled = true;
        document.getElementById("nextFactBtn").disabled = filtered.length <= PAGE_SIZE;
    }

    // Navigation
    function nextPageFacts() {
        if (document.getElementById("nextFactBtn").disabled) return;
        currentPage++;
        loadQuickFacts();
    }

    function prevPageFacts() {
        if (currentPage === 1) return;
        currentPage--;
        loadQuickFacts();
    }

    window.nextPageFacts = nextPageFacts;
    window.prevPageFacts = prevPageFacts;

    searchInput.addEventListener("keydown", (event) => {
        if (event.key === "Enter") searchFacts();
    });

    // Initial load
    loadQuickFacts();

})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicXVpY2suanMiLCJzb3VyY2VzIjpbIi4uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvdXRpbC9kaXN0L3Bvc3RpbnN0YWxsLm1qcyIsIi4uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvdXRpbC9kaXN0L2luZGV4LmVzbS5qcyIsIi4uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvY29tcG9uZW50L2Rpc3QvZXNtL2luZGV4LmVzbS5qcyIsIi4uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvbG9nZ2VyL2Rpc3QvZXNtL2luZGV4LmVzbS5qcyIsIi4uL25vZGVfbW9kdWxlcy9pZGIvYnVpbGQvd3JhcC1pZGItdmFsdWUuanMiLCIuLi9ub2RlX21vZHVsZXMvaWRiL2J1aWxkL2luZGV4LmpzIiwiLi4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9hcHAvZGlzdC9lc20vaW5kZXguZXNtLmpzIiwiLi4vbm9kZV9tb2R1bGVzL2ZpcmViYXNlL2FwcC9kaXN0L2VzbS9pbmRleC5lc20uanMiLCIuLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL3dlYmNoYW5uZWwtd3JhcHBlci9kaXN0L2Jsb29tLWJsb2IvZXNtL2Jsb29tX2Jsb2JfZXMyMDE4LmpzIiwiLi4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS93ZWJjaGFubmVsLXdyYXBwZXIvZGlzdC93ZWJjaGFubmVsLWJsb2IvZXNtL3dlYmNoYW5uZWxfYmxvYl9lczIwMTguanMiLCIuLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2ZpcmVzdG9yZS9kaXN0L2luZGV4LmVzbS5qcyIsIi4uL3NyYy9xdWljay5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBnZXREZWZhdWx0c0Zyb21Qb3N0aW5zdGFsbCA9ICgpID0+ICh1bmRlZmluZWQpO1xuZXhwb3J0IHsgZ2V0RGVmYXVsdHNGcm9tUG9zdGluc3RhbGwgfTsiLCJpbXBvcnQgeyBnZXREZWZhdWx0c0Zyb21Qb3N0aW5zdGFsbCB9IGZyb20gJy4vcG9zdGluc3RhbGwubWpzJztcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQGZpbGVvdmVydmlldyBGaXJlYmFzZSBjb25zdGFudHMuICBTb21lIG9mIHRoZXNlIChAZGVmaW5lcykgY2FuIGJlIG92ZXJyaWRkZW4gYXQgY29tcGlsZS10aW1lLlxuICovXG5jb25zdCBDT05TVEFOVFMgPSB7XG4gICAgLyoqXG4gICAgICogQGRlZmluZSB7Ym9vbGVhbn0gV2hldGhlciB0aGlzIGlzIHRoZSBjbGllbnQgTm9kZS5qcyBTREsuXG4gICAgICovXG4gICAgTk9ERV9DTElFTlQ6IGZhbHNlLFxuICAgIC8qKlxuICAgICAqIEBkZWZpbmUge2Jvb2xlYW59IFdoZXRoZXIgdGhpcyBpcyB0aGUgQWRtaW4gTm9kZS5qcyBTREsuXG4gICAgICovXG4gICAgTk9ERV9BRE1JTjogZmFsc2UsXG4gICAgLyoqXG4gICAgICogRmlyZWJhc2UgU0RLIFZlcnNpb25cbiAgICAgKi9cbiAgICBTREtfVkVSU0lPTjogJyR7SlNDT1JFX1ZFUlNJT059J1xufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVGhyb3dzIGFuIGVycm9yIGlmIHRoZSBwcm92aWRlZCBhc3NlcnRpb24gaXMgZmFsc3lcbiAqL1xuY29uc3QgYXNzZXJ0ID0gZnVuY3Rpb24gKGFzc2VydGlvbiwgbWVzc2FnZSkge1xuICAgIGlmICghYXNzZXJ0aW9uKSB7XG4gICAgICAgIHRocm93IGFzc2VydGlvbkVycm9yKG1lc3NhZ2UpO1xuICAgIH1cbn07XG4vKipcbiAqIFJldHVybnMgYW4gRXJyb3Igb2JqZWN0IHN1aXRhYmxlIGZvciB0aHJvd2luZy5cbiAqL1xuY29uc3QgYXNzZXJ0aW9uRXJyb3IgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgIHJldHVybiBuZXcgRXJyb3IoJ0ZpcmViYXNlIERhdGFiYXNlICgnICtcbiAgICAgICAgQ09OU1RBTlRTLlNES19WRVJTSU9OICtcbiAgICAgICAgJykgSU5URVJOQUwgQVNTRVJUIEZBSUxFRDogJyArXG4gICAgICAgIG1lc3NhZ2UpO1xufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNvbnN0IHN0cmluZ1RvQnl0ZUFycmF5JDEgPSBmdW5jdGlvbiAoc3RyKSB7XG4gICAgLy8gVE9ETyh1c2VyKTogVXNlIG5hdGl2ZSBpbXBsZW1lbnRhdGlvbnMgaWYvd2hlbiBhdmFpbGFibGVcbiAgICBjb25zdCBvdXQgPSBbXTtcbiAgICBsZXQgcCA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IGMgPSBzdHIuY2hhckNvZGVBdChpKTtcbiAgICAgICAgaWYgKGMgPCAxMjgpIHtcbiAgICAgICAgICAgIG91dFtwKytdID0gYztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjIDwgMjA0OCkge1xuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiA2KSB8IDE5MjtcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoKGMgJiAweGZjMDApID09PSAweGQ4MDAgJiZcbiAgICAgICAgICAgIGkgKyAxIDwgc3RyLmxlbmd0aCAmJlxuICAgICAgICAgICAgKHN0ci5jaGFyQ29kZUF0KGkgKyAxKSAmIDB4ZmMwMCkgPT09IDB4ZGMwMCkge1xuICAgICAgICAgICAgLy8gU3Vycm9nYXRlIFBhaXJcbiAgICAgICAgICAgIGMgPSAweDEwMDAwICsgKChjICYgMHgwM2ZmKSA8PCAxMCkgKyAoc3RyLmNoYXJDb2RlQXQoKytpKSAmIDB4MDNmZik7XG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDE4KSB8IDI0MDtcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDEyKSAmIDYzKSB8IDEyODtcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTIpIHwgMjI0O1xuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gNikgJiA2MykgfCAxMjg7XG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvdXQ7XG59O1xuLyoqXG4gKiBUdXJucyBhbiBhcnJheSBvZiBudW1iZXJzIGludG8gdGhlIHN0cmluZyBnaXZlbiBieSB0aGUgY29uY2F0ZW5hdGlvbiBvZiB0aGVcbiAqIGNoYXJhY3RlcnMgdG8gd2hpY2ggdGhlIG51bWJlcnMgY29ycmVzcG9uZC5cbiAqIEBwYXJhbSBieXRlcyBBcnJheSBvZiBudW1iZXJzIHJlcHJlc2VudGluZyBjaGFyYWN0ZXJzLlxuICogQHJldHVybiBTdHJpbmdpZmljYXRpb24gb2YgdGhlIGFycmF5LlxuICovXG5jb25zdCBieXRlQXJyYXlUb1N0cmluZyA9IGZ1bmN0aW9uIChieXRlcykge1xuICAgIC8vIFRPRE8odXNlcik6IFVzZSBuYXRpdmUgaW1wbGVtZW50YXRpb25zIGlmL3doZW4gYXZhaWxhYmxlXG4gICAgY29uc3Qgb3V0ID0gW107XG4gICAgbGV0IHBvcyA9IDAsIGMgPSAwO1xuICAgIHdoaWxlIChwb3MgPCBieXRlcy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgYzEgPSBieXRlc1twb3MrK107XG4gICAgICAgIGlmIChjMSA8IDEyOCkge1xuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGMxKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjMSA+IDE5MSAmJiBjMSA8IDIyNCkge1xuICAgICAgICAgICAgY29uc3QgYzIgPSBieXRlc1twb3MrK107XG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjMSAmIDMxKSA8PCA2KSB8IChjMiAmIDYzKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYzEgPiAyMzkgJiYgYzEgPCAzNjUpIHtcbiAgICAgICAgICAgIC8vIFN1cnJvZ2F0ZSBQYWlyXG4gICAgICAgICAgICBjb25zdCBjMiA9IGJ5dGVzW3BvcysrXTtcbiAgICAgICAgICAgIGNvbnN0IGMzID0gYnl0ZXNbcG9zKytdO1xuICAgICAgICAgICAgY29uc3QgYzQgPSBieXRlc1twb3MrK107XG4gICAgICAgICAgICBjb25zdCB1ID0gKCgoYzEgJiA3KSA8PCAxOCkgfCAoKGMyICYgNjMpIDw8IDEyKSB8ICgoYzMgJiA2MykgPDwgNikgfCAoYzQgJiA2MykpIC1cbiAgICAgICAgICAgICAgICAweDEwMDAwO1xuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4ZDgwMCArICh1ID4+IDEwKSk7XG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHhkYzAwICsgKHUgJiAxMDIzKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBjMiA9IGJ5dGVzW3BvcysrXTtcbiAgICAgICAgICAgIGNvbnN0IGMzID0gYnl0ZXNbcG9zKytdO1xuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCgoYzEgJiAxNSkgPDwgMTIpIHwgKChjMiAmIDYzKSA8PCA2KSB8IChjMyAmIDYzKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG91dC5qb2luKCcnKTtcbn07XG4vLyBXZSBkZWZpbmUgaXQgYXMgYW4gb2JqZWN0IGxpdGVyYWwgaW5zdGVhZCBvZiBhIGNsYXNzIGJlY2F1c2UgYSBjbGFzcyBjb21waWxlZCBkb3duIHRvIGVzNSBjYW4ndFxuLy8gYmUgdHJlZXNoYWtlZC4gaHR0cHM6Ly9naXRodWIuY29tL3JvbGx1cC9yb2xsdXAvaXNzdWVzLzE2OTFcbi8vIFN0YXRpYyBsb29rdXAgbWFwcywgbGF6aWx5IHBvcHVsYXRlZCBieSBpbml0XygpXG4vLyBUT0RPKGRsYXJvY3F1ZSk6IERlZmluZSB0aGlzIGFzIGEgY2xhc3MsIHNpbmNlIHdlIG5vIGxvbmdlciB0YXJnZXQgRVM1LlxuY29uc3QgYmFzZTY0ID0ge1xuICAgIC8qKlxuICAgICAqIE1hcHMgYnl0ZXMgdG8gY2hhcmFjdGVycy5cbiAgICAgKi9cbiAgICBieXRlVG9DaGFyTWFwXzogbnVsbCxcbiAgICAvKipcbiAgICAgKiBNYXBzIGNoYXJhY3RlcnMgdG8gYnl0ZXMuXG4gICAgICovXG4gICAgY2hhclRvQnl0ZU1hcF86IG51bGwsXG4gICAgLyoqXG4gICAgICogTWFwcyBieXRlcyB0byB3ZWJzYWZlIGNoYXJhY3RlcnMuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBieXRlVG9DaGFyTWFwV2ViU2FmZV86IG51bGwsXG4gICAgLyoqXG4gICAgICogTWFwcyB3ZWJzYWZlIGNoYXJhY3RlcnMgdG8gYnl0ZXMuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBjaGFyVG9CeXRlTWFwV2ViU2FmZV86IG51bGwsXG4gICAgLyoqXG4gICAgICogT3VyIGRlZmF1bHQgYWxwaGFiZXQsIHNoYXJlZCBiZXR3ZWVuXG4gICAgICogRU5DT0RFRF9WQUxTIGFuZCBFTkNPREVEX1ZBTFNfV0VCU0FGRVxuICAgICAqL1xuICAgIEVOQ09ERURfVkFMU19CQVNFOiAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVonICsgJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6JyArICcwMTIzNDU2Nzg5JyxcbiAgICAvKipcbiAgICAgKiBPdXIgZGVmYXVsdCBhbHBoYWJldC4gVmFsdWUgNjQgKD0pIGlzIHNwZWNpYWw7IGl0IG1lYW5zIFwibm90aGluZy5cIlxuICAgICAqL1xuICAgIGdldCBFTkNPREVEX1ZBTFMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkVOQ09ERURfVkFMU19CQVNFICsgJysvPSc7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBPdXIgd2Vic2FmZSBhbHBoYWJldC5cbiAgICAgKi9cbiAgICBnZXQgRU5DT0RFRF9WQUxTX1dFQlNBRkUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkVOQ09ERURfVkFMU19CQVNFICsgJy1fLic7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoaXMgYnJvd3NlciBzdXBwb3J0cyB0aGUgYXRvYiBhbmQgYnRvYSBmdW5jdGlvbnMuIFRoaXMgZXh0ZW5zaW9uXG4gICAgICogc3RhcnRlZCBhdCBNb3ppbGxhIGJ1dCBpcyBub3cgaW1wbGVtZW50ZWQgYnkgbWFueSBicm93c2Vycy4gV2UgdXNlIHRoZVxuICAgICAqIEFTU1VNRV8qIHZhcmlhYmxlcyB0byBhdm9pZCBwdWxsaW5nIGluIHRoZSBmdWxsIHVzZXJhZ2VudCBkZXRlY3Rpb24gbGlicmFyeVxuICAgICAqIGJ1dCBzdGlsbCBhbGxvd2luZyB0aGUgc3RhbmRhcmQgcGVyLWJyb3dzZXIgY29tcGlsYXRpb25zLlxuICAgICAqXG4gICAgICovXG4gICAgSEFTX05BVElWRV9TVVBQT1JUOiB0eXBlb2YgYXRvYiA9PT0gJ2Z1bmN0aW9uJyxcbiAgICAvKipcbiAgICAgKiBCYXNlNjQtZW5jb2RlIGFuIGFycmF5IG9mIGJ5dGVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGlucHV0IEFuIGFycmF5IG9mIGJ5dGVzIChudW1iZXJzIHdpdGhcbiAgICAgKiAgICAgdmFsdWUgaW4gWzAsIDI1NV0pIHRvIGVuY29kZS5cbiAgICAgKiBAcGFyYW0gd2ViU2FmZSBCb29sZWFuIGluZGljYXRpbmcgd2Ugc2hvdWxkIHVzZSB0aGVcbiAgICAgKiAgICAgYWx0ZXJuYXRpdmUgYWxwaGFiZXQuXG4gICAgICogQHJldHVybiBUaGUgYmFzZTY0IGVuY29kZWQgc3RyaW5nLlxuICAgICAqL1xuICAgIGVuY29kZUJ5dGVBcnJheShpbnB1dCwgd2ViU2FmZSkge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcignZW5jb2RlQnl0ZUFycmF5IHRha2VzIGFuIGFycmF5IGFzIGEgcGFyYW1ldGVyJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pbml0XygpO1xuICAgICAgICBjb25zdCBieXRlVG9DaGFyTWFwID0gd2ViU2FmZVxuICAgICAgICAgICAgPyB0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlX1xuICAgICAgICAgICAgOiB0aGlzLmJ5dGVUb0NoYXJNYXBfO1xuICAgICAgICBjb25zdCBvdXRwdXQgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7IGkgKz0gMykge1xuICAgICAgICAgICAgY29uc3QgYnl0ZTEgPSBpbnB1dFtpXTtcbiAgICAgICAgICAgIGNvbnN0IGhhdmVCeXRlMiA9IGkgKyAxIDwgaW5wdXQubGVuZ3RoO1xuICAgICAgICAgICAgY29uc3QgYnl0ZTIgPSBoYXZlQnl0ZTIgPyBpbnB1dFtpICsgMV0gOiAwO1xuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGUzID0gaSArIDIgPCBpbnB1dC5sZW5ndGg7XG4gICAgICAgICAgICBjb25zdCBieXRlMyA9IGhhdmVCeXRlMyA/IGlucHV0W2kgKyAyXSA6IDA7XG4gICAgICAgICAgICBjb25zdCBvdXRCeXRlMSA9IGJ5dGUxID4+IDI7XG4gICAgICAgICAgICBjb25zdCBvdXRCeXRlMiA9ICgoYnl0ZTEgJiAweDAzKSA8PCA0KSB8IChieXRlMiA+PiA0KTtcbiAgICAgICAgICAgIGxldCBvdXRCeXRlMyA9ICgoYnl0ZTIgJiAweDBmKSA8PCAyKSB8IChieXRlMyA+PiA2KTtcbiAgICAgICAgICAgIGxldCBvdXRCeXRlNCA9IGJ5dGUzICYgMHgzZjtcbiAgICAgICAgICAgIGlmICghaGF2ZUJ5dGUzKSB7XG4gICAgICAgICAgICAgICAgb3V0Qnl0ZTQgPSA2NDtcbiAgICAgICAgICAgICAgICBpZiAoIWhhdmVCeXRlMikge1xuICAgICAgICAgICAgICAgICAgICBvdXRCeXRlMyA9IDY0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG91dHB1dC5wdXNoKGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTFdLCBieXRlVG9DaGFyTWFwW291dEJ5dGUyXSwgYnl0ZVRvQ2hhck1hcFtvdXRCeXRlM10sIGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTRdKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0cHV0LmpvaW4oJycpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQmFzZTY0LWVuY29kZSBhIHN0cmluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpbnB1dCBBIHN0cmluZyB0byBlbmNvZGUuXG4gICAgICogQHBhcmFtIHdlYlNhZmUgSWYgdHJ1ZSwgd2Ugc2hvdWxkIHVzZSB0aGVcbiAgICAgKiAgICAgYWx0ZXJuYXRpdmUgYWxwaGFiZXQuXG4gICAgICogQHJldHVybiBUaGUgYmFzZTY0IGVuY29kZWQgc3RyaW5nLlxuICAgICAqL1xuICAgIGVuY29kZVN0cmluZyhpbnB1dCwgd2ViU2FmZSkge1xuICAgICAgICAvLyBTaG9ydGN1dCBmb3IgTW96aWxsYSBicm93c2VycyB0aGF0IGltcGxlbWVudFxuICAgICAgICAvLyBhIG5hdGl2ZSBiYXNlNjQgZW5jb2RlciBpbiB0aGUgZm9ybSBvZiBcImJ0b2EvYXRvYlwiXG4gICAgICAgIGlmICh0aGlzLkhBU19OQVRJVkVfU1VQUE9SVCAmJiAhd2ViU2FmZSkge1xuICAgICAgICAgICAgcmV0dXJuIGJ0b2EoaW5wdXQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmVuY29kZUJ5dGVBcnJheShzdHJpbmdUb0J5dGVBcnJheSQxKGlucHV0KSwgd2ViU2FmZSk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBCYXNlNjQtZGVjb2RlIGEgc3RyaW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIGlucHV0IHRvIGRlY29kZS5cbiAgICAgKiBAcGFyYW0gd2ViU2FmZSBUcnVlIGlmIHdlIHNob3VsZCB1c2UgdGhlXG4gICAgICogICAgIGFsdGVybmF0aXZlIGFscGhhYmV0LlxuICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgZGVjb2RlZCB2YWx1ZS5cbiAgICAgKi9cbiAgICBkZWNvZGVTdHJpbmcoaW5wdXQsIHdlYlNhZmUpIHtcbiAgICAgICAgLy8gU2hvcnRjdXQgZm9yIE1vemlsbGEgYnJvd3NlcnMgdGhhdCBpbXBsZW1lbnRcbiAgICAgICAgLy8gYSBuYXRpdmUgYmFzZTY0IGVuY29kZXIgaW4gdGhlIGZvcm0gb2YgXCJidG9hL2F0b2JcIlxuICAgICAgICBpZiAodGhpcy5IQVNfTkFUSVZFX1NVUFBPUlQgJiYgIXdlYlNhZmUpIHtcbiAgICAgICAgICAgIHJldHVybiBhdG9iKGlucHV0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYnl0ZUFycmF5VG9TdHJpbmcodGhpcy5kZWNvZGVTdHJpbmdUb0J5dGVBcnJheShpbnB1dCwgd2ViU2FmZSkpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQmFzZTY0LWRlY29kZSBhIHN0cmluZy5cbiAgICAgKlxuICAgICAqIEluIGJhc2UtNjQgZGVjb2RpbmcsIGdyb3VwcyBvZiBmb3VyIGNoYXJhY3RlcnMgYXJlIGNvbnZlcnRlZCBpbnRvIHRocmVlXG4gICAgICogYnl0ZXMuICBJZiB0aGUgZW5jb2RlciBkaWQgbm90IGFwcGx5IHBhZGRpbmcsIHRoZSBpbnB1dCBsZW5ndGggbWF5IG5vdFxuICAgICAqIGJlIGEgbXVsdGlwbGUgb2YgNC5cbiAgICAgKlxuICAgICAqIEluIHRoaXMgY2FzZSwgdGhlIGxhc3QgZ3JvdXAgd2lsbCBoYXZlIGZld2VyIHRoYW4gNCBjaGFyYWN0ZXJzLCBhbmRcbiAgICAgKiBwYWRkaW5nIHdpbGwgYmUgaW5mZXJyZWQuICBJZiB0aGUgZ3JvdXAgaGFzIG9uZSBvciB0d28gY2hhcmFjdGVycywgaXQgZGVjb2Rlc1xuICAgICAqIHRvIG9uZSBieXRlLiAgSWYgdGhlIGdyb3VwIGhhcyB0aHJlZSBjaGFyYWN0ZXJzLCBpdCBkZWNvZGVzIHRvIHR3byBieXRlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpbnB1dCBJbnB1dCB0byBkZWNvZGUuXG4gICAgICogQHBhcmFtIHdlYlNhZmUgVHJ1ZSBpZiB3ZSBzaG91bGQgdXNlIHRoZSB3ZWItc2FmZSBhbHBoYWJldC5cbiAgICAgKiBAcmV0dXJuIGJ5dGVzIHJlcHJlc2VudGluZyB0aGUgZGVjb2RlZCB2YWx1ZS5cbiAgICAgKi9cbiAgICBkZWNvZGVTdHJpbmdUb0J5dGVBcnJheShpbnB1dCwgd2ViU2FmZSkge1xuICAgICAgICB0aGlzLmluaXRfKCk7XG4gICAgICAgIGNvbnN0IGNoYXJUb0J5dGVNYXAgPSB3ZWJTYWZlXG4gICAgICAgICAgICA/IHRoaXMuY2hhclRvQnl0ZU1hcFdlYlNhZmVfXG4gICAgICAgICAgICA6IHRoaXMuY2hhclRvQnl0ZU1hcF87XG4gICAgICAgIGNvbnN0IG91dHB1dCA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDspIHtcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUxID0gY2hhclRvQnl0ZU1hcFtpbnB1dC5jaGFyQXQoaSsrKV07XG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTIgPSBpIDwgaW5wdXQubGVuZ3RoO1xuICAgICAgICAgICAgY29uc3QgYnl0ZTIgPSBoYXZlQnl0ZTIgPyBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKV0gOiAwO1xuICAgICAgICAgICAgKytpO1xuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGUzID0gaSA8IGlucHV0Lmxlbmd0aDtcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUzID0gaGF2ZUJ5dGUzID8gY2hhclRvQnl0ZU1hcFtpbnB1dC5jaGFyQXQoaSldIDogNjQ7XG4gICAgICAgICAgICArK2k7XG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTQgPSBpIDwgaW5wdXQubGVuZ3RoO1xuICAgICAgICAgICAgY29uc3QgYnl0ZTQgPSBoYXZlQnl0ZTQgPyBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKV0gOiA2NDtcbiAgICAgICAgICAgICsraTtcbiAgICAgICAgICAgIGlmIChieXRlMSA9PSBudWxsIHx8IGJ5dGUyID09IG51bGwgfHwgYnl0ZTMgPT0gbnVsbCB8fCBieXRlNCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IERlY29kZUJhc2U2NFN0cmluZ0Vycm9yKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBvdXRCeXRlMSA9IChieXRlMSA8PCAyKSB8IChieXRlMiA+PiA0KTtcbiAgICAgICAgICAgIG91dHB1dC5wdXNoKG91dEJ5dGUxKTtcbiAgICAgICAgICAgIGlmIChieXRlMyAhPT0gNjQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvdXRCeXRlMiA9ICgoYnl0ZTIgPDwgNCkgJiAweGYwKSB8IChieXRlMyA+PiAyKTtcbiAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChvdXRCeXRlMik7XG4gICAgICAgICAgICAgICAgaWYgKGJ5dGU0ICE9PSA2NCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBvdXRCeXRlMyA9ICgoYnl0ZTMgPDwgNikgJiAweGMwKSB8IGJ5dGU0O1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChvdXRCeXRlMyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBMYXp5IHN0YXRpYyBpbml0aWFsaXphdGlvbiBmdW5jdGlvbi4gQ2FsbGVkIGJlZm9yZVxuICAgICAqIGFjY2Vzc2luZyBhbnkgb2YgdGhlIHN0YXRpYyBtYXAgdmFyaWFibGVzLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgaW5pdF8oKSB7XG4gICAgICAgIGlmICghdGhpcy5ieXRlVG9DaGFyTWFwXykge1xuICAgICAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwXyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwXyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV8gPSB7fTtcbiAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcFdlYlNhZmVfID0ge307XG4gICAgICAgICAgICAvLyBXZSB3YW50IHF1aWNrIG1hcHBpbmdzIGJhY2sgYW5kIGZvcnRoLCBzbyB3ZSBwcmVjb21wdXRlIHR3byBtYXBzLlxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLkVOQ09ERURfVkFMUy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcF9baV0gPSB0aGlzLkVOQ09ERURfVkFMUy5jaGFyQXQoaSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwX1t0aGlzLmJ5dGVUb0NoYXJNYXBfW2ldXSA9IGk7XG4gICAgICAgICAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV9baV0gPSB0aGlzLkVOQ09ERURfVkFMU19XRUJTQUZFLmNoYXJBdChpKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBXZWJTYWZlX1t0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlX1tpXV0gPSBpO1xuICAgICAgICAgICAgICAgIC8vIEJlIGZvcmdpdmluZyB3aGVuIGRlY29kaW5nIGFuZCBjb3JyZWN0bHkgZGVjb2RlIGJvdGggZW5jb2RpbmdzLlxuICAgICAgICAgICAgICAgIGlmIChpID49IHRoaXMuRU5DT0RFRF9WQUxTX0JBU0UubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcF9bdGhpcy5FTkNPREVEX1ZBTFNfV0VCU0FGRS5jaGFyQXQoaSldID0gaTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9bdGhpcy5FTkNPREVEX1ZBTFMuY2hhckF0KGkpXSA9IGk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufTtcbi8qKlxuICogQW4gZXJyb3IgZW5jb3VudGVyZWQgd2hpbGUgZGVjb2RpbmcgYmFzZTY0IHN0cmluZy5cbiAqL1xuY2xhc3MgRGVjb2RlQmFzZTY0U3RyaW5nRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMubmFtZSA9ICdEZWNvZGVCYXNlNjRTdHJpbmdFcnJvcic7XG4gICAgfVxufVxuLyoqXG4gKiBVUkwtc2FmZSBiYXNlNjQgZW5jb2RpbmdcbiAqL1xuY29uc3QgYmFzZTY0RW5jb2RlID0gZnVuY3Rpb24gKHN0cikge1xuICAgIGNvbnN0IHV0ZjhCeXRlcyA9IHN0cmluZ1RvQnl0ZUFycmF5JDEoc3RyKTtcbiAgICByZXR1cm4gYmFzZTY0LmVuY29kZUJ5dGVBcnJheSh1dGY4Qnl0ZXMsIHRydWUpO1xufTtcbi8qKlxuICogVVJMLXNhZmUgYmFzZTY0IGVuY29kaW5nICh3aXRob3V0IFwiLlwiIHBhZGRpbmcgaW4gdGhlIGVuZCkuXG4gKiBlLmcuIFVzZWQgaW4gSlNPTiBXZWIgVG9rZW4gKEpXVCkgcGFydHMuXG4gKi9cbmNvbnN0IGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nID0gZnVuY3Rpb24gKHN0cikge1xuICAgIC8vIFVzZSBiYXNlNjR1cmwgZW5jb2RpbmcgYW5kIHJlbW92ZSBwYWRkaW5nIGluIHRoZSBlbmQgKGRvdCBjaGFyYWN0ZXJzKS5cbiAgICByZXR1cm4gYmFzZTY0RW5jb2RlKHN0cikucmVwbGFjZSgvXFwuL2csICcnKTtcbn07XG4vKipcbiAqIFVSTC1zYWZlIGJhc2U2NCBkZWNvZGluZ1xuICpcbiAqIE5PVEU6IERPIE5PVCB1c2UgdGhlIGdsb2JhbCBhdG9iKCkgZnVuY3Rpb24gLSBpdCBkb2VzIE5PVCBzdXBwb3J0IHRoZVxuICogYmFzZTY0VXJsIHZhcmlhbnQgZW5jb2RpbmcuXG4gKlxuICogQHBhcmFtIHN0ciBUbyBiZSBkZWNvZGVkXG4gKiBAcmV0dXJuIERlY29kZWQgcmVzdWx0LCBpZiBwb3NzaWJsZVxuICovXG5jb25zdCBiYXNlNjREZWNvZGUgPSBmdW5jdGlvbiAoc3RyKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGJhc2U2NC5kZWNvZGVTdHJpbmcoc3RyLCB0cnVlKTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignYmFzZTY0RGVjb2RlIGZhaWxlZDogJywgZSk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRG8gYSBkZWVwLWNvcHkgb2YgYmFzaWMgSmF2YVNjcmlwdCBPYmplY3RzIG9yIEFycmF5cy5cbiAqL1xuZnVuY3Rpb24gZGVlcENvcHkodmFsdWUpIHtcbiAgICByZXR1cm4gZGVlcEV4dGVuZCh1bmRlZmluZWQsIHZhbHVlKTtcbn1cbi8qKlxuICogQ29weSBwcm9wZXJ0aWVzIGZyb20gc291cmNlIHRvIHRhcmdldCAocmVjdXJzaXZlbHkgYWxsb3dzIGV4dGVuc2lvblxuICogb2YgT2JqZWN0cyBhbmQgQXJyYXlzKS4gIFNjYWxhciB2YWx1ZXMgaW4gdGhlIHRhcmdldCBhcmUgb3Zlci13cml0dGVuLlxuICogSWYgdGFyZ2V0IGlzIHVuZGVmaW5lZCwgYW4gb2JqZWN0IG9mIHRoZSBhcHByb3ByaWF0ZSB0eXBlIHdpbGwgYmUgY3JlYXRlZFxuICogKGFuZCByZXR1cm5lZCkuXG4gKlxuICogV2UgcmVjdXJzaXZlbHkgY29weSBhbGwgY2hpbGQgcHJvcGVydGllcyBvZiBwbGFpbiBPYmplY3RzIGluIHRoZSBzb3VyY2UtIHNvXG4gKiB0aGF0IG5hbWVzcGFjZS0gbGlrZSBkaWN0aW9uYXJpZXMgYXJlIG1lcmdlZC5cbiAqXG4gKiBOb3RlIHRoYXQgdGhlIHRhcmdldCBjYW4gYmUgYSBmdW5jdGlvbiwgaW4gd2hpY2ggY2FzZSB0aGUgcHJvcGVydGllcyBpblxuICogdGhlIHNvdXJjZSBPYmplY3QgYXJlIGNvcGllZCBvbnRvIGl0IGFzIHN0YXRpYyBwcm9wZXJ0aWVzIG9mIHRoZSBGdW5jdGlvbi5cbiAqXG4gKiBOb3RlOiB3ZSBkb24ndCBtZXJnZSBfX3Byb3RvX18gdG8gcHJldmVudCBwcm90b3R5cGUgcG9sbHV0aW9uXG4gKi9cbmZ1bmN0aW9uIGRlZXBFeHRlbmQodGFyZ2V0LCBzb3VyY2UpIHtcbiAgICBpZiAoIShzb3VyY2UgaW5zdGFuY2VvZiBPYmplY3QpKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2U7XG4gICAgfVxuICAgIHN3aXRjaCAoc291cmNlLmNvbnN0cnVjdG9yKSB7XG4gICAgICAgIGNhc2UgRGF0ZTpcbiAgICAgICAgICAgIC8vIFRyZWF0IERhdGVzIGxpa2Ugc2NhbGFyczsgaWYgdGhlIHRhcmdldCBkYXRlIG9iamVjdCBoYWQgYW55IGNoaWxkXG4gICAgICAgICAgICAvLyBwcm9wZXJ0aWVzIC0gdGhleSB3aWxsIGJlIGxvc3QhXG4gICAgICAgICAgICBjb25zdCBkYXRlVmFsdWUgPSBzb3VyY2U7XG4gICAgICAgICAgICByZXR1cm4gbmV3IERhdGUoZGF0ZVZhbHVlLmdldFRpbWUoKSk7XG4gICAgICAgIGNhc2UgT2JqZWN0OlxuICAgICAgICAgICAgaWYgKHRhcmdldCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0ID0ge307XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBBcnJheTpcbiAgICAgICAgICAgIC8vIEFsd2F5cyBjb3B5IHRoZSBhcnJheSBzb3VyY2UgYW5kIG92ZXJ3cml0ZSB0aGUgdGFyZ2V0LlxuICAgICAgICAgICAgdGFyZ2V0ID0gW107XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIC8vIE5vdCBhIHBsYWluIE9iamVjdCAtIHRyZWF0IGl0IGFzIGEgc2NhbGFyLlxuICAgICAgICAgICAgcmV0dXJuIHNvdXJjZTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBwcm9wIGluIHNvdXJjZSkge1xuICAgICAgICAvLyB1c2UgaXNWYWxpZEtleSB0byBndWFyZCBhZ2FpbnN0IHByb3RvdHlwZSBwb2xsdXRpb24uIFNlZSBodHRwczovL3NueWsuaW8vdnVsbi9TTllLLUpTLUxPREFTSC00NTAyMDJcbiAgICAgICAgaWYgKCFzb3VyY2UuaGFzT3duUHJvcGVydHkocHJvcCkgfHwgIWlzVmFsaWRLZXkocHJvcCkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHRhcmdldFtwcm9wXSA9IGRlZXBFeHRlbmQodGFyZ2V0W3Byb3BdLCBzb3VyY2VbcHJvcF0pO1xuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0O1xufVxuZnVuY3Rpb24gaXNWYWxpZEtleShrZXkpIHtcbiAgICByZXR1cm4ga2V5ICE9PSAnX19wcm90b19fJztcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUG9seWZpbGwgZm9yIGBnbG9iYWxUaGlzYCBvYmplY3QuXG4gKiBAcmV0dXJucyB0aGUgYGdsb2JhbFRoaXNgIG9iamVjdCBmb3IgdGhlIGdpdmVuIGVudmlyb25tZW50LlxuICogQHB1YmxpY1xuICovXG5mdW5jdGlvbiBnZXRHbG9iYWwoKSB7XG4gICAgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiB3aW5kb3c7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gZ2xvYmFsO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuYWJsZSB0byBsb2NhdGUgZ2xvYmFsIG9iamVjdC4nKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNvbnN0IGdldERlZmF1bHRzRnJvbUdsb2JhbCA9ICgpID0+IGdldEdsb2JhbCgpLl9fRklSRUJBU0VfREVGQVVMVFNfXztcbi8qKlxuICogQXR0ZW1wdCB0byByZWFkIGRlZmF1bHRzIGZyb20gYSBKU09OIHN0cmluZyBwcm92aWRlZCB0b1xuICogcHJvY2VzcyguKWVudiguKV9fRklSRUJBU0VfREVGQVVMVFNfXyBvciBhIEpTT04gZmlsZSB3aG9zZSBwYXRoIGlzIGluXG4gKiBwcm9jZXNzKC4pZW52KC4pX19GSVJFQkFTRV9ERUZBVUxUU19QQVRIX19cbiAqIFRoZSBkb3RzIGFyZSBpbiBwYXJlbnMgYmVjYXVzZSBjZXJ0YWluIGNvbXBpbGVycyAoVml0ZT8pIGNhbm5vdFxuICogaGFuZGxlIHNlZWluZyB0aGF0IHZhcmlhYmxlIGluIGNvbW1lbnRzLlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1qcy1zZGsvaXNzdWVzLzY4MzhcbiAqL1xuY29uc3QgZ2V0RGVmYXVsdHNGcm9tRW52VmFyaWFibGUgPSAoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBwcm9jZXNzID09PSAndW5kZWZpbmVkJyB8fCB0eXBlb2YgcHJvY2Vzcy5lbnYgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgZGVmYXVsdHNKc29uU3RyaW5nID0gcHJvY2Vzcy5lbnYuX19GSVJFQkFTRV9ERUZBVUxUU19fO1xuICAgIGlmIChkZWZhdWx0c0pzb25TdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoZGVmYXVsdHNKc29uU3RyaW5nKTtcbiAgICB9XG59O1xuY29uc3QgZ2V0RGVmYXVsdHNGcm9tQ29va2llID0gKCkgPT4ge1xuICAgIGlmICh0eXBlb2YgZG9jdW1lbnQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IG1hdGNoO1xuICAgIHRyeSB7XG4gICAgICAgIG1hdGNoID0gZG9jdW1lbnQuY29va2llLm1hdGNoKC9fX0ZJUkVCQVNFX0RFRkFVTFRTX189KFteO10rKS8pO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICAvLyBTb21lIGVudmlyb25tZW50cyBzdWNoIGFzIEFuZ3VsYXIgVW5pdmVyc2FsIFNTUiBoYXZlIGFcbiAgICAgICAgLy8gYGRvY3VtZW50YCBvYmplY3QgYnV0IGVycm9yIG9uIGFjY2Vzc2luZyBgZG9jdW1lbnQuY29va2llYC5cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBkZWNvZGVkID0gbWF0Y2ggJiYgYmFzZTY0RGVjb2RlKG1hdGNoWzFdKTtcbiAgICByZXR1cm4gZGVjb2RlZCAmJiBKU09OLnBhcnNlKGRlY29kZWQpO1xufTtcbi8qKlxuICogR2V0IHRoZSBfX0ZJUkVCQVNFX0RFRkFVTFRTX18gb2JqZWN0LiBJdCBjaGVja3MgaW4gb3JkZXI6XG4gKiAoMSkgaWYgc3VjaCBhbiBvYmplY3QgZXhpc3RzIGFzIGEgcHJvcGVydHkgb2YgYGdsb2JhbFRoaXNgXG4gKiAoMikgaWYgc3VjaCBhbiBvYmplY3Qgd2FzIHByb3ZpZGVkIG9uIGEgc2hlbGwgZW52aXJvbm1lbnQgdmFyaWFibGVcbiAqICgzKSBpZiBzdWNoIGFuIG9iamVjdCBleGlzdHMgaW4gYSBjb29raWVcbiAqIEBwdWJsaWNcbiAqL1xuY29uc3QgZ2V0RGVmYXVsdHMgPSAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIChnZXREZWZhdWx0c0Zyb21Qb3N0aW5zdGFsbCgpIHx8XG4gICAgICAgICAgICBnZXREZWZhdWx0c0Zyb21HbG9iYWwoKSB8fFxuICAgICAgICAgICAgZ2V0RGVmYXVsdHNGcm9tRW52VmFyaWFibGUoKSB8fFxuICAgICAgICAgICAgZ2V0RGVmYXVsdHNGcm9tQ29va2llKCkpO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICAvKipcbiAgICAgICAgICogQ2F0Y2gtYWxsIGZvciBiZWluZyB1bmFibGUgdG8gZ2V0IF9fRklSRUJBU0VfREVGQVVMVFNfXyBkdWVcbiAgICAgICAgICogdG8gYW55IGVudmlyb25tZW50IGNhc2Ugd2UgaGF2ZSBub3QgYWNjb3VudGVkIGZvci4gTG9nIHRvXG4gICAgICAgICAqIGluZm8gaW5zdGVhZCBvZiBzd2FsbG93aW5nIHNvIHdlIGNhbiBmaW5kIHRoZXNlIHVua25vd24gY2FzZXNcbiAgICAgICAgICogYW5kIGFkZCBwYXRocyBmb3IgdGhlbSBpZiBuZWVkZWQuXG4gICAgICAgICAqL1xuICAgICAgICBjb25zb2xlLmluZm8oYFVuYWJsZSB0byBnZXQgX19GSVJFQkFTRV9ERUZBVUxUU19fIGR1ZSB0bzogJHtlfWApO1xuICAgICAgICByZXR1cm47XG4gICAgfVxufTtcbi8qKlxuICogUmV0dXJucyBlbXVsYXRvciBob3N0IHN0b3JlZCBpbiB0aGUgX19GSVJFQkFTRV9ERUZBVUxUU19fIG9iamVjdFxuICogZm9yIHRoZSBnaXZlbiBwcm9kdWN0LlxuICogQHJldHVybnMgYSBVUkwgaG9zdCBmb3JtYXR0ZWQgbGlrZSBgMTI3LjAuMC4xOjk5OTlgIG9yIGBbOjoxXTo0MDAwYCBpZiBhdmFpbGFibGVcbiAqIEBwdWJsaWNcbiAqL1xuY29uc3QgZ2V0RGVmYXVsdEVtdWxhdG9ySG9zdCA9IChwcm9kdWN0TmFtZSkgPT4gZ2V0RGVmYXVsdHMoKT8uZW11bGF0b3JIb3N0cz8uW3Byb2R1Y3ROYW1lXTtcbi8qKlxuICogUmV0dXJucyBlbXVsYXRvciBob3N0bmFtZSBhbmQgcG9ydCBzdG9yZWQgaW4gdGhlIF9fRklSRUJBU0VfREVGQVVMVFNfXyBvYmplY3RcbiAqIGZvciB0aGUgZ2l2ZW4gcHJvZHVjdC5cbiAqIEByZXR1cm5zIGEgcGFpciBvZiBob3N0bmFtZSBhbmQgcG9ydCBsaWtlIGBbXCI6OjFcIiwgNDAwMF1gIGlmIGF2YWlsYWJsZVxuICogQHB1YmxpY1xuICovXG5jb25zdCBnZXREZWZhdWx0RW11bGF0b3JIb3N0bmFtZUFuZFBvcnQgPSAocHJvZHVjdE5hbWUpID0+IHtcbiAgICBjb25zdCBob3N0ID0gZ2V0RGVmYXVsdEVtdWxhdG9ySG9zdChwcm9kdWN0TmFtZSk7XG4gICAgaWYgKCFob3N0KSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IHNlcGFyYXRvckluZGV4ID0gaG9zdC5sYXN0SW5kZXhPZignOicpOyAvLyBGaW5kaW5nIHRoZSBsYXN0IHNpbmNlIElQdjYgYWRkciBhbHNvIGhhcyBjb2xvbnMuXG4gICAgaWYgKHNlcGFyYXRvckluZGV4IDw9IDAgfHwgc2VwYXJhdG9ySW5kZXggKyAxID09PSBob3N0Lmxlbmd0aCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgaG9zdCAke2hvc3R9IHdpdGggbm8gc2VwYXJhdGUgaG9zdG5hbWUgYW5kIHBvcnQhYCk7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWdsb2JhbHNcbiAgICBjb25zdCBwb3J0ID0gcGFyc2VJbnQoaG9zdC5zdWJzdHJpbmcoc2VwYXJhdG9ySW5kZXggKyAxKSwgMTApO1xuICAgIGlmIChob3N0WzBdID09PSAnWycpIHtcbiAgICAgICAgLy8gQnJhY2tldC1xdW90ZWQgYFtpcHY2YWRkcl06cG9ydGAgPT4gcmV0dXJuIFwiaXB2NmFkZHJcIiAod2l0aG91dCBicmFja2V0cykuXG4gICAgICAgIHJldHVybiBbaG9zdC5zdWJzdHJpbmcoMSwgc2VwYXJhdG9ySW5kZXggLSAxKSwgcG9ydF07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gW2hvc3Quc3Vic3RyaW5nKDAsIHNlcGFyYXRvckluZGV4KSwgcG9ydF07XG4gICAgfVxufTtcbi8qKlxuICogUmV0dXJucyBGaXJlYmFzZSBhcHAgY29uZmlnIHN0b3JlZCBpbiB0aGUgX19GSVJFQkFTRV9ERUZBVUxUU19fIG9iamVjdC5cbiAqIEBwdWJsaWNcbiAqL1xuY29uc3QgZ2V0RGVmYXVsdEFwcENvbmZpZyA9ICgpID0+IGdldERlZmF1bHRzKCk/LmNvbmZpZztcbi8qKlxuICogUmV0dXJucyBhbiBleHBlcmltZW50YWwgc2V0dGluZyBvbiB0aGUgX19GSVJFQkFTRV9ERUZBVUxUU19fIG9iamVjdCAocHJvcGVydGllc1xuICogcHJlZml4ZWQgYnkgXCJfXCIpXG4gKiBAcHVibGljXG4gKi9cbmNvbnN0IGdldEV4cGVyaW1lbnRhbFNldHRpbmcgPSAobmFtZSkgPT4gZ2V0RGVmYXVsdHMoKT8uW2BfJHtuYW1lfWBdO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY2xhc3MgRGVmZXJyZWQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnJlamVjdCA9ICgpID0+IHsgfTtcbiAgICAgICAgdGhpcy5yZXNvbHZlID0gKCkgPT4geyB9O1xuICAgICAgICB0aGlzLnByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmUgPSByZXNvbHZlO1xuICAgICAgICAgICAgdGhpcy5yZWplY3QgPSByZWplY3Q7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBPdXIgQVBJIGludGVybmFscyBhcmUgbm90IHByb21pc2lmaWVkIGFuZCBjYW5ub3QgYmVjYXVzZSBvdXIgY2FsbGJhY2sgQVBJcyBoYXZlIHN1YnRsZSBleHBlY3RhdGlvbnMgYXJvdW5kXG4gICAgICogaW52b2tpbmcgcHJvbWlzZXMgaW5saW5lLCB3aGljaCBQcm9taXNlcyBhcmUgZm9yYmlkZGVuIHRvIGRvLiBUaGlzIG1ldGhvZCBhY2NlcHRzIGFuIG9wdGlvbmFsIG5vZGUtc3R5bGUgY2FsbGJhY2tcbiAgICAgKiBhbmQgcmV0dXJucyBhIG5vZGUtc3R5bGUgY2FsbGJhY2sgd2hpY2ggd2lsbCByZXNvbHZlIG9yIHJlamVjdCB0aGUgRGVmZXJyZWQncyBwcm9taXNlLlxuICAgICAqL1xuICAgIHdyYXBDYWxsYmFjayhjYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gKGVycm9yLCB2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXNvbHZlKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAvLyBBdHRhY2hpbmcgbm9vcCBoYW5kbGVyIGp1c3QgaW4gY2FzZSBkZXZlbG9wZXIgd2Fzbid0IGV4cGVjdGluZ1xuICAgICAgICAgICAgICAgIC8vIHByb21pc2VzXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9taXNlLmNhdGNoKCgpID0+IHsgfSk7XG4gICAgICAgICAgICAgICAgLy8gU29tZSBvZiBvdXIgY2FsbGJhY2tzIGRvbid0IGV4cGVjdCBhIHZhbHVlIGFuZCBvdXIgb3duIHRlc3RzXG4gICAgICAgICAgICAgICAgLy8gYXNzZXJ0IHRoYXQgdGhlIHBhcmFtZXRlciBsZW5ndGggaXMgMVxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjay5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyb3IsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyNSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBDaGVja3Mgd2hldGhlciBob3N0IGlzIGEgY2xvdWQgd29ya3N0YXRpb24gb3Igbm90LlxuICogQHB1YmxpY1xuICovXG5mdW5jdGlvbiBpc0Nsb3VkV29ya3N0YXRpb24odXJsKSB7XG4gICAgLy8gYGlzQ2xvdWRXb3Jrc3RhdGlvbmAgaXMgY2FsbGVkIHdpdGhvdXQgcHJvdG9jb2wgaW4gY2VydGFpbiBjb25uZWN0KkVtdWxhdG9yIGZ1bmN0aW9uc1xuICAgIC8vIEluIEhUVFAgcmVxdWVzdCBidWlsZGVycywgaXQncyBjYWxsZWQgd2l0aCB0aGUgcHJvdG9jb2wuXG4gICAgLy8gSWYgY2FsbGVkIHdpdGggcHJvdG9jb2wgcHJlZml4LCBpdCdzIGEgdmFsaWQgVVJMLCBzbyB3ZSBleHRyYWN0IHRoZSBob3N0bmFtZVxuICAgIC8vIElmIGNhbGxlZCB3aXRob3V0LCB3ZSBhc3N1bWUgdGhlIHN0cmluZyBpcyB0aGUgaG9zdG5hbWUuXG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgaG9zdCA9IHVybC5zdGFydHNXaXRoKCdodHRwOi8vJykgfHwgdXJsLnN0YXJ0c1dpdGgoJ2h0dHBzOi8vJylcbiAgICAgICAgICAgID8gbmV3IFVSTCh1cmwpLmhvc3RuYW1lXG4gICAgICAgICAgICA6IHVybDtcbiAgICAgICAgcmV0dXJuIGhvc3QuZW5kc1dpdGgoJy5jbG91ZHdvcmtzdGF0aW9ucy5kZXYnKTtcbiAgICB9XG4gICAgY2F0Y2gge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuLyoqXG4gKiBNYWtlcyBhIGZldGNoIHJlcXVlc3QgdG8gdGhlIGdpdmVuIHNlcnZlci5cbiAqIE1vc3RseSB1c2VkIGZvciBmb3J3YXJkaW5nIGNvb2tpZXMgaW4gRmlyZWJhc2UgU3R1ZGlvLlxuICogQHB1YmxpY1xuICovXG5hc3luYyBmdW5jdGlvbiBwaW5nU2VydmVyKGVuZHBvaW50KSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZmV0Y2goZW5kcG9pbnQsIHtcbiAgICAgICAgY3JlZGVudGlhbHM6ICdpbmNsdWRlJ1xuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHQub2s7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5mdW5jdGlvbiBjcmVhdGVNb2NrVXNlclRva2VuKHRva2VuLCBwcm9qZWN0SWQpIHtcbiAgICBpZiAodG9rZW4udWlkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIFwidWlkXCIgZmllbGQgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZCBieSBtb2NrVXNlclRva2VuLiBQbGVhc2UgdXNlIFwic3ViXCIgaW5zdGVhZCBmb3IgRmlyZWJhc2UgQXV0aCBVc2VyIElELicpO1xuICAgIH1cbiAgICAvLyBVbnNlY3VyZWQgSldUcyB1c2UgXCJub25lXCIgYXMgdGhlIGFsZ29yaXRobS5cbiAgICBjb25zdCBoZWFkZXIgPSB7XG4gICAgICAgIGFsZzogJ25vbmUnLFxuICAgICAgICB0eXBlOiAnSldUJ1xuICAgIH07XG4gICAgY29uc3QgcHJvamVjdCA9IHByb2plY3RJZCB8fCAnZGVtby1wcm9qZWN0JztcbiAgICBjb25zdCBpYXQgPSB0b2tlbi5pYXQgfHwgMDtcbiAgICBjb25zdCBzdWIgPSB0b2tlbi5zdWIgfHwgdG9rZW4udXNlcl9pZDtcbiAgICBpZiAoIXN1Yikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJtb2NrVXNlclRva2VuIG11c3QgY29udGFpbiAnc3ViJyBvciAndXNlcl9pZCcgZmllbGQhXCIpO1xuICAgIH1cbiAgICBjb25zdCBwYXlsb2FkID0ge1xuICAgICAgICAvLyBTZXQgYWxsIHJlcXVpcmVkIGZpZWxkcyB0byBkZWNlbnQgZGVmYXVsdHNcbiAgICAgICAgaXNzOiBgaHR0cHM6Ly9zZWN1cmV0b2tlbi5nb29nbGUuY29tLyR7cHJvamVjdH1gLFxuICAgICAgICBhdWQ6IHByb2plY3QsXG4gICAgICAgIGlhdCxcbiAgICAgICAgZXhwOiBpYXQgKyAzNjAwLFxuICAgICAgICBhdXRoX3RpbWU6IGlhdCxcbiAgICAgICAgc3ViLFxuICAgICAgICB1c2VyX2lkOiBzdWIsXG4gICAgICAgIGZpcmViYXNlOiB7XG4gICAgICAgICAgICBzaWduX2luX3Byb3ZpZGVyOiAnY3VzdG9tJyxcbiAgICAgICAgICAgIGlkZW50aXRpZXM6IHt9XG4gICAgICAgIH0sXG4gICAgICAgIC8vIE92ZXJyaWRlIHdpdGggdXNlciBvcHRpb25zXG4gICAgICAgIC4uLnRva2VuXG4gICAgfTtcbiAgICAvLyBVbnNlY3VyZWQgSldUcyB1c2UgdGhlIGVtcHR5IHN0cmluZyBhcyBhIHNpZ25hdHVyZS5cbiAgICBjb25zdCBzaWduYXR1cmUgPSAnJztcbiAgICByZXR1cm4gW1xuICAgICAgICBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyhKU09OLnN0cmluZ2lmeShoZWFkZXIpKSxcbiAgICAgICAgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcoSlNPTi5zdHJpbmdpZnkocGF5bG9hZCkpLFxuICAgICAgICBzaWduYXR1cmVcbiAgICBdLmpvaW4oJy4nKTtcbn1cbmNvbnN0IGVtdWxhdG9yU3RhdHVzID0ge307XG4vLyBDaGVja3Mgd2hldGhlciBhbnkgcHJvZHVjdHMgYXJlIHJ1bm5pbmcgb24gYW4gZW11bGF0b3JcbmZ1bmN0aW9uIGdldEVtdWxhdG9yU3VtbWFyeSgpIHtcbiAgICBjb25zdCBzdW1tYXJ5ID0ge1xuICAgICAgICBwcm9kOiBbXSxcbiAgICAgICAgZW11bGF0b3I6IFtdXG4gICAgfTtcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhlbXVsYXRvclN0YXR1cykpIHtcbiAgICAgICAgaWYgKGVtdWxhdG9yU3RhdHVzW2tleV0pIHtcbiAgICAgICAgICAgIHN1bW1hcnkuZW11bGF0b3IucHVzaChrZXkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3VtbWFyeS5wcm9kLnB1c2goa2V5KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc3VtbWFyeTtcbn1cbmZ1bmN0aW9uIGdldE9yQ3JlYXRlRWwoaWQpIHtcbiAgICBsZXQgcGFyZW50RGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICAgIGxldCBjcmVhdGVkID0gZmFsc2U7XG4gICAgaWYgKCFwYXJlbnREaXYpIHtcbiAgICAgICAgcGFyZW50RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHBhcmVudERpdi5zZXRBdHRyaWJ1dGUoJ2lkJywgaWQpO1xuICAgICAgICBjcmVhdGVkID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHsgY3JlYXRlZCwgZWxlbWVudDogcGFyZW50RGl2IH07XG59XG5sZXQgcHJldmlvdXNseURpc21pc3NlZCA9IGZhbHNlO1xuLyoqXG4gKiBVcGRhdGVzIEVtdWxhdG9yIEJhbm5lci4gUHJpbWFyaWx5IHVzZWQgZm9yIEZpcmViYXNlIFN0dWRpb1xuICogQHBhcmFtIG5hbWVcbiAqIEBwYXJhbSBpc1J1bm5pbmdFbXVsYXRvclxuICogQHB1YmxpY1xuICovXG5mdW5jdGlvbiB1cGRhdGVFbXVsYXRvckJhbm5lcihuYW1lLCBpc1J1bm5pbmdFbXVsYXRvcikge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICB0eXBlb2YgZG9jdW1lbnQgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgICFpc0Nsb3VkV29ya3N0YXRpb24od2luZG93LmxvY2F0aW9uLmhvc3QpIHx8XG4gICAgICAgIGVtdWxhdG9yU3RhdHVzW25hbWVdID09PSBpc1J1bm5pbmdFbXVsYXRvciB8fFxuICAgICAgICBlbXVsYXRvclN0YXR1c1tuYW1lXSB8fCAvLyBJZiBhbHJlYWR5IHNldCB0byB1c2UgZW11bGF0b3IsIGNhbid0IGdvIGJhY2sgdG8gcHJvZC5cbiAgICAgICAgcHJldmlvdXNseURpc21pc3NlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGVtdWxhdG9yU3RhdHVzW25hbWVdID0gaXNSdW5uaW5nRW11bGF0b3I7XG4gICAgZnVuY3Rpb24gcHJlZml4ZWRJZChpZCkge1xuICAgICAgICByZXR1cm4gYF9fZmlyZWJhc2VfX2Jhbm5lcl9fJHtpZH1gO1xuICAgIH1cbiAgICBjb25zdCBiYW5uZXJJZCA9ICdfX2ZpcmViYXNlX19iYW5uZXInO1xuICAgIGNvbnN0IHN1bW1hcnkgPSBnZXRFbXVsYXRvclN1bW1hcnkoKTtcbiAgICBjb25zdCBzaG93RXJyb3IgPSBzdW1tYXJ5LnByb2QubGVuZ3RoID4gMDtcbiAgICBmdW5jdGlvbiB0ZWFyRG93bigpIHtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJhbm5lcklkKTtcbiAgICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gc2V0dXBCYW5uZXJTdHlsZXMoYmFubmVyRWwpIHtcbiAgICAgICAgYmFubmVyRWwuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICAgICAgYmFubmVyRWwuc3R5bGUuYmFja2dyb3VuZCA9ICcjN2ZhYWYwJztcbiAgICAgICAgYmFubmVyRWwuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnO1xuICAgICAgICBiYW5uZXJFbC5zdHlsZS5ib3R0b20gPSAnNXB4JztcbiAgICAgICAgYmFubmVyRWwuc3R5bGUubGVmdCA9ICc1cHgnO1xuICAgICAgICBiYW5uZXJFbC5zdHlsZS5wYWRkaW5nID0gJy41ZW0nO1xuICAgICAgICBiYW5uZXJFbC5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNXB4JztcbiAgICAgICAgYmFubmVyRWwuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xuICAgIH1cbiAgICBmdW5jdGlvbiBzZXR1cEljb25TdHlsZXMocHJlcGVuZEljb24sIGljb25JZCkge1xuICAgICAgICBwcmVwZW5kSWNvbi5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgJzI0Jyk7XG4gICAgICAgIHByZXBlbmRJY29uLnNldEF0dHJpYnV0ZSgnaWQnLCBpY29uSWQpO1xuICAgICAgICBwcmVwZW5kSWNvbi5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsICcyNCcpO1xuICAgICAgICBwcmVwZW5kSWNvbi5zZXRBdHRyaWJ1dGUoJ3ZpZXdCb3gnLCAnMCAwIDI0IDI0Jyk7XG4gICAgICAgIHByZXBlbmRJY29uLnNldEF0dHJpYnV0ZSgnZmlsbCcsICdub25lJyk7XG4gICAgICAgIHByZXBlbmRJY29uLnN0eWxlLm1hcmdpbkxlZnQgPSAnLTZweCc7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldHVwQ2xvc2VCdG4oKSB7XG4gICAgICAgIGNvbnN0IGNsb3NlQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICBjbG9zZUJ0bi5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgIGNsb3NlQnRuLnN0eWxlLm1hcmdpbkxlZnQgPSAnMTZweCc7XG4gICAgICAgIGNsb3NlQnRuLnN0eWxlLmZvbnRTaXplID0gJzI0cHgnO1xuICAgICAgICBjbG9zZUJ0bi5pbm5lckhUTUwgPSAnICZ0aW1lczsnO1xuICAgICAgICBjbG9zZUJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgcHJldmlvdXNseURpc21pc3NlZCA9IHRydWU7XG4gICAgICAgICAgICB0ZWFyRG93bigpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gY2xvc2VCdG47XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldHVwTGlua1N0eWxlcyhsZWFybk1vcmVMaW5rLCBsZWFybk1vcmVJZCkge1xuICAgICAgICBsZWFybk1vcmVMaW5rLnNldEF0dHJpYnV0ZSgnaWQnLCBsZWFybk1vcmVJZCk7XG4gICAgICAgIGxlYXJuTW9yZUxpbmsuaW5uZXJUZXh0ID0gJ0xlYXJuIG1vcmUnO1xuICAgICAgICBsZWFybk1vcmVMaW5rLmhyZWYgPVxuICAgICAgICAgICAgJ2h0dHBzOi8vZmlyZWJhc2UuZ29vZ2xlLmNvbS9kb2NzL3N0dWRpby9wcmV2aWV3LWFwcHMjcHJldmlldy1iYWNrZW5kJztcbiAgICAgICAgbGVhcm5Nb3JlTGluay5zZXRBdHRyaWJ1dGUoJ3RhcmdldCcsICdfX2JsYW5rJyk7XG4gICAgICAgIGxlYXJuTW9yZUxpbmsuc3R5bGUucGFkZGluZ0xlZnQgPSAnNXB4JztcbiAgICAgICAgbGVhcm5Nb3JlTGluay5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9ICd1bmRlcmxpbmUnO1xuICAgIH1cbiAgICBmdW5jdGlvbiBzZXR1cERvbSgpIHtcbiAgICAgICAgY29uc3QgYmFubmVyID0gZ2V0T3JDcmVhdGVFbChiYW5uZXJJZCk7XG4gICAgICAgIGNvbnN0IGZpcmViYXNlVGV4dElkID0gcHJlZml4ZWRJZCgndGV4dCcpO1xuICAgICAgICBjb25zdCBmaXJlYmFzZVRleHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChmaXJlYmFzZVRleHRJZCkgfHwgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICBjb25zdCBsZWFybk1vcmVJZCA9IHByZWZpeGVkSWQoJ2xlYXJubW9yZScpO1xuICAgICAgICBjb25zdCBsZWFybk1vcmVMaW5rID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobGVhcm5Nb3JlSWQpIHx8XG4gICAgICAgICAgICBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICAgIGNvbnN0IHByZXBlbmRJY29uSWQgPSBwcmVmaXhlZElkKCdwcmVwcmVuZEljb24nKTtcbiAgICAgICAgY29uc3QgcHJlcGVuZEljb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwcmVwZW5kSWNvbklkKSB8fFxuICAgICAgICAgICAgZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdzdmcnKTtcbiAgICAgICAgaWYgKGJhbm5lci5jcmVhdGVkKSB7XG4gICAgICAgICAgICAvLyB1cGRhdGUgc3R5bGVzXG4gICAgICAgICAgICBjb25zdCBiYW5uZXJFbCA9IGJhbm5lci5lbGVtZW50O1xuICAgICAgICAgICAgc2V0dXBCYW5uZXJTdHlsZXMoYmFubmVyRWwpO1xuICAgICAgICAgICAgc2V0dXBMaW5rU3R5bGVzKGxlYXJuTW9yZUxpbmssIGxlYXJuTW9yZUlkKTtcbiAgICAgICAgICAgIGNvbnN0IGNsb3NlQnRuID0gc2V0dXBDbG9zZUJ0bigpO1xuICAgICAgICAgICAgc2V0dXBJY29uU3R5bGVzKHByZXBlbmRJY29uLCBwcmVwZW5kSWNvbklkKTtcbiAgICAgICAgICAgIGJhbm5lckVsLmFwcGVuZChwcmVwZW5kSWNvbiwgZmlyZWJhc2VUZXh0LCBsZWFybk1vcmVMaW5rLCBjbG9zZUJ0bik7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGJhbm5lckVsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2hvd0Vycm9yKSB7XG4gICAgICAgICAgICBmaXJlYmFzZVRleHQuaW5uZXJUZXh0ID0gYFByZXZpZXcgYmFja2VuZCBkaXNjb25uZWN0ZWQuYDtcbiAgICAgICAgICAgIHByZXBlbmRJY29uLmlubmVySFRNTCA9IGA8ZyBjbGlwLXBhdGg9XCJ1cmwoI2NsaXAwXzYwMTNfMzM4NTgpXCI+XG48cGF0aCBkPVwiTTQuOCAxNy42TDEyIDUuNkwxOS4yIDE3LjZINC44Wk02LjkxNjY3IDE2LjRIMTcuMDgzM0wxMiA3LjkzMzMzTDYuOTE2NjcgMTYuNFpNMTIgMTUuNkMxMi4xNjY3IDE1LjYgMTIuMzA1NiAxNS41NDQ0IDEyLjQxNjcgMTUuNDMzM0MxMi41Mzg5IDE1LjMxMTEgMTIuNiAxNS4xNjY3IDEyLjYgMTVDMTIuNiAxNC44MzMzIDEyLjUzODkgMTQuNjk0NCAxMi40MTY3IDE0LjU4MzNDMTIuMzA1NiAxNC40NjExIDEyLjE2NjcgMTQuNCAxMiAxNC40QzExLjgzMzMgMTQuNCAxMS42ODg5IDE0LjQ2MTEgMTEuNTY2NyAxNC41ODMzQzExLjQ1NTYgMTQuNjk0NCAxMS40IDE0LjgzMzMgMTEuNCAxNUMxMS40IDE1LjE2NjcgMTEuNDU1NiAxNS4zMTExIDExLjU2NjcgMTUuNDMzM0MxMS42ODg5IDE1LjU0NDQgMTEuODMzMyAxNS42IDEyIDE1LjZaTTExLjQgMTMuNkgxMi42VjEwLjRIMTEuNFYxMy42WlwiIGZpbGw9XCIjMjEyMTIxXCIvPlxuPC9nPlxuPGRlZnM+XG48Y2xpcFBhdGggaWQ9XCJjbGlwMF82MDEzXzMzODU4XCI+XG48cmVjdCB3aWR0aD1cIjI0XCIgaGVpZ2h0PVwiMjRcIiBmaWxsPVwid2hpdGVcIi8+XG48L2NsaXBQYXRoPlxuPC9kZWZzPmA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwcmVwZW5kSWNvbi5pbm5lckhUTUwgPSBgPGcgY2xpcC1wYXRoPVwidXJsKCNjbGlwMF82MDgzXzM0ODA0KVwiPlxuPHBhdGggZD1cIk0xMS40IDE1LjJIMTIuNlYxMS4ySDExLjRWMTUuMlpNMTIgMTBDMTIuMTY2NyAxMCAxMi4zMDU2IDkuOTQ0NDQgMTIuNDE2NyA5LjgzMzMzQzEyLjUzODkgOS43MTExMSAxMi42IDkuNTY2NjcgMTIuNiA5LjRDMTIuNiA5LjIzMzMzIDEyLjUzODkgOS4wOTQ0NCAxMi40MTY3IDguOTgzMzNDMTIuMzA1NiA4Ljg2MTExIDEyLjE2NjcgOC44IDEyIDguOEMxMS44MzMzIDguOCAxMS42ODg5IDguODYxMTEgMTEuNTY2NyA4Ljk4MzMzQzExLjQ1NTYgOS4wOTQ0NCAxMS40IDkuMjMzMzMgMTEuNCA5LjRDMTEuNCA5LjU2NjY3IDExLjQ1NTYgOS43MTExMSAxMS41NjY3IDkuODMzMzNDMTEuNjg4OSA5Ljk0NDQ0IDExLjgzMzMgMTAgMTIgMTBaTTEyIDE4LjRDMTEuMTIyMiAxOC40IDEwLjI5NDQgMTguMjMzMyA5LjUxNjY3IDE3LjlDOC43Mzg4OSAxNy41NjY3IDguMDU1NTYgMTcuMTExMSA3LjQ2NjY3IDE2LjUzMzNDNi44ODg4OSAxNS45NDQ0IDYuNDMzMzMgMTUuMjYxMSA2LjEgMTQuNDgzM0M1Ljc2NjY3IDEzLjcwNTYgNS42IDEyLjg3NzggNS42IDEyQzUuNiAxMS4xMTExIDUuNzY2NjcgMTAuMjgzMyA2LjEgOS41MTY2N0M2LjQzMzMzIDguNzM4ODkgNi44ODg4OSA4LjA2MTExIDcuNDY2NjcgNy40ODMzM0M4LjA1NTU2IDYuODk0NDQgOC43Mzg4OSA2LjQzMzMzIDkuNTE2NjcgNi4xQzEwLjI5NDQgNS43NjY2NyAxMS4xMjIyIDUuNiAxMiA1LjZDMTIuODg4OSA1LjYgMTMuNzE2NyA1Ljc2NjY3IDE0LjQ4MzMgNi4xQzE1LjI2MTEgNi40MzMzMyAxNS45Mzg5IDYuODk0NDQgMTYuNTE2NyA3LjQ4MzMzQzE3LjEwNTYgOC4wNjExMSAxNy41NjY3IDguNzM4ODkgMTcuOSA5LjUxNjY3QzE4LjIzMzMgMTAuMjgzMyAxOC40IDExLjExMTEgMTguNCAxMkMxOC40IDEyLjg3NzggMTguMjMzMyAxMy43MDU2IDE3LjkgMTQuNDgzM0MxNy41NjY3IDE1LjI2MTEgMTcuMTA1NiAxNS45NDQ0IDE2LjUxNjcgMTYuNTMzM0MxNS45Mzg5IDE3LjExMTEgMTUuMjYxMSAxNy41NjY3IDE0LjQ4MzMgMTcuOUMxMy43MTY3IDE4LjIzMzMgMTIuODg4OSAxOC40IDEyIDE4LjRaTTEyIDE3LjJDMTMuNDQ0NCAxNy4yIDE0LjY3MjIgMTYuNjk0NCAxNS42ODMzIDE1LjY4MzNDMTYuNjk0NCAxNC42NzIyIDE3LjIgMTMuNDQ0NCAxNy4yIDEyQzE3LjIgMTAuNTU1NiAxNi42OTQ0IDkuMzI3NzggMTUuNjgzMyA4LjMxNjY3QzE0LjY3MjIgNy4zMDU1NSAxMy40NDQ0IDYuOCAxMiA2LjhDMTAuNTU1NiA2LjggOS4zMjc3OCA3LjMwNTU1IDguMzE2NjcgOC4zMTY2N0M3LjMwNTU2IDkuMzI3NzggNi44IDEwLjU1NTYgNi44IDEyQzYuOCAxMy40NDQ0IDcuMzA1NTYgMTQuNjcyMiA4LjMxNjY3IDE1LjY4MzNDOS4zMjc3OCAxNi42OTQ0IDEwLjU1NTYgMTcuMiAxMiAxNy4yWlwiIGZpbGw9XCIjMjEyMTIxXCIvPlxuPC9nPlxuPGRlZnM+XG48Y2xpcFBhdGggaWQ9XCJjbGlwMF82MDgzXzM0ODA0XCI+XG48cmVjdCB3aWR0aD1cIjI0XCIgaGVpZ2h0PVwiMjRcIiBmaWxsPVwid2hpdGVcIi8+XG48L2NsaXBQYXRoPlxuPC9kZWZzPmA7XG4gICAgICAgICAgICBmaXJlYmFzZVRleHQuaW5uZXJUZXh0ID0gJ1ByZXZpZXcgYmFja2VuZCBydW5uaW5nIGluIHRoaXMgd29ya3NwYWNlLic7XG4gICAgICAgIH1cbiAgICAgICAgZmlyZWJhc2VUZXh0LnNldEF0dHJpYnV0ZSgnaWQnLCBmaXJlYmFzZVRleHRJZCk7XG4gICAgfVxuICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnbG9hZGluZycpIHtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBzZXR1cERvbSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBzZXR1cERvbSgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmV0dXJucyBuYXZpZ2F0b3IudXNlckFnZW50IHN0cmluZyBvciAnJyBpZiBpdCdzIG5vdCBkZWZpbmVkLlxuICogQHJldHVybiB1c2VyIGFnZW50IHN0cmluZ1xuICovXG5mdW5jdGlvbiBnZXRVQSgpIHtcbiAgICBpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgdHlwZW9mIG5hdmlnYXRvclsndXNlckFnZW50J10gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiBuYXZpZ2F0b3JbJ3VzZXJBZ2VudCddO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cbn1cbi8qKlxuICogRGV0ZWN0IENvcmRvdmEgLyBQaG9uZUdhcCAvIElvbmljIGZyYW1ld29ya3Mgb24gYSBtb2JpbGUgZGV2aWNlLlxuICpcbiAqIERlbGliZXJhdGVseSBkb2VzIG5vdCByZWx5IG9uIGNoZWNraW5nIGBmaWxlOi8vYCBVUkxzIChhcyB0aGlzIGZhaWxzIFBob25lR2FwXG4gKiBpbiB0aGUgUmlwcGxlIGVtdWxhdG9yKSBub3IgQ29yZG92YSBgb25EZXZpY2VSZWFkeWAsIHdoaWNoIHdvdWxkIG5vcm1hbGx5XG4gKiB3YWl0IGZvciBhIGNhbGxiYWNrLlxuICovXG5mdW5jdGlvbiBpc01vYmlsZUNvcmRvdmEoKSB7XG4gICAgcmV0dXJuICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAvLyBAdHMtaWdub3JlIFNldHRpbmcgdXAgYW4gYnJvYWRseSBhcHBsaWNhYmxlIGluZGV4IHNpZ25hdHVyZSBmb3IgV2luZG93XG4gICAgICAgIC8vIGp1c3QgdG8gZGVhbCB3aXRoIHRoaXMgY2FzZSB3b3VsZCBwcm9iYWJseSBiZSBhIGJhZCBpZGVhLlxuICAgICAgICAhISh3aW5kb3dbJ2NvcmRvdmEnXSB8fCB3aW5kb3dbJ3Bob25lZ2FwJ10gfHwgd2luZG93WydQaG9uZUdhcCddKSAmJlxuICAgICAgICAvaW9zfGlwaG9uZXxpcG9kfGlwYWR8YW5kcm9pZHxibGFja2JlcnJ5fGllbW9iaWxlL2kudGVzdChnZXRVQSgpKSk7XG59XG4vKipcbiAqIERldGVjdCBOb2RlLmpzLlxuICpcbiAqIEByZXR1cm4gdHJ1ZSBpZiBOb2RlLmpzIGVudmlyb25tZW50IGlzIGRldGVjdGVkIG9yIHNwZWNpZmllZC5cbiAqL1xuLy8gTm9kZSBkZXRlY3Rpb24gbG9naWMgZnJvbTogaHR0cHM6Ly9naXRodWIuY29tL2lsaWFrYW4vZGV0ZWN0LW5vZGUvXG5mdW5jdGlvbiBpc05vZGUoKSB7XG4gICAgY29uc3QgZm9yY2VFbnZpcm9ubWVudCA9IGdldERlZmF1bHRzKCk/LmZvcmNlRW52aXJvbm1lbnQ7XG4gICAgaWYgKGZvcmNlRW52aXJvbm1lbnQgPT09ICdub2RlJykge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZm9yY2VFbnZpcm9ubWVudCA9PT0gJ2Jyb3dzZXInKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZ2xvYmFsLnByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXScpO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuLyoqXG4gKiBEZXRlY3QgQnJvd3NlciBFbnZpcm9ubWVudC5cbiAqIE5vdGU6IFRoaXMgd2lsbCByZXR1cm4gdHJ1ZSBmb3IgY2VydGFpbiB0ZXN0IGZyYW1ld29ya3MgdGhhdCBhcmUgaW5jb21wbGV0ZWx5XG4gKiBtaW1pY2tpbmcgYSBicm93c2VyLCBhbmQgc2hvdWxkIG5vdCBsZWFkIHRvIGFzc3VtaW5nIGFsbCBicm93c2VyIEFQSXMgYXJlXG4gKiBhdmFpbGFibGUuXG4gKi9cbmZ1bmN0aW9uIGlzQnJvd3NlcigpIHtcbiAgICByZXR1cm4gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgfHwgaXNXZWJXb3JrZXIoKTtcbn1cbi8qKlxuICogRGV0ZWN0IFdlYiBXb3JrZXIgY29udGV4dC5cbiAqL1xuZnVuY3Rpb24gaXNXZWJXb3JrZXIoKSB7XG4gICAgcmV0dXJuICh0eXBlb2YgV29ya2VyR2xvYmFsU2NvcGUgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgIHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICBzZWxmIGluc3RhbmNlb2YgV29ya2VyR2xvYmFsU2NvcGUpO1xufVxuLyoqXG4gKiBEZXRlY3QgQ2xvdWRmbGFyZSBXb3JrZXIgY29udGV4dC5cbiAqL1xuZnVuY3Rpb24gaXNDbG91ZGZsYXJlV29ya2VyKCkge1xuICAgIHJldHVybiAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgbmF2aWdhdG9yLnVzZXJBZ2VudCA9PT0gJ0Nsb3VkZmxhcmUtV29ya2VycycpO1xufVxuZnVuY3Rpb24gaXNCcm93c2VyRXh0ZW5zaW9uKCkge1xuICAgIGNvbnN0IHJ1bnRpbWUgPSB0eXBlb2YgY2hyb21lID09PSAnb2JqZWN0J1xuICAgICAgICA/IGNocm9tZS5ydW50aW1lXG4gICAgICAgIDogdHlwZW9mIGJyb3dzZXIgPT09ICdvYmplY3QnXG4gICAgICAgICAgICA/IGJyb3dzZXIucnVudGltZVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIHR5cGVvZiBydW50aW1lID09PSAnb2JqZWN0JyAmJiBydW50aW1lLmlkICE9PSB1bmRlZmluZWQ7XG59XG4vKipcbiAqIERldGVjdCBSZWFjdCBOYXRpdmUuXG4gKlxuICogQHJldHVybiB0cnVlIGlmIFJlYWN0TmF0aXZlIGVudmlyb25tZW50IGlzIGRldGVjdGVkLlxuICovXG5mdW5jdGlvbiBpc1JlYWN0TmF0aXZlKCkge1xuICAgIHJldHVybiAodHlwZW9mIG5hdmlnYXRvciA9PT0gJ29iamVjdCcgJiYgbmF2aWdhdG9yWydwcm9kdWN0J10gPT09ICdSZWFjdE5hdGl2ZScpO1xufVxuLyoqIERldGVjdHMgRWxlY3Ryb24gYXBwcy4gKi9cbmZ1bmN0aW9uIGlzRWxlY3Ryb24oKSB7XG4gICAgcmV0dXJuIGdldFVBKCkuaW5kZXhPZignRWxlY3Ryb24vJykgPj0gMDtcbn1cbi8qKiBEZXRlY3RzIEludGVybmV0IEV4cGxvcmVyLiAqL1xuZnVuY3Rpb24gaXNJRSgpIHtcbiAgICBjb25zdCB1YSA9IGdldFVBKCk7XG4gICAgcmV0dXJuIHVhLmluZGV4T2YoJ01TSUUgJykgPj0gMCB8fCB1YS5pbmRleE9mKCdUcmlkZW50LycpID49IDA7XG59XG4vKiogRGV0ZWN0cyBVbml2ZXJzYWwgV2luZG93cyBQbGF0Zm9ybSBhcHBzLiAqL1xuZnVuY3Rpb24gaXNVV1AoKSB7XG4gICAgcmV0dXJuIGdldFVBKCkuaW5kZXhPZignTVNBcHBIb3N0LycpID49IDA7XG59XG4vKipcbiAqIERldGVjdCB3aGV0aGVyIHRoZSBjdXJyZW50IFNESyBidWlsZCBpcyB0aGUgTm9kZSB2ZXJzaW9uLlxuICpcbiAqIEByZXR1cm4gdHJ1ZSBpZiBpdCdzIHRoZSBOb2RlIFNESyBidWlsZC5cbiAqL1xuZnVuY3Rpb24gaXNOb2RlU2RrKCkge1xuICAgIHJldHVybiBDT05TVEFOVFMuTk9ERV9DTElFTlQgPT09IHRydWUgfHwgQ09OU1RBTlRTLk5PREVfQURNSU4gPT09IHRydWU7XG59XG4vKiogUmV0dXJucyB0cnVlIGlmIHdlIGFyZSBydW5uaW5nIGluIFNhZmFyaS4gKi9cbmZ1bmN0aW9uIGlzU2FmYXJpKCkge1xuICAgIHJldHVybiAoIWlzTm9kZSgpICYmXG4gICAgICAgICEhbmF2aWdhdG9yLnVzZXJBZ2VudCAmJlxuICAgICAgICBuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKCdTYWZhcmknKSAmJlxuICAgICAgICAhbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcygnQ2hyb21lJykpO1xufVxuLyoqIFJldHVybnMgdHJ1ZSBpZiB3ZSBhcmUgcnVubmluZyBpbiBTYWZhcmkgb3IgV2ViS2l0ICovXG5mdW5jdGlvbiBpc1NhZmFyaU9yV2Via2l0KCkge1xuICAgIHJldHVybiAoIWlzTm9kZSgpICYmXG4gICAgICAgICEhbmF2aWdhdG9yLnVzZXJBZ2VudCAmJlxuICAgICAgICAobmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcygnU2FmYXJpJykgfHxcbiAgICAgICAgICAgIG5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoJ1dlYktpdCcpKSAmJlxuICAgICAgICAhbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcygnQ2hyb21lJykpO1xufVxuLyoqXG4gKiBUaGlzIG1ldGhvZCBjaGVja3MgaWYgaW5kZXhlZERCIGlzIHN1cHBvcnRlZCBieSBjdXJyZW50IGJyb3dzZXIvc2VydmljZSB3b3JrZXIgY29udGV4dFxuICogQHJldHVybiB0cnVlIGlmIGluZGV4ZWREQiBpcyBzdXBwb3J0ZWQgYnkgY3VycmVudCBicm93c2VyL3NlcnZpY2Ugd29ya2VyIGNvbnRleHRcbiAqL1xuZnVuY3Rpb24gaXNJbmRleGVkREJBdmFpbGFibGUoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBpbmRleGVkREIgPT09ICdvYmplY3QnO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuLyoqXG4gKiBUaGlzIG1ldGhvZCB2YWxpZGF0ZXMgYnJvd3Nlci9zdyBjb250ZXh0IGZvciBpbmRleGVkREIgYnkgb3BlbmluZyBhIGR1bW15IGluZGV4ZWREQiBkYXRhYmFzZSBhbmQgcmVqZWN0XG4gKiBpZiBlcnJvcnMgb2NjdXIgZHVyaW5nIHRoZSBkYXRhYmFzZSBvcGVuIG9wZXJhdGlvbi5cbiAqXG4gKiBAdGhyb3dzIGV4Y2VwdGlvbiBpZiBjdXJyZW50IGJyb3dzZXIvc3cgY29udGV4dCBjYW4ndCBydW4gaWRiLm9wZW4gKGV4OiBTYWZhcmkgaWZyYW1lLCBGaXJlZm94XG4gKiBwcml2YXRlIGJyb3dzaW5nKVxuICovXG5mdW5jdGlvbiB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlKCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBsZXQgcHJlRXhpc3QgPSB0cnVlO1xuICAgICAgICAgICAgY29uc3QgREJfQ0hFQ0tfTkFNRSA9ICd2YWxpZGF0ZS1icm93c2VyLWNvbnRleHQtZm9yLWluZGV4ZWRkYi1hbmFseXRpY3MtbW9kdWxlJztcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3QgPSBzZWxmLmluZGV4ZWREQi5vcGVuKERCX0NIRUNLX05BTUUpO1xuICAgICAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVxdWVzdC5yZXN1bHQuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAvLyBkZWxldGUgZGF0YWJhc2Ugb25seSB3aGVuIGl0IGRvZXNuJ3QgcHJlLWV4aXN0XG4gICAgICAgICAgICAgICAgaWYgKCFwcmVFeGlzdCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmluZGV4ZWREQi5kZWxldGVEYXRhYmFzZShEQl9DSEVDS19OQU1FKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXF1ZXN0Lm9udXBncmFkZW5lZWRlZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBwcmVFeGlzdCA9IGZhbHNlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJlcXVlc3Qub25lcnJvciA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICByZWplY3QocmVxdWVzdC5lcnJvcj8ubWVzc2FnZSB8fCAnJyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuLyoqXG4gKlxuICogVGhpcyBtZXRob2QgY2hlY2tzIHdoZXRoZXIgY29va2llIGlzIGVuYWJsZWQgd2l0aGluIGN1cnJlbnQgYnJvd3NlclxuICogQHJldHVybiB0cnVlIGlmIGNvb2tpZSBpcyBlbmFibGVkIHdpdGhpbiBjdXJyZW50IGJyb3dzZXJcbiAqL1xuZnVuY3Rpb24gYXJlQ29va2llc0VuYWJsZWQoKSB7XG4gICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgPT09ICd1bmRlZmluZWQnIHx8ICFuYXZpZ2F0b3IuY29va2llRW5hYmxlZCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IFN0YW5kYXJkaXplZCBGaXJlYmFzZSBFcnJvci5cbiAqXG4gKiBVc2FnZTpcbiAqXG4gKiAgIC8vIFR5cGVTY3JpcHQgc3RyaW5nIGxpdGVyYWxzIGZvciB0eXBlLXNhZmUgY29kZXNcbiAqICAgdHlwZSBFcnIgPVxuICogICAgICd1bmtub3duJyB8XG4gKiAgICAgJ29iamVjdC1ub3QtZm91bmQnXG4gKiAgICAgO1xuICpcbiAqICAgLy8gQ2xvc3VyZSBlbnVtIGZvciB0eXBlLXNhZmUgZXJyb3IgY29kZXNcbiAqICAgLy8gYXQtZW51bSB7c3RyaW5nfVxuICogICB2YXIgRXJyID0ge1xuICogICAgIFVOS05PV046ICd1bmtub3duJyxcbiAqICAgICBPQkpFQ1RfTk9UX0ZPVU5EOiAnb2JqZWN0LW5vdC1mb3VuZCcsXG4gKiAgIH1cbiAqXG4gKiAgIGxldCBlcnJvcnM6IE1hcDxFcnIsIHN0cmluZz4gPSB7XG4gKiAgICAgJ2dlbmVyaWMtZXJyb3InOiBcIlVua25vd24gZXJyb3JcIixcbiAqICAgICAnZmlsZS1ub3QtZm91bmQnOiBcIkNvdWxkIG5vdCBmaW5kIGZpbGU6IHskZmlsZX1cIixcbiAqICAgfTtcbiAqXG4gKiAgIC8vIFR5cGUtc2FmZSBmdW5jdGlvbiAtIG11c3QgcGFzcyBhIHZhbGlkIGVycm9yIGNvZGUgYXMgcGFyYW0uXG4gKiAgIGxldCBlcnJvciA9IG5ldyBFcnJvckZhY3Rvcnk8RXJyPignc2VydmljZScsICdTZXJ2aWNlJywgZXJyb3JzKTtcbiAqXG4gKiAgIC4uLlxuICogICB0aHJvdyBlcnJvci5jcmVhdGUoRXJyLkdFTkVSSUMpO1xuICogICAuLi5cbiAqICAgdGhyb3cgZXJyb3IuY3JlYXRlKEVyci5GSUxFX05PVF9GT1VORCwgeydmaWxlJzogZmlsZU5hbWV9KTtcbiAqICAgLi4uXG4gKiAgIC8vIFNlcnZpY2U6IENvdWxkIG5vdCBmaWxlIGZpbGU6IGZvby50eHQgKHNlcnZpY2UvZmlsZS1ub3QtZm91bmQpLlxuICpcbiAqICAgY2F0Y2ggKGUpIHtcbiAqICAgICBhc3NlcnQoZS5tZXNzYWdlID09PSBcIkNvdWxkIG5vdCBmaW5kIGZpbGU6IGZvby50eHQuXCIpO1xuICogICAgIGlmICgoZSBhcyBGaXJlYmFzZUVycm9yKT8uY29kZSA9PT0gJ3NlcnZpY2UvZmlsZS1ub3QtZm91bmQnKSB7XG4gKiAgICAgICBjb25zb2xlLmxvZyhcIkNvdWxkIG5vdCByZWFkIGZpbGU6IFwiICsgZVsnZmlsZSddKTtcbiAqICAgICB9XG4gKiAgIH1cbiAqL1xuY29uc3QgRVJST1JfTkFNRSA9ICdGaXJlYmFzZUVycm9yJztcbi8vIEJhc2VkIG9uIGNvZGUgZnJvbTpcbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0Vycm9yI0N1c3RvbV9FcnJvcl9UeXBlc1xuY2xhc3MgRmlyZWJhc2VFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogVGhlIGVycm9yIGNvZGUgZm9yIHRoaXMgZXJyb3IuICovXG4gICAgY29kZSwgbWVzc2FnZSwgXG4gICAgLyoqIEN1c3RvbSBkYXRhIGZvciB0aGlzIGVycm9yLiAqL1xuICAgIGN1c3RvbURhdGEpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgICAgIHRoaXMuY29kZSA9IGNvZGU7XG4gICAgICAgIHRoaXMuY3VzdG9tRGF0YSA9IGN1c3RvbURhdGE7XG4gICAgICAgIC8qKiBUaGUgY3VzdG9tIG5hbWUgZm9yIGFsbCBGaXJlYmFzZUVycm9ycy4gKi9cbiAgICAgICAgdGhpcy5uYW1lID0gRVJST1JfTkFNRTtcbiAgICAgICAgLy8gRml4IEZvciBFUzVcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL01pY3Jvc29mdC9UeXBlU2NyaXB0LXdpa2kvYmxvYi9tYXN0ZXIvQnJlYWtpbmctQ2hhbmdlcy5tZCNleHRlbmRpbmctYnVpbHQtaW5zLWxpa2UtZXJyb3ItYXJyYXktYW5kLW1hcC1tYXktbm8tbG9uZ2VyLXdvcmtcbiAgICAgICAgLy8gVE9ETyhkbGFyb2NxdWUpOiBSZXBsYWNlIHRoaXMgd2l0aCBgbmV3LnRhcmdldGA6IGh0dHBzOi8vd3d3LnR5cGVzY3JpcHRsYW5nLm9yZy9kb2NzL2hhbmRib29rL3JlbGVhc2Utbm90ZXMvdHlwZXNjcmlwdC0yLTIuaHRtbCNzdXBwb3J0LWZvci1uZXd0YXJnZXRcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgd2hpY2ggd2UgY2FuIG5vdyB1c2Ugc2luY2Ugd2Ugbm8gbG9uZ2VyIHRhcmdldCBFUzUuXG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBGaXJlYmFzZUVycm9yLnByb3RvdHlwZSk7XG4gICAgICAgIC8vIE1haW50YWlucyBwcm9wZXIgc3RhY2sgdHJhY2UgZm9yIHdoZXJlIG91ciBlcnJvciB3YXMgdGhyb3duLlxuICAgICAgICAvLyBPbmx5IGF2YWlsYWJsZSBvbiBWOC5cbiAgICAgICAgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XG4gICAgICAgICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBFcnJvckZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5jbGFzcyBFcnJvckZhY3Rvcnkge1xuICAgIGNvbnN0cnVjdG9yKHNlcnZpY2UsIHNlcnZpY2VOYW1lLCBlcnJvcnMpIHtcbiAgICAgICAgdGhpcy5zZXJ2aWNlID0gc2VydmljZTtcbiAgICAgICAgdGhpcy5zZXJ2aWNlTmFtZSA9IHNlcnZpY2VOYW1lO1xuICAgICAgICB0aGlzLmVycm9ycyA9IGVycm9ycztcbiAgICB9XG4gICAgY3JlYXRlKGNvZGUsIC4uLmRhdGEpIHtcbiAgICAgICAgY29uc3QgY3VzdG9tRGF0YSA9IGRhdGFbMF0gfHwge307XG4gICAgICAgIGNvbnN0IGZ1bGxDb2RlID0gYCR7dGhpcy5zZXJ2aWNlfS8ke2NvZGV9YDtcbiAgICAgICAgY29uc3QgdGVtcGxhdGUgPSB0aGlzLmVycm9yc1tjb2RlXTtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IHRlbXBsYXRlID8gcmVwbGFjZVRlbXBsYXRlKHRlbXBsYXRlLCBjdXN0b21EYXRhKSA6ICdFcnJvcic7XG4gICAgICAgIC8vIFNlcnZpY2UgTmFtZTogRXJyb3IgbWVzc2FnZSAoc2VydmljZS9jb2RlKS5cbiAgICAgICAgY29uc3QgZnVsbE1lc3NhZ2UgPSBgJHt0aGlzLnNlcnZpY2VOYW1lfTogJHttZXNzYWdlfSAoJHtmdWxsQ29kZX0pLmA7XG4gICAgICAgIGNvbnN0IGVycm9yID0gbmV3IEZpcmViYXNlRXJyb3IoZnVsbENvZGUsIGZ1bGxNZXNzYWdlLCBjdXN0b21EYXRhKTtcbiAgICAgICAgcmV0dXJuIGVycm9yO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHJlcGxhY2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgZGF0YSkge1xuICAgIHJldHVybiB0ZW1wbGF0ZS5yZXBsYWNlKFBBVFRFUk4sIChfLCBrZXkpID0+IHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBkYXRhW2tleV07XG4gICAgICAgIHJldHVybiB2YWx1ZSAhPSBudWxsID8gU3RyaW5nKHZhbHVlKSA6IGA8JHtrZXl9Pz5gO1xuICAgIH0pO1xufVxuY29uc3QgUEFUVEVSTiA9IC9cXHtcXCQoW159XSspfS9nO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBFdmFsdWF0ZXMgYSBKU09OIHN0cmluZyBpbnRvIGEgamF2YXNjcmlwdCBvYmplY3QuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHN0ciBBIHN0cmluZyBjb250YWluaW5nIEpTT04uXG4gKiBAcmV0dXJuIHsqfSBUaGUgamF2YXNjcmlwdCBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzcGVjaWZpZWQgSlNPTi5cbiAqL1xuZnVuY3Rpb24ganNvbkV2YWwoc3RyKSB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2Uoc3RyKTtcbn1cbi8qKlxuICogUmV0dXJucyBKU09OIHJlcHJlc2VudGluZyBhIGphdmFzY3JpcHQgb2JqZWN0LlxuICogQHBhcmFtIHsqfSBkYXRhIEphdmFTY3JpcHQgb2JqZWN0IHRvIGJlIHN0cmluZ2lmaWVkLlxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgSlNPTiBjb250ZW50cyBvZiB0aGUgb2JqZWN0LlxuICovXG5mdW5jdGlvbiBzdHJpbmdpZnkoZGF0YSkge1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShkYXRhKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRGVjb2RlcyBhIEZpcmViYXNlIGF1dGguIHRva2VuIGludG8gY29uc3RpdHVlbnQgcGFydHMuXG4gKlxuICogTm90ZXM6XG4gKiAtIE1heSByZXR1cm4gd2l0aCBpbnZhbGlkIC8gaW5jb21wbGV0ZSBjbGFpbXMgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxuICovXG5jb25zdCBkZWNvZGUgPSBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICBsZXQgaGVhZGVyID0ge30sIGNsYWltcyA9IHt9LCBkYXRhID0ge30sIHNpZ25hdHVyZSA9ICcnO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHBhcnRzID0gdG9rZW4uc3BsaXQoJy4nKTtcbiAgICAgICAgaGVhZGVyID0ganNvbkV2YWwoYmFzZTY0RGVjb2RlKHBhcnRzWzBdKSB8fCAnJyk7XG4gICAgICAgIGNsYWltcyA9IGpzb25FdmFsKGJhc2U2NERlY29kZShwYXJ0c1sxXSkgfHwgJycpO1xuICAgICAgICBzaWduYXR1cmUgPSBwYXJ0c1syXTtcbiAgICAgICAgZGF0YSA9IGNsYWltc1snZCddIHx8IHt9O1xuICAgICAgICBkZWxldGUgY2xhaW1zWydkJ107XG4gICAgfVxuICAgIGNhdGNoIChlKSB7IH1cbiAgICByZXR1cm4ge1xuICAgICAgICBoZWFkZXIsXG4gICAgICAgIGNsYWltcyxcbiAgICAgICAgZGF0YSxcbiAgICAgICAgc2lnbmF0dXJlXG4gICAgfTtcbn07XG4vKipcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBhbmQgY2hlY2tzIHRoZSB2YWxpZGl0eSBvZiBpdHMgdGltZS1iYXNlZCBjbGFpbXMuIFdpbGwgcmV0dXJuIHRydWUgaWYgdGhlXG4gKiB0b2tlbiBpcyB3aXRoaW4gdGhlIHRpbWUgd2luZG93IGF1dGhvcml6ZWQgYnkgdGhlICduYmYnIChub3QtYmVmb3JlKSBhbmQgJ2lhdCcgKGlzc3VlZC1hdCkgY2xhaW1zLlxuICpcbiAqIE5vdGVzOlxuICogLSBNYXkgcmV0dXJuIGEgZmFsc2UgbmVnYXRpdmUgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxuICovXG5jb25zdCBpc1ZhbGlkVGltZXN0YW1wID0gZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgY29uc3QgY2xhaW1zID0gZGVjb2RlKHRva2VuKS5jbGFpbXM7XG4gICAgY29uc3Qgbm93ID0gTWF0aC5mbG9vcihuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDApO1xuICAgIGxldCB2YWxpZFNpbmNlID0gMCwgdmFsaWRVbnRpbCA9IDA7XG4gICAgaWYgKHR5cGVvZiBjbGFpbXMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGlmIChjbGFpbXMuaGFzT3duUHJvcGVydHkoJ25iZicpKSB7XG4gICAgICAgICAgICB2YWxpZFNpbmNlID0gY2xhaW1zWyduYmYnXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjbGFpbXMuaGFzT3duUHJvcGVydHkoJ2lhdCcpKSB7XG4gICAgICAgICAgICB2YWxpZFNpbmNlID0gY2xhaW1zWydpYXQnXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2xhaW1zLmhhc093blByb3BlcnR5KCdleHAnKSkge1xuICAgICAgICAgICAgdmFsaWRVbnRpbCA9IGNsYWltc1snZXhwJ107XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyB0b2tlbiB3aWxsIGV4cGlyZSBhZnRlciAyNGggYnkgZGVmYXVsdFxuICAgICAgICAgICAgdmFsaWRVbnRpbCA9IHZhbGlkU2luY2UgKyA4NjQwMDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gKCEhbm93ICYmXG4gICAgICAgICEhdmFsaWRTaW5jZSAmJlxuICAgICAgICAhIXZhbGlkVW50aWwgJiZcbiAgICAgICAgbm93ID49IHZhbGlkU2luY2UgJiZcbiAgICAgICAgbm93IDw9IHZhbGlkVW50aWwpO1xufTtcbi8qKlxuICogRGVjb2RlcyBhIEZpcmViYXNlIGF1dGguIHRva2VuIGFuZCByZXR1cm5zIGl0cyBpc3N1ZWQgYXQgdGltZSBpZiB2YWxpZCwgbnVsbCBvdGhlcndpc2UuXG4gKlxuICogTm90ZXM6XG4gKiAtIE1heSByZXR1cm4gbnVsbCBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXG4gKi9cbmNvbnN0IGlzc3VlZEF0VGltZSA9IGZ1bmN0aW9uICh0b2tlbikge1xuICAgIGNvbnN0IGNsYWltcyA9IGRlY29kZSh0b2tlbikuY2xhaW1zO1xuICAgIGlmICh0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0JyAmJiBjbGFpbXMuaGFzT3duUHJvcGVydHkoJ2lhdCcpKSB7XG4gICAgICAgIHJldHVybiBjbGFpbXNbJ2lhdCddO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn07XG4vKipcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBhbmQgY2hlY2tzIHRoZSB2YWxpZGl0eSBvZiBpdHMgZm9ybWF0LiBFeHBlY3RzIGEgdmFsaWQgaXNzdWVkLWF0IHRpbWUuXG4gKlxuICogTm90ZXM6XG4gKiAtIE1heSByZXR1cm4gYSBmYWxzZSBuZWdhdGl2ZSBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXG4gKi9cbmNvbnN0IGlzVmFsaWRGb3JtYXQgPSBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICBjb25zdCBkZWNvZGVkID0gZGVjb2RlKHRva2VuKSwgY2xhaW1zID0gZGVjb2RlZC5jbGFpbXM7XG4gICAgcmV0dXJuICEhY2xhaW1zICYmIHR5cGVvZiBjbGFpbXMgPT09ICdvYmplY3QnICYmIGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnaWF0Jyk7XG59O1xuLyoqXG4gKiBBdHRlbXB0cyB0byBwZWVyIGludG8gYW4gYXV0aCB0b2tlbiBhbmQgZGV0ZXJtaW5lIGlmIGl0J3MgYW4gYWRtaW4gYXV0aCB0b2tlbiBieSBsb29raW5nIGF0IHRoZSBjbGFpbXMgcG9ydGlvbi5cbiAqXG4gKiBOb3RlczpcbiAqIC0gTWF5IHJldHVybiBhIGZhbHNlIG5lZ2F0aXZlIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cbiAqL1xuY29uc3QgaXNBZG1pbiA9IGZ1bmN0aW9uICh0b2tlbikge1xuICAgIGNvbnN0IGNsYWltcyA9IGRlY29kZSh0b2tlbikuY2xhaW1zO1xuICAgIHJldHVybiB0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0JyAmJiBjbGFpbXNbJ2FkbWluJ10gPT09IHRydWU7XG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuZnVuY3Rpb24gY29udGFpbnMob2JqLCBrZXkpIHtcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTtcbn1cbmZ1bmN0aW9uIHNhZmVHZXQob2JqLCBrZXkpIHtcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xuICAgICAgICByZXR1cm4gb2JqW2tleV07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGlzRW1wdHkob2JqKSB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiBtYXAob2JqLCBmbiwgY29udGV4dE9iaikge1xuICAgIGNvbnN0IHJlcyA9IHt9O1xuICAgIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xuICAgICAgICAgICAgcmVzW2tleV0gPSBmbi5jYWxsKGNvbnRleHRPYmosIG9ialtrZXldLCBrZXksIG9iaik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn1cbi8qKlxuICogRGVlcCBlcXVhbCB0d28gb2JqZWN0cy4gU3VwcG9ydCBBcnJheXMgYW5kIE9iamVjdHMuXG4gKi9cbmZ1bmN0aW9uIGRlZXBFcXVhbChhLCBiKSB7XG4gICAgaWYgKGEgPT09IGIpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGNvbnN0IGFLZXlzID0gT2JqZWN0LmtleXMoYSk7XG4gICAgY29uc3QgYktleXMgPSBPYmplY3Qua2V5cyhiKTtcbiAgICBmb3IgKGNvbnN0IGsgb2YgYUtleXMpIHtcbiAgICAgICAgaWYgKCFiS2V5cy5pbmNsdWRlcyhrKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFQcm9wID0gYVtrXTtcbiAgICAgICAgY29uc3QgYlByb3AgPSBiW2tdO1xuICAgICAgICBpZiAoaXNPYmplY3QoYVByb3ApICYmIGlzT2JqZWN0KGJQcm9wKSkge1xuICAgICAgICAgICAgaWYgKCFkZWVwRXF1YWwoYVByb3AsIGJQcm9wKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChhUHJvcCAhPT0gYlByb3ApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGsgb2YgYktleXMpIHtcbiAgICAgICAgaWYgKCFhS2V5cy5pbmNsdWRlcyhrKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gaXNPYmplY3QodGhpbmcpIHtcbiAgICByZXR1cm4gdGhpbmcgIT09IG51bGwgJiYgdHlwZW9mIHRoaW5nID09PSAnb2JqZWN0Jztcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVqZWN0cyBpZiB0aGUgZ2l2ZW4gcHJvbWlzZSBkb2Vzbid0IHJlc29sdmUgaW4gdGltZUluTVMgbWlsbGlzZWNvbmRzLlxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIHByb21pc2VXaXRoVGltZW91dChwcm9taXNlLCB0aW1lSW5NUyA9IDIwMDApIHtcbiAgICBjb25zdCBkZWZlcnJlZFByb21pc2UgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IGRlZmVycmVkUHJvbWlzZS5yZWplY3QoJ3RpbWVvdXQhJyksIHRpbWVJbk1TKTtcbiAgICBwcm9taXNlLnRoZW4oZGVmZXJyZWRQcm9taXNlLnJlc29sdmUsIGRlZmVycmVkUHJvbWlzZS5yZWplY3QpO1xuICAgIHJldHVybiBkZWZlcnJlZFByb21pc2UucHJvbWlzZTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmV0dXJucyBhIHF1ZXJ5c3RyaW5nLWZvcm1hdHRlZCBzdHJpbmcgKGUuZy4gJmFyZz12YWwmYXJnMj12YWwyKSBmcm9tIGFcbiAqIHBhcmFtcyBvYmplY3QgKGUuZy4ge2FyZzogJ3ZhbCcsIGFyZzI6ICd2YWwyJ30pXG4gKiBOb3RlOiBZb3UgbXVzdCBwcmVwZW5kIGl0IHdpdGggPyB3aGVuIGFkZGluZyBpdCB0byBhIFVSTC5cbiAqL1xuZnVuY3Rpb24gcXVlcnlzdHJpbmcocXVlcnlzdHJpbmdQYXJhbXMpIHtcbiAgICBjb25zdCBwYXJhbXMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhxdWVyeXN0cmluZ1BhcmFtcykpIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgICB2YWx1ZS5mb3JFYWNoKGFycmF5VmFsID0+IHtcbiAgICAgICAgICAgICAgICBwYXJhbXMucHVzaChlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChhcnJheVZhbCkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwYXJhbXMucHVzaChlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwYXJhbXMubGVuZ3RoID8gJyYnICsgcGFyYW1zLmpvaW4oJyYnKSA6ICcnO1xufVxuLyoqXG4gKiBEZWNvZGVzIGEgcXVlcnlzdHJpbmcgKGUuZy4gP2FyZz12YWwmYXJnMj12YWwyKSBpbnRvIGEgcGFyYW1zIG9iamVjdFxuICogKGUuZy4ge2FyZzogJ3ZhbCcsIGFyZzI6ICd2YWwyJ30pXG4gKi9cbmZ1bmN0aW9uIHF1ZXJ5c3RyaW5nRGVjb2RlKHF1ZXJ5c3RyaW5nKSB7XG4gICAgY29uc3Qgb2JqID0ge307XG4gICAgY29uc3QgdG9rZW5zID0gcXVlcnlzdHJpbmcucmVwbGFjZSgvXlxcPy8sICcnKS5zcGxpdCgnJicpO1xuICAgIHRva2Vucy5mb3JFYWNoKHRva2VuID0+IHtcbiAgICAgICAgaWYgKHRva2VuKSB7XG4gICAgICAgICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSB0b2tlbi5zcGxpdCgnPScpO1xuICAgICAgICAgICAgb2JqW2RlY29kZVVSSUNvbXBvbmVudChrZXkpXSA9IGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gb2JqO1xufVxuLyoqXG4gKiBFeHRyYWN0IHRoZSBxdWVyeSBzdHJpbmcgcGFydCBvZiBhIFVSTCwgaW5jbHVkaW5nIHRoZSBsZWFkaW5nIHF1ZXN0aW9uIG1hcmsgKGlmIHByZXNlbnQpLlxuICovXG5mdW5jdGlvbiBleHRyYWN0UXVlcnlzdHJpbmcodXJsKSB7XG4gICAgY29uc3QgcXVlcnlTdGFydCA9IHVybC5pbmRleE9mKCc/Jyk7XG4gICAgaWYgKCFxdWVyeVN0YXJ0KSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG4gICAgY29uc3QgZnJhZ21lbnRTdGFydCA9IHVybC5pbmRleE9mKCcjJywgcXVlcnlTdGFydCk7XG4gICAgcmV0dXJuIHVybC5zdWJzdHJpbmcocXVlcnlTdGFydCwgZnJhZ21lbnRTdGFydCA+IDAgPyBmcmFnbWVudFN0YXJ0IDogdW5kZWZpbmVkKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQGZpbGVvdmVydmlldyBTSEEtMSBjcnlwdG9ncmFwaGljIGhhc2guXG4gKiBWYXJpYWJsZSBuYW1lcyBmb2xsb3cgdGhlIG5vdGF0aW9uIGluIEZJUFMgUFVCIDE4MC0zOlxuICogaHR0cDovL2NzcmMubmlzdC5nb3YvcHVibGljYXRpb25zL2ZpcHMvZmlwczE4MC0zL2ZpcHMxODAtM19maW5hbC5wZGYuXG4gKlxuICogVXNhZ2U6XG4gKiAgIHZhciBzaGExID0gbmV3IHNoYTEoKTtcbiAqICAgc2hhMS51cGRhdGUoYnl0ZXMpO1xuICogICB2YXIgaGFzaCA9IHNoYTEuZGlnZXN0KCk7XG4gKlxuICogUGVyZm9ybWFuY2U6XG4gKiAgIENocm9tZSAyMzogICB+NDAwIE1iaXQvc1xuICogICBGaXJlZm94IDE2OiAgfjI1MCBNYml0L3NcbiAqXG4gKi9cbi8qKlxuICogU0hBLTEgY3J5cHRvZ3JhcGhpYyBoYXNoIGNvbnN0cnVjdG9yLlxuICpcbiAqIFRoZSBwcm9wZXJ0aWVzIGRlY2xhcmVkIGhlcmUgYXJlIGRpc2N1c3NlZCBpbiB0aGUgYWJvdmUgYWxnb3JpdGhtIGRvY3VtZW50LlxuICogQGNvbnN0cnVjdG9yXG4gKiBAZmluYWxcbiAqIEBzdHJ1Y3RcbiAqL1xuY2xhc3MgU2hhMSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBIb2xkcyB0aGUgcHJldmlvdXMgdmFsdWVzIG9mIGFjY3VtdWxhdGVkIHZhcmlhYmxlcyBhLWUgaW4gdGhlIGNvbXByZXNzX1xuICAgICAgICAgKiBmdW5jdGlvbi5cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2hhaW5fID0gW107XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGJ1ZmZlciBob2xkaW5nIHRoZSBwYXJ0aWFsbHkgY29tcHV0ZWQgaGFzaCByZXN1bHQuXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmJ1Zl8gPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFuIGFycmF5IG9mIDgwIGJ5dGVzLCBlYWNoIGEgcGFydCBvZiB0aGUgbWVzc2FnZSB0byBiZSBoYXNoZWQuICBSZWZlcnJlZCB0b1xuICAgICAgICAgKiBhcyB0aGUgbWVzc2FnZSBzY2hlZHVsZSBpbiB0aGUgZG9jcy5cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuV18gPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnRhaW5zIGRhdGEgbmVlZGVkIHRvIHBhZCBtZXNzYWdlcyBsZXNzIHRoYW4gNjQgYnl0ZXMuXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnBhZF8gPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmluYnVmXyA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50b3RhbF8gPSAwO1xuICAgICAgICB0aGlzLmJsb2NrU2l6ZSA9IDUxMiAvIDg7XG4gICAgICAgIHRoaXMucGFkX1swXSA9IDEyODtcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCB0aGlzLmJsb2NrU2l6ZTsgKytpKSB7XG4gICAgICAgICAgICB0aGlzLnBhZF9baV0gPSAwO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICB9XG4gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMuY2hhaW5fWzBdID0gMHg2NzQ1MjMwMTtcbiAgICAgICAgdGhpcy5jaGFpbl9bMV0gPSAweGVmY2RhYjg5O1xuICAgICAgICB0aGlzLmNoYWluX1syXSA9IDB4OThiYWRjZmU7XG4gICAgICAgIHRoaXMuY2hhaW5fWzNdID0gMHgxMDMyNTQ3NjtcbiAgICAgICAgdGhpcy5jaGFpbl9bNF0gPSAweGMzZDJlMWYwO1xuICAgICAgICB0aGlzLmluYnVmXyA9IDA7XG4gICAgICAgIHRoaXMudG90YWxfID0gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW50ZXJuYWwgY29tcHJlc3MgaGVscGVyIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSBidWYgQmxvY2sgdG8gY29tcHJlc3MuXG4gICAgICogQHBhcmFtIG9mZnNldCBPZmZzZXQgb2YgdGhlIGJsb2NrIGluIHRoZSBidWZmZXIuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBjb21wcmVzc18oYnVmLCBvZmZzZXQpIHtcbiAgICAgICAgaWYgKCFvZmZzZXQpIHtcbiAgICAgICAgICAgIG9mZnNldCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgVyA9IHRoaXMuV187XG4gICAgICAgIC8vIGdldCAxNiBiaWcgZW5kaWFuIHdvcmRzXG4gICAgICAgIGlmICh0eXBlb2YgYnVmID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETyh1c2VyKTogW2J1ZyA4MTQwMTIyXSBSZWNlbnQgdmVyc2lvbnMgb2YgU2FmYXJpIGZvciBNYWMgT1MgYW5kIGlPU1xuICAgICAgICAgICAgICAgIC8vIGhhdmUgYSBidWcgdGhhdCB0dXJucyB0aGUgcG9zdC1pbmNyZW1lbnQgKysgb3BlcmF0b3IgaW50byBwcmUtaW5jcmVtZW50XG4gICAgICAgICAgICAgICAgLy8gZHVyaW5nIEpJVCBjb21waWxhdGlvbi4gIFdlIGhhdmUgY29kZSB0aGF0IGRlcGVuZHMgaGVhdmlseSBvbiBTSEEtMSBmb3JcbiAgICAgICAgICAgICAgICAvLyBjb3JyZWN0bmVzcyBhbmQgd2hpY2ggaXMgYWZmZWN0ZWQgYnkgdGhpcyBidWcsIHNvIEkndmUgcmVtb3ZlZCBhbGwgdXNlc1xuICAgICAgICAgICAgICAgIC8vIG9mIHBvc3QtaW5jcmVtZW50ICsrIGluIHdoaWNoIHRoZSByZXN1bHQgdmFsdWUgaXMgdXNlZC4gIFdlIGNhbiByZXZlcnRcbiAgICAgICAgICAgICAgICAvLyB0aGlzIGNoYW5nZSBvbmNlIHRoZSBTYWZhcmkgYnVnXG4gICAgICAgICAgICAgICAgLy8gKGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xMDkwMzYpIGhhcyBiZWVuIGZpeGVkIGFuZFxuICAgICAgICAgICAgICAgIC8vIG1vc3QgY2xpZW50cyBoYXZlIGJlZW4gdXBkYXRlZC5cbiAgICAgICAgICAgICAgICBXW2ldID1cbiAgICAgICAgICAgICAgICAgICAgKGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCkgPDwgMjQpIHxcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWYuY2hhckNvZGVBdChvZmZzZXQgKyAxKSA8PCAxNikgfFxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCArIDIpIDw8IDgpIHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCArIDMpO1xuICAgICAgICAgICAgICAgIG9mZnNldCArPSA0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgV1tpXSA9XG4gICAgICAgICAgICAgICAgICAgIChidWZbb2Zmc2V0XSA8PCAyNCkgfFxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1ZltvZmZzZXQgKyAxXSA8PCAxNikgfFxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1ZltvZmZzZXQgKyAyXSA8PCA4KSB8XG4gICAgICAgICAgICAgICAgICAgICAgICBidWZbb2Zmc2V0ICsgM107XG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gZXhwYW5kIHRvIDgwIHdvcmRzXG4gICAgICAgIGZvciAobGV0IGkgPSAxNjsgaSA8IDgwOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBXW2kgLSAzXSBeIFdbaSAtIDhdIF4gV1tpIC0gMTRdIF4gV1tpIC0gMTZdO1xuICAgICAgICAgICAgV1tpXSA9ICgodCA8PCAxKSB8ICh0ID4+PiAzMSkpICYgMHhmZmZmZmZmZjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgYSA9IHRoaXMuY2hhaW5fWzBdO1xuICAgICAgICBsZXQgYiA9IHRoaXMuY2hhaW5fWzFdO1xuICAgICAgICBsZXQgYyA9IHRoaXMuY2hhaW5fWzJdO1xuICAgICAgICBsZXQgZCA9IHRoaXMuY2hhaW5fWzNdO1xuICAgICAgICBsZXQgZSA9IHRoaXMuY2hhaW5fWzRdO1xuICAgICAgICBsZXQgZiwgaztcbiAgICAgICAgLy8gVE9ETyh1c2VyKTogVHJ5IHRvIHVucm9sbCB0aGlzIGxvb3AgdG8gc3BlZWQgdXAgdGhlIGNvbXB1dGF0aW9uLlxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDgwOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChpIDwgNDApIHtcbiAgICAgICAgICAgICAgICBpZiAoaSA8IDIwKSB7XG4gICAgICAgICAgICAgICAgICAgIGYgPSBkIF4gKGIgJiAoYyBeIGQpKTtcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4NWE4Mjc5OTk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmID0gYiBeIGMgXiBkO1xuICAgICAgICAgICAgICAgICAgICBrID0gMHg2ZWQ5ZWJhMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoaSA8IDYwKSB7XG4gICAgICAgICAgICAgICAgICAgIGYgPSAoYiAmIGMpIHwgKGQgJiAoYiB8IGMpKTtcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4OGYxYmJjZGM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmID0gYiBeIGMgXiBkO1xuICAgICAgICAgICAgICAgICAgICBrID0gMHhjYTYyYzFkNjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB0ID0gKCgoYSA8PCA1KSB8IChhID4+PiAyNykpICsgZiArIGUgKyBrICsgV1tpXSkgJiAweGZmZmZmZmZmO1xuICAgICAgICAgICAgZSA9IGQ7XG4gICAgICAgICAgICBkID0gYztcbiAgICAgICAgICAgIGMgPSAoKGIgPDwgMzApIHwgKGIgPj4+IDIpKSAmIDB4ZmZmZmZmZmY7XG4gICAgICAgICAgICBiID0gYTtcbiAgICAgICAgICAgIGEgPSB0O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2hhaW5fWzBdID0gKHRoaXMuY2hhaW5fWzBdICsgYSkgJiAweGZmZmZmZmZmO1xuICAgICAgICB0aGlzLmNoYWluX1sxXSA9ICh0aGlzLmNoYWluX1sxXSArIGIpICYgMHhmZmZmZmZmZjtcbiAgICAgICAgdGhpcy5jaGFpbl9bMl0gPSAodGhpcy5jaGFpbl9bMl0gKyBjKSAmIDB4ZmZmZmZmZmY7XG4gICAgICAgIHRoaXMuY2hhaW5fWzNdID0gKHRoaXMuY2hhaW5fWzNdICsgZCkgJiAweGZmZmZmZmZmO1xuICAgICAgICB0aGlzLmNoYWluX1s0XSA9ICh0aGlzLmNoYWluX1s0XSArIGUpICYgMHhmZmZmZmZmZjtcbiAgICB9XG4gICAgdXBkYXRlKGJ5dGVzLCBsZW5ndGgpIHtcbiAgICAgICAgLy8gVE9ETyhqb2hubGVueik6IHRpZ2h0ZW4gdGhlIGZ1bmN0aW9uIHNpZ25hdHVyZSBhbmQgcmVtb3ZlIHRoaXMgY2hlY2tcbiAgICAgICAgaWYgKGJ5dGVzID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsZW5ndGhNaW51c0Jsb2NrID0gbGVuZ3RoIC0gdGhpcy5ibG9ja1NpemU7XG4gICAgICAgIGxldCBuID0gMDtcbiAgICAgICAgLy8gVXNpbmcgbG9jYWwgaW5zdGVhZCBvZiBtZW1iZXIgdmFyaWFibGVzIGdpdmVzIH41JSBzcGVlZHVwIG9uIEZpcmVmb3ggMTYuXG4gICAgICAgIGNvbnN0IGJ1ZiA9IHRoaXMuYnVmXztcbiAgICAgICAgbGV0IGluYnVmID0gdGhpcy5pbmJ1Zl87XG4gICAgICAgIC8vIFRoZSBvdXRlciB3aGlsZSBsb29wIHNob3VsZCBleGVjdXRlIGF0IG1vc3QgdHdpY2UuXG4gICAgICAgIHdoaWxlIChuIDwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGhhdmUgbm8gZGF0YSBpbiB0aGUgYmxvY2sgdG8gdG9wIHVwLCB3ZSBjYW4gZGlyZWN0bHkgcHJvY2VzcyB0aGVcbiAgICAgICAgICAgIC8vIGlucHV0IGJ1ZmZlciAoYXNzdW1pbmcgaXQgY29udGFpbnMgc3VmZmljaWVudCBkYXRhKS4gVGhpcyBnaXZlcyB+MjUlXG4gICAgICAgICAgICAvLyBzcGVlZHVwIG9uIENocm9tZSAyMyBhbmQgfjE1JSBzcGVlZHVwIG9uIEZpcmVmb3ggMTYsIGJ1dCByZXF1aXJlcyB0aGF0XG4gICAgICAgICAgICAvLyB0aGUgZGF0YSBpcyBwcm92aWRlZCBpbiBsYXJnZSBjaHVua3MgKG9yIGluIG11bHRpcGxlcyBvZiA2NCBieXRlcykuXG4gICAgICAgICAgICBpZiAoaW5idWYgPT09IDApIHtcbiAgICAgICAgICAgICAgICB3aGlsZSAobiA8PSBsZW5ndGhNaW51c0Jsb2NrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHJlc3NfKGJ5dGVzLCBuKTtcbiAgICAgICAgICAgICAgICAgICAgbiArPSB0aGlzLmJsb2NrU2l6ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIGJ5dGVzID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHdoaWxlIChuIDwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1ZltpbmJ1Zl0gPSBieXRlcy5jaGFyQ29kZUF0KG4pO1xuICAgICAgICAgICAgICAgICAgICArK2luYnVmO1xuICAgICAgICAgICAgICAgICAgICArK247XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmJ1ZiA9PT0gdGhpcy5ibG9ja1NpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHJlc3NfKGJ1Zik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmJ1ZiA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBKdW1wIHRvIHRoZSBvdXRlciBsb29wIHNvIHdlIHVzZSB0aGUgZnVsbC1ibG9jayBvcHRpbWl6YXRpb24uXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHdoaWxlIChuIDwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1ZltpbmJ1Zl0gPSBieXRlc1tuXTtcbiAgICAgICAgICAgICAgICAgICAgKytpbmJ1ZjtcbiAgICAgICAgICAgICAgICAgICAgKytuO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5idWYgPT09IHRoaXMuYmxvY2tTaXplKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXByZXNzXyhidWYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5idWYgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSnVtcCB0byB0aGUgb3V0ZXIgbG9vcCBzbyB3ZSB1c2UgdGhlIGZ1bGwtYmxvY2sgb3B0aW1pemF0aW9uLlxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pbmJ1Zl8gPSBpbmJ1ZjtcbiAgICAgICAgdGhpcy50b3RhbF8gKz0gbGVuZ3RoO1xuICAgIH1cbiAgICAvKiogQG92ZXJyaWRlICovXG4gICAgZGlnZXN0KCkge1xuICAgICAgICBjb25zdCBkaWdlc3QgPSBbXTtcbiAgICAgICAgbGV0IHRvdGFsQml0cyA9IHRoaXMudG90YWxfICogODtcbiAgICAgICAgLy8gQWRkIHBhZCAweDgwIDB4MDAqLlxuICAgICAgICBpZiAodGhpcy5pbmJ1Zl8gPCA1Nikge1xuICAgICAgICAgICAgdGhpcy51cGRhdGUodGhpcy5wYWRfLCA1NiAtIHRoaXMuaW5idWZfKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKHRoaXMucGFkXywgdGhpcy5ibG9ja1NpemUgLSAodGhpcy5pbmJ1Zl8gLSA1NikpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEFkZCAjIGJpdHMuXG4gICAgICAgIGZvciAobGV0IGkgPSB0aGlzLmJsb2NrU2l6ZSAtIDE7IGkgPj0gNTY7IGktLSkge1xuICAgICAgICAgICAgdGhpcy5idWZfW2ldID0gdG90YWxCaXRzICYgMjU1O1xuICAgICAgICAgICAgdG90YWxCaXRzIC89IDI1NjsgLy8gRG9uJ3QgdXNlIGJpdC1zaGlmdGluZyBoZXJlIVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29tcHJlc3NfKHRoaXMuYnVmXyk7XG4gICAgICAgIGxldCBuID0gMDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA1OyBpKyspIHtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAyNDsgaiA+PSAwOyBqIC09IDgpIHtcbiAgICAgICAgICAgICAgICBkaWdlc3Rbbl0gPSAodGhpcy5jaGFpbl9baV0gPj4gaikgJiAyNTU7XG4gICAgICAgICAgICAgICAgKytuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkaWdlc3Q7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0byBtYWtlIGEgU3Vic2NyaWJlIGZ1bmN0aW9uIChqdXN0IGxpa2UgUHJvbWlzZSBoZWxwcyBtYWtlIGFcbiAqIFRoZW5hYmxlKS5cbiAqXG4gKiBAcGFyYW0gZXhlY3V0b3IgRnVuY3Rpb24gd2hpY2ggY2FuIG1ha2UgY2FsbHMgdG8gYSBzaW5nbGUgT2JzZXJ2ZXJcbiAqICAgICBhcyBhIHByb3h5LlxuICogQHBhcmFtIG9uTm9PYnNlcnZlcnMgQ2FsbGJhY2sgd2hlbiBjb3VudCBvZiBPYnNlcnZlcnMgZ29lcyB0byB6ZXJvLlxuICovXG5mdW5jdGlvbiBjcmVhdGVTdWJzY3JpYmUoZXhlY3V0b3IsIG9uTm9PYnNlcnZlcnMpIHtcbiAgICBjb25zdCBwcm94eSA9IG5ldyBPYnNlcnZlclByb3h5KGV4ZWN1dG9yLCBvbk5vT2JzZXJ2ZXJzKTtcbiAgICByZXR1cm4gcHJveHkuc3Vic2NyaWJlLmJpbmQocHJveHkpO1xufVxuLyoqXG4gKiBJbXBsZW1lbnQgZmFuLW91dCBmb3IgYW55IG51bWJlciBvZiBPYnNlcnZlcnMgYXR0YWNoZWQgdmlhIGEgc3Vic2NyaWJlXG4gKiBmdW5jdGlvbi5cbiAqL1xuY2xhc3MgT2JzZXJ2ZXJQcm94eSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGV4ZWN1dG9yIEZ1bmN0aW9uIHdoaWNoIGNhbiBtYWtlIGNhbGxzIHRvIGEgc2luZ2xlIE9ic2VydmVyXG4gICAgICogICAgIGFzIGEgcHJveHkuXG4gICAgICogQHBhcmFtIG9uTm9PYnNlcnZlcnMgQ2FsbGJhY2sgd2hlbiBjb3VudCBvZiBPYnNlcnZlcnMgZ29lcyB0byB6ZXJvLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGV4ZWN1dG9yLCBvbk5vT2JzZXJ2ZXJzKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gW107XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmVzID0gW107XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJDb3VudCA9IDA7XG4gICAgICAgIC8vIE1pY3JvLXRhc2sgc2NoZWR1bGluZyBieSBjYWxsaW5nIHRhc2sudGhlbigpLlxuICAgICAgICB0aGlzLnRhc2sgPSBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgdGhpcy5maW5hbGl6ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5vbk5vT2JzZXJ2ZXJzID0gb25Ob09ic2VydmVycztcbiAgICAgICAgLy8gQ2FsbCB0aGUgZXhlY3V0b3IgYXN5bmNocm9ub3VzbHkgc28gc3Vic2NyaWJlcnMgdGhhdCBhcmUgY2FsbGVkXG4gICAgICAgIC8vIHN5bmNocm9ub3VzbHkgYWZ0ZXIgdGhlIGNyZWF0aW9uIG9mIHRoZSBzdWJzY3JpYmUgZnVuY3Rpb25cbiAgICAgICAgLy8gY2FuIHN0aWxsIHJlY2VpdmUgdGhlIHZlcnkgZmlyc3QgdmFsdWUgZ2VuZXJhdGVkIGluIHRoZSBleGVjdXRvci5cbiAgICAgICAgdGhpcy50YXNrXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBleGVjdXRvcih0aGlzKTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChlID0+IHtcbiAgICAgICAgICAgIHRoaXMuZXJyb3IoZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBuZXh0KHZhbHVlKSB7XG4gICAgICAgIHRoaXMuZm9yRWFjaE9ic2VydmVyKChvYnNlcnZlcikgPT4ge1xuICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dCh2YWx1ZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlcnJvcihlcnJvcikge1xuICAgICAgICB0aGlzLmZvckVhY2hPYnNlcnZlcigob2JzZXJ2ZXIpID0+IHtcbiAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY2xvc2UoZXJyb3IpO1xuICAgIH1cbiAgICBjb21wbGV0ZSgpIHtcbiAgICAgICAgdGhpcy5mb3JFYWNoT2JzZXJ2ZXIoKG9ic2VydmVyKSA9PiB7XG4gICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdWJzY3JpYmUgZnVuY3Rpb24gdGhhdCBjYW4gYmUgdXNlZCB0byBhZGQgYW4gT2JzZXJ2ZXIgdG8gdGhlIGZhbi1vdXQgbGlzdC5cbiAgICAgKlxuICAgICAqIC0gV2UgcmVxdWlyZSB0aGF0IG5vIGV2ZW50IGlzIHNlbnQgdG8gYSBzdWJzY3JpYmVyIHN5bmNocm9ub3VzbHkgdG8gdGhlaXJcbiAgICAgKiAgIGNhbGwgdG8gc3Vic2NyaWJlKCkuXG4gICAgICovXG4gICAgc3Vic2NyaWJlKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGUpIHtcbiAgICAgICAgbGV0IG9ic2VydmVyO1xuICAgICAgICBpZiAobmV4dE9yT2JzZXJ2ZXIgPT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgZXJyb3IgPT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgY29tcGxldGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIE9ic2VydmVyLicpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEFzc2VtYmxlIGFuIE9ic2VydmVyIG9iamVjdCB3aGVuIHBhc3NlZCBhcyBjYWxsYmFjayBmdW5jdGlvbnMuXG4gICAgICAgIGlmIChpbXBsZW1lbnRzQW55TWV0aG9kcyhuZXh0T3JPYnNlcnZlciwgW1xuICAgICAgICAgICAgJ25leHQnLFxuICAgICAgICAgICAgJ2Vycm9yJyxcbiAgICAgICAgICAgICdjb21wbGV0ZSdcbiAgICAgICAgXSkpIHtcbiAgICAgICAgICAgIG9ic2VydmVyID0gbmV4dE9yT2JzZXJ2ZXI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvYnNlcnZlciA9IHtcbiAgICAgICAgICAgICAgICBuZXh0OiBuZXh0T3JPYnNlcnZlcixcbiAgICAgICAgICAgICAgICBlcnJvcixcbiAgICAgICAgICAgICAgICBjb21wbGV0ZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob2JzZXJ2ZXIubmV4dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBvYnNlcnZlci5uZXh0ID0gbm9vcDtcbiAgICAgICAgfVxuICAgICAgICBpZiAob2JzZXJ2ZXIuZXJyb3IgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IgPSBub29wO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvYnNlcnZlci5jb21wbGV0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSA9IG5vb3A7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdW5zdWIgPSB0aGlzLnVuc3Vic2NyaWJlT25lLmJpbmQodGhpcywgdGhpcy5vYnNlcnZlcnMubGVuZ3RoKTtcbiAgICAgICAgLy8gQXR0ZW1wdCB0byBzdWJzY3JpYmUgdG8gYSB0ZXJtaW5hdGVkIE9ic2VydmFibGUgLSB3ZVxuICAgICAgICAvLyBqdXN0IHJlc3BvbmQgdG8gdGhlIE9ic2VydmVyIHdpdGggdGhlIGZpbmFsIGVycm9yIG9yIGNvbXBsZXRlXG4gICAgICAgIC8vIGV2ZW50LlxuICAgICAgICBpZiAodGhpcy5maW5hbGl6ZWQpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcbiAgICAgICAgICAgIHRoaXMudGFzay50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5maW5hbEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5lcnJvcih0aGlzLmZpbmFsRXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBub3RoaW5nXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2gob2JzZXJ2ZXIpO1xuICAgICAgICByZXR1cm4gdW5zdWI7XG4gICAgfVxuICAgIC8vIFVuc3Vic2NyaWJlIGlzIHN5bmNocm9ub3VzIC0gd2UgZ3VhcmFudGVlIHRoYXQgbm8gZXZlbnRzIGFyZSBzZW50IHRvXG4gICAgLy8gYW55IHVuc3Vic2NyaWJlZCBPYnNlcnZlci5cbiAgICB1bnN1YnNjcmliZU9uZShpKSB7XG4gICAgICAgIGlmICh0aGlzLm9ic2VydmVycyA9PT0gdW5kZWZpbmVkIHx8IHRoaXMub2JzZXJ2ZXJzW2ldID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBkZWxldGUgdGhpcy5vYnNlcnZlcnNbaV07XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJDb3VudCAtPSAxO1xuICAgICAgICBpZiAodGhpcy5vYnNlcnZlckNvdW50ID09PSAwICYmIHRoaXMub25Ob09ic2VydmVycyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLm9uTm9PYnNlcnZlcnModGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yRWFjaE9ic2VydmVyKGZuKSB7XG4gICAgICAgIGlmICh0aGlzLmZpbmFsaXplZCkge1xuICAgICAgICAgICAgLy8gQWxyZWFkeSBjbG9zZWQgYnkgcHJldmlvdXMgZXZlbnQuLi4uanVzdCBlYXQgdGhlIGFkZGl0aW9uYWwgdmFsdWVzLlxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIFNpbmNlIHNlbmRPbmUgY2FsbHMgYXN5bmNocm9ub3VzbHkgLSB0aGVyZSBpcyBubyBjaGFuY2UgdGhhdFxuICAgICAgICAvLyB0aGlzLm9ic2VydmVycyB3aWxsIGJlY29tZSB1bmRlZmluZWQuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5vYnNlcnZlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuc2VuZE9uZShpLCBmbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gQ2FsbCB0aGUgT2JzZXJ2ZXIgdmlhIG9uZSBvZiBpdCdzIGNhbGxiYWNrIGZ1bmN0aW9uLiBXZSBhcmUgY2FyZWZ1bCB0b1xuICAgIC8vIGNvbmZpcm0gdGhhdCB0aGUgb2JzZXJ2ZSBoYXMgbm90IGJlZW4gdW5zdWJzY3JpYmVkIHNpbmNlIHRoaXMgYXN5bmNocm9ub3VzXG4gICAgLy8gZnVuY3Rpb24gaGFkIGJlZW4gcXVldWVkLlxuICAgIHNlbmRPbmUoaSwgZm4pIHtcbiAgICAgICAgLy8gRXhlY3V0ZSB0aGUgY2FsbGJhY2sgYXN5bmNocm9ub3VzbHlcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xuICAgICAgICB0aGlzLnRhc2sudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5vYnNlcnZlcnMgIT09IHVuZGVmaW5lZCAmJiB0aGlzLm9ic2VydmVyc1tpXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgZm4odGhpcy5vYnNlcnZlcnNbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgZXhjZXB0aW9ucyByYWlzZWQgaW4gT2JzZXJ2ZXJzIG9yIG1pc3NpbmcgbWV0aG9kcyBvZiBhblxuICAgICAgICAgICAgICAgICAgICAvLyBPYnNlcnZlci5cbiAgICAgICAgICAgICAgICAgICAgLy8gTG9nIGVycm9yIHRvIGNvbnNvbGUuIGIvMzE0MDQ4MDZcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJyAmJiBjb25zb2xlLmVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2xvc2UoZXJyKSB7XG4gICAgICAgIGlmICh0aGlzLmZpbmFsaXplZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZmluYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKGVyciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmZpbmFsRXJyb3IgPSBlcnI7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUHJveHkgaXMgbm8gbG9uZ2VyIG5lZWRlZCAtIGdhcmJhZ2UgY29sbGVjdCByZWZlcmVuY2VzXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcbiAgICAgICAgdGhpcy50YXNrLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5vYnNlcnZlcnMgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLm9uTm9PYnNlcnZlcnMgPSB1bmRlZmluZWQ7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8qKiBUdXJuIHN5bmNocm9ub3VzIGZ1bmN0aW9uIGludG8gb25lIGNhbGxlZCBhc3luY2hyb25vdXNseS4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXR5cGVzXG5mdW5jdGlvbiBhc3luYyhmbiwgb25FcnJvcikge1xuICAgIHJldHVybiAoLi4uYXJncykgPT4ge1xuICAgICAgICBQcm9taXNlLnJlc29sdmUodHJ1ZSlcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIGZuKC4uLmFyZ3MpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgaWYgKG9uRXJyb3IpIHtcbiAgICAgICAgICAgICAgICBvbkVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbn1cbi8qKlxuICogUmV0dXJuIHRydWUgaWYgdGhlIG9iamVjdCBwYXNzZWQgaW4gaW1wbGVtZW50cyBhbnkgb2YgdGhlIG5hbWVkIG1ldGhvZHMuXG4gKi9cbmZ1bmN0aW9uIGltcGxlbWVudHNBbnlNZXRob2RzKG9iaiwgbWV0aG9kcykge1xuICAgIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0JyB8fCBvYmogPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IG1ldGhvZCBvZiBtZXRob2RzKSB7XG4gICAgICAgIGlmIChtZXRob2QgaW4gb2JqICYmIHR5cGVvZiBvYmpbbWV0aG9kXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gbm9vcCgpIHtcbiAgICAvLyBkbyBub3RoaW5nXG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIENoZWNrIHRvIG1ha2Ugc3VyZSB0aGUgYXBwcm9wcmlhdGUgbnVtYmVyIG9mIGFyZ3VtZW50cyBhcmUgcHJvdmlkZWQgZm9yIGEgcHVibGljIGZ1bmN0aW9uLlxuICogVGhyb3dzIGFuIGVycm9yIGlmIGl0IGZhaWxzLlxuICpcbiAqIEBwYXJhbSBmbk5hbWUgVGhlIGZ1bmN0aW9uIG5hbWVcbiAqIEBwYXJhbSBtaW5Db3VudCBUaGUgbWluaW11bSBudW1iZXIgb2YgYXJndW1lbnRzIHRvIGFsbG93IGZvciB0aGUgZnVuY3Rpb24gY2FsbFxuICogQHBhcmFtIG1heENvdW50IFRoZSBtYXhpbXVtIG51bWJlciBvZiBhcmd1bWVudCB0byBhbGxvdyBmb3IgdGhlIGZ1bmN0aW9uIGNhbGxcbiAqIEBwYXJhbSBhcmdDb3VudCBUaGUgYWN0dWFsIG51bWJlciBvZiBhcmd1bWVudHMgcHJvdmlkZWQuXG4gKi9cbmNvbnN0IHZhbGlkYXRlQXJnQ291bnQgPSBmdW5jdGlvbiAoZm5OYW1lLCBtaW5Db3VudCwgbWF4Q291bnQsIGFyZ0NvdW50KSB7XG4gICAgbGV0IGFyZ0Vycm9yO1xuICAgIGlmIChhcmdDb3VudCA8IG1pbkNvdW50KSB7XG4gICAgICAgIGFyZ0Vycm9yID0gJ2F0IGxlYXN0ICcgKyBtaW5Db3VudDtcbiAgICB9XG4gICAgZWxzZSBpZiAoYXJnQ291bnQgPiBtYXhDb3VudCkge1xuICAgICAgICBhcmdFcnJvciA9IG1heENvdW50ID09PSAwID8gJ25vbmUnIDogJ25vIG1vcmUgdGhhbiAnICsgbWF4Q291bnQ7XG4gICAgfVxuICAgIGlmIChhcmdFcnJvcikge1xuICAgICAgICBjb25zdCBlcnJvciA9IGZuTmFtZSArXG4gICAgICAgICAgICAnIGZhaWxlZDogV2FzIGNhbGxlZCB3aXRoICcgK1xuICAgICAgICAgICAgYXJnQ291bnQgK1xuICAgICAgICAgICAgKGFyZ0NvdW50ID09PSAxID8gJyBhcmd1bWVudC4nIDogJyBhcmd1bWVudHMuJykgK1xuICAgICAgICAgICAgJyBFeHBlY3RzICcgK1xuICAgICAgICAgICAgYXJnRXJyb3IgK1xuICAgICAgICAgICAgJy4nO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xuICAgIH1cbn07XG4vKipcbiAqIEdlbmVyYXRlcyBhIHN0cmluZyB0byBwcmVmaXggYW4gZXJyb3IgbWVzc2FnZSBhYm91dCBmYWlsZWQgYXJndW1lbnQgdmFsaWRhdGlvblxuICpcbiAqIEBwYXJhbSBmbk5hbWUgVGhlIGZ1bmN0aW9uIG5hbWVcbiAqIEBwYXJhbSBhcmdOYW1lIFRoZSBuYW1lIG9mIHRoZSBhcmd1bWVudFxuICogQHJldHVybiBUaGUgcHJlZml4IHRvIGFkZCB0byB0aGUgZXJyb3IgdGhyb3duIGZvciB2YWxpZGF0aW9uLlxuICovXG5mdW5jdGlvbiBlcnJvclByZWZpeChmbk5hbWUsIGFyZ05hbWUpIHtcbiAgICByZXR1cm4gYCR7Zm5OYW1lfSBmYWlsZWQ6ICR7YXJnTmFtZX0gYXJndW1lbnQgYDtcbn1cbi8qKlxuICogQHBhcmFtIGZuTmFtZVxuICogQHBhcmFtIGFyZ3VtZW50TnVtYmVyXG4gKiBAcGFyYW0gbmFtZXNwYWNlXG4gKiBAcGFyYW0gb3B0aW9uYWxcbiAqL1xuZnVuY3Rpb24gdmFsaWRhdGVOYW1lc3BhY2UoZm5OYW1lLCBuYW1lc3BhY2UsIG9wdGlvbmFsKSB7XG4gICAgaWYgKG9wdGlvbmFsICYmICFuYW1lc3BhY2UpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG5hbWVzcGFjZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgLy9UT0RPOiBJIHNob3VsZCBkbyBtb3JlIHZhbGlkYXRpb24gaGVyZS4gV2Ugb25seSBhbGxvdyBjZXJ0YWluIGNoYXJzIGluIG5hbWVzcGFjZXMuXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeChmbk5hbWUsICduYW1lc3BhY2UnKSArICdtdXN0IGJlIGEgdmFsaWQgZmlyZWJhc2UgbmFtZXNwYWNlLicpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHZhbGlkYXRlQ2FsbGJhY2soZm5OYW1lLCBhcmd1bWVudE5hbWUsIFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHlwZXNcbmNhbGxiYWNrLCBvcHRpb25hbCkge1xuICAgIGlmIChvcHRpb25hbCAmJiAhY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeChmbk5hbWUsIGFyZ3VtZW50TmFtZSkgKyAnbXVzdCBiZSBhIHZhbGlkIGZ1bmN0aW9uLicpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHZhbGlkYXRlQ29udGV4dE9iamVjdChmbk5hbWUsIGFyZ3VtZW50TmFtZSwgY29udGV4dCwgb3B0aW9uYWwpIHtcbiAgICBpZiAob3B0aW9uYWwgJiYgIWNvbnRleHQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGNvbnRleHQgIT09ICdvYmplY3QnIHx8IGNvbnRleHQgPT09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yUHJlZml4KGZuTmFtZSwgYXJndW1lbnROYW1lKSArICdtdXN0IGJlIGEgdmFsaWQgY29udGV4dCBvYmplY3QuJyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gQ29kZSBvcmlnaW5hbGx5IGNhbWUgZnJvbSBnb29nLmNyeXB0LnN0cmluZ1RvVXRmOEJ5dGVBcnJheSwgYnV0IGZvciBzb21lIHJlYXNvbiB0aGV5XG4vLyBhdXRvbWF0aWNhbGx5IHJlcGxhY2VkICdcXHJcXG4nIHdpdGggJ1xcbicsIGFuZCB0aGV5IGRpZG4ndCBoYW5kbGUgc3Vycm9nYXRlIHBhaXJzLFxuLy8gc28gaXQncyBiZWVuIG1vZGlmaWVkLlxuLy8gTm90ZSB0aGF0IG5vdCBhbGwgVW5pY29kZSBjaGFyYWN0ZXJzIGFwcGVhciBhcyBzaW5nbGUgY2hhcmFjdGVycyBpbiBKYXZhU2NyaXB0IHN0cmluZ3MuXG4vLyBmcm9tQ2hhckNvZGUgcmV0dXJucyB0aGUgVVRGLTE2IGVuY29kaW5nIG9mIGEgY2hhcmFjdGVyIC0gc28gc29tZSBVbmljb2RlIGNoYXJhY3RlcnNcbi8vIHVzZSAyIGNoYXJhY3RlcnMgaW4gSmF2YVNjcmlwdC4gIEFsbCA0LWJ5dGUgVVRGLTggY2hhcmFjdGVycyBiZWdpbiB3aXRoIGEgZmlyc3Rcbi8vIGNoYXJhY3RlciBpbiB0aGUgcmFuZ2UgMHhEODAwIC0gMHhEQkZGICh0aGUgZmlyc3QgY2hhcmFjdGVyIG9mIGEgc28tY2FsbGVkIHN1cnJvZ2F0ZVxuLy8gcGFpcikuXG4vLyBTZWUgaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzUuMS8jc2VjLTE1LjEuM1xuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtBcnJheX1cbiAqL1xuY29uc3Qgc3RyaW5nVG9CeXRlQXJyYXkgPSBmdW5jdGlvbiAoc3RyKSB7XG4gICAgY29uc3Qgb3V0ID0gW107XG4gICAgbGV0IHAgPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgIC8vIElzIHRoaXMgdGhlIGxlYWQgc3Vycm9nYXRlIGluIGEgc3Vycm9nYXRlIHBhaXI/XG4gICAgICAgIGlmIChjID49IDB4ZDgwMCAmJiBjIDw9IDB4ZGJmZikge1xuICAgICAgICAgICAgY29uc3QgaGlnaCA9IGMgLSAweGQ4MDA7IC8vIHRoZSBoaWdoIDEwIGJpdHMuXG4gICAgICAgICAgICBpKys7XG4gICAgICAgICAgICBhc3NlcnQoaSA8IHN0ci5sZW5ndGgsICdTdXJyb2dhdGUgcGFpciBtaXNzaW5nIHRyYWlsIHN1cnJvZ2F0ZS4nKTtcbiAgICAgICAgICAgIGNvbnN0IGxvdyA9IHN0ci5jaGFyQ29kZUF0KGkpIC0gMHhkYzAwOyAvLyB0aGUgbG93IDEwIGJpdHMuXG4gICAgICAgICAgICBjID0gMHgxMDAwMCArIChoaWdoIDw8IDEwKSArIGxvdztcbiAgICAgICAgfVxuICAgICAgICBpZiAoYyA8IDEyOCkge1xuICAgICAgICAgICAgb3V0W3ArK10gPSBjO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGMgPCAyMDQ4KSB7XG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDYpIHwgMTkyO1xuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjIDwgNjU1MzYpIHtcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTIpIHwgMjI0O1xuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gNikgJiA2MykgfCAxMjg7XG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiAxOCkgfCAyNDA7XG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiAxMikgJiA2MykgfCAxMjg7XG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG91dDtcbn07XG4vKipcbiAqIENhbGN1bGF0ZSBsZW5ndGggd2l0aG91dCBhY3R1YWxseSBjb252ZXJ0aW5nOyB1c2VmdWwgZm9yIGRvaW5nIGNoZWFwZXIgdmFsaWRhdGlvbi5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuY29uc3Qgc3RyaW5nTGVuZ3RoID0gZnVuY3Rpb24gKHN0cikge1xuICAgIGxldCBwID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgIGlmIChjIDwgMTI4KSB7XG4gICAgICAgICAgICBwKys7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYyA8IDIwNDgpIHtcbiAgICAgICAgICAgIHAgKz0gMjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjID49IDB4ZDgwMCAmJiBjIDw9IDB4ZGJmZikge1xuICAgICAgICAgICAgLy8gTGVhZCBzdXJyb2dhdGUgb2YgYSBzdXJyb2dhdGUgcGFpci4gIFRoZSBwYWlyIHRvZ2V0aGVyIHdpbGwgdGFrZSA0IGJ5dGVzIHRvIHJlcHJlc2VudC5cbiAgICAgICAgICAgIHAgKz0gNDtcbiAgICAgICAgICAgIGkrKzsgLy8gc2tpcCB0cmFpbCBzdXJyb2dhdGUuXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwICs9IDM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHA7XG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGUgYW1vdW50IG9mIG1pbGxpc2Vjb25kcyB0byBleHBvbmVudGlhbGx5IGluY3JlYXNlLlxuICovXG5jb25zdCBERUZBVUxUX0lOVEVSVkFMX01JTExJUyA9IDEwMDA7XG4vKipcbiAqIFRoZSBmYWN0b3IgdG8gYmFja29mZiBieS5cbiAqIFNob3VsZCBiZSBhIG51bWJlciBncmVhdGVyIHRoYW4gMS5cbiAqL1xuY29uc3QgREVGQVVMVF9CQUNLT0ZGX0ZBQ1RPUiA9IDI7XG4vKipcbiAqIFRoZSBtYXhpbXVtIG1pbGxpc2Vjb25kcyB0byBpbmNyZWFzZSB0by5cbiAqXG4gKiA8cD5WaXNpYmxlIGZvciB0ZXN0aW5nXG4gKi9cbmNvbnN0IE1BWF9WQUxVRV9NSUxMSVMgPSA0ICogNjAgKiA2MCAqIDEwMDA7IC8vIEZvdXIgaG91cnMsIGxpa2UgaU9TIGFuZCBBbmRyb2lkLlxuLyoqXG4gKiBUaGUgcGVyY2VudGFnZSBvZiBiYWNrb2ZmIHRpbWUgdG8gcmFuZG9taXplIGJ5LlxuICogU2VlXG4gKiBodHRwOi8vZ28vc2FmZS1jbGllbnQtYmVoYXZpb3Ijc3RlcC0xLWRldGVybWluZS10aGUtYXBwcm9wcmlhdGUtcmV0cnktaW50ZXJ2YWwtdG8taGFuZGxlLXNwaWtlLXRyYWZmaWNcbiAqIGZvciBjb250ZXh0LlxuICpcbiAqIDxwPlZpc2libGUgZm9yIHRlc3RpbmdcbiAqL1xuY29uc3QgUkFORE9NX0ZBQ1RPUiA9IDAuNTtcbi8qKlxuICogQmFzZWQgb24gdGhlIGJhY2tvZmYgbWV0aG9kIGZyb21cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvY2xvc3VyZS1saWJyYXJ5L2Jsb2IvbWFzdGVyL2Nsb3N1cmUvZ29vZy9tYXRoL2V4cG9uZW50aWFsYmFja29mZi5qcy5cbiAqIEV4dHJhY3RlZCBoZXJlIHNvIHdlIGRvbid0IG5lZWQgdG8gcGFzcyBtZXRhZGF0YSBhbmQgYSBzdGF0ZWZ1bCBFeHBvbmVudGlhbEJhY2tvZmYgb2JqZWN0IGFyb3VuZC5cbiAqL1xuZnVuY3Rpb24gY2FsY3VsYXRlQmFja29mZk1pbGxpcyhiYWNrb2ZmQ291bnQsIGludGVydmFsTWlsbGlzID0gREVGQVVMVF9JTlRFUlZBTF9NSUxMSVMsIGJhY2tvZmZGYWN0b3IgPSBERUZBVUxUX0JBQ0tPRkZfRkFDVE9SKSB7XG4gICAgLy8gQ2FsY3VsYXRlcyBhbiBleHBvbmVudGlhbGx5IGluY3JlYXNpbmcgdmFsdWUuXG4gICAgLy8gRGV2aWF0aW9uOiBjYWxjdWxhdGVzIHZhbHVlIGZyb20gY291bnQgYW5kIGEgY29uc3RhbnQgaW50ZXJ2YWwsIHNvIHdlIG9ubHkgbmVlZCB0byBzYXZlIHZhbHVlXG4gICAgLy8gYW5kIGNvdW50IHRvIHJlc3RvcmUgc3RhdGUuXG4gICAgY29uc3QgY3VyckJhc2VWYWx1ZSA9IGludGVydmFsTWlsbGlzICogTWF0aC5wb3coYmFja29mZkZhY3RvciwgYmFja29mZkNvdW50KTtcbiAgICAvLyBBIHJhbmRvbSBcImZ1enpcIiB0byBhdm9pZCB3YXZlcyBvZiByZXRyaWVzLlxuICAgIC8vIERldmlhdGlvbjogcmFuZG9tRmFjdG9yIGlzIHJlcXVpcmVkLlxuICAgIGNvbnN0IHJhbmRvbVdhaXQgPSBNYXRoLnJvdW5kKFxuICAgIC8vIEEgZnJhY3Rpb24gb2YgdGhlIGJhY2tvZmYgdmFsdWUgdG8gYWRkL3N1YnRyYWN0LlxuICAgIC8vIERldmlhdGlvbjogY2hhbmdlcyBtdWx0aXBsaWNhdGlvbiBvcmRlciB0byBpbXByb3ZlIHJlYWRhYmlsaXR5LlxuICAgIFJBTkRPTV9GQUNUT1IgKlxuICAgICAgICBjdXJyQmFzZVZhbHVlICpcbiAgICAgICAgLy8gQSByYW5kb20gZmxvYXQgKHJvdW5kZWQgdG8gaW50IGJ5IE1hdGgucm91bmQgYWJvdmUpIGluIHRoZSByYW5nZSBbLTEsIDFdLiBEZXRlcm1pbmVzXG4gICAgICAgIC8vIGlmIHdlIGFkZCBvciBzdWJ0cmFjdC5cbiAgICAgICAgKE1hdGgucmFuZG9tKCkgLSAwLjUpICpcbiAgICAgICAgMik7XG4gICAgLy8gTGltaXRzIGJhY2tvZmYgdG8gbWF4IHRvIGF2b2lkIGVmZmVjdGl2ZWx5IHBlcm1hbmVudCBiYWNrb2ZmLlxuICAgIHJldHVybiBNYXRoLm1pbihNQVhfVkFMVUVfTUlMTElTLCBjdXJyQmFzZVZhbHVlICsgcmFuZG9tV2FpdCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFByb3ZpZGUgRW5nbGlzaCBvcmRpbmFsIGxldHRlcnMgYWZ0ZXIgYSBudW1iZXJcbiAqL1xuZnVuY3Rpb24gb3JkaW5hbChpKSB7XG4gICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoaSkpIHtcbiAgICAgICAgcmV0dXJuIGAke2l9YDtcbiAgICB9XG4gICAgcmV0dXJuIGkgKyBpbmRpY2F0b3IoaSk7XG59XG5mdW5jdGlvbiBpbmRpY2F0b3IoaSkge1xuICAgIGkgPSBNYXRoLmFicyhpKTtcbiAgICBjb25zdCBjZW50ID0gaSAlIDEwMDtcbiAgICBpZiAoY2VudCA+PSAxMCAmJiBjZW50IDw9IDIwKSB7XG4gICAgICAgIHJldHVybiAndGgnO1xuICAgIH1cbiAgICBjb25zdCBkZWMgPSBpICUgMTA7XG4gICAgaWYgKGRlYyA9PT0gMSkge1xuICAgICAgICByZXR1cm4gJ3N0JztcbiAgICB9XG4gICAgaWYgKGRlYyA9PT0gMikge1xuICAgICAgICByZXR1cm4gJ25kJztcbiAgICB9XG4gICAgaWYgKGRlYyA9PT0gMykge1xuICAgICAgICByZXR1cm4gJ3JkJztcbiAgICB9XG4gICAgcmV0dXJuICd0aCc7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5mdW5jdGlvbiBnZXRNb2R1bGFySW5zdGFuY2Uoc2VydmljZSkge1xuICAgIGlmIChzZXJ2aWNlICYmIHNlcnZpY2UuX2RlbGVnYXRlKSB7XG4gICAgICAgIHJldHVybiBzZXJ2aWNlLl9kZWxlZ2F0ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBzZXJ2aWNlO1xuICAgIH1cbn1cblxuZXhwb3J0IHsgQ09OU1RBTlRTLCBEZWNvZGVCYXNlNjRTdHJpbmdFcnJvciwgRGVmZXJyZWQsIEVycm9yRmFjdG9yeSwgRmlyZWJhc2VFcnJvciwgTUFYX1ZBTFVFX01JTExJUywgUkFORE9NX0ZBQ1RPUiwgU2hhMSwgYXJlQ29va2llc0VuYWJsZWQsIGFzc2VydCwgYXNzZXJ0aW9uRXJyb3IsIGFzeW5jLCBiYXNlNjQsIGJhc2U2NERlY29kZSwgYmFzZTY0RW5jb2RlLCBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZywgY2FsY3VsYXRlQmFja29mZk1pbGxpcywgY29udGFpbnMsIGNyZWF0ZU1vY2tVc2VyVG9rZW4sIGNyZWF0ZVN1YnNjcmliZSwgZGVjb2RlLCBkZWVwQ29weSwgZGVlcEVxdWFsLCBkZWVwRXh0ZW5kLCBlcnJvclByZWZpeCwgZXh0cmFjdFF1ZXJ5c3RyaW5nLCBnZXREZWZhdWx0QXBwQ29uZmlnLCBnZXREZWZhdWx0RW11bGF0b3JIb3N0LCBnZXREZWZhdWx0RW11bGF0b3JIb3N0bmFtZUFuZFBvcnQsIGdldERlZmF1bHRzLCBnZXRFeHBlcmltZW50YWxTZXR0aW5nLCBnZXRHbG9iYWwsIGdldE1vZHVsYXJJbnN0YW5jZSwgZ2V0VUEsIGlzQWRtaW4sIGlzQnJvd3NlciwgaXNCcm93c2VyRXh0ZW5zaW9uLCBpc0Nsb3VkV29ya3N0YXRpb24sIGlzQ2xvdWRmbGFyZVdvcmtlciwgaXNFbGVjdHJvbiwgaXNFbXB0eSwgaXNJRSwgaXNJbmRleGVkREJBdmFpbGFibGUsIGlzTW9iaWxlQ29yZG92YSwgaXNOb2RlLCBpc05vZGVTZGssIGlzUmVhY3ROYXRpdmUsIGlzU2FmYXJpLCBpc1NhZmFyaU9yV2Via2l0LCBpc1VXUCwgaXNWYWxpZEZvcm1hdCwgaXNWYWxpZFRpbWVzdGFtcCwgaXNXZWJXb3JrZXIsIGlzc3VlZEF0VGltZSwganNvbkV2YWwsIG1hcCwgb3JkaW5hbCwgcGluZ1NlcnZlciwgcHJvbWlzZVdpdGhUaW1lb3V0LCBxdWVyeXN0cmluZywgcXVlcnlzdHJpbmdEZWNvZGUsIHNhZmVHZXQsIHN0cmluZ0xlbmd0aCwgc3RyaW5nVG9CeXRlQXJyYXksIHN0cmluZ2lmeSwgdXBkYXRlRW11bGF0b3JCYW5uZXIsIHZhbGlkYXRlQXJnQ291bnQsIHZhbGlkYXRlQ2FsbGJhY2ssIHZhbGlkYXRlQ29udGV4dE9iamVjdCwgdmFsaWRhdGVJbmRleGVkREJPcGVuYWJsZSwgdmFsaWRhdGVOYW1lc3BhY2UgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbS5qcy5tYXBcbiIsImltcG9ydCB7IERlZmVycmVkIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuXG4vKipcbiAqIENvbXBvbmVudCBmb3Igc2VydmljZSBuYW1lIFQsIGUuZy4gYGF1dGhgLCBgYXV0aC1pbnRlcm5hbGBcbiAqL1xuY2xhc3MgQ29tcG9uZW50IHtcbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBwdWJsaWMgc2VydmljZSBuYW1lLCBlLmcuIGFwcCwgYXV0aCwgZmlyZXN0b3JlLCBkYXRhYmFzZVxuICAgICAqIEBwYXJhbSBpbnN0YW5jZUZhY3RvcnkgU2VydmljZSBmYWN0b3J5IHJlc3BvbnNpYmxlIGZvciBjcmVhdGluZyB0aGUgcHVibGljIGludGVyZmFjZVxuICAgICAqIEBwYXJhbSB0eXBlIHdoZXRoZXIgdGhlIHNlcnZpY2UgcHJvdmlkZWQgYnkgdGhlIGNvbXBvbmVudCBpcyBwdWJsaWMgb3IgcHJpdmF0ZVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKG5hbWUsIGluc3RhbmNlRmFjdG9yeSwgdHlwZSkge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLmluc3RhbmNlRmFjdG9yeSA9IGluc3RhbmNlRmFjdG9yeTtcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy5tdWx0aXBsZUluc3RhbmNlcyA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogUHJvcGVydGllcyB0byBiZSBhZGRlZCB0byB0aGUgc2VydmljZSBuYW1lc3BhY2VcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2VydmljZVByb3BzID0ge307XG4gICAgICAgIHRoaXMuaW5zdGFudGlhdGlvbk1vZGUgPSBcIkxBWllcIiAvKiBJbnN0YW50aWF0aW9uTW9kZS5MQVpZICovO1xuICAgICAgICB0aGlzLm9uSW5zdGFuY2VDcmVhdGVkID0gbnVsbDtcbiAgICB9XG4gICAgc2V0SW5zdGFudGlhdGlvbk1vZGUobW9kZSkge1xuICAgICAgICB0aGlzLmluc3RhbnRpYXRpb25Nb2RlID0gbW9kZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHNldE11bHRpcGxlSW5zdGFuY2VzKG11bHRpcGxlSW5zdGFuY2VzKSB7XG4gICAgICAgIHRoaXMubXVsdGlwbGVJbnN0YW5jZXMgPSBtdWx0aXBsZUluc3RhbmNlcztcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHNldFNlcnZpY2VQcm9wcyhwcm9wcykge1xuICAgICAgICB0aGlzLnNlcnZpY2VQcm9wcyA9IHByb3BzO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgc2V0SW5zdGFuY2VDcmVhdGVkQ2FsbGJhY2soY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5vbkluc3RhbmNlQ3JlYXRlZCA9IGNhbGxiYWNrO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jb25zdCBERUZBVUxUX0VOVFJZX05BTUUgPSAnW0RFRkFVTFRdJztcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUHJvdmlkZXIgZm9yIGluc3RhbmNlIGZvciBzZXJ2aWNlIG5hbWUgVCwgZS5nLiAnYXV0aCcsICdhdXRoLWludGVybmFsJ1xuICogTmFtZVNlcnZpY2VNYXBwaW5nW1RdIGlzIGFuIGFsaWFzIGZvciB0aGUgdHlwZSBvZiB0aGUgaW5zdGFuY2VcbiAqL1xuY2xhc3MgUHJvdmlkZXIge1xuICAgIGNvbnN0cnVjdG9yKG5hbWUsIGNvbnRhaW5lcikge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICAgICAgdGhpcy5jb21wb25lbnQgPSBudWxsO1xuICAgICAgICB0aGlzLmluc3RhbmNlcyA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZCA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5pbnN0YW5jZXNPcHRpb25zID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLm9uSW5pdENhbGxiYWNrcyA9IG5ldyBNYXAoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGlkZW50aWZpZXIgQSBwcm92aWRlciBjYW4gcHJvdmlkZSBtdWx0aXBsZSBpbnN0YW5jZXMgb2YgYSBzZXJ2aWNlXG4gICAgICogaWYgdGhpcy5jb21wb25lbnQubXVsdGlwbGVJbnN0YW5jZXMgaXMgdHJ1ZS5cbiAgICAgKi9cbiAgICBnZXQoaWRlbnRpZmllcikge1xuICAgICAgICAvLyBpZiBtdWx0aXBsZUluc3RhbmNlcyBpcyBub3Qgc3VwcG9ydGVkLCB1c2UgdGhlIGRlZmF1bHQgbmFtZVxuICAgICAgICBjb25zdCBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xuICAgICAgICBpZiAoIXRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuaGFzKG5vcm1hbGl6ZWRJZGVudGlmaWVyKSkge1xuICAgICAgICAgICAgY29uc3QgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuc2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyLCBkZWZlcnJlZCk7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0luaXRpYWxpemVkKG5vcm1hbGl6ZWRJZGVudGlmaWVyKSB8fFxuICAgICAgICAgICAgICAgIHRoaXMuc2hvdWxkQXV0b0luaXRpYWxpemUoKSkge1xuICAgICAgICAgICAgICAgIC8vIGluaXRpYWxpemUgdGhlIHNlcnZpY2UgaWYgaXQgY2FuIGJlIGF1dG8taW5pdGlhbGl6ZWRcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZWRJZGVudGlmaWVyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoaW5zdGFuY2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHdoZW4gdGhlIGluc3RhbmNlIGZhY3RvcnkgdGhyb3dzIGFuIGV4Y2VwdGlvbiBkdXJpbmcgZ2V0KCksIGl0IHNob3VsZCBub3QgY2F1c2VcbiAgICAgICAgICAgICAgICAgICAgLy8gYSBmYXRhbCBlcnJvci4gV2UganVzdCByZXR1cm4gdGhlIHVucmVzb2x2ZWQgcHJvbWlzZSBpbiB0aGlzIGNhc2UuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlc0RlZmVycmVkLmdldChub3JtYWxpemVkSWRlbnRpZmllcikucHJvbWlzZTtcbiAgICB9XG4gICAgZ2V0SW1tZWRpYXRlKG9wdGlvbnMpIHtcbiAgICAgICAgLy8gaWYgbXVsdGlwbGVJbnN0YW5jZXMgaXMgbm90IHN1cHBvcnRlZCwgdXNlIHRoZSBkZWZhdWx0IG5hbWVcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihvcHRpb25zPy5pZGVudGlmaWVyKTtcbiAgICAgICAgY29uc3Qgb3B0aW9uYWwgPSBvcHRpb25zPy5vcHRpb25hbCA/PyBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZChub3JtYWxpemVkSWRlbnRpZmllcikgfHxcbiAgICAgICAgICAgIHRoaXMuc2hvdWxkQXV0b0luaXRpYWxpemUoKSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHtcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVkSWRlbnRpZmllclxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9uYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIEluIGNhc2UgYSBjb21wb25lbnQgaXMgbm90IGluaXRpYWxpemVkIGFuZCBzaG91bGQvY2Fubm90IGJlIGF1dG8taW5pdGlhbGl6ZWQgYXQgdGhlIG1vbWVudCwgcmV0dXJuIG51bGwgaWYgdGhlIG9wdGlvbmFsIGZsYWcgaXMgc2V0LCBvciB0aHJvd1xuICAgICAgICAgICAgaWYgKG9wdGlvbmFsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihgU2VydmljZSAke3RoaXMubmFtZX0gaXMgbm90IGF2YWlsYWJsZWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGdldENvbXBvbmVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50O1xuICAgIH1cbiAgICBzZXRDb21wb25lbnQoY29tcG9uZW50KSB7XG4gICAgICAgIGlmIChjb21wb25lbnQubmFtZSAhPT0gdGhpcy5uYW1lKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgTWlzbWF0Y2hpbmcgQ29tcG9uZW50ICR7Y29tcG9uZW50Lm5hbWV9IGZvciBQcm92aWRlciAke3RoaXMubmFtZX0uYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY29tcG9uZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgQ29tcG9uZW50IGZvciAke3RoaXMubmFtZX0gaGFzIGFscmVhZHkgYmVlbiBwcm92aWRlZGApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29tcG9uZW50ID0gY29tcG9uZW50O1xuICAgICAgICAvLyByZXR1cm4gZWFybHkgd2l0aG91dCBhdHRlbXB0aW5nIHRvIGluaXRpYWxpemUgdGhlIGNvbXBvbmVudCBpZiB0aGUgY29tcG9uZW50IHJlcXVpcmVzIGV4cGxpY2l0IGluaXRpYWxpemF0aW9uIChjYWxsaW5nIGBQcm92aWRlci5pbml0aWFsaXplKClgKVxuICAgICAgICBpZiAoIXRoaXMuc2hvdWxkQXV0b0luaXRpYWxpemUoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIGlmIHRoZSBzZXJ2aWNlIGlzIGVhZ2VyLCBpbml0aWFsaXplIHRoZSBkZWZhdWx0IGluc3RhbmNlXG4gICAgICAgIGlmIChpc0NvbXBvbmVudEVhZ2VyKGNvbXBvbmVudCkpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHsgaW5zdGFuY2VJZGVudGlmaWVyOiBERUZBVUxUX0VOVFJZX05BTUUgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIC8vIHdoZW4gdGhlIGluc3RhbmNlIGZhY3RvcnkgZm9yIGFuIGVhZ2VyIENvbXBvbmVudCB0aHJvd3MgYW4gZXhjZXB0aW9uIGR1cmluZyB0aGUgZWFnZXJcbiAgICAgICAgICAgICAgICAvLyBpbml0aWFsaXphdGlvbiwgaXQgc2hvdWxkIG5vdCBjYXVzZSBhIGZhdGFsIGVycm9yLlxuICAgICAgICAgICAgICAgIC8vIFRPRE86IEludmVzdGlnYXRlIGlmIHdlIG5lZWQgdG8gbWFrZSBpdCBjb25maWd1cmFibGUsIGJlY2F1c2Ugc29tZSBjb21wb25lbnQgbWF5IHdhbnQgdG8gY2F1c2VcbiAgICAgICAgICAgICAgICAvLyBhIGZhdGFsIGVycm9yIGluIHRoaXMgY2FzZT9cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBDcmVhdGUgc2VydmljZSBpbnN0YW5jZXMgZm9yIHRoZSBwZW5kaW5nIHByb21pc2VzIGFuZCByZXNvbHZlIHRoZW1cbiAgICAgICAgLy8gTk9URTogaWYgdGhpcy5tdWx0aXBsZUluc3RhbmNlcyBpcyBmYWxzZSwgb25seSB0aGUgZGVmYXVsdCBpbnN0YW5jZSB3aWxsIGJlIGNyZWF0ZWRcbiAgICAgICAgLy8gYW5kIGFsbCBwcm9taXNlcyB3aXRoIHJlc29sdmUgd2l0aCBpdCByZWdhcmRsZXNzIG9mIHRoZSBpZGVudGlmaWVyLlxuICAgICAgICBmb3IgKGNvbnN0IFtpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlRGVmZXJyZWRdIG9mIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZW50cmllcygpKSB7XG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGluc3RhbmNlSWRlbnRpZmllcik7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vIGBnZXRPckluaXRpYWxpemVTZXJ2aWNlKClgIHNob3VsZCBhbHdheXMgcmV0dXJuIGEgdmFsaWQgaW5zdGFuY2Ugc2luY2UgYSBjb21wb25lbnQgaXMgZ3VhcmFudGVlZC4gdXNlICEgdG8gbWFrZSB0eXBlc2NyaXB0IGhhcHB5LlxuICAgICAgICAgICAgICAgIGNvbnN0IGluc3RhbmNlID0gdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHtcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVkSWRlbnRpZmllclxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGluc3RhbmNlRGVmZXJyZWQucmVzb2x2ZShpbnN0YW5jZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIC8vIHdoZW4gdGhlIGluc3RhbmNlIGZhY3RvcnkgdGhyb3dzIGFuIGV4Y2VwdGlvbiwgaXQgc2hvdWxkIG5vdCBjYXVzZVxuICAgICAgICAgICAgICAgIC8vIGEgZmF0YWwgZXJyb3IuIFdlIGp1c3QgbGVhdmUgdGhlIHByb21pc2UgdW5yZXNvbHZlZC5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjbGVhckluc3RhbmNlKGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcbiAgICAgICAgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5kZWxldGUoaWRlbnRpZmllcik7XG4gICAgICAgIHRoaXMuaW5zdGFuY2VzT3B0aW9ucy5kZWxldGUoaWRlbnRpZmllcik7XG4gICAgICAgIHRoaXMuaW5zdGFuY2VzLmRlbGV0ZShpZGVudGlmaWVyKTtcbiAgICB9XG4gICAgLy8gYXBwLmRlbGV0ZSgpIHdpbGwgY2FsbCB0aGlzIG1ldGhvZCBvbiBldmVyeSBwcm92aWRlciB0byBkZWxldGUgdGhlIHNlcnZpY2VzXG4gICAgLy8gVE9ETzogc2hvdWxkIHdlIG1hcmsgdGhlIHByb3ZpZGVyIGFzIGRlbGV0ZWQ/XG4gICAgYXN5bmMgZGVsZXRlKCkge1xuICAgICAgICBjb25zdCBzZXJ2aWNlcyA9IEFycmF5LmZyb20odGhpcy5pbnN0YW5jZXMudmFsdWVzKCkpO1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAuLi5zZXJ2aWNlc1xuICAgICAgICAgICAgICAgIC5maWx0ZXIoc2VydmljZSA9PiAnSU5URVJOQUwnIGluIHNlcnZpY2UpIC8vIGxlZ2FjeSBzZXJ2aWNlc1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgLm1hcChzZXJ2aWNlID0+IHNlcnZpY2UuSU5URVJOQUwuZGVsZXRlKCkpLFxuICAgICAgICAgICAgLi4uc2VydmljZXNcbiAgICAgICAgICAgICAgICAuZmlsdGVyKHNlcnZpY2UgPT4gJ19kZWxldGUnIGluIHNlcnZpY2UpIC8vIG1vZHVsYXJpemVkIHNlcnZpY2VzXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICAubWFwKHNlcnZpY2UgPT4gc2VydmljZS5fZGVsZXRlKCkpXG4gICAgICAgIF0pO1xuICAgIH1cbiAgICBpc0NvbXBvbmVudFNldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50ICE9IG51bGw7XG4gICAgfVxuICAgIGlzSW5pdGlhbGl6ZWQoaWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZXMuaGFzKGlkZW50aWZpZXIpO1xuICAgIH1cbiAgICBnZXRPcHRpb25zKGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VzT3B0aW9ucy5nZXQoaWRlbnRpZmllcikgfHwge307XG4gICAgfVxuICAgIGluaXRpYWxpemUob3B0cyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IHsgb3B0aW9ucyA9IHt9IH0gPSBvcHRzO1xuICAgICAgICBjb25zdCBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKG9wdHMuaW5zdGFuY2VJZGVudGlmaWVyKTtcbiAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZChub3JtYWxpemVkSWRlbnRpZmllcikpIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKGAke3RoaXMubmFtZX0oJHtub3JtYWxpemVkSWRlbnRpZmllcn0pIGhhcyBhbHJlYWR5IGJlZW4gaW5pdGlhbGl6ZWRgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuaXNDb21wb25lbnRTZXQoKSkge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYENvbXBvbmVudCAke3RoaXMubmFtZX0gaGFzIG5vdCBiZWVuIHJlZ2lzdGVyZWQgeWV0YCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaW5zdGFuY2UgPSB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uoe1xuICAgICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVkSWRlbnRpZmllcixcbiAgICAgICAgICAgIG9wdGlvbnNcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIHJlc29sdmUgYW55IHBlbmRpbmcgcHJvbWlzZSB3YWl0aW5nIGZvciB0aGUgc2VydmljZSBpbnN0YW5jZVxuICAgICAgICBmb3IgKGNvbnN0IFtpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlRGVmZXJyZWRdIG9mIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZW50cmllcygpKSB7XG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkRGVmZXJyZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaW5zdGFuY2VJZGVudGlmaWVyKTtcbiAgICAgICAgICAgIGlmIChub3JtYWxpemVkSWRlbnRpZmllciA9PT0gbm9ybWFsaXplZERlZmVycmVkSWRlbnRpZmllcikge1xuICAgICAgICAgICAgICAgIGluc3RhbmNlRGVmZXJyZWQucmVzb2x2ZShpbnN0YW5jZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluc3RhbmNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSBjYWxsYmFjayAtIGEgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGludm9rZWQgIGFmdGVyIHRoZSBwcm92aWRlciBoYXMgYmVlbiBpbml0aWFsaXplZCBieSBjYWxsaW5nIHByb3ZpZGVyLmluaXRpYWxpemUoKS5cbiAgICAgKiBUaGUgZnVuY3Rpb24gaXMgaW52b2tlZCBTWU5DSFJPTk9VU0xZLCBzbyBpdCBzaG91bGQgbm90IGV4ZWN1dGUgYW55IGxvbmdydW5uaW5nIHRhc2tzIGluIG9yZGVyIHRvIG5vdCBibG9jayB0aGUgcHJvZ3JhbS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpZGVudGlmaWVyIEFuIG9wdGlvbmFsIGluc3RhbmNlIGlkZW50aWZpZXJcbiAgICAgKiBAcmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVucmVnaXN0ZXIgdGhlIGNhbGxiYWNrXG4gICAgICovXG4gICAgb25Jbml0KGNhbGxiYWNrLCBpZGVudGlmaWVyKSB7XG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nQ2FsbGJhY2tzID0gdGhpcy5vbkluaXRDYWxsYmFja3MuZ2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyKSA/P1xuICAgICAgICAgICAgbmV3IFNldCgpO1xuICAgICAgICBleGlzdGluZ0NhbGxiYWNrcy5hZGQoY2FsbGJhY2spO1xuICAgICAgICB0aGlzLm9uSW5pdENhbGxiYWNrcy5zZXQobm9ybWFsaXplZElkZW50aWZpZXIsIGV4aXN0aW5nQ2FsbGJhY2tzKTtcbiAgICAgICAgY29uc3QgZXhpc3RpbmdJbnN0YW5jZSA9IHRoaXMuaW5zdGFuY2VzLmdldChub3JtYWxpemVkSWRlbnRpZmllcik7XG4gICAgICAgIGlmIChleGlzdGluZ0luc3RhbmNlKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhleGlzdGluZ0luc3RhbmNlLCBub3JtYWxpemVkSWRlbnRpZmllcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIGV4aXN0aW5nQ2FsbGJhY2tzLmRlbGV0ZShjYWxsYmFjayk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEludm9rZSBvbkluaXQgY2FsbGJhY2tzIHN5bmNocm9ub3VzbHlcbiAgICAgKiBAcGFyYW0gaW5zdGFuY2UgdGhlIHNlcnZpY2UgaW5zdGFuY2VgXG4gICAgICovXG4gICAgaW52b2tlT25Jbml0Q2FsbGJhY2tzKGluc3RhbmNlLCBpZGVudGlmaWVyKSB7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrcyA9IHRoaXMub25Jbml0Q2FsbGJhY2tzLmdldChpZGVudGlmaWVyKTtcbiAgICAgICAgaWYgKCFjYWxsYmFja3MpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGNhbGxiYWNrIG9mIGNhbGxiYWNrcykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhpbnN0YW5jZSwgaWRlbnRpZmllcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICAgICAgLy8gaWdub3JlIGVycm9ycyBpbiB0aGUgb25Jbml0IGNhbGxiYWNrXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0T3JJbml0aWFsaXplU2VydmljZSh7IGluc3RhbmNlSWRlbnRpZmllciwgb3B0aW9ucyA9IHt9IH0pIHtcbiAgICAgICAgbGV0IGluc3RhbmNlID0gdGhpcy5pbnN0YW5jZXMuZ2V0KGluc3RhbmNlSWRlbnRpZmllcik7XG4gICAgICAgIGlmICghaW5zdGFuY2UgJiYgdGhpcy5jb21wb25lbnQpIHtcbiAgICAgICAgICAgIGluc3RhbmNlID0gdGhpcy5jb21wb25lbnQuaW5zdGFuY2VGYWN0b3J5KHRoaXMuY29udGFpbmVyLCB7XG4gICAgICAgICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVJZGVudGlmaWVyRm9yRmFjdG9yeShpbnN0YW5jZUlkZW50aWZpZXIpLFxuICAgICAgICAgICAgICAgIG9wdGlvbnNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXMuc2V0KGluc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2UpO1xuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXNPcHRpb25zLnNldChpbnN0YW5jZUlkZW50aWZpZXIsIG9wdGlvbnMpO1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBJbnZva2Ugb25Jbml0IGxpc3RlbmVycy5cbiAgICAgICAgICAgICAqIE5vdGUgdGhpcy5jb21wb25lbnQub25JbnN0YW5jZUNyZWF0ZWQgaXMgZGlmZmVyZW50LCB3aGljaCBpcyB1c2VkIGJ5IHRoZSBjb21wb25lbnQgY3JlYXRvcixcbiAgICAgICAgICAgICAqIHdoaWxlIG9uSW5pdCBsaXN0ZW5lcnMgYXJlIHJlZ2lzdGVyZWQgYnkgY29uc3VtZXJzIG9mIHRoZSBwcm92aWRlci5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdGhpcy5pbnZva2VPbkluaXRDYWxsYmFja3MoaW5zdGFuY2UsIGluc3RhbmNlSWRlbnRpZmllcik7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIE9yZGVyIGlzIGltcG9ydGFudFxuICAgICAgICAgICAgICogb25JbnN0YW5jZUNyZWF0ZWQoKSBzaG91bGQgYmUgY2FsbGVkIGFmdGVyIHRoaXMuaW5zdGFuY2VzLnNldChpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlKTsgd2hpY2hcbiAgICAgICAgICAgICAqIG1ha2VzIGBpc0luaXRpYWxpemVkKClgIHJldHVybiB0cnVlLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBpZiAodGhpcy5jb21wb25lbnQub25JbnN0YW5jZUNyZWF0ZWQpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5vbkluc3RhbmNlQ3JlYXRlZCh0aGlzLmNvbnRhaW5lciwgaW5zdGFuY2VJZGVudGlmaWVyLCBpbnN0YW5jZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWdub3JlIGVycm9ycyBpbiB0aGUgb25JbnN0YW5jZUNyZWF0ZWRDYWxsYmFja1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5zdGFuY2UgfHwgbnVsbDtcbiAgICB9XG4gICAgbm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcbiAgICAgICAgaWYgKHRoaXMuY29tcG9uZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnQubXVsdGlwbGVJbnN0YW5jZXMgPyBpZGVudGlmaWVyIDogREVGQVVMVF9FTlRSWV9OQU1FO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGlkZW50aWZpZXI7IC8vIGFzc3VtZSBtdWx0aXBsZSBpbnN0YW5jZXMgYXJlIHN1cHBvcnRlZCBiZWZvcmUgdGhlIGNvbXBvbmVudCBpcyBwcm92aWRlZC5cbiAgICAgICAgfVxuICAgIH1cbiAgICBzaG91bGRBdXRvSW5pdGlhbGl6ZSgpIHtcbiAgICAgICAgcmV0dXJuICghIXRoaXMuY29tcG9uZW50ICYmXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5pbnN0YW50aWF0aW9uTW9kZSAhPT0gXCJFWFBMSUNJVFwiIC8qIEluc3RhbnRpYXRpb25Nb2RlLkVYUExJQ0lUICovKTtcbiAgICB9XG59XG4vLyB1bmRlZmluZWQgc2hvdWxkIGJlIHBhc3NlZCB0byB0aGUgc2VydmljZSBmYWN0b3J5IGZvciB0aGUgZGVmYXVsdCBpbnN0YW5jZVxuZnVuY3Rpb24gbm9ybWFsaXplSWRlbnRpZmllckZvckZhY3RvcnkoaWRlbnRpZmllcikge1xuICAgIHJldHVybiBpZGVudGlmaWVyID09PSBERUZBVUxUX0VOVFJZX05BTUUgPyB1bmRlZmluZWQgOiBpZGVudGlmaWVyO1xufVxuZnVuY3Rpb24gaXNDb21wb25lbnRFYWdlcihjb21wb25lbnQpIHtcbiAgICByZXR1cm4gY29tcG9uZW50Lmluc3RhbnRpYXRpb25Nb2RlID09PSBcIkVBR0VSXCIgLyogSW5zdGFudGlhdGlvbk1vZGUuRUFHRVIgKi87XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIENvbXBvbmVudENvbnRhaW5lciB0aGF0IHByb3ZpZGVzIFByb3ZpZGVycyBmb3Igc2VydmljZSBuYW1lIFQsIGUuZy4gYGF1dGhgLCBgYXV0aC1pbnRlcm5hbGBcbiAqL1xuY2xhc3MgQ29tcG9uZW50Q29udGFpbmVyIHtcbiAgICBjb25zdHJ1Y3RvcihuYW1lKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMucHJvdmlkZXJzID0gbmV3IE1hcCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb21wb25lbnQgQ29tcG9uZW50IGJlaW5nIGFkZGVkXG4gICAgICogQHBhcmFtIG92ZXJ3cml0ZSBXaGVuIGEgY29tcG9uZW50IHdpdGggdGhlIHNhbWUgbmFtZSBoYXMgYWxyZWFkeSBiZWVuIHJlZ2lzdGVyZWQsXG4gICAgICogaWYgb3ZlcndyaXRlIGlzIHRydWU6IG92ZXJ3cml0ZSB0aGUgZXhpc3RpbmcgY29tcG9uZW50IHdpdGggdGhlIG5ldyBjb21wb25lbnQgYW5kIGNyZWF0ZSBhIG5ld1xuICAgICAqIHByb3ZpZGVyIHdpdGggdGhlIG5ldyBjb21wb25lbnQuIEl0IGNhbiBiZSB1c2VmdWwgaW4gdGVzdHMgd2hlcmUgeW91IHdhbnQgdG8gdXNlIGRpZmZlcmVudCBtb2Nrc1xuICAgICAqIGZvciBkaWZmZXJlbnQgdGVzdHMuXG4gICAgICogaWYgb3ZlcndyaXRlIGlzIGZhbHNlOiB0aHJvdyBhbiBleGNlcHRpb25cbiAgICAgKi9cbiAgICBhZGRDb21wb25lbnQoY29tcG9uZW50KSB7XG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gdGhpcy5nZXRQcm92aWRlcihjb21wb25lbnQubmFtZSk7XG4gICAgICAgIGlmIChwcm92aWRlci5pc0NvbXBvbmVudFNldCgpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENvbXBvbmVudCAke2NvbXBvbmVudC5uYW1lfSBoYXMgYWxyZWFkeSBiZWVuIHJlZ2lzdGVyZWQgd2l0aCAke3RoaXMubmFtZX1gKTtcbiAgICAgICAgfVxuICAgICAgICBwcm92aWRlci5zZXRDb21wb25lbnQoY29tcG9uZW50KTtcbiAgICB9XG4gICAgYWRkT3JPdmVyd3JpdGVDb21wb25lbnQoY29tcG9uZW50KSB7XG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gdGhpcy5nZXRQcm92aWRlcihjb21wb25lbnQubmFtZSk7XG4gICAgICAgIGlmIChwcm92aWRlci5pc0NvbXBvbmVudFNldCgpKSB7XG4gICAgICAgICAgICAvLyBkZWxldGUgdGhlIGV4aXN0aW5nIHByb3ZpZGVyIGZyb20gdGhlIGNvbnRhaW5lciwgc28gd2UgY2FuIHJlZ2lzdGVyIHRoZSBuZXcgY29tcG9uZW50XG4gICAgICAgICAgICB0aGlzLnByb3ZpZGVycy5kZWxldGUoY29tcG9uZW50Lm5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWRkQ29tcG9uZW50KGNvbXBvbmVudCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGdldFByb3ZpZGVyIHByb3ZpZGVzIGEgdHlwZSBzYWZlIGludGVyZmFjZSB3aGVyZSBpdCBjYW4gb25seSBiZSBjYWxsZWQgd2l0aCBhIGZpZWxkIG5hbWVcbiAgICAgKiBwcmVzZW50IGluIE5hbWVTZXJ2aWNlTWFwcGluZyBpbnRlcmZhY2UuXG4gICAgICpcbiAgICAgKiBGaXJlYmFzZSBTREtzIHByb3ZpZGluZyBzZXJ2aWNlcyBzaG91bGQgZXh0ZW5kIE5hbWVTZXJ2aWNlTWFwcGluZyBpbnRlcmZhY2UgdG8gcmVnaXN0ZXJcbiAgICAgKiB0aGVtc2VsdmVzLlxuICAgICAqL1xuICAgIGdldFByb3ZpZGVyKG5hbWUpIHtcbiAgICAgICAgaWYgKHRoaXMucHJvdmlkZXJzLmhhcyhuYW1lKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvdmlkZXJzLmdldChuYW1lKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBjcmVhdGUgYSBQcm92aWRlciBmb3IgYSBzZXJ2aWNlIHRoYXQgaGFzbid0IHJlZ2lzdGVyZWQgd2l0aCBGaXJlYmFzZVxuICAgICAgICBjb25zdCBwcm92aWRlciA9IG5ldyBQcm92aWRlcihuYW1lLCB0aGlzKTtcbiAgICAgICAgdGhpcy5wcm92aWRlcnMuc2V0KG5hbWUsIHByb3ZpZGVyKTtcbiAgICAgICAgcmV0dXJuIHByb3ZpZGVyO1xuICAgIH1cbiAgICBnZXRQcm92aWRlcnMoKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMucHJvdmlkZXJzLnZhbHVlcygpKTtcbiAgICB9XG59XG5cbmV4cG9ydCB7IENvbXBvbmVudCwgQ29tcG9uZW50Q29udGFpbmVyLCBQcm92aWRlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtLmpzLm1hcFxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBjb250YWluZXIgZm9yIGFsbCBvZiB0aGUgTG9nZ2VyIGluc3RhbmNlc1xuICovXG5jb25zdCBpbnN0YW5jZXMgPSBbXTtcbi8qKlxuICogVGhlIEpTIFNESyBzdXBwb3J0cyA1IGxvZyBsZXZlbHMgYW5kIGFsc28gYWxsb3dzIGEgdXNlciB0aGUgYWJpbGl0eSB0b1xuICogc2lsZW5jZSB0aGUgbG9ncyBhbHRvZ2V0aGVyLlxuICpcbiAqIFRoZSBvcmRlciBpcyBhIGZvbGxvd3M6XG4gKiBERUJVRyA8IFZFUkJPU0UgPCBJTkZPIDwgV0FSTiA8IEVSUk9SXG4gKlxuICogQWxsIG9mIHRoZSBsb2cgdHlwZXMgYWJvdmUgdGhlIGN1cnJlbnQgbG9nIGxldmVsIHdpbGwgYmUgY2FwdHVyZWQgKGkuZS4gaWZcbiAqIHlvdSBzZXQgdGhlIGxvZyBsZXZlbCB0byBgSU5GT2AsIGVycm9ycyB3aWxsIHN0aWxsIGJlIGxvZ2dlZCwgYnV0IGBERUJVR2AgYW5kXG4gKiBgVkVSQk9TRWAgbG9ncyB3aWxsIG5vdClcbiAqL1xudmFyIExvZ0xldmVsO1xuKGZ1bmN0aW9uIChMb2dMZXZlbCkge1xuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiREVCVUdcIl0gPSAwXSA9IFwiREVCVUdcIjtcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIlZFUkJPU0VcIl0gPSAxXSA9IFwiVkVSQk9TRVwiO1xuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiSU5GT1wiXSA9IDJdID0gXCJJTkZPXCI7XG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJXQVJOXCJdID0gM10gPSBcIldBUk5cIjtcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIkVSUk9SXCJdID0gNF0gPSBcIkVSUk9SXCI7XG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJTSUxFTlRcIl0gPSA1XSA9IFwiU0lMRU5UXCI7XG59KShMb2dMZXZlbCB8fCAoTG9nTGV2ZWwgPSB7fSkpO1xuY29uc3QgbGV2ZWxTdHJpbmdUb0VudW0gPSB7XG4gICAgJ2RlYnVnJzogTG9nTGV2ZWwuREVCVUcsXG4gICAgJ3ZlcmJvc2UnOiBMb2dMZXZlbC5WRVJCT1NFLFxuICAgICdpbmZvJzogTG9nTGV2ZWwuSU5GTyxcbiAgICAnd2Fybic6IExvZ0xldmVsLldBUk4sXG4gICAgJ2Vycm9yJzogTG9nTGV2ZWwuRVJST1IsXG4gICAgJ3NpbGVudCc6IExvZ0xldmVsLlNJTEVOVFxufTtcbi8qKlxuICogVGhlIGRlZmF1bHQgbG9nIGxldmVsXG4gKi9cbmNvbnN0IGRlZmF1bHRMb2dMZXZlbCA9IExvZ0xldmVsLklORk87XG4vKipcbiAqIEJ5IGRlZmF1bHQsIGBjb25zb2xlLmRlYnVnYCBpcyBub3QgZGlzcGxheWVkIGluIHRoZSBkZXZlbG9wZXIgY29uc29sZSAoaW5cbiAqIGNocm9tZSkuIFRvIGF2b2lkIGZvcmNpbmcgdXNlcnMgdG8gaGF2ZSB0byBvcHQtaW4gdG8gdGhlc2UgbG9ncyB0d2ljZVxuICogKGkuZS4gb25jZSBmb3IgZmlyZWJhc2UsIGFuZCBvbmNlIGluIHRoZSBjb25zb2xlKSwgd2UgYXJlIHNlbmRpbmcgYERFQlVHYFxuICogbG9ncyB0byB0aGUgYGNvbnNvbGUubG9nYCBmdW5jdGlvbi5cbiAqL1xuY29uc3QgQ29uc29sZU1ldGhvZCA9IHtcbiAgICBbTG9nTGV2ZWwuREVCVUddOiAnbG9nJyxcbiAgICBbTG9nTGV2ZWwuVkVSQk9TRV06ICdsb2cnLFxuICAgIFtMb2dMZXZlbC5JTkZPXTogJ2luZm8nLFxuICAgIFtMb2dMZXZlbC5XQVJOXTogJ3dhcm4nLFxuICAgIFtMb2dMZXZlbC5FUlJPUl06ICdlcnJvcidcbn07XG4vKipcbiAqIFRoZSBkZWZhdWx0IGxvZyBoYW5kbGVyIHdpbGwgZm9yd2FyZCBERUJVRywgVkVSQk9TRSwgSU5GTywgV0FSTiwgYW5kIEVSUk9SXG4gKiBtZXNzYWdlcyBvbiB0byB0aGVpciBjb3JyZXNwb25kaW5nIGNvbnNvbGUgY291bnRlcnBhcnRzIChpZiB0aGUgbG9nIG1ldGhvZFxuICogaXMgc3VwcG9ydGVkIGJ5IHRoZSBjdXJyZW50IGxvZyBsZXZlbClcbiAqL1xuY29uc3QgZGVmYXVsdExvZ0hhbmRsZXIgPSAoaW5zdGFuY2UsIGxvZ1R5cGUsIC4uLmFyZ3MpID0+IHtcbiAgICBpZiAobG9nVHlwZSA8IGluc3RhbmNlLmxvZ0xldmVsKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgIGNvbnN0IG1ldGhvZCA9IENvbnNvbGVNZXRob2RbbG9nVHlwZV07XG4gICAgaWYgKG1ldGhvZCkge1xuICAgICAgICBjb25zb2xlW21ldGhvZF0oYFske25vd31dICAke2luc3RhbmNlLm5hbWV9OmAsIC4uLmFyZ3MpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBdHRlbXB0ZWQgdG8gbG9nIGEgbWVzc2FnZSB3aXRoIGFuIGludmFsaWQgbG9nVHlwZSAodmFsdWU6ICR7bG9nVHlwZX0pYCk7XG4gICAgfVxufTtcbmNsYXNzIExvZ2dlciB7XG4gICAgLyoqXG4gICAgICogR2l2ZXMgeW91IGFuIGluc3RhbmNlIG9mIGEgTG9nZ2VyIHRvIGNhcHR1cmUgbWVzc2FnZXMgYWNjb3JkaW5nIHRvXG4gICAgICogRmlyZWJhc2UncyBsb2dnaW5nIHNjaGVtZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIHRoYXQgdGhlIGxvZ3Mgd2lsbCBiZSBhc3NvY2lhdGVkIHdpdGhcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihuYW1lKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbG9nIGxldmVsIG9mIHRoZSBnaXZlbiBMb2dnZXIgaW5zdGFuY2UuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9sb2dMZXZlbCA9IGRlZmF1bHRMb2dMZXZlbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBtYWluIChpbnRlcm5hbCkgbG9nIGhhbmRsZXIgZm9yIHRoZSBMb2dnZXIgaW5zdGFuY2UuXG4gICAgICAgICAqIENhbiBiZSBzZXQgdG8gYSBuZXcgZnVuY3Rpb24gaW4gaW50ZXJuYWwgcGFja2FnZSBjb2RlIGJ1dCBub3QgYnkgdXNlci5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIgPSBkZWZhdWx0TG9nSGFuZGxlcjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBvcHRpb25hbCwgYWRkaXRpb25hbCwgdXNlci1kZWZpbmVkIGxvZyBoYW5kbGVyIGZvciB0aGUgTG9nZ2VyIGluc3RhbmNlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQ2FwdHVyZSB0aGUgY3VycmVudCBpbnN0YW5jZSBmb3IgbGF0ZXIgdXNlXG4gICAgICAgICAqL1xuICAgICAgICBpbnN0YW5jZXMucHVzaCh0aGlzKTtcbiAgICB9XG4gICAgZ2V0IGxvZ0xldmVsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbG9nTGV2ZWw7XG4gICAgfVxuICAgIHNldCBsb2dMZXZlbCh2YWwpIHtcbiAgICAgICAgaWYgKCEodmFsIGluIExvZ0xldmVsKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgSW52YWxpZCB2YWx1ZSBcIiR7dmFsfVwiIGFzc2lnbmVkIHRvIFxcYGxvZ0xldmVsXFxgYCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbG9nTGV2ZWwgPSB2YWw7XG4gICAgfVxuICAgIC8vIFdvcmthcm91bmQgZm9yIHNldHRlci9nZXR0ZXIgaGF2aW5nIHRvIGJlIHRoZSBzYW1lIHR5cGUuXG4gICAgc2V0TG9nTGV2ZWwodmFsKSB7XG4gICAgICAgIHRoaXMuX2xvZ0xldmVsID0gdHlwZW9mIHZhbCA9PT0gJ3N0cmluZycgPyBsZXZlbFN0cmluZ1RvRW51bVt2YWxdIDogdmFsO1xuICAgIH1cbiAgICBnZXQgbG9nSGFuZGxlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xvZ0hhbmRsZXI7XG4gICAgfVxuICAgIHNldCBsb2dIYW5kbGVyKHZhbCkge1xuICAgICAgICBpZiAodHlwZW9mIHZhbCAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgYXNzaWduZWQgdG8gYGxvZ0hhbmRsZXJgIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIgPSB2YWw7XG4gICAgfVxuICAgIGdldCB1c2VyTG9nSGFuZGxlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VzZXJMb2dIYW5kbGVyO1xuICAgIH1cbiAgICBzZXQgdXNlckxvZ0hhbmRsZXIodmFsKSB7XG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyID0gdmFsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgZnVuY3Rpb25zIGJlbG93IGFyZSBhbGwgYmFzZWQgb24gdGhlIGBjb25zb2xlYCBpbnRlcmZhY2VcbiAgICAgKi9cbiAgICBkZWJ1ZyguLi5hcmdzKSB7XG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmIHRoaXMuX3VzZXJMb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLkRFQlVHLCAuLi5hcmdzKTtcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5ERUJVRywgLi4uYXJncyk7XG4gICAgfVxuICAgIGxvZyguLi5hcmdzKSB7XG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmXG4gICAgICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5WRVJCT1NFLCAuLi5hcmdzKTtcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5WRVJCT1NFLCAuLi5hcmdzKTtcbiAgICB9XG4gICAgaW5mbyguLi5hcmdzKSB7XG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmIHRoaXMuX3VzZXJMb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLklORk8sIC4uLmFyZ3MpO1xuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLklORk8sIC4uLmFyZ3MpO1xuICAgIH1cbiAgICB3YXJuKC4uLmFyZ3MpIHtcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuV0FSTiwgLi4uYXJncyk7XG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuV0FSTiwgLi4uYXJncyk7XG4gICAgfVxuICAgIGVycm9yKC4uLmFyZ3MpIHtcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuRVJST1IsIC4uLmFyZ3MpO1xuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLkVSUk9SLCAuLi5hcmdzKTtcbiAgICB9XG59XG5mdW5jdGlvbiBzZXRMb2dMZXZlbChsZXZlbCkge1xuICAgIGluc3RhbmNlcy5mb3JFYWNoKGluc3QgPT4ge1xuICAgICAgICBpbnN0LnNldExvZ0xldmVsKGxldmVsKTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIHNldFVzZXJMb2dIYW5kbGVyKGxvZ0NhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgZm9yIChjb25zdCBpbnN0YW5jZSBvZiBpbnN0YW5jZXMpIHtcbiAgICAgICAgbGV0IGN1c3RvbUxvZ0xldmVsID0gbnVsbDtcbiAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5sZXZlbCkge1xuICAgICAgICAgICAgY3VzdG9tTG9nTGV2ZWwgPSBsZXZlbFN0cmluZ1RvRW51bVtvcHRpb25zLmxldmVsXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobG9nQ2FsbGJhY2sgPT09IG51bGwpIHtcbiAgICAgICAgICAgIGluc3RhbmNlLnVzZXJMb2dIYW5kbGVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGluc3RhbmNlLnVzZXJMb2dIYW5kbGVyID0gKGluc3RhbmNlLCBsZXZlbCwgLi4uYXJncykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhcmdzXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoYXJnID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZyA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgYXJnID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgYXJnID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgYXJnID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhcmcudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChhcmcgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZy5tZXNzYWdlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoYXJnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChpZ25vcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGFyZyA9PiBhcmcpXG4gICAgICAgICAgICAgICAgICAgIC5qb2luKCcgJyk7XG4gICAgICAgICAgICAgICAgaWYgKGxldmVsID49IChjdXN0b21Mb2dMZXZlbCA/PyBpbnN0YW5jZS5sb2dMZXZlbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nQ2FsbGJhY2soe1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV2ZWw6IExvZ0xldmVsW2xldmVsXS50b0xvd2VyQ2FzZSgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBpbnN0YW5jZS5uYW1lXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCB7IExvZ0xldmVsLCBMb2dnZXIsIHNldExvZ0xldmVsLCBzZXRVc2VyTG9nSGFuZGxlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtLmpzLm1hcFxuIiwiY29uc3QgaW5zdGFuY2VPZkFueSA9IChvYmplY3QsIGNvbnN0cnVjdG9ycykgPT4gY29uc3RydWN0b3JzLnNvbWUoKGMpID0+IG9iamVjdCBpbnN0YW5jZW9mIGMpO1xuXG5sZXQgaWRiUHJveHlhYmxlVHlwZXM7XG5sZXQgY3Vyc29yQWR2YW5jZU1ldGhvZHM7XG4vLyBUaGlzIGlzIGEgZnVuY3Rpb24gdG8gcHJldmVudCBpdCB0aHJvd2luZyB1cCBpbiBub2RlIGVudmlyb25tZW50cy5cbmZ1bmN0aW9uIGdldElkYlByb3h5YWJsZVR5cGVzKCkge1xuICAgIHJldHVybiAoaWRiUHJveHlhYmxlVHlwZXMgfHxcbiAgICAgICAgKGlkYlByb3h5YWJsZVR5cGVzID0gW1xuICAgICAgICAgICAgSURCRGF0YWJhc2UsXG4gICAgICAgICAgICBJREJPYmplY3RTdG9yZSxcbiAgICAgICAgICAgIElEQkluZGV4LFxuICAgICAgICAgICAgSURCQ3Vyc29yLFxuICAgICAgICAgICAgSURCVHJhbnNhY3Rpb24sXG4gICAgICAgIF0pKTtcbn1cbi8vIFRoaXMgaXMgYSBmdW5jdGlvbiB0byBwcmV2ZW50IGl0IHRocm93aW5nIHVwIGluIG5vZGUgZW52aXJvbm1lbnRzLlxuZnVuY3Rpb24gZ2V0Q3Vyc29yQWR2YW5jZU1ldGhvZHMoKSB7XG4gICAgcmV0dXJuIChjdXJzb3JBZHZhbmNlTWV0aG9kcyB8fFxuICAgICAgICAoY3Vyc29yQWR2YW5jZU1ldGhvZHMgPSBbXG4gICAgICAgICAgICBJREJDdXJzb3IucHJvdG90eXBlLmFkdmFuY2UsXG4gICAgICAgICAgICBJREJDdXJzb3IucHJvdG90eXBlLmNvbnRpbnVlLFxuICAgICAgICAgICAgSURCQ3Vyc29yLnByb3RvdHlwZS5jb250aW51ZVByaW1hcnlLZXksXG4gICAgICAgIF0pKTtcbn1cbmNvbnN0IGN1cnNvclJlcXVlc3RNYXAgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgdHJhbnNhY3Rpb25Eb25lTWFwID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHRyYW5zYWN0aW9uU3RvcmVOYW1lc01hcCA9IG5ldyBXZWFrTWFwKCk7XG5jb25zdCB0cmFuc2Zvcm1DYWNoZSA9IG5ldyBXZWFrTWFwKCk7XG5jb25zdCByZXZlcnNlVHJhbnNmb3JtQ2FjaGUgPSBuZXcgV2Vha01hcCgpO1xuZnVuY3Rpb24gcHJvbWlzaWZ5UmVxdWVzdChyZXF1ZXN0KSB7XG4gICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29uc3QgdW5saXN0ZW4gPSAoKSA9PiB7XG4gICAgICAgICAgICByZXF1ZXN0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3N1Y2Nlc3MnLCBzdWNjZXNzKTtcbiAgICAgICAgICAgIHJlcXVlc3QucmVtb3ZlRXZlbnRMaXN0ZW5lcignZXJyb3InLCBlcnJvcik7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHN1Y2Nlc3MgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXNvbHZlKHdyYXAocmVxdWVzdC5yZXN1bHQpKTtcbiAgICAgICAgICAgIHVubGlzdGVuKCk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGVycm9yID0gKCkgPT4ge1xuICAgICAgICAgICAgcmVqZWN0KHJlcXVlc3QuZXJyb3IpO1xuICAgICAgICAgICAgdW5saXN0ZW4oKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdzdWNjZXNzJywgc3VjY2Vzcyk7XG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBlcnJvcik7XG4gICAgfSk7XG4gICAgcHJvbWlzZVxuICAgICAgICAudGhlbigodmFsdWUpID0+IHtcbiAgICAgICAgLy8gU2luY2UgY3Vyc29yaW5nIHJldXNlcyB0aGUgSURCUmVxdWVzdCAoKnNpZ2gqKSwgd2UgY2FjaGUgaXQgZm9yIGxhdGVyIHJldHJpZXZhbFxuICAgICAgICAvLyAoc2VlIHdyYXBGdW5jdGlvbikuXG4gICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIElEQkN1cnNvcikge1xuICAgICAgICAgICAgY3Vyc29yUmVxdWVzdE1hcC5zZXQodmFsdWUsIHJlcXVlc3QpO1xuICAgICAgICB9XG4gICAgICAgIC8vIENhdGNoaW5nIHRvIGF2b2lkIFwiVW5jYXVnaHQgUHJvbWlzZSBleGNlcHRpb25zXCJcbiAgICB9KVxuICAgICAgICAuY2F0Y2goKCkgPT4geyB9KTtcbiAgICAvLyBUaGlzIG1hcHBpbmcgZXhpc3RzIGluIHJldmVyc2VUcmFuc2Zvcm1DYWNoZSBidXQgZG9lc24ndCBkb2Vzbid0IGV4aXN0IGluIHRyYW5zZm9ybUNhY2hlLiBUaGlzXG4gICAgLy8gaXMgYmVjYXVzZSB3ZSBjcmVhdGUgbWFueSBwcm9taXNlcyBmcm9tIGEgc2luZ2xlIElEQlJlcXVlc3QuXG4gICAgcmV2ZXJzZVRyYW5zZm9ybUNhY2hlLnNldChwcm9taXNlLCByZXF1ZXN0KTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cbmZ1bmN0aW9uIGNhY2hlRG9uZVByb21pc2VGb3JUcmFuc2FjdGlvbih0eCkge1xuICAgIC8vIEVhcmx5IGJhaWwgaWYgd2UndmUgYWxyZWFkeSBjcmVhdGVkIGEgZG9uZSBwcm9taXNlIGZvciB0aGlzIHRyYW5zYWN0aW9uLlxuICAgIGlmICh0cmFuc2FjdGlvbkRvbmVNYXAuaGFzKHR4KSlcbiAgICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IGRvbmUgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGNvbnN0IHVubGlzdGVuID0gKCkgPT4ge1xuICAgICAgICAgICAgdHgucmVtb3ZlRXZlbnRMaXN0ZW5lcignY29tcGxldGUnLCBjb21wbGV0ZSk7XG4gICAgICAgICAgICB0eC5yZW1vdmVFdmVudExpc3RlbmVyKCdlcnJvcicsIGVycm9yKTtcbiAgICAgICAgICAgIHR4LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgZXJyb3IpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBjb21wbGV0ZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIHVubGlzdGVuKCk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGVycm9yID0gKCkgPT4ge1xuICAgICAgICAgICAgcmVqZWN0KHR4LmVycm9yIHx8IG5ldyBET01FeGNlcHRpb24oJ0Fib3J0RXJyb3InLCAnQWJvcnRFcnJvcicpKTtcbiAgICAgICAgICAgIHVubGlzdGVuKCk7XG4gICAgICAgIH07XG4gICAgICAgIHR4LmFkZEV2ZW50TGlzdGVuZXIoJ2NvbXBsZXRlJywgY29tcGxldGUpO1xuICAgICAgICB0eC5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGVycm9yKTtcbiAgICAgICAgdHguYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBlcnJvcik7XG4gICAgfSk7XG4gICAgLy8gQ2FjaGUgaXQgZm9yIGxhdGVyIHJldHJpZXZhbC5cbiAgICB0cmFuc2FjdGlvbkRvbmVNYXAuc2V0KHR4LCBkb25lKTtcbn1cbmxldCBpZGJQcm94eVRyYXBzID0ge1xuICAgIGdldCh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKSB7XG4gICAgICAgIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBJREJUcmFuc2FjdGlvbikge1xuICAgICAgICAgICAgLy8gU3BlY2lhbCBoYW5kbGluZyBmb3IgdHJhbnNhY3Rpb24uZG9uZS5cbiAgICAgICAgICAgIGlmIChwcm9wID09PSAnZG9uZScpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyYW5zYWN0aW9uRG9uZU1hcC5nZXQodGFyZ2V0KTtcbiAgICAgICAgICAgIC8vIFBvbHlmaWxsIGZvciBvYmplY3RTdG9yZU5hbWVzIGJlY2F1c2Ugb2YgRWRnZS5cbiAgICAgICAgICAgIGlmIChwcm9wID09PSAnb2JqZWN0U3RvcmVOYW1lcycpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0Lm9iamVjdFN0b3JlTmFtZXMgfHwgdHJhbnNhY3Rpb25TdG9yZU5hbWVzTWFwLmdldCh0YXJnZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gTWFrZSB0eC5zdG9yZSByZXR1cm4gdGhlIG9ubHkgc3RvcmUgaW4gdGhlIHRyYW5zYWN0aW9uLCBvciB1bmRlZmluZWQgaWYgdGhlcmUgYXJlIG1hbnkuXG4gICAgICAgICAgICBpZiAocHJvcCA9PT0gJ3N0b3JlJykge1xuICAgICAgICAgICAgICAgIHJldHVybiByZWNlaXZlci5vYmplY3RTdG9yZU5hbWVzWzFdXG4gICAgICAgICAgICAgICAgICAgID8gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgIDogcmVjZWl2ZXIub2JqZWN0U3RvcmUocmVjZWl2ZXIub2JqZWN0U3RvcmVOYW1lc1swXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gRWxzZSB0cmFuc2Zvcm0gd2hhdGV2ZXIgd2UgZ2V0IGJhY2suXG4gICAgICAgIHJldHVybiB3cmFwKHRhcmdldFtwcm9wXSk7XG4gICAgfSxcbiAgICBzZXQodGFyZ2V0LCBwcm9wLCB2YWx1ZSkge1xuICAgICAgICB0YXJnZXRbcHJvcF0gPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcbiAgICBoYXModGFyZ2V0LCBwcm9wKSB7XG4gICAgICAgIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBJREJUcmFuc2FjdGlvbiAmJlxuICAgICAgICAgICAgKHByb3AgPT09ICdkb25lJyB8fCBwcm9wID09PSAnc3RvcmUnKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHByb3AgaW4gdGFyZ2V0O1xuICAgIH0sXG59O1xuZnVuY3Rpb24gcmVwbGFjZVRyYXBzKGNhbGxiYWNrKSB7XG4gICAgaWRiUHJveHlUcmFwcyA9IGNhbGxiYWNrKGlkYlByb3h5VHJhcHMpO1xufVxuZnVuY3Rpb24gd3JhcEZ1bmN0aW9uKGZ1bmMpIHtcbiAgICAvLyBEdWUgdG8gZXhwZWN0ZWQgb2JqZWN0IGVxdWFsaXR5ICh3aGljaCBpcyBlbmZvcmNlZCBieSB0aGUgY2FjaGluZyBpbiBgd3JhcGApLCB3ZVxuICAgIC8vIG9ubHkgY3JlYXRlIG9uZSBuZXcgZnVuYyBwZXIgZnVuYy5cbiAgICAvLyBFZGdlIGRvZXNuJ3Qgc3VwcG9ydCBvYmplY3RTdG9yZU5hbWVzIChib29vKSwgc28gd2UgcG9seWZpbGwgaXQgaGVyZS5cbiAgICBpZiAoZnVuYyA9PT0gSURCRGF0YWJhc2UucHJvdG90eXBlLnRyYW5zYWN0aW9uICYmXG4gICAgICAgICEoJ29iamVjdFN0b3JlTmFtZXMnIGluIElEQlRyYW5zYWN0aW9uLnByb3RvdHlwZSkpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChzdG9yZU5hbWVzLCAuLi5hcmdzKSB7XG4gICAgICAgICAgICBjb25zdCB0eCA9IGZ1bmMuY2FsbCh1bndyYXAodGhpcyksIHN0b3JlTmFtZXMsIC4uLmFyZ3MpO1xuICAgICAgICAgICAgdHJhbnNhY3Rpb25TdG9yZU5hbWVzTWFwLnNldCh0eCwgc3RvcmVOYW1lcy5zb3J0ID8gc3RvcmVOYW1lcy5zb3J0KCkgOiBbc3RvcmVOYW1lc10pO1xuICAgICAgICAgICAgcmV0dXJuIHdyYXAodHgpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICAvLyBDdXJzb3IgbWV0aG9kcyBhcmUgc3BlY2lhbCwgYXMgdGhlIGJlaGF2aW91ciBpcyBhIGxpdHRsZSBtb3JlIGRpZmZlcmVudCB0byBzdGFuZGFyZCBJREIuIEluXG4gICAgLy8gSURCLCB5b3UgYWR2YW5jZSB0aGUgY3Vyc29yIGFuZCB3YWl0IGZvciBhIG5ldyAnc3VjY2Vzcycgb24gdGhlIElEQlJlcXVlc3QgdGhhdCBnYXZlIHlvdSB0aGVcbiAgICAvLyBjdXJzb3IuIEl0J3Mga2luZGEgbGlrZSBhIHByb21pc2UgdGhhdCBjYW4gcmVzb2x2ZSB3aXRoIG1hbnkgdmFsdWVzLiBUaGF0IGRvZXNuJ3QgbWFrZSBzZW5zZVxuICAgIC8vIHdpdGggcmVhbCBwcm9taXNlcywgc28gZWFjaCBhZHZhbmNlIG1ldGhvZHMgcmV0dXJucyBhIG5ldyBwcm9taXNlIGZvciB0aGUgY3Vyc29yIG9iamVjdCwgb3JcbiAgICAvLyB1bmRlZmluZWQgaWYgdGhlIGVuZCBvZiB0aGUgY3Vyc29yIGhhcyBiZWVuIHJlYWNoZWQuXG4gICAgaWYgKGdldEN1cnNvckFkdmFuY2VNZXRob2RzKCkuaW5jbHVkZXMoZnVuYykpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgICAgICAvLyBDYWxsaW5nIHRoZSBvcmlnaW5hbCBmdW5jdGlvbiB3aXRoIHRoZSBwcm94eSBhcyAndGhpcycgY2F1c2VzIElMTEVHQUwgSU5WT0NBVElPTiwgc28gd2UgdXNlXG4gICAgICAgICAgICAvLyB0aGUgb3JpZ2luYWwgb2JqZWN0LlxuICAgICAgICAgICAgZnVuYy5hcHBseSh1bndyYXAodGhpcyksIGFyZ3MpO1xuICAgICAgICAgICAgcmV0dXJuIHdyYXAoY3Vyc29yUmVxdWVzdE1hcC5nZXQodGhpcykpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgLy8gQ2FsbGluZyB0aGUgb3JpZ2luYWwgZnVuY3Rpb24gd2l0aCB0aGUgcHJveHkgYXMgJ3RoaXMnIGNhdXNlcyBJTExFR0FMIElOVk9DQVRJT04sIHNvIHdlIHVzZVxuICAgICAgICAvLyB0aGUgb3JpZ2luYWwgb2JqZWN0LlxuICAgICAgICByZXR1cm4gd3JhcChmdW5jLmFwcGx5KHVud3JhcCh0aGlzKSwgYXJncykpO1xuICAgIH07XG59XG5mdW5jdGlvbiB0cmFuc2Zvcm1DYWNoYWJsZVZhbHVlKHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgcmV0dXJuIHdyYXBGdW5jdGlvbih2YWx1ZSk7XG4gICAgLy8gVGhpcyBkb2Vzbid0IHJldHVybiwgaXQganVzdCBjcmVhdGVzIGEgJ2RvbmUnIHByb21pc2UgZm9yIHRoZSB0cmFuc2FjdGlvbixcbiAgICAvLyB3aGljaCBpcyBsYXRlciByZXR1cm5lZCBmb3IgdHJhbnNhY3Rpb24uZG9uZSAoc2VlIGlkYk9iamVjdEhhbmRsZXIpLlxuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIElEQlRyYW5zYWN0aW9uKVxuICAgICAgICBjYWNoZURvbmVQcm9taXNlRm9yVHJhbnNhY3Rpb24odmFsdWUpO1xuICAgIGlmIChpbnN0YW5jZU9mQW55KHZhbHVlLCBnZXRJZGJQcm94eWFibGVUeXBlcygpKSlcbiAgICAgICAgcmV0dXJuIG5ldyBQcm94eSh2YWx1ZSwgaWRiUHJveHlUcmFwcyk7XG4gICAgLy8gUmV0dXJuIHRoZSBzYW1lIHZhbHVlIGJhY2sgaWYgd2UncmUgbm90IGdvaW5nIHRvIHRyYW5zZm9ybSBpdC5cbiAgICByZXR1cm4gdmFsdWU7XG59XG5mdW5jdGlvbiB3cmFwKHZhbHVlKSB7XG4gICAgLy8gV2Ugc29tZXRpbWVzIGdlbmVyYXRlIG11bHRpcGxlIHByb21pc2VzIGZyb20gYSBzaW5nbGUgSURCUmVxdWVzdCAoZWcgd2hlbiBjdXJzb3JpbmcpLCBiZWNhdXNlXG4gICAgLy8gSURCIGlzIHdlaXJkIGFuZCBhIHNpbmdsZSBJREJSZXF1ZXN0IGNhbiB5aWVsZCBtYW55IHJlc3BvbnNlcywgc28gdGhlc2UgY2FuJ3QgYmUgY2FjaGVkLlxuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIElEQlJlcXVlc3QpXG4gICAgICAgIHJldHVybiBwcm9taXNpZnlSZXF1ZXN0KHZhbHVlKTtcbiAgICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IHRyYW5zZm9ybWVkIHRoaXMgdmFsdWUgYmVmb3JlLCByZXVzZSB0aGUgdHJhbnNmb3JtZWQgdmFsdWUuXG4gICAgLy8gVGhpcyBpcyBmYXN0ZXIsIGJ1dCBpdCBhbHNvIHByb3ZpZGVzIG9iamVjdCBlcXVhbGl0eS5cbiAgICBpZiAodHJhbnNmb3JtQ2FjaGUuaGFzKHZhbHVlKSlcbiAgICAgICAgcmV0dXJuIHRyYW5zZm9ybUNhY2hlLmdldCh2YWx1ZSk7XG4gICAgY29uc3QgbmV3VmFsdWUgPSB0cmFuc2Zvcm1DYWNoYWJsZVZhbHVlKHZhbHVlKTtcbiAgICAvLyBOb3QgYWxsIHR5cGVzIGFyZSB0cmFuc2Zvcm1lZC5cbiAgICAvLyBUaGVzZSBtYXkgYmUgcHJpbWl0aXZlIHR5cGVzLCBzbyB0aGV5IGNhbid0IGJlIFdlYWtNYXAga2V5cy5cbiAgICBpZiAobmV3VmFsdWUgIT09IHZhbHVlKSB7XG4gICAgICAgIHRyYW5zZm9ybUNhY2hlLnNldCh2YWx1ZSwgbmV3VmFsdWUpO1xuICAgICAgICByZXZlcnNlVHJhbnNmb3JtQ2FjaGUuc2V0KG5ld1ZhbHVlLCB2YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiBuZXdWYWx1ZTtcbn1cbmNvbnN0IHVud3JhcCA9ICh2YWx1ZSkgPT4gcmV2ZXJzZVRyYW5zZm9ybUNhY2hlLmdldCh2YWx1ZSk7XG5cbmV4cG9ydCB7IHJldmVyc2VUcmFuc2Zvcm1DYWNoZSBhcyBhLCBpbnN0YW5jZU9mQW55IGFzIGksIHJlcGxhY2VUcmFwcyBhcyByLCB1bndyYXAgYXMgdSwgd3JhcCBhcyB3IH07XG4iLCJpbXBvcnQgeyB3IGFzIHdyYXAsIHIgYXMgcmVwbGFjZVRyYXBzIH0gZnJvbSAnLi93cmFwLWlkYi12YWx1ZS5qcyc7XG5leHBvcnQgeyB1IGFzIHVud3JhcCwgdyBhcyB3cmFwIH0gZnJvbSAnLi93cmFwLWlkYi12YWx1ZS5qcyc7XG5cbi8qKlxuICogT3BlbiBhIGRhdGFiYXNlLlxuICpcbiAqIEBwYXJhbSBuYW1lIE5hbWUgb2YgdGhlIGRhdGFiYXNlLlxuICogQHBhcmFtIHZlcnNpb24gU2NoZW1hIHZlcnNpb24uXG4gKiBAcGFyYW0gY2FsbGJhY2tzIEFkZGl0aW9uYWwgY2FsbGJhY2tzLlxuICovXG5mdW5jdGlvbiBvcGVuREIobmFtZSwgdmVyc2lvbiwgeyBibG9ja2VkLCB1cGdyYWRlLCBibG9ja2luZywgdGVybWluYXRlZCB9ID0ge30pIHtcbiAgICBjb25zdCByZXF1ZXN0ID0gaW5kZXhlZERCLm9wZW4obmFtZSwgdmVyc2lvbik7XG4gICAgY29uc3Qgb3BlblByb21pc2UgPSB3cmFwKHJlcXVlc3QpO1xuICAgIGlmICh1cGdyYWRlKSB7XG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcigndXBncmFkZW5lZWRlZCcsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgdXBncmFkZSh3cmFwKHJlcXVlc3QucmVzdWx0KSwgZXZlbnQub2xkVmVyc2lvbiwgZXZlbnQubmV3VmVyc2lvbiwgd3JhcChyZXF1ZXN0LnRyYW5zYWN0aW9uKSwgZXZlbnQpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGJsb2NrZWQpIHtcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdibG9ja2VkJywgKGV2ZW50KSA9PiBibG9ja2VkKFxuICAgICAgICAvLyBDYXN0aW5nIGR1ZSB0byBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L1R5cGVTY3JpcHQtRE9NLWxpYi1nZW5lcmF0b3IvcHVsbC8xNDA1XG4gICAgICAgIGV2ZW50Lm9sZFZlcnNpb24sIGV2ZW50Lm5ld1ZlcnNpb24sIGV2ZW50KSk7XG4gICAgfVxuICAgIG9wZW5Qcm9taXNlXG4gICAgICAgIC50aGVuKChkYikgPT4ge1xuICAgICAgICBpZiAodGVybWluYXRlZClcbiAgICAgICAgICAgIGRiLmFkZEV2ZW50TGlzdGVuZXIoJ2Nsb3NlJywgKCkgPT4gdGVybWluYXRlZCgpKTtcbiAgICAgICAgaWYgKGJsb2NraW5nKSB7XG4gICAgICAgICAgICBkYi5hZGRFdmVudExpc3RlbmVyKCd2ZXJzaW9uY2hhbmdlJywgKGV2ZW50KSA9PiBibG9ja2luZyhldmVudC5vbGRWZXJzaW9uLCBldmVudC5uZXdWZXJzaW9uLCBldmVudCkpO1xuICAgICAgICB9XG4gICAgfSlcbiAgICAgICAgLmNhdGNoKCgpID0+IHsgfSk7XG4gICAgcmV0dXJuIG9wZW5Qcm9taXNlO1xufVxuLyoqXG4gKiBEZWxldGUgYSBkYXRhYmFzZS5cbiAqXG4gKiBAcGFyYW0gbmFtZSBOYW1lIG9mIHRoZSBkYXRhYmFzZS5cbiAqL1xuZnVuY3Rpb24gZGVsZXRlREIobmFtZSwgeyBibG9ja2VkIH0gPSB7fSkge1xuICAgIGNvbnN0IHJlcXVlc3QgPSBpbmRleGVkREIuZGVsZXRlRGF0YWJhc2UobmFtZSk7XG4gICAgaWYgKGJsb2NrZWQpIHtcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdibG9ja2VkJywgKGV2ZW50KSA9PiBibG9ja2VkKFxuICAgICAgICAvLyBDYXN0aW5nIGR1ZSB0byBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L1R5cGVTY3JpcHQtRE9NLWxpYi1nZW5lcmF0b3IvcHVsbC8xNDA1XG4gICAgICAgIGV2ZW50Lm9sZFZlcnNpb24sIGV2ZW50KSk7XG4gICAgfVxuICAgIHJldHVybiB3cmFwKHJlcXVlc3QpLnRoZW4oKCkgPT4gdW5kZWZpbmVkKTtcbn1cblxuY29uc3QgcmVhZE1ldGhvZHMgPSBbJ2dldCcsICdnZXRLZXknLCAnZ2V0QWxsJywgJ2dldEFsbEtleXMnLCAnY291bnQnXTtcbmNvbnN0IHdyaXRlTWV0aG9kcyA9IFsncHV0JywgJ2FkZCcsICdkZWxldGUnLCAnY2xlYXInXTtcbmNvbnN0IGNhY2hlZE1ldGhvZHMgPSBuZXcgTWFwKCk7XG5mdW5jdGlvbiBnZXRNZXRob2QodGFyZ2V0LCBwcm9wKSB7XG4gICAgaWYgKCEodGFyZ2V0IGluc3RhbmNlb2YgSURCRGF0YWJhc2UgJiZcbiAgICAgICAgIShwcm9wIGluIHRhcmdldCkgJiZcbiAgICAgICAgdHlwZW9mIHByb3AgPT09ICdzdHJpbmcnKSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChjYWNoZWRNZXRob2RzLmdldChwcm9wKSlcbiAgICAgICAgcmV0dXJuIGNhY2hlZE1ldGhvZHMuZ2V0KHByb3ApO1xuICAgIGNvbnN0IHRhcmdldEZ1bmNOYW1lID0gcHJvcC5yZXBsYWNlKC9Gcm9tSW5kZXgkLywgJycpO1xuICAgIGNvbnN0IHVzZUluZGV4ID0gcHJvcCAhPT0gdGFyZ2V0RnVuY05hbWU7XG4gICAgY29uc3QgaXNXcml0ZSA9IHdyaXRlTWV0aG9kcy5pbmNsdWRlcyh0YXJnZXRGdW5jTmFtZSk7XG4gICAgaWYgKFxuICAgIC8vIEJhaWwgaWYgdGhlIHRhcmdldCBkb2Vzbid0IGV4aXN0IG9uIHRoZSB0YXJnZXQuIEVnLCBnZXRBbGwgaXNuJ3QgaW4gRWRnZS5cbiAgICAhKHRhcmdldEZ1bmNOYW1lIGluICh1c2VJbmRleCA/IElEQkluZGV4IDogSURCT2JqZWN0U3RvcmUpLnByb3RvdHlwZSkgfHxcbiAgICAgICAgIShpc1dyaXRlIHx8IHJlYWRNZXRob2RzLmluY2x1ZGVzKHRhcmdldEZ1bmNOYW1lKSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBtZXRob2QgPSBhc3luYyBmdW5jdGlvbiAoc3RvcmVOYW1lLCAuLi5hcmdzKSB7XG4gICAgICAgIC8vIGlzV3JpdGUgPyAncmVhZHdyaXRlJyA6IHVuZGVmaW5lZCBnemlwcHMgYmV0dGVyLCBidXQgZmFpbHMgaW4gRWRnZSA6KFxuICAgICAgICBjb25zdCB0eCA9IHRoaXMudHJhbnNhY3Rpb24oc3RvcmVOYW1lLCBpc1dyaXRlID8gJ3JlYWR3cml0ZScgOiAncmVhZG9ubHknKTtcbiAgICAgICAgbGV0IHRhcmdldCA9IHR4LnN0b3JlO1xuICAgICAgICBpZiAodXNlSW5kZXgpXG4gICAgICAgICAgICB0YXJnZXQgPSB0YXJnZXQuaW5kZXgoYXJncy5zaGlmdCgpKTtcbiAgICAgICAgLy8gTXVzdCByZWplY3QgaWYgb3AgcmVqZWN0cy5cbiAgICAgICAgLy8gSWYgaXQncyBhIHdyaXRlIG9wZXJhdGlvbiwgbXVzdCByZWplY3QgaWYgdHguZG9uZSByZWplY3RzLlxuICAgICAgICAvLyBNdXN0IHJlamVjdCB3aXRoIG9wIHJlamVjdGlvbiBmaXJzdC5cbiAgICAgICAgLy8gTXVzdCByZXNvbHZlIHdpdGggb3AgdmFsdWUuXG4gICAgICAgIC8vIE11c3QgaGFuZGxlIGJvdGggcHJvbWlzZXMgKG5vIHVuaGFuZGxlZCByZWplY3Rpb25zKVxuICAgICAgICByZXR1cm4gKGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgIHRhcmdldFt0YXJnZXRGdW5jTmFtZV0oLi4uYXJncyksXG4gICAgICAgICAgICBpc1dyaXRlICYmIHR4LmRvbmUsXG4gICAgICAgIF0pKVswXTtcbiAgICB9O1xuICAgIGNhY2hlZE1ldGhvZHMuc2V0KHByb3AsIG1ldGhvZCk7XG4gICAgcmV0dXJuIG1ldGhvZDtcbn1cbnJlcGxhY2VUcmFwcygob2xkVHJhcHMpID0+ICh7XG4gICAgLi4ub2xkVHJhcHMsXG4gICAgZ2V0OiAodGFyZ2V0LCBwcm9wLCByZWNlaXZlcikgPT4gZ2V0TWV0aG9kKHRhcmdldCwgcHJvcCkgfHwgb2xkVHJhcHMuZ2V0KHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpLFxuICAgIGhhczogKHRhcmdldCwgcHJvcCkgPT4gISFnZXRNZXRob2QodGFyZ2V0LCBwcm9wKSB8fCBvbGRUcmFwcy5oYXModGFyZ2V0LCBwcm9wKSxcbn0pKTtcblxuZXhwb3J0IHsgZGVsZXRlREIsIG9wZW5EQiB9O1xuIiwiaW1wb3J0IHsgQ29tcG9uZW50LCBDb21wb25lbnRDb250YWluZXIgfSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcbmltcG9ydCB7IExvZ2dlciwgc2V0VXNlckxvZ0hhbmRsZXIsIHNldExvZ0xldmVsIGFzIHNldExvZ0xldmVsJDEgfSBmcm9tICdAZmlyZWJhc2UvbG9nZ2VyJztcbmltcG9ydCB7IEVycm9yRmFjdG9yeSwgYmFzZTY0RGVjb2RlLCBnZXREZWZhdWx0QXBwQ29uZmlnLCBkZWVwRXF1YWwsIGlzQnJvd3NlciwgaXNXZWJXb3JrZXIsIEZpcmViYXNlRXJyb3IsIGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nLCBpc0luZGV4ZWREQkF2YWlsYWJsZSwgdmFsaWRhdGVJbmRleGVkREJPcGVuYWJsZSB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmV4cG9ydCB7IEZpcmViYXNlRXJyb3IgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBvcGVuREIgfSBmcm9tICdpZGInO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY2xhc3MgUGxhdGZvcm1Mb2dnZXJTZXJ2aWNlSW1wbCB7XG4gICAgY29uc3RydWN0b3IoY29udGFpbmVyKSB7XG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgIH1cbiAgICAvLyBJbiBpbml0aWFsIGltcGxlbWVudGF0aW9uLCB0aGlzIHdpbGwgYmUgY2FsbGVkIGJ5IGluc3RhbGxhdGlvbnMgb25cbiAgICAvLyBhdXRoIHRva2VuIHJlZnJlc2gsIGFuZCBpbnN0YWxsYXRpb25zIHdpbGwgc2VuZCB0aGlzIHN0cmluZy5cbiAgICBnZXRQbGF0Zm9ybUluZm9TdHJpbmcoKSB7XG4gICAgICAgIGNvbnN0IHByb3ZpZGVycyA9IHRoaXMuY29udGFpbmVyLmdldFByb3ZpZGVycygpO1xuICAgICAgICAvLyBMb29wIHRocm91Z2ggcHJvdmlkZXJzIGFuZCBnZXQgbGlicmFyeS92ZXJzaW9uIHBhaXJzIGZyb20gYW55IHRoYXQgYXJlXG4gICAgICAgIC8vIHZlcnNpb24gY29tcG9uZW50cy5cbiAgICAgICAgcmV0dXJuIHByb3ZpZGVyc1xuICAgICAgICAgICAgLm1hcChwcm92aWRlciA9PiB7XG4gICAgICAgICAgICBpZiAoaXNWZXJzaW9uU2VydmljZVByb3ZpZGVyKHByb3ZpZGVyKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlcnZpY2UgPSBwcm92aWRlci5nZXRJbW1lZGlhdGUoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYCR7c2VydmljZS5saWJyYXJ5fS8ke3NlcnZpY2UudmVyc2lvbn1gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuZmlsdGVyKGxvZ1N0cmluZyA9PiBsb2dTdHJpbmcpXG4gICAgICAgICAgICAuam9pbignICcpO1xuICAgIH1cbn1cbi8qKlxuICpcbiAqIEBwYXJhbSBwcm92aWRlciBjaGVjayBpZiB0aGlzIHByb3ZpZGVyIHByb3ZpZGVzIGEgVmVyc2lvblNlcnZpY2VcbiAqXG4gKiBOT1RFOiBVc2luZyBQcm92aWRlcjwnYXBwLXZlcnNpb24nPiBpcyBhIGhhY2sgdG8gaW5kaWNhdGUgdGhhdCB0aGUgcHJvdmlkZXJcbiAqIHByb3ZpZGVzIFZlcnNpb25TZXJ2aWNlLiBUaGUgcHJvdmlkZXIgaXMgbm90IG5lY2Vzc2FyaWx5IGEgJ2FwcC12ZXJzaW9uJ1xuICogcHJvdmlkZXIuXG4gKi9cbmZ1bmN0aW9uIGlzVmVyc2lvblNlcnZpY2VQcm92aWRlcihwcm92aWRlcikge1xuICAgIGNvbnN0IGNvbXBvbmVudCA9IHByb3ZpZGVyLmdldENvbXBvbmVudCgpO1xuICAgIHJldHVybiBjb21wb25lbnQ/LnR5cGUgPT09IFwiVkVSU0lPTlwiIC8qIENvbXBvbmVudFR5cGUuVkVSU0lPTiAqLztcbn1cblxuY29uc3QgbmFtZSRxID0gXCJAZmlyZWJhc2UvYXBwXCI7XG5jb25zdCB2ZXJzaW9uJDEgPSBcIjAuMTQuNlwiO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY29uc3QgbG9nZ2VyID0gbmV3IExvZ2dlcignQGZpcmViYXNlL2FwcCcpO1xuXG5jb25zdCBuYW1lJHAgPSBcIkBmaXJlYmFzZS9hcHAtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkbyA9IFwiQGZpcmViYXNlL2FuYWx5dGljcy1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRuID0gXCJAZmlyZWJhc2UvYW5hbHl0aWNzXCI7XG5cbmNvbnN0IG5hbWUkbSA9IFwiQGZpcmViYXNlL2FwcC1jaGVjay1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRsID0gXCJAZmlyZWJhc2UvYXBwLWNoZWNrXCI7XG5cbmNvbnN0IG5hbWUkayA9IFwiQGZpcmViYXNlL2F1dGhcIjtcblxuY29uc3QgbmFtZSRqID0gXCJAZmlyZWJhc2UvYXV0aC1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRpID0gXCJAZmlyZWJhc2UvZGF0YWJhc2VcIjtcblxuY29uc3QgbmFtZSRoID0gXCJAZmlyZWJhc2UvZGF0YS1jb25uZWN0XCI7XG5cbmNvbnN0IG5hbWUkZyA9IFwiQGZpcmViYXNlL2RhdGFiYXNlLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGYgPSBcIkBmaXJlYmFzZS9mdW5jdGlvbnNcIjtcblxuY29uc3QgbmFtZSRlID0gXCJAZmlyZWJhc2UvZnVuY3Rpb25zLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGQgPSBcIkBmaXJlYmFzZS9pbnN0YWxsYXRpb25zXCI7XG5cbmNvbnN0IG5hbWUkYyA9IFwiQGZpcmViYXNlL2luc3RhbGxhdGlvbnMtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkYiA9IFwiQGZpcmViYXNlL21lc3NhZ2luZ1wiO1xuXG5jb25zdCBuYW1lJGEgPSBcIkBmaXJlYmFzZS9tZXNzYWdpbmctY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkOSA9IFwiQGZpcmViYXNlL3BlcmZvcm1hbmNlXCI7XG5cbmNvbnN0IG5hbWUkOCA9IFwiQGZpcmViYXNlL3BlcmZvcm1hbmNlLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJDcgPSBcIkBmaXJlYmFzZS9yZW1vdGUtY29uZmlnXCI7XG5cbmNvbnN0IG5hbWUkNiA9IFwiQGZpcmViYXNlL3JlbW90ZS1jb25maWctY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkNSA9IFwiQGZpcmViYXNlL3N0b3JhZ2VcIjtcblxuY29uc3QgbmFtZSQ0ID0gXCJAZmlyZWJhc2Uvc3RvcmFnZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSQzID0gXCJAZmlyZWJhc2UvZmlyZXN0b3JlXCI7XG5cbmNvbnN0IG5hbWUkMiA9IFwiQGZpcmViYXNlL2FpXCI7XG5cbmNvbnN0IG5hbWUkMSA9IFwiQGZpcmViYXNlL2ZpcmVzdG9yZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSA9IFwiZmlyZWJhc2VcIjtcbmNvbnN0IHZlcnNpb24gPSBcIjEyLjYuMFwiO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGUgZGVmYXVsdCBhcHAgbmFtZVxuICpcbiAqIEBpbnRlcm5hbFxuICovXG5jb25zdCBERUZBVUxUX0VOVFJZX05BTUUgPSAnW0RFRkFVTFRdJztcbmNvbnN0IFBMQVRGT1JNX0xPR19TVFJJTkcgPSB7XG4gICAgW25hbWUkcV06ICdmaXJlLWNvcmUnLFxuICAgIFtuYW1lJHBdOiAnZmlyZS1jb3JlLWNvbXBhdCcsXG4gICAgW25hbWUkbl06ICdmaXJlLWFuYWx5dGljcycsXG4gICAgW25hbWUkb106ICdmaXJlLWFuYWx5dGljcy1jb21wYXQnLFxuICAgIFtuYW1lJGxdOiAnZmlyZS1hcHAtY2hlY2snLFxuICAgIFtuYW1lJG1dOiAnZmlyZS1hcHAtY2hlY2stY29tcGF0JyxcbiAgICBbbmFtZSRrXTogJ2ZpcmUtYXV0aCcsXG4gICAgW25hbWUkal06ICdmaXJlLWF1dGgtY29tcGF0JyxcbiAgICBbbmFtZSRpXTogJ2ZpcmUtcnRkYicsXG4gICAgW25hbWUkaF06ICdmaXJlLWRhdGEtY29ubmVjdCcsXG4gICAgW25hbWUkZ106ICdmaXJlLXJ0ZGItY29tcGF0JyxcbiAgICBbbmFtZSRmXTogJ2ZpcmUtZm4nLFxuICAgIFtuYW1lJGVdOiAnZmlyZS1mbi1jb21wYXQnLFxuICAgIFtuYW1lJGRdOiAnZmlyZS1paWQnLFxuICAgIFtuYW1lJGNdOiAnZmlyZS1paWQtY29tcGF0JyxcbiAgICBbbmFtZSRiXTogJ2ZpcmUtZmNtJyxcbiAgICBbbmFtZSRhXTogJ2ZpcmUtZmNtLWNvbXBhdCcsXG4gICAgW25hbWUkOV06ICdmaXJlLXBlcmYnLFxuICAgIFtuYW1lJDhdOiAnZmlyZS1wZXJmLWNvbXBhdCcsXG4gICAgW25hbWUkN106ICdmaXJlLXJjJyxcbiAgICBbbmFtZSQ2XTogJ2ZpcmUtcmMtY29tcGF0JyxcbiAgICBbbmFtZSQ1XTogJ2ZpcmUtZ2NzJyxcbiAgICBbbmFtZSQ0XTogJ2ZpcmUtZ2NzLWNvbXBhdCcsXG4gICAgW25hbWUkM106ICdmaXJlLWZzdCcsXG4gICAgW25hbWUkMV06ICdmaXJlLWZzdC1jb21wYXQnLFxuICAgIFtuYW1lJDJdOiAnZmlyZS12ZXJ0ZXgnLFxuICAgICdmaXJlLWpzJzogJ2ZpcmUtanMnLCAvLyBQbGF0Zm9ybSBpZGVudGlmaWVyIGZvciBKUyBTREsuXG4gICAgW25hbWVdOiAnZmlyZS1qcy1hbGwnXG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuY29uc3QgX2FwcHMgPSBuZXcgTWFwKCk7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5jb25zdCBfc2VydmVyQXBwcyA9IG5ldyBNYXAoKTtcbi8qKlxuICogUmVnaXN0ZXJlZCBjb21wb25lbnRzLlxuICpcbiAqIEBpbnRlcm5hbFxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuY29uc3QgX2NvbXBvbmVudHMgPSBuZXcgTWFwKCk7XG4vKipcbiAqIEBwYXJhbSBjb21wb25lbnQgLSB0aGUgY29tcG9uZW50IGJlaW5nIGFkZGVkIHRvIHRoaXMgYXBwJ3MgY29udGFpbmVyXG4gKlxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIF9hZGRDb21wb25lbnQoYXBwLCBjb21wb25lbnQpIHtcbiAgICB0cnkge1xuICAgICAgICBhcHAuY29udGFpbmVyLmFkZENvbXBvbmVudChjb21wb25lbnQpO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICBsb2dnZXIuZGVidWcoYENvbXBvbmVudCAke2NvbXBvbmVudC5uYW1lfSBmYWlsZWQgdG8gcmVnaXN0ZXIgd2l0aCBGaXJlYmFzZUFwcCAke2FwcC5uYW1lfWAsIGUpO1xuICAgIH1cbn1cbi8qKlxuICpcbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiBfYWRkT3JPdmVyd3JpdGVDb21wb25lbnQoYXBwLCBjb21wb25lbnQpIHtcbiAgICBhcHAuY29udGFpbmVyLmFkZE9yT3ZlcndyaXRlQ29tcG9uZW50KGNvbXBvbmVudCk7XG59XG4vKipcbiAqXG4gKiBAcGFyYW0gY29tcG9uZW50IC0gdGhlIGNvbXBvbmVudCB0byByZWdpc3RlclxuICogQHJldHVybnMgd2hldGhlciBvciBub3QgdGhlIGNvbXBvbmVudCBpcyByZWdpc3RlcmVkIHN1Y2Nlc3NmdWxseVxuICpcbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiBfcmVnaXN0ZXJDb21wb25lbnQoY29tcG9uZW50KSB7XG4gICAgY29uc3QgY29tcG9uZW50TmFtZSA9IGNvbXBvbmVudC5uYW1lO1xuICAgIGlmIChfY29tcG9uZW50cy5oYXMoY29tcG9uZW50TmFtZSkpIHtcbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBUaGVyZSB3ZXJlIG11bHRpcGxlIGF0dGVtcHRzIHRvIHJlZ2lzdGVyIGNvbXBvbmVudCAke2NvbXBvbmVudE5hbWV9LmApO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIF9jb21wb25lbnRzLnNldChjb21wb25lbnROYW1lLCBjb21wb25lbnQpO1xuICAgIC8vIGFkZCB0aGUgY29tcG9uZW50IHRvIGV4aXN0aW5nIGFwcCBpbnN0YW5jZXNcbiAgICBmb3IgKGNvbnN0IGFwcCBvZiBfYXBwcy52YWx1ZXMoKSkge1xuICAgICAgICBfYWRkQ29tcG9uZW50KGFwcCwgY29tcG9uZW50KTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBzZXJ2ZXJBcHAgb2YgX3NlcnZlckFwcHMudmFsdWVzKCkpIHtcbiAgICAgICAgX2FkZENvbXBvbmVudChzZXJ2ZXJBcHAsIGNvbXBvbmVudCk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuLyoqXG4gKlxuICogQHBhcmFtIGFwcCAtIEZpcmViYXNlQXBwIGluc3RhbmNlXG4gKiBAcGFyYW0gbmFtZSAtIHNlcnZpY2UgbmFtZVxuICpcbiAqIEByZXR1cm5zIHRoZSBwcm92aWRlciBmb3IgdGhlIHNlcnZpY2Ugd2l0aCB0aGUgbWF0Y2hpbmcgbmFtZVxuICpcbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiBfZ2V0UHJvdmlkZXIoYXBwLCBuYW1lKSB7XG4gICAgY29uc3QgaGVhcnRiZWF0Q29udHJvbGxlciA9IGFwcC5jb250YWluZXJcbiAgICAgICAgLmdldFByb3ZpZGVyKCdoZWFydGJlYXQnKVxuICAgICAgICAuZ2V0SW1tZWRpYXRlKHsgb3B0aW9uYWw6IHRydWUgfSk7XG4gICAgaWYgKGhlYXJ0YmVhdENvbnRyb2xsZXIpIHtcbiAgICAgICAgdm9pZCBoZWFydGJlYXRDb250cm9sbGVyLnRyaWdnZXJIZWFydGJlYXQoKTtcbiAgICB9XG4gICAgcmV0dXJuIGFwcC5jb250YWluZXIuZ2V0UHJvdmlkZXIobmFtZSk7XG59XG4vKipcbiAqXG4gKiBAcGFyYW0gYXBwIC0gRmlyZWJhc2VBcHAgaW5zdGFuY2VcbiAqIEBwYXJhbSBuYW1lIC0gc2VydmljZSBuYW1lXG4gKiBAcGFyYW0gaW5zdGFuY2VJZGVudGlmaWVyIC0gc2VydmljZSBpbnN0YW5jZSBpZGVudGlmaWVyIGluIGNhc2UgdGhlIHNlcnZpY2Ugc3VwcG9ydHMgbXVsdGlwbGUgaW5zdGFuY2VzXG4gKlxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIF9yZW1vdmVTZXJ2aWNlSW5zdGFuY2UoYXBwLCBuYW1lLCBpbnN0YW5jZUlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcbiAgICBfZ2V0UHJvdmlkZXIoYXBwLCBuYW1lKS5jbGVhckluc3RhbmNlKGluc3RhbmNlSWRlbnRpZmllcik7XG59XG4vKipcbiAqXG4gKiBAcGFyYW0gb2JqIC0gYW4gb2JqZWN0IG9mIHR5cGUgRmlyZWJhc2VBcHAsIEZpcmViYXNlT3B0aW9ucyBvciBGaXJlYmFzZUFwcFNldHRpbmdzLlxuICpcbiAqIEByZXR1cm5zIHRydWUgaWYgdGhlIHByb3ZpZGUgb2JqZWN0IGlzIG9mIHR5cGUgRmlyZWJhc2VBcHAuXG4gKlxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIF9pc0ZpcmViYXNlQXBwKG9iaikge1xuICAgIHJldHVybiBvYmoub3B0aW9ucyAhPT0gdW5kZWZpbmVkO1xufVxuLyoqXG4gKlxuICogQHBhcmFtIG9iaiAtIGFuIG9iamVjdCBvZiB0eXBlIEZpcmViYXNlQXBwLCBGaXJlYmFzZU9wdGlvbnMgb3IgRmlyZWJhc2VBcHBTZXR0aW5ncy5cbiAqXG4gKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBwcm92aWRlZCBvYmplY3QgaXMgb2YgdHlwZSBGaXJlYmFzZVNlcnZlckFwcEltcGwuXG4gKlxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIF9pc0ZpcmViYXNlU2VydmVyQXBwU2V0dGluZ3Mob2JqKSB7XG4gICAgaWYgKF9pc0ZpcmViYXNlQXBwKG9iaikpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gKCdhdXRoSWRUb2tlbicgaW4gb2JqIHx8XG4gICAgICAgICdhcHBDaGVja1Rva2VuJyBpbiBvYmogfHxcbiAgICAgICAgJ3JlbGVhc2VPbkRlcmVmJyBpbiBvYmogfHxcbiAgICAgICAgJ2F1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCcgaW4gb2JqKTtcbn1cbi8qKlxuICpcbiAqIEBwYXJhbSBvYmogLSBhbiBvYmplY3Qgb2YgdHlwZSBGaXJlYmFzZUFwcC5cbiAqXG4gKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBwcm92aWRlZCBvYmplY3QgaXMgb2YgdHlwZSBGaXJlYmFzZVNlcnZlckFwcEltcGwuXG4gKlxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIF9pc0ZpcmViYXNlU2VydmVyQXBwKG9iaikge1xuICAgIGlmIChvYmogPT09IG51bGwgfHwgb2JqID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gb2JqLnNldHRpbmdzICE9PSB1bmRlZmluZWQ7XG59XG4vKipcbiAqIFRlc3Qgb25seVxuICpcbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiBfY2xlYXJDb21wb25lbnRzKCkge1xuICAgIF9jb21wb25lbnRzLmNsZWFyKCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jb25zdCBFUlJPUlMgPSB7XG4gICAgW1wibm8tYXBwXCIgLyogQXBwRXJyb3IuTk9fQVBQICovXTogXCJObyBGaXJlYmFzZSBBcHAgJ3skYXBwTmFtZX0nIGhhcyBiZWVuIGNyZWF0ZWQgLSBcIiArXG4gICAgICAgICdjYWxsIGluaXRpYWxpemVBcHAoKSBmaXJzdCcsXG4gICAgW1wiYmFkLWFwcC1uYW1lXCIgLyogQXBwRXJyb3IuQkFEX0FQUF9OQU1FICovXTogXCJJbGxlZ2FsIEFwcCBuYW1lOiAneyRhcHBOYW1lfSdcIixcbiAgICBbXCJkdXBsaWNhdGUtYXBwXCIgLyogQXBwRXJyb3IuRFVQTElDQVRFX0FQUCAqL106IFwiRmlyZWJhc2UgQXBwIG5hbWVkICd7JGFwcE5hbWV9JyBhbHJlYWR5IGV4aXN0cyB3aXRoIGRpZmZlcmVudCBvcHRpb25zIG9yIGNvbmZpZ1wiLFxuICAgIFtcImFwcC1kZWxldGVkXCIgLyogQXBwRXJyb3IuQVBQX0RFTEVURUQgKi9dOiBcIkZpcmViYXNlIEFwcCBuYW1lZCAneyRhcHBOYW1lfScgYWxyZWFkeSBkZWxldGVkXCIsXG4gICAgW1wic2VydmVyLWFwcC1kZWxldGVkXCIgLyogQXBwRXJyb3IuU0VSVkVSX0FQUF9ERUxFVEVEICovXTogJ0ZpcmViYXNlIFNlcnZlciBBcHAgaGFzIGJlZW4gZGVsZXRlZCcsXG4gICAgW1wibm8tb3B0aW9uc1wiIC8qIEFwcEVycm9yLk5PX09QVElPTlMgKi9dOiAnTmVlZCB0byBwcm92aWRlIG9wdGlvbnMsIHdoZW4gbm90IGJlaW5nIGRlcGxveWVkIHRvIGhvc3RpbmcgdmlhIHNvdXJjZS4nLFxuICAgIFtcImludmFsaWQtYXBwLWFyZ3VtZW50XCIgLyogQXBwRXJyb3IuSU5WQUxJRF9BUFBfQVJHVU1FTlQgKi9dOiAnZmlyZWJhc2UueyRhcHBOYW1lfSgpIHRha2VzIGVpdGhlciBubyBhcmd1bWVudCBvciBhICcgK1xuICAgICAgICAnRmlyZWJhc2UgQXBwIGluc3RhbmNlLicsXG4gICAgW1wiaW52YWxpZC1sb2ctYXJndW1lbnRcIiAvKiBBcHBFcnJvci5JTlZBTElEX0xPR19BUkdVTUVOVCAqL106ICdGaXJzdCBhcmd1bWVudCB0byBgb25Mb2dgIG11c3QgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLicsXG4gICAgW1wiaWRiLW9wZW5cIiAvKiBBcHBFcnJvci5JREJfT1BFTiAqL106ICdFcnJvciB0aHJvd24gd2hlbiBvcGVuaW5nIEluZGV4ZWREQi4gT3JpZ2luYWwgZXJyb3I6IHskb3JpZ2luYWxFcnJvck1lc3NhZ2V9LicsXG4gICAgW1wiaWRiLWdldFwiIC8qIEFwcEVycm9yLklEQl9HRVQgKi9dOiAnRXJyb3IgdGhyb3duIHdoZW4gcmVhZGluZyBmcm9tIEluZGV4ZWREQi4gT3JpZ2luYWwgZXJyb3I6IHskb3JpZ2luYWxFcnJvck1lc3NhZ2V9LicsXG4gICAgW1wiaWRiLXNldFwiIC8qIEFwcEVycm9yLklEQl9XUklURSAqL106ICdFcnJvciB0aHJvd24gd2hlbiB3cml0aW5nIHRvIEluZGV4ZWREQi4gT3JpZ2luYWwgZXJyb3I6IHskb3JpZ2luYWxFcnJvck1lc3NhZ2V9LicsXG4gICAgW1wiaWRiLWRlbGV0ZVwiIC8qIEFwcEVycm9yLklEQl9ERUxFVEUgKi9dOiAnRXJyb3IgdGhyb3duIHdoZW4gZGVsZXRpbmcgZnJvbSBJbmRleGVkREIuIE9yaWdpbmFsIGVycm9yOiB7JG9yaWdpbmFsRXJyb3JNZXNzYWdlfS4nLFxuICAgIFtcImZpbmFsaXphdGlvbi1yZWdpc3RyeS1ub3Qtc3VwcG9ydGVkXCIgLyogQXBwRXJyb3IuRklOQUxJWkFUSU9OX1JFR0lTVFJZX05PVF9TVVBQT1JURUQgKi9dOiAnRmlyZWJhc2VTZXJ2ZXJBcHAgZGVsZXRlT25EZXJlZiBmaWVsZCBkZWZpbmVkIGJ1dCB0aGUgSlMgcnVudGltZSBkb2VzIG5vdCBzdXBwb3J0IEZpbmFsaXphdGlvblJlZ2lzdHJ5LicsXG4gICAgW1wiaW52YWxpZC1zZXJ2ZXItYXBwLWVudmlyb25tZW50XCIgLyogQXBwRXJyb3IuSU5WQUxJRF9TRVJWRVJfQVBQX0VOVklST05NRU5UICovXTogJ0ZpcmViYXNlU2VydmVyQXBwIGlzIG5vdCBmb3IgdXNlIGluIGJyb3dzZXIgZW52aXJvbm1lbnRzLidcbn07XG5jb25zdCBFUlJPUl9GQUNUT1JZID0gbmV3IEVycm9yRmFjdG9yeSgnYXBwJywgJ0ZpcmViYXNlJywgRVJST1JTKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNsYXNzIEZpcmViYXNlQXBwSW1wbCB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucywgY29uZmlnLCBjb250YWluZXIpIHtcbiAgICAgICAgdGhpcy5faXNEZWxldGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX29wdGlvbnMgPSB7IC4uLm9wdGlvbnMgfTtcbiAgICAgICAgdGhpcy5fY29uZmlnID0geyAuLi5jb25maWcgfTtcbiAgICAgICAgdGhpcy5fbmFtZSA9IGNvbmZpZy5uYW1lO1xuICAgICAgICB0aGlzLl9hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQgPVxuICAgICAgICAgICAgY29uZmlnLmF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZDtcbiAgICAgICAgdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5hZGRDb21wb25lbnQobmV3IENvbXBvbmVudCgnYXBwJywgKCkgPT4gdGhpcywgXCJQVUJMSUNcIiAvKiBDb21wb25lbnRUeXBlLlBVQkxJQyAqLykpO1xuICAgIH1cbiAgICBnZXQgYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkKCkge1xuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQ7XG4gICAgfVxuICAgIHNldCBhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQodmFsKSB7XG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWQoKTtcbiAgICAgICAgdGhpcy5fYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkID0gdmFsO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5fbmFtZTtcbiAgICB9XG4gICAgZ2V0IG9wdGlvbnMoKSB7XG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX29wdGlvbnM7XG4gICAgfVxuICAgIGdldCBjb25maWcoKSB7XG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbmZpZztcbiAgICB9XG4gICAgZ2V0IGNvbnRhaW5lcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRhaW5lcjtcbiAgICB9XG4gICAgZ2V0IGlzRGVsZXRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzRGVsZXRlZDtcbiAgICB9XG4gICAgc2V0IGlzRGVsZXRlZCh2YWwpIHtcbiAgICAgICAgdGhpcy5faXNEZWxldGVkID0gdmFsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIHdpbGwgdGhyb3cgYW4gRXJyb3IgaWYgdGhlIEFwcCBoYXMgYWxyZWFkeSBiZWVuIGRlbGV0ZWQgLVxuICAgICAqIHVzZSBiZWZvcmUgcGVyZm9ybWluZyBBUEkgYWN0aW9ucyBvbiB0aGUgQXBwLlxuICAgICAqL1xuICAgIGNoZWNrRGVzdHJveWVkKCkge1xuICAgICAgICBpZiAodGhpcy5pc0RlbGV0ZWQpIHtcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiYXBwLWRlbGV0ZWRcIiAvKiBBcHBFcnJvci5BUFBfREVMRVRFRCAqLywgeyBhcHBOYW1lOiB0aGlzLl9uYW1lIH0pO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gUGFyc2UgdGhlIHRva2VuIGFuZCBjaGVjayB0byBzZWUgaWYgdGhlIGBleHBgIGNsYWltIGlzIGluIHRoZSBmdXR1cmUuXG4vLyBSZXBvcnRzIGFuIGVycm9yIHRvIHRoZSBjb25zb2xlIGlmIHRoZSB0b2tlbiBvciBjbGFpbSBjb3VsZCBub3QgYmUgcGFyc2VkLCBvciBpZiBgZXhwYCBpcyBpblxuLy8gdGhlIHBhc3QuXG5mdW5jdGlvbiB2YWxpZGF0ZVRva2VuVFRMKGJhc2U2NFRva2VuLCB0b2tlbk5hbWUpIHtcbiAgICBjb25zdCBzZWNvbmRQYXJ0ID0gYmFzZTY0RGVjb2RlKGJhc2U2NFRva2VuLnNwbGl0KCcuJylbMV0pO1xuICAgIGlmIChzZWNvbmRQYXJ0ID09PSBudWxsKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEZpcmViYXNlU2VydmVyQXBwICR7dG9rZW5OYW1lfSBpcyBpbnZhbGlkOiBzZWNvbmQgcGFydCBjb3VsZCBub3QgYmUgcGFyc2VkLmApO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGV4cENsYWltID0gSlNPTi5wYXJzZShzZWNvbmRQYXJ0KS5leHA7XG4gICAgaWYgKGV4cENsYWltID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRmlyZWJhc2VTZXJ2ZXJBcHAgJHt0b2tlbk5hbWV9IGlzIGludmFsaWQ6IGV4cGlyYXRpb24gY2xhaW0gY291bGQgbm90IGJlIHBhcnNlZGApO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGV4cCA9IEpTT04ucGFyc2Uoc2Vjb25kUGFydCkuZXhwICogMTAwMDtcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICBjb25zdCBkaWZmID0gZXhwIC0gbm93O1xuICAgIGlmIChkaWZmIDw9IDApIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRmlyZWJhc2VTZXJ2ZXJBcHAgJHt0b2tlbk5hbWV9IGlzIGludmFsaWQ6IHRoZSB0b2tlbiBoYXMgZXhwaXJlZC5gKTtcbiAgICB9XG59XG5jbGFzcyBGaXJlYmFzZVNlcnZlckFwcEltcGwgZXh0ZW5kcyBGaXJlYmFzZUFwcEltcGwge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMsIHNlcnZlckNvbmZpZywgbmFtZSwgY29udGFpbmVyKSB7XG4gICAgICAgIC8vIEJ1aWxkIGNvbmZpZ3VyYXRpb24gcGFyYW1ldGVycyBmb3IgdGhlIEZpcmViYXNlQXBwSW1wbCBiYXNlIGNsYXNzLlxuICAgICAgICBjb25zdCBhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQgPSBzZXJ2ZXJDb25maWcuYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gc2VydmVyQ29uZmlnLmF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZFxuICAgICAgICAgICAgOiB0cnVlO1xuICAgICAgICAvLyBDcmVhdGUgdGhlIEZpcmViYXNlQXBwU2V0dGluZ3Mgb2JqZWN0IGZvciB0aGUgRmlyZWJhc2VBcHBJbXAgY29uc3RydWN0b3IuXG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IHtcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICBhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWRcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKG9wdGlvbnMuYXBpS2V5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIENvbnN0cnVjdCB0aGUgcGFyZW50IEZpcmViYXNlQXBwSW1wIG9iamVjdC5cbiAgICAgICAgICAgIHN1cGVyKG9wdGlvbnMsIGNvbmZpZywgY29udGFpbmVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGFwcEltcGwgPSBvcHRpb25zO1xuICAgICAgICAgICAgc3VwZXIoYXBwSW1wbC5vcHRpb25zLCBjb25maWcsIGNvbnRhaW5lcik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gTm93IGNvbnN0cnVjdCB0aGUgZGF0YSBmb3IgdGhlIEZpcmViYXNlU2VydmVyQXBwSW1wbC5cbiAgICAgICAgdGhpcy5fc2VydmVyQ29uZmlnID0ge1xuICAgICAgICAgICAgYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkLFxuICAgICAgICAgICAgLi4uc2VydmVyQ29uZmlnXG4gICAgICAgIH07XG4gICAgICAgIC8vIEVuc3VyZSB0aGF0IHRoZSBjdXJyZW50IHRpbWUgaXMgd2l0aGluIHRoZSBgYXV0aElkdG9rZW5gIHdpbmRvdyBvZiB2YWxpZGl0eS5cbiAgICAgICAgaWYgKHRoaXMuX3NlcnZlckNvbmZpZy5hdXRoSWRUb2tlbikge1xuICAgICAgICAgICAgdmFsaWRhdGVUb2tlblRUTCh0aGlzLl9zZXJ2ZXJDb25maWcuYXV0aElkVG9rZW4sICdhdXRoSWRUb2tlbicpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEVuc3VyZSB0aGF0IHRoZSBjdXJyZW50IHRpbWUgaXMgd2l0aGluIHRoZSBgYXBwQ2hlY2tUb2tlbmAgd2luZG93IG9mIHZhbGlkaXR5LlxuICAgICAgICBpZiAodGhpcy5fc2VydmVyQ29uZmlnLmFwcENoZWNrVG9rZW4pIHtcbiAgICAgICAgICAgIHZhbGlkYXRlVG9rZW5UVEwodGhpcy5fc2VydmVyQ29uZmlnLmFwcENoZWNrVG9rZW4sICdhcHBDaGVja1Rva2VuJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZmluYWxpemF0aW9uUmVnaXN0cnkgPSBudWxsO1xuICAgICAgICBpZiAodHlwZW9mIEZpbmFsaXphdGlvblJlZ2lzdHJ5ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGhpcy5fZmluYWxpemF0aW9uUmVnaXN0cnkgPSBuZXcgRmluYWxpemF0aW9uUmVnaXN0cnkoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXV0b21hdGljQ2xlYW51cCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcmVmQ291bnQgPSAwO1xuICAgICAgICB0aGlzLmluY1JlZkNvdW50KHRoaXMuX3NlcnZlckNvbmZpZy5yZWxlYXNlT25EZXJlZik7XG4gICAgICAgIC8vIERvIG5vdCByZXRhaW4gYSBoYXJkIHJlZmVyZW5jZSB0byB0aGUgZHJlZiBvYmplY3QsIG90aGVyd2lzZSB0aGUgRmluYWxpemF0aW9uUmVnaXN0cnlcbiAgICAgICAgLy8gd2lsbCBuZXZlciB0cmlnZ2VyLlxuICAgICAgICB0aGlzLl9zZXJ2ZXJDb25maWcucmVsZWFzZU9uRGVyZWYgPSB1bmRlZmluZWQ7XG4gICAgICAgIHNlcnZlckNvbmZpZy5yZWxlYXNlT25EZXJlZiA9IHVuZGVmaW5lZDtcbiAgICAgICAgcmVnaXN0ZXJWZXJzaW9uKG5hbWUkcSwgdmVyc2lvbiQxLCAnc2VydmVyYXBwJyk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgZ2V0IHJlZkNvdW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVmQ291bnQ7XG4gICAgfVxuICAgIC8vIEluY3JlbWVudCB0aGUgcmVmZXJlbmNlIGNvdW50IG9mIHRoaXMgc2VydmVyIGFwcC4gSWYgYW4gb2JqZWN0IGlzIHByb3ZpZGVkLCByZWdpc3RlciBpdFxuICAgIC8vIHdpdGggdGhlIGZpbmFsaXphdGlvbiByZWdpc3RyeS5cbiAgICBpbmNSZWZDb3VudChvYmopIHtcbiAgICAgICAgaWYgKHRoaXMuaXNEZWxldGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcmVmQ291bnQrKztcbiAgICAgICAgaWYgKG9iaiAhPT0gdW5kZWZpbmVkICYmIHRoaXMuX2ZpbmFsaXphdGlvblJlZ2lzdHJ5ICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLl9maW5hbGl6YXRpb25SZWdpc3RyeS5yZWdpc3RlcihvYmosIHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIERlY3JlbWVudCB0aGUgcmVmZXJlbmNlIGNvdW50LlxuICAgIGRlY1JlZkNvdW50KCkge1xuICAgICAgICBpZiAodGhpcy5pc0RlbGV0ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAtLXRoaXMuX3JlZkNvdW50O1xuICAgIH1cbiAgICAvLyBJbnZva2VkIGJ5IHRoZSBGaW5hbGl6YXRpb25SZWdpc3RyeSBjYWxsYmFjayB0byBub3RlIHRoYXQgdGhpcyBhcHAgc2hvdWxkIGdvIHRocm91Z2ggaXRzXG4gICAgLy8gcmVmZXJlbmNlIGNvdW50cyBhbmQgZGVsZXRlIGl0c2VsZiBpZiBubyByZWZlcmVuY2UgY291bnQgcmVtYWluLiBUaGUgY29vcmRpbmF0aW5nIGxvZ2ljIHRoYXRcbiAgICAvLyBoYW5kbGVzIHRoaXMgaXMgaW4gZGVsZXRlQXBwKC4uLikuXG4gICAgYXV0b21hdGljQ2xlYW51cCgpIHtcbiAgICAgICAgdm9pZCBkZWxldGVBcHAodGhpcyk7XG4gICAgfVxuICAgIGdldCBzZXR0aW5ncygpIHtcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5fc2VydmVyQ29uZmlnO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIHdpbGwgdGhyb3cgYW4gRXJyb3IgaWYgdGhlIEFwcCBoYXMgYWxyZWFkeSBiZWVuIGRlbGV0ZWQgLVxuICAgICAqIHVzZSBiZWZvcmUgcGVyZm9ybWluZyBBUEkgYWN0aW9ucyBvbiB0aGUgQXBwLlxuICAgICAqL1xuICAgIGNoZWNrRGVzdHJveWVkKCkge1xuICAgICAgICBpZiAodGhpcy5pc0RlbGV0ZWQpIHtcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwic2VydmVyLWFwcC1kZWxldGVkXCIgLyogQXBwRXJyb3IuU0VSVkVSX0FQUF9ERUxFVEVEICovKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVGhlIGN1cnJlbnQgU0RLIHZlcnNpb24uXG4gKlxuICogQHB1YmxpY1xuICovXG5jb25zdCBTREtfVkVSU0lPTiA9IHZlcnNpb247XG5mdW5jdGlvbiBpbml0aWFsaXplQXBwKF9vcHRpb25zLCByYXdDb25maWcgPSB7fSkge1xuICAgIGxldCBvcHRpb25zID0gX29wdGlvbnM7XG4gICAgaWYgKHR5cGVvZiByYXdDb25maWcgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIGNvbnN0IG5hbWUgPSByYXdDb25maWc7XG4gICAgICAgIHJhd0NvbmZpZyA9IHsgbmFtZSB9O1xuICAgIH1cbiAgICBjb25zdCBjb25maWcgPSB7XG4gICAgICAgIG5hbWU6IERFRkFVTFRfRU5UUllfTkFNRSxcbiAgICAgICAgYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkOiB0cnVlLFxuICAgICAgICAuLi5yYXdDb25maWdcbiAgICB9O1xuICAgIGNvbnN0IG5hbWUgPSBjb25maWcubmFtZTtcbiAgICBpZiAodHlwZW9mIG5hbWUgIT09ICdzdHJpbmcnIHx8ICFuYW1lKSB7XG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiYmFkLWFwcC1uYW1lXCIgLyogQXBwRXJyb3IuQkFEX0FQUF9OQU1FICovLCB7XG4gICAgICAgICAgICBhcHBOYW1lOiBTdHJpbmcobmFtZSlcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSBnZXREZWZhdWx0QXBwQ29uZmlnKCkpO1xuICAgIGlmICghb3B0aW9ucykge1xuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm5vLW9wdGlvbnNcIiAvKiBBcHBFcnJvci5OT19PUFRJT05TICovKTtcbiAgICB9XG4gICAgY29uc3QgZXhpc3RpbmdBcHAgPSBfYXBwcy5nZXQobmFtZSk7XG4gICAgaWYgKGV4aXN0aW5nQXBwKSB7XG4gICAgICAgIC8vIHJldHVybiB0aGUgZXhpc3RpbmcgYXBwIGlmIG9wdGlvbnMgYW5kIGNvbmZpZyBkZWVwIGVxdWFsIHRoZSBvbmVzIGluIHRoZSBleGlzdGluZyBhcHAuXG4gICAgICAgIGlmIChkZWVwRXF1YWwob3B0aW9ucywgZXhpc3RpbmdBcHAub3B0aW9ucykgJiZcbiAgICAgICAgICAgIGRlZXBFcXVhbChjb25maWcsIGV4aXN0aW5nQXBwLmNvbmZpZykpIHtcbiAgICAgICAgICAgIHJldHVybiBleGlzdGluZ0FwcDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiZHVwbGljYXRlLWFwcFwiIC8qIEFwcEVycm9yLkRVUExJQ0FURV9BUFAgKi8sIHsgYXBwTmFtZTogbmFtZSB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBjb250YWluZXIgPSBuZXcgQ29tcG9uZW50Q29udGFpbmVyKG5hbWUpO1xuICAgIGZvciAoY29uc3QgY29tcG9uZW50IG9mIF9jb21wb25lbnRzLnZhbHVlcygpKSB7XG4gICAgICAgIGNvbnRhaW5lci5hZGRDb21wb25lbnQoY29tcG9uZW50KTtcbiAgICB9XG4gICAgY29uc3QgbmV3QXBwID0gbmV3IEZpcmViYXNlQXBwSW1wbChvcHRpb25zLCBjb25maWcsIGNvbnRhaW5lcik7XG4gICAgX2FwcHMuc2V0KG5hbWUsIG5ld0FwcCk7XG4gICAgcmV0dXJuIG5ld0FwcDtcbn1cbmZ1bmN0aW9uIGluaXRpYWxpemVTZXJ2ZXJBcHAoX29wdGlvbnMsIF9zZXJ2ZXJBcHBDb25maWcgPSB7fSkge1xuICAgIGlmIChpc0Jyb3dzZXIoKSAmJiAhaXNXZWJXb3JrZXIoKSkge1xuICAgICAgICAvLyBGaXJlYmFzZVNlcnZlckFwcCBpc24ndCBkZXNpZ25lZCB0byBiZSBydW4gaW4gYnJvd3NlcnMuXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaW52YWxpZC1zZXJ2ZXItYXBwLWVudmlyb25tZW50XCIgLyogQXBwRXJyb3IuSU5WQUxJRF9TRVJWRVJfQVBQX0VOVklST05NRU5UICovKTtcbiAgICB9XG4gICAgbGV0IGZpcmViYXNlT3B0aW9ucztcbiAgICBsZXQgc2VydmVyQXBwU2V0dGluZ3MgPSBfc2VydmVyQXBwQ29uZmlnIHx8IHt9O1xuICAgIGlmIChfb3B0aW9ucykge1xuICAgICAgICBpZiAoX2lzRmlyZWJhc2VBcHAoX29wdGlvbnMpKSB7XG4gICAgICAgICAgICBmaXJlYmFzZU9wdGlvbnMgPSBfb3B0aW9ucy5vcHRpb25zO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKF9pc0ZpcmViYXNlU2VydmVyQXBwU2V0dGluZ3MoX29wdGlvbnMpKSB7XG4gICAgICAgICAgICBzZXJ2ZXJBcHBTZXR0aW5ncyA9IF9vcHRpb25zO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZmlyZWJhc2VPcHRpb25zID0gX29wdGlvbnM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHNlcnZlckFwcFNldHRpbmdzLmF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHNlcnZlckFwcFNldHRpbmdzLmF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCA9IHRydWU7XG4gICAgfVxuICAgIGZpcmViYXNlT3B0aW9ucyB8fCAoZmlyZWJhc2VPcHRpb25zID0gZ2V0RGVmYXVsdEFwcENvbmZpZygpKTtcbiAgICBpZiAoIWZpcmViYXNlT3B0aW9ucykge1xuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm5vLW9wdGlvbnNcIiAvKiBBcHBFcnJvci5OT19PUFRJT05TICovKTtcbiAgICB9XG4gICAgLy8gQnVpbGQgYW4gYXBwIG5hbWUgYmFzZWQgb24gYSBoYXNoIG9mIHRoZSBjb25maWd1cmF0aW9uIG9wdGlvbnMuXG4gICAgY29uc3QgbmFtZU9iaiA9IHtcbiAgICAgICAgLi4uc2VydmVyQXBwU2V0dGluZ3MsXG4gICAgICAgIC4uLmZpcmViYXNlT3B0aW9uc1xuICAgIH07XG4gICAgLy8gSG93ZXZlciwgRG8gbm90IG1hbmdsZSB0aGUgbmFtZSBiYXNlZCBvbiByZWxlYXNlT25EZXJlZiwgc2luY2UgaXQgd2lsbCB2YXJ5IGJldHdlZW4gdGhlXG4gICAgLy8gY29uc3RydWN0aW9uIG9mIEZpcmViYXNlU2VydmVyQXBwIGluc3RhbmNlcy4gRm9yIGV4YW1wbGUsIGlmIHRoZSBvYmplY3QgaXMgdGhlIHJlcXVlc3QgaGVhZGVycy5cbiAgICBpZiAobmFtZU9iai5yZWxlYXNlT25EZXJlZiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGRlbGV0ZSBuYW1lT2JqLnJlbGVhc2VPbkRlcmVmO1xuICAgIH1cbiAgICBjb25zdCBoYXNoQ29kZSA9IChzKSA9PiB7XG4gICAgICAgIHJldHVybiBbLi4uc10ucmVkdWNlKChoYXNoLCBjKSA9PiAoTWF0aC5pbXVsKDMxLCBoYXNoKSArIGMuY2hhckNvZGVBdCgwKSkgfCAwLCAwKTtcbiAgICB9O1xuICAgIGlmIChzZXJ2ZXJBcHBTZXR0aW5ncy5yZWxlYXNlT25EZXJlZiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmICh0eXBlb2YgRmluYWxpemF0aW9uUmVnaXN0cnkgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImZpbmFsaXphdGlvbi1yZWdpc3RyeS1ub3Qtc3VwcG9ydGVkXCIgLyogQXBwRXJyb3IuRklOQUxJWkFUSU9OX1JFR0lTVFJZX05PVF9TVVBQT1JURUQgKi8sIHt9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBuYW1lU3RyaW5nID0gJycgKyBoYXNoQ29kZShKU09OLnN0cmluZ2lmeShuYW1lT2JqKSk7XG4gICAgY29uc3QgZXhpc3RpbmdBcHAgPSBfc2VydmVyQXBwcy5nZXQobmFtZVN0cmluZyk7XG4gICAgaWYgKGV4aXN0aW5nQXBwKSB7XG4gICAgICAgIGV4aXN0aW5nQXBwLmluY1JlZkNvdW50KHNlcnZlckFwcFNldHRpbmdzLnJlbGVhc2VPbkRlcmVmKTtcbiAgICAgICAgcmV0dXJuIGV4aXN0aW5nQXBwO1xuICAgIH1cbiAgICBjb25zdCBjb250YWluZXIgPSBuZXcgQ29tcG9uZW50Q29udGFpbmVyKG5hbWVTdHJpbmcpO1xuICAgIGZvciAoY29uc3QgY29tcG9uZW50IG9mIF9jb21wb25lbnRzLnZhbHVlcygpKSB7XG4gICAgICAgIGNvbnRhaW5lci5hZGRDb21wb25lbnQoY29tcG9uZW50KTtcbiAgICB9XG4gICAgY29uc3QgbmV3QXBwID0gbmV3IEZpcmViYXNlU2VydmVyQXBwSW1wbChmaXJlYmFzZU9wdGlvbnMsIHNlcnZlckFwcFNldHRpbmdzLCBuYW1lU3RyaW5nLCBjb250YWluZXIpO1xuICAgIF9zZXJ2ZXJBcHBzLnNldChuYW1lU3RyaW5nLCBuZXdBcHApO1xuICAgIHJldHVybiBuZXdBcHA7XG59XG4vKipcbiAqIFJldHJpZXZlcyBhIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfSBpbnN0YW5jZS5cbiAqXG4gKiBXaGVuIGNhbGxlZCB3aXRoIG5vIGFyZ3VtZW50cywgdGhlIGRlZmF1bHQgYXBwIGlzIHJldHVybmVkLiBXaGVuIGFuIGFwcCBuYW1lXG4gKiBpcyBwcm92aWRlZCwgdGhlIGFwcCBjb3JyZXNwb25kaW5nIHRvIHRoYXQgbmFtZSBpcyByZXR1cm5lZC5cbiAqXG4gKiBBbiBleGNlcHRpb24gaXMgdGhyb3duIGlmIHRoZSBhcHAgYmVpbmcgcmV0cmlldmVkIGhhcyBub3QgeWV0IGJlZW5cbiAqIGluaXRpYWxpemVkLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiAvLyBSZXR1cm4gdGhlIGRlZmF1bHQgYXBwXG4gKiBjb25zdCBhcHAgPSBnZXRBcHAoKTtcbiAqIGBgYFxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiAvLyBSZXR1cm4gYSBuYW1lZCBhcHBcbiAqIGNvbnN0IG90aGVyQXBwID0gZ2V0QXBwKFwib3RoZXJBcHBcIik7XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gbmFtZSAtIE9wdGlvbmFsIG5hbWUgb2YgdGhlIGFwcCB0byByZXR1cm4uIElmIG5vIG5hbWUgaXNcbiAqICAgcHJvdmlkZWQsIHRoZSBkZWZhdWx0IGlzIGBcIltERUZBVUxUXVwiYC5cbiAqXG4gKiBAcmV0dXJucyBUaGUgYXBwIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHByb3ZpZGVkIGFwcCBuYW1lLlxuICogICBJZiBubyBhcHAgbmFtZSBpcyBwcm92aWRlZCwgdGhlIGRlZmF1bHQgYXBwIGlzIHJldHVybmVkLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZnVuY3Rpb24gZ2V0QXBwKG5hbWUgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcbiAgICBjb25zdCBhcHAgPSBfYXBwcy5nZXQobmFtZSk7XG4gICAgaWYgKCFhcHAgJiYgbmFtZSA9PT0gREVGQVVMVF9FTlRSWV9OQU1FICYmIGdldERlZmF1bHRBcHBDb25maWcoKSkge1xuICAgICAgICByZXR1cm4gaW5pdGlhbGl6ZUFwcCgpO1xuICAgIH1cbiAgICBpZiAoIWFwcCkge1xuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm5vLWFwcFwiIC8qIEFwcEVycm9yLk5PX0FQUCAqLywgeyBhcHBOYW1lOiBuYW1lIH0pO1xuICAgIH1cbiAgICByZXR1cm4gYXBwO1xufVxuLyoqXG4gKiBBIChyZWFkLW9ubHkpIGFycmF5IG9mIGFsbCBpbml0aWFsaXplZCBhcHBzLlxuICogQHB1YmxpY1xuICovXG5mdW5jdGlvbiBnZXRBcHBzKCkge1xuICAgIHJldHVybiBBcnJheS5mcm9tKF9hcHBzLnZhbHVlcygpKTtcbn1cbi8qKlxuICogUmVuZGVycyB0aGlzIGFwcCB1bnVzYWJsZSBhbmQgZnJlZXMgdGhlIHJlc291cmNlcyBvZiBhbGwgYXNzb2NpYXRlZFxuICogc2VydmljZXMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYGphdmFzY3JpcHRcbiAqIGRlbGV0ZUFwcChhcHApXG4gKiAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICogICAgIGNvbnNvbGUubG9nKFwiQXBwIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuICogICB9KVxuICogICAuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcbiAqICAgICBjb25zb2xlLmxvZyhcIkVycm9yIGRlbGV0aW5nIGFwcDpcIiwgZXJyb3IpO1xuICogICB9KTtcbiAqIGBgYFxuICpcbiAqIEBwdWJsaWNcbiAqL1xuYXN5bmMgZnVuY3Rpb24gZGVsZXRlQXBwKGFwcCkge1xuICAgIGxldCBjbGVhbnVwUHJvdmlkZXJzID0gZmFsc2U7XG4gICAgY29uc3QgbmFtZSA9IGFwcC5uYW1lO1xuICAgIGlmIChfYXBwcy5oYXMobmFtZSkpIHtcbiAgICAgICAgY2xlYW51cFByb3ZpZGVycyA9IHRydWU7XG4gICAgICAgIF9hcHBzLmRlbGV0ZShuYW1lKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoX3NlcnZlckFwcHMuaGFzKG5hbWUpKSB7XG4gICAgICAgIGNvbnN0IGZpcmViYXNlU2VydmVyQXBwID0gYXBwO1xuICAgICAgICBpZiAoZmlyZWJhc2VTZXJ2ZXJBcHAuZGVjUmVmQ291bnQoKSA8PSAwKSB7XG4gICAgICAgICAgICBfc2VydmVyQXBwcy5kZWxldGUobmFtZSk7XG4gICAgICAgICAgICBjbGVhbnVwUHJvdmlkZXJzID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoY2xlYW51cFByb3ZpZGVycykge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChhcHAuY29udGFpbmVyXG4gICAgICAgICAgICAuZ2V0UHJvdmlkZXJzKClcbiAgICAgICAgICAgIC5tYXAocHJvdmlkZXIgPT4gcHJvdmlkZXIuZGVsZXRlKCkpKTtcbiAgICAgICAgYXBwLmlzRGVsZXRlZCA9IHRydWU7XG4gICAgfVxufVxuLyoqXG4gKiBSZWdpc3RlcnMgYSBsaWJyYXJ5J3MgbmFtZSBhbmQgdmVyc2lvbiBmb3IgcGxhdGZvcm0gbG9nZ2luZyBwdXJwb3Nlcy5cbiAqIEBwYXJhbSBsaWJyYXJ5IC0gTmFtZSBvZiAxcCBvciAzcCBsaWJyYXJ5IChlLmcuIGZpcmVzdG9yZSwgYW5ndWxhcmZpcmUpXG4gKiBAcGFyYW0gdmVyc2lvbiAtIEN1cnJlbnQgdmVyc2lvbiBvZiB0aGF0IGxpYnJhcnkuXG4gKiBAcGFyYW0gdmFyaWFudCAtIEJ1bmRsZSB2YXJpYW50LCBlLmcuLCBub2RlLCBybiwgZXRjLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZnVuY3Rpb24gcmVnaXN0ZXJWZXJzaW9uKGxpYnJhcnlLZXlPck5hbWUsIHZlcnNpb24sIHZhcmlhbnQpIHtcbiAgICAvLyBUT0RPOiBXZSBjYW4gdXNlIHRoaXMgY2hlY2sgdG8gd2hpdGVsaXN0IHN0cmluZ3Mgd2hlbi9pZiB3ZSBzZXQgdXBcbiAgICAvLyBhIGdvb2Qgd2hpdGVsaXN0IHN5c3RlbS5cbiAgICBsZXQgbGlicmFyeSA9IFBMQVRGT1JNX0xPR19TVFJJTkdbbGlicmFyeUtleU9yTmFtZV0gPz8gbGlicmFyeUtleU9yTmFtZTtcbiAgICBpZiAodmFyaWFudCkge1xuICAgICAgICBsaWJyYXJ5ICs9IGAtJHt2YXJpYW50fWA7XG4gICAgfVxuICAgIGNvbnN0IGxpYnJhcnlNaXNtYXRjaCA9IGxpYnJhcnkubWF0Y2goL1xcc3xcXC8vKTtcbiAgICBjb25zdCB2ZXJzaW9uTWlzbWF0Y2ggPSB2ZXJzaW9uLm1hdGNoKC9cXHN8XFwvLyk7XG4gICAgaWYgKGxpYnJhcnlNaXNtYXRjaCB8fCB2ZXJzaW9uTWlzbWF0Y2gpIHtcbiAgICAgICAgY29uc3Qgd2FybmluZyA9IFtcbiAgICAgICAgICAgIGBVbmFibGUgdG8gcmVnaXN0ZXIgbGlicmFyeSBcIiR7bGlicmFyeX1cIiB3aXRoIHZlcnNpb24gXCIke3ZlcnNpb259XCI6YFxuICAgICAgICBdO1xuICAgICAgICBpZiAobGlicmFyeU1pc21hdGNoKSB7XG4gICAgICAgICAgICB3YXJuaW5nLnB1c2goYGxpYnJhcnkgbmFtZSBcIiR7bGlicmFyeX1cIiBjb250YWlucyBpbGxlZ2FsIGNoYXJhY3RlcnMgKHdoaXRlc3BhY2Ugb3IgXCIvXCIpYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxpYnJhcnlNaXNtYXRjaCAmJiB2ZXJzaW9uTWlzbWF0Y2gpIHtcbiAgICAgICAgICAgIHdhcm5pbmcucHVzaCgnYW5kJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZlcnNpb25NaXNtYXRjaCkge1xuICAgICAgICAgICAgd2FybmluZy5wdXNoKGB2ZXJzaW9uIG5hbWUgXCIke3ZlcnNpb259XCIgY29udGFpbnMgaWxsZWdhbCBjaGFyYWN0ZXJzICh3aGl0ZXNwYWNlIG9yIFwiL1wiKWApO1xuICAgICAgICB9XG4gICAgICAgIGxvZ2dlci53YXJuKHdhcm5pbmcuam9pbignICcpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudChgJHtsaWJyYXJ5fS12ZXJzaW9uYCwgKCkgPT4gKHsgbGlicmFyeSwgdmVyc2lvbiB9KSwgXCJWRVJTSU9OXCIgLyogQ29tcG9uZW50VHlwZS5WRVJTSU9OICovKSk7XG59XG4vKipcbiAqIFNldHMgbG9nIGhhbmRsZXIgZm9yIGFsbCBGaXJlYmFzZSBTREtzLlxuICogQHBhcmFtIGxvZ0NhbGxiYWNrIC0gQW4gb3B0aW9uYWwgY3VzdG9tIGxvZyBoYW5kbGVyIHRoYXQgZXhlY3V0ZXMgdXNlciBjb2RlIHdoZW5ldmVyXG4gKiB0aGUgRmlyZWJhc2UgU0RLIG1ha2VzIGEgbG9nZ2luZyBjYWxsLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZnVuY3Rpb24gb25Mb2cobG9nQ2FsbGJhY2ssIG9wdGlvbnMpIHtcbiAgICBpZiAobG9nQ2FsbGJhY2sgIT09IG51bGwgJiYgdHlwZW9mIGxvZ0NhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaW52YWxpZC1sb2ctYXJndW1lbnRcIiAvKiBBcHBFcnJvci5JTlZBTElEX0xPR19BUkdVTUVOVCAqLyk7XG4gICAgfVxuICAgIHNldFVzZXJMb2dIYW5kbGVyKGxvZ0NhbGxiYWNrLCBvcHRpb25zKTtcbn1cbi8qKlxuICogU2V0cyBsb2cgbGV2ZWwgZm9yIGFsbCBGaXJlYmFzZSBTREtzLlxuICpcbiAqIEFsbCBvZiB0aGUgbG9nIHR5cGVzIGFib3ZlIHRoZSBjdXJyZW50IGxvZyBsZXZlbCBhcmUgY2FwdHVyZWQgKGkuZS4gaWZcbiAqIHlvdSBzZXQgdGhlIGxvZyBsZXZlbCB0byBgaW5mb2AsIGVycm9ycyBhcmUgbG9nZ2VkLCBidXQgYGRlYnVnYCBhbmRcbiAqIGB2ZXJib3NlYCBsb2dzIGFyZSBub3QpLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZnVuY3Rpb24gc2V0TG9nTGV2ZWwobG9nTGV2ZWwpIHtcbiAgICBzZXRMb2dMZXZlbCQxKGxvZ0xldmVsKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNvbnN0IERCX05BTUUgPSAnZmlyZWJhc2UtaGVhcnRiZWF0LWRhdGFiYXNlJztcbmNvbnN0IERCX1ZFUlNJT04gPSAxO1xuY29uc3QgU1RPUkVfTkFNRSA9ICdmaXJlYmFzZS1oZWFydGJlYXQtc3RvcmUnO1xubGV0IGRiUHJvbWlzZSA9IG51bGw7XG5mdW5jdGlvbiBnZXREYlByb21pc2UoKSB7XG4gICAgaWYgKCFkYlByb21pc2UpIHtcbiAgICAgICAgZGJQcm9taXNlID0gb3BlbkRCKERCX05BTUUsIERCX1ZFUlNJT04sIHtcbiAgICAgICAgICAgIHVwZ3JhZGU6IChkYiwgb2xkVmVyc2lvbikgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFdlIGRvbid0IHVzZSAnYnJlYWsnIGluIHRoaXMgc3dpdGNoIHN0YXRlbWVudCwgdGhlIGZhbGwtdGhyb3VnaFxuICAgICAgICAgICAgICAgIC8vIGJlaGF2aW9yIGlzIHdoYXQgd2Ugd2FudCwgYmVjYXVzZSBpZiB0aGVyZSBhcmUgbXVsdGlwbGUgdmVyc2lvbnMgYmV0d2VlblxuICAgICAgICAgICAgICAgIC8vIHRoZSBvbGQgdmVyc2lvbiBhbmQgdGhlIGN1cnJlbnQgdmVyc2lvbiwgd2Ugd2FudCBBTEwgdGhlIG1pZ3JhdGlvbnNcbiAgICAgICAgICAgICAgICAvLyB0aGF0IGNvcnJlc3BvbmQgdG8gdGhvc2UgdmVyc2lvbnMgdG8gcnVuLCBub3Qgb25seSB0aGUgbGFzdCBvbmUuXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlZmF1bHQtY2FzZVxuICAgICAgICAgICAgICAgIHN3aXRjaCAob2xkVmVyc2lvbikge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRiLmNyZWF0ZU9iamVjdFN0b3JlKFNUT1JFX05BTUUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTYWZhcmkvaU9TIGJyb3dzZXJzIHRocm93IG9jY2FzaW9uYWwgZXhjZXB0aW9ucyBvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRiLmNyZWF0ZU9iamVjdFN0b3JlKCkgdGhhdCBtYXkgYmUgYSBidWcuIEF2b2lkIGJsb2NraW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHJlc3Qgb2YgdGhlIGFwcCBmdW5jdGlvbmFsaXR5LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLmNhdGNoKGUgPT4ge1xuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpZGItb3BlblwiIC8qIEFwcEVycm9yLklEQl9PUEVOICovLCB7XG4gICAgICAgICAgICAgICAgb3JpZ2luYWxFcnJvck1lc3NhZ2U6IGUubWVzc2FnZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gZGJQcm9taXNlO1xufVxuYXN5bmMgZnVuY3Rpb24gcmVhZEhlYXJ0YmVhdHNGcm9tSW5kZXhlZERCKGFwcCkge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGRiID0gYXdhaXQgZ2V0RGJQcm9taXNlKCk7XG4gICAgICAgIGNvbnN0IHR4ID0gZGIudHJhbnNhY3Rpb24oU1RPUkVfTkFNRSk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHR4Lm9iamVjdFN0b3JlKFNUT1JFX05BTUUpLmdldChjb21wdXRlS2V5KGFwcCkpO1xuICAgICAgICAvLyBXZSBhbHJlYWR5IGhhdmUgdGhlIHZhbHVlIGJ1dCB0eC5kb25lIGNhbiB0aHJvdyxcbiAgICAgICAgLy8gc28gd2UgbmVlZCB0byBhd2FpdCBpdCBoZXJlIHRvIGNhdGNoIGVycm9yc1xuICAgICAgICBhd2FpdCB0eC5kb25lO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEZpcmViYXNlRXJyb3IpIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKGUubWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBpZGJHZXRFcnJvciA9IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaWRiLWdldFwiIC8qIEFwcEVycm9yLklEQl9HRVQgKi8sIHtcbiAgICAgICAgICAgICAgICBvcmlnaW5hbEVycm9yTWVzc2FnZTogZT8ubWVzc2FnZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBsb2dnZXIud2FybihpZGJHZXRFcnJvci5tZXNzYWdlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmFzeW5jIGZ1bmN0aW9uIHdyaXRlSGVhcnRiZWF0c1RvSW5kZXhlZERCKGFwcCwgaGVhcnRiZWF0T2JqZWN0KSB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZGIgPSBhd2FpdCBnZXREYlByb21pc2UoKTtcbiAgICAgICAgY29uc3QgdHggPSBkYi50cmFuc2FjdGlvbihTVE9SRV9OQU1FLCAncmVhZHdyaXRlJyk7XG4gICAgICAgIGNvbnN0IG9iamVjdFN0b3JlID0gdHgub2JqZWN0U3RvcmUoU1RPUkVfTkFNRSk7XG4gICAgICAgIGF3YWl0IG9iamVjdFN0b3JlLnB1dChoZWFydGJlYXRPYmplY3QsIGNvbXB1dGVLZXkoYXBwKSk7XG4gICAgICAgIGF3YWl0IHR4LmRvbmU7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgRmlyZWJhc2VFcnJvcikge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oZS5tZXNzYWdlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGlkYkdldEVycm9yID0gRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpZGItc2V0XCIgLyogQXBwRXJyb3IuSURCX1dSSVRFICovLCB7XG4gICAgICAgICAgICAgICAgb3JpZ2luYWxFcnJvck1lc3NhZ2U6IGU/Lm1lc3NhZ2VcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oaWRiR2V0RXJyb3IubWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBjb21wdXRlS2V5KGFwcCkge1xuICAgIHJldHVybiBgJHthcHAubmFtZX0hJHthcHAub3B0aW9ucy5hcHBJZH1gO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY29uc3QgTUFYX0hFQURFUl9CWVRFUyA9IDEwMjQ7XG5jb25zdCBNQVhfTlVNX1NUT1JFRF9IRUFSVEJFQVRTID0gMzA7XG5jbGFzcyBIZWFydGJlYXRTZXJ2aWNlSW1wbCB7XG4gICAgY29uc3RydWN0b3IoY29udGFpbmVyKSB7XG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgICAgICAvKipcbiAgICAgICAgICogSW4tbWVtb3J5IGNhY2hlIGZvciBoZWFydGJlYXRzLCB1c2VkIGJ5IGdldEhlYXJ0YmVhdHNIZWFkZXIoKSB0byBnZW5lcmF0ZVxuICAgICAgICAgKiB0aGUgaGVhZGVyIHN0cmluZy5cbiAgICAgICAgICogU3RvcmVzIG9uZSByZWNvcmQgcGVyIGRhdGUuIFRoaXMgd2lsbCBiZSBjb25zb2xpZGF0ZWQgaW50byB0aGUgc3RhbmRhcmRcbiAgICAgICAgICogZm9ybWF0IG9mIG9uZSByZWNvcmQgcGVyIHVzZXIgYWdlbnQgc3RyaW5nIGJlZm9yZSBiZWluZyBzZW50IGFzIGEgaGVhZGVyLlxuICAgICAgICAgKiBQb3B1bGF0ZWQgZnJvbSBpbmRleGVkREIgd2hlbiB0aGUgY29udHJvbGxlciBpcyBpbnN0YW50aWF0ZWQgYW5kIHNob3VsZFxuICAgICAgICAgKiBiZSBrZXB0IGluIHN5bmMgd2l0aCBpbmRleGVkREIuXG4gICAgICAgICAqIExlYXZlIHB1YmxpYyBmb3IgZWFzaWVyIHRlc3RpbmcuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUgPSBudWxsO1xuICAgICAgICBjb25zdCBhcHAgPSB0aGlzLmNvbnRhaW5lci5nZXRQcm92aWRlcignYXBwJykuZ2V0SW1tZWRpYXRlKCk7XG4gICAgICAgIHRoaXMuX3N0b3JhZ2UgPSBuZXcgSGVhcnRiZWF0U3RvcmFnZUltcGwoYXBwKTtcbiAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlUHJvbWlzZSA9IHRoaXMuX3N0b3JhZ2UucmVhZCgpLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSA9IHJlc3VsdDtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgdG8gcmVwb3J0IGEgaGVhcnRiZWF0LiBUaGUgZnVuY3Rpb24gd2lsbCBnZW5lcmF0ZVxuICAgICAqIGEgSGVhcnRiZWF0c0J5VXNlckFnZW50IG9iamVjdCwgdXBkYXRlIGhlYXJ0YmVhdHNDYWNoZSwgYW5kIHBlcnNpc3QgaXRcbiAgICAgKiB0byBJbmRleGVkREIuXG4gICAgICogTm90ZSB0aGF0IHdlIG9ubHkgc3RvcmUgb25lIGhlYXJ0YmVhdCBwZXIgZGF5LiBTbyBpZiBhIGhlYXJ0YmVhdCBmb3IgdG9kYXkgaXNcbiAgICAgKiBhbHJlYWR5IGxvZ2dlZCwgc3Vic2VxdWVudCBjYWxscyB0byB0aGlzIGZ1bmN0aW9uIGluIHRoZSBzYW1lIGRheSB3aWxsIGJlIGlnbm9yZWQuXG4gICAgICovXG4gICAgYXN5bmMgdHJpZ2dlckhlYXJ0YmVhdCgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHBsYXRmb3JtTG9nZ2VyID0gdGhpcy5jb250YWluZXJcbiAgICAgICAgICAgICAgICAuZ2V0UHJvdmlkZXIoJ3BsYXRmb3JtLWxvZ2dlcicpXG4gICAgICAgICAgICAgICAgLmdldEltbWVkaWF0ZSgpO1xuICAgICAgICAgICAgLy8gVGhpcyBpcyB0aGUgXCJGaXJlYmFzZSB1c2VyIGFnZW50XCIgc3RyaW5nIGZyb20gdGhlIHBsYXRmb3JtIGxvZ2dlclxuICAgICAgICAgICAgLy8gc2VydmljZSwgbm90IHRoZSBicm93c2VyIHVzZXIgYWdlbnQuXG4gICAgICAgICAgICBjb25zdCBhZ2VudCA9IHBsYXRmb3JtTG9nZ2VyLmdldFBsYXRmb3JtSW5mb1N0cmluZygpO1xuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IGdldFVUQ0RhdGVTdHJpbmcoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9oZWFydGJlYXRzQ2FjaGU/LmhlYXJ0YmVhdHMgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSA9IGF3YWl0IHRoaXMuX2hlYXJ0YmVhdHNDYWNoZVByb21pc2U7XG4gICAgICAgICAgICAgICAgLy8gSWYgd2UgZmFpbGVkIHRvIGNvbnN0cnVjdCBhIGhlYXJ0YmVhdHMgY2FjaGUsIHRoZW4gcmV0dXJuIGltbWVkaWF0ZWx5LlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9oZWFydGJlYXRzQ2FjaGU/LmhlYXJ0YmVhdHMgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRG8gbm90IHN0b3JlIGEgaGVhcnRiZWF0IGlmIG9uZSBpcyBhbHJlYWR5IHN0b3JlZCBmb3IgdGhpcyBkYXlcbiAgICAgICAgICAgIC8vIG9yIGlmIGEgaGVhZGVyIGhhcyBhbHJlYWR5IGJlZW4gc2VudCB0b2RheS5cbiAgICAgICAgICAgIGlmICh0aGlzLl9oZWFydGJlYXRzQ2FjaGUubGFzdFNlbnRIZWFydGJlYXREYXRlID09PSBkYXRlIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMuc29tZShzaW5nbGVEYXRlSGVhcnRiZWF0ID0+IHNpbmdsZURhdGVIZWFydGJlYXQuZGF0ZSA9PT0gZGF0ZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBUaGVyZSBpcyBubyBlbnRyeSBmb3IgdGhpcyBkYXRlLiBDcmVhdGUgb25lLlxuICAgICAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzLnB1c2goeyBkYXRlLCBhZ2VudCB9KTtcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgbnVtYmVyIG9mIHN0b3JlZCBoZWFydGJlYXRzIGV4Y2VlZHMgdGhlIG1heGltdW0gbnVtYmVyIG9mIHN0b3JlZCBoZWFydGJlYXRzLCByZW1vdmUgdGhlIGhlYXJ0YmVhdCB3aXRoIHRoZSBlYXJsaWVzdCBkYXRlLlxuICAgICAgICAgICAgICAgIC8vIFNpbmNlIHRoaXMgaXMgZXhlY3V0ZWQgZWFjaCB0aW1lIGEgaGVhcnRiZWF0IGlzIHB1c2hlZCwgdGhlIGxpbWl0IGNhbiBvbmx5IGJlIGV4Y2VlZGVkIGJ5IG9uZSwgc28gb25seSBvbmUgbmVlZHMgdG8gYmUgcmVtb3ZlZC5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMubGVuZ3RoID4gTUFYX05VTV9TVE9SRURfSEVBUlRCRUFUUykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlYXJsaWVzdEhlYXJ0YmVhdElkeCA9IGdldEVhcmxpZXN0SGVhcnRiZWF0SWR4KHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMuc3BsaWNlKGVhcmxpZXN0SGVhcnRiZWF0SWR4LCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc3RvcmFnZS5vdmVyd3JpdGUodGhpcy5faGVhcnRiZWF0c0NhY2hlKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGJhc2U2NCBlbmNvZGVkIHN0cmluZyB3aGljaCBjYW4gYmUgYXR0YWNoZWQgdG8gdGhlIGhlYXJ0YmVhdC1zcGVjaWZpYyBoZWFkZXIgZGlyZWN0bHkuXG4gICAgICogSXQgYWxzbyBjbGVhcnMgYWxsIGhlYXJ0YmVhdHMgZnJvbSBtZW1vcnkgYXMgd2VsbCBhcyBpbiBJbmRleGVkREIuXG4gICAgICpcbiAgICAgKiBOT1RFOiBDb25zdW1pbmcgcHJvZHVjdCBTREtzIHNob3VsZCBub3Qgc2VuZCB0aGUgaGVhZGVyIGlmIHRoaXMgbWV0aG9kXG4gICAgICogcmV0dXJucyBhbiBlbXB0eSBzdHJpbmcuXG4gICAgICovXG4gICAgYXN5bmMgZ2V0SGVhcnRiZWF0c0hlYWRlcigpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9oZWFydGJlYXRzQ2FjaGUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLl9oZWFydGJlYXRzQ2FjaGVQcm9taXNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgaXQncyBzdGlsbCBudWxsIG9yIHRoZSBhcnJheSBpcyBlbXB0eSwgdGhlcmUgaXMgbm8gZGF0YSB0byBzZW5kLlxuICAgICAgICAgICAgaWYgKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZT8uaGVhcnRiZWF0cyA9PSBudWxsIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IGdldFVUQ0RhdGVTdHJpbmcoKTtcbiAgICAgICAgICAgIC8vIEV4dHJhY3QgYXMgbWFueSBoZWFydGJlYXRzIGZyb20gdGhlIGNhY2hlIGFzIHdpbGwgZml0IHVuZGVyIHRoZSBzaXplIGxpbWl0LlxuICAgICAgICAgICAgY29uc3QgeyBoZWFydGJlYXRzVG9TZW5kLCB1bnNlbnRFbnRyaWVzIH0gPSBleHRyYWN0SGVhcnRiZWF0c0ZvckhlYWRlcih0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cyk7XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJTdHJpbmcgPSBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyhKU09OLnN0cmluZ2lmeSh7IHZlcnNpb246IDIsIGhlYXJ0YmVhdHM6IGhlYXJ0YmVhdHNUb1NlbmQgfSkpO1xuICAgICAgICAgICAgLy8gU3RvcmUgbGFzdCBzZW50IGRhdGUgdG8gcHJldmVudCBhbm90aGVyIGJlaW5nIGxvZ2dlZC9zZW50IGZvciB0aGUgc2FtZSBkYXkuXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUubGFzdFNlbnRIZWFydGJlYXREYXRlID0gZGF0ZTtcbiAgICAgICAgICAgIGlmICh1bnNlbnRFbnRyaWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAvLyBTdG9yZSBhbnkgdW5zZW50IGVudHJpZXMgaWYgdGhleSBleGlzdC5cbiAgICAgICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cyA9IHVuc2VudEVudHJpZXM7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBzZWVtcyBtb3JlIGxpa2VseSB0aGFuIGVtcHR5aW5nIHRoZSBhcnJheSAoYmVsb3cpIHRvIGxlYWQgdG8gc29tZSBvZGQgc3RhdGVcbiAgICAgICAgICAgICAgICAvLyBzaW5jZSB0aGUgY2FjaGUgaXNuJ3QgZW1wdHkgYW5kIHRoaXMgd2lsbCBiZSBjYWxsZWQgYWdhaW4gb24gdGhlIG5leHQgcmVxdWVzdCxcbiAgICAgICAgICAgICAgICAvLyBhbmQgaXMgcHJvYmFibHkgc2FmZXN0IGlmIHdlIGF3YWl0IGl0LlxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuX3N0b3JhZ2Uub3ZlcndyaXRlKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cyA9IFtdO1xuICAgICAgICAgICAgICAgIC8vIERvIG5vdCB3YWl0IGZvciB0aGlzLCB0byByZWR1Y2UgbGF0ZW5jeS5cbiAgICAgICAgICAgICAgICB2b2lkIHRoaXMuX3N0b3JhZ2Uub3ZlcndyaXRlKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaGVhZGVyU3RyaW5nO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBsb2dnZXIud2FybihlKTtcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGdldFVUQ0RhdGVTdHJpbmcoKSB7XG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgIC8vIFJldHVybnMgZGF0ZSBmb3JtYXQgJ1lZWVktTU0tREQnXG4gICAgcmV0dXJuIHRvZGF5LnRvSVNPU3RyaW5nKCkuc3Vic3RyaW5nKDAsIDEwKTtcbn1cbmZ1bmN0aW9uIGV4dHJhY3RIZWFydGJlYXRzRm9ySGVhZGVyKGhlYXJ0YmVhdHNDYWNoZSwgbWF4U2l6ZSA9IE1BWF9IRUFERVJfQllURVMpIHtcbiAgICAvLyBIZWFydGJlYXRzIGdyb3VwZWQgYnkgdXNlciBhZ2VudCBpbiB0aGUgc3RhbmRhcmQgZm9ybWF0IHRvIGJlIHNlbnQgaW5cbiAgICAvLyB0aGUgaGVhZGVyLlxuICAgIGNvbnN0IGhlYXJ0YmVhdHNUb1NlbmQgPSBbXTtcbiAgICAvLyBTaW5nbGUgZGF0ZSBmb3JtYXQgaGVhcnRiZWF0cyB0aGF0IGFyZSBub3Qgc2VudC5cbiAgICBsZXQgdW5zZW50RW50cmllcyA9IGhlYXJ0YmVhdHNDYWNoZS5zbGljZSgpO1xuICAgIGZvciAoY29uc3Qgc2luZ2xlRGF0ZUhlYXJ0YmVhdCBvZiBoZWFydGJlYXRzQ2FjaGUpIHtcbiAgICAgICAgLy8gTG9vayBmb3IgYW4gZXhpc3RpbmcgZW50cnkgd2l0aCB0aGUgc2FtZSB1c2VyIGFnZW50LlxuICAgICAgICBjb25zdCBoZWFydGJlYXRFbnRyeSA9IGhlYXJ0YmVhdHNUb1NlbmQuZmluZChoYiA9PiBoYi5hZ2VudCA9PT0gc2luZ2xlRGF0ZUhlYXJ0YmVhdC5hZ2VudCk7XG4gICAgICAgIGlmICghaGVhcnRiZWF0RW50cnkpIHtcbiAgICAgICAgICAgIC8vIElmIG5vIGVudHJ5IGZvciB0aGlzIHVzZXIgYWdlbnQgZXhpc3RzLCBjcmVhdGUgb25lLlxuICAgICAgICAgICAgaGVhcnRiZWF0c1RvU2VuZC5wdXNoKHtcbiAgICAgICAgICAgICAgICBhZ2VudDogc2luZ2xlRGF0ZUhlYXJ0YmVhdC5hZ2VudCxcbiAgICAgICAgICAgICAgICBkYXRlczogW3NpbmdsZURhdGVIZWFydGJlYXQuZGF0ZV1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGNvdW50Qnl0ZXMoaGVhcnRiZWF0c1RvU2VuZCkgPiBtYXhTaXplKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIGhlYWRlciB3b3VsZCBleGNlZWQgbWF4IHNpemUsIHJlbW92ZSB0aGUgYWRkZWQgaGVhcnRiZWF0XG4gICAgICAgICAgICAgICAgLy8gZW50cnkgYW5kIHN0b3AgYWRkaW5nIHRvIHRoZSBoZWFkZXIuXG4gICAgICAgICAgICAgICAgaGVhcnRiZWF0c1RvU2VuZC5wb3AoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGhlYXJ0YmVhdEVudHJ5LmRhdGVzLnB1c2goc2luZ2xlRGF0ZUhlYXJ0YmVhdC5kYXRlKTtcbiAgICAgICAgICAgIC8vIElmIHRoZSBoZWFkZXIgd291bGQgZXhjZWVkIG1heCBzaXplLCByZW1vdmUgdGhlIGFkZGVkIGRhdGVcbiAgICAgICAgICAgIC8vIGFuZCBzdG9wIGFkZGluZyB0byB0aGUgaGVhZGVyLlxuICAgICAgICAgICAgaWYgKGNvdW50Qnl0ZXMoaGVhcnRiZWF0c1RvU2VuZCkgPiBtYXhTaXplKSB7XG4gICAgICAgICAgICAgICAgaGVhcnRiZWF0RW50cnkuZGF0ZXMucG9wKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gUG9wIHVuc2VudCBlbnRyeSBmcm9tIHF1ZXVlLiAoU2tpcHBlZCBpZiBhZGRpbmcgdGhlIGVudHJ5IGV4Y2VlZGVkXG4gICAgICAgIC8vIHF1b3RhIGFuZCB0aGUgbG9vcCBicmVha3MgZWFybHkuKVxuICAgICAgICB1bnNlbnRFbnRyaWVzID0gdW5zZW50RW50cmllcy5zbGljZSgxKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgaGVhcnRiZWF0c1RvU2VuZCxcbiAgICAgICAgdW5zZW50RW50cmllc1xuICAgIH07XG59XG5jbGFzcyBIZWFydGJlYXRTdG9yYWdlSW1wbCB7XG4gICAgY29uc3RydWN0b3IoYXBwKSB7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgICAgICB0aGlzLl9jYW5Vc2VJbmRleGVkREJQcm9taXNlID0gdGhpcy5ydW5JbmRleGVkREJFbnZpcm9ubWVudENoZWNrKCk7XG4gICAgfVxuICAgIGFzeW5jIHJ1bkluZGV4ZWREQkVudmlyb25tZW50Q2hlY2soKSB7XG4gICAgICAgIGlmICghaXNJbmRleGVkREJBdmFpbGFibGUoKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHZhbGlkYXRlSW5kZXhlZERCT3BlbmFibGUoKVxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHRydWUpXG4gICAgICAgICAgICAgICAgLmNhdGNoKCgpID0+IGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWFkIGFsbCBoZWFydGJlYXRzLlxuICAgICAqL1xuICAgIGFzeW5jIHJlYWQoKSB7XG4gICAgICAgIGNvbnN0IGNhblVzZUluZGV4ZWREQiA9IGF3YWl0IHRoaXMuX2NhblVzZUluZGV4ZWREQlByb21pc2U7XG4gICAgICAgIGlmICghY2FuVXNlSW5kZXhlZERCKSB7XG4gICAgICAgICAgICByZXR1cm4geyBoZWFydGJlYXRzOiBbXSB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgaWRiSGVhcnRiZWF0T2JqZWN0ID0gYXdhaXQgcmVhZEhlYXJ0YmVhdHNGcm9tSW5kZXhlZERCKHRoaXMuYXBwKTtcbiAgICAgICAgICAgIGlmIChpZGJIZWFydGJlYXRPYmplY3Q/LmhlYXJ0YmVhdHMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaWRiSGVhcnRiZWF0T2JqZWN0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgaGVhcnRiZWF0czogW10gfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBvdmVyd3JpdGUgdGhlIHN0b3JhZ2Ugd2l0aCB0aGUgcHJvdmlkZWQgaGVhcnRiZWF0c1xuICAgIGFzeW5jIG92ZXJ3cml0ZShoZWFydGJlYXRzT2JqZWN0KSB7XG4gICAgICAgIGNvbnN0IGNhblVzZUluZGV4ZWREQiA9IGF3YWl0IHRoaXMuX2NhblVzZUluZGV4ZWREQlByb21pc2U7XG4gICAgICAgIGlmICghY2FuVXNlSW5kZXhlZERCKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0hlYXJ0YmVhdHNPYmplY3QgPSBhd2FpdCB0aGlzLnJlYWQoKTtcbiAgICAgICAgICAgIHJldHVybiB3cml0ZUhlYXJ0YmVhdHNUb0luZGV4ZWREQih0aGlzLmFwcCwge1xuICAgICAgICAgICAgICAgIGxhc3RTZW50SGVhcnRiZWF0RGF0ZTogaGVhcnRiZWF0c09iamVjdC5sYXN0U2VudEhlYXJ0YmVhdERhdGUgPz9cbiAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0Lmxhc3RTZW50SGVhcnRiZWF0RGF0ZSxcbiAgICAgICAgICAgICAgICBoZWFydGJlYXRzOiBoZWFydGJlYXRzT2JqZWN0LmhlYXJ0YmVhdHNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIGFkZCBoZWFydGJlYXRzXG4gICAgYXN5bmMgYWRkKGhlYXJ0YmVhdHNPYmplY3QpIHtcbiAgICAgICAgY29uc3QgY2FuVXNlSW5kZXhlZERCID0gYXdhaXQgdGhpcy5fY2FuVXNlSW5kZXhlZERCUHJvbWlzZTtcbiAgICAgICAgaWYgKCFjYW5Vc2VJbmRleGVkREIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nSGVhcnRiZWF0c09iamVjdCA9IGF3YWl0IHRoaXMucmVhZCgpO1xuICAgICAgICAgICAgcmV0dXJuIHdyaXRlSGVhcnRiZWF0c1RvSW5kZXhlZERCKHRoaXMuYXBwLCB7XG4gICAgICAgICAgICAgICAgbGFzdFNlbnRIZWFydGJlYXREYXRlOiBoZWFydGJlYXRzT2JqZWN0Lmxhc3RTZW50SGVhcnRiZWF0RGF0ZSA/P1xuICAgICAgICAgICAgICAgICAgICBleGlzdGluZ0hlYXJ0YmVhdHNPYmplY3QubGFzdFNlbnRIZWFydGJlYXREYXRlLFxuICAgICAgICAgICAgICAgIGhlYXJ0YmVhdHM6IFtcbiAgICAgICAgICAgICAgICAgICAgLi4uZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0LmhlYXJ0YmVhdHMsXG4gICAgICAgICAgICAgICAgICAgIC4uLmhlYXJ0YmVhdHNPYmplY3QuaGVhcnRiZWF0c1xuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBDYWxjdWxhdGUgYnl0ZXMgb2YgYSBIZWFydGJlYXRzQnlVc2VyQWdlbnQgYXJyYXkgYWZ0ZXIgYmVpbmcgd3JhcHBlZFxuICogaW4gYSBwbGF0Zm9ybSBsb2dnaW5nIGhlYWRlciBKU09OIG9iamVjdCwgc3RyaW5naWZpZWQsIGFuZCBjb252ZXJ0ZWRcbiAqIHRvIGJhc2UgNjQuXG4gKi9cbmZ1bmN0aW9uIGNvdW50Qnl0ZXMoaGVhcnRiZWF0c0NhY2hlKSB7XG4gICAgLy8gYmFzZTY0IGhhcyBhIHJlc3RyaWN0ZWQgc2V0IG9mIGNoYXJhY3RlcnMsIGFsbCBvZiB3aGljaCBzaG91bGQgYmUgMSBieXRlLlxuICAgIHJldHVybiBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyhcbiAgICAvLyBoZWFydGJlYXRzQ2FjaGUgd3JhcHBlciBwcm9wZXJ0aWVzXG4gICAgSlNPTi5zdHJpbmdpZnkoeyB2ZXJzaW9uOiAyLCBoZWFydGJlYXRzOiBoZWFydGJlYXRzQ2FjaGUgfSkpLmxlbmd0aDtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGhlYXJ0YmVhdCB3aXRoIHRoZSBlYXJsaWVzdCBkYXRlLlxuICogSWYgdGhlIGhlYXJ0YmVhdHMgYXJyYXkgaXMgZW1wdHksIC0xIGlzIHJldHVybmVkLlxuICovXG5mdW5jdGlvbiBnZXRFYXJsaWVzdEhlYXJ0YmVhdElkeChoZWFydGJlYXRzKSB7XG4gICAgaWYgKGhlYXJ0YmVhdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9XG4gICAgbGV0IGVhcmxpZXN0SGVhcnRiZWF0SWR4ID0gMDtcbiAgICBsZXQgZWFybGllc3RIZWFydGJlYXREYXRlID0gaGVhcnRiZWF0c1swXS5kYXRlO1xuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgaGVhcnRiZWF0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoaGVhcnRiZWF0c1tpXS5kYXRlIDwgZWFybGllc3RIZWFydGJlYXREYXRlKSB7XG4gICAgICAgICAgICBlYXJsaWVzdEhlYXJ0YmVhdERhdGUgPSBoZWFydGJlYXRzW2ldLmRhdGU7XG4gICAgICAgICAgICBlYXJsaWVzdEhlYXJ0YmVhdElkeCA9IGk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGVhcmxpZXN0SGVhcnRiZWF0SWR4O1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuZnVuY3Rpb24gcmVnaXN0ZXJDb3JlQ29tcG9uZW50cyh2YXJpYW50KSB7XG4gICAgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoJ3BsYXRmb3JtLWxvZ2dlcicsIGNvbnRhaW5lciA9PiBuZXcgUGxhdGZvcm1Mb2dnZXJTZXJ2aWNlSW1wbChjb250YWluZXIpLCBcIlBSSVZBVEVcIiAvKiBDb21wb25lbnRUeXBlLlBSSVZBVEUgKi8pKTtcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudCgnaGVhcnRiZWF0JywgY29udGFpbmVyID0+IG5ldyBIZWFydGJlYXRTZXJ2aWNlSW1wbChjb250YWluZXIpLCBcIlBSSVZBVEVcIiAvKiBDb21wb25lbnRUeXBlLlBSSVZBVEUgKi8pKTtcbiAgICAvLyBSZWdpc3RlciBgYXBwYCBwYWNrYWdlLlxuICAgIHJlZ2lzdGVyVmVyc2lvbihuYW1lJHEsIHZlcnNpb24kMSwgdmFyaWFudCk7XG4gICAgLy8gQlVJTERfVEFSR0VUIHdpbGwgYmUgcmVwbGFjZWQgYnkgdmFsdWVzIGxpa2UgZXNtLCBjanMsIGV0YyBkdXJpbmcgdGhlIGNvbXBpbGF0aW9uXG4gICAgcmVnaXN0ZXJWZXJzaW9uKG5hbWUkcSwgdmVyc2lvbiQxLCAnZXNtMjAyMCcpO1xuICAgIC8vIFJlZ2lzdGVyIHBsYXRmb3JtIFNESyBpZGVudGlmaWVyIChubyB2ZXJzaW9uKS5cbiAgICByZWdpc3RlclZlcnNpb24oJ2ZpcmUtanMnLCAnJyk7XG59XG5cbi8qKlxuICogRmlyZWJhc2UgQXBwXG4gKlxuICogQHJlbWFya3MgVGhpcyBwYWNrYWdlIGNvb3JkaW5hdGVzIHRoZSBjb21tdW5pY2F0aW9uIGJldHdlZW4gdGhlIGRpZmZlcmVudCBGaXJlYmFzZSBjb21wb25lbnRzXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cbiAqL1xucmVnaXN0ZXJDb3JlQ29tcG9uZW50cygnJyk7XG5cbmV4cG9ydCB7IFNES19WRVJTSU9OLCBERUZBVUxUX0VOVFJZX05BTUUgYXMgX0RFRkFVTFRfRU5UUllfTkFNRSwgX2FkZENvbXBvbmVudCwgX2FkZE9yT3ZlcndyaXRlQ29tcG9uZW50LCBfYXBwcywgX2NsZWFyQ29tcG9uZW50cywgX2NvbXBvbmVudHMsIF9nZXRQcm92aWRlciwgX2lzRmlyZWJhc2VBcHAsIF9pc0ZpcmViYXNlU2VydmVyQXBwLCBfaXNGaXJlYmFzZVNlcnZlckFwcFNldHRpbmdzLCBfcmVnaXN0ZXJDb21wb25lbnQsIF9yZW1vdmVTZXJ2aWNlSW5zdGFuY2UsIF9zZXJ2ZXJBcHBzLCBkZWxldGVBcHAsIGdldEFwcCwgZ2V0QXBwcywgaW5pdGlhbGl6ZUFwcCwgaW5pdGlhbGl6ZVNlcnZlckFwcCwgb25Mb2csIHJlZ2lzdGVyVmVyc2lvbiwgc2V0TG9nTGV2ZWwgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbS5qcy5tYXBcbiIsImltcG9ydCB7IHJlZ2lzdGVyVmVyc2lvbiB9IGZyb20gJ0BmaXJlYmFzZS9hcHAnO1xuZXhwb3J0ICogZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5cbnZhciBuYW1lID0gXCJmaXJlYmFzZVwiO1xudmFyIHZlcnNpb24gPSBcIjEyLjYuMFwiO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xucmVnaXN0ZXJWZXJzaW9uKG5hbWUsIHZlcnNpb24sICdhcHAnKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbS5qcy5tYXBcbiIsInZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9O1xuXG52YXIgYmxvb21fYmxvYl9lczIwMTggPSB7fTtcblxuLyoqIEBsaWNlbnNlXG5Db3B5cmlnaHQgVGhlIENsb3N1cmUgTGlicmFyeSBBdXRob3JzLlxuU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcbiovXG5cbnZhciBJbnRlZ2VyO1xudmFyIE1kNTtcbihmdW5jdGlvbigpIHt2YXIgaDsvKiogQGxpY2Vuc2VcblxuIENvcHlyaWdodCBUaGUgQ2xvc3VyZSBMaWJyYXJ5IEF1dGhvcnMuXG4gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcbiovXG5mdW5jdGlvbiBrKGQsYSl7ZnVuY3Rpb24gYygpe31jLnByb3RvdHlwZT1hLnByb3RvdHlwZTtkLkY9YS5wcm90b3R5cGU7ZC5wcm90b3R5cGU9bmV3IGM7ZC5wcm90b3R5cGUuY29uc3RydWN0b3I9ZDtkLkQ9ZnVuY3Rpb24oZixlLGcpe2Zvcih2YXIgYj1BcnJheShhcmd1bWVudHMubGVuZ3RoLTIpLHI9MjtyPGFyZ3VtZW50cy5sZW5ndGg7cisrKWJbci0yXT1hcmd1bWVudHNbcl07cmV0dXJuIGEucHJvdG90eXBlW2VdLmFwcGx5KGYsYil9O31mdW5jdGlvbiBsKCl7dGhpcy5ibG9ja1NpemU9LTE7fWZ1bmN0aW9uIG0oKXt0aGlzLmJsb2NrU2l6ZT0tMTt0aGlzLmJsb2NrU2l6ZT02NDt0aGlzLmc9QXJyYXkoNCk7dGhpcy5DPUFycmF5KHRoaXMuYmxvY2tTaXplKTt0aGlzLm89dGhpcy5oPTA7dGhpcy51KCk7fWsobSxsKTttLnByb3RvdHlwZS51PWZ1bmN0aW9uKCl7dGhpcy5nWzBdPTE3MzI1ODQxOTM7dGhpcy5nWzFdPTQwMjMyMzM0MTc7dGhpcy5nWzJdPTI1NjIzODMxMDI7dGhpcy5nWzNdPTI3MTczMzg3ODt0aGlzLm89dGhpcy5oPTA7fTtcbmZ1bmN0aW9uIG4oZCxhLGMpe2N8fChjPTApO2NvbnN0IGY9QXJyYXkoMTYpO2lmKHR5cGVvZiBhPT09XCJzdHJpbmdcIilmb3IodmFyIGU9MDtlPDE2OysrZSlmW2VdPWEuY2hhckNvZGVBdChjKyspfGEuY2hhckNvZGVBdChjKyspPDw4fGEuY2hhckNvZGVBdChjKyspPDwxNnxhLmNoYXJDb2RlQXQoYysrKTw8MjQ7ZWxzZSBmb3IoZT0wO2U8MTY7KytlKWZbZV09YVtjKytdfGFbYysrXTw8OHxhW2MrK108PDE2fGFbYysrXTw8MjQ7YT1kLmdbMF07Yz1kLmdbMV07ZT1kLmdbMl07bGV0IGc9ZC5nWzNdLGI7Yj1hKyhnXmMmKGVeZykpK2ZbMF0rMzYxNDA5MDM2MCY0Mjk0OTY3Mjk1O2E9YysoYjw8NyY0Mjk0OTY3Mjk1fGI+Pj4yNSk7Yj1nKyhlXmEmKGNeZSkpK2ZbMV0rMzkwNTQwMjcxMCY0Mjk0OTY3Mjk1O2c9YSsoYjw8MTImNDI5NDk2NzI5NXxiPj4+MjApO2I9ZSsoY15nJihhXmMpKStmWzJdKzYwNjEwNTgxOSY0Mjk0OTY3Mjk1O2U9ZysoYjw8MTcmNDI5NDk2NzI5NXxiPj4+MTUpO1xuYj1jKyhhXmUmKGdeYSkpK2ZbM10rMzI1MDQ0MTk2NiY0Mjk0OTY3Mjk1O2M9ZSsoYjw8MjImNDI5NDk2NzI5NXxiPj4+MTApO2I9YSsoZ15jJihlXmcpKStmWzRdKzQxMTg1NDgzOTkmNDI5NDk2NzI5NTthPWMrKGI8PDcmNDI5NDk2NzI5NXxiPj4+MjUpO2I9ZysoZV5hJihjXmUpKStmWzVdKzEyMDAwODA0MjYmNDI5NDk2NzI5NTtnPWErKGI8PDEyJjQyOTQ5NjcyOTV8Yj4+PjIwKTtiPWUrKGNeZyYoYV5jKSkrZls2XSsyODIxNzM1OTU1JjQyOTQ5NjcyOTU7ZT1nKyhiPDwxNyY0Mjk0OTY3Mjk1fGI+Pj4xNSk7Yj1jKyhhXmUmKGdeYSkpK2ZbN10rNDI0OTI2MTMxMyY0Mjk0OTY3Mjk1O2M9ZSsoYjw8MjImNDI5NDk2NzI5NXxiPj4+MTApO2I9YSsoZ15jJihlXmcpKStmWzhdKzE3NzAwMzU0MTYmNDI5NDk2NzI5NTthPWMrKGI8PDcmNDI5NDk2NzI5NXxiPj4+MjUpO2I9ZysoZV5hJihjXmUpKStmWzldKzIzMzY1NTI4NzkmNDI5NDk2NzI5NTtnPWErKGI8PDEyJjQyOTQ5NjcyOTV8XG5iPj4+MjApO2I9ZSsoY15nJihhXmMpKStmWzEwXSs0Mjk0OTI1MjMzJjQyOTQ5NjcyOTU7ZT1nKyhiPDwxNyY0Mjk0OTY3Mjk1fGI+Pj4xNSk7Yj1jKyhhXmUmKGdeYSkpK2ZbMTFdKzIzMDQ1NjMxMzQmNDI5NDk2NzI5NTtjPWUrKGI8PDIyJjQyOTQ5NjcyOTV8Yj4+PjEwKTtiPWErKGdeYyYoZV5nKSkrZlsxMl0rMTgwNDYwMzY4MiY0Mjk0OTY3Mjk1O2E9YysoYjw8NyY0Mjk0OTY3Mjk1fGI+Pj4yNSk7Yj1nKyhlXmEmKGNeZSkpK2ZbMTNdKzQyNTQ2MjYxOTUmNDI5NDk2NzI5NTtnPWErKGI8PDEyJjQyOTQ5NjcyOTV8Yj4+PjIwKTtiPWUrKGNeZyYoYV5jKSkrZlsxNF0rMjc5Mjk2NTAwNiY0Mjk0OTY3Mjk1O2U9ZysoYjw8MTcmNDI5NDk2NzI5NXxiPj4+MTUpO2I9YysoYV5lJihnXmEpKStmWzE1XSsxMjM2NTM1MzI5JjQyOTQ5NjcyOTU7Yz1lKyhiPDwyMiY0Mjk0OTY3Mjk1fGI+Pj4xMCk7Yj1hKyhlXmcmKGNeZSkpK2ZbMV0rNDEyOTE3MDc4NiY0Mjk0OTY3Mjk1O2E9YysoYjw8XG41JjQyOTQ5NjcyOTV8Yj4+PjI3KTtiPWcrKGNeZSYoYV5jKSkrZls2XSszMjI1NDY1NjY0JjQyOTQ5NjcyOTU7Zz1hKyhiPDw5JjQyOTQ5NjcyOTV8Yj4+PjIzKTtiPWUrKGFeYyYoZ15hKSkrZlsxMV0rNjQzNzE3NzEzJjQyOTQ5NjcyOTU7ZT1nKyhiPDwxNCY0Mjk0OTY3Mjk1fGI+Pj4xOCk7Yj1jKyhnXmEmKGVeZykpK2ZbMF0rMzkyMTA2OTk5NCY0Mjk0OTY3Mjk1O2M9ZSsoYjw8MjAmNDI5NDk2NzI5NXxiPj4+MTIpO2I9YSsoZV5nJihjXmUpKStmWzVdKzM1OTM0MDg2MDUmNDI5NDk2NzI5NTthPWMrKGI8PDUmNDI5NDk2NzI5NXxiPj4+MjcpO2I9ZysoY15lJihhXmMpKStmWzEwXSszODAxNjA4MyY0Mjk0OTY3Mjk1O2c9YSsoYjw8OSY0Mjk0OTY3Mjk1fGI+Pj4yMyk7Yj1lKyhhXmMmKGdeYSkpK2ZbMTVdKzM2MzQ0ODg5NjEmNDI5NDk2NzI5NTtlPWcrKGI8PDE0JjQyOTQ5NjcyOTV8Yj4+PjE4KTtiPWMrKGdeYSYoZV5nKSkrZls0XSszODg5NDI5NDQ4JjQyOTQ5NjcyOTU7Yz1cbmUrKGI8PDIwJjQyOTQ5NjcyOTV8Yj4+PjEyKTtiPWErKGVeZyYoY15lKSkrZls5XSs1Njg0NDY0MzgmNDI5NDk2NzI5NTthPWMrKGI8PDUmNDI5NDk2NzI5NXxiPj4+MjcpO2I9ZysoY15lJihhXmMpKStmWzE0XSszMjc1MTYzNjA2JjQyOTQ5NjcyOTU7Zz1hKyhiPDw5JjQyOTQ5NjcyOTV8Yj4+PjIzKTtiPWUrKGFeYyYoZ15hKSkrZlszXSs0MTA3NjAzMzM1JjQyOTQ5NjcyOTU7ZT1nKyhiPDwxNCY0Mjk0OTY3Mjk1fGI+Pj4xOCk7Yj1jKyhnXmEmKGVeZykpK2ZbOF0rMTE2MzUzMTUwMSY0Mjk0OTY3Mjk1O2M9ZSsoYjw8MjAmNDI5NDk2NzI5NXxiPj4+MTIpO2I9YSsoZV5nJihjXmUpKStmWzEzXSsyODUwMjg1ODI5JjQyOTQ5NjcyOTU7YT1jKyhiPDw1JjQyOTQ5NjcyOTV8Yj4+PjI3KTtiPWcrKGNeZSYoYV5jKSkrZlsyXSs0MjQzNTYzNTEyJjQyOTQ5NjcyOTU7Zz1hKyhiPDw5JjQyOTQ5NjcyOTV8Yj4+PjIzKTtiPWUrKGFeYyYoZ15hKSkrZls3XSsxNzM1MzI4NDczJjQyOTQ5NjcyOTU7XG5lPWcrKGI8PDE0JjQyOTQ5NjcyOTV8Yj4+PjE4KTtiPWMrKGdeYSYoZV5nKSkrZlsxMl0rMjM2ODM1OTU2MiY0Mjk0OTY3Mjk1O2M9ZSsoYjw8MjAmNDI5NDk2NzI5NXxiPj4+MTIpO2I9YSsoY15lXmcpK2ZbNV0rNDI5NDU4ODczOCY0Mjk0OTY3Mjk1O2E9YysoYjw8NCY0Mjk0OTY3Mjk1fGI+Pj4yOCk7Yj1nKyhhXmNeZSkrZls4XSsyMjcyMzkyODMzJjQyOTQ5NjcyOTU7Zz1hKyhiPDwxMSY0Mjk0OTY3Mjk1fGI+Pj4yMSk7Yj1lKyhnXmFeYykrZlsxMV0rMTgzOTAzMDU2MiY0Mjk0OTY3Mjk1O2U9ZysoYjw8MTYmNDI5NDk2NzI5NXxiPj4+MTYpO2I9YysoZV5nXmEpK2ZbMTRdKzQyNTk2NTc3NDAmNDI5NDk2NzI5NTtjPWUrKGI8PDIzJjQyOTQ5NjcyOTV8Yj4+PjkpO2I9YSsoY15lXmcpK2ZbMV0rMjc2Mzk3NTIzNiY0Mjk0OTY3Mjk1O2E9YysoYjw8NCY0Mjk0OTY3Mjk1fGI+Pj4yOCk7Yj1nKyhhXmNeZSkrZls0XSsxMjcyODkzMzUzJjQyOTQ5NjcyOTU7Zz1hKyhiPDwxMSY0Mjk0OTY3Mjk1fFxuYj4+PjIxKTtiPWUrKGdeYV5jKStmWzddKzQxMzk0Njk2NjQmNDI5NDk2NzI5NTtlPWcrKGI8PDE2JjQyOTQ5NjcyOTV8Yj4+PjE2KTtiPWMrKGVeZ15hKStmWzEwXSszMjAwMjM2NjU2JjQyOTQ5NjcyOTU7Yz1lKyhiPDwyMyY0Mjk0OTY3Mjk1fGI+Pj45KTtiPWErKGNeZV5nKStmWzEzXSs2ODEyNzkxNzQmNDI5NDk2NzI5NTthPWMrKGI8PDQmNDI5NDk2NzI5NXxiPj4+MjgpO2I9ZysoYV5jXmUpK2ZbMF0rMzkzNjQzMDA3NCY0Mjk0OTY3Mjk1O2c9YSsoYjw8MTEmNDI5NDk2NzI5NXxiPj4+MjEpO2I9ZSsoZ15hXmMpK2ZbM10rMzU3MjQ0NTMxNyY0Mjk0OTY3Mjk1O2U9ZysoYjw8MTYmNDI5NDk2NzI5NXxiPj4+MTYpO2I9YysoZV5nXmEpK2ZbNl0rNzYwMjkxODkmNDI5NDk2NzI5NTtjPWUrKGI8PDIzJjQyOTQ5NjcyOTV8Yj4+PjkpO2I9YSsoY15lXmcpK2ZbOV0rMzY1NDYwMjgwOSY0Mjk0OTY3Mjk1O2E9YysoYjw8NCY0Mjk0OTY3Mjk1fGI+Pj4yOCk7Yj1nKyhhXmNeZSkrZlsxMl0rXG4zODczMTUxNDYxJjQyOTQ5NjcyOTU7Zz1hKyhiPDwxMSY0Mjk0OTY3Mjk1fGI+Pj4yMSk7Yj1lKyhnXmFeYykrZlsxNV0rNTMwNzQyNTIwJjQyOTQ5NjcyOTU7ZT1nKyhiPDwxNiY0Mjk0OTY3Mjk1fGI+Pj4xNik7Yj1jKyhlXmdeYSkrZlsyXSszMjk5NjI4NjQ1JjQyOTQ5NjcyOTU7Yz1lKyhiPDwyMyY0Mjk0OTY3Mjk1fGI+Pj45KTtiPWErKGVeKGN8fmcpKStmWzBdKzQwOTYzMzY0NTImNDI5NDk2NzI5NTthPWMrKGI8PDYmNDI5NDk2NzI5NXxiPj4+MjYpO2I9ZysoY14oYXx+ZSkpK2ZbN10rMTEyNjg5MTQxNSY0Mjk0OTY3Mjk1O2c9YSsoYjw8MTAmNDI5NDk2NzI5NXxiPj4+MjIpO2I9ZSsoYV4oZ3x+YykpK2ZbMTRdKzI4Nzg2MTIzOTEmNDI5NDk2NzI5NTtlPWcrKGI8PDE1JjQyOTQ5NjcyOTV8Yj4+PjE3KTtiPWMrKGdeKGV8fmEpKStmWzVdKzQyMzc1MzMyNDEmNDI5NDk2NzI5NTtjPWUrKGI8PDIxJjQyOTQ5NjcyOTV8Yj4+PjExKTtiPWErKGVeKGN8fmcpKStmWzEyXSsxNzAwNDg1NTcxJlxuNDI5NDk2NzI5NTthPWMrKGI8PDYmNDI5NDk2NzI5NXxiPj4+MjYpO2I9ZysoY14oYXx+ZSkpK2ZbM10rMjM5OTk4MDY5MCY0Mjk0OTY3Mjk1O2c9YSsoYjw8MTAmNDI5NDk2NzI5NXxiPj4+MjIpO2I9ZSsoYV4oZ3x+YykpK2ZbMTBdKzQyOTM5MTU3NzMmNDI5NDk2NzI5NTtlPWcrKGI8PDE1JjQyOTQ5NjcyOTV8Yj4+PjE3KTtiPWMrKGdeKGV8fmEpKStmWzFdKzIyNDAwNDQ0OTcmNDI5NDk2NzI5NTtjPWUrKGI8PDIxJjQyOTQ5NjcyOTV8Yj4+PjExKTtiPWErKGVeKGN8fmcpKStmWzhdKzE4NzMzMTMzNTkmNDI5NDk2NzI5NTthPWMrKGI8PDYmNDI5NDk2NzI5NXxiPj4+MjYpO2I9ZysoY14oYXx+ZSkpK2ZbMTVdKzQyNjQzNTU1NTImNDI5NDk2NzI5NTtnPWErKGI8PDEwJjQyOTQ5NjcyOTV8Yj4+PjIyKTtiPWUrKGFeKGd8fmMpKStmWzZdKzI3MzQ3Njg5MTYmNDI5NDk2NzI5NTtlPWcrKGI8PDE1JjQyOTQ5NjcyOTV8Yj4+PjE3KTtiPWMrKGdeKGV8fmEpKStmWzEzXSsxMzA5MTUxNjQ5JlxuNDI5NDk2NzI5NTtjPWUrKGI8PDIxJjQyOTQ5NjcyOTV8Yj4+PjExKTtiPWErKGVeKGN8fmcpKStmWzRdKzQxNDk0NDQyMjYmNDI5NDk2NzI5NTthPWMrKGI8PDYmNDI5NDk2NzI5NXxiPj4+MjYpO2I9ZysoY14oYXx+ZSkpK2ZbMTFdKzMxNzQ3NTY5MTcmNDI5NDk2NzI5NTtnPWErKGI8PDEwJjQyOTQ5NjcyOTV8Yj4+PjIyKTtiPWUrKGFeKGd8fmMpKStmWzJdKzcxODc4NzI1OSY0Mjk0OTY3Mjk1O2U9ZysoYjw8MTUmNDI5NDk2NzI5NXxiPj4+MTcpO2I9YysoZ14oZXx+YSkpK2ZbOV0rMzk1MTQ4MTc0NSY0Mjk0OTY3Mjk1O2QuZ1swXT1kLmdbMF0rYSY0Mjk0OTY3Mjk1O2QuZ1sxXT1kLmdbMV0rKGUrKGI8PDIxJjQyOTQ5NjcyOTV8Yj4+PjExKSkmNDI5NDk2NzI5NTtkLmdbMl09ZC5nWzJdK2UmNDI5NDk2NzI5NTtkLmdbM109ZC5nWzNdK2cmNDI5NDk2NzI5NTt9XG5tLnByb3RvdHlwZS52PWZ1bmN0aW9uKGQsYSl7YT09PXZvaWQgMCYmKGE9ZC5sZW5ndGgpO2NvbnN0IGM9YS10aGlzLmJsb2NrU2l6ZSxmPXRoaXMuQztsZXQgZT10aGlzLmgsZz0wO2Zvcig7ZzxhOyl7aWYoZT09MClmb3IoO2c8PWM7KW4odGhpcyxkLGcpLGcrPXRoaXMuYmxvY2tTaXplO2lmKHR5cGVvZiBkPT09XCJzdHJpbmdcIilmb3IoO2c8YTspe2lmKGZbZSsrXT1kLmNoYXJDb2RlQXQoZysrKSxlPT10aGlzLmJsb2NrU2l6ZSl7bih0aGlzLGYpO2U9MDticmVha319ZWxzZSBmb3IoO2c8YTspaWYoZltlKytdPWRbZysrXSxlPT10aGlzLmJsb2NrU2l6ZSl7bih0aGlzLGYpO2U9MDticmVha319dGhpcy5oPWU7dGhpcy5vKz1hO307XG5tLnByb3RvdHlwZS5BPWZ1bmN0aW9uKCl7dmFyIGQ9QXJyYXkoKHRoaXMuaDw1Nj90aGlzLmJsb2NrU2l6ZTp0aGlzLmJsb2NrU2l6ZSoyKS10aGlzLmgpO2RbMF09MTI4O2Zvcih2YXIgYT0xO2E8ZC5sZW5ndGgtODsrK2EpZFthXT0wO2E9dGhpcy5vKjg7Zm9yKHZhciBjPWQubGVuZ3RoLTg7YzxkLmxlbmd0aDsrK2MpZFtjXT1hJjI1NSxhLz0yNTY7dGhpcy52KGQpO2Q9QXJyYXkoMTYpO2E9MDtmb3IoYz0wO2M8NDsrK2MpZm9yKGxldCBmPTA7ZjwzMjtmKz04KWRbYSsrXT10aGlzLmdbY10+Pj5mJjI1NTtyZXR1cm4gZH07ZnVuY3Rpb24gcChkLGEpe3ZhciBjPXE7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChjLGQpP2NbZF06Y1tkXT1hKGQpfWZ1bmN0aW9uIHQoZCxhKXt0aGlzLmg9YTtjb25zdCBjPVtdO2xldCBmPSEwO2ZvcihsZXQgZT1kLmxlbmd0aC0xO2U+PTA7ZS0tKXtjb25zdCBnPWRbZV18MDtmJiZnPT1hfHwoY1tlXT1nLGY9ITEpO310aGlzLmc9Yzt9dmFyIHE9e307ZnVuY3Rpb24gdShkKXtyZXR1cm4gLTEyODw9ZCYmZDwxMjg/cChkLGZ1bmN0aW9uKGEpe3JldHVybiBuZXcgdChbYXwwXSxhPDA/LTE6MCl9KTpuZXcgdChbZHwwXSxkPDA/LTE6MCl9ZnVuY3Rpb24gdihkKXtpZihpc05hTihkKXx8IWlzRmluaXRlKGQpKXJldHVybiB3O2lmKGQ8MClyZXR1cm4geCh2KC1kKSk7Y29uc3QgYT1bXTtsZXQgYz0xO2ZvcihsZXQgZj0wO2Q+PWM7ZisrKWFbZl09ZC9jfDAsYyo9NDI5NDk2NzI5NjtyZXR1cm4gbmV3IHQoYSwwKX1cbmZ1bmN0aW9uIHkoZCxhKXtpZihkLmxlbmd0aD09MCl0aHJvdyBFcnJvcihcIm51bWJlciBmb3JtYXQgZXJyb3I6IGVtcHR5IHN0cmluZ1wiKTthPWF8fDEwO2lmKGE8Mnx8MzY8YSl0aHJvdyBFcnJvcihcInJhZGl4IG91dCBvZiByYW5nZTogXCIrYSk7aWYoZC5jaGFyQXQoMCk9PVwiLVwiKXJldHVybiB4KHkoZC5zdWJzdHJpbmcoMSksYSkpO2lmKGQuaW5kZXhPZihcIi1cIik+PTApdGhyb3cgRXJyb3IoJ251bWJlciBmb3JtYXQgZXJyb3I6IGludGVyaW9yIFwiLVwiIGNoYXJhY3RlcicpO2NvbnN0IGM9dihNYXRoLnBvdyhhLDgpKTtsZXQgZj13O2ZvcihsZXQgZz0wO2c8ZC5sZW5ndGg7Zys9OCl7dmFyIGU9TWF0aC5taW4oOCxkLmxlbmd0aC1nKTtjb25zdCBiPXBhcnNlSW50KGQuc3Vic3RyaW5nKGcsZytlKSxhKTtlPDg/KGU9dihNYXRoLnBvdyhhLGUpKSxmPWYuaihlKS5hZGQodihiKSkpOihmPWYuaihjKSxmPWYuYWRkKHYoYikpKTt9cmV0dXJuIGZ9dmFyIHc9dSgwKSx6PXUoMSksQT11KDE2Nzc3MjE2KTtcbmg9dC5wcm90b3R5cGU7aC5tPWZ1bmN0aW9uKCl7aWYoQih0aGlzKSlyZXR1cm4gLXgodGhpcykubSgpO2xldCBkPTAsYT0xO2ZvcihsZXQgYz0wO2M8dGhpcy5nLmxlbmd0aDtjKyspe2NvbnN0IGY9dGhpcy5pKGMpO2QrPShmPj0wP2Y6NDI5NDk2NzI5NitmKSphO2EqPTQyOTQ5NjcyOTY7fXJldHVybiBkfTtcbmgudG9TdHJpbmc9ZnVuY3Rpb24oZCl7ZD1kfHwxMDtpZihkPDJ8fDM2PGQpdGhyb3cgRXJyb3IoXCJyYWRpeCBvdXQgb2YgcmFuZ2U6IFwiK2QpO2lmKEModGhpcykpcmV0dXJuIFwiMFwiO2lmKEIodGhpcykpcmV0dXJuIFwiLVwiK3godGhpcykudG9TdHJpbmcoZCk7Y29uc3QgYT12KE1hdGgucG93KGQsNikpO3ZhciBjPXRoaXM7bGV0IGY9XCJcIjtmb3IoOzspe2NvbnN0IGU9RChjLGEpLmc7Yz1GKGMsZS5qKGEpKTtsZXQgZz0oKGMuZy5sZW5ndGg+MD9jLmdbMF06Yy5oKT4+PjApLnRvU3RyaW5nKGQpO2M9ZTtpZihDKGMpKXJldHVybiBnK2Y7Zm9yKDtnLmxlbmd0aDw2OylnPVwiMFwiK2c7Zj1nK2Y7fX07aC5pPWZ1bmN0aW9uKGQpe3JldHVybiBkPDA/MDpkPHRoaXMuZy5sZW5ndGg/dGhpcy5nW2RdOnRoaXMuaH07ZnVuY3Rpb24gQyhkKXtpZihkLmghPTApcmV0dXJuICExO2ZvcihsZXQgYT0wO2E8ZC5nLmxlbmd0aDthKyspaWYoZC5nW2FdIT0wKXJldHVybiAhMTtyZXR1cm4gITB9XG5mdW5jdGlvbiBCKGQpe3JldHVybiBkLmg9PS0xfWgubD1mdW5jdGlvbihkKXtkPUYodGhpcyxkKTtyZXR1cm4gQihkKT8tMTpDKGQpPzA6MX07ZnVuY3Rpb24geChkKXtjb25zdCBhPWQuZy5sZW5ndGgsYz1bXTtmb3IobGV0IGY9MDtmPGE7ZisrKWNbZl09fmQuZ1tmXTtyZXR1cm4gKG5ldyB0KGMsfmQuaCkpLmFkZCh6KX1oLmFicz1mdW5jdGlvbigpe3JldHVybiBCKHRoaXMpP3godGhpcyk6dGhpc307aC5hZGQ9ZnVuY3Rpb24oZCl7Y29uc3QgYT1NYXRoLm1heCh0aGlzLmcubGVuZ3RoLGQuZy5sZW5ndGgpLGM9W107bGV0IGY9MDtmb3IobGV0IGU9MDtlPD1hO2UrKyl7bGV0IGc9ZisodGhpcy5pKGUpJjY1NTM1KSsoZC5pKGUpJjY1NTM1KSxiPShnPj4+MTYpKyh0aGlzLmkoZSk+Pj4xNikrKGQuaShlKT4+PjE2KTtmPWI+Pj4xNjtnJj02NTUzNTtiJj02NTUzNTtjW2VdPWI8PDE2fGc7fXJldHVybiBuZXcgdChjLGNbYy5sZW5ndGgtMV0mLTIxNDc0ODM2NDg/LTE6MCl9O1xuZnVuY3Rpb24gRihkLGEpe3JldHVybiBkLmFkZCh4KGEpKX1cbmguaj1mdW5jdGlvbihkKXtpZihDKHRoaXMpfHxDKGQpKXJldHVybiB3O2lmKEIodGhpcykpcmV0dXJuIEIoZCk/eCh0aGlzKS5qKHgoZCkpOngoeCh0aGlzKS5qKGQpKTtpZihCKGQpKXJldHVybiB4KHRoaXMuaih4KGQpKSk7aWYodGhpcy5sKEEpPDAmJmQubChBKTwwKXJldHVybiB2KHRoaXMubSgpKmQubSgpKTtjb25zdCBhPXRoaXMuZy5sZW5ndGgrZC5nLmxlbmd0aCxjPVtdO2Zvcih2YXIgZj0wO2Y8MiphO2YrKyljW2ZdPTA7Zm9yKGY9MDtmPHRoaXMuZy5sZW5ndGg7ZisrKWZvcihsZXQgZT0wO2U8ZC5nLmxlbmd0aDtlKyspe2NvbnN0IGc9dGhpcy5pKGYpPj4+MTYsYj10aGlzLmkoZikmNjU1MzUscj1kLmkoZSk+Pj4xNixFPWQuaShlKSY2NTUzNTtjWzIqZisyKmVdKz1iKkU7RyhjLDIqZisyKmUpO2NbMipmKzIqZSsxXSs9ZypFO0coYywyKmYrMiplKzEpO2NbMipmKzIqZSsxXSs9YipyO0coYywyKmYrMiplKzEpO2NbMipmKzIqZSsyXSs9ZypyO0coYywyKmYrMiplKzIpO31mb3IoZD1cbjA7ZDxhO2QrKyljW2RdPWNbMipkKzFdPDwxNnxjWzIqZF07Zm9yKGQ9YTtkPDIqYTtkKyspY1tkXT0wO3JldHVybiBuZXcgdChjLDApfTtmdW5jdGlvbiBHKGQsYSl7Zm9yKDsoZFthXSY2NTUzNSkhPWRbYV07KWRbYSsxXSs9ZFthXT4+PjE2LGRbYV0mPTY1NTM1LGErKzt9ZnVuY3Rpb24gSChkLGEpe3RoaXMuZz1kO3RoaXMuaD1hO31cbmZ1bmN0aW9uIEQoZCxhKXtpZihDKGEpKXRocm93IEVycm9yKFwiZGl2aXNpb24gYnkgemVyb1wiKTtpZihDKGQpKXJldHVybiBuZXcgSCh3LHcpO2lmKEIoZCkpcmV0dXJuIGE9RCh4KGQpLGEpLG5ldyBIKHgoYS5nKSx4KGEuaCkpO2lmKEIoYSkpcmV0dXJuIGE9RChkLHgoYSkpLG5ldyBIKHgoYS5nKSxhLmgpO2lmKGQuZy5sZW5ndGg+MzApe2lmKEIoZCl8fEIoYSkpdGhyb3cgRXJyb3IoXCJzbG93RGl2aWRlXyBvbmx5IHdvcmtzIHdpdGggcG9zaXRpdmUgaW50ZWdlcnMuXCIpO2Zvcih2YXIgYz16LGY9YTtmLmwoZCk8PTA7KWM9SShjKSxmPUkoZik7dmFyIGU9SihjLDEpLGc9SihmLDEpO2Y9SihmLDIpO2ZvcihjPUooYywyKTshQyhmKTspe3ZhciBiPWcuYWRkKGYpO2IubChkKTw9MCYmKGU9ZS5hZGQoYyksZz1iKTtmPUooZiwxKTtjPUooYywxKTt9YT1GKGQsZS5qKGEpKTtyZXR1cm4gbmV3IEgoZSxhKX1mb3IoZT13O2QubChhKT49MDspe2M9TWF0aC5tYXgoMSxNYXRoLmZsb29yKGQubSgpL1xuYS5tKCkpKTtmPU1hdGguY2VpbChNYXRoLmxvZyhjKS9NYXRoLkxOMik7Zj1mPD00OD8xOk1hdGgucG93KDIsZi00OCk7Zz12KGMpO2ZvcihiPWcuaihhKTtCKGIpfHxiLmwoZCk+MDspYy09ZixnPXYoYyksYj1nLmooYSk7QyhnKSYmKGc9eik7ZT1lLmFkZChnKTtkPUYoZCxiKTt9cmV0dXJuIG5ldyBIKGUsZCl9aC5CPWZ1bmN0aW9uKGQpe3JldHVybiBEKHRoaXMsZCkuaH07aC5hbmQ9ZnVuY3Rpb24oZCl7Y29uc3QgYT1NYXRoLm1heCh0aGlzLmcubGVuZ3RoLGQuZy5sZW5ndGgpLGM9W107Zm9yKGxldCBmPTA7ZjxhO2YrKyljW2ZdPXRoaXMuaShmKSZkLmkoZik7cmV0dXJuIG5ldyB0KGMsdGhpcy5oJmQuaCl9O2gub3I9ZnVuY3Rpb24oZCl7Y29uc3QgYT1NYXRoLm1heCh0aGlzLmcubGVuZ3RoLGQuZy5sZW5ndGgpLGM9W107Zm9yKGxldCBmPTA7ZjxhO2YrKyljW2ZdPXRoaXMuaShmKXxkLmkoZik7cmV0dXJuIG5ldyB0KGMsdGhpcy5ofGQuaCl9O1xuaC54b3I9ZnVuY3Rpb24oZCl7Y29uc3QgYT1NYXRoLm1heCh0aGlzLmcubGVuZ3RoLGQuZy5sZW5ndGgpLGM9W107Zm9yKGxldCBmPTA7ZjxhO2YrKyljW2ZdPXRoaXMuaShmKV5kLmkoZik7cmV0dXJuIG5ldyB0KGMsdGhpcy5oXmQuaCl9O2Z1bmN0aW9uIEkoZCl7Y29uc3QgYT1kLmcubGVuZ3RoKzEsYz1bXTtmb3IobGV0IGY9MDtmPGE7ZisrKWNbZl09ZC5pKGYpPDwxfGQuaShmLTEpPj4+MzE7cmV0dXJuIG5ldyB0KGMsZC5oKX1mdW5jdGlvbiBKKGQsYSl7Y29uc3QgYz1hPj41O2ElPTMyO2NvbnN0IGY9ZC5nLmxlbmd0aC1jLGU9W107Zm9yKGxldCBnPTA7ZzxmO2crKyllW2ddPWE+MD9kLmkoZytjKT4+PmF8ZC5pKGcrYysxKTw8MzItYTpkLmkoZytjKTtyZXR1cm4gbmV3IHQoZSxkLmgpfW0ucHJvdG90eXBlLmRpZ2VzdD1tLnByb3RvdHlwZS5BO20ucHJvdG90eXBlLnJlc2V0PW0ucHJvdG90eXBlLnU7bS5wcm90b3R5cGUudXBkYXRlPW0ucHJvdG90eXBlLnY7TWQ1ID0gYmxvb21fYmxvYl9lczIwMTguTWQ1PW07dC5wcm90b3R5cGUuYWRkPXQucHJvdG90eXBlLmFkZDt0LnByb3RvdHlwZS5tdWx0aXBseT10LnByb3RvdHlwZS5qO3QucHJvdG90eXBlLm1vZHVsbz10LnByb3RvdHlwZS5CO3QucHJvdG90eXBlLmNvbXBhcmU9dC5wcm90b3R5cGUubDt0LnByb3RvdHlwZS50b051bWJlcj10LnByb3RvdHlwZS5tO3QucHJvdG90eXBlLnRvU3RyaW5nPXQucHJvdG90eXBlLnRvU3RyaW5nO3QucHJvdG90eXBlLmdldEJpdHM9dC5wcm90b3R5cGUuaTt0LmZyb21OdW1iZXI9djt0LmZyb21TdHJpbmc9eTtJbnRlZ2VyID0gYmxvb21fYmxvYl9lczIwMTguSW50ZWdlcj10O30pLmFwcGx5KCB0eXBlb2YgY29tbW9uanNHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gY29tbW9uanNHbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmICA6IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93ICA6IHt9KTtcblxuZXhwb3J0IHsgSW50ZWdlciwgTWQ1LCBibG9vbV9ibG9iX2VzMjAxOCBhcyBkZWZhdWx0IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ibG9vbV9ibG9iX2VzMjAxOC5qcy5tYXBcbiIsInZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9O1xuXG52YXIgd2ViY2hhbm5lbF9ibG9iX2VzMjAxOCA9IHt9O1xuXG4vKiogQGxpY2Vuc2VcbkNvcHlyaWdodCBUaGUgQ2xvc3VyZSBMaWJyYXJ5IEF1dGhvcnMuXG5TUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuKi9cblxudmFyIFhocklvO1xudmFyIEZldGNoWG1sSHR0cEZhY3Rvcnk7XG52YXIgV2ViQ2hhbm5lbDtcbnZhciBFdmVudFR5cGU7XG52YXIgRXJyb3JDb2RlO1xudmFyIFN0YXQ7XG52YXIgRXZlbnQ7XG52YXIgZ2V0U3RhdEV2ZW50VGFyZ2V0O1xudmFyIGNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQ7XG4oZnVuY3Rpb24oKSB7dmFyIGgsYWE9T2JqZWN0LmRlZmluZVByb3BlcnR5O2Z1bmN0aW9uIGJhKGEpe2E9W1wib2JqZWN0XCI9PXR5cGVvZiBnbG9iYWxUaGlzJiZnbG9iYWxUaGlzLGEsXCJvYmplY3RcIj09dHlwZW9mIHdpbmRvdyYmd2luZG93LFwib2JqZWN0XCI9PXR5cGVvZiBzZWxmJiZzZWxmLFwib2JqZWN0XCI9PXR5cGVvZiBjb21tb25qc0dsb2JhbCYmY29tbW9uanNHbG9iYWxdO2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7KytiKXt2YXIgYz1hW2JdO2lmKGMmJmMuTWF0aD09TWF0aClyZXR1cm4gY310aHJvdyBFcnJvcihcIkNhbm5vdCBmaW5kIGdsb2JhbCBvYmplY3RcIik7fXZhciBjYT1iYSh0aGlzKTtcbmZ1bmN0aW9uIGRhKGEsYil7aWYoYilhOnt2YXIgYz1jYTthPWEuc3BsaXQoXCIuXCIpO2Zvcih2YXIgZD0wO2Q8YS5sZW5ndGgtMTtkKyspe3ZhciBlPWFbZF07aWYoIShlIGluIGMpKWJyZWFrIGE7Yz1jW2VdO31hPWFbYS5sZW5ndGgtMV07ZD1jW2FdO2I9YihkKTtiIT1kJiZiIT1udWxsJiZhYShjLGEse2NvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpifSk7fX1kYShcIlN5bWJvbC5kaXNwb3NlXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGE/YTpTeW1ib2woXCJTeW1ib2wuZGlzcG9zZVwiKX0pO2RhKFwiQXJyYXkucHJvdG90eXBlLnZhbHVlc1wiLGZ1bmN0aW9uKGEpe3JldHVybiBhP2E6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1tTeW1ib2wuaXRlcmF0b3JdKCl9fSk7XG5kYShcIk9iamVjdC5lbnRyaWVzXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGE/YTpmdW5jdGlvbihiKXt2YXIgYz1bXSxkO2ZvcihkIGluIGIpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsZCkmJmMucHVzaChbZCxiW2RdXSk7cmV0dXJuIGN9fSk7LyoqIEBsaWNlbnNlXG5cbiBDb3B5cmlnaHQgVGhlIENsb3N1cmUgTGlicmFyeSBBdXRob3JzLlxuIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG4qL1xudmFyIGVhPWVhfHx7fSxsPXRoaXN8fHNlbGY7ZnVuY3Rpb24gbihhKXt2YXIgYj10eXBlb2YgYTtyZXR1cm4gYj09XCJvYmplY3RcIiYmYSE9bnVsbHx8Yj09XCJmdW5jdGlvblwifWZ1bmN0aW9uIGZhKGEsYixjKXtyZXR1cm4gYS5jYWxsLmFwcGx5KGEuYmluZCxhcmd1bWVudHMpfWZ1bmN0aW9uIHAoYSxiLGMpe3A9ZmE7cmV0dXJuIHAuYXBwbHkobnVsbCxhcmd1bWVudHMpfWZ1bmN0aW9uIGhhKGEsYil7dmFyIGM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiBmdW5jdGlvbigpe3ZhciBkPWMuc2xpY2UoKTtkLnB1c2guYXBwbHkoZCxhcmd1bWVudHMpO3JldHVybiBhLmFwcGx5KHRoaXMsZCl9fVxuZnVuY3Rpb24gdChhLGIpe2Z1bmN0aW9uIGMoKXt9Yy5wcm90b3R5cGU9Yi5wcm90b3R5cGU7YS5aPWIucHJvdG90eXBlO2EucHJvdG90eXBlPW5ldyBjO2EucHJvdG90eXBlLmNvbnN0cnVjdG9yPWE7YS5PYj1mdW5jdGlvbihkLGUsZil7Zm9yKHZhciBnPUFycmF5KGFyZ3VtZW50cy5sZW5ndGgtMiksaz0yO2s8YXJndW1lbnRzLmxlbmd0aDtrKyspZ1trLTJdPWFyZ3VtZW50c1trXTtyZXR1cm4gYi5wcm90b3R5cGVbZV0uYXBwbHkoZCxnKX07fXZhciBpYT10eXBlb2YgQXN5bmNDb250ZXh0IT09XCJ1bmRlZmluZWRcIiYmdHlwZW9mIEFzeW5jQ29udGV4dC5TbmFwc2hvdD09PVwiZnVuY3Rpb25cIj9hPT5hJiZBc3luY0NvbnRleHQuU25hcHNob3Qud3JhcChhKTphPT5hO2Z1bmN0aW9uIGphKGEpe2NvbnN0IGI9YS5sZW5ndGg7aWYoYj4wKXtjb25zdCBjPUFycmF5KGIpO2ZvcihsZXQgZD0wO2Q8YjtkKyspY1tkXT1hW2RdO3JldHVybiBjfXJldHVybiBbXX1mdW5jdGlvbiBrYShhLGIpe2ZvcihsZXQgZD0xO2Q8YXJndW1lbnRzLmxlbmd0aDtkKyspe2NvbnN0IGU9YXJndW1lbnRzW2RdO3ZhciBjPXR5cGVvZiBlO2M9YyE9XCJvYmplY3RcIj9jOmU/QXJyYXkuaXNBcnJheShlKT9cImFycmF5XCI6YzpcIm51bGxcIjtpZihjPT1cImFycmF5XCJ8fGM9PVwib2JqZWN0XCImJnR5cGVvZiBlLmxlbmd0aD09XCJudW1iZXJcIil7Yz1hLmxlbmd0aHx8MDtjb25zdCBmPWUubGVuZ3RofHwwO2EubGVuZ3RoPWMrZjtmb3IobGV0IGc9MDtnPGY7ZysrKWFbYytnXT1lW2ddO31lbHNlIGEucHVzaChlKTt9fWNsYXNzIGxhe2NvbnN0cnVjdG9yKGEsYil7dGhpcy5pPWE7dGhpcy5qPWI7dGhpcy5oPTA7dGhpcy5nPW51bGw7fWdldCgpe2xldCBhO3RoaXMuaD4wPyh0aGlzLmgtLSxhPXRoaXMuZyx0aGlzLmc9YS5uZXh0LGEubmV4dD1udWxsKTphPXRoaXMuaSgpO3JldHVybiBhfX1mdW5jdGlvbiBtYShhKXtsLnNldFRpbWVvdXQoKCk9Pnt0aHJvdyBhO30sMCk7fWZ1bmN0aW9uIG5hKCl7dmFyIGE9b2E7bGV0IGI9bnVsbDthLmcmJihiPWEuZyxhLmc9YS5nLm5leHQsYS5nfHwoYS5oPW51bGwpLGIubmV4dD1udWxsKTtyZXR1cm4gYn1jbGFzcyBwYXtjb25zdHJ1Y3Rvcigpe3RoaXMuaD10aGlzLmc9bnVsbDt9YWRkKGEsYil7Y29uc3QgYz1xYS5nZXQoKTtjLnNldChhLGIpO3RoaXMuaD90aGlzLmgubmV4dD1jOnRoaXMuZz1jO3RoaXMuaD1jO319dmFyIHFhPW5ldyBsYSgoKT0+bmV3IHJhLGE9PmEucmVzZXQoKSk7Y2xhc3MgcmF7Y29uc3RydWN0b3IoKXt0aGlzLm5leHQ9dGhpcy5nPXRoaXMuaD1udWxsO31zZXQoYSxiKXt0aGlzLmg9YTt0aGlzLmc9Yjt0aGlzLm5leHQ9bnVsbDt9cmVzZXQoKXt0aGlzLm5leHQ9dGhpcy5nPXRoaXMuaD1udWxsO319bGV0IHUsdj0hMSxvYT1uZXcgcGEsdGE9KCk9Pntjb25zdCBhPVByb21pc2UucmVzb2x2ZSh2b2lkIDApO3U9KCk9PnthLnRoZW4oc2EpO307fTtmdW5jdGlvbiBzYSgpe2Zvcih2YXIgYTthPW5hKCk7KXt0cnl7YS5oLmNhbGwoYS5nKTt9Y2F0Y2goYyl7bWEoYyk7fXZhciBiPXFhO2IuaihhKTtiLmg8MTAwJiYoYi5oKyssYS5uZXh0PWIuZyxiLmc9YSk7fXY9ITE7fWZ1bmN0aW9uIHcoKXt0aGlzLnU9dGhpcy51O3RoaXMuQz10aGlzLkM7fXcucHJvdG90eXBlLnU9ITE7dy5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMudXx8KHRoaXMudT0hMCx0aGlzLk4oKSk7fTt3LnByb3RvdHlwZVtTeW1ib2wuZGlzcG9zZV09ZnVuY3Rpb24oKXt0aGlzLmRpc3Bvc2UoKTt9O3cucHJvdG90eXBlLk49ZnVuY3Rpb24oKXtpZih0aGlzLkMpZm9yKDt0aGlzLkMubGVuZ3RoOyl0aGlzLkMuc2hpZnQoKSgpO307ZnVuY3Rpb24geChhLGIpe3RoaXMudHlwZT1hO3RoaXMuZz10aGlzLnRhcmdldD1iO3RoaXMuZGVmYXVsdFByZXZlbnRlZD0hMTt9eC5wcm90b3R5cGUuaD1mdW5jdGlvbigpe3RoaXMuZGVmYXVsdFByZXZlbnRlZD0hMDt9O3ZhciB1YT1mdW5jdGlvbigpe2lmKCFsLmFkZEV2ZW50TGlzdGVuZXJ8fCFPYmplY3QuZGVmaW5lUHJvcGVydHkpcmV0dXJuICExO3ZhciBhPSExLGI9T2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LFwicGFzc2l2ZVwiLHtnZXQ6ZnVuY3Rpb24oKXthPSEwO319KTt0cnl7Y29uc3QgYz0oKT0+e307bC5hZGRFdmVudExpc3RlbmVyKFwidGVzdFwiLGMsYik7bC5yZW1vdmVFdmVudExpc3RlbmVyKFwidGVzdFwiLGMsYik7fWNhdGNoKGMpe31yZXR1cm4gYX0oKTtmdW5jdGlvbiB5KGEpe3JldHVybiAvXltcXHNcXHhhMF0qJC8udGVzdChhKX1mdW5jdGlvbiB6KGEsYil7eC5jYWxsKHRoaXMsYT9hLnR5cGU6XCJcIik7dGhpcy5yZWxhdGVkVGFyZ2V0PXRoaXMuZz10aGlzLnRhcmdldD1udWxsO3RoaXMuYnV0dG9uPXRoaXMuc2NyZWVuWT10aGlzLnNjcmVlblg9dGhpcy5jbGllbnRZPXRoaXMuY2xpZW50WD0wO3RoaXMua2V5PVwiXCI7dGhpcy5tZXRhS2V5PXRoaXMuc2hpZnRLZXk9dGhpcy5hbHRLZXk9dGhpcy5jdHJsS2V5PSExO3RoaXMuc3RhdGU9bnVsbDt0aGlzLnBvaW50ZXJJZD0wO3RoaXMucG9pbnRlclR5cGU9XCJcIjt0aGlzLmk9bnVsbDthJiZ0aGlzLmluaXQoYSxiKTt9dCh6LHgpO1xuei5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbihhLGIpe2NvbnN0IGM9dGhpcy50eXBlPWEudHlwZSxkPWEuY2hhbmdlZFRvdWNoZXMmJmEuY2hhbmdlZFRvdWNoZXMubGVuZ3RoP2EuY2hhbmdlZFRvdWNoZXNbMF06bnVsbDt0aGlzLnRhcmdldD1hLnRhcmdldHx8YS5zcmNFbGVtZW50O3RoaXMuZz1iO2I9YS5yZWxhdGVkVGFyZ2V0O2J8fChjPT1cIm1vdXNlb3ZlclwiP2I9YS5mcm9tRWxlbWVudDpjPT1cIm1vdXNlb3V0XCImJihiPWEudG9FbGVtZW50KSk7dGhpcy5yZWxhdGVkVGFyZ2V0PWI7ZD8odGhpcy5jbGllbnRYPWQuY2xpZW50WCE9PXZvaWQgMD9kLmNsaWVudFg6ZC5wYWdlWCx0aGlzLmNsaWVudFk9ZC5jbGllbnRZIT09dm9pZCAwP2QuY2xpZW50WTpkLnBhZ2VZLHRoaXMuc2NyZWVuWD1kLnNjcmVlblh8fDAsdGhpcy5zY3JlZW5ZPWQuc2NyZWVuWXx8MCk6KHRoaXMuY2xpZW50WD1hLmNsaWVudFghPT12b2lkIDA/YS5jbGllbnRYOmEucGFnZVgsdGhpcy5jbGllbnRZPWEuY2xpZW50WSE9PVxudm9pZCAwP2EuY2xpZW50WTphLnBhZ2VZLHRoaXMuc2NyZWVuWD1hLnNjcmVlblh8fDAsdGhpcy5zY3JlZW5ZPWEuc2NyZWVuWXx8MCk7dGhpcy5idXR0b249YS5idXR0b247dGhpcy5rZXk9YS5rZXl8fFwiXCI7dGhpcy5jdHJsS2V5PWEuY3RybEtleTt0aGlzLmFsdEtleT1hLmFsdEtleTt0aGlzLnNoaWZ0S2V5PWEuc2hpZnRLZXk7dGhpcy5tZXRhS2V5PWEubWV0YUtleTt0aGlzLnBvaW50ZXJJZD1hLnBvaW50ZXJJZHx8MDt0aGlzLnBvaW50ZXJUeXBlPWEucG9pbnRlclR5cGU7dGhpcy5zdGF0ZT1hLnN0YXRlO3RoaXMuaT1hO2EuZGVmYXVsdFByZXZlbnRlZCYmei5aLmguY2FsbCh0aGlzKTt9O3oucHJvdG90eXBlLmg9ZnVuY3Rpb24oKXt6LlouaC5jYWxsKHRoaXMpO2NvbnN0IGE9dGhpcy5pO2EucHJldmVudERlZmF1bHQ/YS5wcmV2ZW50RGVmYXVsdCgpOmEucmV0dXJuVmFsdWU9ITE7fTt2YXIgQj1cImNsb3N1cmVfbGlzdGVuYWJsZV9cIisoTWF0aC5yYW5kb20oKSoxRTZ8MCk7dmFyIHZhPTA7ZnVuY3Rpb24gd2EoYSxiLGMsZCxlKXt0aGlzLmxpc3RlbmVyPWE7dGhpcy5wcm94eT1udWxsO3RoaXMuc3JjPWI7dGhpcy50eXBlPWM7dGhpcy5jYXB0dXJlPSEhZDt0aGlzLmhhPWU7dGhpcy5rZXk9Kyt2YTt0aGlzLmRhPXRoaXMuZmE9ITE7fWZ1bmN0aW9uIHhhKGEpe2EuZGE9ITA7YS5saXN0ZW5lcj1udWxsO2EucHJveHk9bnVsbDthLnNyYz1udWxsO2EuaGE9bnVsbDt9ZnVuY3Rpb24geWEoYSxiLGMpe2Zvcihjb25zdCBkIGluIGEpYi5jYWxsKGMsYVtkXSxkLGEpO31mdW5jdGlvbiBBYShhLGIpe2Zvcihjb25zdCBjIGluIGEpYi5jYWxsKHZvaWQgMCxhW2NdLGMsYSk7fWZ1bmN0aW9uIEJhKGEpe2NvbnN0IGI9e307Zm9yKGNvbnN0IGMgaW4gYSliW2NdPWFbY107cmV0dXJuIGJ9Y29uc3QgQ2E9XCJjb25zdHJ1Y3RvciBoYXNPd25Qcm9wZXJ0eSBpc1Byb3RvdHlwZU9mIHByb3BlcnR5SXNFbnVtZXJhYmxlIHRvTG9jYWxlU3RyaW5nIHRvU3RyaW5nIHZhbHVlT2ZcIi5zcGxpdChcIiBcIik7ZnVuY3Rpb24gRGEoYSxiKXtsZXQgYyxkO2ZvcihsZXQgZT0xO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspe2Q9YXJndW1lbnRzW2VdO2ZvcihjIGluIGQpYVtjXT1kW2NdO2ZvcihsZXQgZj0wO2Y8Q2EubGVuZ3RoO2YrKyljPUNhW2ZdLE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChkLGMpJiYoYVtjXT1kW2NdKTt9fWZ1bmN0aW9uIEVhKGEpe3RoaXMuc3JjPWE7dGhpcy5nPXt9O3RoaXMuaD0wO31FYS5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKGEsYixjLGQsZSl7Y29uc3QgZj1hLnRvU3RyaW5nKCk7YT10aGlzLmdbZl07YXx8KGE9dGhpcy5nW2ZdPVtdLHRoaXMuaCsrKTtjb25zdCBnPUZhKGEsYixkLGUpO2c+LTE/KGI9YVtnXSxjfHwoYi5mYT0hMSkpOihiPW5ldyB3YShiLHRoaXMuc3JjLGYsISFkLGUpLGIuZmE9YyxhLnB1c2goYikpO3JldHVybiBifTtmdW5jdGlvbiBHYShhLGIpe2NvbnN0IGM9Yi50eXBlO2lmKGMgaW4gYS5nKXt2YXIgZD1hLmdbY10sZT1BcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGQsYix2b2lkIDApLGY7KGY9ZT49MCkmJkFycmF5LnByb3RvdHlwZS5zcGxpY2UuY2FsbChkLGUsMSk7ZiYmKHhhKGIpLGEuZ1tjXS5sZW5ndGg9PTAmJihkZWxldGUgYS5nW2NdLGEuaC0tKSk7fX1cbmZ1bmN0aW9uIEZhKGEsYixjLGQpe2ZvcihsZXQgZT0wO2U8YS5sZW5ndGg7KytlKXtjb25zdCBmPWFbZV07aWYoIWYuZGEmJmYubGlzdGVuZXI9PWImJmYuY2FwdHVyZT09ISFjJiZmLmhhPT1kKXJldHVybiBlfXJldHVybiAtMX12YXIgSGE9XCJjbG9zdXJlX2xtX1wiKyhNYXRoLnJhbmRvbSgpKjFFNnwwKSxJYT17fTtmdW5jdGlvbiBLYShhLGIsYyxkLGUpe2lmKGQmJmQub25jZSlyZXR1cm4gTGEoYSxiLGMsZCxlKTtpZihBcnJheS5pc0FycmF5KGIpKXtmb3IobGV0IGY9MDtmPGIubGVuZ3RoO2YrKylLYShhLGJbZl0sYyxkLGUpO3JldHVybiBudWxsfWM9TWEoYyk7cmV0dXJuIGEmJmFbQl0/YS5KKGIsYyxuKGQpPyEhZC5jYXB0dXJlOiEhZCxlKTpOYShhLGIsYywhMSxkLGUpfVxuZnVuY3Rpb24gTmEoYSxiLGMsZCxlLGYpe2lmKCFiKXRocm93IEVycm9yKFwiSW52YWxpZCBldmVudCB0eXBlXCIpO2NvbnN0IGc9bihlKT8hIWUuY2FwdHVyZTohIWU7bGV0IGs9T2EoYSk7a3x8KGFbSGFdPWs9bmV3IEVhKGEpKTtjPWsuYWRkKGIsYyxkLGcsZik7aWYoYy5wcm94eSlyZXR1cm4gYztkPVBhKCk7Yy5wcm94eT1kO2Quc3JjPWE7ZC5saXN0ZW5lcj1jO2lmKGEuYWRkRXZlbnRMaXN0ZW5lcil1YXx8KGU9ZyksZT09PXZvaWQgMCYmKGU9ITEpLGEuYWRkRXZlbnRMaXN0ZW5lcihiLnRvU3RyaW5nKCksZCxlKTtlbHNlIGlmKGEuYXR0YWNoRXZlbnQpYS5hdHRhY2hFdmVudChRYShiLnRvU3RyaW5nKCkpLGQpO2Vsc2UgaWYoYS5hZGRMaXN0ZW5lciYmYS5yZW1vdmVMaXN0ZW5lcilhLmFkZExpc3RlbmVyKGQpO2Vsc2UgdGhyb3cgRXJyb3IoXCJhZGRFdmVudExpc3RlbmVyIGFuZCBhdHRhY2hFdmVudCBhcmUgdW5hdmFpbGFibGUuXCIpO3JldHVybiBjfVxuZnVuY3Rpb24gUGEoKXtmdW5jdGlvbiBhKGMpe3JldHVybiBiLmNhbGwoYS5zcmMsYS5saXN0ZW5lcixjKX1jb25zdCBiPVJhO3JldHVybiBhfWZ1bmN0aW9uIExhKGEsYixjLGQsZSl7aWYoQXJyYXkuaXNBcnJheShiKSl7Zm9yKGxldCBmPTA7ZjxiLmxlbmd0aDtmKyspTGEoYSxiW2ZdLGMsZCxlKTtyZXR1cm4gbnVsbH1jPU1hKGMpO3JldHVybiBhJiZhW0JdP2EuSyhiLGMsbihkKT8hIWQuY2FwdHVyZTohIWQsZSk6TmEoYSxiLGMsITAsZCxlKX1cbmZ1bmN0aW9uIFNhKGEsYixjLGQsZSl7aWYoQXJyYXkuaXNBcnJheShiKSlmb3IodmFyIGY9MDtmPGIubGVuZ3RoO2YrKylTYShhLGJbZl0sYyxkLGUpO2Vsc2UgKGQ9bihkKT8hIWQuY2FwdHVyZTohIWQsYz1NYShjKSxhJiZhW0JdKT8oYT1hLmksZj1TdHJpbmcoYikudG9TdHJpbmcoKSxmIGluIGEuZyYmKGI9YS5nW2ZdLGM9RmEoYixjLGQsZSksYz4tMSYmKHhhKGJbY10pLEFycmF5LnByb3RvdHlwZS5zcGxpY2UuY2FsbChiLGMsMSksYi5sZW5ndGg9PTAmJihkZWxldGUgYS5nW2ZdLGEuaC0tKSkpKTphJiYoYT1PYShhKSkmJihiPWEuZ1tiLnRvU3RyaW5nKCldLGE9LTEsYiYmKGE9RmEoYixjLGQsZSkpLChjPWE+LTE/YlthXTpudWxsKSYmVGEoYykpO31cbmZ1bmN0aW9uIFRhKGEpe2lmKHR5cGVvZiBhIT09XCJudW1iZXJcIiYmYSYmIWEuZGEpe3ZhciBiPWEuc3JjO2lmKGImJmJbQl0pR2EoYi5pLGEpO2Vsc2Uge3ZhciBjPWEudHlwZSxkPWEucHJveHk7Yi5yZW1vdmVFdmVudExpc3RlbmVyP2IucmVtb3ZlRXZlbnRMaXN0ZW5lcihjLGQsYS5jYXB0dXJlKTpiLmRldGFjaEV2ZW50P2IuZGV0YWNoRXZlbnQoUWEoYyksZCk6Yi5hZGRMaXN0ZW5lciYmYi5yZW1vdmVMaXN0ZW5lciYmYi5yZW1vdmVMaXN0ZW5lcihkKTsoYz1PYShiKSk/KEdhKGMsYSksYy5oPT0wJiYoYy5zcmM9bnVsbCxiW0hhXT1udWxsKSk6eGEoYSk7fX19ZnVuY3Rpb24gUWEoYSl7cmV0dXJuIGEgaW4gSWE/SWFbYV06SWFbYV09XCJvblwiK2F9ZnVuY3Rpb24gUmEoYSxiKXtpZihhLmRhKWE9ITA7ZWxzZSB7Yj1uZXcgeihiLHRoaXMpO2NvbnN0IGM9YS5saXN0ZW5lcixkPWEuaGF8fGEuc3JjO2EuZmEmJlRhKGEpO2E9Yy5jYWxsKGQsYik7fXJldHVybiBhfVxuZnVuY3Rpb24gT2EoYSl7YT1hW0hhXTtyZXR1cm4gYSBpbnN0YW5jZW9mIEVhP2E6bnVsbH12YXIgVWE9XCJfX2Nsb3N1cmVfZXZlbnRzX2ZuX1wiKyhNYXRoLnJhbmRvbSgpKjFFOT4+PjApO2Z1bmN0aW9uIE1hKGEpe2lmKHR5cGVvZiBhPT09XCJmdW5jdGlvblwiKXJldHVybiBhO2FbVWFdfHwoYVtVYV09ZnVuY3Rpb24oYil7cmV0dXJuIGEuaGFuZGxlRXZlbnQoYil9KTtyZXR1cm4gYVtVYV19ZnVuY3Rpb24gQygpe3cuY2FsbCh0aGlzKTt0aGlzLmk9bmV3IEVhKHRoaXMpO3RoaXMuTT10aGlzO3RoaXMuRz1udWxsO310KEMsdyk7Qy5wcm90b3R5cGVbQl09ITA7Qy5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihhLGIsYyxkKXtTYSh0aGlzLGEsYixjLGQpO307XG5mdW5jdGlvbiBEKGEsYil7dmFyIGMsZD1hLkc7aWYoZClmb3IoYz1bXTtkO2Q9ZC5HKWMucHVzaChkKTthPWEuTTtkPWIudHlwZXx8YjtpZih0eXBlb2YgYj09PVwic3RyaW5nXCIpYj1uZXcgeChiLGEpO2Vsc2UgaWYoYiBpbnN0YW5jZW9mIHgpYi50YXJnZXQ9Yi50YXJnZXR8fGE7ZWxzZSB7dmFyIGU9YjtiPW5ldyB4KGQsYSk7RGEoYixlKTt9ZT0hMDtsZXQgZixnO2lmKGMpZm9yKGc9Yy5sZW5ndGgtMTtnPj0wO2ctLSlmPWIuZz1jW2ddLGU9VmEoZixkLCEwLGIpJiZlO2Y9Yi5nPWE7ZT1WYShmLGQsITAsYikmJmU7ZT1WYShmLGQsITEsYikmJmU7aWYoYylmb3IoZz0wO2c8Yy5sZW5ndGg7ZysrKWY9Yi5nPWNbZ10sZT1WYShmLGQsITEsYikmJmU7fVxuQy5wcm90b3R5cGUuTj1mdW5jdGlvbigpe0MuWi5OLmNhbGwodGhpcyk7aWYodGhpcy5pKXt2YXIgYT10aGlzLmk7Zm9yKGNvbnN0IGMgaW4gYS5nKXtjb25zdCBkPWEuZ1tjXTtmb3IobGV0IGU9MDtlPGQubGVuZ3RoO2UrKyl4YShkW2VdKTtkZWxldGUgYS5nW2NdO2EuaC0tO319dGhpcy5HPW51bGw7fTtDLnByb3RvdHlwZS5KPWZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLmkuYWRkKFN0cmluZyhhKSxiLCExLGMsZCl9O0MucHJvdG90eXBlLks9ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMuaS5hZGQoU3RyaW5nKGEpLGIsITAsYyxkKX07XG5mdW5jdGlvbiBWYShhLGIsYyxkKXtiPWEuaS5nW1N0cmluZyhiKV07aWYoIWIpcmV0dXJuICEwO2I9Yi5jb25jYXQoKTtsZXQgZT0hMDtmb3IobGV0IGY9MDtmPGIubGVuZ3RoOysrZil7Y29uc3QgZz1iW2ZdO2lmKGcmJiFnLmRhJiZnLmNhcHR1cmU9PWMpe2NvbnN0IGs9Zy5saXN0ZW5lcixxPWcuaGF8fGcuc3JjO2cuZmEmJkdhKGEuaSxnKTtlPWsuY2FsbChxLGQpIT09ITEmJmU7fX1yZXR1cm4gZSYmIWQuZGVmYXVsdFByZXZlbnRlZH1mdW5jdGlvbiBXYShhLGIpe2lmKHR5cGVvZiBhIT09XCJmdW5jdGlvblwiKWlmKGEmJnR5cGVvZiBhLmhhbmRsZUV2ZW50PT1cImZ1bmN0aW9uXCIpYT1wKGEuaGFuZGxlRXZlbnQsYSk7ZWxzZSB0aHJvdyBFcnJvcihcIkludmFsaWQgbGlzdGVuZXIgYXJndW1lbnRcIik7cmV0dXJuIE51bWJlcihiKT4yMTQ3NDgzNjQ3Py0xOmwuc2V0VGltZW91dChhLGJ8fDApfWZ1bmN0aW9uIFhhKGEpe2EuZz1XYSgoKT0+e2EuZz1udWxsO2EuaSYmKGEuaT0hMSxYYShhKSk7fSxhLmwpO2NvbnN0IGI9YS5oO2EuaD1udWxsO2EubS5hcHBseShudWxsLGIpO31jbGFzcyBZYSBleHRlbmRzIHd7Y29uc3RydWN0b3IoYSxiKXtzdXBlcigpO3RoaXMubT1hO3RoaXMubD1iO3RoaXMuaD1udWxsO3RoaXMuaT0hMTt0aGlzLmc9bnVsbDt9aihhKXt0aGlzLmg9YXJndW1lbnRzO3RoaXMuZz90aGlzLmk9ITA6WGEodGhpcyk7fU4oKXtzdXBlci5OKCk7dGhpcy5nJiYobC5jbGVhclRpbWVvdXQodGhpcy5nKSx0aGlzLmc9bnVsbCx0aGlzLmk9ITEsdGhpcy5oPW51bGwpO319ZnVuY3Rpb24gRShhKXt3LmNhbGwodGhpcyk7dGhpcy5oPWE7dGhpcy5nPXt9O310KEUsdyk7dmFyIFphPVtdO2Z1bmN0aW9uICRhKGEpe3lhKGEuZyxmdW5jdGlvbihiLGMpe3RoaXMuZy5oYXNPd25Qcm9wZXJ0eShjKSYmVGEoYik7fSxhKTthLmc9e307fUUucHJvdG90eXBlLk49ZnVuY3Rpb24oKXtFLlouTi5jYWxsKHRoaXMpOyRhKHRoaXMpO307RS5wcm90b3R5cGUuaGFuZGxlRXZlbnQ9ZnVuY3Rpb24oKXt0aHJvdyBFcnJvcihcIkV2ZW50SGFuZGxlci5oYW5kbGVFdmVudCBub3QgaW1wbGVtZW50ZWRcIik7fTt2YXIgYWI9bC5KU09OLnN0cmluZ2lmeTt2YXIgY2I9bC5KU09OLnBhcnNlO3ZhciBkYj1jbGFzc3tzdHJpbmdpZnkoYSl7cmV0dXJuIGwuSlNPTi5zdHJpbmdpZnkoYSx2b2lkIDApfXBhcnNlKGEpe3JldHVybiBsLkpTT04ucGFyc2UoYSx2b2lkIDApfX07ZnVuY3Rpb24gZWIoKXt9ZnVuY3Rpb24gZmIoKXt9dmFyIEg9e09QRU46XCJhXCIsaGI6XCJiXCIsRVJST1I6XCJjXCIsdGI6XCJkXCJ9O2Z1bmN0aW9uIGdiKCl7eC5jYWxsKHRoaXMsXCJkXCIpO310KGdiLHgpO2Z1bmN0aW9uIGhiKCl7eC5jYWxsKHRoaXMsXCJjXCIpO310KGhiLHgpO3ZhciBJPXt9LGliPW51bGw7ZnVuY3Rpb24gamIoKXtyZXR1cm4gaWI9aWJ8fG5ldyBDfUkuSWE9XCJzZXJ2ZXJyZWFjaGFiaWxpdHlcIjtmdW5jdGlvbiBrYihhKXt4LmNhbGwodGhpcyxJLklhLGEpO310KGtiLHgpO2Z1bmN0aW9uIGxiKGEpe2NvbnN0IGI9amIoKTtEKGIsbmV3IGtiKGIpKTt9SS5TVEFUX0VWRU5UPVwic3RhdGV2ZW50XCI7ZnVuY3Rpb24gbWIoYSxiKXt4LmNhbGwodGhpcyxJLlNUQVRfRVZFTlQsYSk7dGhpcy5zdGF0PWI7fXQobWIseCk7ZnVuY3Rpb24gSihhKXtjb25zdCBiPWpiKCk7RChiLG5ldyBtYihiLGEpKTt9SS5KYT1cInRpbWluZ2V2ZW50XCI7ZnVuY3Rpb24gbmIoYSxiKXt4LmNhbGwodGhpcyxJLkphLGEpO3RoaXMuc2l6ZT1iO310KG5iLHgpO1xuZnVuY3Rpb24gb2IoYSxiKXtpZih0eXBlb2YgYSE9PVwiZnVuY3Rpb25cIil0aHJvdyBFcnJvcihcIkZuIG11c3Qgbm90IGJlIG51bGwgYW5kIG11c3QgYmUgYSBmdW5jdGlvblwiKTtyZXR1cm4gbC5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YSgpO30sYil9ZnVuY3Rpb24gcGIoKXt0aGlzLmc9ITA7fXBiLnByb3RvdHlwZS51YT1mdW5jdGlvbigpe3RoaXMuZz0hMTt9O2Z1bmN0aW9uIHFiKGEsYixjLGQsZSxmKXthLmluZm8oZnVuY3Rpb24oKXtpZihhLmcpaWYoZil7dmFyIGc9XCJcIjt2YXIgaz1mLnNwbGl0KFwiJlwiKTtmb3IobGV0IG09MDttPGsubGVuZ3RoO20rKyl7dmFyIHE9a1ttXS5zcGxpdChcIj1cIik7aWYocS5sZW5ndGg+MSl7Y29uc3Qgcj1xWzBdO3E9cVsxXTtjb25zdCBBPXIuc3BsaXQoXCJfXCIpO2c9QS5sZW5ndGg+PTImJkFbMV09PVwidHlwZVwiP2crKHIrXCI9XCIrcStcIiZcIik6ZysocitcIj1yZWRhY3RlZCZcIik7fX19ZWxzZSBnPW51bGw7ZWxzZSBnPWY7cmV0dXJuIFwiWE1MSFRUUCBSRVEgKFwiK2QrXCIpIFthdHRlbXB0IFwiK2UrXCJdOiBcIitiK1wiXFxuXCIrYytcIlxcblwiK2d9KTt9XG5mdW5jdGlvbiByYihhLGIsYyxkLGUsZixnKXthLmluZm8oZnVuY3Rpb24oKXtyZXR1cm4gXCJYTUxIVFRQIFJFU1AgKFwiK2QrXCIpIFsgYXR0ZW1wdCBcIitlK1wiXTogXCIrYitcIlxcblwiK2MrXCJcXG5cIitmK1wiIFwiK2d9KTt9ZnVuY3Rpb24gSyhhLGIsYyxkKXthLmluZm8oZnVuY3Rpb24oKXtyZXR1cm4gXCJYTUxIVFRQIFRFWFQgKFwiK2IrXCIpOiBcIitzYihhLGMpKyhkP1wiIFwiK2Q6XCJcIil9KTt9ZnVuY3Rpb24gdGIoYSxiKXthLmluZm8oZnVuY3Rpb24oKXtyZXR1cm4gXCJUSU1FT1VUOiBcIitifSk7fXBiLnByb3RvdHlwZS5pbmZvPWZ1bmN0aW9uKCl7fTtcbmZ1bmN0aW9uIHNiKGEsYil7aWYoIWEuZylyZXR1cm4gYjtpZighYilyZXR1cm4gbnVsbDt0cnl7Y29uc3QgZj1KU09OLnBhcnNlKGIpO2lmKGYpZm9yKGE9MDthPGYubGVuZ3RoO2ErKylpZihBcnJheS5pc0FycmF5KGZbYV0pKXt2YXIgYz1mW2FdO2lmKCEoYy5sZW5ndGg8Mikpe3ZhciBkPWNbMV07aWYoQXJyYXkuaXNBcnJheShkKSYmIShkLmxlbmd0aDwxKSl7dmFyIGU9ZFswXTtpZihlIT1cIm5vb3BcIiYmZSE9XCJzdG9wXCImJmUhPVwiY2xvc2VcIilmb3IobGV0IGc9MTtnPGQubGVuZ3RoO2crKylkW2ddPVwiXCI7fX19cmV0dXJuIGFiKGYpfWNhdGNoKGYpe3JldHVybiBifX12YXIgdWI9e05PX0VSUk9SOjAsY2I6MSxxYjoyLHBiOjMsa2I6NCxvYjo1LHJiOjYsR2E6NyxUSU1FT1VUOjgsdWI6OX07dmFyIHZiPXtpYjpcImNvbXBsZXRlXCIsRmI6XCJzdWNjZXNzXCIsRVJST1I6XCJlcnJvclwiLEdhOlwiYWJvcnRcIix4YjpcInJlYWR5XCIseWI6XCJyZWFkeXN0YXRlY2hhbmdlXCIsVElNRU9VVDpcInRpbWVvdXRcIixzYjpcImluY3JlbWVudGFsZGF0YVwiLHdiOlwicHJvZ3Jlc3NcIixsYjpcImRvd25sb2FkcHJvZ3Jlc3NcIixOYjpcInVwbG9hZHByb2dyZXNzXCJ9O3ZhciB3YjtmdW5jdGlvbiB4Yigpe310KHhiLGViKTt4Yi5wcm90b3R5cGUuZz1mdW5jdGlvbigpe3JldHVybiBuZXcgWE1MSHR0cFJlcXVlc3R9O3diPW5ldyB4YjtmdW5jdGlvbiBMKGEpe3JldHVybiBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGEpKX1mdW5jdGlvbiB5YihhKXt2YXIgYj0xO2E9YS5zcGxpdChcIjpcIik7Y29uc3QgYz1bXTtmb3IoO2I+MCYmYS5sZW5ndGg7KWMucHVzaChhLnNoaWZ0KCkpLGItLTthLmxlbmd0aCYmYy5wdXNoKGEuam9pbihcIjpcIikpO3JldHVybiBjfWZ1bmN0aW9uIE4oYSxiLGMsZCl7dGhpcy5qPWE7dGhpcy5pPWI7dGhpcy5sPWM7dGhpcy5TPWR8fDE7dGhpcy5WPW5ldyBFKHRoaXMpO3RoaXMuSD00NUUzO3RoaXMuSj1udWxsO3RoaXMubz0hMTt0aGlzLnU9dGhpcy5CPXRoaXMuQT10aGlzLk09dGhpcy5GPXRoaXMuVD10aGlzLkQ9bnVsbDt0aGlzLkc9W107dGhpcy5nPW51bGw7dGhpcy5DPTA7dGhpcy5tPXRoaXMudj1udWxsO3RoaXMuWD0tMTt0aGlzLks9ITE7dGhpcy5QPTA7dGhpcy5PPW51bGw7dGhpcy5XPXRoaXMuTD10aGlzLlU9dGhpcy5SPSExO3RoaXMuaD1uZXcgemI7fWZ1bmN0aW9uIHpiKCl7dGhpcy5pPW51bGw7dGhpcy5nPVwiXCI7dGhpcy5oPSExO312YXIgQWI9e30sQmI9e307ZnVuY3Rpb24gQ2IoYSxiLGMpe2EuTT0xO2EuQT1EYihPKGIpKTthLnU9YzthLlI9ITA7RWIoYSxudWxsKTt9XG5mdW5jdGlvbiBFYihhLGIpe2EuRj1EYXRlLm5vdygpO0ZiKGEpO2EuQj1PKGEuQSk7dmFyIGM9YS5CLGQ9YS5TO0FycmF5LmlzQXJyYXkoZCl8fChkPVtTdHJpbmcoZCldKTtHYihjLmksXCJ0XCIsZCk7YS5DPTA7Yz1hLmouTDthLmg9bmV3IHpiO2EuZz1IYihhLmosYz9iOm51bGwsIWEudSk7YS5QPjAmJihhLk89bmV3IFlhKHAoYS5ZLGEsYS5nKSxhLlApKTtiPWEuVjtjPWEuZztkPWEuYmE7dmFyIGU9XCJyZWFkeXN0YXRlY2hhbmdlXCI7QXJyYXkuaXNBcnJheShlKXx8KGUmJihaYVswXT1lLnRvU3RyaW5nKCkpLGU9WmEpO2ZvcihsZXQgZj0wO2Y8ZS5sZW5ndGg7ZisrKXtjb25zdCBnPUthKGMsZVtmXSxkfHxiLmhhbmRsZUV2ZW50LCExLGIuaHx8Yik7aWYoIWcpYnJlYWs7Yi5nW2cua2V5XT1nO31iPWEuSj9CYShhLkopOnt9O2EudT8oYS52fHwoYS52PVwiUE9TVFwiKSxiW1wiQ29udGVudC1UeXBlXCJdPVwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIsYS5nLmVhKGEuQixhLnYsXG5hLnUsYikpOihhLnY9XCJHRVRcIixhLmcuZWEoYS5CLGEudixudWxsLGIpKTtsYigpO3FiKGEuaSxhLnYsYS5CLGEubCxhLlMsYS51KTt9Ti5wcm90b3R5cGUuYmE9ZnVuY3Rpb24oYSl7YT1hLnRhcmdldDtjb25zdCBiPXRoaXMuTztiJiZQKGEpPT0zP2IuaigpOnRoaXMuWShhKTt9O1xuTi5wcm90b3R5cGUuWT1mdW5jdGlvbihhKXt0cnl7aWYoYT09dGhpcy5nKWE6e2NvbnN0IGs9UCh0aGlzLmcpLHE9dGhpcy5nLnlhKCksbT10aGlzLmcuY2EoKTtpZighKGs8MykmJihrIT0zfHx0aGlzLmcmJih0aGlzLmguaHx8dGhpcy5nLmxhKCl8fEliKHRoaXMuZykpKSl7dGhpcy5LfHxrIT00fHxxPT03fHwocT09OHx8bTw9MD9sYigzKTpsYigyKSk7SmIodGhpcyk7dmFyIGI9dGhpcy5nLmNhKCk7dGhpcy5YPWI7dmFyIGM9S2IodGhpcyk7dGhpcy5vPWI9PTIwMDtyYih0aGlzLmksdGhpcy52LHRoaXMuQix0aGlzLmwsdGhpcy5TLGssYik7aWYodGhpcy5vKXtpZih0aGlzLlUmJiF0aGlzLkwpe2I6e2lmKHRoaXMuZyl7dmFyIGQsZT10aGlzLmc7aWYoKGQ9ZS5nP2UuZy5nZXRSZXNwb25zZUhlYWRlcihcIlgtSFRUUC1Jbml0aWFsLVJlc3BvbnNlXCIpOm51bGwpJiYheShkKSl7dmFyIGY9ZDticmVhayBifX1mPW51bGw7fWlmKGE9ZilLKHRoaXMuaSx0aGlzLmwsYSxcIkluaXRpYWwgaGFuZHNoYWtlIHJlc3BvbnNlIHZpYSBYLUhUVFAtSW5pdGlhbC1SZXNwb25zZVwiKSxcbnRoaXMuTD0hMCxMYih0aGlzLGEpO2Vsc2Uge3RoaXMubz0hMTt0aGlzLm09MztKKDEyKTtRKHRoaXMpO01iKHRoaXMpO2JyZWFrIGF9fWlmKHRoaXMuUil7YT0hMDtsZXQgcjtmb3IoOyF0aGlzLksmJnRoaXMuQzxjLmxlbmd0aDspaWYocj1OYih0aGlzLGMpLHI9PUJiKXtrPT00JiYodGhpcy5tPTQsSigxNCksYT0hMSk7Syh0aGlzLmksdGhpcy5sLG51bGwsXCJbSW5jb21wbGV0ZSBSZXNwb25zZV1cIik7YnJlYWt9ZWxzZSBpZihyPT1BYil7dGhpcy5tPTQ7SigxNSk7Syh0aGlzLmksdGhpcy5sLGMsXCJbSW52YWxpZCBDaHVua11cIik7YT0hMTticmVha31lbHNlIEsodGhpcy5pLHRoaXMubCxyLG51bGwpLExiKHRoaXMscik7T2IodGhpcykmJnRoaXMuQyE9MCYmKHRoaXMuaC5nPXRoaXMuaC5nLnNsaWNlKHRoaXMuQyksdGhpcy5DPTApO2shPTR8fGMubGVuZ3RoIT0wfHx0aGlzLmguaHx8KHRoaXMubT0xLEooMTYpLGE9ITEpO3RoaXMubz10aGlzLm8mJmE7aWYoIWEpSyh0aGlzLmksdGhpcy5sLFxuYyxcIltJbnZhbGlkIENodW5rZWQgUmVzcG9uc2VdXCIpLFEodGhpcyksTWIodGhpcyk7ZWxzZSBpZihjLmxlbmd0aD4wJiYhdGhpcy5XKXt0aGlzLlc9ITA7dmFyIGc9dGhpcy5qO2cuZz09dGhpcyYmZy5hYSYmIWcuUCYmKGcuai5pbmZvKFwiR3JlYXQsIG5vIGJ1ZmZlcmluZyBwcm94eSBkZXRlY3RlZC4gQnl0ZXMgcmVjZWl2ZWQ6IFwiK2MubGVuZ3RoKSxQYihnKSxnLlA9ITAsSigxMSkpO319ZWxzZSBLKHRoaXMuaSx0aGlzLmwsYyxudWxsKSxMYih0aGlzLGMpO2s9PTQmJlEodGhpcyk7dGhpcy5vJiYhdGhpcy5LJiYoaz09ND9RYih0aGlzLmosdGhpcyk6KHRoaXMubz0hMSxGYih0aGlzKSkpO31lbHNlIFJiKHRoaXMuZyksYj09NDAwJiZjLmluZGV4T2YoXCJVbmtub3duIFNJRFwiKT4wPyh0aGlzLm09MyxKKDEyKSk6KHRoaXMubT0wLEooMTMpKSxRKHRoaXMpLE1iKHRoaXMpO319fWNhdGNoKGspe31maW5hbGx5e319O1xuZnVuY3Rpb24gS2IoYSl7aWYoIU9iKGEpKXJldHVybiBhLmcubGEoKTtjb25zdCBiPUliKGEuZyk7aWYoYj09PVwiXCIpcmV0dXJuIFwiXCI7bGV0IGM9XCJcIjtjb25zdCBkPWIubGVuZ3RoLGU9UChhLmcpPT00O2lmKCFhLmguaSl7aWYodHlwZW9mIFRleHREZWNvZGVyPT09XCJ1bmRlZmluZWRcIilyZXR1cm4gUShhKSxNYihhKSxcIlwiO2EuaC5pPW5ldyBsLlRleHREZWNvZGVyO31mb3IobGV0IGY9MDtmPGQ7ZisrKWEuaC5oPSEwLGMrPWEuaC5pLmRlY29kZShiW2ZdLHtzdHJlYW06IShlJiZmPT1kLTEpfSk7Yi5sZW5ndGg9MDthLmguZys9YzthLkM9MDtyZXR1cm4gYS5oLmd9ZnVuY3Rpb24gT2IoYSl7cmV0dXJuIGEuZz9hLnY9PVwiR0VUXCImJmEuTSE9MiYmYS5qLkFhOiExfVxuZnVuY3Rpb24gTmIoYSxiKXt2YXIgYz1hLkMsZD1iLmluZGV4T2YoXCJcXG5cIixjKTtpZihkPT0tMSlyZXR1cm4gQmI7Yz1OdW1iZXIoYi5zdWJzdHJpbmcoYyxkKSk7aWYoaXNOYU4oYykpcmV0dXJuIEFiO2QrPTE7aWYoZCtjPmIubGVuZ3RoKXJldHVybiBCYjtiPWIuc2xpY2UoZCxkK2MpO2EuQz1kK2M7cmV0dXJuIGJ9Ti5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKCl7dGhpcy5LPSEwO1EodGhpcyk7fTtmdW5jdGlvbiBGYihhKXthLlQ9RGF0ZS5ub3coKSthLkg7U2IoYSxhLkgpO31mdW5jdGlvbiBTYihhLGIpe2lmKGEuRCE9bnVsbCl0aHJvdyBFcnJvcihcIldhdGNoRG9nIHRpbWVyIG5vdCBudWxsXCIpO2EuRD1vYihwKGEuYWEsYSksYik7fWZ1bmN0aW9uIEpiKGEpe2EuRCYmKGwuY2xlYXJUaW1lb3V0KGEuRCksYS5EPW51bGwpO31cbk4ucHJvdG90eXBlLmFhPWZ1bmN0aW9uKCl7dGhpcy5EPW51bGw7Y29uc3QgYT1EYXRlLm5vdygpO2EtdGhpcy5UPj0wPyh0Yih0aGlzLmksdGhpcy5CKSx0aGlzLk0hPTImJihsYigpLEooMTcpKSxRKHRoaXMpLHRoaXMubT0yLE1iKHRoaXMpKTpTYih0aGlzLHRoaXMuVC1hKTt9O2Z1bmN0aW9uIE1iKGEpe2Euai5JPT0wfHxhLkt8fFFiKGEuaixhKTt9ZnVuY3Rpb24gUShhKXtKYihhKTt2YXIgYj1hLk87YiYmdHlwZW9mIGIuZGlzcG9zZT09XCJmdW5jdGlvblwiJiZiLmRpc3Bvc2UoKTthLk89bnVsbDskYShhLlYpO2EuZyYmKGI9YS5nLGEuZz1udWxsLGIuYWJvcnQoKSxiLmRpc3Bvc2UoKSk7fVxuZnVuY3Rpb24gTGIoYSxiKXt0cnl7dmFyIGM9YS5qO2lmKGMuSSE9MCYmKGMuZz09YXx8VGIoYy5oLGEpKSlpZighYS5MJiZUYihjLmgsYSkmJmMuST09Myl7dHJ5e3ZhciBkPWMuQmEuZy5wYXJzZShiKTt9Y2F0Y2gobSl7ZD1udWxsO31pZihBcnJheS5pc0FycmF5KGQpJiZkLmxlbmd0aD09Myl7dmFyIGU9ZDtpZihlWzBdPT0wKWE6e2lmKCFjLnYpe2lmKGMuZylpZihjLmcuRiszRTM8YS5GKVViKGMpLFZiKGMpO2Vsc2UgYnJlYWsgYTtXYihjKTtKKDE4KTt9fWVsc2UgYy54YT1lWzFdLDA8Yy54YS1jLksmJmVbMl08Mzc1MDAmJmMuRiYmYy5BPT0wJiYhYy5DJiYoYy5DPW9iKHAoYy5WYSxjKSw2RTMpKTtYYihjLmgpPD0xJiZjLnRhJiYoYy50YT12b2lkIDApO31lbHNlIFIoYywxMSk7fWVsc2UgaWYoKGEuTHx8Yy5nPT1hKSYmVWIoYyksIXkoYikpZm9yKGU9Yy5CYS5nLnBhcnNlKGIpLGI9MDtiPGUubGVuZ3RoO2IrKyl7bGV0IG09ZVtiXTtjb25zdCByPW1bMF07aWYoIShyPD1jLkspKWlmKGMuSz1cbnIsbT1tWzFdLGMuST09MilpZihtWzBdPT1cImNcIil7Yy5NPW1bMV07Yy5iYT1tWzJdO2NvbnN0IEE9bVszXTtBIT1udWxsJiYoYy5rYT1BLGMuai5pbmZvKFwiVkVSPVwiK2Mua2EpKTtjb25zdCBNPW1bNF07TSE9bnVsbCYmKGMuemE9TSxjLmouaW5mbyhcIlNWRVI9XCIrYy56YSkpO2NvbnN0IEY9bVs1XTtGIT1udWxsJiZ0eXBlb2YgRj09PVwibnVtYmVyXCImJkY+MCYmKGQ9MS41KkYsYy5PPWQsYy5qLmluZm8oXCJiYWNrQ2hhbm5lbFJlcXVlc3RUaW1lb3V0TXNfPVwiK2QpKTtkPWM7Y29uc3QgRz1hLmc7aWYoRyl7Y29uc3QgemE9Ry5nP0cuZy5nZXRSZXNwb25zZUhlYWRlcihcIlgtQ2xpZW50LVdpcmUtUHJvdG9jb2xcIik6bnVsbDtpZih6YSl7dmFyIGY9ZC5oO2YuZ3x8emEuaW5kZXhPZihcInNwZHlcIik9PS0xJiZ6YS5pbmRleE9mKFwicXVpY1wiKT09LTEmJnphLmluZGV4T2YoXCJoMlwiKT09LTF8fChmLmo9Zi5sLGYuZz1uZXcgU2V0LGYuaCYmKFliKGYsZi5oKSxmLmg9bnVsbCkpO31pZihkLkcpe2NvbnN0IGJiPVxuRy5nP0cuZy5nZXRSZXNwb25zZUhlYWRlcihcIlgtSFRUUC1TZXNzaW9uLUlkXCIpOm51bGw7YmImJihkLndhPWJiLFMoZC5KLGQuRyxiYikpO319Yy5JPTM7Yy5sJiZjLmwucmEoKTtjLmFhJiYoYy5UPURhdGUubm93KCktYS5GLGMuai5pbmZvKFwiSGFuZHNoYWtlIFJUVDogXCIrYy5UK1wibXNcIikpO2Q9Yzt2YXIgZz1hO2QubmE9WmIoZCxkLkw/ZC5iYTpudWxsLGQuVyk7aWYoZy5MKXskYihkLmgsZyk7dmFyIGs9ZyxxPWQuTztxJiYoay5IPXEpO2suRCYmKEpiKGspLEZiKGspKTtkLmc9Zzt9ZWxzZSBhYyhkKTtjLmkubGVuZ3RoPjAmJmJjKGMpO31lbHNlIG1bMF0hPVwic3RvcFwiJiZtWzBdIT1cImNsb3NlXCJ8fFIoYyw3KTtlbHNlIGMuST09MyYmKG1bMF09PVwic3RvcFwifHxtWzBdPT1cImNsb3NlXCI/bVswXT09XCJzdG9wXCI/UihjLDcpOmNjKGMpOm1bMF0hPVwibm9vcFwiJiZjLmwmJmMubC5xYShtKSxjLkE9MCk7fWxiKDQpO31jYXRjaChtKXt9fXZhciBkYz1jbGFzc3tjb25zdHJ1Y3RvcihhLGIpe3RoaXMuZz1hO3RoaXMubWFwPWI7fX07ZnVuY3Rpb24gZWMoYSl7dGhpcy5sPWF8fDEwO2wuUGVyZm9ybWFuY2VOYXZpZ2F0aW9uVGltaW5nPyhhPWwucGVyZm9ybWFuY2UuZ2V0RW50cmllc0J5VHlwZShcIm5hdmlnYXRpb25cIiksYT1hLmxlbmd0aD4wJiYoYVswXS5uZXh0SG9wUHJvdG9jb2w9PVwiaHFcInx8YVswXS5uZXh0SG9wUHJvdG9jb2w9PVwiaDJcIikpOmE9ISEobC5jaHJvbWUmJmwuY2hyb21lLmxvYWRUaW1lcyYmbC5jaHJvbWUubG9hZFRpbWVzKCkmJmwuY2hyb21lLmxvYWRUaW1lcygpLndhc0ZldGNoZWRWaWFTcGR5KTt0aGlzLmo9YT90aGlzLmw6MTt0aGlzLmc9bnVsbDt0aGlzLmo+MSYmKHRoaXMuZz1uZXcgU2V0KTt0aGlzLmg9bnVsbDt0aGlzLmk9W107fWZ1bmN0aW9uIGZjKGEpe3JldHVybiBhLmg/ITA6YS5nP2EuZy5zaXplPj1hLmo6ITF9ZnVuY3Rpb24gWGIoYSl7cmV0dXJuIGEuaD8xOmEuZz9hLmcuc2l6ZTowfWZ1bmN0aW9uIFRiKGEsYil7cmV0dXJuIGEuaD9hLmg9PWI6YS5nP2EuZy5oYXMoYik6ITF9XG5mdW5jdGlvbiBZYihhLGIpe2EuZz9hLmcuYWRkKGIpOmEuaD1iO31mdW5jdGlvbiAkYihhLGIpe2EuaCYmYS5oPT1iP2EuaD1udWxsOmEuZyYmYS5nLmhhcyhiKSYmYS5nLmRlbGV0ZShiKTt9ZWMucHJvdG90eXBlLmNhbmNlbD1mdW5jdGlvbigpe3RoaXMuaT1oYyh0aGlzKTtpZih0aGlzLmgpdGhpcy5oLmNhbmNlbCgpLHRoaXMuaD1udWxsO2Vsc2UgaWYodGhpcy5nJiZ0aGlzLmcuc2l6ZSE9PTApe2Zvcihjb25zdCBhIG9mIHRoaXMuZy52YWx1ZXMoKSlhLmNhbmNlbCgpO3RoaXMuZy5jbGVhcigpO319O2Z1bmN0aW9uIGhjKGEpe2lmKGEuaCE9bnVsbClyZXR1cm4gYS5pLmNvbmNhdChhLmguRyk7aWYoYS5nIT1udWxsJiZhLmcuc2l6ZSE9PTApe2xldCBiPWEuaTtmb3IoY29uc3QgYyBvZiBhLmcudmFsdWVzKCkpYj1iLmNvbmNhdChjLkcpO3JldHVybiBifXJldHVybiBqYShhLmkpfXZhciBpYz1SZWdFeHAoXCJeKD86KFteOi8/Iy5dKyk6KT8oPzovLyg/OihbXlxcXFxcXFxcLz8jXSopQCk/KFteXFxcXFxcXFwvPyNdKj8pKD86OihbMC05XSspKT8oPz1bXFxcXFxcXFwvPyNdfCQpKT8oW14/I10rKT8oPzpcXFxcPyhbXiNdKikpPyg/OiMoW1xcXFxzXFxcXFNdKikpPyRcIik7ZnVuY3Rpb24gamMoYSxiKXtpZihhKXthPWEuc3BsaXQoXCImXCIpO2ZvcihsZXQgYz0wO2M8YS5sZW5ndGg7YysrKXtjb25zdCBkPWFbY10uaW5kZXhPZihcIj1cIik7bGV0IGUsZj1udWxsO2Q+PTA/KGU9YVtjXS5zdWJzdHJpbmcoMCxkKSxmPWFbY10uc3Vic3RyaW5nKGQrMSkpOmU9YVtjXTtiKGUsZj9kZWNvZGVVUklDb21wb25lbnQoZi5yZXBsYWNlKC9cXCsvZyxcIiBcIikpOlwiXCIpO319fWZ1bmN0aW9uIFQoYSl7dGhpcy5nPXRoaXMubz10aGlzLmo9XCJcIjt0aGlzLnU9bnVsbDt0aGlzLm09dGhpcy5oPVwiXCI7dGhpcy5sPSExO2xldCBiO2EgaW5zdGFuY2VvZiBUPyh0aGlzLmw9YS5sLGtjKHRoaXMsYS5qKSx0aGlzLm89YS5vLHRoaXMuZz1hLmcsbGModGhpcyxhLnUpLHRoaXMuaD1hLmgsbWModGhpcyxuYyhhLmkpKSx0aGlzLm09YS5tKTphJiYoYj1TdHJpbmcoYSkubWF0Y2goaWMpKT8odGhpcy5sPSExLGtjKHRoaXMsYlsxXXx8XCJcIiwhMCksdGhpcy5vPW9jKGJbMl18fFwiXCIpLHRoaXMuZz1vYyhiWzNdfHxcIlwiLCEwKSxsYyh0aGlzLGJbNF0pLHRoaXMuaD1vYyhiWzVdfHxcIlwiLCEwKSxtYyh0aGlzLGJbNl18fFwiXCIsITApLHRoaXMubT1vYyhiWzddfHxcIlwiKSk6KHRoaXMubD0hMSx0aGlzLmk9bmV3IHBjKG51bGwsdGhpcy5sKSk7fVxuVC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtjb25zdCBhPVtdO3ZhciBiPXRoaXMuajtiJiZhLnB1c2gocWMoYixyYywhMCksXCI6XCIpO3ZhciBjPXRoaXMuZztpZihjfHxiPT1cImZpbGVcIilhLnB1c2goXCIvL1wiKSwoYj10aGlzLm8pJiZhLnB1c2gocWMoYixyYywhMCksXCJAXCIpLGEucHVzaChMKGMpLnJlcGxhY2UoLyUyNShbMC05YS1mQS1GXXsyfSkvZyxcIiUkMVwiKSksYz10aGlzLnUsYyE9bnVsbCYmYS5wdXNoKFwiOlwiLFN0cmluZyhjKSk7aWYoYz10aGlzLmgpdGhpcy5nJiZjLmNoYXJBdCgwKSE9XCIvXCImJmEucHVzaChcIi9cIiksYS5wdXNoKHFjKGMsYy5jaGFyQXQoMCk9PVwiL1wiP3NjOnRjLCEwKSk7KGM9dGhpcy5pLnRvU3RyaW5nKCkpJiZhLnB1c2goXCI/XCIsYyk7KGM9dGhpcy5tKSYmYS5wdXNoKFwiI1wiLHFjKGMsdWMpKTtyZXR1cm4gYS5qb2luKFwiXCIpfTtcblQucHJvdG90eXBlLnJlc29sdmU9ZnVuY3Rpb24oYSl7Y29uc3QgYj1PKHRoaXMpO2xldCBjPSEhYS5qO2M/a2MoYixhLmopOmM9ISFhLm87Yz9iLm89YS5vOmM9ISFhLmc7Yz9iLmc9YS5nOmM9YS51IT1udWxsO3ZhciBkPWEuaDtpZihjKWxjKGIsYS51KTtlbHNlIGlmKGM9ISFhLmgpe2lmKGQuY2hhckF0KDApIT1cIi9cIilpZih0aGlzLmcmJiF0aGlzLmgpZD1cIi9cIitkO2Vsc2Uge3ZhciBlPWIuaC5sYXN0SW5kZXhPZihcIi9cIik7ZSE9LTEmJihkPWIuaC5zbGljZSgwLGUrMSkrZCk7fWU9ZDtpZihlPT1cIi4uXCJ8fGU9PVwiLlwiKWQ9XCJcIjtlbHNlIGlmKGUuaW5kZXhPZihcIi4vXCIpIT0tMXx8ZS5pbmRleE9mKFwiLy5cIikhPS0xKXtkPWUubGFzdEluZGV4T2YoXCIvXCIsMCk9PTA7ZT1lLnNwbGl0KFwiL1wiKTtjb25zdCBmPVtdO2ZvcihsZXQgZz0wO2c8ZS5sZW5ndGg7KXtjb25zdCBrPWVbZysrXTtrPT1cIi5cIj9kJiZnPT1lLmxlbmd0aCYmZi5wdXNoKFwiXCIpOms9PVwiLi5cIj8oKGYubGVuZ3RoPjF8fGYubGVuZ3RoPT1cbjEmJmZbMF0hPVwiXCIpJiZmLnBvcCgpLGQmJmc9PWUubGVuZ3RoJiZmLnB1c2goXCJcIikpOihmLnB1c2goayksZD0hMCk7fWQ9Zi5qb2luKFwiL1wiKTt9ZWxzZSBkPWU7fWM/Yi5oPWQ6Yz1hLmkudG9TdHJpbmcoKSE9PVwiXCI7Yz9tYyhiLG5jKGEuaSkpOmM9ISFhLm07YyYmKGIubT1hLm0pO3JldHVybiBifTtmdW5jdGlvbiBPKGEpe3JldHVybiBuZXcgVChhKX1mdW5jdGlvbiBrYyhhLGIsYyl7YS5qPWM/b2MoYiwhMCk6YjthLmomJihhLmo9YS5qLnJlcGxhY2UoLzokLyxcIlwiKSk7fWZ1bmN0aW9uIGxjKGEsYil7aWYoYil7Yj1OdW1iZXIoYik7aWYoaXNOYU4oYil8fGI8MCl0aHJvdyBFcnJvcihcIkJhZCBwb3J0IG51bWJlciBcIitiKTthLnU9Yjt9ZWxzZSBhLnU9bnVsbDt9ZnVuY3Rpb24gbWMoYSxiLGMpe2IgaW5zdGFuY2VvZiBwYz8oYS5pPWIsdmMoYS5pLGEubCkpOihjfHwoYj1xYyhiLHdjKSksYS5pPW5ldyBwYyhiLGEubCkpO31mdW5jdGlvbiBTKGEsYixjKXthLmkuc2V0KGIsYyk7fVxuZnVuY3Rpb24gRGIoYSl7UyhhLFwienhcIixNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMjE0NzQ4MzY0OCkudG9TdHJpbmcoMzYpK01hdGguYWJzKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoyMTQ3NDgzNjQ4KV5EYXRlLm5vdygpKS50b1N0cmluZygzNikpO3JldHVybiBhfWZ1bmN0aW9uIG9jKGEsYil7cmV0dXJuIGE/Yj9kZWNvZGVVUkkoYS5yZXBsYWNlKC8lMjUvZyxcIiUyNTI1XCIpKTpkZWNvZGVVUklDb21wb25lbnQoYSk6XCJcIn1mdW5jdGlvbiBxYyhhLGIsYyl7cmV0dXJuIHR5cGVvZiBhPT09XCJzdHJpbmdcIj8oYT1lbmNvZGVVUkkoYSkucmVwbGFjZShiLHhjKSxjJiYoYT1hLnJlcGxhY2UoLyUyNShbMC05YS1mQS1GXXsyfSkvZyxcIiUkMVwiKSksYSk6bnVsbH1mdW5jdGlvbiB4YyhhKXthPWEuY2hhckNvZGVBdCgwKTtyZXR1cm4gXCIlXCIrKGE+PjQmMTUpLnRvU3RyaW5nKDE2KSsoYSYxNSkudG9TdHJpbmcoMTYpfVxudmFyIHJjPS9bI1xcL1xcP0BdL2csdGM9L1sjXFw/Ol0vZyxzYz0vWyNcXD9dL2csd2M9L1sjXFw/QF0vZyx1Yz0vIy9nO2Z1bmN0aW9uIHBjKGEsYil7dGhpcy5oPXRoaXMuZz1udWxsO3RoaXMuaT1hfHxudWxsO3RoaXMuaj0hIWI7fWZ1bmN0aW9uIFUoYSl7YS5nfHwoYS5nPW5ldyBNYXAsYS5oPTAsYS5pJiZqYyhhLmksZnVuY3Rpb24oYixjKXthLmFkZChkZWNvZGVVUklDb21wb25lbnQoYi5yZXBsYWNlKC9cXCsvZyxcIiBcIikpLGMpO30pKTt9aD1wYy5wcm90b3R5cGU7aC5hZGQ9ZnVuY3Rpb24oYSxiKXtVKHRoaXMpO3RoaXMuaT1udWxsO2E9Vih0aGlzLGEpO2xldCBjPXRoaXMuZy5nZXQoYSk7Y3x8dGhpcy5nLnNldChhLGM9W10pO2MucHVzaChiKTt0aGlzLmgrPTE7cmV0dXJuIHRoaXN9O2Z1bmN0aW9uIHljKGEsYil7VShhKTtiPVYoYSxiKTthLmcuaGFzKGIpJiYoYS5pPW51bGwsYS5oLT1hLmcuZ2V0KGIpLmxlbmd0aCxhLmcuZGVsZXRlKGIpKTt9XG5mdW5jdGlvbiB6YyhhLGIpe1UoYSk7Yj1WKGEsYik7cmV0dXJuIGEuZy5oYXMoYil9aC5mb3JFYWNoPWZ1bmN0aW9uKGEsYil7VSh0aGlzKTt0aGlzLmcuZm9yRWFjaChmdW5jdGlvbihjLGQpe2MuZm9yRWFjaChmdW5jdGlvbihlKXthLmNhbGwoYixlLGQsdGhpcyk7fSx0aGlzKTt9LHRoaXMpO307ZnVuY3Rpb24gQWMoYSxiKXtVKGEpO2xldCBjPVtdO2lmKHR5cGVvZiBiPT09XCJzdHJpbmdcIil6YyhhLGIpJiYoYz1jLmNvbmNhdChhLmcuZ2V0KFYoYSxiKSkpKTtlbHNlIGZvcihhPUFycmF5LmZyb20oYS5nLnZhbHVlcygpKSxiPTA7YjxhLmxlbmd0aDtiKyspYz1jLmNvbmNhdChhW2JdKTtyZXR1cm4gY31oLnNldD1mdW5jdGlvbihhLGIpe1UodGhpcyk7dGhpcy5pPW51bGw7YT1WKHRoaXMsYSk7emModGhpcyxhKSYmKHRoaXMuaC09dGhpcy5nLmdldChhKS5sZW5ndGgpO3RoaXMuZy5zZXQoYSxbYl0pO3RoaXMuaCs9MTtyZXR1cm4gdGhpc307XG5oLmdldD1mdW5jdGlvbihhLGIpe2lmKCFhKXJldHVybiBiO2E9QWModGhpcyxhKTtyZXR1cm4gYS5sZW5ndGg+MD9TdHJpbmcoYVswXSk6Yn07ZnVuY3Rpb24gR2IoYSxiLGMpe3ljKGEsYik7Yy5sZW5ndGg+MCYmKGEuaT1udWxsLGEuZy5zZXQoVihhLGIpLGphKGMpKSxhLmgrPWMubGVuZ3RoKTt9aC50b1N0cmluZz1mdW5jdGlvbigpe2lmKHRoaXMuaSlyZXR1cm4gdGhpcy5pO2lmKCF0aGlzLmcpcmV0dXJuIFwiXCI7Y29uc3QgYT1bXSxiPUFycmF5LmZyb20odGhpcy5nLmtleXMoKSk7Zm9yKGxldCBkPTA7ZDxiLmxlbmd0aDtkKyspe3ZhciBjPWJbZF07Y29uc3QgZT1MKGMpO2M9QWModGhpcyxjKTtmb3IobGV0IGY9MDtmPGMubGVuZ3RoO2YrKyl7bGV0IGc9ZTtjW2ZdIT09XCJcIiYmKGcrPVwiPVwiK0woY1tmXSkpO2EucHVzaChnKTt9fXJldHVybiB0aGlzLmk9YS5qb2luKFwiJlwiKX07XG5mdW5jdGlvbiBuYyhhKXtjb25zdCBiPW5ldyBwYztiLmk9YS5pO2EuZyYmKGIuZz1uZXcgTWFwKGEuZyksYi5oPWEuaCk7cmV0dXJuIGJ9ZnVuY3Rpb24gVihhLGIpe2I9U3RyaW5nKGIpO2EuaiYmKGI9Yi50b0xvd2VyQ2FzZSgpKTtyZXR1cm4gYn1mdW5jdGlvbiB2YyhhLGIpe2ImJiFhLmomJihVKGEpLGEuaT1udWxsLGEuZy5mb3JFYWNoKGZ1bmN0aW9uKGMsZCl7Y29uc3QgZT1kLnRvTG93ZXJDYXNlKCk7ZCE9ZSYmKHljKHRoaXMsZCksR2IodGhpcyxlLGMpKTt9LGEpKTthLmo9Yjt9ZnVuY3Rpb24gQmMoYSxiKXtjb25zdCBjPW5ldyBwYjtpZihsLkltYWdlKXtjb25zdCBkPW5ldyBJbWFnZTtkLm9ubG9hZD1oYShXLGMsXCJUZXN0TG9hZEltYWdlOiBsb2FkZWRcIiwhMCxiLGQpO2Qub25lcnJvcj1oYShXLGMsXCJUZXN0TG9hZEltYWdlOiBlcnJvclwiLCExLGIsZCk7ZC5vbmFib3J0PWhhKFcsYyxcIlRlc3RMb2FkSW1hZ2U6IGFib3J0XCIsITEsYixkKTtkLm9udGltZW91dD1oYShXLGMsXCJUZXN0TG9hZEltYWdlOiB0aW1lb3V0XCIsITEsYixkKTtsLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtpZihkLm9udGltZW91dClkLm9udGltZW91dCgpO30sMUU0KTtkLnNyYz1hO31lbHNlIGIoITEpO31cbmZ1bmN0aW9uIENjKGEsYil7Y29uc3QgYz1uZXcgcGIsZD1uZXcgQWJvcnRDb250cm9sbGVyLGU9c2V0VGltZW91dCgoKT0+e2QuYWJvcnQoKTtXKGMsXCJUZXN0UGluZ1NlcnZlcjogdGltZW91dFwiLCExLGIpO30sMUU0KTtmZXRjaChhLHtzaWduYWw6ZC5zaWduYWx9KS50aGVuKGY9PntjbGVhclRpbWVvdXQoZSk7Zi5vaz9XKGMsXCJUZXN0UGluZ1NlcnZlcjogb2tcIiwhMCxiKTpXKGMsXCJUZXN0UGluZ1NlcnZlcjogc2VydmVyIGVycm9yXCIsITEsYik7fSkuY2F0Y2goKCk9PntjbGVhclRpbWVvdXQoZSk7VyhjLFwiVGVzdFBpbmdTZXJ2ZXI6IGVycm9yXCIsITEsYik7fSk7fWZ1bmN0aW9uIFcoYSxiLGMsZCxlKXt0cnl7ZSYmKGUub25sb2FkPW51bGwsZS5vbmVycm9yPW51bGwsZS5vbmFib3J0PW51bGwsZS5vbnRpbWVvdXQ9bnVsbCksZChjKTt9Y2F0Y2goZil7fX1mdW5jdGlvbiBEYygpe3RoaXMuZz1uZXcgZGI7fWZ1bmN0aW9uIEVjKGEpe3RoaXMuaT1hLlNifHxudWxsO3RoaXMuaD1hLmFifHwhMTt9dChFYyxlYik7RWMucHJvdG90eXBlLmc9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEZjKHRoaXMuaSx0aGlzLmgpfTtmdW5jdGlvbiBGYyhhLGIpe0MuY2FsbCh0aGlzKTt0aGlzLkg9YTt0aGlzLm89Yjt0aGlzLm09dm9pZCAwO3RoaXMuc3RhdHVzPXRoaXMucmVhZHlTdGF0ZT0wO3RoaXMucmVzcG9uc2VUeXBlPXRoaXMucmVzcG9uc2VUZXh0PXRoaXMucmVzcG9uc2U9dGhpcy5zdGF0dXNUZXh0PVwiXCI7dGhpcy5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbDt0aGlzLkE9bmV3IEhlYWRlcnM7dGhpcy5oPW51bGw7dGhpcy5GPVwiR0VUXCI7dGhpcy5EPVwiXCI7dGhpcy5nPSExO3RoaXMuQj10aGlzLmo9dGhpcy5sPW51bGw7dGhpcy52PW5ldyBBYm9ydENvbnRyb2xsZXI7fXQoRmMsQyk7aD1GYy5wcm90b3R5cGU7XG5oLm9wZW49ZnVuY3Rpb24oYSxiKXtpZih0aGlzLnJlYWR5U3RhdGUhPTApdGhyb3cgdGhpcy5hYm9ydCgpLEVycm9yKFwiRXJyb3IgcmVvcGVuaW5nIGEgY29ubmVjdGlvblwiKTt0aGlzLkY9YTt0aGlzLkQ9Yjt0aGlzLnJlYWR5U3RhdGU9MTtHYyh0aGlzKTt9O2guc2VuZD1mdW5jdGlvbihhKXtpZih0aGlzLnJlYWR5U3RhdGUhPTEpdGhyb3cgdGhpcy5hYm9ydCgpLEVycm9yKFwibmVlZCB0byBjYWxsIG9wZW4oKSBmaXJzdC4gXCIpO2lmKHRoaXMudi5zaWduYWwuYWJvcnRlZCl0aHJvdyB0aGlzLmFib3J0KCksRXJyb3IoXCJSZXF1ZXN0IHdhcyBhYm9ydGVkLlwiKTt0aGlzLmc9ITA7Y29uc3QgYj17aGVhZGVyczp0aGlzLkEsbWV0aG9kOnRoaXMuRixjcmVkZW50aWFsczp0aGlzLm0sY2FjaGU6dm9pZCAwLHNpZ25hbDp0aGlzLnYuc2lnbmFsfTthJiYoYi5ib2R5PWEpOyh0aGlzLkh8fGwpLmZldGNoKG5ldyBSZXF1ZXN0KHRoaXMuRCxiKSkudGhlbih0aGlzLlBhLmJpbmQodGhpcyksdGhpcy5nYS5iaW5kKHRoaXMpKTt9O1xuaC5hYm9ydD1mdW5jdGlvbigpe3RoaXMucmVzcG9uc2U9dGhpcy5yZXNwb25zZVRleHQ9XCJcIjt0aGlzLkE9bmV3IEhlYWRlcnM7dGhpcy5zdGF0dXM9MDt0aGlzLnYuYWJvcnQoKTt0aGlzLmomJnRoaXMuai5jYW5jZWwoXCJSZXF1ZXN0IHdhcyBhYm9ydGVkLlwiKS5jYXRjaCgoKT0+e30pO3RoaXMucmVhZHlTdGF0ZT49MSYmdGhpcy5nJiZ0aGlzLnJlYWR5U3RhdGUhPTQmJih0aGlzLmc9ITEsSGModGhpcykpO3RoaXMucmVhZHlTdGF0ZT0wO307XG5oLlBhPWZ1bmN0aW9uKGEpe2lmKHRoaXMuZyYmKHRoaXMubD1hLHRoaXMuaHx8KHRoaXMuc3RhdHVzPXRoaXMubC5zdGF0dXMsdGhpcy5zdGF0dXNUZXh0PXRoaXMubC5zdGF0dXNUZXh0LHRoaXMuaD1hLmhlYWRlcnMsdGhpcy5yZWFkeVN0YXRlPTIsR2ModGhpcykpLHRoaXMuZyYmKHRoaXMucmVhZHlTdGF0ZT0zLEdjKHRoaXMpLHRoaXMuZykpKWlmKHRoaXMucmVzcG9uc2VUeXBlPT09XCJhcnJheWJ1ZmZlclwiKWEuYXJyYXlCdWZmZXIoKS50aGVuKHRoaXMuTmEuYmluZCh0aGlzKSx0aGlzLmdhLmJpbmQodGhpcykpO2Vsc2UgaWYodHlwZW9mIGwuUmVhZGFibGVTdHJlYW0hPT1cInVuZGVmaW5lZFwiJiZcImJvZHlcImluIGEpe3RoaXMuaj1hLmJvZHkuZ2V0UmVhZGVyKCk7aWYodGhpcy5vKXtpZih0aGlzLnJlc3BvbnNlVHlwZSl0aHJvdyBFcnJvcigncmVzcG9uc2VUeXBlIG11c3QgYmUgZW1wdHkgZm9yIFwic3RyZWFtQmluYXJ5Q2h1bmtzXCIgbW9kZSByZXNwb25zZXMuJyk7dGhpcy5yZXNwb25zZT1cbltdO31lbHNlIHRoaXMucmVzcG9uc2U9dGhpcy5yZXNwb25zZVRleHQ9XCJcIix0aGlzLkI9bmV3IFRleHREZWNvZGVyO0ljKHRoaXMpO31lbHNlIGEudGV4dCgpLnRoZW4odGhpcy5PYS5iaW5kKHRoaXMpLHRoaXMuZ2EuYmluZCh0aGlzKSk7fTtmdW5jdGlvbiBJYyhhKXthLmoucmVhZCgpLnRoZW4oYS5NYS5iaW5kKGEpKS5jYXRjaChhLmdhLmJpbmQoYSkpO31oLk1hPWZ1bmN0aW9uKGEpe2lmKHRoaXMuZyl7aWYodGhpcy5vJiZhLnZhbHVlKXRoaXMucmVzcG9uc2UucHVzaChhLnZhbHVlKTtlbHNlIGlmKCF0aGlzLm8pe3ZhciBiPWEudmFsdWU/YS52YWx1ZTpuZXcgVWludDhBcnJheSgwKTtpZihiPXRoaXMuQi5kZWNvZGUoYix7c3RyZWFtOiFhLmRvbmV9KSl0aGlzLnJlc3BvbnNlPXRoaXMucmVzcG9uc2VUZXh0Kz1iO31hLmRvbmU/SGModGhpcyk6R2ModGhpcyk7dGhpcy5yZWFkeVN0YXRlPT0zJiZJYyh0aGlzKTt9fTtcbmguT2E9ZnVuY3Rpb24oYSl7dGhpcy5nJiYodGhpcy5yZXNwb25zZT10aGlzLnJlc3BvbnNlVGV4dD1hLEhjKHRoaXMpKTt9O2guTmE9ZnVuY3Rpb24oYSl7dGhpcy5nJiYodGhpcy5yZXNwb25zZT1hLEhjKHRoaXMpKTt9O2guZ2E9ZnVuY3Rpb24oKXt0aGlzLmcmJkhjKHRoaXMpO307ZnVuY3Rpb24gSGMoYSl7YS5yZWFkeVN0YXRlPTQ7YS5sPW51bGw7YS5qPW51bGw7YS5CPW51bGw7R2MoYSk7fWguc2V0UmVxdWVzdEhlYWRlcj1mdW5jdGlvbihhLGIpe3RoaXMuQS5hcHBlbmQoYSxiKTt9O2guZ2V0UmVzcG9uc2VIZWFkZXI9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaD90aGlzLmguZ2V0KGEudG9Mb3dlckNhc2UoKSl8fFwiXCI6XCJcIn07XG5oLmdldEFsbFJlc3BvbnNlSGVhZGVycz1mdW5jdGlvbigpe2lmKCF0aGlzLmgpcmV0dXJuIFwiXCI7Y29uc3QgYT1bXSxiPXRoaXMuaC5lbnRyaWVzKCk7Zm9yKHZhciBjPWIubmV4dCgpOyFjLmRvbmU7KWM9Yy52YWx1ZSxhLnB1c2goY1swXStcIjogXCIrY1sxXSksYz1iLm5leHQoKTtyZXR1cm4gYS5qb2luKFwiXFxyXFxuXCIpfTtmdW5jdGlvbiBHYyhhKXthLm9ucmVhZHlzdGF0ZWNoYW5nZSYmYS5vbnJlYWR5c3RhdGVjaGFuZ2UuY2FsbChhKTt9T2JqZWN0LmRlZmluZVByb3BlcnR5KEZjLnByb3RvdHlwZSxcIndpdGhDcmVkZW50aWFsc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tPT09XCJpbmNsdWRlXCJ9LHNldDpmdW5jdGlvbihhKXt0aGlzLm09YT9cImluY2x1ZGVcIjpcInNhbWUtb3JpZ2luXCI7fX0pO2Z1bmN0aW9uIEpjKGEpe2xldCBiPVwiXCI7eWEoYSxmdW5jdGlvbihjLGQpe2IrPWQ7Yis9XCI6XCI7Yis9YztiKz1cIlxcclxcblwiO30pO3JldHVybiBifWZ1bmN0aW9uIEtjKGEsYixjKXthOntmb3IoZCBpbiBjKXt2YXIgZD0hMTticmVhayBhfWQ9ITA7fWR8fChjPUpjKGMpLHR5cGVvZiBhPT09XCJzdHJpbmdcIj8oYyE9bnVsbCYmTChjKSk6UyhhLGIsYykpO31mdW5jdGlvbiBYKGEpe0MuY2FsbCh0aGlzKTt0aGlzLmhlYWRlcnM9bmV3IE1hcDt0aGlzLkw9YXx8bnVsbDt0aGlzLmg9ITE7dGhpcy5nPW51bGw7dGhpcy5EPVwiXCI7dGhpcy5vPTA7dGhpcy5sPVwiXCI7dGhpcy5qPXRoaXMuQj10aGlzLnY9dGhpcy5BPSExO3RoaXMubT1udWxsO3RoaXMuRj1cIlwiO3RoaXMuSD0hMTt9dChYLEMpO3ZhciBMYz0vXmh0dHBzPyQvaSxNYz1bXCJQT1NUXCIsXCJQVVRcIl07aD1YLnByb3RvdHlwZTtoLkZhPWZ1bmN0aW9uKGEpe3RoaXMuSD1hO307XG5oLmVhPWZ1bmN0aW9uKGEsYixjLGQpe2lmKHRoaXMuZyl0aHJvdyBFcnJvcihcIltnb29nLm5ldC5YaHJJb10gT2JqZWN0IGlzIGFjdGl2ZSB3aXRoIGFub3RoZXIgcmVxdWVzdD1cIit0aGlzLkQrXCI7IG5ld1VyaT1cIithKTtiPWI/Yi50b1VwcGVyQ2FzZSgpOlwiR0VUXCI7dGhpcy5EPWE7dGhpcy5sPVwiXCI7dGhpcy5vPTA7dGhpcy5BPSExO3RoaXMuaD0hMDt0aGlzLmc9dGhpcy5MP3RoaXMuTC5nKCk6d2IuZygpO3RoaXMuZy5vbnJlYWR5c3RhdGVjaGFuZ2U9aWEocCh0aGlzLkNhLHRoaXMpKTt0cnl7dGhpcy5CPSEwLHRoaXMuZy5vcGVuKGIsU3RyaW5nKGEpLCEwKSx0aGlzLkI9ITE7fWNhdGNoKGYpe05jKHRoaXMsZik7cmV0dXJufWE9Y3x8XCJcIjtjPW5ldyBNYXAodGhpcy5oZWFkZXJzKTtpZihkKWlmKE9iamVjdC5nZXRQcm90b3R5cGVPZihkKT09PU9iamVjdC5wcm90b3R5cGUpZm9yKHZhciBlIGluIGQpYy5zZXQoZSxkW2VdKTtlbHNlIGlmKHR5cGVvZiBkLmtleXM9PT1cImZ1bmN0aW9uXCImJlxudHlwZW9mIGQuZ2V0PT09XCJmdW5jdGlvblwiKWZvcihjb25zdCBmIG9mIGQua2V5cygpKWMuc2V0KGYsZC5nZXQoZikpO2Vsc2UgdGhyb3cgRXJyb3IoXCJVbmtub3duIGlucHV0IHR5cGUgZm9yIG9wdF9oZWFkZXJzOiBcIitTdHJpbmcoZCkpO2Q9QXJyYXkuZnJvbShjLmtleXMoKSkuZmluZChmPT5cImNvbnRlbnQtdHlwZVwiPT1mLnRvTG93ZXJDYXNlKCkpO2U9bC5Gb3JtRGF0YSYmYSBpbnN0YW5jZW9mIGwuRm9ybURhdGE7IShBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKE1jLGIsdm9pZCAwKT49MCl8fGR8fGV8fGMuc2V0KFwiQ29udGVudC1UeXBlXCIsXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7Y2hhcnNldD11dGYtOFwiKTtmb3IoY29uc3QgW2YsZ11vZiBjKXRoaXMuZy5zZXRSZXF1ZXN0SGVhZGVyKGYsZyk7dGhpcy5GJiYodGhpcy5nLnJlc3BvbnNlVHlwZT10aGlzLkYpO1wid2l0aENyZWRlbnRpYWxzXCJpbiB0aGlzLmcmJnRoaXMuZy53aXRoQ3JlZGVudGlhbHMhPT1cbnRoaXMuSCYmKHRoaXMuZy53aXRoQ3JlZGVudGlhbHM9dGhpcy5IKTt0cnl7dGhpcy5tJiYoY2xlYXJUaW1lb3V0KHRoaXMubSksdGhpcy5tPW51bGwpLHRoaXMudj0hMCx0aGlzLmcuc2VuZChhKSx0aGlzLnY9ITE7fWNhdGNoKGYpe05jKHRoaXMsZik7fX07ZnVuY3Rpb24gTmMoYSxiKXthLmg9ITE7YS5nJiYoYS5qPSEwLGEuZy5hYm9ydCgpLGEuaj0hMSk7YS5sPWI7YS5vPTU7T2MoYSk7UGMoYSk7fWZ1bmN0aW9uIE9jKGEpe2EuQXx8KGEuQT0hMCxEKGEsXCJjb21wbGV0ZVwiKSxEKGEsXCJlcnJvclwiKSk7fWguYWJvcnQ9ZnVuY3Rpb24oYSl7dGhpcy5nJiZ0aGlzLmgmJih0aGlzLmg9ITEsdGhpcy5qPSEwLHRoaXMuZy5hYm9ydCgpLHRoaXMuaj0hMSx0aGlzLm89YXx8NyxEKHRoaXMsXCJjb21wbGV0ZVwiKSxEKHRoaXMsXCJhYm9ydFwiKSxQYyh0aGlzKSk7fTtcbmguTj1mdW5jdGlvbigpe3RoaXMuZyYmKHRoaXMuaCYmKHRoaXMuaD0hMSx0aGlzLmo9ITAsdGhpcy5nLmFib3J0KCksdGhpcy5qPSExKSxQYyh0aGlzLCEwKSk7WC5aLk4uY2FsbCh0aGlzKTt9O2guQ2E9ZnVuY3Rpb24oKXt0aGlzLnV8fCh0aGlzLkJ8fHRoaXMudnx8dGhpcy5qP1FjKHRoaXMpOnRoaXMuWGEoKSk7fTtoLlhhPWZ1bmN0aW9uKCl7UWModGhpcyk7fTtcbmZ1bmN0aW9uIFFjKGEpe2lmKGEuaCYmdHlwZW9mIGVhIT1cInVuZGVmaW5lZFwiKWlmKGEudiYmUChhKT09NClzZXRUaW1lb3V0KGEuQ2EuYmluZChhKSwwKTtlbHNlIGlmKEQoYSxcInJlYWR5c3RhdGVjaGFuZ2VcIiksUChhKT09NCl7YS5oPSExO3RyeXtjb25zdCBmPWEuY2EoKTthOnN3aXRjaChmKXtjYXNlIDIwMDpjYXNlIDIwMTpjYXNlIDIwMjpjYXNlIDIwNDpjYXNlIDIwNjpjYXNlIDMwNDpjYXNlIDEyMjM6dmFyIGI9ITA7YnJlYWsgYTtkZWZhdWx0OmI9ITE7fXZhciBjO2lmKCEoYz1iKSl7dmFyIGQ7aWYoZD1mPT09MCl7bGV0IGc9U3RyaW5nKGEuRCkubWF0Y2goaWMpWzFdfHxudWxsOyFnJiZsLnNlbGYmJmwuc2VsZi5sb2NhdGlvbiYmKGc9bC5zZWxmLmxvY2F0aW9uLnByb3RvY29sLnNsaWNlKDAsLTEpKTtkPSFMYy50ZXN0KGc/Zy50b0xvd2VyQ2FzZSgpOlwiXCIpO31jPWQ7fWlmKGMpRChhLFwiY29tcGxldGVcIiksRChhLFwic3VjY2Vzc1wiKTtlbHNlIHthLm89Njt0cnl7dmFyIGU9UChhKT5cbjI/YS5nLnN0YXR1c1RleHQ6XCJcIjt9Y2F0Y2goZyl7ZT1cIlwiO31hLmw9ZStcIiBbXCIrYS5jYSgpK1wiXVwiO09jKGEpO319ZmluYWxseXtQYyhhKTt9fX1mdW5jdGlvbiBQYyhhLGIpe2lmKGEuZyl7YS5tJiYoY2xlYXJUaW1lb3V0KGEubSksYS5tPW51bGwpO2NvbnN0IGM9YS5nO2EuZz1udWxsO2J8fEQoYSxcInJlYWR5XCIpO3RyeXtjLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsO31jYXRjaChkKXt9fX1oLmlzQWN0aXZlPWZ1bmN0aW9uKCl7cmV0dXJuICEhdGhpcy5nfTtmdW5jdGlvbiBQKGEpe3JldHVybiBhLmc/YS5nLnJlYWR5U3RhdGU6MH1oLmNhPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiBQKHRoaXMpPjI/dGhpcy5nLnN0YXR1czotMX1jYXRjaChhKXtyZXR1cm4gLTF9fTtoLmxhPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiB0aGlzLmc/dGhpcy5nLnJlc3BvbnNlVGV4dDpcIlwifWNhdGNoKGEpe3JldHVybiBcIlwifX07XG5oLkxhPWZ1bmN0aW9uKGEpe2lmKHRoaXMuZyl7dmFyIGI9dGhpcy5nLnJlc3BvbnNlVGV4dDthJiZiLmluZGV4T2YoYSk9PTAmJihiPWIuc3Vic3RyaW5nKGEubGVuZ3RoKSk7cmV0dXJuIGNiKGIpfX07ZnVuY3Rpb24gSWIoYSl7dHJ5e2lmKCFhLmcpcmV0dXJuIG51bGw7aWYoXCJyZXNwb25zZVwiaW4gYS5nKXJldHVybiBhLmcucmVzcG9uc2U7c3dpdGNoKGEuRil7Y2FzZSBcIlwiOmNhc2UgXCJ0ZXh0XCI6cmV0dXJuIGEuZy5yZXNwb25zZVRleHQ7Y2FzZSBcImFycmF5YnVmZmVyXCI6aWYoXCJtb3pSZXNwb25zZUFycmF5QnVmZmVyXCJpbiBhLmcpcmV0dXJuIGEuZy5tb3pSZXNwb25zZUFycmF5QnVmZmVyfXJldHVybiBudWxsfWNhdGNoKGIpe3JldHVybiBudWxsfX1cbmZ1bmN0aW9uIFJiKGEpe2NvbnN0IGI9e307YT0oYS5nJiZQKGEpPj0yP2EuZy5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKXx8XCJcIjpcIlwiKS5zcGxpdChcIlxcclxcblwiKTtmb3IobGV0IGQ9MDtkPGEubGVuZ3RoO2QrKyl7aWYoeShhW2RdKSljb250aW51ZTt2YXIgYz15YihhW2RdKTtjb25zdCBlPWNbMF07Yz1jWzFdO2lmKHR5cGVvZiBjIT09XCJzdHJpbmdcIiljb250aW51ZTtjPWMudHJpbSgpO2NvbnN0IGY9YltlXXx8W107YltlXT1mO2YucHVzaChjKTt9QWEoYixmdW5jdGlvbihkKXtyZXR1cm4gZC5qb2luKFwiLCBcIil9KTt9aC55YT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm99O2guSGE9ZnVuY3Rpb24oKXtyZXR1cm4gdHlwZW9mIHRoaXMubD09PVwic3RyaW5nXCI/dGhpcy5sOlN0cmluZyh0aGlzLmwpfTtmdW5jdGlvbiBSYyhhLGIsYyl7cmV0dXJuIGMmJmMuaW50ZXJuYWxDaGFubmVsUGFyYW1zP2MuaW50ZXJuYWxDaGFubmVsUGFyYW1zW2FdfHxiOmJ9XG5mdW5jdGlvbiBTYyhhKXt0aGlzLnphPTA7dGhpcy5pPVtdO3RoaXMuaj1uZXcgcGI7dGhpcy5iYT10aGlzLm5hPXRoaXMuSj10aGlzLlc9dGhpcy5nPXRoaXMud2E9dGhpcy5HPXRoaXMuSD10aGlzLnU9dGhpcy5VPXRoaXMubz1udWxsO3RoaXMuWWE9dGhpcy5WPTA7dGhpcy5TYT1SYyhcImZhaWxGYXN0XCIsITEsYSk7dGhpcy5GPXRoaXMuQz10aGlzLnY9dGhpcy5tPXRoaXMubD1udWxsO3RoaXMuWD0hMDt0aGlzLnhhPXRoaXMuSz0tMTt0aGlzLlk9dGhpcy5BPXRoaXMuRD0wO3RoaXMuUWE9UmMoXCJiYXNlUmV0cnlEZWxheU1zXCIsNUUzLGEpO3RoaXMuWmE9UmMoXCJyZXRyeURlbGF5U2VlZE1zXCIsMUU0LGEpO3RoaXMuVGE9UmMoXCJmb3J3YXJkQ2hhbm5lbE1heFJldHJpZXNcIiwyLGEpO3RoaXMudmE9UmMoXCJmb3J3YXJkQ2hhbm5lbFJlcXVlc3RUaW1lb3V0TXNcIiwyRTQsYSk7dGhpcy5tYT1hJiZhLnhtbEh0dHBGYWN0b3J5fHx2b2lkIDA7dGhpcy5VYT1hJiZhLlJifHx2b2lkIDA7dGhpcy5BYT1cbmEmJmEudXNlRmV0Y2hTdHJlYW1zfHwhMTt0aGlzLk89dm9pZCAwO3RoaXMuTD1hJiZhLnN1cHBvcnRzQ3Jvc3NEb21haW5YaHJ8fCExO3RoaXMuTT1cIlwiO3RoaXMuaD1uZXcgZWMoYSYmYS5jb25jdXJyZW50UmVxdWVzdExpbWl0KTt0aGlzLkJhPW5ldyBEYzt0aGlzLlM9YSYmYS5mYXN0SGFuZHNoYWtlfHwhMTt0aGlzLlI9YSYmYS5lbmNvZGVJbml0TWVzc2FnZUhlYWRlcnN8fCExO3RoaXMuUyYmdGhpcy5SJiYodGhpcy5SPSExKTt0aGlzLlJhPWEmJmEuUGJ8fCExO2EmJmEudWEmJnRoaXMuai51YSgpO2EmJmEuZm9yY2VMb25nUG9sbGluZyYmKHRoaXMuWD0hMSk7dGhpcy5hYT0hdGhpcy5TJiZ0aGlzLlgmJmEmJmEuZGV0ZWN0QnVmZmVyaW5nUHJveHl8fCExO3RoaXMuaWE9dm9pZCAwO2EmJmEubG9uZ1BvbGxpbmdUaW1lb3V0JiZhLmxvbmdQb2xsaW5nVGltZW91dD4wJiYodGhpcy5pYT1hLmxvbmdQb2xsaW5nVGltZW91dCk7dGhpcy50YT12b2lkIDA7dGhpcy5UPTA7dGhpcy5QPVxuITE7dGhpcy5qYT10aGlzLkI9bnVsbDt9aD1TYy5wcm90b3R5cGU7aC5rYT04O2guST0xO2guY29ubmVjdD1mdW5jdGlvbihhLGIsYyxkKXtKKDApO3RoaXMuVz1hO3RoaXMuSD1ifHx7fTtjJiZkIT09dm9pZCAwJiYodGhpcy5ILk9TSUQ9Yyx0aGlzLkguT0FJRD1kKTt0aGlzLkY9dGhpcy5YO3RoaXMuSj1aYih0aGlzLG51bGwsdGhpcy5XKTtiYyh0aGlzKTt9O1xuZnVuY3Rpb24gY2MoYSl7VGMoYSk7aWYoYS5JPT0zKXt2YXIgYj1hLlYrKyxjPU8oYS5KKTtTKGMsXCJTSURcIixhLk0pO1MoYyxcIlJJRFwiLGIpO1MoYyxcIlRZUEVcIixcInRlcm1pbmF0ZVwiKTtVYyhhLGMpO2I9bmV3IE4oYSxhLmosYik7Yi5NPTI7Yi5BPURiKE8oYykpO2M9ITE7aWYobC5uYXZpZ2F0b3ImJmwubmF2aWdhdG9yLnNlbmRCZWFjb24pdHJ5e2M9bC5uYXZpZ2F0b3Iuc2VuZEJlYWNvbihiLkEudG9TdHJpbmcoKSxcIlwiKTt9Y2F0Y2goZCl7fSFjJiZsLkltYWdlJiYoKG5ldyBJbWFnZSkuc3JjPWIuQSxjPSEwKTtjfHwoYi5nPUhiKGIuaixudWxsKSxiLmcuZWEoYi5BKSk7Yi5GPURhdGUubm93KCk7RmIoYik7fVZjKGEpO31mdW5jdGlvbiBWYihhKXthLmcmJihQYihhKSxhLmcuY2FuY2VsKCksYS5nPW51bGwpO31cbmZ1bmN0aW9uIFRjKGEpe1ZiKGEpO2EudiYmKGwuY2xlYXJUaW1lb3V0KGEudiksYS52PW51bGwpO1ViKGEpO2EuaC5jYW5jZWwoKTthLm0mJih0eXBlb2YgYS5tPT09XCJudW1iZXJcIiYmbC5jbGVhclRpbWVvdXQoYS5tKSxhLm09bnVsbCk7fWZ1bmN0aW9uIGJjKGEpe2lmKCFmYyhhLmgpJiYhYS5tKXthLm09ITA7dmFyIGI9YS5FYTt1fHx0YSgpO3Z8fCh1KCksdj0hMCk7b2EuYWRkKGIsYSk7YS5EPTA7fX1mdW5jdGlvbiBXYyhhLGIpe2lmKFhiKGEuaCk+PWEuaC5qLShhLm0/MTowKSlyZXR1cm4gITE7aWYoYS5tKXJldHVybiBhLmk9Yi5HLmNvbmNhdChhLmkpLCEwO2lmKGEuST09MXx8YS5JPT0yfHxhLkQ+PShhLlNhPzA6YS5UYSkpcmV0dXJuICExO2EubT1vYihwKGEuRWEsYSxiKSxYYyhhLGEuRCkpO2EuRCsrO3JldHVybiAhMH1cbmguRWE9ZnVuY3Rpb24oYSl7aWYodGhpcy5tKWlmKHRoaXMubT1udWxsLHRoaXMuST09MSl7aWYoIWEpe3RoaXMuVj1NYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMUU1KTthPXRoaXMuVisrO2NvbnN0IGU9bmV3IE4odGhpcyx0aGlzLmosYSk7bGV0IGY9dGhpcy5vO3RoaXMuVSYmKGY/KGY9QmEoZiksRGEoZix0aGlzLlUpKTpmPXRoaXMuVSk7dGhpcy51IT09bnVsbHx8dGhpcy5SfHwoZS5KPWYsZj1udWxsKTtpZih0aGlzLlMpYTp7dmFyIGI9MDtmb3IodmFyIGM9MDtjPHRoaXMuaS5sZW5ndGg7YysrKXtiOnt2YXIgZD10aGlzLmlbY107aWYoXCJfX2RhdGFfX1wiaW4gZC5tYXAmJihkPWQubWFwLl9fZGF0YV9fLHR5cGVvZiBkPT09XCJzdHJpbmdcIikpe2Q9ZC5sZW5ndGg7YnJlYWsgYn1kPXZvaWQgMDt9aWYoZD09PXZvaWQgMClicmVhaztiKz1kO2lmKGI+NDA5Nil7Yj1jO2JyZWFrIGF9aWYoYj09PTQwOTZ8fGM9PT10aGlzLmkubGVuZ3RoLTEpe2I9YysxO2JyZWFrIGF9fWI9MUUzO31lbHNlIGI9XG4xRTM7Yj1ZYyh0aGlzLGUsYik7Yz1PKHRoaXMuSik7UyhjLFwiUklEXCIsYSk7UyhjLFwiQ1ZFUlwiLDIyKTt0aGlzLkcmJlMoYyxcIlgtSFRUUC1TZXNzaW9uLUlkXCIsdGhpcy5HKTtVYyh0aGlzLGMpO2YmJih0aGlzLlI/Yj1cImhlYWRlcnM9XCIrTChKYyhmKSkrXCImXCIrYjp0aGlzLnUmJktjKGMsdGhpcy51LGYpKTtZYih0aGlzLmgsZSk7dGhpcy5SYSYmUyhjLFwiVFlQRVwiLFwiaW5pdFwiKTt0aGlzLlM/KFMoYyxcIiRyZXFcIixiKSxTKGMsXCJTSURcIixcIm51bGxcIiksZS5VPSEwLENiKGUsYyxudWxsKSk6Q2IoZSxjLGIpO3RoaXMuST0yO319ZWxzZSB0aGlzLkk9PTMmJihhP1pjKHRoaXMsYSk6dGhpcy5pLmxlbmd0aD09MHx8ZmModGhpcy5oKXx8WmModGhpcykpO307XG5mdW5jdGlvbiBaYyhhLGIpe3ZhciBjO2I/Yz1iLmw6Yz1hLlYrKztjb25zdCBkPU8oYS5KKTtTKGQsXCJTSURcIixhLk0pO1MoZCxcIlJJRFwiLGMpO1MoZCxcIkFJRFwiLGEuSyk7VWMoYSxkKTthLnUmJmEubyYmS2MoZCxhLnUsYS5vKTtjPW5ldyBOKGEsYS5qLGMsYS5EKzEpO2EudT09PW51bGwmJihjLko9YS5vKTtiJiYoYS5pPWIuRy5jb25jYXQoYS5pKSk7Yj1ZYyhhLGMsMUUzKTtjLkg9TWF0aC5yb3VuZChhLnZhKi41KStNYXRoLnJvdW5kKGEudmEqLjUqTWF0aC5yYW5kb20oKSk7WWIoYS5oLGMpO0NiKGMsZCxiKTt9ZnVuY3Rpb24gVWMoYSxiKXthLkgmJnlhKGEuSCxmdW5jdGlvbihjLGQpe1MoYixkLGMpO30pO2EubCYmeWEoe30sZnVuY3Rpb24oYyxkKXtTKGIsZCxjKTt9KTt9XG5mdW5jdGlvbiBZYyhhLGIsYyl7Yz1NYXRoLm1pbihhLmkubGVuZ3RoLGMpO2NvbnN0IGQ9YS5sP3AoYS5sLkthLGEubCxhKTpudWxsO2E6e3ZhciBlPWEuaTtsZXQgaz0tMTtmb3IoOzspe2NvbnN0IHE9W1wiY291bnQ9XCIrY107az09LTE/Yz4wPyhrPWVbMF0uZyxxLnB1c2goXCJvZnM9XCIraykpOms9MDpxLnB1c2goXCJvZnM9XCIrayk7bGV0IG09ITA7Zm9yKGxldCByPTA7cjxjO3IrKyl7dmFyIGY9ZVtyXS5nO2NvbnN0IEE9ZVtyXS5tYXA7Zi09aztpZihmPDApaz1NYXRoLm1heCgwLGVbcl0uZy0xMDApLG09ITE7ZWxzZSB0cnl7Zj1cInJlcVwiK2YrXCJfXCJ8fFwiXCI7dHJ5e3ZhciBnPUEgaW5zdGFuY2VvZiBNYXA/QTpPYmplY3QuZW50cmllcyhBKTtmb3IoY29uc3QgW00sRl1vZiBnKXtsZXQgRz1GO24oRikmJihHPWFiKEYpKTtxLnB1c2goZitNK1wiPVwiK2VuY29kZVVSSUNvbXBvbmVudChHKSk7fX1jYXRjaChNKXt0aHJvdyBxLnB1c2goZitcInR5cGU9XCIrZW5jb2RlVVJJQ29tcG9uZW50KFwiX2JhZG1hcFwiKSksXG5NO319Y2F0Y2goTSl7ZCYmZChBKTt9fWlmKG0pe2c9cS5qb2luKFwiJlwiKTticmVhayBhfX1nPXZvaWQgMDt9YT1hLmkuc3BsaWNlKDAsYyk7Yi5HPWE7cmV0dXJuIGd9ZnVuY3Rpb24gYWMoYSl7aWYoIWEuZyYmIWEudil7YS5ZPTE7dmFyIGI9YS5EYTt1fHx0YSgpO3Z8fCh1KCksdj0hMCk7b2EuYWRkKGIsYSk7YS5BPTA7fX1mdW5jdGlvbiBXYihhKXtpZihhLmd8fGEudnx8YS5BPj0zKXJldHVybiAhMTthLlkrKzthLnY9b2IocChhLkRhLGEpLFhjKGEsYS5BKSk7YS5BKys7cmV0dXJuICEwfWguRGE9ZnVuY3Rpb24oKXt0aGlzLnY9bnVsbDskYyh0aGlzKTtpZih0aGlzLmFhJiYhKHRoaXMuUHx8dGhpcy5nPT1udWxsfHx0aGlzLlQ8PTApKXt2YXIgYT00KnRoaXMuVDt0aGlzLmouaW5mbyhcIkJQIGRldGVjdGlvbiB0aW1lciBlbmFibGVkOiBcIithKTt0aGlzLkI9b2IocCh0aGlzLldhLHRoaXMpLGEpO319O1xuaC5XYT1mdW5jdGlvbigpe3RoaXMuQiYmKHRoaXMuQj1udWxsLHRoaXMuai5pbmZvKFwiQlAgZGV0ZWN0aW9uIHRpbWVvdXQgcmVhY2hlZC5cIiksdGhpcy5qLmluZm8oXCJCdWZmZXJpbmcgcHJveHkgZGV0ZWN0ZWQgYW5kIHN3aXRjaCB0byBsb25nLXBvbGxpbmchXCIpLHRoaXMuRj0hMSx0aGlzLlA9ITAsSigxMCksVmIodGhpcyksJGModGhpcykpO307ZnVuY3Rpb24gUGIoYSl7YS5CIT1udWxsJiYobC5jbGVhclRpbWVvdXQoYS5CKSxhLkI9bnVsbCk7fVxuZnVuY3Rpb24gJGMoYSl7YS5nPW5ldyBOKGEsYS5qLFwicnBjXCIsYS5ZKTthLnU9PT1udWxsJiYoYS5nLko9YS5vKTthLmcuUD0wO3ZhciBiPU8oYS5uYSk7UyhiLFwiUklEXCIsXCJycGNcIik7UyhiLFwiU0lEXCIsYS5NKTtTKGIsXCJBSURcIixhLkspO1MoYixcIkNJXCIsYS5GP1wiMFwiOlwiMVwiKTshYS5GJiZhLmlhJiZTKGIsXCJUT1wiLGEuaWEpO1MoYixcIlRZUEVcIixcInhtbGh0dHBcIik7VWMoYSxiKTthLnUmJmEubyYmS2MoYixhLnUsYS5vKTthLk8mJihhLmcuSD1hLk8pO3ZhciBjPWEuZzthPWEuYmE7Yy5NPTE7Yy5BPURiKE8oYikpO2MudT1udWxsO2MuUj0hMDtFYihjLGEpO31oLlZhPWZ1bmN0aW9uKCl7dGhpcy5DIT1udWxsJiYodGhpcy5DPW51bGwsVmIodGhpcyksV2IodGhpcyksSigxOSkpO307ZnVuY3Rpb24gVWIoYSl7YS5DIT1udWxsJiYobC5jbGVhclRpbWVvdXQoYS5DKSxhLkM9bnVsbCk7fVxuZnVuY3Rpb24gUWIoYSxiKXt2YXIgYz1udWxsO2lmKGEuZz09Yil7VWIoYSk7UGIoYSk7YS5nPW51bGw7dmFyIGQ9Mjt9ZWxzZSBpZihUYihhLmgsYikpYz1iLkcsJGIoYS5oLGIpLGQ9MTtlbHNlIHJldHVybjtpZihhLkkhPTApaWYoYi5vKWlmKGQ9PTEpe2M9Yi51P2IudS5sZW5ndGg6MDtiPURhdGUubm93KCktYi5GO3ZhciBlPWEuRDtkPWpiKCk7RChkLG5ldyBuYihkLGMpKTtiYyhhKTt9ZWxzZSBhYyhhKTtlbHNlIGlmKGU9Yi5tLGU9PTN8fGU9PTAmJmIuWD4wfHwhKGQ9PTEmJldjKGEsYil8fGQ9PTImJldiKGEpKSlzd2l0Y2goYyYmYy5sZW5ndGg+MCYmKGI9YS5oLGIuaT1iLmkuY29uY2F0KGMpKSxlKXtjYXNlIDE6UihhLDUpO2JyZWFrO2Nhc2UgNDpSKGEsMTApO2JyZWFrO2Nhc2UgMzpSKGEsNik7YnJlYWs7ZGVmYXVsdDpSKGEsMik7fX1cbmZ1bmN0aW9uIFhjKGEsYil7bGV0IGM9YS5RYStNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqYS5aYSk7YS5pc0FjdGl2ZSgpfHwoYyo9Mik7cmV0dXJuIGMqYn1mdW5jdGlvbiBSKGEsYil7YS5qLmluZm8oXCJFcnJvciBjb2RlIFwiK2IpO2lmKGI9PTIpe3ZhciBjPXAoYS5iYixhKSxkPWEuVWE7Y29uc3QgZT0hZDtkPW5ldyBUKGR8fFwiLy93d3cuZ29vZ2xlLmNvbS9pbWFnZXMvY2xlYXJkb3QuZ2lmXCIpO2wubG9jYXRpb24mJmwubG9jYXRpb24ucHJvdG9jb2w9PVwiaHR0cFwifHxrYyhkLFwiaHR0cHNcIik7RGIoZCk7ZT9CYyhkLnRvU3RyaW5nKCksYyk6Q2MoZC50b1N0cmluZygpLGMpO31lbHNlIEooMik7YS5JPTA7YS5sJiZhLmwucGEoYik7VmMoYSk7VGMoYSk7fWguYmI9ZnVuY3Rpb24oYSl7YT8odGhpcy5qLmluZm8oXCJTdWNjZXNzZnVsbHkgcGluZ2VkIGdvb2dsZS5jb21cIiksSigyKSk6KHRoaXMuai5pbmZvKFwiRmFpbGVkIHRvIHBpbmcgZ29vZ2xlLmNvbVwiKSxKKDEpKTt9O1xuZnVuY3Rpb24gVmMoYSl7YS5JPTA7YS5qYT1bXTtpZihhLmwpe2NvbnN0IGI9aGMoYS5oKTtpZihiLmxlbmd0aCE9MHx8YS5pLmxlbmd0aCE9MClrYShhLmphLGIpLGthKGEuamEsYS5pKSxhLmguaS5sZW5ndGg9MCxqYShhLmkpLGEuaS5sZW5ndGg9MDthLmwub2EoKTt9fWZ1bmN0aW9uIFpiKGEsYixjKXt2YXIgZD1jIGluc3RhbmNlb2YgVD9PKGMpOm5ldyBUKGMpO2lmKGQuZyE9XCJcIiliJiYoZC5nPWIrXCIuXCIrZC5nKSxsYyhkLGQudSk7ZWxzZSB7dmFyIGU9bC5sb2NhdGlvbjtkPWUucHJvdG9jb2w7Yj1iP2IrXCIuXCIrZS5ob3N0bmFtZTplLmhvc3RuYW1lO2U9K2UucG9ydDtjb25zdCBmPW5ldyBUKG51bGwpO2QmJmtjKGYsZCk7YiYmKGYuZz1iKTtlJiZsYyhmLGUpO2MmJihmLmg9Yyk7ZD1mO31jPWEuRztiPWEud2E7YyYmYiYmUyhkLGMsYik7UyhkLFwiVkVSXCIsYS5rYSk7VWMoYSxkKTtyZXR1cm4gZH1cbmZ1bmN0aW9uIEhiKGEsYixjKXtpZihiJiYhYS5MKXRocm93IEVycm9yKFwiQ2FuJ3QgY3JlYXRlIHNlY29uZGFyeSBkb21haW4gY2FwYWJsZSBYaHJJbyBvYmplY3QuXCIpO2I9YS5BYSYmIWEubWE/bmV3IFgobmV3IEVjKHthYjpjfSkpOm5ldyBYKGEubWEpO2IuRmEoYS5MKTtyZXR1cm4gYn1oLmlzQWN0aXZlPWZ1bmN0aW9uKCl7cmV0dXJuICEhdGhpcy5sJiZ0aGlzLmwuaXNBY3RpdmUodGhpcyl9O2Z1bmN0aW9uIGFkKCl7fWg9YWQucHJvdG90eXBlO2gucmE9ZnVuY3Rpb24oKXt9O2gucWE9ZnVuY3Rpb24oKXt9O2gucGE9ZnVuY3Rpb24oKXt9O2gub2E9ZnVuY3Rpb24oKXt9O2guaXNBY3RpdmU9ZnVuY3Rpb24oKXtyZXR1cm4gITB9O2guS2E9ZnVuY3Rpb24oKXt9O2Z1bmN0aW9uIGJkKCl7fWJkLnByb3RvdHlwZS5nPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBZKGEsYil9O1xuZnVuY3Rpb24gWShhLGIpe0MuY2FsbCh0aGlzKTt0aGlzLmc9bmV3IFNjKGIpO3RoaXMubD1hO3RoaXMuaD1iJiZiLm1lc3NhZ2VVcmxQYXJhbXN8fG51bGw7YT1iJiZiLm1lc3NhZ2VIZWFkZXJzfHxudWxsO2ImJmIuY2xpZW50UHJvdG9jb2xIZWFkZXJSZXF1aXJlZCYmKGE/YVtcIlgtQ2xpZW50LVByb3RvY29sXCJdPVwid2ViY2hhbm5lbFwiOmE9e1wiWC1DbGllbnQtUHJvdG9jb2xcIjpcIndlYmNoYW5uZWxcIn0pO3RoaXMuZy5vPWE7YT1iJiZiLmluaXRNZXNzYWdlSGVhZGVyc3x8bnVsbDtiJiZiLm1lc3NhZ2VDb250ZW50VHlwZSYmKGE/YVtcIlgtV2ViQ2hhbm5lbC1Db250ZW50LVR5cGVcIl09Yi5tZXNzYWdlQ29udGVudFR5cGU6YT17XCJYLVdlYkNoYW5uZWwtQ29udGVudC1UeXBlXCI6Yi5tZXNzYWdlQ29udGVudFR5cGV9KTtiJiZiLnNhJiYoYT9hW1wiWC1XZWJDaGFubmVsLUNsaWVudC1Qcm9maWxlXCJdPWIuc2E6YT17XCJYLVdlYkNoYW5uZWwtQ2xpZW50LVByb2ZpbGVcIjpiLnNhfSk7dGhpcy5nLlU9XG5hOyhhPWImJmIuUWIpJiYheShhKSYmKHRoaXMuZy51PWEpO3RoaXMuQT1iJiZiLnN1cHBvcnRzQ3Jvc3NEb21haW5YaHJ8fCExO3RoaXMudj1iJiZiLnNlbmRSYXdKc29ufHwhMTsoYj1iJiZiLmh0dHBTZXNzaW9uSWRQYXJhbSkmJiF5KGIpJiYodGhpcy5nLkc9YixhPXRoaXMuaCxhIT09bnVsbCYmYiBpbiBhJiYoYT10aGlzLmgsYiBpbiBhJiZkZWxldGUgYVtiXSkpO3RoaXMuaj1uZXcgWih0aGlzKTt9dChZLEMpO1kucHJvdG90eXBlLm09ZnVuY3Rpb24oKXt0aGlzLmcubD10aGlzLmo7dGhpcy5BJiYodGhpcy5nLkw9ITApO3RoaXMuZy5jb25uZWN0KHRoaXMubCx0aGlzLmh8fHZvaWQgMCk7fTtZLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbigpe2NjKHRoaXMuZyk7fTtcblkucHJvdG90eXBlLm89ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nO2lmKHR5cGVvZiBhPT09XCJzdHJpbmdcIil7dmFyIGM9e307Yy5fX2RhdGFfXz1hO2E9Yzt9ZWxzZSB0aGlzLnYmJihjPXt9LGMuX19kYXRhX189YWIoYSksYT1jKTtiLmkucHVzaChuZXcgZGMoYi5ZYSsrLGEpKTtiLkk9PTMmJmJjKGIpO307WS5wcm90b3R5cGUuTj1mdW5jdGlvbigpe3RoaXMuZy5sPW51bGw7ZGVsZXRlIHRoaXMuajtjYyh0aGlzLmcpO2RlbGV0ZSB0aGlzLmc7WS5aLk4uY2FsbCh0aGlzKTt9O1xuZnVuY3Rpb24gY2QoYSl7Z2IuY2FsbCh0aGlzKTthLl9faGVhZGVyc19fJiYodGhpcy5oZWFkZXJzPWEuX19oZWFkZXJzX18sdGhpcy5zdGF0dXNDb2RlPWEuX19zdGF0dXNfXyxkZWxldGUgYS5fX2hlYWRlcnNfXyxkZWxldGUgYS5fX3N0YXR1c19fKTt2YXIgYj1hLl9fc21fXztpZihiKXthOntmb3IoY29uc3QgYyBpbiBiKXthPWM7YnJlYWsgYX1hPXZvaWQgMDt9aWYodGhpcy5pPWEpYT10aGlzLmksYj1iIT09bnVsbCYmYSBpbiBiP2JbYV06dm9pZCAwO3RoaXMuZGF0YT1iO31lbHNlIHRoaXMuZGF0YT1hO310KGNkLGdiKTtmdW5jdGlvbiBkZCgpe2hiLmNhbGwodGhpcyk7dGhpcy5zdGF0dXM9MTt9dChkZCxoYik7ZnVuY3Rpb24gWihhKXt0aGlzLmc9YTt9dChaLGFkKTtaLnByb3RvdHlwZS5yYT1mdW5jdGlvbigpe0QodGhpcy5nLFwiYVwiKTt9O1oucHJvdG90eXBlLnFhPWZ1bmN0aW9uKGEpe0QodGhpcy5nLG5ldyBjZChhKSk7fTtcbloucHJvdG90eXBlLnBhPWZ1bmN0aW9uKGEpe0QodGhpcy5nLG5ldyBkZCgpKTt9O1oucHJvdG90eXBlLm9hPWZ1bmN0aW9uKCl7RCh0aGlzLmcsXCJiXCIpO307YmQucHJvdG90eXBlLmNyZWF0ZVdlYkNoYW5uZWw9YmQucHJvdG90eXBlLmc7WS5wcm90b3R5cGUuc2VuZD1ZLnByb3RvdHlwZS5vO1kucHJvdG90eXBlLm9wZW49WS5wcm90b3R5cGUubTtZLnByb3RvdHlwZS5jbG9zZT1ZLnByb3RvdHlwZS5jbG9zZTtjcmVhdGVXZWJDaGFubmVsVHJhbnNwb3J0ID0gd2ViY2hhbm5lbF9ibG9iX2VzMjAxOC5jcmVhdGVXZWJDaGFubmVsVHJhbnNwb3J0PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBiZH07Z2V0U3RhdEV2ZW50VGFyZ2V0ID0gd2ViY2hhbm5lbF9ibG9iX2VzMjAxOC5nZXRTdGF0RXZlbnRUYXJnZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gamIoKX07RXZlbnQgPSB3ZWJjaGFubmVsX2Jsb2JfZXMyMDE4LkV2ZW50PUk7U3RhdCA9IHdlYmNoYW5uZWxfYmxvYl9lczIwMTguU3RhdD17amI6MCxtYjoxLG5iOjIsSGI6MyxNYjo0LEpiOjUsS2I6NixJYjo3LEdiOjgsTGI6OSxQUk9YWToxMCxOT1BST1hZOjExLEViOjEyLEFiOjEzLEJiOjE0LHpiOjE1LENiOjE2LERiOjE3LGZiOjE4LGViOjE5LGdiOjIwfTt1Yi5OT19FUlJPUj0wO3ViLlRJTUVPVVQ9ODt1Yi5IVFRQX0VSUk9SPTY7XG5FcnJvckNvZGUgPSB3ZWJjaGFubmVsX2Jsb2JfZXMyMDE4LkVycm9yQ29kZT11Yjt2Yi5DT01QTEVURT1cImNvbXBsZXRlXCI7RXZlbnRUeXBlID0gd2ViY2hhbm5lbF9ibG9iX2VzMjAxOC5FdmVudFR5cGU9dmI7ZmIuRXZlbnRUeXBlPUg7SC5PUEVOPVwiYVwiO0guQ0xPU0U9XCJiXCI7SC5FUlJPUj1cImNcIjtILk1FU1NBR0U9XCJkXCI7Qy5wcm90b3R5cGUubGlzdGVuPUMucHJvdG90eXBlLko7V2ViQ2hhbm5lbCA9IHdlYmNoYW5uZWxfYmxvYl9lczIwMTguV2ViQ2hhbm5lbD1mYjtGZXRjaFhtbEh0dHBGYWN0b3J5ID0gd2ViY2hhbm5lbF9ibG9iX2VzMjAxOC5GZXRjaFhtbEh0dHBGYWN0b3J5PUVjO1gucHJvdG90eXBlLmxpc3Rlbk9uY2U9WC5wcm90b3R5cGUuSztYLnByb3RvdHlwZS5nZXRMYXN0RXJyb3I9WC5wcm90b3R5cGUuSGE7WC5wcm90b3R5cGUuZ2V0TGFzdEVycm9yQ29kZT1YLnByb3RvdHlwZS55YTtYLnByb3RvdHlwZS5nZXRTdGF0dXM9WC5wcm90b3R5cGUuY2E7WC5wcm90b3R5cGUuZ2V0UmVzcG9uc2VKc29uPVgucHJvdG90eXBlLkxhO1gucHJvdG90eXBlLmdldFJlc3BvbnNlVGV4dD1YLnByb3RvdHlwZS5sYTtcblgucHJvdG90eXBlLnNlbmQ9WC5wcm90b3R5cGUuZWE7WC5wcm90b3R5cGUuc2V0V2l0aENyZWRlbnRpYWxzPVgucHJvdG90eXBlLkZhO1hocklvID0gd2ViY2hhbm5lbF9ibG9iX2VzMjAxOC5YaHJJbz1YO30pLmFwcGx5KCB0eXBlb2YgY29tbW9uanNHbG9iYWwgIT09ICd1bmRlZmluZWQnID8gY29tbW9uanNHbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmICA6IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93ICA6IHt9KTtcblxuZXhwb3J0IHsgRXJyb3JDb2RlLCBFdmVudCwgRXZlbnRUeXBlLCBGZXRjaFhtbEh0dHBGYWN0b3J5LCBTdGF0LCBXZWJDaGFubmVsLCBYaHJJbywgY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydCwgd2ViY2hhbm5lbF9ibG9iX2VzMjAxOCBhcyBkZWZhdWx0LCBnZXRTdGF0RXZlbnRUYXJnZXQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXdlYmNoYW5uZWxfYmxvYl9lczIwMTguanMubWFwXG4iLCJpbXBvcnQgeyBfcmVnaXN0ZXJDb21wb25lbnQsIHJlZ2lzdGVyVmVyc2lvbiwgX2lzRmlyZWJhc2VTZXJ2ZXJBcHAsIF9nZXRQcm92aWRlciwgZ2V0QXBwLCBfcmVtb3ZlU2VydmljZUluc3RhbmNlLCBTREtfVkVSU0lPTiB9IGZyb20gJ0BmaXJlYmFzZS9hcHAnO1xuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQGZpcmViYXNlL2NvbXBvbmVudCc7XG5pbXBvcnQgeyBMb2dnZXIsIExvZ0xldmVsIH0gZnJvbSAnQGZpcmViYXNlL2xvZ2dlcic7XG5pbXBvcnQgeyBGaXJlYmFzZUVycm9yLCBpc0Nsb3VkV29ya3N0YXRpb24sIHBpbmdTZXJ2ZXIsIHVwZGF0ZUVtdWxhdG9yQmFubmVyLCBkZWVwRXF1YWwsIGNyZWF0ZU1vY2tVc2VyVG9rZW4sIGdldE1vZHVsYXJJbnN0YW5jZSwgZ2V0RGVmYXVsdEVtdWxhdG9ySG9zdG5hbWVBbmRQb3J0LCBnZXRHbG9iYWwsIGlzSW5kZXhlZERCQXZhaWxhYmxlLCBnZXRVQSwgaXNTYWZhcmksIGlzU2FmYXJpT3JXZWJraXQgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBJbnRlZ2VyLCBNZDUgfSBmcm9tICdAZmlyZWJhc2Uvd2ViY2hhbm5lbC13cmFwcGVyL2Jsb29tLWJsb2InO1xuaW1wb3J0IHsgWGhySW8sIEV2ZW50VHlwZSwgRXJyb3JDb2RlLCBjcmVhdGVXZWJDaGFubmVsVHJhbnNwb3J0LCBnZXRTdGF0RXZlbnRUYXJnZXQsIFdlYkNoYW5uZWwsIEV2ZW50LCBTdGF0IH0gZnJvbSAnQGZpcmViYXNlL3dlYmNoYW5uZWwtd3JhcHBlci93ZWJjaGFubmVsLWJsb2InO1xuXG5jb25zdCBGID0gXCJAZmlyZWJhc2UvZmlyZXN0b3JlXCIsIE0gPSBcIjQuOS4yXCI7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFNpbXBsZSB3cmFwcGVyIGFyb3VuZCBhIG51bGxhYmxlIFVJRC4gTW9zdGx5IGV4aXN0cyB0byBtYWtlIGNvZGUgbW9yZVxuICogcmVhZGFibGUuXG4gKi9cbmNsYXNzIFVzZXIge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy51aWQgPSBlO1xuICAgIH1cbiAgICBpc0F1dGhlbnRpY2F0ZWQoKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9IHRoaXMudWlkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEga2V5IHJlcHJlc2VudGluZyB0aGlzIHVzZXIsIHN1aXRhYmxlIGZvciBpbmNsdXNpb24gaW4gYVxuICAgICAqIGRpY3Rpb25hcnkuXG4gICAgICovICAgIHRvS2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc0F1dGhlbnRpY2F0ZWQoKSA/IFwidWlkOlwiICsgdGhpcy51aWQgOiBcImFub255bW91cy11c2VyXCI7XG4gICAgfVxuICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gZS51aWQgPT09IHRoaXMudWlkO1xuICAgIH1cbn1cblxuLyoqIEEgdXNlciB3aXRoIGEgbnVsbCBVSUQuICovIFVzZXIuVU5BVVRIRU5USUNBVEVEID0gbmV3IFVzZXIobnVsbCksIFxuLy8gVE9ETyhtaWtlbGVoZW4pOiBMb29rIGludG8gZ2V0dGluZyBhIHByb3BlciB1aWQtZXF1aXZhbGVudCBmb3Jcbi8vIG5vbi1GaXJlYmFzZUF1dGggcHJvdmlkZXJzLlxuVXNlci5HT09HTEVfQ1JFREVOVElBTFMgPSBuZXcgVXNlcihcImdvb2dsZS1jcmVkZW50aWFscy11aWRcIiksIFVzZXIuRklSU1RfUEFSVFkgPSBuZXcgVXNlcihcImZpcnN0LXBhcnR5LXVpZFwiKSwgXG5Vc2VyLk1PQ0tfVVNFUiA9IG5ldyBVc2VyKFwibW9jay11c2VyXCIpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xubGV0IHggPSBcIjEyLjMuMFwiO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY29uc3QgTyA9IG5ldyBMb2dnZXIoXCJAZmlyZWJhc2UvZmlyZXN0b3JlXCIpO1xuXG4vLyBIZWxwZXIgbWV0aG9kcyBhcmUgbmVlZGVkIGJlY2F1c2UgdmFyaWFibGVzIGNhbid0IGJlIGV4cG9ydGVkIGFzIHJlYWQvd3JpdGVcbmZ1bmN0aW9uIF9fUFJJVkFURV9nZXRMb2dMZXZlbCgpIHtcbiAgICByZXR1cm4gTy5sb2dMZXZlbDtcbn1cblxuLyoqXG4gKiBTZXRzIHRoZSB2ZXJib3NpdHkgb2YgQ2xvdWQgRmlyZXN0b3JlIGxvZ3MgKGRlYnVnLCBlcnJvciwgb3Igc2lsZW50KS5cbiAqXG4gKiBAcGFyYW0gbG9nTGV2ZWwgLSBUaGUgdmVyYm9zaXR5IHlvdSBzZXQgZm9yIGFjdGl2aXR5IGFuZCBlcnJvciBsb2dnaW5nLiBDYW5cbiAqICAgYmUgYW55IG9mIHRoZSBmb2xsb3dpbmcgdmFsdWVzOlxuICpcbiAqICAgPHVsPlxuICogICAgIDxsaT5gZGVidWdgIGZvciB0aGUgbW9zdCB2ZXJib3NlIGxvZ2dpbmcgbGV2ZWwsIHByaW1hcmlseSBmb3JcbiAqICAgICBkZWJ1Z2dpbmcuPC9saT5cbiAqICAgICA8bGk+YGVycm9yYCB0byBsb2cgZXJyb3JzIG9ubHkuPC9saT5cbiAqICAgICA8bGk+PGNvZGU+YHNpbGVudGAgdG8gdHVybiBvZmYgbG9nZ2luZy48L2xpPlxuICogICA8L3VsPlxuICovIGZ1bmN0aW9uIHNldExvZ0xldmVsKGUpIHtcbiAgICBPLnNldExvZ0xldmVsKGUpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfbG9nRGVidWcoZSwgLi4udCkge1xuICAgIGlmIChPLmxvZ0xldmVsIDw9IExvZ0xldmVsLkRFQlVHKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0Lm1hcChfX1BSSVZBVEVfYXJnVG9TdHJpbmcpO1xuICAgICAgICBPLmRlYnVnKGBGaXJlc3RvcmUgKCR7eH0pOiAke2V9YCwgLi4ubik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfbG9nRXJyb3IoZSwgLi4udCkge1xuICAgIGlmIChPLmxvZ0xldmVsIDw9IExvZ0xldmVsLkVSUk9SKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0Lm1hcChfX1BSSVZBVEVfYXJnVG9TdHJpbmcpO1xuICAgICAgICBPLmVycm9yKGBGaXJlc3RvcmUgKCR7eH0pOiAke2V9YCwgLi4ubik7XG4gICAgfVxufVxuXG4vKipcbiAqIEBpbnRlcm5hbFxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9sb2dXYXJuKGUsIC4uLnQpIHtcbiAgICBpZiAoTy5sb2dMZXZlbCA8PSBMb2dMZXZlbC5XQVJOKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0Lm1hcChfX1BSSVZBVEVfYXJnVG9TdHJpbmcpO1xuICAgICAgICBPLndhcm4oYEZpcmVzdG9yZSAoJHt4fSk6ICR7ZX1gLCAuLi5uKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ29udmVydHMgYW4gYWRkaXRpb25hbCBsb2cgcGFyYW1ldGVyIHRvIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9hcmdUb1N0cmluZyhlKSB7XG4gICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIGUpIHJldHVybiBlO1xuICAgIHRyeSB7XG4gICAgICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4gICAgICAgIC8qKiBGb3JtYXRzIGFuIG9iamVjdCBhcyBhIEpTT04gc3RyaW5nLCBzdWl0YWJsZSBmb3IgbG9nZ2luZy4gKi9cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9mb3JtYXRKU09OKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShlKTtcbiAgICAgICAgfShlKTtcbiAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgIC8vIENvbnZlcnRpbmcgdG8gSlNPTiBmYWlsZWQsIGp1c3QgbG9nIHRoZSBvYmplY3QgZGlyZWN0bHlcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBmdW5jdGlvbiBmYWlsKGUsIHQsIG4pIHtcbiAgICBsZXQgciA9IFwiVW5leHBlY3RlZCBzdGF0ZVwiO1xuICAgIFwic3RyaW5nXCIgPT0gdHlwZW9mIHQgPyByID0gdCA6IG4gPSB0LCBfX1BSSVZBVEVfX2ZhaWwoZSwgciwgbik7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9fZmFpbChlLCB0LCBuKSB7XG4gICAgLy8gTG9nIHRoZSBmYWlsdXJlIGluIGFkZGl0aW9uIHRvIHRocm93IGFuIGV4Y2VwdGlvbiwganVzdCBpbiBjYXNlIHRoZVxuICAgIC8vIGV4Y2VwdGlvbiBpcyBzd2FsbG93ZWQuXG4gICAgbGV0IHIgPSBgRklSRVNUT1JFICgke3h9KSBJTlRFUk5BTCBBU1NFUlRJT04gRkFJTEVEOiAke3R9IChJRDogJHtlLnRvU3RyaW5nKDE2KX0pYDtcbiAgICBpZiAodm9pZCAwICE9PSBuKSB0cnkge1xuICAgICAgICByICs9IFwiIENPTlRFWFQ6IFwiICsgSlNPTi5zdHJpbmdpZnkobik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByICs9IFwiIENPTlRFWFQ6IFwiICsgbjtcbiAgICB9XG4gICAgLy8gTk9URTogV2UgZG9uJ3QgdXNlIEZpcmVzdG9yZUVycm9yIGhlcmUgYmVjYXVzZSB0aGVzZSBhcmUgaW50ZXJuYWwgZmFpbHVyZXNcbiAgICAvLyB0aGF0IGNhbm5vdCBiZSBoYW5kbGVkIGJ5IHRoZSB1c2VyLiAoQWxzbyBpdCB3b3VsZCBjcmVhdGUgYSBjaXJjdWxhclxuICAgIC8vIGRlcGVuZGVuY3kgYmV0d2VlbiB0aGUgZXJyb3IgYW5kIGFzc2VydCBtb2R1bGVzIHdoaWNoIGRvZXNuJ3Qgd29yay4pXG4gICAgdGhyb3cgX19QUklWQVRFX2xvZ0Vycm9yKHIpLCBuZXcgRXJyb3Iocik7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9oYXJkQXNzZXJ0KGUsIHQsIG4sIHIpIHtcbiAgICBsZXQgaSA9IFwiVW5leHBlY3RlZCBzdGF0ZVwiO1xuICAgIFwic3RyaW5nXCIgPT0gdHlwZW9mIG4gPyBpID0gbiA6IHIgPSBuLCBlIHx8IF9fUFJJVkFURV9fZmFpbCh0LCBpLCByKTtcbn1cblxuLyoqXG4gKiBGYWlscyBpZiB0aGUgZ2l2ZW4gYXNzZXJ0aW9uIGNvbmRpdGlvbiBpcyBmYWxzZSwgdGhyb3dpbmcgYW4gRXJyb3Igd2l0aCB0aGVcbiAqIGdpdmVuIG1lc3NhZ2UgaWYgaXQgZGlkLlxuICpcbiAqIFRoZSBjb2RlIG9mIGNhbGxzaXRlcyBpbnZva2luZyB0aGlzIGZ1bmN0aW9uIGFyZSBzdHJpcHBlZCBvdXQgaW4gcHJvZHVjdGlvblxuICogYnVpbGRzLiBBbnkgc2lkZS1lZmZlY3RzIG9mIGNvZGUgd2l0aGluIHRoZSBkZWJ1Z0Fzc2VydCgpIGludm9jYXRpb24gd2lsbCBub3RcbiAqIGhhcHBlbiBpbiB0aGlzIGNhc2UuXG4gKlxuICogQGludGVybmFsXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2RlYnVnQXNzZXJ0KGUsIHQpIHtcbiAgICBlIHx8IGZhaWwoNTcwMTQsIHQpO1xufVxuXG4vKipcbiAqIENhc3RzIGBvYmpgIHRvIGBUYC4gSW4gbm9uLXByb2R1Y3Rpb24gYnVpbGRzLCB2ZXJpZmllcyB0aGF0IGBvYmpgIGlzIGFuXG4gKiBpbnN0YW5jZSBvZiBgVGAgYmVmb3JlIGNhc3RpbmcuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2RlYnVnQ2FzdChlLCBcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG50KSB7XG4gICAgcmV0dXJuIGU7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IE4gPSB7XG4gICAgLy8gQ2F1c2VzIGFyZSBjb3BpZWQgZnJvbTpcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZ3JwYy9ncnBjL2Jsb2IvYmNlZWM5NGVhNGZjNWYwMDg1ZDgxMjM1ZDhlMWMwNjc5OGRjMzQxYS9pbmNsdWRlL2dycGMlMkIlMkIvaW1wbC9jb2RlZ2VuL3N0YXR1c19jb2RlX2VudW0uaFxuICAgIC8qKiBOb3QgYW4gZXJyb3I7IHJldHVybmVkIG9uIHN1Y2Nlc3MuICovXG4gICAgT0s6IFwib2tcIixcbiAgICAvKiogVGhlIG9wZXJhdGlvbiB3YXMgY2FuY2VsbGVkICh0eXBpY2FsbHkgYnkgdGhlIGNhbGxlcikuICovXG4gICAgQ0FOQ0VMTEVEOiBcImNhbmNlbGxlZFwiLFxuICAgIC8qKiBVbmtub3duIGVycm9yIG9yIGFuIGVycm9yIGZyb20gYSBkaWZmZXJlbnQgZXJyb3IgZG9tYWluLiAqL1xuICAgIFVOS05PV046IFwidW5rbm93blwiLFxuICAgIC8qKlxuICAgICAqIENsaWVudCBzcGVjaWZpZWQgYW4gaW52YWxpZCBhcmd1bWVudC4gTm90ZSB0aGF0IHRoaXMgZGlmZmVycyBmcm9tXG4gICAgICogRkFJTEVEX1BSRUNPTkRJVElPTi4gSU5WQUxJRF9BUkdVTUVOVCBpbmRpY2F0ZXMgYXJndW1lbnRzIHRoYXQgYXJlXG4gICAgICogcHJvYmxlbWF0aWMgcmVnYXJkbGVzcyBvZiB0aGUgc3RhdGUgb2YgdGhlIHN5c3RlbSAoZS5nLiwgYSBtYWxmb3JtZWQgZmlsZVxuICAgICAqIG5hbWUpLlxuICAgICAqL1xuICAgIElOVkFMSURfQVJHVU1FTlQ6IFwiaW52YWxpZC1hcmd1bWVudFwiLFxuICAgIC8qKlxuICAgICAqIERlYWRsaW5lIGV4cGlyZWQgYmVmb3JlIG9wZXJhdGlvbiBjb3VsZCBjb21wbGV0ZS4gRm9yIG9wZXJhdGlvbnMgdGhhdFxuICAgICAqIGNoYW5nZSB0aGUgc3RhdGUgb2YgdGhlIHN5c3RlbSwgdGhpcyBlcnJvciBtYXkgYmUgcmV0dXJuZWQgZXZlbiBpZiB0aGVcbiAgICAgKiBvcGVyYXRpb24gaGFzIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkuIEZvciBleGFtcGxlLCBhIHN1Y2Nlc3NmdWwgcmVzcG9uc2VcbiAgICAgKiBmcm9tIGEgc2VydmVyIGNvdWxkIGhhdmUgYmVlbiBkZWxheWVkIGxvbmcgZW5vdWdoIGZvciB0aGUgZGVhZGxpbmUgdG9cbiAgICAgKiBleHBpcmUuXG4gICAgICovXG4gICAgREVBRExJTkVfRVhDRUVERUQ6IFwiZGVhZGxpbmUtZXhjZWVkZWRcIixcbiAgICAvKiogU29tZSByZXF1ZXN0ZWQgZW50aXR5IChlLmcuLCBmaWxlIG9yIGRpcmVjdG9yeSkgd2FzIG5vdCBmb3VuZC4gKi9cbiAgICBOT1RfRk9VTkQ6IFwibm90LWZvdW5kXCIsXG4gICAgLyoqXG4gICAgICogU29tZSBlbnRpdHkgdGhhdCB3ZSBhdHRlbXB0ZWQgdG8gY3JlYXRlIChlLmcuLCBmaWxlIG9yIGRpcmVjdG9yeSkgYWxyZWFkeVxuICAgICAqIGV4aXN0cy5cbiAgICAgKi9cbiAgICBBTFJFQURZX0VYSVNUUzogXCJhbHJlYWR5LWV4aXN0c1wiLFxuICAgIC8qKlxuICAgICAqIFRoZSBjYWxsZXIgZG9lcyBub3QgaGF2ZSBwZXJtaXNzaW9uIHRvIGV4ZWN1dGUgdGhlIHNwZWNpZmllZCBvcGVyYXRpb24uXG4gICAgICogUEVSTUlTU0lPTl9ERU5JRUQgbXVzdCBub3QgYmUgdXNlZCBmb3IgcmVqZWN0aW9ucyBjYXVzZWQgYnkgZXhoYXVzdGluZ1xuICAgICAqIHNvbWUgcmVzb3VyY2UgKHVzZSBSRVNPVVJDRV9FWEhBVVNURUQgaW5zdGVhZCBmb3IgdGhvc2UgZXJyb3JzKS5cbiAgICAgKiBQRVJNSVNTSU9OX0RFTklFRCBtdXN0IG5vdCBiZSB1c2VkIGlmIHRoZSBjYWxsZXIgY2Fubm90IGJlIGlkZW50aWZpZWRcbiAgICAgKiAodXNlIFVOQVVUSEVOVElDQVRFRCBpbnN0ZWFkIGZvciB0aG9zZSBlcnJvcnMpLlxuICAgICAqL1xuICAgIFBFUk1JU1NJT05fREVOSUVEOiBcInBlcm1pc3Npb24tZGVuaWVkXCIsXG4gICAgLyoqXG4gICAgICogVGhlIHJlcXVlc3QgZG9lcyBub3QgaGF2ZSB2YWxpZCBhdXRoZW50aWNhdGlvbiBjcmVkZW50aWFscyBmb3IgdGhlXG4gICAgICogb3BlcmF0aW9uLlxuICAgICAqL1xuICAgIFVOQVVUSEVOVElDQVRFRDogXCJ1bmF1dGhlbnRpY2F0ZWRcIixcbiAgICAvKipcbiAgICAgKiBTb21lIHJlc291cmNlIGhhcyBiZWVuIGV4aGF1c3RlZCwgcGVyaGFwcyBhIHBlci11c2VyIHF1b3RhLCBvciBwZXJoYXBzIHRoZVxuICAgICAqIGVudGlyZSBmaWxlIHN5c3RlbSBpcyBvdXQgb2Ygc3BhY2UuXG4gICAgICovXG4gICAgUkVTT1VSQ0VfRVhIQVVTVEVEOiBcInJlc291cmNlLWV4aGF1c3RlZFwiLFxuICAgIC8qKlxuICAgICAqIE9wZXJhdGlvbiB3YXMgcmVqZWN0ZWQgYmVjYXVzZSB0aGUgc3lzdGVtIGlzIG5vdCBpbiBhIHN0YXRlIHJlcXVpcmVkIGZvclxuICAgICAqIHRoZSBvcGVyYXRpb24ncyBleGVjdXRpb24uIEZvciBleGFtcGxlLCBkaXJlY3RvcnkgdG8gYmUgZGVsZXRlZCBtYXkgYmVcbiAgICAgKiBub24tZW1wdHksIGFuIHJtZGlyIG9wZXJhdGlvbiBpcyBhcHBsaWVkIHRvIGEgbm9uLWRpcmVjdG9yeSwgZXRjLlxuICAgICAqXG4gICAgICogQSBsaXRtdXMgdGVzdCB0aGF0IG1heSBoZWxwIGEgc2VydmljZSBpbXBsZW1lbnRvciBpbiBkZWNpZGluZ1xuICAgICAqIGJldHdlZW4gRkFJTEVEX1BSRUNPTkRJVElPTiwgQUJPUlRFRCwgYW5kIFVOQVZBSUxBQkxFOlxuICAgICAqICAoYSkgVXNlIFVOQVZBSUxBQkxFIGlmIHRoZSBjbGllbnQgY2FuIHJldHJ5IGp1c3QgdGhlIGZhaWxpbmcgY2FsbC5cbiAgICAgKiAgKGIpIFVzZSBBQk9SVEVEIGlmIHRoZSBjbGllbnQgc2hvdWxkIHJldHJ5IGF0IGEgaGlnaGVyLWxldmVsXG4gICAgICogICAgICAoZS5nLiwgcmVzdGFydGluZyBhIHJlYWQtbW9kaWZ5LXdyaXRlIHNlcXVlbmNlKS5cbiAgICAgKiAgKGMpIFVzZSBGQUlMRURfUFJFQ09ORElUSU9OIGlmIHRoZSBjbGllbnQgc2hvdWxkIG5vdCByZXRyeSB1bnRpbFxuICAgICAqICAgICAgdGhlIHN5c3RlbSBzdGF0ZSBoYXMgYmVlbiBleHBsaWNpdGx5IGZpeGVkLiBFLmcuLCBpZiBhbiBcInJtZGlyXCJcbiAgICAgKiAgICAgIGZhaWxzIGJlY2F1c2UgdGhlIGRpcmVjdG9yeSBpcyBub24tZW1wdHksIEZBSUxFRF9QUkVDT05ESVRJT05cbiAgICAgKiAgICAgIHNob3VsZCBiZSByZXR1cm5lZCBzaW5jZSB0aGUgY2xpZW50IHNob3VsZCBub3QgcmV0cnkgdW5sZXNzXG4gICAgICogICAgICB0aGV5IGhhdmUgZmlyc3QgZml4ZWQgdXAgdGhlIGRpcmVjdG9yeSBieSBkZWxldGluZyBmaWxlcyBmcm9tIGl0LlxuICAgICAqICAoZCkgVXNlIEZBSUxFRF9QUkVDT05ESVRJT04gaWYgdGhlIGNsaWVudCBwZXJmb3JtcyBjb25kaXRpb25hbFxuICAgICAqICAgICAgUkVTVCBHZXQvVXBkYXRlL0RlbGV0ZSBvbiBhIHJlc291cmNlIGFuZCB0aGUgcmVzb3VyY2Ugb24gdGhlXG4gICAgICogICAgICBzZXJ2ZXIgZG9lcyBub3QgbWF0Y2ggdGhlIGNvbmRpdGlvbi4gRS5nLiwgY29uZmxpY3RpbmdcbiAgICAgKiAgICAgIHJlYWQtbW9kaWZ5LXdyaXRlIG9uIHRoZSBzYW1lIHJlc291cmNlLlxuICAgICAqL1xuICAgIEZBSUxFRF9QUkVDT05ESVRJT046IFwiZmFpbGVkLXByZWNvbmRpdGlvblwiLFxuICAgIC8qKlxuICAgICAqIFRoZSBvcGVyYXRpb24gd2FzIGFib3J0ZWQsIHR5cGljYWxseSBkdWUgdG8gYSBjb25jdXJyZW5jeSBpc3N1ZSBsaWtlXG4gICAgICogc2VxdWVuY2VyIGNoZWNrIGZhaWx1cmVzLCB0cmFuc2FjdGlvbiBhYm9ydHMsIGV0Yy5cbiAgICAgKlxuICAgICAqIFNlZSBsaXRtdXMgdGVzdCBhYm92ZSBmb3IgZGVjaWRpbmcgYmV0d2VlbiBGQUlMRURfUFJFQ09ORElUSU9OLCBBQk9SVEVELFxuICAgICAqIGFuZCBVTkFWQUlMQUJMRS5cbiAgICAgKi9cbiAgICBBQk9SVEVEOiBcImFib3J0ZWRcIixcbiAgICAvKipcbiAgICAgKiBPcGVyYXRpb24gd2FzIGF0dGVtcHRlZCBwYXN0IHRoZSB2YWxpZCByYW5nZS4gRS5nLiwgc2Vla2luZyBvciByZWFkaW5nXG4gICAgICogcGFzdCBlbmQgb2YgZmlsZS5cbiAgICAgKlxuICAgICAqIFVubGlrZSBJTlZBTElEX0FSR1VNRU5ULCB0aGlzIGVycm9yIGluZGljYXRlcyBhIHByb2JsZW0gdGhhdCBtYXkgYmUgZml4ZWRcbiAgICAgKiBpZiB0aGUgc3lzdGVtIHN0YXRlIGNoYW5nZXMuIEZvciBleGFtcGxlLCBhIDMyLWJpdCBmaWxlIHN5c3RlbSB3aWxsXG4gICAgICogZ2VuZXJhdGUgSU5WQUxJRF9BUkdVTUVOVCBpZiBhc2tlZCB0byByZWFkIGF0IGFuIG9mZnNldCB0aGF0IGlzIG5vdCBpbiB0aGVcbiAgICAgKiByYW5nZSBbMCwyXjMyLTFdLCBidXQgaXQgd2lsbCBnZW5lcmF0ZSBPVVRfT0ZfUkFOR0UgaWYgYXNrZWQgdG8gcmVhZCBmcm9tXG4gICAgICogYW4gb2Zmc2V0IHBhc3QgdGhlIGN1cnJlbnQgZmlsZSBzaXplLlxuICAgICAqXG4gICAgICogVGhlcmUgaXMgYSBmYWlyIGJpdCBvZiBvdmVybGFwIGJldHdlZW4gRkFJTEVEX1BSRUNPTkRJVElPTiBhbmRcbiAgICAgKiBPVVRfT0ZfUkFOR0UuIFdlIHJlY29tbWVuZCB1c2luZyBPVVRfT0ZfUkFOR0UgKHRoZSBtb3JlIHNwZWNpZmljIGVycm9yKVxuICAgICAqIHdoZW4gaXQgYXBwbGllcyBzbyB0aGF0IGNhbGxlcnMgd2hvIGFyZSBpdGVyYXRpbmcgdGhyb3VnaCBhIHNwYWNlIGNhblxuICAgICAqIGVhc2lseSBsb29rIGZvciBhbiBPVVRfT0ZfUkFOR0UgZXJyb3IgdG8gZGV0ZWN0IHdoZW4gdGhleSBhcmUgZG9uZS5cbiAgICAgKi9cbiAgICBPVVRfT0ZfUkFOR0U6IFwib3V0LW9mLXJhbmdlXCIsXG4gICAgLyoqIE9wZXJhdGlvbiBpcyBub3QgaW1wbGVtZW50ZWQgb3Igbm90IHN1cHBvcnRlZC9lbmFibGVkIGluIHRoaXMgc2VydmljZS4gKi9cbiAgICBVTklNUExFTUVOVEVEOiBcInVuaW1wbGVtZW50ZWRcIixcbiAgICAvKipcbiAgICAgKiBJbnRlcm5hbCBlcnJvcnMuIE1lYW5zIHNvbWUgaW52YXJpYW50cyBleHBlY3RlZCBieSB1bmRlcmx5aW5nIFN5c3RlbSBoYXNcbiAgICAgKiBiZWVuIGJyb2tlbi4gSWYgeW91IHNlZSBvbmUgb2YgdGhlc2UgZXJyb3JzLCBTb21ldGhpbmcgaXMgdmVyeSBicm9rZW4uXG4gICAgICovXG4gICAgSU5URVJOQUw6IFwiaW50ZXJuYWxcIixcbiAgICAvKipcbiAgICAgKiBUaGUgc2VydmljZSBpcyBjdXJyZW50bHkgdW5hdmFpbGFibGUuIFRoaXMgaXMgYSBtb3N0IGxpa2VseSBhIHRyYW5zaWVudFxuICAgICAqIGNvbmRpdGlvbiBhbmQgbWF5IGJlIGNvcnJlY3RlZCBieSByZXRyeWluZyB3aXRoIGEgYmFja29mZi5cbiAgICAgKlxuICAgICAqIFNlZSBsaXRtdXMgdGVzdCBhYm92ZSBmb3IgZGVjaWRpbmcgYmV0d2VlbiBGQUlMRURfUFJFQ09ORElUSU9OLCBBQk9SVEVELFxuICAgICAqIGFuZCBVTkFWQUlMQUJMRS5cbiAgICAgKi9cbiAgICBVTkFWQUlMQUJMRTogXCJ1bmF2YWlsYWJsZVwiLFxuICAgIC8qKiBVbnJlY292ZXJhYmxlIGRhdGEgbG9zcyBvciBjb3JydXB0aW9uLiAqL1xuICAgIERBVEFfTE9TUzogXCJkYXRhLWxvc3NcIlxufTtcblxuLyoqIEFuIGVycm9yIHJldHVybmVkIGJ5IGEgRmlyZXN0b3JlIG9wZXJhdGlvbi4gKi8gY2xhc3MgRmlyZXN0b3JlRXJyb3IgZXh0ZW5kcyBGaXJlYmFzZUVycm9yIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBiYWNrZW5kIGVycm9yIGNvZGUgYXNzb2NpYXRlZCB3aXRoIHRoaXMgZXJyb3IuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogQSBjdXN0b20gZXJyb3IgZGVzY3JpcHRpb24uXG4gICAgICovXG4gICAgdCkge1xuICAgICAgICBzdXBlcihlLCB0KSwgdGhpcy5jb2RlID0gZSwgdGhpcy5tZXNzYWdlID0gdCwgXG4gICAgICAgIC8vIEhBQ0s6IFdlIHdyaXRlIGEgdG9TdHJpbmcgcHJvcGVydHkgZGlyZWN0bHkgYmVjYXVzZSBFcnJvciBpcyBub3QgYSByZWFsXG4gICAgICAgIC8vIGNsYXNzIGFuZCBzbyBpbmhlcml0YW5jZSBkb2VzIG5vdCB3b3JrIGNvcnJlY3RseS4gV2UgY291bGQgYWx0ZXJuYXRpdmVseVxuICAgICAgICAvLyBkbyB0aGUgc2FtZSBcImJhY2stZG9vciBpbmhlcml0YW5jZVwiIHRyaWNrIHRoYXQgRmlyZWJhc2VFcnJvciBkb2VzLlxuICAgICAgICB0aGlzLnRvU3RyaW5nID0gKCkgPT4gYCR7dGhpcy5uYW1lfTogW2NvZGU9JHt0aGlzLmNvZGV9XTogJHt0aGlzLm1lc3NhZ2V9YDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIF9fUFJJVkFURV9EZWZlcnJlZCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlKCgoZSwgdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlID0gZSwgdGhpcy5yZWplY3QgPSB0O1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfT0F1dGhUb2tlbiB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLnVzZXIgPSB0LCB0aGlzLnR5cGUgPSBcIk9BdXRoXCIsIHRoaXMuaGVhZGVycyA9IG5ldyBNYXAsIHRoaXMuaGVhZGVycy5zZXQoXCJBdXRob3JpemF0aW9uXCIsIGBCZWFyZXIgJHtlfWApO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIENyZWRlbnRpYWxzUHJvdmlkZXIgdGhhdCBhbHdheXMgeWllbGRzIGFuIGVtcHR5IHRva2VuLlxuICogQGludGVybmFsXG4gKi8gY2xhc3MgX19QUklWQVRFX0VtcHR5QXV0aENyZWRlbnRpYWxzUHJvdmlkZXIge1xuICAgIGdldFRva2VuKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9rZW4oKSB7fVxuICAgIHN0YXJ0KGUsIHQpIHtcbiAgICAgICAgLy8gRmlyZSB3aXRoIGluaXRpYWwgdXNlci5cbiAgICAgICAgZS5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiB0KFVzZXIuVU5BVVRIRU5USUNBVEVEKSkpO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHt9XG59XG5cbi8qKlxuICogQSBDcmVkZW50aWFsc1Byb3ZpZGVyIHRoYXQgYWx3YXlzIHJldHVybnMgYSBjb25zdGFudCB0b2tlbi4gVXNlZCBmb3JcbiAqIGVtdWxhdG9yIHRva2VuIG1vY2tpbmcuXG4gKi8gY2xhc3MgX19QUklWQVRFX0VtdWxhdG9yQXV0aENyZWRlbnRpYWxzUHJvdmlkZXIge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy50b2tlbiA9IGUsIFxuICAgICAgICAvKipcbiAgICAgICAgICogU3RvcmVzIHRoZSBsaXN0ZW5lciByZWdpc3RlcmVkIHdpdGggc2V0Q2hhbmdlTGlzdGVuZXIoKVxuICAgICAgICAgKiBUaGlzIGlzbid0IGFjdHVhbGx5IG5lY2Vzc2FyeSBzaW5jZSB0aGUgVUlEIG5ldmVyIGNoYW5nZXMsIGJ1dCB3ZSB1c2UgdGhpc1xuICAgICAgICAgKiB0byB2ZXJpZnkgdGhlIGxpc3RlbiBjb250cmFjdCBpcyBhZGhlcmVkIHRvIGluIHRlc3RzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jaGFuZ2VMaXN0ZW5lciA9IG51bGw7XG4gICAgfVxuICAgIGdldFRva2VuKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMudG9rZW4pO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9rZW4oKSB7fVxuICAgIHN0YXJ0KGUsIHQpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VMaXN0ZW5lciA9IHQsIFxuICAgICAgICAvLyBGaXJlIHdpdGggaW5pdGlhbCB1c2VyLlxuICAgICAgICBlLmVucXVldWVSZXRyeWFibGUoKCgpID0+IHQodGhpcy50b2tlbi51c2VyKSkpO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VMaXN0ZW5lciA9IG51bGw7XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfRmlyZWJhc2VBdXRoQ3JlZGVudGlhbHNQcm92aWRlciB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLnQgPSBlLCBcbiAgICAgICAgLyoqIFRyYWNrcyB0aGUgY3VycmVudCBVc2VyLiAqL1xuICAgICAgICB0aGlzLmN1cnJlbnRVc2VyID0gVXNlci5VTkFVVEhFTlRJQ0FURUQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQ291bnRlciB1c2VkIHRvIGRldGVjdCBpZiB0aGUgdG9rZW4gY2hhbmdlZCB3aGlsZSBhIGdldFRva2VuIHJlcXVlc3Qgd2FzXG4gICAgICAgICAqIG91dHN0YW5kaW5nLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pID0gMCwgdGhpcy5mb3JjZVJlZnJlc2ggPSAhMSwgdGhpcy5hdXRoID0gbnVsbDtcbiAgICB9XG4gICAgc3RhcnQoZSwgdCkge1xuICAgICAgICBfX1BSSVZBVEVfaGFyZEFzc2VydCh2b2lkIDAgPT09IHRoaXMubywgNDIzMDQpO1xuICAgICAgICBsZXQgbiA9IHRoaXMuaTtcbiAgICAgICAgLy8gQSBjaGFuZ2UgbGlzdGVuZXIgdGhhdCBwcmV2ZW50cyBkb3VibGUtZmlyaW5nIGZvciB0aGUgc2FtZSB0b2tlbiBjaGFuZ2UuXG4gICAgICAgICAgICAgICAgY29uc3QgX19QUklWQVRFX2d1YXJkZWRDaGFuZ2VMaXN0ZW5lciA9IGUgPT4gdGhpcy5pICE9PSBuID8gKG4gPSB0aGlzLmksIFxuICAgICAgICB0KGUpKSA6IFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAvLyBBIHByb21pc2UgdGhhdCBjYW4gYmUgd2FpdGVkIG9uIHRvIGJsb2NrIG9uIHRoZSBuZXh0IHRva2VuIGNoYW5nZS5cbiAgICAgICAgLy8gVGhpcyBwcm9taXNlIGlzIHJlLWNyZWF0ZWQgYWZ0ZXIgZWFjaCBjaGFuZ2UuXG4gICAgICAgICAgICAgICAgbGV0IHIgPSBuZXcgX19QUklWQVRFX0RlZmVycmVkO1xuICAgICAgICB0aGlzLm8gPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmkrKywgdGhpcy5jdXJyZW50VXNlciA9IHRoaXMudSgpLCByLnJlc29sdmUoKSwgciA9IG5ldyBfX1BSSVZBVEVfRGVmZXJyZWQsIFxuICAgICAgICAgICAgZS5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiBfX1BSSVZBVEVfZ3VhcmRlZENoYW5nZUxpc3RlbmVyKHRoaXMuY3VycmVudFVzZXIpKSk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IF9fUFJJVkFURV9hd2FpdE5leHRUb2tlbiA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSByO1xuICAgICAgICAgICAgZS5lbnF1ZXVlUmV0cnlhYmxlKChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdC5wcm9taXNlLCBhd2FpdCBfX1BSSVZBVEVfZ3VhcmRlZENoYW5nZUxpc3RlbmVyKHRoaXMuY3VycmVudFVzZXIpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9LCBfX1BSSVZBVEVfcmVnaXN0ZXJBdXRoID0gZSA9PiB7XG4gICAgICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJGaXJlYmFzZUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyXCIsIFwiQXV0aCBkZXRlY3RlZFwiKSwgdGhpcy5hdXRoID0gZSwgXG4gICAgICAgICAgICB0aGlzLm8gJiYgKHRoaXMuYXV0aC5hZGRBdXRoVG9rZW5MaXN0ZW5lcih0aGlzLm8pLCBfX1BSSVZBVEVfYXdhaXROZXh0VG9rZW4oKSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudC5vbkluaXQoKGUgPT4gX19QUklWQVRFX3JlZ2lzdGVyQXV0aChlKSkpLCBcbiAgICAgICAgLy8gT3VyIHVzZXJzIGNhbiBpbml0aWFsaXplIEF1dGggcmlnaHQgYWZ0ZXIgRmlyZXN0b3JlLCBzbyB3ZSBnaXZlIGl0XG4gICAgICAgIC8vIGEgY2hhbmNlIHRvIHJlZ2lzdGVyIGl0c2VsZiB3aXRoIHRoZSBjb21wb25lbnQgZnJhbWV3b3JrIGJlZm9yZSB3ZVxuICAgICAgICAvLyBkZXRlcm1pbmUgd2hldGhlciB0byBzdGFydCB1cCBpbiB1bmF1dGhlbnRpY2F0ZWQgbW9kZS5cbiAgICAgICAgc2V0VGltZW91dCgoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmF1dGgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdGhpcy50LmdldEltbWVkaWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsOiAhMFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGUgPyBfX1BSSVZBVEVfcmVnaXN0ZXJBdXRoKGUpIDogKFxuICAgICAgICAgICAgICAgIC8vIElmIGF1dGggaXMgc3RpbGwgbm90IGF2YWlsYWJsZSwgcHJvY2VlZCB3aXRoIGBudWxsYCB1c2VyXG4gICAgICAgICAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiRmlyZWJhc2VBdXRoQ3JlZGVudGlhbHNQcm92aWRlclwiLCBcIkF1dGggbm90IHlldCBkZXRlY3RlZFwiKSwgXG4gICAgICAgICAgICAgICAgci5yZXNvbHZlKCksIHIgPSBuZXcgX19QUklWQVRFX0RlZmVycmVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSksIDApLCBfX1BSSVZBVEVfYXdhaXROZXh0VG9rZW4oKTtcbiAgICB9XG4gICAgZ2V0VG9rZW4oKSB7XG4gICAgICAgIC8vIFRha2Ugbm90ZSBvZiB0aGUgY3VycmVudCB2YWx1ZSBvZiB0aGUgdG9rZW5Db3VudGVyIHNvIHRoYXQgdGhpcyBtZXRob2RcbiAgICAgICAgLy8gY2FuIGZhaWwgKHdpdGggYW4gQUJPUlRFRCBlcnJvcikgaWYgdGhlcmUgaXMgYSB0b2tlbiBjaGFuZ2Ugd2hpbGUgdGhlXG4gICAgICAgIC8vIHJlcXVlc3QgaXMgb3V0c3RhbmRpbmcuXG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmksIHQgPSB0aGlzLmZvcmNlUmVmcmVzaDtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yY2VSZWZyZXNoID0gITEsIHRoaXMuYXV0aCA/IHRoaXMuYXV0aC5nZXRUb2tlbih0KS50aGVuKCh0ID0+IFxuICAgICAgICAvLyBDYW5jZWwgdGhlIHJlcXVlc3Qgc2luY2UgdGhlIHRva2VuIGNoYW5nZWQgd2hpbGUgdGhlIHJlcXVlc3Qgd2FzXG4gICAgICAgIC8vIG91dHN0YW5kaW5nIHNvIHRoZSByZXNwb25zZSBpcyBwb3RlbnRpYWxseSBmb3IgYSBwcmV2aW91cyB1c2VyICh3aGljaFxuICAgICAgICAvLyB1c2VyLCB3ZSBjYW4ndCBiZSBzdXJlKS5cbiAgICAgICAgdGhpcy5pICE9PSBlID8gKF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkZpcmViYXNlQXV0aENyZWRlbnRpYWxzUHJvdmlkZXJcIiwgXCJnZXRUb2tlbiBhYm9ydGVkIGR1ZSB0byB0b2tlbiBjaGFuZ2UuXCIpLCBcbiAgICAgICAgdGhpcy5nZXRUb2tlbigpKSA6IHQgPyAoX19QUklWQVRFX2hhcmRBc3NlcnQoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdC5hY2Nlc3NUb2tlbiwgMzE4MzcsIHtcbiAgICAgICAgICAgIGw6IHRcbiAgICAgICAgfSksIG5ldyBfX1BSSVZBVEVfT0F1dGhUb2tlbih0LmFjY2Vzc1Rva2VuLCB0aGlzLmN1cnJlbnRVc2VyKSkgOiBudWxsKSkgOiBQcm9taXNlLnJlc29sdmUobnVsbCk7XG4gICAgfVxuICAgIGludmFsaWRhdGVUb2tlbigpIHtcbiAgICAgICAgdGhpcy5mb3JjZVJlZnJlc2ggPSAhMDtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7XG4gICAgICAgIHRoaXMuYXV0aCAmJiB0aGlzLm8gJiYgdGhpcy5hdXRoLnJlbW92ZUF1dGhUb2tlbkxpc3RlbmVyKHRoaXMubyksIHRoaXMubyA9IHZvaWQgMDtcbiAgICB9XG4gICAgLy8gQXV0aC5nZXRVaWQoKSBjYW4gcmV0dXJuIG51bGwgZXZlbiB3aXRoIGEgdXNlciBsb2dnZWQgaW4uIEl0IGlzIGJlY2F1c2VcbiAgICAvLyBnZXRVaWQoKSBpcyBzeW5jaHJvbm91cywgYnV0IHRoZSBhdXRoIGNvZGUgcG9wdWxhdGluZyBVaWQgaXMgYXN5bmNocm9ub3VzLlxuICAgIC8vIFRoaXMgbWV0aG9kIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBpbiB0aGUgQXV0aFRva2VuTGlzdGVuZXIgY2FsbGJhY2tcbiAgICAvLyB0byBndWFyYW50ZWUgdG8gZ2V0IHRoZSBhY3R1YWwgdXNlci5cbiAgICB1KCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5hdXRoICYmIHRoaXMuYXV0aC5nZXRVaWQoKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9oYXJkQXNzZXJ0KG51bGwgPT09IGUgfHwgXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSwgMjA1NSwge1xuICAgICAgICAgICAgaDogZVxuICAgICAgICB9KSwgbmV3IFVzZXIoZSk7XG4gICAgfVxufVxuXG4vKlxuICogRmlyc3RQYXJ0eVRva2VuIHByb3ZpZGVzIGEgZnJlc2ggdG9rZW4gZWFjaCB0aW1lIGl0cyB2YWx1ZVxuICogaXMgcmVxdWVzdGVkLCBiZWNhdXNlIGlmIHRoZSB0b2tlbiBpcyB0b28gb2xkLCByZXF1ZXN0cyB3aWxsIGJlIHJlamVjdGVkLlxuICogVGVjaG5pY2FsbHkgdGhpcyBtYXkgbm8gbG9uZ2VyIGJlIG5lY2Vzc2FyeSBzaW5jZSB0aGUgU0RLIHNob3VsZCBncmFjZWZ1bGx5XG4gKiByZWNvdmVyIGZyb20gdW5hdXRoZW50aWNhdGVkIGVycm9ycyAoc2VlIGIvMzMxNDc4MTggZm9yIGNvbnRleHQpLCBidXQgaXQnc1xuICogc2FmZXIgdG8ga2VlcCB0aGUgaW1wbGVtZW50YXRpb24gYXMtaXMuXG4gKi8gY2xhc3MgX19QUklWQVRFX0ZpcnN0UGFydHlUb2tlbiB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbikge1xuICAgICAgICB0aGlzLlAgPSBlLCB0aGlzLlQgPSB0LCB0aGlzLkkgPSBuLCB0aGlzLnR5cGUgPSBcIkZpcnN0UGFydHlcIiwgdGhpcy51c2VyID0gVXNlci5GSVJTVF9QQVJUWSwgXG4gICAgICAgIHRoaXMuQSA9IG5ldyBNYXA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgYW4gYXV0aG9yaXphdGlvbiB0b2tlbiwgdXNpbmcgYSBwcm92aWRlZCBmYWN0b3J5IGZ1bmN0aW9uLCBvciByZXR1cm5cbiAgICAgKiBudWxsLlxuICAgICAqLyAgICBSKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5JID8gdGhpcy5JKCkgOiBudWxsO1xuICAgIH1cbiAgICBnZXQgaGVhZGVycygpIHtcbiAgICAgICAgdGhpcy5BLnNldChcIlgtR29vZy1BdXRoVXNlclwiLCB0aGlzLlApO1xuICAgICAgICAvLyBVc2UgYXJyYXkgbm90YXRpb24gdG8gcHJldmVudCBtaW5pZmljYXRpb25cbiAgICAgICAgY29uc3QgZSA9IHRoaXMuUigpO1xuICAgICAgICByZXR1cm4gZSAmJiB0aGlzLkEuc2V0KFwiQXV0aG9yaXphdGlvblwiLCBlKSwgdGhpcy5UICYmIHRoaXMuQS5zZXQoXCJYLUdvb2ctSWFtLUF1dGhvcml6YXRpb24tVG9rZW5cIiwgdGhpcy5UKSwgXG4gICAgICAgIHRoaXMuQTtcbiAgICB9XG59XG5cbi8qXG4gKiBQcm92aWRlcyB1c2VyIGNyZWRlbnRpYWxzIHJlcXVpcmVkIGZvciB0aGUgRmlyZXN0b3JlIEphdmFTY3JpcHQgU0RLXG4gKiB0byBhdXRoZW50aWNhdGUgdGhlIHVzZXIsIHVzaW5nIHRlY2huaXF1ZSB0aGF0IGlzIG9ubHkgYXZhaWxhYmxlXG4gKiB0byBhcHBsaWNhdGlvbnMgaG9zdGVkIGJ5IEdvb2dsZS5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfRmlyc3RQYXJ0eUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuKSB7XG4gICAgICAgIHRoaXMuUCA9IGUsIHRoaXMuVCA9IHQsIHRoaXMuSSA9IG47XG4gICAgfVxuICAgIGdldFRva2VuKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5ldyBfX1BSSVZBVEVfRmlyc3RQYXJ0eVRva2VuKHRoaXMuUCwgdGhpcy5ULCB0aGlzLkkpKTtcbiAgICB9XG4gICAgc3RhcnQoZSwgdCkge1xuICAgICAgICAvLyBGaXJlIHdpdGggaW5pdGlhbCB1aWQuXG4gICAgICAgIGUuZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gdChVc2VyLkZJUlNUX1BBUlRZKSkpO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHt9XG4gICAgaW52YWxpZGF0ZVRva2VuKCkge31cbn1cblxuY2xhc3MgQXBwQ2hlY2tUb2tlbiB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLnZhbHVlID0gZSwgdGhpcy50eXBlID0gXCJBcHBDaGVja1wiLCB0aGlzLmhlYWRlcnMgPSBuZXcgTWFwLCBlICYmIGUubGVuZ3RoID4gMCAmJiB0aGlzLmhlYWRlcnMuc2V0KFwieC1maXJlYmFzZS1hcHBjaGVja1wiLCB0aGlzLnZhbHVlKTtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9GaXJlYmFzZUFwcENoZWNrVG9rZW5Qcm92aWRlciB7XG4gICAgY29uc3RydWN0b3IodCwgbikge1xuICAgICAgICB0aGlzLlYgPSBuLCB0aGlzLmZvcmNlUmVmcmVzaCA9ICExLCB0aGlzLmFwcENoZWNrID0gbnVsbCwgdGhpcy5tID0gbnVsbCwgdGhpcy5wID0gbnVsbCwgXG4gICAgICAgIF9pc0ZpcmViYXNlU2VydmVyQXBwKHQpICYmIHQuc2V0dGluZ3MuYXBwQ2hlY2tUb2tlbiAmJiAodGhpcy5wID0gdC5zZXR0aW5ncy5hcHBDaGVja1Rva2VuKTtcbiAgICB9XG4gICAgc3RhcnQoZSwgdCkge1xuICAgICAgICBfX1BSSVZBVEVfaGFyZEFzc2VydCh2b2lkIDAgPT09IHRoaXMubywgMzUxMik7XG4gICAgICAgIGNvbnN0IG9uVG9rZW5DaGFuZ2VkID0gZSA9PiB7XG4gICAgICAgICAgICBudWxsICE9IGUuZXJyb3IgJiYgX19QUklWQVRFX2xvZ0RlYnVnKFwiRmlyZWJhc2VBcHBDaGVja1Rva2VuUHJvdmlkZXJcIiwgYEVycm9yIGdldHRpbmcgQXBwIENoZWNrIHRva2VuOyB1c2luZyBwbGFjZWhvbGRlciB0b2tlbiBpbnN0ZWFkLiBFcnJvcjogJHtlLmVycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICBjb25zdCBuID0gZS50b2tlbiAhPT0gdGhpcy5tO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubSA9IGUudG9rZW4sIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkZpcmViYXNlQXBwQ2hlY2tUb2tlblByb3ZpZGVyXCIsIGBSZWNlaXZlZCAke24gPyBcIm5ld1wiIDogXCJleGlzdGluZ1wifSB0b2tlbi5gKSwgXG4gICAgICAgICAgICBuID8gdChlLnRva2VuKSA6IFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm8gPSB0ID0+IHtcbiAgICAgICAgICAgIGUuZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gb25Ub2tlbkNoYW5nZWQodCkpKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgX19QUklWQVRFX3JlZ2lzdGVyQXBwQ2hlY2sgPSBlID0+IHtcbiAgICAgICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkZpcmViYXNlQXBwQ2hlY2tUb2tlblByb3ZpZGVyXCIsIFwiQXBwQ2hlY2sgZGV0ZWN0ZWRcIiksIHRoaXMuYXBwQ2hlY2sgPSBlLCBcbiAgICAgICAgICAgIHRoaXMubyAmJiB0aGlzLmFwcENoZWNrLmFkZFRva2VuTGlzdGVuZXIodGhpcy5vKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5WLm9uSW5pdCgoZSA9PiBfX1BSSVZBVEVfcmVnaXN0ZXJBcHBDaGVjayhlKSkpLCBcbiAgICAgICAgLy8gT3VyIHVzZXJzIGNhbiBpbml0aWFsaXplIEFwcENoZWNrIGFmdGVyIEZpcmVzdG9yZSwgc28gd2UgZ2l2ZSBpdFxuICAgICAgICAvLyBhIGNoYW5jZSB0byByZWdpc3RlciBpdHNlbGYgd2l0aCB0aGUgY29tcG9uZW50IGZyYW1ld29yay5cbiAgICAgICAgc2V0VGltZW91dCgoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmFwcENoZWNrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuVi5nZXRJbW1lZGlhdGUoe1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogITBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBlID8gX19QUklWQVRFX3JlZ2lzdGVyQXBwQ2hlY2soZSkgOiBcbiAgICAgICAgICAgICAgICAvLyBJZiBBcHBDaGVjayBpcyBzdGlsbCBub3QgYXZhaWxhYmxlLCBwcm9jZWVkIHdpdGhvdXQgaXQuXG4gICAgICAgICAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiRmlyZWJhc2VBcHBDaGVja1Rva2VuUHJvdmlkZXJcIiwgXCJBcHBDaGVjayBub3QgeWV0IGRldGVjdGVkXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSwgMCk7XG4gICAgfVxuICAgIGdldFRva2VuKCkge1xuICAgICAgICBpZiAodGhpcy5wKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5ldyBBcHBDaGVja1Rva2VuKHRoaXMucCkpO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5mb3JjZVJlZnJlc2g7XG4gICAgICAgIHJldHVybiB0aGlzLmZvcmNlUmVmcmVzaCA9ICExLCB0aGlzLmFwcENoZWNrID8gdGhpcy5hcHBDaGVjay5nZXRUb2tlbihlKS50aGVuKChlID0+IGUgPyAoX19QUklWQVRFX2hhcmRBc3NlcnQoXCJzdHJpbmdcIiA9PSB0eXBlb2YgZS50b2tlbiwgNDQ1NTgsIHtcbiAgICAgICAgICAgIHRva2VuUmVzdWx0OiBlXG4gICAgICAgIH0pLCB0aGlzLm0gPSBlLnRva2VuLCBuZXcgQXBwQ2hlY2tUb2tlbihlLnRva2VuKSkgOiBudWxsKSkgOiBQcm9taXNlLnJlc29sdmUobnVsbCk7XG4gICAgfVxuICAgIGludmFsaWRhdGVUb2tlbigpIHtcbiAgICAgICAgdGhpcy5mb3JjZVJlZnJlc2ggPSAhMDtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7XG4gICAgICAgIHRoaXMuYXBwQ2hlY2sgJiYgdGhpcy5vICYmIHRoaXMuYXBwQ2hlY2sucmVtb3ZlVG9rZW5MaXN0ZW5lcih0aGlzLm8pLCB0aGlzLm8gPSB2b2lkIDA7XG4gICAgfVxufVxuXG4vKipcbiAqIEFuIEFwcENoZWNrIHRva2VuIHByb3ZpZGVyIHRoYXQgYWx3YXlzIHlpZWxkcyBhbiBlbXB0eSB0b2tlbi5cbiAqIEBpbnRlcm5hbFxuICovIGNsYXNzIF9fUFJJVkFURV9FbXB0eUFwcENoZWNrVG9rZW5Qcm92aWRlciB7XG4gICAgZ2V0VG9rZW4oKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IEFwcENoZWNrVG9rZW4oXCJcIikpO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9rZW4oKSB7fVxuICAgIHN0YXJ0KGUsIHQpIHt9XG4gICAgc2h1dGRvd24oKSB7fVxufVxuXG4vKipcbiAqIEJ1aWxkcyBhIENyZWRlbnRpYWxzUHJvdmlkZXIgZGVwZW5kaW5nIG9uIHRoZSB0eXBlIG9mXG4gKiB0aGUgY3JlZGVudGlhbHMgcGFzc2VkIGluLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBHZW5lcmF0ZXMgYG5CeXRlc2Agb2YgcmFuZG9tIGJ5dGVzLlxuICpcbiAqIElmIGBuQnl0ZXMgPCAwYCAsIGFuIGVycm9yIHdpbGwgYmUgdGhyb3duLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfcmFuZG9tQnl0ZXMoZSkge1xuICAgIC8vIFBvbHlmaWxscyBmb3IgSUUgYW5kIFdlYldvcmtlciBieSB1c2luZyBgc2VsZmAgYW5kIGBtc0NyeXB0b2Agd2hlbiBgY3J5cHRvYCBpcyBub3QgYXZhaWxhYmxlLlxuICAgIGNvbnN0IHQgPSBcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIHNlbGYgJiYgKHNlbGYuY3J5cHRvIHx8IHNlbGYubXNDcnlwdG8pLCBuID0gbmV3IFVpbnQ4QXJyYXkoZSk7XG4gICAgaWYgKHQgJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiB0LmdldFJhbmRvbVZhbHVlcykgdC5nZXRSYW5kb21WYWx1ZXMobik7IGVsc2UgXG4gICAgLy8gRmFsbHMgYmFjayB0byBNYXRoLnJhbmRvbVxuICAgIGZvciAobGV0IHQgPSAwOyB0IDwgZTsgdCsrKSBuW3RdID0gTWF0aC5mbG9vcigyNTYgKiBNYXRoLnJhbmRvbSgpKTtcbiAgICByZXR1cm4gbjtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSB1dGlsaXR5IGNsYXNzIGZvciBnZW5lcmF0aW5nIHVuaXF1ZSBhbHBoYW51bWVyaWMgSURzIG9mIGEgc3BlY2lmaWVkIGxlbmd0aC5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqIEV4cG9ydGVkIGludGVybmFsbHkgZm9yIHRlc3RpbmcgcHVycG9zZXMuXG4gKi8gY2xhc3MgX19QUklWQVRFX0F1dG9JZCB7XG4gICAgc3RhdGljIG5ld0lkKCkge1xuICAgICAgICAvLyBBbHBoYW51bWVyaWMgY2hhcmFjdGVyc1xuICAgICAgICBjb25zdCBlID0gXCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OVwiLCB0ID0gNjIgKiBNYXRoLmZsb29yKDI1NiAvIDYyKTtcbiAgICAgICAgLy8gVGhlIGxhcmdlc3QgYnl0ZSB2YWx1ZSB0aGF0IGlzIGEgbXVsdGlwbGUgb2YgYGNoYXIubGVuZ3RoYC5cbiAgICAgICAgICAgICAgICBsZXQgbiA9IFwiXCI7XG4gICAgICAgIGZvciAoO24ubGVuZ3RoIDwgMjA7ICkge1xuICAgICAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9yYW5kb21CeXRlcyg0MCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHIubGVuZ3RoOyArK2kpIFxuICAgICAgICAgICAgLy8gT25seSBhY2NlcHQgdmFsdWVzIHRoYXQgYXJlIFswLCBtYXhNdWx0aXBsZSksIHRoaXMgZW5zdXJlcyB0aGV5IGNhblxuICAgICAgICAgICAgLy8gYmUgZXZlbmx5IG1hcHBlZCB0byBpbmRpY2VzIG9mIGBjaGFyc2AgdmlhIGEgbW9kdWxvIG9wZXJhdGlvbi5cbiAgICAgICAgICAgIG4ubGVuZ3RoIDwgMjAgJiYgcltpXSA8IHQgJiYgKG4gKz0gZS5jaGFyQXQocltpXSAlIDYyKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG47XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihlLCB0KSB7XG4gICAgcmV0dXJuIGUgPCB0ID8gLTEgOiBlID4gdCA/IDEgOiAwO1xufVxuXG4vKiogQ29tcGFyZSBzdHJpbmdzIGluIFVURi04IGVuY29kZWQgYnl0ZSBvcmRlciAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfY29tcGFyZVV0ZjhTdHJpbmdzKGUsIHQpIHtcbiAgICAvLyBGaW5kIHRoZSBmaXJzdCBkaWZmZXJpbmcgY2hhcmFjdGVyIChhLmsuYS4gXCJVVEYtMTYgY29kZSB1bml0XCIpIGluIHRoZSB0d28gc3RyaW5ncyBhbmQsXG4gICAgLy8gaWYgZm91bmQsIHVzZSB0aGF0IGNoYXJhY3RlciB0byBkZXRlcm1pbmUgdGhlIHJlbGF0aXZlIG9yZGVyaW5nIG9mIHRoZSB0d28gc3RyaW5ncyBhcyBhXG4gICAgLy8gd2hvbGUuIENvbXBhcmluZyBVVEYtMTYgc3RyaW5ncyBpbiBVVEYtOCBieXRlIG9yZGVyIGNhbiBiZSBkb25lIHNpbXBseSBhbmQgZWZmaWNpZW50bHkgYnlcbiAgICAvLyBjb21wYXJpbmcgdGhlIFVURi0xNiBjb2RlIHVuaXRzIChjaGFycykuIFRoaXMgc2VyZW5kaXBpdG91c2x5IHdvcmtzIGJlY2F1c2Ugb2YgdGhlIHdheSBVVEYtOFxuICAgIC8vIGFuZCBVVEYtMTYgaGFwcGVuIHRvIHJlcHJlc2VudCBVbmljb2RlIGNvZGUgcG9pbnRzLlxuICAgIC8vIEFmdGVyIGZpbmRpbmcgdGhlIGZpcnN0IHBhaXIgb2YgZGlmZmVyaW5nIGNoYXJhY3RlcnMsIHRoZXJlIGFyZSB0d28gY2FzZXM6XG4gICAgLy8gQ2FzZSAxOiBCb3RoIGNoYXJhY3RlcnMgYXJlIG5vbi1zdXJyb2dhdGVzIChjb2RlIHBvaW50cyBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gMHhGRkZGKSBvclxuICAgIC8vIGJvdGggYXJlIHN1cnJvZ2F0ZXMgZnJvbSBhIHN1cnJvZ2F0ZSBwYWlyICh0aGF0IGNvbGxlY3RpdmVseSByZXByZXNlbnQgY29kZSBwb2ludHMgZ3JlYXRlclxuICAgIC8vIHRoYW4gMHhGRkZGKS4gSW4gdGhpcyBjYXNlIHRoZWlyIG51bWVyaWMgb3JkZXIgYXMgVVRGLTE2IGNvZGUgdW5pdHMgaXMgdGhlIHNhbWUgYXMgdGhlXG4gICAgLy8gbGV4aWNvZ3JhcGhpY2FsIG9yZGVyIG9mIHRoZWlyIGNvcnJlc3BvbmRpbmcgVVRGLTggYnl0ZSBzZXF1ZW5jZXMuIEEgZGlyZWN0IGNvbXBhcmlzb24gaXNcbiAgICAvLyBzdWZmaWNpZW50LlxuICAgIC8vIENhc2UgMjogT25lIGNoYXJhY3RlciBpcyBhIHN1cnJvZ2F0ZSBhbmQgdGhlIG90aGVyIGlzIG5vdC4gSW4gdGhpcyBjYXNlIHRoZSBzdXJyb2dhdGUtXG4gICAgLy8gY29udGFpbmluZyBzdHJpbmcgaXMgYWx3YXlzIG9yZGVyZWQgYWZ0ZXIgdGhlIG5vbi1zdXJyb2dhdGUuIFRoaXMgaXMgYmVjYXVzZSBzdXJyb2dhdGVzIGFyZVxuICAgIC8vIHVzZWQgdG8gcmVwcmVzZW50IGNvZGUgcG9pbnRzIGdyZWF0ZXIgdGhhbiAweEZGRkYgd2hpY2ggaGF2ZSA0LWJ5dGUgVVRGLTggcmVwcmVzZW50YXRpb25zXG4gICAgLy8gYW5kIGFyZSBsZXhpY29ncmFwaGljYWxseSBncmVhdGVyIHRoYW4gdGhlIDEsIDIsIG9yIDMtYnl0ZSByZXByZXNlbnRhdGlvbnMgb2YgY29kZSBwb2ludHNcbiAgICAvLyBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gMHhGRkZGLlxuICAgIC8vIEFuIGV4YW1wbGUgb2Ygd2h5IENhc2UgMiBpcyByZXF1aXJlZCBpcyBjb21wYXJpbmcgdGhlIGZvbGxvd2luZyB0d28gVW5pY29kZSBjb2RlIHBvaW50czpcbiAgICAvLyB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tLS0tLXxcbiAgICAvLyB8IE5hbWUgICAgICAgICAgICAgICAgICB8IENvZGUgUG9pbnQgfCBVVEYtOCBFbmNvZGluZyAgICAgIHwgVVRGLTE2IEVuY29kaW5nIHxcbiAgICAvLyB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tLS0tLXxcbiAgICAvLyB8IFJlcGxhY2VtZW50IENoYXJhY3RlciB8IFUrRkZGRCAgICAgfCAweEVGIDB4QkYgMHhCRCAgICAgIHwgMHhGRkZEICAgICAgICAgIHxcbiAgICAvLyB8IEdyaW5uaW5nIEZhY2UgICAgICAgICB8IFUrMUY2MDAgICAgfCAweEYwIDB4OUYgMHg5OCAweDgwIHwgMHhEODNEIDB4REUwMCAgIHxcbiAgICAvLyB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tLS0tLXxcbiAgICAvLyBBIGxleGljb2dyYXBoaWNhbCBjb21wYXJpc29uIG9mIHRoZSBVVEYtOCBlbmNvZGluZ3Mgb2YgdGhlc2UgY29kZSBwb2ludHMgd291bGQgb3JkZXJcbiAgICAvLyBcIlJlcGxhY2VtZW50IENoYXJhY3RlclwiIF9iZWZvcmVfIFwiR3Jpbm5pbmcgRmFjZVwiIGJlY2F1c2UgMHhFRiBpcyBsZXNzIHRoYW4gMHhGMC4gSG93ZXZlciwgYVxuICAgIC8vIGRpcmVjdCBjb21wYXJpc29uIG9mIHRoZSBVVEYtMTYgY29kZSB1bml0cywgYXMgd291bGQgYmUgZG9uZSBpbiBjYXNlIDEsIHdvdWxkIGVycm9uZW91c2x5XG4gICAgLy8gcHJvZHVjZSB0aGUgX29wcG9zaXRlXyBvcmRlcmluZywgYmVjYXVzZSAweEZGRkQgaXMgX2dyZWF0ZXIgdGhhbl8gMHhEODNELiBBcyBpdCB0dXJucyBvdXQsXG4gICAgLy8gdGhpcyByZWxhdGl2ZSBvcmRlcmluZyBob2xkcyBmb3IgYWxsIGNvbXBhcmlzb25zIG9mIFVURi0xNiBjb2RlIHBvaW50cyByZXF1aXJpbmcgYSBzdXJyb2dhdGVcbiAgICAvLyBwYWlyIHdpdGggdGhvc2UgdGhhdCBkbyBub3QuXG4gICAgY29uc3QgbiA9IE1hdGgubWluKGUubGVuZ3RoLCB0Lmxlbmd0aCk7XG4gICAgZm9yIChsZXQgciA9IDA7IHIgPCBuOyByKyspIHtcbiAgICAgICAgY29uc3QgbiA9IGUuY2hhckF0KHIpLCBpID0gdC5jaGFyQXQocik7XG4gICAgICAgIGlmIChuICE9PSBpKSByZXR1cm4gX19QUklWQVRFX2lzU3Vycm9nYXRlKG4pID09PSBfX1BSSVZBVEVfaXNTdXJyb2dhdGUoaSkgPyBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihuLCBpKSA6IF9fUFJJVkFURV9pc1N1cnJvZ2F0ZShuKSA/IDEgOiAtMTtcbiAgICB9XG4gICAgLy8gVXNlIHRoZSBsZW5ndGhzIG9mIHRoZSBzdHJpbmdzIHRvIGRldGVybWluZSB0aGUgb3ZlcmFsbCBjb21wYXJpc29uIHJlc3VsdCBzaW5jZSBlaXRoZXIgdGhlXG4gICAgLy8gc3RyaW5ncyB3ZXJlIGVxdWFsIG9yIG9uZSBpcyBhIHByZWZpeCBvZiB0aGUgb3RoZXIuXG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihlLmxlbmd0aCwgdC5sZW5ndGgpO1xufVxuXG5jb25zdCBCID0gNTUyOTYsIEwgPSA1NzM0MztcblxuZnVuY3Rpb24gX19QUklWQVRFX2lzU3Vycm9nYXRlKGUpIHtcbiAgICBjb25zdCB0ID0gZS5jaGFyQ29kZUF0KDApO1xuICAgIHJldHVybiB0ID49IEIgJiYgdCA8PSBMO1xufVxuXG4vKiogSGVscGVyIHRvIGNvbXBhcmUgYXJyYXlzIHVzaW5nIGlzRXF1YWwoKS4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2FycmF5RXF1YWxzKGUsIHQsIG4pIHtcbiAgICByZXR1cm4gZS5sZW5ndGggPT09IHQubGVuZ3RoICYmIGUuZXZlcnkoKChlLCByKSA9PiBuKGUsIHRbcl0pKSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgaW1tZWRpYXRlIGxleGljb2dyYXBoaWNhbGx5LWZvbGxvd2luZyBzdHJpbmcuIFRoaXMgaXMgdXNlZnVsIHRvXG4gKiBjb25zdHJ1Y3QgYW4gaW5jbHVzaXZlIHJhbmdlIGZvciBpbmRleGVkZGIgaXRlcmF0b3JzLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9pbW1lZGlhdGVTdWNjZXNzb3IoZSkge1xuICAgIC8vIFJldHVybiB0aGUgaW5wdXQgc3RyaW5nLCB3aXRoIGFuIGFkZGl0aW9uYWwgTlVMIGJ5dGUgYXBwZW5kZWQuXG4gICAgcmV0dXJuIGUgKyBcIlxcMFwiO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBrID0gXCJfX25hbWVfX1wiO1xuXG4vKipcbiAqIFBhdGggcmVwcmVzZW50cyBhbiBvcmRlcmVkIHNlcXVlbmNlIG9mIHN0cmluZyBzZWdtZW50cy5cbiAqLyBjbGFzcyBCYXNlUGF0aCB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbikge1xuICAgICAgICB2b2lkIDAgPT09IHQgPyB0ID0gMCA6IHQgPiBlLmxlbmd0aCAmJiBmYWlsKDYzNywge1xuICAgICAgICAgICAgb2Zmc2V0OiB0LFxuICAgICAgICAgICAgcmFuZ2U6IGUubGVuZ3RoXG4gICAgICAgIH0pLCB2b2lkIDAgPT09IG4gPyBuID0gZS5sZW5ndGggLSB0IDogbiA+IGUubGVuZ3RoIC0gdCAmJiBmYWlsKDE3NDYsIHtcbiAgICAgICAgICAgIGxlbmd0aDogbixcbiAgICAgICAgICAgIHJhbmdlOiBlLmxlbmd0aCAtIHRcbiAgICAgICAgfSksIHRoaXMuc2VnbWVudHMgPSBlLCB0aGlzLm9mZnNldCA9IHQsIHRoaXMubGVuID0gbjtcbiAgICB9XG4gICAgZ2V0IGxlbmd0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGVuO1xuICAgIH1cbiAgICBpc0VxdWFsKGUpIHtcbiAgICAgICAgcmV0dXJuIDAgPT09IEJhc2VQYXRoLmNvbXBhcmF0b3IodGhpcywgZSk7XG4gICAgfVxuICAgIGNoaWxkKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuc2VnbWVudHMuc2xpY2UodGhpcy5vZmZzZXQsIHRoaXMubGltaXQoKSk7XG4gICAgICAgIHJldHVybiBlIGluc3RhbmNlb2YgQmFzZVBhdGggPyBlLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgdC5wdXNoKGUpO1xuICAgICAgICB9KSkgOiB0LnB1c2goZSksIHRoaXMuY29uc3RydWN0KHQpO1xuICAgIH1cbiAgICAvKiogVGhlIGluZGV4IG9mIG9uZSBwYXN0IHRoZSBsYXN0IHNlZ21lbnQgb2YgdGhlIHBhdGguICovICAgIGxpbWl0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vZmZzZXQgKyB0aGlzLmxlbmd0aDtcbiAgICB9XG4gICAgcG9wRmlyc3QoZSkge1xuICAgICAgICByZXR1cm4gZSA9IHZvaWQgMCA9PT0gZSA/IDEgOiBlLCB0aGlzLmNvbnN0cnVjdCh0aGlzLnNlZ21lbnRzLCB0aGlzLm9mZnNldCArIGUsIHRoaXMubGVuZ3RoIC0gZSk7XG4gICAgfVxuICAgIHBvcExhc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdCh0aGlzLnNlZ21lbnRzLCB0aGlzLm9mZnNldCwgdGhpcy5sZW5ndGggLSAxKTtcbiAgICB9XG4gICAgZmlyc3RTZWdtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWdtZW50c1t0aGlzLm9mZnNldF07XG4gICAgfVxuICAgIGxhc3RTZWdtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXQodGhpcy5sZW5ndGggLSAxKTtcbiAgICB9XG4gICAgZ2V0KGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VnbWVudHNbdGhpcy5vZmZzZXQgKyBlXTtcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIDAgPT09IHRoaXMubGVuZ3RoO1xuICAgIH1cbiAgICBpc1ByZWZpeE9mKGUpIHtcbiAgICAgICAgaWYgKGUubGVuZ3RoIDwgdGhpcy5sZW5ndGgpIHJldHVybiAhMTtcbiAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCB0aGlzLmxlbmd0aDsgdCsrKSBpZiAodGhpcy5nZXQodCkgIT09IGUuZ2V0KHQpKSByZXR1cm4gITE7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgaXNJbW1lZGlhdGVQYXJlbnRPZihlKSB7XG4gICAgICAgIGlmICh0aGlzLmxlbmd0aCArIDEgIT09IGUubGVuZ3RoKSByZXR1cm4gITE7XG4gICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgdGhpcy5sZW5ndGg7IHQrKykgaWYgKHRoaXMuZ2V0KHQpICE9PSBlLmdldCh0KSkgcmV0dXJuICExO1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIGZvckVhY2goZSkge1xuICAgICAgICBmb3IgKGxldCB0ID0gdGhpcy5vZmZzZXQsIG4gPSB0aGlzLmxpbWl0KCk7IHQgPCBuOyB0KyspIGUodGhpcy5zZWdtZW50c1t0XSk7XG4gICAgfVxuICAgIHRvQXJyYXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlZ21lbnRzLnNsaWNlKHRoaXMub2Zmc2V0LCB0aGlzLmxpbWl0KCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21wYXJlIDIgcGF0aHMgc2VnbWVudCBieSBzZWdtZW50LCBwcmlvcml0aXppbmcgbnVtZXJpYyBJRHNcbiAgICAgKiAoZS5nLiwgXCJfX2lkMTIzX19cIikgaW4gbnVtZXJpYyBhc2NlbmRpbmcgb3JkZXIsIGZvbGxvd2VkIGJ5IHN0cmluZ1xuICAgICAqIHNlZ21lbnRzIGluIGxleGljb2dyYXBoaWNhbCBvcmRlci5cbiAgICAgKi8gICAgc3RhdGljIGNvbXBhcmF0b3IoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gTWF0aC5taW4oZS5sZW5ndGgsIHQubGVuZ3RoKTtcbiAgICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCBuOyByKyspIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBCYXNlUGF0aC5jb21wYXJlU2VnbWVudHMoZS5nZXQociksIHQuZ2V0KHIpKTtcbiAgICAgICAgICAgIGlmICgwICE9PSBuKSByZXR1cm4gbjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IoZS5sZW5ndGgsIHQubGVuZ3RoKTtcbiAgICB9XG4gICAgc3RhdGljIGNvbXBhcmVTZWdtZW50cyhlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBCYXNlUGF0aC5pc051bWVyaWNJZChlKSwgciA9IEJhc2VQYXRoLmlzTnVtZXJpY0lkKHQpO1xuICAgICAgICByZXR1cm4gbiAmJiAhciA/IC0xIDogIW4gJiYgciA/IDEgOiBuICYmIHIgPyBCYXNlUGF0aC5leHRyYWN0TnVtZXJpY0lkKGUpLmNvbXBhcmUoQmFzZVBhdGguZXh0cmFjdE51bWVyaWNJZCh0KSkgOiBfX1BSSVZBVEVfY29tcGFyZVV0ZjhTdHJpbmdzKGUsIHQpO1xuICAgIH1cbiAgICAvLyBDaGVja3MgaWYgYSBzZWdtZW50IGlzIGEgbnVtZXJpYyBJRCAoc3RhcnRzIHdpdGggXCJfX2lkXCIgYW5kIGVuZHMgd2l0aCBcIl9fXCIpLlxuICAgIHN0YXRpYyBpc051bWVyaWNJZChlKSB7XG4gICAgICAgIHJldHVybiBlLnN0YXJ0c1dpdGgoXCJfX2lkXCIpICYmIGUuZW5kc1dpdGgoXCJfX1wiKTtcbiAgICB9XG4gICAgc3RhdGljIGV4dHJhY3ROdW1lcmljSWQoZSkge1xuICAgICAgICByZXR1cm4gSW50ZWdlci5mcm9tU3RyaW5nKGUuc3Vic3RyaW5nKDQsIGUubGVuZ3RoIC0gMikpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIHNsYXNoLXNlcGFyYXRlZCBwYXRoIGZvciBuYXZpZ2F0aW5nIHJlc291cmNlcyAoZG9jdW1lbnRzIGFuZCBjb2xsZWN0aW9ucylcbiAqIHdpdGhpbiBGaXJlc3RvcmUuXG4gKlxuICogQGludGVybmFsXG4gKi8gY2xhc3MgUmVzb3VyY2VQYXRoIGV4dGVuZHMgQmFzZVBhdGgge1xuICAgIGNvbnN0cnVjdChlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVzb3VyY2VQYXRoKGUsIHQsIG4pO1xuICAgIH1cbiAgICBjYW5vbmljYWxTdHJpbmcoKSB7XG4gICAgICAgIC8vIE5PVEU6IFRoZSBjbGllbnQgaXMgaWdub3JhbnQgb2YgYW55IHBhdGggc2VnbWVudHMgY29udGFpbmluZyBlc2NhcGVcbiAgICAgICAgLy8gc2VxdWVuY2VzIChlLmcuIF9faWQxMjNfXykgYW5kIGp1c3QgcGFzc2VzIHRoZW0gdGhyb3VnaCByYXcgKHRoZXkgZXhpc3RcbiAgICAgICAgLy8gZm9yIGxlZ2FjeSByZWFzb25zIGFuZCBzaG91bGQgbm90IGJlIHVzZWQgZnJlcXVlbnRseSkuXG4gICAgICAgIHJldHVybiB0aGlzLnRvQXJyYXkoKS5qb2luKFwiL1wiKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbm9uaWNhbFN0cmluZygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgcGF0aFxuICAgICAqIHdoZXJlIGVhY2ggcGF0aCBzZWdtZW50IGhhcyBiZWVuIGVuY29kZWQgd2l0aFxuICAgICAqIGBlbmNvZGVVUklDb21wb25lbnRgLlxuICAgICAqLyAgICB0b1VyaUVuY29kZWRTdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRvQXJyYXkoKS5tYXAoZW5jb2RlVVJJQ29tcG9uZW50KS5qb2luKFwiL1wiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHJlc291cmNlIHBhdGggZnJvbSB0aGUgZ2l2ZW4gc2xhc2gtZGVsaW1pdGVkIHN0cmluZy4gSWYgbXVsdGlwbGVcbiAgICAgKiBhcmd1bWVudHMgYXJlIHByb3ZpZGVkLCBhbGwgY29tcG9uZW50cyBhcmUgY29tYmluZWQuIExlYWRpbmcgYW5kIHRyYWlsaW5nXG4gICAgICogc2xhc2hlcyBmcm9tIGFsbCBjb21wb25lbnRzIGFyZSBpZ25vcmVkLlxuICAgICAqLyAgICBzdGF0aWMgZnJvbVN0cmluZyguLi5lKSB7XG4gICAgICAgIC8vIE5PVEU6IFRoZSBjbGllbnQgaXMgaWdub3JhbnQgb2YgYW55IHBhdGggc2VnbWVudHMgY29udGFpbmluZyBlc2NhcGVcbiAgICAgICAgLy8gc2VxdWVuY2VzIChlLmcuIF9faWQxMjNfXykgYW5kIGp1c3QgcGFzc2VzIHRoZW0gdGhyb3VnaCByYXcgKHRoZXkgZXhpc3RcbiAgICAgICAgLy8gZm9yIGxlZ2FjeSByZWFzb25zIGFuZCBzaG91bGQgbm90IGJlIHVzZWQgZnJlcXVlbnRseSkuXG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBuIG9mIGUpIHtcbiAgICAgICAgICAgIGlmIChuLmluZGV4T2YoXCIvL1wiKSA+PSAwKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoTi5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBzZWdtZW50ICgke259KS4gUGF0aHMgbXVzdCBub3QgY29udGFpbiAvLyBpbiB0aGVtLmApO1xuICAgICAgICAgICAgLy8gU3RyaXAgbGVhZGluZyBhbmQgdHJhaWxpbmcgc2xhc2hlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgIHQucHVzaCguLi5uLnNwbGl0KFwiL1wiKS5maWx0ZXIoKGUgPT4gZS5sZW5ndGggPiAwKSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUmVzb3VyY2VQYXRoKHQpO1xuICAgIH1cbiAgICBzdGF0aWMgZW1wdHlQYXRoKCkge1xuICAgICAgICByZXR1cm4gbmV3IFJlc291cmNlUGF0aChbXSk7XG4gICAgfVxufVxuXG5jb25zdCBxID0gL15bX2EtekEtWl1bX2EtekEtWjAtOV0qJC87XG5cbi8qKlxuICogQSBkb3Qtc2VwYXJhdGVkIHBhdGggZm9yIG5hdmlnYXRpbmcgc3ViLW9iamVjdHMgd2l0aGluIGEgZG9jdW1lbnQuXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyBGaWVsZFBhdGgkMSBleHRlbmRzIEJhc2VQYXRoIHtcbiAgICBjb25zdHJ1Y3QoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gbmV3IEZpZWxkUGF0aCQxKGUsIHQsIG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHN0cmluZyBjb3VsZCBiZSB1c2VkIGFzIGEgc2VnbWVudCBpbiBhIGZpZWxkIHBhdGhcbiAgICAgKiB3aXRob3V0IGVzY2FwaW5nLlxuICAgICAqLyAgICBzdGF0aWMgaXNWYWxpZElkZW50aWZpZXIoZSkge1xuICAgICAgICByZXR1cm4gcS50ZXN0KGUpO1xuICAgIH1cbiAgICBjYW5vbmljYWxTdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRvQXJyYXkoKS5tYXAoKGUgPT4gKGUgPSBlLnJlcGxhY2UoL1xcXFwvZywgXCJcXFxcXFxcXFwiKS5yZXBsYWNlKC9gL2csIFwiXFxcXGBcIiksIFxuICAgICAgICBGaWVsZFBhdGgkMS5pc1ZhbGlkSWRlbnRpZmllcihlKSB8fCAoZSA9IFwiYFwiICsgZSArIFwiYFwiKSwgZSkpKS5qb2luKFwiLlwiKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbm9uaWNhbFN0cmluZygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBmaWVsZCByZWZlcmVuY2VzIHRoZSBrZXkgb2YgYSBkb2N1bWVudC5cbiAgICAgKi8gICAgaXNLZXlGaWVsZCgpIHtcbiAgICAgICAgcmV0dXJuIDEgPT09IHRoaXMubGVuZ3RoICYmIHRoaXMuZ2V0KDApID09PSBrO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgZmllbGQgZGVzaWduYXRpbmcgdGhlIGtleSBvZiBhIGRvY3VtZW50LlxuICAgICAqLyAgICBzdGF0aWMga2V5RmllbGQoKSB7XG4gICAgICAgIHJldHVybiBuZXcgRmllbGRQYXRoJDEoWyBrIF0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBmaWVsZCBzdHJpbmcgZnJvbSB0aGUgZ2l2ZW4gc2VydmVyLWZvcm1hdHRlZCBzdHJpbmcuXG4gICAgICpcbiAgICAgKiAtIFNwbGl0dGluZyB0aGUgZW1wdHkgc3RyaW5nIGlzIG5vdCBhbGxvd2VkIChmb3Igbm93IGF0IGxlYXN0KS5cbiAgICAgKiAtIEVtcHR5IHNlZ21lbnRzIHdpdGhpbiB0aGUgc3RyaW5nIChlLmcuIGlmIHRoZXJlIGFyZSB0d28gY29uc2VjdXRpdmVcbiAgICAgKiAgIHNlcGFyYXRvcnMpIGFyZSBub3QgYWxsb3dlZC5cbiAgICAgKlxuICAgICAqIFRPRE8oYi8zNzI0NDE1Nyk6IHdlIHNob3VsZCBtYWtlIHRoaXMgbW9yZSBzdHJpY3QuIFJpZ2h0IG5vdywgaXQgYWxsb3dzXG4gICAgICogbm9uLWlkZW50aWZpZXIgcGF0aCBjb21wb25lbnRzLCBldmVuIGlmIHRoZXkgYXJlbid0IGVzY2FwZWQuXG4gICAgICovICAgIHN0YXRpYyBmcm9tU2VydmVyRm9ybWF0KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICBsZXQgbiA9IFwiXCIsIHIgPSAwO1xuICAgICAgICBjb25zdCBfX1BSSVZBVEVfYWRkQ3VycmVudFNlZ21lbnQgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoMCA9PT0gbi5sZW5ndGgpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihOLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIGZpZWxkIHBhdGggKCR7ZX0pLiBQYXRocyBtdXN0IG5vdCBiZSBlbXB0eSwgYmVnaW4gd2l0aCAnLicsIGVuZCB3aXRoICcuJywgb3IgY29udGFpbiAnLi4nYCk7XG4gICAgICAgICAgICB0LnB1c2gobiksIG4gPSBcIlwiO1xuICAgICAgICB9O1xuICAgICAgICBsZXQgaSA9ICExO1xuICAgICAgICBmb3IgKDtyIDwgZS5sZW5ndGg7ICkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGVbcl07XG4gICAgICAgICAgICBpZiAoXCJcXFxcXCIgPT09IHQpIHtcbiAgICAgICAgICAgICAgICBpZiAociArIDEgPT09IGUubGVuZ3RoKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoTi5JTlZBTElEX0FSR1VNRU5ULCBcIlBhdGggaGFzIHRyYWlsaW5nIGVzY2FwZSBjaGFyYWN0ZXI6IFwiICsgZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IGVbciArIDFdO1xuICAgICAgICAgICAgICAgIGlmIChcIlxcXFxcIiAhPT0gdCAmJiBcIi5cIiAhPT0gdCAmJiBcImBcIiAhPT0gdCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKE4uSU5WQUxJRF9BUkdVTUVOVCwgXCJQYXRoIGhhcyBpbnZhbGlkIGVzY2FwZSBzZXF1ZW5jZTogXCIgKyBlKTtcbiAgICAgICAgICAgICAgICBuICs9IHQsIHIgKz0gMjtcbiAgICAgICAgICAgIH0gZWxzZSBcImBcIiA9PT0gdCA/IChpID0gIWksIHIrKykgOiBcIi5cIiAhPT0gdCB8fCBpID8gKG4gKz0gdCwgcisrKSA6IChfX1BSSVZBVEVfYWRkQ3VycmVudFNlZ21lbnQoKSwgXG4gICAgICAgICAgICByKyspO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfX1BSSVZBVEVfYWRkQ3VycmVudFNlZ21lbnQoKSwgaSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKE4uSU5WQUxJRF9BUkdVTUVOVCwgXCJVbnRlcm1pbmF0ZWQgYCBpbiBwYXRoOiBcIiArIGUpO1xuICAgICAgICByZXR1cm4gbmV3IEZpZWxkUGF0aCQxKHQpO1xuICAgIH1cbiAgICBzdGF0aWMgZW1wdHlQYXRoKCkge1xuICAgICAgICByZXR1cm4gbmV3IEZpZWxkUGF0aCQxKFtdKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEBpbnRlcm5hbFxuICovIGNsYXNzIERvY3VtZW50S2V5IHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMucGF0aCA9IGU7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tUGF0aChlKSB7XG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRLZXkoUmVzb3VyY2VQYXRoLmZyb21TdHJpbmcoZSkpO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbU5hbWUoZSkge1xuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50S2V5KFJlc291cmNlUGF0aC5mcm9tU3RyaW5nKGUpLnBvcEZpcnN0KDUpKTtcbiAgICB9XG4gICAgc3RhdGljIGVtcHR5KCkge1xuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50S2V5KFJlc291cmNlUGF0aC5lbXB0eVBhdGgoKSk7XG4gICAgfVxuICAgIGdldCBjb2xsZWN0aW9uR3JvdXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhdGgucG9wTGFzdCgpLmxhc3RTZWdtZW50KCk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgdGhlIGRvY3VtZW50IGlzIGluIHRoZSBzcGVjaWZpZWQgY29sbGVjdGlvbklkLiAqLyAgICBoYXNDb2xsZWN0aW9uSWQoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXRoLmxlbmd0aCA+PSAyICYmIHRoaXMucGF0aC5nZXQodGhpcy5wYXRoLmxlbmd0aCAtIDIpID09PSBlO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0aGUgY29sbGVjdGlvbiBncm91cCAoaS5lLiB0aGUgbmFtZSBvZiB0aGUgcGFyZW50IGNvbGxlY3Rpb24pIGZvciB0aGlzIGtleS4gKi8gICAgZ2V0Q29sbGVjdGlvbkdyb3VwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXRoLmdldCh0aGlzLnBhdGgubGVuZ3RoIC0gMik7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRoZSBmdWxseSBxdWFsaWZpZWQgcGF0aCB0byB0aGUgcGFyZW50IGNvbGxlY3Rpb24uICovICAgIGdldENvbGxlY3Rpb25QYXRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXRoLnBvcExhc3QoKTtcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSBlICYmIDAgPT09IFJlc291cmNlUGF0aC5jb21wYXJhdG9yKHRoaXMucGF0aCwgZS5wYXRoKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhdGgudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgc3RhdGljIGNvbXBhcmF0b3IoZSwgdCkge1xuICAgICAgICByZXR1cm4gUmVzb3VyY2VQYXRoLmNvbXBhcmF0b3IoZS5wYXRoLCB0LnBhdGgpO1xuICAgIH1cbiAgICBzdGF0aWMgaXNEb2N1bWVudEtleShlKSB7XG4gICAgICAgIHJldHVybiBlLmxlbmd0aCAlIDIgPT0gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIG5ldyBkb2N1bWVudCBrZXkgd2l0aCB0aGUgZ2l2ZW4gc2VnbWVudHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2VnbWVudHMgLSBUaGUgc2VnbWVudHMgb2YgdGhlIHBhdGggdG8gdGhlIGRvY3VtZW50XG4gICAgICogQHJldHVybnMgQSBuZXcgaW5zdGFuY2Ugb2YgRG9jdW1lbnRLZXlcbiAgICAgKi8gICAgc3RhdGljIGZyb21TZWdtZW50cyhlKSB7XG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRLZXkobmV3IFJlc291cmNlUGF0aChlLnNsaWNlKCkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV92YWxpZGF0ZU5vbkVtcHR5QXJndW1lbnQoZSwgdCwgbikge1xuICAgIGlmICghbikgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKE4uSU5WQUxJRF9BUkdVTUVOVCwgYEZ1bmN0aW9uICR7ZX0oKSBjYW5ub3QgYmUgY2FsbGVkIHdpdGggYW4gZW1wdHkgJHt0fS5gKTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZXMgdGhhdCB0d28gYm9vbGVhbiBvcHRpb25zIGFyZSBub3Qgc2V0IGF0IHRoZSBzYW1lIHRpbWUuXG4gKiBAaW50ZXJuYWxcbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfdmFsaWRhdGVJc05vdFVzZWRUb2dldGhlcihlLCB0LCBuLCByKSB7XG4gICAgaWYgKCEwID09PSB0ICYmICEwID09PSByKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoTi5JTlZBTElEX0FSR1VNRU5ULCBgJHtlfSBhbmQgJHtufSBjYW5ub3QgYmUgdXNlZCB0b2dldGhlci5gKTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZXMgdGhhdCBgcGF0aGAgcmVmZXJzIHRvIGEgZG9jdW1lbnQgKGluZGljYXRlZCBieSB0aGUgZmFjdCBpdCBjb250YWluc1xuICogYW4gZXZlbiBudW1iZXJzIG9mIHNlZ21lbnRzKS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfdmFsaWRhdGVEb2N1bWVudFBhdGgoZSkge1xuICAgIGlmICghRG9jdW1lbnRLZXkuaXNEb2N1bWVudEtleShlKSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKE4uSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgZG9jdW1lbnQgcmVmZXJlbmNlLiBEb2N1bWVudCByZWZlcmVuY2VzIG11c3QgaGF2ZSBhbiBldmVuIG51bWJlciBvZiBzZWdtZW50cywgYnV0ICR7ZX0gaGFzICR7ZS5sZW5ndGh9LmApO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlcyB0aGF0IGBwYXRoYCByZWZlcnMgdG8gYSBjb2xsZWN0aW9uIChpbmRpY2F0ZWQgYnkgdGhlIGZhY3QgaXRcbiAqIGNvbnRhaW5zIGFuIG9kZCBudW1iZXJzIG9mIHNlZ21lbnRzKS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfdmFsaWRhdGVDb2xsZWN0aW9uUGF0aChlKSB7XG4gICAgaWYgKERvY3VtZW50S2V5LmlzRG9jdW1lbnRLZXkoZSkpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihOLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIGNvbGxlY3Rpb24gcmVmZXJlbmNlLiBDb2xsZWN0aW9uIHJlZmVyZW5jZXMgbXVzdCBoYXZlIGFuIG9kZCBudW1iZXIgb2Ygc2VnbWVudHMsIGJ1dCAke2V9IGhhcyAke2UubGVuZ3RofS5gKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgaXQncyBhIG5vbi1udWxsIG9iamVjdCB3aXRob3V0IGEgY3VzdG9tIHByb3RvdHlwZVxuICogKGkuZS4gZXhjbHVkZXMgQXJyYXksIERhdGUsIGV0Yy4pLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9pc1BsYWluT2JqZWN0KGUpIHtcbiAgICByZXR1cm4gXCJvYmplY3RcIiA9PSB0eXBlb2YgZSAmJiBudWxsICE9PSBlICYmIChPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkgPT09IE9iamVjdC5wcm90b3R5cGUgfHwgbnVsbCA9PT0gT2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKTtcbn1cblxuLyoqIFJldHVybnMgYSBzdHJpbmcgZGVzY3JpYmluZyB0aGUgdHlwZSAvIHZhbHVlIG9mIHRoZSBwcm92aWRlZCBpbnB1dC4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3ZhbHVlRGVzY3JpcHRpb24oZSkge1xuICAgIGlmICh2b2lkIDAgPT09IGUpIHJldHVybiBcInVuZGVmaW5lZFwiO1xuICAgIGlmIChudWxsID09PSBlKSByZXR1cm4gXCJudWxsXCI7XG4gICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIGUpIHJldHVybiBlLmxlbmd0aCA+IDIwICYmIChlID0gYCR7ZS5zdWJzdHJpbmcoMCwgMjApfS4uLmApLCBcbiAgICBKU09OLnN0cmluZ2lmeShlKTtcbiAgICBpZiAoXCJudW1iZXJcIiA9PSB0eXBlb2YgZSB8fCBcImJvb2xlYW5cIiA9PSB0eXBlb2YgZSkgcmV0dXJuIFwiXCIgKyBlO1xuICAgIGlmIChcIm9iamVjdFwiID09IHR5cGVvZiBlKSB7XG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgQXJyYXkpIHJldHVybiBcImFuIGFycmF5XCI7XG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBcbiAgICAgICAgICAgIC8qKiB0cnkgdG8gZ2V0IHRoZSBjb25zdHJ1Y3RvciBuYW1lIGZvciBhbiBvYmplY3QuICovXG4gICAgICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfdHJ5R2V0Q3VzdG9tT2JqZWN0VHlwZShlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGUuY29uc3RydWN0b3IpIHJldHVybiBlLmNvbnN0cnVjdG9yLm5hbWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIENhc3RzIGBvYmpgIHRvIGBUYCwgb3B0aW9uYWxseSB1bndyYXBwaW5nIENvbXBhdCB0eXBlcyB0byBleHBvc2UgdGhlXG4gKiB1bmRlcmx5aW5nIGluc3RhbmNlLiBUaHJvd3MgaWYgIGBvYmpgIGlzIG5vdCBhbiBpbnN0YW5jZSBvZiBgVGAuXG4gKlxuICogVGhpcyBjYXN0IGlzIHVzZWQgaW4gdGhlIExpdGUgYW5kIEZ1bGwgU0RLIHRvIHZlcmlmeSBpbnN0YW5jZSB0eXBlcyBmb3JcbiAqIGFyZ3VtZW50cyBwYXNzZWQgdG8gdGhlIHB1YmxpYyBBUEkuXG4gKiBAaW50ZXJuYWxcbiAqLyAoZSk7XG4gICAgICAgICAgICByZXR1cm4gdCA/IGBhIGN1c3RvbSAke3R9IG9iamVjdGAgOiBcImFuIG9iamVjdFwiO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGUgPyBcImEgZnVuY3Rpb25cIiA6IGZhaWwoMTIzMjksIHtcbiAgICAgICAgdHlwZTogdHlwZW9mIGVcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2Nhc3QoZSwgXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxudCkge1xuICAgIGlmIChcIl9kZWxlZ2F0ZVwiIGluIGUgJiYgKFxuICAgIC8vIFVud3JhcCBDb21wYXQgdHlwZXNcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGUgPSBlLl9kZWxlZ2F0ZSksICEoZSBpbnN0YW5jZW9mIHQpKSB7XG4gICAgICAgIGlmICh0Lm5hbWUgPT09IGUuY29uc3RydWN0b3IubmFtZSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKE4uSU5WQUxJRF9BUkdVTUVOVCwgXCJUeXBlIGRvZXMgbm90IG1hdGNoIHRoZSBleHBlY3RlZCBpbnN0YW5jZS4gRGlkIHlvdSBwYXNzIGEgcmVmZXJlbmNlIGZyb20gYSBkaWZmZXJlbnQgRmlyZXN0b3JlIFNESz9cIik7XG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfdmFsdWVEZXNjcmlwdGlvbihlKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihOLklOVkFMSURfQVJHVU1FTlQsIGBFeHBlY3RlZCB0eXBlICcke3QubmFtZX0nLCBidXQgaXQgd2FzOiAke259YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGU7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV92YWxpZGF0ZVBvc2l0aXZlTnVtYmVyKGUsIHQpIHtcbiAgICBpZiAodCA8PSAwKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoTi5JTlZBTElEX0FSR1VNRU5ULCBgRnVuY3Rpb24gJHtlfSgpIHJlcXVpcmVzIGEgcG9zaXRpdmUgbnVtYmVyLCBidXQgaXQgd2FzOiAke3R9LmApO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyNSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gdG8gZGVmaW5lIGEgSlNPTiBzY2hlbWEge0BsaW5rIFByb3BlcnR5fS5cbiAqIEBwcml2YXRlXG4gKiBAaW50ZXJuYWxcbiAqLyBmdW5jdGlvbiBwcm9wZXJ0eShlLCB0KSB7XG4gICAgY29uc3QgbiA9IHtcbiAgICAgICAgdHlwZVN0cmluZzogZVxuICAgIH07XG4gICAgcmV0dXJuIHQgJiYgKG4udmFsdWUgPSB0KSwgbjtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZXMgdGhlIEpTT04gb2JqZWN0IGJhc2VkIG9uIHRoZSBwcm92aWRlZCBzY2hlbWEsIGFuZCBuYXJyb3dzIHRoZSB0eXBlIHRvIHRoZSBwcm92aWRlZFxuICogSlNPTiBzY2hlbWEuXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKlxuICogQHBhcmFtIGpzb24gQSBKU09OIG9iamVjdCB0byB2YWxpZGF0ZS5cbiAqIEBwYXJhbSBzY2hlbWUgYSB7QGxpbmsgSnNvblNjaGVtYX0gdGhhdCBkZWZpbmVzIHRoZSBwcm9wZXJ0aWVzIHRvIHZhbGlkYXRlLlxuICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgSlNPTiBzY2hlbWEgZXhpc3RzIHdpdGhpbiB0aGUgb2JqZWN0LiBUaHJvd3MgYSBGaXJlc3RvcmVFcnJvciBvdGhlcndpc2UuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3ZhbGlkYXRlSlNPTihlLCB0KSB7XG4gICAgaWYgKCFfX1BSSVZBVEVfaXNQbGFpbk9iamVjdChlKSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKE4uSU5WQUxJRF9BUkdVTUVOVCwgXCJKU09OIG11c3QgYmUgYW4gb2JqZWN0XCIpO1xuICAgIGxldCBuO1xuICAgIGZvciAoY29uc3QgciBpbiB0KSBpZiAodFtyXSkge1xuICAgICAgICBjb25zdCBpID0gdFtyXS50eXBlU3RyaW5nLCBzID0gXCJ2YWx1ZVwiIGluIHRbcl0gPyB7XG4gICAgICAgICAgICB2YWx1ZTogdFtyXS52YWx1ZVxuICAgICAgICB9IDogdm9pZCAwO1xuICAgICAgICBpZiAoIShyIGluIGUpKSB7XG4gICAgICAgICAgICBuID0gYEpTT04gbWlzc2luZyByZXF1aXJlZCBmaWVsZDogJyR7cn0nYDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgY29uc3QgbyA9IGVbcl07XG4gICAgICAgIGlmIChpICYmIHR5cGVvZiBvICE9PSBpKSB7XG4gICAgICAgICAgICBuID0gYEpTT04gZmllbGQgJyR7cn0nIG11c3QgYmUgYSAke2l9LmA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpZiAodm9pZCAwICE9PSBzICYmIG8gIT09IHMudmFsdWUpIHtcbiAgICAgICAgICAgIG4gPSBgRXhwZWN0ZWQgJyR7cn0nIGZpZWxkIHRvIGVxdWFsICcke3MudmFsdWV9J2A7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAobikgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKE4uSU5WQUxJRF9BUkdVTUVOVCwgbik7XG4gICAgcmV0dXJuICEwO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gVGhlIGVhcmxpZXN0IGRhdGUgc3VwcG9ydGVkIGJ5IEZpcmVzdG9yZSB0aW1lc3RhbXBzICgwMDAxLTAxLTAxVDAwOjAwOjAwWikuXG5jb25zdCBRID0gLTYyMTM1NTk2ODAwLCAkID0gMWU2O1xuXG4vLyBOdW1iZXIgb2YgbmFub3NlY29uZHMgaW4gYSBtaWxsaXNlY29uZC5cbi8qKlxuICogQSBgVGltZXN0YW1wYCByZXByZXNlbnRzIGEgcG9pbnQgaW4gdGltZSBpbmRlcGVuZGVudCBvZiBhbnkgdGltZSB6b25lIG9yXG4gKiBjYWxlbmRhciwgcmVwcmVzZW50ZWQgYXMgc2Vjb25kcyBhbmQgZnJhY3Rpb25zIG9mIHNlY29uZHMgYXQgbmFub3NlY29uZFxuICogcmVzb2x1dGlvbiBpbiBVVEMgRXBvY2ggdGltZS5cbiAqXG4gKiBJdCBpcyBlbmNvZGVkIHVzaW5nIHRoZSBQcm9sZXB0aWMgR3JlZ29yaWFuIENhbGVuZGFyIHdoaWNoIGV4dGVuZHMgdGhlXG4gKiBHcmVnb3JpYW4gY2FsZW5kYXIgYmFja3dhcmRzIHRvIHllYXIgb25lLiBJdCBpcyBlbmNvZGVkIGFzc3VtaW5nIGFsbCBtaW51dGVzXG4gKiBhcmUgNjAgc2Vjb25kcyBsb25nLCBpLmUuIGxlYXAgc2Vjb25kcyBhcmUgXCJzbWVhcmVkXCIgc28gdGhhdCBubyBsZWFwIHNlY29uZFxuICogdGFibGUgaXMgbmVlZGVkIGZvciBpbnRlcnByZXRhdGlvbi4gUmFuZ2UgaXMgZnJvbSAwMDAxLTAxLTAxVDAwOjAwOjAwWiB0b1xuICogOTk5OS0xMi0zMVQyMzo1OTo1OS45OTk5OTk5OTlaLlxuICpcbiAqIEZvciBleGFtcGxlcyBhbmQgZnVydGhlciBzcGVjaWZpY2F0aW9ucywgcmVmZXIgdG8gdGhlXG4gKiB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9wcm90b2J1Zi9ibG9iL21hc3Rlci9zcmMvZ29vZ2xlL3Byb3RvYnVmL3RpbWVzdGFtcC5wcm90byB8IFRpbWVzdGFtcCBkZWZpbml0aW9ufS5cbiAqL1xuY2xhc3MgVGltZXN0YW1wIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRpbWVzdGFtcCB3aXRoIHRoZSBjdXJyZW50IGRhdGUsIHdpdGggbWlsbGlzZWNvbmQgcHJlY2lzaW9uLlxuICAgICAqXG4gICAgICogQHJldHVybnMgYSBuZXcgdGltZXN0YW1wIHJlcHJlc2VudGluZyB0aGUgY3VycmVudCBkYXRlLlxuICAgICAqL1xuICAgIHN0YXRpYyBub3coKSB7XG4gICAgICAgIHJldHVybiBUaW1lc3RhbXAuZnJvbU1pbGxpcyhEYXRlLm5vdygpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0aW1lc3RhbXAgZnJvbSB0aGUgZ2l2ZW4gZGF0ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkYXRlIC0gVGhlIGRhdGUgdG8gaW5pdGlhbGl6ZSB0aGUgYFRpbWVzdGFtcGAgZnJvbS5cbiAgICAgKiBAcmV0dXJucyBBIG5ldyBgVGltZXN0YW1wYCByZXByZXNlbnRpbmcgdGhlIHNhbWUgcG9pbnQgaW4gdGltZSBhcyB0aGUgZ2l2ZW5cbiAgICAgKiAgICAgZGF0ZS5cbiAgICAgKi8gICAgc3RhdGljIGZyb21EYXRlKGUpIHtcbiAgICAgICAgcmV0dXJuIFRpbWVzdGFtcC5mcm9tTWlsbGlzKGUuZ2V0VGltZSgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0aW1lc3RhbXAgZnJvbSB0aGUgZ2l2ZW4gbnVtYmVyIG9mIG1pbGxpc2Vjb25kcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBtaWxsaXNlY29uZHMgLSBOdW1iZXIgb2YgbWlsbGlzZWNvbmRzIHNpbmNlIFVuaXggZXBvY2hcbiAgICAgKiAgICAgMTk3MC0wMS0wMVQwMDowMDowMFouXG4gICAgICogQHJldHVybnMgQSBuZXcgYFRpbWVzdGFtcGAgcmVwcmVzZW50aW5nIHRoZSBzYW1lIHBvaW50IGluIHRpbWUgYXMgdGhlIGdpdmVuXG4gICAgICogICAgIG51bWJlciBvZiBtaWxsaXNlY29uZHMuXG4gICAgICovICAgIHN0YXRpYyBmcm9tTWlsbGlzKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IE1hdGguZmxvb3IoZSAvIDFlMyksIG4gPSBNYXRoLmZsb29yKChlIC0gMWUzICogdCkgKiAkKTtcbiAgICAgICAgcmV0dXJuIG5ldyBUaW1lc3RhbXAodCwgbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGltZXN0YW1wLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNlY29uZHMgLSBUaGUgbnVtYmVyIG9mIHNlY29uZHMgb2YgVVRDIHRpbWUgc2luY2UgVW5peCBlcG9jaFxuICAgICAqICAgICAxOTcwLTAxLTAxVDAwOjAwOjAwWi4gTXVzdCBiZSBmcm9tIDAwMDEtMDEtMDFUMDA6MDA6MDBaIHRvXG4gICAgICogICAgIDk5OTktMTItMzFUMjM6NTk6NTlaIGluY2x1c2l2ZS5cbiAgICAgKiBAcGFyYW0gbmFub3NlY29uZHMgLSBUaGUgbm9uLW5lZ2F0aXZlIGZyYWN0aW9ucyBvZiBhIHNlY29uZCBhdCBuYW5vc2Vjb25kXG4gICAgICogICAgIHJlc29sdXRpb24uIE5lZ2F0aXZlIHNlY29uZCB2YWx1ZXMgd2l0aCBmcmFjdGlvbnMgbXVzdCBzdGlsbCBoYXZlXG4gICAgICogICAgIG5vbi1uZWdhdGl2ZSBuYW5vc2Vjb25kcyB2YWx1ZXMgdGhhdCBjb3VudCBmb3J3YXJkIGluIHRpbWUuIE11c3QgYmVcbiAgICAgKiAgICAgZnJvbSAwIHRvIDk5OSw5OTksOTk5IGluY2x1c2l2ZS5cbiAgICAgKi8gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIG51bWJlciBvZiBzZWNvbmRzIG9mIFVUQyB0aW1lIHNpbmNlIFVuaXggZXBvY2ggMTk3MC0wMS0wMVQwMDowMDowMFouXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogVGhlIGZyYWN0aW9ucyBvZiBhIHNlY29uZCBhdCBuYW5vc2Vjb25kIHJlc29sdXRpb24uKlxuICAgICAqL1xuICAgIHQpIHtcbiAgICAgICAgaWYgKHRoaXMuc2Vjb25kcyA9IGUsIHRoaXMubmFub3NlY29uZHMgPSB0LCB0IDwgMCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKE4uSU5WQUxJRF9BUkdVTUVOVCwgXCJUaW1lc3RhbXAgbmFub3NlY29uZHMgb3V0IG9mIHJhbmdlOiBcIiArIHQpO1xuICAgICAgICBpZiAodCA+PSAxZTkpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihOLklOVkFMSURfQVJHVU1FTlQsIFwiVGltZXN0YW1wIG5hbm9zZWNvbmRzIG91dCBvZiByYW5nZTogXCIgKyB0KTtcbiAgICAgICAgaWYgKGUgPCBRKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoTi5JTlZBTElEX0FSR1VNRU5ULCBcIlRpbWVzdGFtcCBzZWNvbmRzIG91dCBvZiByYW5nZTogXCIgKyBlKTtcbiAgICAgICAgLy8gVGhpcyB3aWxsIGJyZWFrIGluIHRoZSB5ZWFyIDEwLDAwMC5cbiAgICAgICAgICAgICAgICBpZiAoZSA+PSAyNTM0MDIzMDA4MDApIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihOLklOVkFMSURfQVJHVU1FTlQsIFwiVGltZXN0YW1wIHNlY29uZHMgb3V0IG9mIHJhbmdlOiBcIiArIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBhIGBUaW1lc3RhbXBgIHRvIGEgSmF2YVNjcmlwdCBgRGF0ZWAgb2JqZWN0LiBUaGlzIGNvbnZlcnNpb25cbiAgICAgKiBjYXVzZXMgYSBsb3NzIG9mIHByZWNpc2lvbiBzaW5jZSBgRGF0ZWAgb2JqZWN0cyBvbmx5IHN1cHBvcnQgbWlsbGlzZWNvbmRcbiAgICAgKiBwcmVjaXNpb24uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBKYXZhU2NyaXB0IGBEYXRlYCBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzYW1lIHBvaW50IGluIHRpbWUgYXNcbiAgICAgKiAgICAgdGhpcyBgVGltZXN0YW1wYCwgd2l0aCBtaWxsaXNlY29uZCBwcmVjaXNpb24uXG4gICAgICovICAgIHRvRGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHRoaXMudG9NaWxsaXMoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGEgYFRpbWVzdGFtcGAgdG8gYSBudW1lcmljIHRpbWVzdGFtcCAoaW4gbWlsbGlzZWNvbmRzIHNpbmNlXG4gICAgICogZXBvY2gpLiBUaGlzIG9wZXJhdGlvbiBjYXVzZXMgYSBsb3NzIG9mIHByZWNpc2lvbi5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBwb2ludCBpbiB0aW1lIGNvcnJlc3BvbmRpbmcgdG8gdGhpcyB0aW1lc3RhbXAsIHJlcHJlc2VudGVkIGFzXG4gICAgICogICAgIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHNpbmNlIFVuaXggZXBvY2ggMTk3MC0wMS0wMVQwMDowMDowMFouXG4gICAgICovICAgIHRvTWlsbGlzKCkge1xuICAgICAgICByZXR1cm4gMWUzICogdGhpcy5zZWNvbmRzICsgdGhpcy5uYW5vc2Vjb25kcyAvICQ7XG4gICAgfVxuICAgIF9jb21wYXJlVG8oZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWNvbmRzID09PSBlLnNlY29uZHMgPyBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcih0aGlzLm5hbm9zZWNvbmRzLCBlLm5hbm9zZWNvbmRzKSA6IF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKHRoaXMuc2Vjb25kcywgZS5zZWNvbmRzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgYFRpbWVzdGFtcGAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBgVGltZXN0YW1wYCB0byBjb21wYXJlIGFnYWluc3QuXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGlzIGBUaW1lc3RhbXBgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICovICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gZS5zZWNvbmRzID09PSB0aGlzLnNlY29uZHMgJiYgZS5uYW5vc2Vjb25kcyA9PT0gdGhpcy5uYW5vc2Vjb25kcztcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSB0ZXh0dWFsIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgYFRpbWVzdGFtcGAuICovICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gXCJUaW1lc3RhbXAoc2Vjb25kcz1cIiArIHRoaXMuc2Vjb25kcyArIFwiLCBuYW5vc2Vjb25kcz1cIiArIHRoaXMubmFub3NlY29uZHMgKyBcIilcIjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIEpTT04tc2VyaWFsaXphYmxlIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgYFRpbWVzdGFtcGAuXG4gICAgICovICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IFRpbWVzdGFtcC5fanNvblNjaGVtYVZlcnNpb24sXG4gICAgICAgICAgICBzZWNvbmRzOiB0aGlzLnNlY29uZHMsXG4gICAgICAgICAgICBuYW5vc2Vjb25kczogdGhpcy5uYW5vc2Vjb25kc1xuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCdWlsZHMgYSBgVGltZXN0YW1wYCBpbnN0YW5jZSBmcm9tIGEgSlNPTiBvYmplY3QgY3JlYXRlZCBieSB7QGxpbmsgVGltZXN0YW1wLnRvSlNPTn0uXG4gICAgICovICAgIHN0YXRpYyBmcm9tSlNPTihlKSB7XG4gICAgICAgIGlmIChfX1BSSVZBVEVfdmFsaWRhdGVKU09OKGUsIFRpbWVzdGFtcC5fanNvblNjaGVtYSkpIHJldHVybiBuZXcgVGltZXN0YW1wKGUuc2Vjb25kcywgZS5uYW5vc2Vjb25kcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoaXMgb2JqZWN0IHRvIGEgcHJpbWl0aXZlIHN0cmluZywgd2hpY2ggYWxsb3dzIGBUaW1lc3RhbXBgIG9iamVjdHNcbiAgICAgKiB0byBiZSBjb21wYXJlZCB1c2luZyB0aGUgYD5gLCBgPD1gLCBgPj1gIGFuZCBgPmAgb3BlcmF0b3JzLlxuICAgICAqLyAgICB2YWx1ZU9mKCkge1xuICAgICAgICAvLyBUaGlzIG1ldGhvZCByZXR1cm5zIGEgc3RyaW5nIG9mIHRoZSBmb3JtIDxzZWNvbmRzPi48bmFub3NlY29uZHM+IHdoZXJlXG4gICAgICAgIC8vIDxzZWNvbmRzPiBpcyB0cmFuc2xhdGVkIHRvIGhhdmUgYSBub24tbmVnYXRpdmUgdmFsdWUgYW5kIGJvdGggPHNlY29uZHM+XG4gICAgICAgIC8vIGFuZCA8bmFub3NlY29uZHM+IGFyZSBsZWZ0LXBhZGRlZCB3aXRoIHplcm9lcyB0byBiZSBhIGNvbnNpc3RlbnQgbGVuZ3RoLlxuICAgICAgICAvLyBTdHJpbmdzIHdpdGggdGhpcyBmb3JtYXQgdGhlbiBoYXZlIGEgbGV4aWNvZ3JhcGhpY2FsIG9yZGVyaW5nIHRoYXQgbWF0Y2hlc1xuICAgICAgICAvLyB0aGUgZXhwZWN0ZWQgb3JkZXJpbmcuIFRoZSA8c2Vjb25kcz4gdHJhbnNsYXRpb24gaXMgZG9uZSB0byBhdm9pZCBoYXZpbmdcbiAgICAgICAgLy8gYSBsZWFkaW5nIG5lZ2F0aXZlIHNpZ24gKGkuZS4gYSBsZWFkaW5nICctJyBjaGFyYWN0ZXIpIGluIGl0cyBzdHJpbmdcbiAgICAgICAgLy8gcmVwcmVzZW50YXRpb24sIHdoaWNoIHdvdWxkIGFmZmVjdCBpdHMgbGV4aWNvZ3JhcGhpY2FsIG9yZGVyaW5nLlxuICAgICAgICBjb25zdCBlID0gdGhpcy5zZWNvbmRzIC0gUTtcbiAgICAgICAgLy8gTm90ZTogVXAgdG8gMTIgZGVjaW1hbCBkaWdpdHMgYXJlIHJlcXVpcmVkIHRvIHJlcHJlc2VudCBhbGwgdmFsaWRcbiAgICAgICAgLy8gJ3NlY29uZHMnIHZhbHVlcy5cbiAgICAgICAgICAgICAgICByZXR1cm4gU3RyaW5nKGUpLnBhZFN0YXJ0KDEyLCBcIjBcIikgKyBcIi5cIiArIFN0cmluZyh0aGlzLm5hbm9zZWNvbmRzKS5wYWRTdGFydCg5LCBcIjBcIik7XG4gICAgfVxufVxuXG5UaW1lc3RhbXAuX2pzb25TY2hlbWFWZXJzaW9uID0gXCJmaXJlc3RvcmUvdGltZXN0YW1wLzEuMFwiLCBUaW1lc3RhbXAuX2pzb25TY2hlbWEgPSB7XG4gICAgdHlwZTogcHJvcGVydHkoXCJzdHJpbmdcIiwgVGltZXN0YW1wLl9qc29uU2NoZW1hVmVyc2lvbiksXG4gICAgc2Vjb25kczogcHJvcGVydHkoXCJudW1iZXJcIiksXG4gICAgbmFub3NlY29uZHM6IHByb3BlcnR5KFwibnVtYmVyXCIpXG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIHZlcnNpb24gb2YgYSBkb2N1bWVudCBpbiBGaXJlc3RvcmUuIFRoaXMgY29ycmVzcG9uZHMgdG8gdGhlIHZlcnNpb25cbiAqIHRpbWVzdGFtcCwgc3VjaCBhcyB1cGRhdGVfdGltZSBvciByZWFkX3RpbWUuXG4gKi9cbmNsYXNzIFNuYXBzaG90VmVyc2lvbiB7XG4gICAgc3RhdGljIGZyb21UaW1lc3RhbXAoZSkge1xuICAgICAgICByZXR1cm4gbmV3IFNuYXBzaG90VmVyc2lvbihlKTtcbiAgICB9XG4gICAgc3RhdGljIG1pbigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTbmFwc2hvdFZlcnNpb24obmV3IFRpbWVzdGFtcCgwLCAwKSk7XG4gICAgfVxuICAgIHN0YXRpYyBtYXgoKSB7XG4gICAgICAgIHJldHVybiBuZXcgU25hcHNob3RWZXJzaW9uKG5ldyBUaW1lc3RhbXAoMjUzNDAyMzAwNzk5LCA5OTk5OTk5OTkpKTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLnRpbWVzdGFtcCA9IGU7XG4gICAgfVxuICAgIGNvbXBhcmVUbyhlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbWVzdGFtcC5fY29tcGFyZVRvKGUudGltZXN0YW1wKTtcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbWVzdGFtcC5pc0VxdWFsKGUudGltZXN0YW1wKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSBudW1iZXIgcmVwcmVzZW50YXRpb24gb2YgdGhlIHZlcnNpb24gZm9yIHVzZSBpbiBzcGVjIHRlc3RzLiAqLyAgICB0b01pY3Jvc2Vjb25kcygpIHtcbiAgICAgICAgLy8gQ29udmVydCB0byBtaWNyb3NlY29uZHMuXG4gICAgICAgIHJldHVybiAxZTYgKiB0aGlzLnRpbWVzdGFtcC5zZWNvbmRzICsgdGhpcy50aW1lc3RhbXAubmFub3NlY29uZHMgLyAxZTM7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gXCJTbmFwc2hvdFZlcnNpb24oXCIgKyB0aGlzLnRpbWVzdGFtcC50b1N0cmluZygpICsgXCIpXCI7XG4gICAgfVxuICAgIHRvVGltZXN0YW1wKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aW1lc3RhbXA7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGUgaW5pdGlhbCBtdXRhdGlvbiBiYXRjaCBpZCBmb3IgZWFjaCBpbmRleC4gR2V0cyB1cGRhdGVkIGR1cmluZyBpbmRleFxuICogYmFja2ZpbGwuXG4gKi8gY29uc3QgVSA9IC0xO1xuXG4vKipcbiAqIFRoZSBpbml0aWFsIHNlcXVlbmNlIG51bWJlciBmb3IgZWFjaCBpbmRleC4gR2V0cyB1cGRhdGVkIGR1cmluZyBpbmRleFxuICogYmFja2ZpbGwuXG4gKi9cbi8qKlxuICogQW4gaW5kZXggZGVmaW5pdGlvbiBmb3IgZmllbGQgaW5kZXhlcyBpbiBGaXJlc3RvcmUuXG4gKlxuICogRXZlcnkgaW5kZXggaXMgYXNzb2NpYXRlZCB3aXRoIGEgY29sbGVjdGlvbi4gVGhlIGRlZmluaXRpb24gY29udGFpbnMgYSBsaXN0XG4gKiBvZiBmaWVsZHMgYW5kIHRoZWlyIGluZGV4IGtpbmQgKHdoaWNoIGNhbiBiZSBgQVNDRU5ESU5HYCwgYERFU0NFTkRJTkdgIG9yXG4gKiBgQ09OVEFJTlNgIGZvciBBcnJheUNvbnRhaW5zL0FycmF5Q29udGFpbnNBbnkgcXVlcmllcykuXG4gKlxuICogVW5saWtlIHRoZSBiYWNrZW5kLCB0aGUgU0RLIGRvZXMgbm90IGRpZmZlcmVudGlhdGUgYmV0d2VlbiBjb2xsZWN0aW9uIG9yXG4gKiBjb2xsZWN0aW9uIGdyb3VwLXNjb3BlZCBpbmRpY2VzLiBFdmVyeSBpbmRleCBjYW4gYmUgdXNlZCBmb3IgYm90aCBzaW5nbGVcbiAqIGNvbGxlY3Rpb24gYW5kIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcmllcy5cbiAqL1xuY2xhc3MgRmllbGRJbmRleCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIGluZGV4IElELiBSZXR1cm5zIC0xIGlmIHRoZSBpbmRleCBJRCBpcyBub3QgYXZhaWxhYmxlIChlLmcuIHRoZSBpbmRleFxuICAgICAqIGhhcyBub3QgeWV0IGJlZW4gcGVyc2lzdGVkKS5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKiogVGhlIGNvbGxlY3Rpb24gSUQgdGhpcyBpbmRleCBhcHBsaWVzIHRvLiAqL1xuICAgIHQsIFxuICAgIC8qKiBUaGUgZmllbGQgc2VnbWVudHMgZm9yIHRoaXMgaW5kZXguICovXG4gICAgbiwgXG4gICAgLyoqIFNob3dzIGhvdyB1cC10by1kYXRlIHRoZSBpbmRleCBpcyBmb3IgdGhlIGN1cnJlbnQgdXNlci4gKi9cbiAgICByKSB7XG4gICAgICAgIHRoaXMuaW5kZXhJZCA9IGUsIHRoaXMuY29sbGVjdGlvbkdyb3VwID0gdCwgdGhpcy5maWVsZHMgPSBuLCB0aGlzLmluZGV4U3RhdGUgPSByO1xuICAgIH1cbn1cblxuLyoqIEFuIElEIGZvciBhbiBpbmRleCB0aGF0IGhhcyBub3QgeWV0IGJlZW4gYWRkZWQgdG8gcGVyc2lzdGVuY2UuICAqL1xuLyoqIFJldHVybnMgdGhlIEFycmF5Q29udGFpbnMvQXJyYXlDb250YWluc0FueSBzZWdtZW50IGZvciB0aGlzIGluZGV4LiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX2ZpZWxkSW5kZXhHZXRBcnJheVNlZ21lbnQoZSkge1xuICAgIHJldHVybiBlLmZpZWxkcy5maW5kKChlID0+IDIgLyogSW5kZXhLaW5kLkNPTlRBSU5TICovID09PSBlLmtpbmQpKTtcbn1cblxuLyoqIFJldHVybnMgYWxsIGRpcmVjdGlvbmFsIChhc2NlbmRpbmcvZGVzY2VuZGluZykgc2VnbWVudHMgZm9yIHRoaXMgaW5kZXguICovIGZ1bmN0aW9uIF9fUFJJVkFURV9maWVsZEluZGV4R2V0RGlyZWN0aW9uYWxTZWdtZW50cyhlKSB7XG4gICAgcmV0dXJuIGUuZmllbGRzLmZpbHRlcigoZSA9PiAyIC8qIEluZGV4S2luZC5DT05UQUlOUyAqLyAhPT0gZS5raW5kKSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgb3JkZXIgb2YgdGhlIGRvY3VtZW50IGtleSBjb21wb25lbnQgZm9yIHRoZSBnaXZlbiBpbmRleC5cbiAqXG4gKiBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGluIHRoZSBXZWIgSW5kZXhlZERiIGltcGxlbWVudGF0aW9uLlxuICovXG4vKipcbiAqIENvbXBhcmVzIGluZGV4ZXMgYnkgY29sbGVjdGlvbiBncm91cCBhbmQgc2VnbWVudHMuIElnbm9yZXMgdXBkYXRlIHRpbWUgYW5kXG4gKiBpbmRleCBJRC5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX2ZpZWxkSW5kZXhTZW1hbnRpY0NvbXBhcmF0b3IoZSwgdCkge1xuICAgIGxldCBuID0gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IoZS5jb2xsZWN0aW9uR3JvdXAsIHQuY29sbGVjdGlvbkdyb3VwKTtcbiAgICBpZiAoMCAhPT0gbikgcmV0dXJuIG47XG4gICAgZm9yIChsZXQgciA9IDA7IHIgPCBNYXRoLm1pbihlLmZpZWxkcy5sZW5ndGgsIHQuZmllbGRzLmxlbmd0aCk7ICsrcikgaWYgKG4gPSBfX1BSSVZBVEVfaW5kZXhTZWdtZW50Q29tcGFyYXRvcihlLmZpZWxkc1tyXSwgdC5maWVsZHNbcl0pLCBcbiAgICAwICE9PSBuKSByZXR1cm4gbjtcbiAgICByZXR1cm4gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IoZS5maWVsZHMubGVuZ3RoLCB0LmZpZWxkcy5sZW5ndGgpO1xufVxuXG4vKiogUmV0dXJucyBhIGRlYnVnIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBmaWVsZCBpbmRleCAqLyBGaWVsZEluZGV4LlVOS05PV05fSUQgPSAtMTtcblxuLyoqIEFuIGluZGV4IGNvbXBvbmVudCBjb25zaXN0aW5nIG9mIGZpZWxkIHBhdGggYW5kIGluZGV4IHR5cGUuICAqL1xuY2xhc3MgSW5kZXhTZWdtZW50IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogVGhlIGZpZWxkIHBhdGggb2YgdGhlIGNvbXBvbmVudC4gKi9cbiAgICBlLCBcbiAgICAvKiogVGhlIGZpZWxkcyBzb3J0aW5nIG9yZGVyLiAqL1xuICAgIHQpIHtcbiAgICAgICAgdGhpcy5maWVsZFBhdGggPSBlLCB0aGlzLmtpbmQgPSB0O1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2luZGV4U2VnbWVudENvbXBhcmF0b3IoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBGaWVsZFBhdGgkMS5jb21wYXJhdG9yKGUuZmllbGRQYXRoLCB0LmZpZWxkUGF0aCk7XG4gICAgcmV0dXJuIDAgIT09IG4gPyBuIDogX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IoZS5raW5kLCB0LmtpbmQpO1xufVxuXG4vKipcbiAqIFN0b3JlcyB0aGUgXCJoaWdoIHdhdGVyIG1hcmtcIiB0aGF0IGluZGljYXRlcyBob3cgdXBkYXRlZCB0aGUgSW5kZXggaXMgZm9yIHRoZVxuICogY3VycmVudCB1c2VyLlxuICovIGNsYXNzIEluZGV4U3RhdGUge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB3aGVuIHRoZSBpbmRleCB3YXMgbGFzdCB1cGRhdGVkIChyZWxhdGl2ZSB0byBvdGhlciBpbmRleGVzKS5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKiogVGhlIHRoZSBsYXRlc3QgaW5kZXhlZCByZWFkIHRpbWUsIGRvY3VtZW50IGFuZCBiYXRjaCBpZC4gKi9cbiAgICB0KSB7XG4gICAgICAgIHRoaXMuc2VxdWVuY2VOdW1iZXIgPSBlLCB0aGlzLm9mZnNldCA9IHQ7XG4gICAgfVxuICAgIC8qKiBUaGUgc3RhdGUgb2YgYW4gaW5kZXggdGhhdCBoYXMgbm90IHlldCBiZWVuIGJhY2tmaWxsZWQuICovICAgIHN0YXRpYyBlbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJbmRleFN0YXRlKDAsIEluZGV4T2Zmc2V0Lm1pbigpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBvZmZzZXQgdGhhdCBtYXRjaGVzIGFsbCBkb2N1bWVudHMgd2l0aCBhIHJlYWQgdGltZSBoaWdoZXIgdGhhblxuICogYHJlYWRUaW1lYC5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3SW5kZXhPZmZzZXRTdWNjZXNzb3JGcm9tUmVhZFRpbWUoZSwgdCkge1xuICAgIC8vIFdlIHdhbnQgdG8gY3JlYXRlIGFuIG9mZnNldCB0aGF0IG1hdGNoZXMgYWxsIGRvY3VtZW50cyB3aXRoIGEgcmVhZCB0aW1lXG4gICAgLy8gZ3JlYXRlciB0aGFuIHRoZSBwcm92aWRlZCByZWFkIHRpbWUuIFRvIGRvIHNvLCB3ZSB0ZWNobmljYWxseSBuZWVkIHRvXG4gICAgLy8gY3JlYXRlIGFuIG9mZnNldCBmb3IgYChyZWFkVGltZSwgTUFYX0RPQ1VNRU5UX0tFWSlgLiBXaGlsZSB3ZSBjb3VsZCB1c2VcbiAgICAvLyBVbmljb2RlIGNvZGVwb2ludHMgdG8gZ2VuZXJhdGUgTUFYX0RPQ1VNRU5UX0tFWSwgaXQgaXMgbXVjaCBlYXNpZXIgdG8gdXNlXG4gICAgLy8gYChyZWFkVGltZSArIDEsIERvY3VtZW50S2V5LmVtcHR5KCkpYCBzaW5jZSBgPiBEb2N1bWVudEtleS5lbXB0eSgpYCBtYXRjaGVzXG4gICAgLy8gYWxsIHZhbGlkIGRvY3VtZW50IElEcy5cbiAgICBjb25zdCBuID0gZS50b1RpbWVzdGFtcCgpLnNlY29uZHMsIHIgPSBlLnRvVGltZXN0YW1wKCkubmFub3NlY29uZHMgKyAxLCBpID0gU25hcHNob3RWZXJzaW9uLmZyb21UaW1lc3RhbXAoMWU5ID09PSByID8gbmV3IFRpbWVzdGFtcChuICsgMSwgMCkgOiBuZXcgVGltZXN0YW1wKG4sIHIpKTtcbiAgICByZXR1cm4gbmV3IEluZGV4T2Zmc2V0KGksIERvY3VtZW50S2V5LmVtcHR5KCksIHQpO1xufVxuXG4vKiogQ3JlYXRlcyBhIG5ldyBvZmZzZXQgYmFzZWQgb24gdGhlIHByb3ZpZGVkIGRvY3VtZW50LiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3SW5kZXhPZmZzZXRGcm9tRG9jdW1lbnQoZSkge1xuICAgIHJldHVybiBuZXcgSW5kZXhPZmZzZXQoZS5yZWFkVGltZSwgZS5rZXksIFUpO1xufVxuXG4vKipcbiAqIFN0b3JlcyB0aGUgbGF0ZXN0IHJlYWQgdGltZSwgZG9jdW1lbnQgYW5kIGJhdGNoIElEIHRoYXQgd2VyZSBwcm9jZXNzZWQgZm9yIGFuXG4gKiBpbmRleC5cbiAqLyBjbGFzcyBJbmRleE9mZnNldCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIGxhdGVzdCByZWFkIHRpbWUgdmVyc2lvbiB0aGF0IGhhcyBiZWVuIGluZGV4ZWQgYnkgRmlyZXN0b3JlIGZvciB0aGlzXG4gICAgICogZmllbGQgaW5kZXguXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogVGhlIGtleSBvZiB0aGUgbGFzdCBkb2N1bWVudCB0aGF0IHdhcyBpbmRleGVkIGZvciB0aGlzIHF1ZXJ5LiBVc2VcbiAgICAgKiBgRG9jdW1lbnRLZXkuZW1wdHkoKWAgaWYgbm8gZG9jdW1lbnQgaGFzIGJlZW4gaW5kZXhlZC5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKlxuICAgICAqIFRoZSBsYXJnZXN0IG11dGF0aW9uIGJhdGNoIGlkIHRoYXQncyBiZWVuIHByb2Nlc3NlZCBieSBGaXJlc3RvcmUuXG4gICAgICovXG4gICAgbikge1xuICAgICAgICB0aGlzLnJlYWRUaW1lID0gZSwgdGhpcy5kb2N1bWVudEtleSA9IHQsIHRoaXMubGFyZ2VzdEJhdGNoSWQgPSBuO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhbiBvZmZzZXQgdGhhdCBzb3J0cyBiZWZvcmUgYWxsIHJlZ3VsYXIgb2Zmc2V0cy4gKi8gICAgc3RhdGljIG1pbigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJbmRleE9mZnNldChTbmFwc2hvdFZlcnNpb24ubWluKCksIERvY3VtZW50S2V5LmVtcHR5KCksIFUpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhbiBvZmZzZXQgdGhhdCBzb3J0cyBhZnRlciBhbGwgcmVndWxhciBvZmZzZXRzLiAqLyAgICBzdGF0aWMgbWF4KCkge1xuICAgICAgICByZXR1cm4gbmV3IEluZGV4T2Zmc2V0KFNuYXBzaG90VmVyc2lvbi5tYXgoKSwgRG9jdW1lbnRLZXkuZW1wdHkoKSwgVSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfaW5kZXhPZmZzZXRDb21wYXJhdG9yKGUsIHQpIHtcbiAgICBsZXQgbiA9IGUucmVhZFRpbWUuY29tcGFyZVRvKHQucmVhZFRpbWUpO1xuICAgIHJldHVybiAwICE9PSBuID8gbiA6IChuID0gRG9jdW1lbnRLZXkuY29tcGFyYXRvcihlLmRvY3VtZW50S2V5LCB0LmRvY3VtZW50S2V5KSwgXG4gICAgMCAhPT0gbiA/IG4gOiBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihlLmxhcmdlc3RCYXRjaElkLCB0Lmxhcmdlc3RCYXRjaElkKSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IEsgPSBcIlRoZSBjdXJyZW50IHRhYiBpcyBub3QgaW4gdGhlIHJlcXVpcmVkIHN0YXRlIHRvIHBlcmZvcm0gdGhpcyBvcGVyYXRpb24uIEl0IG1pZ2h0IGJlIG5lY2Vzc2FyeSB0byByZWZyZXNoIHRoZSBicm93c2VyIHRhYi5cIjtcblxuLyoqXG4gKiBBIGJhc2UgY2xhc3MgcmVwcmVzZW50aW5nIGEgcGVyc2lzdGVuY2UgdHJhbnNhY3Rpb24sIGVuY2Fwc3VsYXRpbmcgYm90aCB0aGVcbiAqIHRyYW5zYWN0aW9uJ3Mgc2VxdWVuY2UgbnVtYmVycyBhcyB3ZWxsIGFzIGEgbGlzdCBvZiBvbkNvbW1pdHRlZCBsaXN0ZW5lcnMuXG4gKlxuICogV2hlbiB5b3UgY2FsbCBQZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbigpLCBpdCB3aWxsIGNyZWF0ZSBhIHRyYW5zYWN0aW9uIGFuZFxuICogcGFzcyBpdCB0byB5b3VyIGNhbGxiYWNrLiBZb3UgdGhlbiBwYXNzIGl0IHRvIGFueSBtZXRob2QgdGhhdCBvcGVyYXRlc1xuICogb24gcGVyc2lzdGVuY2UuXG4gKi8gY2xhc3MgUGVyc2lzdGVuY2VUcmFuc2FjdGlvbiB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMub25Db21taXR0ZWRMaXN0ZW5lcnMgPSBbXTtcbiAgICB9XG4gICAgYWRkT25Db21taXR0ZWRMaXN0ZW5lcihlKSB7XG4gICAgICAgIHRoaXMub25Db21taXR0ZWRMaXN0ZW5lcnMucHVzaChlKTtcbiAgICB9XG4gICAgcmFpc2VPbkNvbW1pdHRlZEV2ZW50KCkge1xuICAgICAgICB0aGlzLm9uQ29tbWl0dGVkTGlzdGVuZXJzLmZvckVhY2goKGUgPT4gZSgpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBWZXJpZmllcyB0aGUgZXJyb3IgdGhyb3duIGJ5IGEgTG9jYWxTdG9yZSBvcGVyYXRpb24uIElmIGEgTG9jYWxTdG9yZVxuICogb3BlcmF0aW9uIGZhaWxzIGJlY2F1c2UgdGhlIHByaW1hcnkgbGVhc2UgaGFzIGJlZW4gdGFrZW4gYnkgYW5vdGhlciBjbGllbnQsXG4gKiB3ZSBpZ25vcmUgdGhlIGVycm9yICh0aGUgcGVyc2lzdGVuY2UgbGF5ZXIgd2lsbCBpbW1lZGlhdGVseSBjYWxsXG4gKiBgYXBwbHlQcmltYXJ5TGVhc2VgIHRvIHByb3BhZ2F0ZSB0aGUgcHJpbWFyeSBzdGF0ZSBjaGFuZ2UpLiBBbGwgb3RoZXIgZXJyb3JzXG4gKiBhcmUgcmUtdGhyb3duLlxuICpcbiAqIEBwYXJhbSBlcnIgLSBBbiBlcnJvciByZXR1cm5lZCBieSBhIExvY2FsU3RvcmUgb3BlcmF0aW9uLlxuICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgYWZ0ZXIgd2UgcmVjb3ZlcmVkLCBvciB0aGUgb3JpZ2luYWwgZXJyb3IuXG4gKi8gYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2lnbm9yZUlmUHJpbWFyeUxlYXNlTG9zcyhlKSB7XG4gICAgaWYgKGUuY29kZSAhPT0gTi5GQUlMRURfUFJFQ09ORElUSU9OIHx8IGUubWVzc2FnZSAhPT0gSykgdGhyb3cgZTtcbiAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJMb2NhbFN0b3JlXCIsIFwiVW5leHBlY3RlZGx5IGxvc3QgcHJpbWFyeSBsZWFzZVwiKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUGVyc2lzdGVuY2VQcm9taXNlIGlzIGVzc2VudGlhbGx5IGEgcmUtaW1wbGVtZW50YXRpb24gb2YgUHJvbWlzZSBleGNlcHRcbiAqIGl0IGhhcyBhIC5uZXh0KCkgbWV0aG9kIGluc3RlYWQgb2YgLnRoZW4oKSBhbmQgLm5leHQoKSBhbmQgLmNhdGNoKCkgY2FsbGJhY2tzXG4gKiBhcmUgZXhlY3V0ZWQgc3luY2hyb25vdXNseSB3aGVuIGEgUGVyc2lzdGVuY2VQcm9taXNlIHJlc29sdmVzIHJhdGhlciB0aGFuXG4gKiBhc3luY2hyb25vdXNseSAoUHJvbWlzZSBpbXBsZW1lbnRhdGlvbnMgdXNlIHNldEltbWVkaWF0ZSgpIG9yIHNpbWlsYXIpLlxuICpcbiAqIFRoaXMgaXMgbmVjZXNzYXJ5IHRvIGludGVyb3BlcmF0ZSB3aXRoIEluZGV4ZWREQiB3aGljaCB3aWxsIGF1dG9tYXRpY2FsbHlcbiAqIGNvbW1pdCB0cmFuc2FjdGlvbnMgaWYgY29udHJvbCBpcyByZXR1cm5lZCB0byB0aGUgZXZlbnQgbG9vcCB3aXRob3V0XG4gKiBzeW5jaHJvbm91c2x5IGluaXRpYXRpbmcgYW5vdGhlciBvcGVyYXRpb24gb24gdGhlIHRyYW5zYWN0aW9uLlxuICpcbiAqIE5PVEU6IC50aGVuKCkgYW5kIC5jYXRjaCgpIG9ubHkgYWxsb3cgYSBzaW5nbGUgY29uc3VtZXIsIHVubGlrZSBub3JtYWxcbiAqIFByb21pc2VzLlxuICovIGNsYXNzIFBlcnNpc3RlbmNlUHJvbWlzZSB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICAvLyBOT1RFOiBuZXh0L2NhdGNoQ2FsbGJhY2sgd2lsbCBhbHdheXMgcG9pbnQgdG8gb3VyIG93biB3cmFwcGVyIGZ1bmN0aW9ucyxcbiAgICAgICAgLy8gbm90IHRoZSB1c2VyJ3MgcmF3IG5leHQoKSBvciBjYXRjaCgpIGNhbGxiYWNrcy5cbiAgICAgICAgdGhpcy5uZXh0Q2FsbGJhY2sgPSBudWxsLCB0aGlzLmNhdGNoQ2FsbGJhY2sgPSBudWxsLCBcbiAgICAgICAgLy8gV2hlbiB0aGUgb3BlcmF0aW9uIHJlc29sdmVzLCB3ZSdsbCBzZXQgcmVzdWx0IG9yIGVycm9yIGFuZCBtYXJrIGlzRG9uZS5cbiAgICAgICAgdGhpcy5yZXN1bHQgPSB2b2lkIDAsIHRoaXMuZXJyb3IgPSB2b2lkIDAsIHRoaXMuaXNEb25lID0gITEsIFxuICAgICAgICAvLyBTZXQgdG8gdHJ1ZSB3aGVuIC50aGVuKCkgb3IgLmNhdGNoKCkgYXJlIGNhbGxlZCBhbmQgcHJldmVudHMgYWRkaXRpb25hbFxuICAgICAgICAvLyBjaGFpbmluZy5cbiAgICAgICAgdGhpcy5jYWxsYmFja0F0dGFjaGVkID0gITEsIGUoKGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5pc0RvbmUgPSAhMCwgdGhpcy5yZXN1bHQgPSBlLCB0aGlzLm5leHRDYWxsYmFjayAmJiBcbiAgICAgICAgICAgIC8vIHZhbHVlIHNob3VsZCBiZSBkZWZpbmVkIHVubGVzcyBUIGlzIFZvaWQsIGJ1dCB3ZSBjYW4ndCBleHByZXNzXG4gICAgICAgICAgICAvLyB0aGF0IGluIHRoZSB0eXBlIHN5c3RlbS5cbiAgICAgICAgICAgIHRoaXMubmV4dENhbGxiYWNrKGUpO1xuICAgICAgICB9KSwgKGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5pc0RvbmUgPSAhMCwgdGhpcy5lcnJvciA9IGUsIHRoaXMuY2F0Y2hDYWxsYmFjayAmJiB0aGlzLmNhdGNoQ2FsbGJhY2soZSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgY2F0Y2goZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5uZXh0KHZvaWQgMCwgZSk7XG4gICAgfVxuICAgIG5leHQoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxsYmFja0F0dGFjaGVkICYmIGZhaWwoNTk0NDApLCB0aGlzLmNhbGxiYWNrQXR0YWNoZWQgPSAhMCwgdGhpcy5pc0RvbmUgPyB0aGlzLmVycm9yID8gdGhpcy53cmFwRmFpbHVyZSh0LCB0aGlzLmVycm9yKSA6IHRoaXMud3JhcFN1Y2Nlc3MoZSwgdGhpcy5yZXN1bHQpIDogbmV3IFBlcnNpc3RlbmNlUHJvbWlzZSgoKG4sIHIpID0+IHtcbiAgICAgICAgICAgIHRoaXMubmV4dENhbGxiYWNrID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy53cmFwU3VjY2VzcyhlLCB0KS5uZXh0KG4sIHIpO1xuICAgICAgICAgICAgfSwgdGhpcy5jYXRjaENhbGxiYWNrID0gZSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy53cmFwRmFpbHVyZSh0LCBlKS5uZXh0KG4sIHIpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b1Byb21pc2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgoKGUsIHQpID0+IHtcbiAgICAgICAgICAgIHRoaXMubmV4dChlLCB0KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB3cmFwVXNlckZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlKCk7XG4gICAgICAgICAgICByZXR1cm4gdCBpbnN0YW5jZW9mIFBlcnNpc3RlbmNlUHJvbWlzZSA/IHQgOiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0KTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZWplY3QoZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgd3JhcFN1Y2Nlc3MoZSwgdCkge1xuICAgICAgICByZXR1cm4gZSA/IHRoaXMud3JhcFVzZXJGdW5jdGlvbigoKCkgPT4gZSh0KSkpIDogUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodCk7XG4gICAgfVxuICAgIHdyYXBGYWlsdXJlKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIGUgPyB0aGlzLndyYXBVc2VyRnVuY3Rpb24oKCgpID0+IGUodCkpKSA6IFBlcnNpc3RlbmNlUHJvbWlzZS5yZWplY3QodCk7XG4gICAgfVxuICAgIHN0YXRpYyByZXNvbHZlKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQZXJzaXN0ZW5jZVByb21pc2UoKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICB0KGUpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHN0YXRpYyByZWplY3QoZSkge1xuICAgICAgICByZXR1cm4gbmV3IFBlcnNpc3RlbmNlUHJvbWlzZSgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIG4oZSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc3RhdGljIHdhaXRGb3IoXG4gICAgLy8gQWNjZXB0IGFsbCBQcm9taXNlIHR5cGVzIGluIHdhaXRGb3IoKS5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQZXJzaXN0ZW5jZVByb21pc2UoKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICBsZXQgciA9IDAsIGkgPSAwLCBzID0gITE7XG4gICAgICAgICAgICBlLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgICAgICsrciwgZS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICsraSwgcyAmJiBpID09PSByICYmIHQoKTtcbiAgICAgICAgICAgICAgICB9KSwgKGUgPT4gbihlKSkpO1xuICAgICAgICAgICAgfSkpLCBzID0gITAsIGkgPT09IHIgJiYgdCgpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdpdmVuIGFuIGFycmF5IG9mIHByZWRpY2F0ZSBmdW5jdGlvbnMgdGhhdCBhc3luY2hyb25vdXNseSBldmFsdWF0ZSB0byBhXG4gICAgICogYm9vbGVhbiwgaW1wbGVtZW50cyBhIHNob3J0LWNpcmN1aXRpbmcgYG9yYCBiZXR3ZWVuIHRoZSByZXN1bHRzLiBQcmVkaWNhdGVzXG4gICAgICogd2lsbCBiZSBldmFsdWF0ZWQgdW50aWwgb25lIG9mIHRoZW0gcmV0dXJucyBgdHJ1ZWAsIHRoZW4gc3RvcC4gVGhlIGZpbmFsXG4gICAgICogcmVzdWx0IHdpbGwgYmUgd2hldGhlciBhbnkgb2YgdGhlbSByZXR1cm5lZCBgdHJ1ZWAuXG4gICAgICovICAgIHN0YXRpYyBvcihlKSB7XG4gICAgICAgIGxldCB0ID0gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoITEpO1xuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgZSkgdCA9IHQubmV4dCgoZSA9PiBlID8gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoZSkgOiBuKCkpKTtcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxuICAgIHN0YXRpYyBmb3JFYWNoKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IFtdO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCgoZSwgcikgPT4ge1xuICAgICAgICAgICAgbi5wdXNoKHQuY2FsbCh0aGlzLCBlLCByKSk7XG4gICAgICAgIH0pKSwgdGhpcy53YWl0Rm9yKG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb25jdXJyZW50bHkgbWFwIGFsbCBhcnJheSBlbGVtZW50cyB0aHJvdWdoIGFzeW5jaHJvbm91cyBmdW5jdGlvbi5cbiAgICAgKi8gICAgc3RhdGljIG1hcEFycmF5KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQZXJzaXN0ZW5jZVByb21pc2UoKChuLCByKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gZS5sZW5ndGgsIHMgPSBuZXcgQXJyYXkoaSk7XG4gICAgICAgICAgICBsZXQgbyA9IDA7XG4gICAgICAgICAgICBmb3IgKGxldCBfID0gMDsgXyA8IGk7IF8rKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBfO1xuICAgICAgICAgICAgICAgIHQoZVthXSkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNbYV0gPSBlLCArK28sIG8gPT09IGkgJiYgbihzKTtcbiAgICAgICAgICAgICAgICB9KSwgKGUgPT4gcihlKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFuIGFsdGVybmF0aXZlIHRvIHJlY3Vyc2l2ZSBQZXJzaXN0ZW5jZVByb21pc2UgY2FsbHMsIHRoYXQgYXZvaWRzXG4gICAgICogcG90ZW50aWFsIG1lbW9yeSBwcm9ibGVtcyBmcm9tIHVuYm91bmRlZCBjaGFpbnMgb2YgcHJvbWlzZXMuXG4gICAgICpcbiAgICAgKiBUaGUgYGFjdGlvbmAgd2lsbCBiZSBjYWxsZWQgcmVwZWF0ZWRseSB3aGlsZSBgY29uZGl0aW9uYCBpcyB0cnVlLlxuICAgICAqLyAgICBzdGF0aWMgZG9XaGlsZShlLCB0KSB7XG4gICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VQcm9taXNlKCgobiwgcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgcHJvY2VzcyA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAhMCA9PT0gZSgpID8gdCgpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2VzcygpO1xuICAgICAgICAgICAgICAgIH0pLCByKSA6IG4oKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBwcm9jZXNzKCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBSZWZlcmVuY2VzIHRvIGBpbmRleGVkREJgIGFyZSBndWFyZGVkIGJ5IFNpbXBsZURiLmlzQXZhaWxhYmxlKCkgYW5kIGdldEdsb2JhbCgpXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1yZXN0cmljdGVkLWdsb2JhbHMgKi8gY29uc3QgVyA9IFwiU2ltcGxlRGJcIjtcblxuLyoqXG4gKiBUaGUgbWF4aW11bSBudW1iZXIgb2YgcmV0cnkgYXR0ZW1wdHMgZm9yIGFuIEluZGV4ZWREYiB0cmFuc2FjdGlvbiB0aGF0IGZhaWxzXG4gKiB3aXRoIGEgRE9NRXhjZXB0aW9uLlxuICovXG4vKipcbiAqIFdyYXBzIGFuIElEQlRyYW5zYWN0aW9uIGFuZCBleHBvc2VzIGEgc3RvcmUoKSBtZXRob2QgdG8gZ2V0IGEgaGFuZGxlIHRvIGFcbiAqIHNwZWNpZmljIG9iamVjdCBzdG9yZS5cbiAqL1xuY2xhc3MgX19QUklWQVRFX1NpbXBsZURiVHJhbnNhY3Rpb24ge1xuICAgIHN0YXRpYyBvcGVuKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1NpbXBsZURiVHJhbnNhY3Rpb24odCwgZS50cmFuc2FjdGlvbihyLCBuKSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBfX1BSSVZBVEVfSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvcih0LCBlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMuYWN0aW9uID0gZSwgdGhpcy50cmFuc2FjdGlvbiA9IHQsIHRoaXMuYWJvcnRlZCA9ICExLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgYFByb21pc2VgIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgcmVzdWx0IG9mIHRoZSBJbmRleGVkRGIgdHJhbnNhY3Rpb24uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLlMgPSBuZXcgX19QUklWQVRFX0RlZmVycmVkLCB0aGlzLnRyYW5zYWN0aW9uLm9uY29tcGxldGUgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLlMucmVzb2x2ZSgpO1xuICAgICAgICB9LCB0aGlzLnRyYW5zYWN0aW9uLm9uYWJvcnQgPSAoKSA9PiB7XG4gICAgICAgICAgICB0LmVycm9yID8gdGhpcy5TLnJlamVjdChuZXcgX19QUklWQVRFX0luZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IoZSwgdC5lcnJvcikpIDogdGhpcy5TLnJlc29sdmUoKTtcbiAgICAgICAgfSwgdGhpcy50cmFuc2FjdGlvbi5vbmVycm9yID0gdCA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2NoZWNrRm9yQW5kUmVwb3J0aU9TRXJyb3IodC50YXJnZXQuZXJyb3IpO1xuICAgICAgICAgICAgdGhpcy5TLnJlamVjdChuZXcgX19QUklWQVRFX0luZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IoZSwgbikpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBnZXQgRCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuUy5wcm9taXNlO1xuICAgIH1cbiAgICBhYm9ydChlKSB7XG4gICAgICAgIGUgJiYgdGhpcy5TLnJlamVjdChlKSwgdGhpcy5hYm9ydGVkIHx8IChfX1BSSVZBVEVfbG9nRGVidWcoVywgXCJBYm9ydGluZyB0cmFuc2FjdGlvbjpcIiwgZSA/IGUubWVzc2FnZSA6IFwiQ2xpZW50LWluaXRpYXRlZCBhYm9ydFwiKSwgXG4gICAgICAgIHRoaXMuYWJvcnRlZCA9ICEwLCB0aGlzLnRyYW5zYWN0aW9uLmFib3J0KCkpO1xuICAgIH1cbiAgICBDKCkge1xuICAgICAgICAvLyBJZiB0aGUgYnJvd3NlciBzdXBwb3J0cyBWMyBJbmRleGVkREIsIHdlIGludm9rZSBjb21taXQoKSBleHBsaWNpdGx5IHRvXG4gICAgICAgIC8vIHNwZWVkIHVwIGluZGV4IERCIHByb2Nlc3NpbmcgaWYgdGhlIGV2ZW50IGxvb3AgcmVtYWlucyBibG9ja3MuXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnRyYW5zYWN0aW9uO1xuICAgICAgICB0aGlzLmFib3J0ZWQgfHwgXCJmdW5jdGlvblwiICE9IHR5cGVvZiBlLmNvbW1pdCB8fCBlLmNvbW1pdCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgU2ltcGxlRGJTdG9yZTxLZXlUeXBlLCBWYWx1ZVR5cGU+IGZvciB0aGUgc3BlY2lmaWVkIHN0b3JlLiBBbGxcbiAgICAgKiBvcGVyYXRpb25zIHBlcmZvcm1lZCBvbiB0aGUgU2ltcGxlRGJTdG9yZSBoYXBwZW4gd2l0aGluIHRoZSBjb250ZXh0IG9mIHRoaXNcbiAgICAgKiB0cmFuc2FjdGlvbiBhbmQgaXQgY2Fubm90IGJlIHVzZWQgYW55bW9yZSBvbmNlIHRoZSB0cmFuc2FjdGlvbiBpc1xuICAgICAqIGNvbXBsZXRlZC5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCB3ZSBjYW4ndCBhY3R1YWxseSBlbmZvcmNlIHRoYXQgdGhlIEtleVR5cGUgYW5kIFZhbHVlVHlwZSBhcmVcbiAgICAgKiBjb3JyZWN0LCBidXQgdGhleSBhbGxvdyB0eXBlIHNhZmV0eSB0aHJvdWdoIHRoZSByZXN0IG9mIHRoZSBjb25zdW1pbmcgY29kZS5cbiAgICAgKi8gICAgc3RvcmUoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy50cmFuc2FjdGlvbi5vYmplY3RTdG9yZShlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfU2ltcGxlRGJTdG9yZSh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogUHJvdmlkZXMgYSB3cmFwcGVyIGFyb3VuZCBJbmRleGVkRGIgd2l0aCBhIHNpbXBsaWZpZWQgaW50ZXJmYWNlIHRoYXQgdXNlc1xuICogUHJvbWlzZS1saWtlIHJldHVybiB2YWx1ZXMgdG8gY2hhaW4gb3BlcmF0aW9ucy4gUmVhbCBwcm9taXNlcyBjYW5ub3QgYmUgdXNlZFxuICogc2luY2UgLnRoZW4oKSBjb250aW51YXRpb25zIGFyZSBleGVjdXRlZCBhc3luY2hyb25vdXNseSAoZS5nLiB2aWFcbiAqIC5zZXRJbW1lZGlhdGUpLCB3aGljaCB3b3VsZCBjYXVzZSBJbmRleGVkREIgdG8gZW5kIHRoZSB0cmFuc2FjdGlvbi5cbiAqIFNlZSBQZXJzaXN0ZW5jZVByb21pc2UgZm9yIG1vcmUgZGV0YWlscy5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfU2ltcGxlRGIge1xuICAgIC8qKiBEZWxldGVzIHRoZSBzcGVjaWZpZWQgZGF0YWJhc2UuICovXG4gICAgc3RhdGljIGRlbGV0ZShlKSB7XG4gICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhXLCBcIlJlbW92aW5nIGRhdGFiYXNlOlwiLCBlKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV93cmFwUmVxdWVzdChnZXRHbG9iYWwoKS5pbmRleGVkREIuZGVsZXRlRGF0YWJhc2UoZSkpLnRvUHJvbWlzZSgpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0cnVlIGlmIEluZGV4ZWREQiBpcyBhdmFpbGFibGUgaW4gdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQuICovICAgIHN0YXRpYyB2KCkge1xuICAgICAgICBpZiAoIWlzSW5kZXhlZERCQXZhaWxhYmxlKCkpIHJldHVybiAhMTtcbiAgICAgICAgaWYgKF9fUFJJVkFURV9TaW1wbGVEYi5GKCkpIHJldHVybiAhMDtcbiAgICAgICAgLy8gV2UgZXh0ZW5zaXZlbHkgdXNlIGluZGV4ZWQgYXJyYXkgdmFsdWVzIGFuZCBjb21wb3VuZCBrZXlzLFxuICAgICAgICAvLyB3aGljaCBJRSBhbmQgRWRnZSBkbyBub3Qgc3VwcG9ydC4gSG93ZXZlciwgdGhleSBzdGlsbCBoYXZlIGluZGV4ZWREQlxuICAgICAgICAvLyBkZWZpbmVkIG9uIHRoZSB3aW5kb3csIHNvIHdlIG5lZWQgdG8gY2hlY2sgZm9yIHRoZW0gaGVyZSBhbmQgbWFrZSBzdXJlXG4gICAgICAgIC8vIHRvIHJldHVybiB0aGF0IHBlcnNpc3RlbmNlIGlzIG5vdCBlbmFibGVkIGZvciB0aG9zZSBicm93c2Vycy5cbiAgICAgICAgLy8gRm9yIHRyYWNraW5nIHN1cHBvcnQgb2YgdGhpcyBmZWF0dXJlLCBzZWUgaGVyZTpcbiAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubWljcm9zb2Z0LmNvbS9lbi11cy9taWNyb3NvZnQtZWRnZS9wbGF0Zm9ybS9zdGF0dXMvaW5kZXhlZGRiYXJyYXlzYW5kbXVsdGllbnRyeXN1cHBvcnQvXG4gICAgICAgIC8vIENoZWNrIHRoZSBVQSBzdHJpbmcgdG8gZmluZCBvdXQgdGhlIGJyb3dzZXIuXG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IGdldFVBKCksIHQgPSBfX1BSSVZBVEVfU2ltcGxlRGIuTShlKSwgbiA9IDAgPCB0ICYmIHQgPCAxMCwgciA9IF9fUFJJVkFURV9nZXRBbmRyb2lkVmVyc2lvbihlKSwgaSA9IDAgPCByICYmIHIgPCA0LjU7XG4gICAgICAgIC8vIElFIDEwXG4gICAgICAgIC8vIHVhID0gJ01vemlsbGEvNS4wIChjb21wYXRpYmxlOyBNU0lFIDEwLjA7IFdpbmRvd3MgTlQgNi4yOyBUcmlkZW50LzYuMCknO1xuICAgICAgICAvLyBJRSAxMVxuICAgICAgICAvLyB1YSA9ICdNb3ppbGxhLzUuMCAoV2luZG93cyBOVCA2LjM7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tvJztcbiAgICAgICAgLy8gRWRnZVxuICAgICAgICAvLyB1YSA9ICdNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXT1c2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCxcbiAgICAgICAgLy8gbGlrZSBHZWNrbykgQ2hyb21lLzM5LjAuMjE3MS43MSBTYWZhcmkvNTM3LjM2IEVkZ2UvMTIuMCc7XG4gICAgICAgIC8vIGlPUyBTYWZhcmk6IERpc2FibGUgZm9yIHVzZXJzIHJ1bm5pbmcgaU9TIHZlcnNpb24gPCAxMC5cbiAgICAgICAgICAgICAgICByZXR1cm4gIShlLmluZGV4T2YoXCJNU0lFIFwiKSA+IDAgfHwgZS5pbmRleE9mKFwiVHJpZGVudC9cIikgPiAwIHx8IGUuaW5kZXhPZihcIkVkZ2UvXCIpID4gMCB8fCBuIHx8IGkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGJhY2tpbmcgSW5kZXhlZERCIHN0b3JlIGlzIHRoZSBOb2RlIEluZGV4ZWREQlNoaW1cbiAgICAgKiAoc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9heGVtY2xpb24vSW5kZXhlZERCU2hpbSkuXG4gICAgICovICAgIHN0YXRpYyBGKCkge1xuICAgICAgICByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgcHJvY2VzcyAmJiBcIllFU1wiID09PSBwcm9jZXNzLl9fUFJJVkFURV9lbnY/Ll9fUFJJVkFURV9VU0VfTU9DS19QRVJTSVNURU5DRTtcbiAgICB9XG4gICAgLyoqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZyb20gYSB0cmFuc2FjdGlvbi4gKi8gICAgc3RhdGljIE8oZSwgdCkge1xuICAgICAgICByZXR1cm4gZS5zdG9yZSh0KTtcbiAgICB9XG4gICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgIC8qKiBQYXJzZSBVc2VyIEFnZW50IHRvIGRldGVybWluZSBpT1MgdmVyc2lvbi4gUmV0dXJucyAtMSBpZiBub3QgZm91bmQuICovXG4gICAgc3RhdGljIE0oZSkge1xuICAgICAgICBjb25zdCB0ID0gZS5tYXRjaCgvaSg/OnBob25lfHBhZHxwb2QpIG9zIChbXFxkX10rKS9pKSwgbiA9IHQgPyB0WzFdLnNwbGl0KFwiX1wiKS5zbGljZSgwLCAyKS5qb2luKFwiLlwiKSA6IFwiLTFcIjtcbiAgICAgICAgcmV0dXJuIE51bWJlcihuKTtcbiAgICB9XG4gICAgLypcbiAgICAgKiBDcmVhdGVzIGEgbmV3IFNpbXBsZURiIHdyYXBwZXIgZm9yIEluZGV4ZWREYiBkYXRhYmFzZSBgbmFtZWAuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgYHZlcnNpb25gIG11c3Qgbm90IGJlIGEgZG93bmdyYWRlLiBJbmRleGVkREIgZG9lcyBub3Qgc3VwcG9ydFxuICAgICAqIGRvd25ncmFkaW5nIHRoZSBzY2hlbWEgdmVyc2lvbi4gV2UgY3VycmVudGx5IGRvIG5vdCBzdXBwb3J0IGFueSB3YXkgdG8gZG9cbiAgICAgKiB2ZXJzaW9uaW5nIG91dHNpZGUgb2YgSW5kZXhlZERCJ3MgdmVyc2lvbmluZyBtZWNoYW5pc20sIGFzIG9ubHlcbiAgICAgKiB2ZXJzaW9uLXVwZ3JhZGUgdHJhbnNhY3Rpb25zIGFyZSBhbGxvd2VkIHRvIGRvIHRoaW5ncyBsaWtlIGNyZWF0ZVxuICAgICAqIG9iamVjdHN0b3Jlcy5cbiAgICAgKi8gICAgY29uc3RydWN0b3IoZSwgdCwgbikge1xuICAgICAgICB0aGlzLm5hbWUgPSBlLCB0aGlzLnZlcnNpb24gPSB0LCB0aGlzLk4gPSBuLCB0aGlzLkIgPSBudWxsO1xuICAgICAgICAvLyBOT1RFOiBBY2NvcmRpbmcgdG8gaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTE5NzA1MCwgdGhlXG4gICAgICAgIC8vIGJ1ZyB3ZSdyZSBjaGVja2luZyBmb3Igc2hvdWxkIGV4aXN0IGluIGlPUyA+PSAxMi4yIGFuZCA8IDEzLCBidXQgZm9yXG4gICAgICAgIC8vIHdoYXRldmVyIHJlYXNvbiBpdCdzIG11Y2ggaGFyZGVyIHRvIGhpdCBhZnRlciAxMi4yIHNvIHdlIG9ubHkgcHJvYWN0aXZlbHlcbiAgICAgICAgLy8gbG9nIG9uIDEyLjIuXG4gICAgICAgIDEyLjIgPT09IF9fUFJJVkFURV9TaW1wbGVEYi5NKGdldFVBKCkpICYmIF9fUFJJVkFURV9sb2dFcnJvcihcIkZpcmVzdG9yZSBwZXJzaXN0ZW5jZSBzdWZmZXJzIGZyb20gYSBidWcgaW4gaU9TIDEyLjIgU2FmYXJpIHRoYXQgbWF5IGNhdXNlIHlvdXIgYXBwIHRvIHN0b3Agd29ya2luZy4gU2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcS81NjQ5NjI5Ni8xMTA5MTUgZm9yIGRldGFpbHMgYW5kIGEgcG90ZW50aWFsIHdvcmthcm91bmQuXCIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBPcGVucyB0aGUgc3BlY2lmaWVkIGRhdGFiYXNlLCBjcmVhdGluZyBvciB1cGdyYWRpbmcgaXQgaWYgbmVjZXNzYXJ5LlxuICAgICAqLyAgICBhc3luYyBMKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIgfHwgKF9fUFJJVkFURV9sb2dEZWJ1ZyhXLCBcIk9wZW5pbmcgZGF0YWJhc2U6XCIsIHRoaXMubmFtZSksIHRoaXMuZGIgPSBhd2FpdCBuZXcgUHJvbWlzZSgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIC8vIFRPRE8obWlrZWxlaGVuKTogSW52ZXN0aWdhdGUgYnJvd3NlciBjb21wYXRpYmlsaXR5LlxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0luZGV4ZWREQl9BUEkvVXNpbmdfSW5kZXhlZERCXG4gICAgICAgICAgICAvLyBzdWdnZXN0cyBJRTkgYW5kIG9sZGVyIFdlYktpdCBicm93c2VycyBoYW5kbGUgdXBncmFkZVxuICAgICAgICAgICAgLy8gZGlmZmVyZW50bHkuIFRoZXkgZXhwZWN0IHNldFZlcnNpb24sIGFzIGRlc2NyaWJlZCBoZXJlOlxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0lEQlZlcnNpb25DaGFuZ2VSZXF1ZXN0L3NldFZlcnNpb25cbiAgICAgICAgICAgIGNvbnN0IHIgPSBpbmRleGVkREIub3Blbih0aGlzLm5hbWUsIHRoaXMudmVyc2lvbik7XG4gICAgICAgICAgICByLm9uc3VjY2VzcyA9IGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBlLnRhcmdldC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgdChuKTtcbiAgICAgICAgICAgIH0sIHIub25ibG9ja2VkID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIG4obmV3IF9fUFJJVkFURV9JbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yKGUsIFwiQ2Fubm90IHVwZ3JhZGUgSW5kZXhlZERCIHNjaGVtYSB3aGlsZSBhbm90aGVyIHRhYiBpcyBvcGVuLiBDbG9zZSBhbGwgdGFicyB0aGF0IGFjY2VzcyBGaXJlc3RvcmUgYW5kIHJlbG9hZCB0aGlzIHBhZ2UgdG8gcHJvY2VlZC5cIikpO1xuICAgICAgICAgICAgfSwgci5vbmVycm9yID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IHQudGFyZ2V0LmVycm9yO1xuICAgICAgICAgICAgICAgIFwiVmVyc2lvbkVycm9yXCIgPT09IHIubmFtZSA/IG4obmV3IEZpcmVzdG9yZUVycm9yKE4uRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJBIG5ld2VyIHZlcnNpb24gb2YgdGhlIEZpcmVzdG9yZSBTREsgd2FzIHByZXZpb3VzbHkgdXNlZCBhbmQgc28gdGhlIHBlcnNpc3RlZCBkYXRhIGlzIG5vdCBjb21wYXRpYmxlIHdpdGggdGhlIHZlcnNpb24gb2YgdGhlIFNESyB5b3UgYXJlIG5vdyB1c2luZy4gVGhlIFNESyB3aWxsIG9wZXJhdGUgd2l0aCBwZXJzaXN0ZW5jZSBkaXNhYmxlZC4gSWYgeW91IG5lZWQgcGVyc2lzdGVuY2UsIHBsZWFzZSByZS11cGdyYWRlIHRvIGEgbmV3ZXIgdmVyc2lvbiBvZiB0aGUgU0RLIG9yIGVsc2UgY2xlYXIgdGhlIHBlcnNpc3RlZCBJbmRleGVkREIgZGF0YSBmb3IgeW91ciBhcHAgdG8gc3RhcnQgZnJlc2guXCIpKSA6IFwiSW52YWxpZFN0YXRlRXJyb3JcIiA9PT0gci5uYW1lID8gbihuZXcgRmlyZXN0b3JlRXJyb3IoTi5GQUlMRURfUFJFQ09ORElUSU9OLCBcIlVuYWJsZSB0byBvcGVuIGFuIEluZGV4ZWREQiBjb25uZWN0aW9uLiBUaGlzIGNvdWxkIGJlIGR1ZSB0byBydW5uaW5nIGluIGEgcHJpdmF0ZSBicm93c2luZyBzZXNzaW9uIG9uIGEgYnJvd3NlciB3aG9zZSBwcml2YXRlIGJyb3dzaW5nIHNlc3Npb25zIGRvIG5vdCBzdXBwb3J0IEluZGV4ZWREQjogXCIgKyByKSkgOiBuKG5ldyBfX1BSSVZBVEVfSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvcihlLCByKSk7XG4gICAgICAgICAgICB9LCByLm9udXBncmFkZW5lZWRlZCA9IGUgPT4ge1xuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhXLCAnRGF0YWJhc2UgXCInICsgdGhpcy5uYW1lICsgJ1wiIHJlcXVpcmVzIHVwZ3JhZGUgZnJvbSB2ZXJzaW9uOicsIGUub2xkVmVyc2lvbik7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IGUudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgICAgICAgICB0aGlzLk4uayh0LCByLnRyYW5zYWN0aW9uLCBlLm9sZFZlcnNpb24sIHRoaXMudmVyc2lvbikubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoVywgXCJEYXRhYmFzZSB1cGdyYWRlIHRvIHZlcnNpb24gXCIgKyB0aGlzLnZlcnNpb24gKyBcIiBjb21wbGV0ZVwiKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSkpLCB0aGlzLnEgJiYgKHRoaXMuZGIub252ZXJzaW9uY2hhbmdlID0gZSA9PiB0aGlzLnEoZSkpLCB0aGlzLmRiO1xuICAgIH1cbiAgICAkKGUpIHtcbiAgICAgICAgdGhpcy5xID0gZSwgdGhpcy5kYiAmJiAodGhpcy5kYi5vbnZlcnNpb25jaGFuZ2UgPSB0ID0+IGUodCkpO1xuICAgIH1cbiAgICBhc3luYyBydW5UcmFuc2FjdGlvbihlLCB0LCBuLCByKSB7XG4gICAgICAgIGNvbnN0IGkgPSBcInJlYWRvbmx5XCIgPT09IHQ7XG4gICAgICAgIGxldCBzID0gMDtcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgKytzO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLmRiID0gYXdhaXQgdGhpcy5MKGUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfU2ltcGxlRGJUcmFuc2FjdGlvbi5vcGVuKHRoaXMuZGIsIGUsIGkgPyBcInJlYWRvbmx5XCIgOiBcInJlYWR3cml0ZVwiLCBuKSwgcyA9IHIodCkubmV4dCgoZSA9PiAodC5DKCksIFxuICAgICAgICAgICAgICAgIGUpKSkuY2F0Y2goKGUgPT4gKFxuICAgICAgICAgICAgICAgIC8vIEFib3J0IHRoZSB0cmFuc2FjdGlvbiBpZiB0aGVyZSB3YXMgYW4gZXJyb3IuXG4gICAgICAgICAgICAgICAgdC5hYm9ydChlKSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlamVjdChlKSkpKS50b1Byb21pc2UoKTtcbiAgICAgICAgICAgICAgICAvLyBBcyBub3RlZCBhYm92ZSwgZXJyb3JzIGFyZSBwcm9wYWdhdGVkIGJ5IGFib3J0aW5nIHRoZSB0cmFuc2FjdGlvbi4gU29cbiAgICAgICAgICAgICAgICAvLyB3ZSBzd2FsbG93IGFueSBlcnJvciBoZXJlIHRvIGF2b2lkIHRoZSBicm93c2VyIGxvZ2dpbmcgaXQgYXMgdW5oYW5kbGVkLlxuICAgICAgICAgICAgICAgIHJldHVybiBzLmNhdGNoKCgoKSA9PiB7fSkpLCBcbiAgICAgICAgICAgICAgICAvLyBXYWl0IGZvciB0aGUgdHJhbnNhY3Rpb24gdG8gY29tcGxldGUgKGkuZS4gSW5kZXhlZERiJ3Mgb25zdWNjZXNzIGV2ZW50IHRvXG4gICAgICAgICAgICAgICAgLy8gZmlyZSksIGJ1dCBzdGlsbCByZXR1cm4gdGhlIG9yaWdpbmFsIHRyYW5zYWN0aW9uRm5SZXN1bHQgYmFjayB0byB0aGVcbiAgICAgICAgICAgICAgICAvLyBjYWxsZXIuXG4gICAgICAgICAgICAgICAgYXdhaXQgdC5ELCBzO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBlLCBuID0gXCJGaXJlYmFzZUVycm9yXCIgIT09IHQubmFtZSAmJiBzIDwgMztcbiAgICAgICAgICAgICAgICAvLyBUT0RPKHNjaG1pZHQtc2ViYXN0aWFuKTogV2UgY291bGQgcHJvYmFibHkgYmUgc21hcnRlciBhYm91dCB0aGlzIGFuZFxuICAgICAgICAgICAgICAgIC8vIG5vdCByZXRyeSBleGNlcHRpb25zIHRoYXQgYXJlIGxpa2VseSB1bnJlY292ZXJhYmxlIChzdWNoIGFzIHF1b3RhXG4gICAgICAgICAgICAgICAgLy8gZXhjZWVkZWQgZXJyb3JzKS5cbiAgICAgICAgICAgICAgICAvLyBOb3RlOiBXZSBjYW5ub3QgdXNlIGFuIGluc3RhbmNlb2YgY2hlY2sgZm9yIEZpcmVzdG9yZUV4Y2VwdGlvbiwgc2luY2UgdGhlXG4gICAgICAgICAgICAgICAgLy8gZXhjZXB0aW9uIGlzIHdyYXBwZWQgaW4gYSBnZW5lcmljIGVycm9yIGJ5IG91ciBhc3luYy9hd2FpdCBoYW5kbGluZy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9fUFJJVkFURV9sb2dEZWJ1ZyhXLCBcIlRyYW5zYWN0aW9uIGZhaWxlZCB3aXRoIGVycm9yOlwiLCB0Lm1lc3NhZ2UsIFwiUmV0cnlpbmc6XCIsIG4pLCBcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCksICFuKSByZXR1cm4gUHJvbWlzZS5yZWplY3QodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuZGIgJiYgdGhpcy5kYi5jbG9zZSgpLCB0aGlzLmRiID0gdm9pZCAwO1xuICAgIH1cbn1cblxuLyoqIFBhcnNlIFVzZXIgQWdlbnQgdG8gZGV0ZXJtaW5lIEFuZHJvaWQgdmVyc2lvbi4gUmV0dXJucyAtMSBpZiBub3QgZm91bmQuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9nZXRBbmRyb2lkVmVyc2lvbihlKSB7XG4gICAgY29uc3QgdCA9IGUubWF0Y2goL0FuZHJvaWQgKFtcXGQuXSspL2kpLCBuID0gdCA/IHRbMV0uc3BsaXQoXCIuXCIpLnNsaWNlKDAsIDIpLmpvaW4oXCIuXCIpIDogXCItMVwiO1xuICAgIHJldHVybiBOdW1iZXIobik7XG59XG5cbi8qKlxuICogQSBjb250cm9sbGVyIGZvciBpdGVyYXRpbmcgb3ZlciBhIGtleSByYW5nZSBvciBpbmRleC4gSXQgYWxsb3dzIGFuIGl0ZXJhdGVcbiAqIGNhbGxiYWNrIHRvIGRlbGV0ZSB0aGUgY3VycmVudGx5LXJlZmVyZW5jZWQgb2JqZWN0LCBvciBqdW1wIHRvIGEgbmV3IGtleVxuICogd2l0aGluIHRoZSBrZXkgcmFuZ2Ugb3IgaW5kZXguXG4gKi8gY2xhc3MgX19QUklWQVRFX0l0ZXJhdGlvbkNvbnRyb2xsZXIge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5VID0gZSwgdGhpcy5LID0gITEsIHRoaXMuVyA9IG51bGw7XG4gICAgfVxuICAgIGdldCBpc0RvbmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLks7XG4gICAgfVxuICAgIGdldCBHKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5XO1xuICAgIH1cbiAgICBzZXQgY3Vyc29yKGUpIHtcbiAgICAgICAgdGhpcy5VID0gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBjYW4gYmUgY2FsbGVkIHRvIHN0b3AgaXRlcmF0aW9uIGF0IGFueSBwb2ludC5cbiAgICAgKi8gICAgZG9uZSgpIHtcbiAgICAgICAgdGhpcy5LID0gITA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gY2FuIGJlIGNhbGxlZCB0byBza2lwIHRvIHRoYXQgbmV4dCBrZXksIHdoaWNoIGNvdWxkIGJlXG4gICAgICogYW4gaW5kZXggb3IgYSBwcmltYXJ5IGtleS5cbiAgICAgKi8gICAgaihlKSB7XG4gICAgICAgIHRoaXMuVyA9IGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlbGV0ZSB0aGUgY3VycmVudCBjdXJzb3IgdmFsdWUgZnJvbSB0aGUgb2JqZWN0IHN0b3JlLlxuICAgICAqXG4gICAgICogTk9URTogWW91IENBTk5PVCBkbyB0aGlzIHdpdGggYSBrZXlzT25seSBxdWVyeS5cbiAgICAgKi8gICAgZGVsZXRlKCkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3dyYXBSZXF1ZXN0KHRoaXMuVS5kZWxldGUoKSk7XG4gICAgfVxufVxuXG4vKiogQW4gZXJyb3IgdGhhdCB3cmFwcyBleGNlcHRpb25zIHRoYXQgdGhyb3duIGR1cmluZyBJbmRleGVkREIgZXhlY3V0aW9uLiAqLyBjbGFzcyBfX1BSSVZBVEVfSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvciBleHRlbmRzIEZpcmVzdG9yZUVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHN1cGVyKE4uVU5BVkFJTEFCTEUsIGBJbmRleGVkREIgdHJhbnNhY3Rpb24gJyR7ZX0nIGZhaWxlZDogJHt0fWApLCB0aGlzLm5hbWUgPSBcIkluZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3JcIjtcbiAgICB9XG59XG5cbi8qKiBWZXJpZmllcyB3aGV0aGVyIGBlYCBpcyBhbiBJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfaXNJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yKGUpIHtcbiAgICAvLyBVc2UgbmFtZSBlcXVhbGl0eSwgYXMgaW5zdGFuY2VvZiBjaGVja3Mgb24gZXJyb3JzIGRvbid0IHdvcmsgd2l0aCBlcnJvcnNcbiAgICAvLyB0aGF0IHdyYXAgb3RoZXIgZXJyb3JzLlxuICAgIHJldHVybiBcIkluZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3JcIiA9PT0gZS5uYW1lO1xufVxuXG4vKipcbiAqIEEgd3JhcHBlciBhcm91bmQgYW4gSURCT2JqZWN0U3RvcmUgcHJvdmlkaW5nIGFuIEFQSSB0aGF0OlxuICpcbiAqIDEpIEhhcyBnZW5lcmljIEtleVR5cGUgLyBWYWx1ZVR5cGUgcGFyYW1ldGVycyB0byBwcm92aWRlIHN0cm9uZ2x5LXR5cGVkXG4gKiBtZXRob2RzIGZvciBhY3RpbmcgYWdhaW5zdCB0aGUgb2JqZWN0IHN0b3JlLlxuICogMikgRGVhbHMgd2l0aCBJbmRleGVkREIncyBvbnN1Y2Nlc3MgLyBvbmVycm9yIGV2ZW50IGNhbGxiYWNrcywgbWFraW5nIGV2ZXJ5XG4gKiBtZXRob2QgcmV0dXJuIGEgUGVyc2lzdGVuY2VQcm9taXNlIGluc3RlYWQuXG4gKiAzKSBQcm92aWRlcyBhIGhpZ2hlci1sZXZlbCBBUEkgdG8gYXZvaWQgbmVlZGluZyB0byBkbyBleGNlc3NpdmUgd3JhcHBpbmcgb2ZcbiAqIGludGVybWVkaWF0ZSBJbmRleGVkREIgdHlwZXMgKElEQkN1cnNvcldpdGhWYWx1ZSwgZXRjLilcbiAqLyBjbGFzcyBfX1BSSVZBVEVfU2ltcGxlRGJTdG9yZSB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLnN0b3JlID0gZTtcbiAgICB9XG4gICAgcHV0KGUsIHQpIHtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IHQgPyAoX19QUklWQVRFX2xvZ0RlYnVnKFcsIFwiUFVUXCIsIHRoaXMuc3RvcmUubmFtZSwgZSwgdCksIG4gPSB0aGlzLnN0b3JlLnB1dCh0LCBlKSkgOiAoX19QUklWQVRFX2xvZ0RlYnVnKFcsIFwiUFVUXCIsIHRoaXMuc3RvcmUubmFtZSwgXCI8YXV0by1rZXk+XCIsIGUpLCBcbiAgICAgICAgbiA9IHRoaXMuc3RvcmUucHV0KGUpKSwgX19QUklWQVRFX3dyYXBSZXF1ZXN0KG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgbmV3IHZhbHVlIGludG8gYW4gT2JqZWN0IFN0b3JlIGFuZCByZXR1cm5zIHRoZSBuZXcga2V5LiBTaW1pbGFyIHRvXG4gICAgICogSW5kZXhlZERiJ3MgYGFkZCgpYCwgdGhpcyBtZXRob2Qgd2lsbCBmYWlsIG9uIHByaW1hcnkga2V5IGNvbGxpc2lvbnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdmFsdWUgLSBUaGUgb2JqZWN0IHRvIHdyaXRlLlxuICAgICAqIEByZXR1cm5zIFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIGFkZC5cbiAgICAgKi8gICAgYWRkKGUpIHtcbiAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFcsIFwiQUREXCIsIHRoaXMuc3RvcmUubmFtZSwgZSwgZSk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfd3JhcFJlcXVlc3QodGhpcy5zdG9yZS5hZGQoZSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBvYmplY3Qgd2l0aCB0aGUgc3BlY2lmaWVkIGtleSBmcm9tIHRoZSBzcGVjaWZpZWQgc3RvcmUsIG9yIG51bGxcbiAgICAgKiBpZiBubyBvYmplY3QgZXhpc3RzIHdpdGggdGhlIHNwZWNpZmllZCBrZXkuXG4gICAgICpcbiAgICAgKiBAa2V5IFRoZSBrZXkgb2YgdGhlIG9iamVjdCB0byBnZXQuXG4gICAgICogQHJldHVybnMgVGhlIG9iamVjdCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5IG9yIG51bGwgaWYgbm8gb2JqZWN0IGV4aXN0cy5cbiAgICAgKi8gICAgZ2V0KGUpIHtcbiAgICAgICAgLy8gV2UncmUgZG9pbmcgYW4gdW5zYWZlIGNhc3QgdG8gVmFsdWVUeXBlLlxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICByZXR1cm4gX19QUklWQVRFX3dyYXBSZXF1ZXN0KHRoaXMuc3RvcmUuZ2V0KGUpKS5uZXh0KCh0ID0+IChcbiAgICAgICAgLy8gTm9ybWFsaXplIG5vbmV4aXN0ZW5jZSB0byBudWxsLlxuICAgICAgICB2b2lkIDAgPT09IHQgJiYgKHQgPSBudWxsKSwgX19QUklWQVRFX2xvZ0RlYnVnKFcsIFwiR0VUXCIsIHRoaXMuc3RvcmUubmFtZSwgZSwgdCksIFxuICAgICAgICB0KSkpO1xuICAgIH1cbiAgICBkZWxldGUoZSkge1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoVywgXCJERUxFVEVcIiwgdGhpcy5zdG9yZS5uYW1lLCBlKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV93cmFwUmVxdWVzdCh0aGlzLnN0b3JlLmRlbGV0ZShlKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIElmIHdlIGV2ZXIgbmVlZCBtb3JlIG9mIHRoZSBjb3VudCB2YXJpYW50cywgd2UgY2FuIGFkZCBvdmVybG9hZHMuIEZvciBub3csXG4gICAgICogYWxsIHdlIG5lZWQgaXMgdG8gY291bnQgZXZlcnl0aGluZyBpbiBhIHN0b3JlLlxuICAgICAqXG4gICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIHJvd3MgaW4gdGhlIHN0b3JlLlxuICAgICAqLyAgICBjb3VudCgpIHtcbiAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFcsIFwiQ09VTlRcIiwgdGhpcy5zdG9yZS5uYW1lKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV93cmFwUmVxdWVzdCh0aGlzLnN0b3JlLmNvdW50KCkpO1xuICAgIH1cbiAgICBKKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMub3B0aW9ucyhlLCB0KSwgciA9IG4uaW5kZXggPyB0aGlzLnN0b3JlLmluZGV4KG4uaW5kZXgpIDogdGhpcy5zdG9yZTtcbiAgICAgICAgLy8gVXNlIGBnZXRBbGwoKWAgaWYgdGhlIGJyb3dzZXIgc3VwcG9ydHMgSW5kZXhlZERCIHYzLCBhcyBpdCBpcyByb3VnaGx5XG4gICAgICAgIC8vIDIwJSBmYXN0ZXIuXG4gICAgICAgICAgICAgICAgaWYgKFwiZnVuY3Rpb25cIiA9PSB0eXBlb2Ygci5nZXRBbGwpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSByLmdldEFsbChuLnJhbmdlKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VQcm9taXNlKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgICAgIGUub25lcnJvciA9IGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBuKGUudGFyZ2V0LmVycm9yKTtcbiAgICAgICAgICAgICAgICB9LCBlLm9uc3VjY2VzcyA9IGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0KGUudGFyZ2V0LnJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy5jdXJzb3IobiksIHQgPSBbXTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLkgoZSwgKChlLCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgdC5wdXNoKG4pO1xuICAgICAgICAgICAgfSkpLm5leHQoKCgpID0+IHQpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb2FkcyB0aGUgZmlyc3QgYGNvdW50YCBlbGVtZW50cyBmcm9tIHRoZSBwcm92aWRlZCBpbmRleCByYW5nZS4gTG9hZHMgYWxsXG4gICAgICogZWxlbWVudHMgaWYgbm8gbGltaXQgaXMgcHJvdmlkZWQuXG4gICAgICovICAgIFkoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5zdG9yZS5nZXRBbGwoZSwgbnVsbCA9PT0gdCA/IHZvaWQgMCA6IHQpO1xuICAgICAgICByZXR1cm4gbmV3IFBlcnNpc3RlbmNlUHJvbWlzZSgoKGUsIHQpID0+IHtcbiAgICAgICAgICAgIG4ub25lcnJvciA9IGUgPT4ge1xuICAgICAgICAgICAgICAgIHQoZS50YXJnZXQuZXJyb3IpO1xuICAgICAgICAgICAgfSwgbi5vbnN1Y2Nlc3MgPSB0ID0+IHtcbiAgICAgICAgICAgICAgICBlKHQudGFyZ2V0LnJlc3VsdCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIFooZSwgdCkge1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoVywgXCJERUxFVEUgQUxMXCIsIHRoaXMuc3RvcmUubmFtZSk7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLm9wdGlvbnMoZSwgdCk7XG4gICAgICAgIG4uWCA9ICExO1xuICAgICAgICBjb25zdCByID0gdGhpcy5jdXJzb3Iobik7XG4gICAgICAgIHJldHVybiB0aGlzLkgociwgKChlLCB0LCBuKSA9PiBuLmRlbGV0ZSgpKSk7XG4gICAgfVxuICAgIGVlKGUsIHQpIHtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIHQgPyBuID0gZSA6IChuID0ge30sIHQgPSBlKTtcbiAgICAgICAgY29uc3QgciA9IHRoaXMuY3Vyc29yKG4pO1xuICAgICAgICByZXR1cm4gdGhpcy5IKHIsIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJdGVyYXRlcyBvdmVyIGEgc3RvcmUsIGJ1dCB3YWl0cyBmb3IgdGhlIGdpdmVuIGNhbGxiYWNrIHRvIGNvbXBsZXRlIGZvclxuICAgICAqIGVhY2ggZW50cnkgYmVmb3JlIGl0ZXJhdGluZyB0aGUgbmV4dCBlbnRyeS4gVGhpcyBhbGxvd3MgdGhlIGNhbGxiYWNrIHRvIGRvXG4gICAgICogYXN5bmNocm9ub3VzIHdvcmsgdG8gZGV0ZXJtaW5lIGlmIHRoaXMgaXRlcmF0aW9uIHNob3VsZCBjb250aW51ZS5cbiAgICAgKlxuICAgICAqIFRoZSBwcm92aWRlZCBjYWxsYmFjayBzaG91bGQgcmV0dXJuIGB0cnVlYCB0byBjb250aW51ZSBpdGVyYXRpb24sIGFuZFxuICAgICAqIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqLyAgICB0ZShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmN1cnNvcih7fSk7XG4gICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VQcm9taXNlKCgobiwgcikgPT4ge1xuICAgICAgICAgICAgdC5vbmVycm9yID0gZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9jaGVja0ZvckFuZFJlcG9ydGlPU0Vycm9yKGUudGFyZ2V0LmVycm9yKTtcbiAgICAgICAgICAgICAgICByKHQpO1xuICAgICAgICAgICAgfSwgdC5vbnN1Y2Nlc3MgPSB0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByID0gdC50YXJnZXQucmVzdWx0O1xuICAgICAgICAgICAgICAgIHIgPyBlKHIucHJpbWFyeUtleSwgci52YWx1ZSkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGUgPyByLmNvbnRpbnVlKCkgOiBuKCk7XG4gICAgICAgICAgICAgICAgfSkpIDogbigpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBIKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IFtdO1xuICAgICAgICByZXR1cm4gbmV3IFBlcnNpc3RlbmNlUHJvbWlzZSgoKHIsIGkpID0+IHtcbiAgICAgICAgICAgIGUub25lcnJvciA9IGUgPT4ge1xuICAgICAgICAgICAgICAgIGkoZS50YXJnZXQuZXJyb3IpO1xuICAgICAgICAgICAgfSwgZS5vbnN1Y2Nlc3MgPSBlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpID0gZS50YXJnZXQucmVzdWx0O1xuICAgICAgICAgICAgICAgIGlmICghaSkgcmV0dXJuIHZvaWQgcigpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBuZXcgX19QUklWQVRFX0l0ZXJhdGlvbkNvbnRyb2xsZXIoaSksIG8gPSB0KGkucHJpbWFyeUtleSwgaS52YWx1ZSwgcyk7XG4gICAgICAgICAgICAgICAgaWYgKG8gaW5zdGFuY2VvZiBQZXJzaXN0ZW5jZVByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IG8uY2F0Y2goKGUgPT4gKHMuZG9uZSgpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVqZWN0KGUpKSkpO1xuICAgICAgICAgICAgICAgICAgICBuLnB1c2goZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHMuaXNEb25lID8gcigpIDogbnVsbCA9PT0gcy5HID8gaS5jb250aW51ZSgpIDogaS5jb250aW51ZShzLkcpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKG4pKSk7XG4gICAgfVxuICAgIG9wdGlvbnMoZSwgdCkge1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gZSAmJiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSA/IG4gPSBlIDogdCA9IGUpLCB7XG4gICAgICAgICAgICBpbmRleDogbixcbiAgICAgICAgICAgIHJhbmdlOiB0XG4gICAgICAgIH07XG4gICAgfVxuICAgIGN1cnNvcihlKSB7XG4gICAgICAgIGxldCB0ID0gXCJuZXh0XCI7XG4gICAgICAgIGlmIChlLnJldmVyc2UgJiYgKHQgPSBcInByZXZcIiksIGUuaW5kZXgpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLnN0b3JlLmluZGV4KGUuaW5kZXgpO1xuICAgICAgICAgICAgcmV0dXJuIGUuWCA/IG4ub3BlbktleUN1cnNvcihlLnJhbmdlLCB0KSA6IG4ub3BlbkN1cnNvcihlLnJhbmdlLCB0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5zdG9yZS5vcGVuQ3Vyc29yKGUucmFuZ2UsIHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBXcmFwcyBhbiBJREJSZXF1ZXN0IGluIGEgUGVyc2lzdGVuY2VQcm9taXNlLCB1c2luZyB0aGUgb25zdWNjZXNzIC8gb25lcnJvclxuICogaGFuZGxlcnMgdG8gcmVzb2x2ZSAvIHJlamVjdCB0aGUgUGVyc2lzdGVuY2VQcm9taXNlIGFzIGFwcHJvcHJpYXRlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV93cmFwUmVxdWVzdChlKSB7XG4gICAgcmV0dXJuIG5ldyBQZXJzaXN0ZW5jZVByb21pc2UoKCh0LCBuKSA9PiB7XG4gICAgICAgIGUub25zdWNjZXNzID0gZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gZS50YXJnZXQucmVzdWx0O1xuICAgICAgICAgICAgdChuKTtcbiAgICAgICAgfSwgZS5vbmVycm9yID0gZSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2NoZWNrRm9yQW5kUmVwb3J0aU9TRXJyb3IoZS50YXJnZXQuZXJyb3IpO1xuICAgICAgICAgICAgbih0KTtcbiAgICAgICAgfTtcbiAgICB9KSk7XG59XG5cbi8vIEd1YXJkIHNvIHdlIG9ubHkgcmVwb3J0IHRoZSBlcnJvciBvbmNlLlxubGV0IEcgPSAhMTtcblxuZnVuY3Rpb24gX19QUklWQVRFX2NoZWNrRm9yQW5kUmVwb3J0aU9TRXJyb3IoZSkge1xuICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfU2ltcGxlRGIuTShnZXRVQSgpKTtcbiAgICBpZiAodCA+PSAxMi4yICYmIHQgPCAxMykge1xuICAgICAgICBjb25zdCB0ID0gXCJBbiBpbnRlcm5hbCBlcnJvciB3YXMgZW5jb3VudGVyZWQgaW4gdGhlIEluZGV4ZWQgRGF0YWJhc2Ugc2VydmVyXCI7XG4gICAgICAgIGlmIChlLm1lc3NhZ2UuaW5kZXhPZih0KSA+PSAwKSB7XG4gICAgICAgICAgICAvLyBXcmFwIGVycm9yIGluIGEgbW9yZSBkZXNjcmlwdGl2ZSBvbmUuXG4gICAgICAgICAgICBjb25zdCBlID0gbmV3IEZpcmVzdG9yZUVycm9yKFwiaW50ZXJuYWxcIiwgYElPU19JTkRFWEVEREJfQlVHMTogSW5kZXhlZERiIGhhcyB0aHJvd24gJyR7dH0nLiBUaGlzIGlzIGxpa2VseSBkdWUgdG8gYW4gdW5hdm9pZGFibGUgYnVnIGluIGlPUy4gU2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcS81NjQ5NjI5Ni8xMTA5MTUgZm9yIGRldGFpbHMgYW5kIGEgcG90ZW50aWFsIHdvcmthcm91bmQuYCk7XG4gICAgICAgICAgICByZXR1cm4gRyB8fCAoRyA9ICEwLCBcbiAgICAgICAgICAgIC8vIFRocm93IGEgZ2xvYmFsIGV4Y2VwdGlvbiBvdXRzaWRlIG9mIHRoaXMgcHJvbWlzZSBjaGFpbiwgZm9yIHRoZSB1c2VyIHRvXG4gICAgICAgICAgICAvLyBwb3RlbnRpYWxseSBjYXRjaC5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfSksIDApKSwgZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZTtcbn1cblxuY29uc3QgeiA9IFwiSW5kZXhCYWNrZmlsbGVyXCI7XG5cbi8qKiBIb3cgbG9uZyB3ZSB3YWl0IHRvIHRyeSBydW5uaW5nIGluZGV4IGJhY2tmaWxsIGFmdGVyIFNESyBpbml0aWFsaXphdGlvbi4gKi9cbi8qKiBUaGlzIGNsYXNzIGlzIHJlc3BvbnNpYmxlIGZvciB0aGUgc2NoZWR1bGluZyBvZiBJbmRleCBCYWNrZmlsbGVyLiAqL1xuY2xhc3MgX19QUklWQVRFX0luZGV4QmFja2ZpbGxlclNjaGVkdWxlciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLmFzeW5jUXVldWUgPSBlLCB0aGlzLm5lID0gdCwgdGhpcy50YXNrID0gbnVsbDtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMucmUoMTVlMyk7XG4gICAgfVxuICAgIHN0b3AoKSB7XG4gICAgICAgIHRoaXMudGFzayAmJiAodGhpcy50YXNrLmNhbmNlbCgpLCB0aGlzLnRhc2sgPSBudWxsKTtcbiAgICB9XG4gICAgZ2V0IHN0YXJ0ZWQoKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0aGlzLnRhc2s7XG4gICAgfVxuICAgIHJlKGUpIHtcbiAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKHosIGBTY2hlZHVsZWQgaW4gJHtlfW1zYCksIHRoaXMudGFzayA9IHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQWZ0ZXJEZWxheShcImluZGV4X2JhY2tmaWxsXCIgLyogVGltZXJJZC5JbmRleEJhY2tmaWxsICovICwgZSwgKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudGFzayA9IG51bGw7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBhd2FpdCB0aGlzLm5lLmllKCk7XG4gICAgICAgICAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKHosIGBEb2N1bWVudHMgd3JpdHRlbjogJHtlfWApO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9pc0luZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IoZSkgPyBfX1BSSVZBVEVfbG9nRGVidWcoeiwgXCJJZ25vcmluZyBJbmRleGVkREIgZXJyb3IgZHVyaW5nIGluZGV4IGJhY2tmaWxsOiBcIiwgZSkgOiBhd2FpdCBfX1BSSVZBVEVfaWdub3JlSWZQcmltYXJ5TGVhc2VMb3NzKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5yZSg2ZTQpO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG4vKiogSW1wbGVtZW50cyB0aGUgc3RlcHMgZm9yIGJhY2tmaWxsaW5nIGluZGV4ZXMuICovIGNsYXNzIF9fUFJJVkFURV9JbmRleEJhY2tmaWxsZXIge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIExvY2FsU3RvcmUgcHJvdmlkZXMgYWNjZXNzIHRvIEluZGV4TWFuYWdlciBhbmQgTG9jYWxEb2N1bWVudFZpZXcuXG4gICAgICogVGhlc2UgcHJvcGVydGllcyB3aWxsIHVwZGF0ZSB3aGVuIHRoZSB1c2VyIGNoYW5nZXMuIENvbnNlcXVlbnRseSxcbiAgICAgKiBtYWtpbmcgYSBsb2NhbCBjb3B5IG9mIEluZGV4TWFuYWdlciBhbmQgTG9jYWxEb2N1bWVudFZpZXcgd2lsbCByZXF1aXJlXG4gICAgICogdXBkYXRlcyBvdmVyIHRpbWUuIFRoZSBzaW1wbGVyIHNvbHV0aW9uIGlzIHRvIHJlbHkgb24gTG9jYWxTdG9yZSB0byBoYXZlXG4gICAgICogYW4gdXAtdG8tZGF0ZSByZWZlcmVuY2VzIHRvIEluZGV4TWFuYWdlciBhbmQgTG9jYWxEb2N1bWVudFN0b3JlLlxuICAgICAqL1xuICAgIGUsIHQpIHtcbiAgICAgICAgdGhpcy5sb2NhbFN0b3JlID0gZSwgdGhpcy5wZXJzaXN0ZW5jZSA9IHQ7XG4gICAgfVxuICAgIGFzeW5jIGllKGUgPSA1MCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkJhY2tmaWxsIEluZGV4ZXNcIiwgXCJyZWFkd3JpdGUtcHJpbWFyeVwiLCAodCA9PiB0aGlzLnNlKHQsIGUpKSk7XG4gICAgfVxuICAgIC8qKiBXcml0ZXMgaW5kZXggZW50cmllcyB1bnRpbCB0aGUgY2FwIGlzIHJlYWNoZWQuIFJldHVybnMgdGhlIG51bWJlciBvZiBkb2N1bWVudHMgcHJvY2Vzc2VkLiAqLyAgICBzZShlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgU2V0O1xuICAgICAgICBsZXQgciA9IHQsIGkgPSAhMDtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5kb1doaWxlKCgoKSA9PiAhMCA9PT0gaSAmJiByID4gMCksICgoKSA9PiB0aGlzLmxvY2FsU3RvcmUuaW5kZXhNYW5hZ2VyLmdldE5leHRDb2xsZWN0aW9uR3JvdXBUb1VwZGF0ZShlKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSB0ICYmICFuLmhhcyh0KSkgcmV0dXJuIF9fUFJJVkFURV9sb2dEZWJ1Zyh6LCBgUHJvY2Vzc2luZyBjb2xsZWN0aW9uOiAke3R9YCksIFxuICAgICAgICAgICAgdGhpcy5vZShlLCB0LCByKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgICAgICByIC09IGUsIG4uYWRkKHQpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgaSA9ICExO1xuICAgICAgICB9KSkpKS5uZXh0KCgoKSA9PiB0IC0gcikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXcml0ZXMgZW50cmllcyBmb3IgdGhlIHByb3ZpZGVkIGNvbGxlY3Rpb24gZ3JvdXAuIFJldHVybnMgdGhlIG51bWJlciBvZiBkb2N1bWVudHMgcHJvY2Vzc2VkLlxuICAgICAqLyAgICBvZShlLCB0LCBuKSB7XG4gICAgICAgIC8vIFVzZSB0aGUgZWFybGllc3Qgb2Zmc2V0IG9mIGFsbCBmaWVsZCBpbmRleGVzIHRvIHF1ZXJ5IHRoZSBsb2NhbCBjYWNoZS5cbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxTdG9yZS5pbmRleE1hbmFnZXIuZ2V0TWluT2Zmc2V0RnJvbUNvbGxlY3Rpb25Hcm91cChlLCB0KS5uZXh0KChyID0+IHRoaXMubG9jYWxTdG9yZS5sb2NhbERvY3VtZW50cy5nZXROZXh0RG9jdW1lbnRzKGUsIHQsIHIsIG4pLm5leHQoKG4gPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IG4uY2hhbmdlcztcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxvY2FsU3RvcmUuaW5kZXhNYW5hZ2VyLnVwZGF0ZUluZGV4RW50cmllcyhlLCBpKS5uZXh0KCgoKSA9PiB0aGlzLl9lKHIsIG4pKSkubmV4dCgobiA9PiAoX19QUklWQVRFX2xvZ0RlYnVnKHosIGBVcGRhdGluZyBvZmZzZXQ6ICR7bn1gKSwgXG4gICAgICAgICAgICB0aGlzLmxvY2FsU3RvcmUuaW5kZXhNYW5hZ2VyLnVwZGF0ZUNvbGxlY3Rpb25Hcm91cChlLCB0LCBuKSkpKS5uZXh0KCgoKSA9PiBpLnNpemUpKTtcbiAgICAgICAgfSkpKSk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRoZSBuZXh0IG9mZnNldCBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgZG9jdW1lbnRzLiAqLyAgICBfZShlLCB0KSB7XG4gICAgICAgIGxldCBuID0gZTtcbiAgICAgICAgcmV0dXJuIHQuY2hhbmdlcy5mb3JFYWNoKCgoZSwgdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9uZXdJbmRleE9mZnNldEZyb21Eb2N1bWVudCh0KTtcbiAgICAgICAgICAgIF9fUFJJVkFURV9pbmRleE9mZnNldENvbXBhcmF0b3IociwgbikgPiAwICYmIChuID0gcik7XG4gICAgICAgIH0pKSwgbmV3IEluZGV4T2Zmc2V0KG4ucmVhZFRpbWUsIG4uZG9jdW1lbnRLZXksIE1hdGgubWF4KHQuYmF0Y2hJZCwgZS5sYXJnZXN0QmF0Y2hJZCkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogYExpc3RlblNlcXVlbmNlYCBpcyBhIG1vbm90b25pYyBzZXF1ZW5jZS4gSXQgaXMgaW5pdGlhbGl6ZWQgd2l0aCBhIG1pbmltdW0gdmFsdWUgdG9cbiAqIGV4Y2VlZC4gQWxsIHN1YnNlcXVlbnQgY2FsbHMgdG8gbmV4dCB3aWxsIHJldHVybiBpbmNyZWFzaW5nIHZhbHVlcy4gSWYgcHJvdmlkZWQgd2l0aCBhXG4gKiBgU2VxdWVuY2VOdW1iZXJTeW5jZXJgLCBpdCB3aWxsIGFkZGl0aW9uYWxseSBidW1wIGl0cyBuZXh0IHZhbHVlIHdoZW4gdG9sZCBvZiBhIG5ldyB2YWx1ZSwgYXNcbiAqIHdlbGwgYXMgd3JpdGUgb3V0IHNlcXVlbmNlIG51bWJlcnMgdGhhdCBpdCBwcm9kdWNlcyB2aWEgYG5leHQoKWAuXG4gKi8gY2xhc3MgX19QUklWQVRFX0xpc3RlblNlcXVlbmNlIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMucHJldmlvdXNWYWx1ZSA9IGUsIHQgJiYgKHQuc2VxdWVuY2VOdW1iZXJIYW5kbGVyID0gZSA9PiB0aGlzLmFlKGUpLCB0aGlzLnVlID0gZSA9PiB0LndyaXRlU2VxdWVuY2VOdW1iZXIoZSkpO1xuICAgIH1cbiAgICBhZShlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByZXZpb3VzVmFsdWUgPSBNYXRoLm1heChlLCB0aGlzLnByZXZpb3VzVmFsdWUpLCB0aGlzLnByZXZpb3VzVmFsdWU7XG4gICAgfVxuICAgIG5leHQoKSB7XG4gICAgICAgIGNvbnN0IGUgPSArK3RoaXMucHJldmlvdXNWYWx1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXMudWUgJiYgdGhpcy51ZShlKSwgZTtcbiAgICB9XG59XG5cbl9fUFJJVkFURV9MaXN0ZW5TZXF1ZW5jZS5jZSA9IC0xO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFNlbnRpbmVsIHZhbHVlIHRoYXQgc29ydHMgYmVmb3JlIGFueSBNdXRhdGlvbiBCYXRjaCBJRC4gKi9cbmNvbnN0IGogPSAtMTtcblxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgYSB2YXJpYWJsZSBpcyBlaXRoZXIgdW5kZWZpbmVkIG9yIG51bGwuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2lzTnVsbE9yVW5kZWZpbmVkKGUpIHtcbiAgICByZXR1cm4gbnVsbCA9PSBlO1xufVxuXG4vKiogUmV0dXJucyB3aGV0aGVyIHRoZSB2YWx1ZSByZXByZXNlbnRzIC0wLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfaXNOZWdhdGl2ZVplcm8oZSkge1xuICAgIC8vIERldGVjdCBpZiB0aGUgdmFsdWUgaXMgLTAuMC4gQmFzZWQgb24gcG9seWZpbGwgZnJvbVxuICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9pc1xuICAgIHJldHVybiAwID09PSBlICYmIDEgLyBlID09IC0xIC8gMDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgYSB2YWx1ZSBpcyBhbiBpbnRlZ2VyIGFuZCBpbiB0aGUgc2FmZSBpbnRlZ2VyIHJhbmdlXG4gKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gdGVzdCBmb3IgYmVpbmcgYW4gaW50ZWdlciBhbmQgaW4gdGhlIHNhZmUgcmFuZ2VcbiAqLyBmdW5jdGlvbiBpc1NhZmVJbnRlZ2VyKGUpIHtcbiAgICByZXR1cm4gXCJudW1iZXJcIiA9PSB0eXBlb2YgZSAmJiBOdW1iZXIuaXNJbnRlZ2VyKGUpICYmICFfX1BSSVZBVEVfaXNOZWdhdGl2ZVplcm8oZSkgJiYgZSA8PSBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiAmJiBlID49IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBKID0gXCJcdTAwMDFcIjtcblxuLyoqXG4gKiBFbmNvZGVzIGEgcmVzb3VyY2UgcGF0aCBpbnRvIGEgSW5kZXhlZERiLWNvbXBhdGlibGUgc3RyaW5nIGZvcm0uXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9lbmNvZGVSZXNvdXJjZVBhdGgoZSkge1xuICAgIGxldCB0ID0gXCJcIjtcbiAgICBmb3IgKGxldCBuID0gMDsgbiA8IGUubGVuZ3RoOyBuKyspIHQubGVuZ3RoID4gMCAmJiAodCA9IF9fUFJJVkFURV9lbmNvZGVTZXBhcmF0b3IodCkpLCBcbiAgICB0ID0gX19QUklWQVRFX2VuY29kZVNlZ21lbnQoZS5nZXQobiksIHQpO1xuICAgIHJldHVybiBfX1BSSVZBVEVfZW5jb2RlU2VwYXJhdG9yKHQpO1xufVxuXG4vKiogRW5jb2RlcyBhIHNpbmdsZSBzZWdtZW50IG9mIGEgcmVzb3VyY2UgcGF0aCBpbnRvIHRoZSBnaXZlbiByZXN1bHQgKi8gZnVuY3Rpb24gX19QUklWQVRFX2VuY29kZVNlZ21lbnQoZSwgdCkge1xuICAgIGxldCBuID0gdDtcbiAgICBjb25zdCByID0gZS5sZW5ndGg7XG4gICAgZm9yIChsZXQgdCA9IDA7IHQgPCByOyB0KyspIHtcbiAgICAgICAgY29uc3QgciA9IGUuY2hhckF0KHQpO1xuICAgICAgICBzd2l0Y2ggKHIpIHtcbiAgICAgICAgICBjYXNlIFwiXFwwXCI6XG4gICAgICAgICAgICBuICs9IFwiXHUwMDAxXHUwMDEwXCI7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgSjpcbiAgICAgICAgICAgIG4gKz0gXCJcdTAwMDFcdTAwMTFcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIG4gKz0gcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbjtcbn1cblxuLyoqIEVuY29kZXMgYSBwYXRoIHNlcGFyYXRvciBpbnRvIHRoZSBnaXZlbiByZXN1bHQgKi8gZnVuY3Rpb24gX19QUklWQVRFX2VuY29kZVNlcGFyYXRvcihlKSB7XG4gICAgcmV0dXJuIGUgKyBKICsgXCJcdTAwMDFcIjtcbn1cblxuLyoqXG4gKiBEZWNvZGVzIHRoZSBnaXZlbiBJbmRleGVkRGItY29tcGF0aWJsZSBzdHJpbmcgZm9ybSBvZiBhIHJlc291cmNlIHBhdGggaW50b1xuICogYSBSZXNvdXJjZVBhdGggaW5zdGFuY2UuIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCBpcyBub3Qgc3VpdGFibGUgZm9yIHVzZSB3aXRoXG4gKiBkZWNvZGluZyByZXNvdXJjZSBuYW1lcyBmcm9tIHRoZSBzZXJ2ZXI7IHRob3NlIGFyZSBPbmUgUGxhdGZvcm0gZm9ybWF0XG4gKiBzdHJpbmdzLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9kZWNvZGVSZXNvdXJjZVBhdGgoZSkge1xuICAgIC8vIEV2ZW50IHRoZSBlbXB0eSBwYXRoIG11c3QgZW5jb2RlIGFzIGEgcGF0aCBvZiBhdCBsZWFzdCBsZW5ndGggMi4gQSBwYXRoXG4gICAgLy8gd2l0aCBleGFjdGx5IDIgbXVzdCBiZSB0aGUgZW1wdHkgcGF0aC5cbiAgICBjb25zdCB0ID0gZS5sZW5ndGg7XG4gICAgaWYgKF9fUFJJVkFURV9oYXJkQXNzZXJ0KHQgPj0gMiwgNjQ0MDgsIHtcbiAgICAgICAgcGF0aDogZVxuICAgIH0pLCAyID09PSB0KSByZXR1cm4gX19QUklWQVRFX2hhcmRBc3NlcnQoZS5jaGFyQXQoMCkgPT09IEogJiYgXCJcdTAwMDFcIiA9PT0gZS5jaGFyQXQoMSksIDU2MTQ1LCB7XG4gICAgICAgIHBhdGg6IGVcbiAgICB9KSwgUmVzb3VyY2VQYXRoLmVtcHR5UGF0aCgpO1xuICAgIC8vIEVzY2FwZSBjaGFyYWN0ZXJzIGNhbm5vdCBleGlzdCBwYXN0IHRoZSBzZWNvbmQtdG8tbGFzdCBwb3NpdGlvbiBpbiB0aGVcbiAgICAvLyBzb3VyY2UgdmFsdWUuXG4gICAgICAgIGNvbnN0IF9fUFJJVkFURV9sYXN0UmVhc29uYWJsZUVzY2FwZUluZGV4ID0gdCAtIDIsIG4gPSBbXTtcbiAgICBsZXQgciA9IFwiXCI7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0OyApIHtcbiAgICAgICAgLy8gVGhlIGxhc3QgdHdvIGNoYXJhY3RlcnMgb2YgYSB2YWxpZCBlbmNvZGVkIHBhdGggbXVzdCBiZSBhIHNlcGFyYXRvciwgc29cbiAgICAgICAgLy8gdGhlcmUgbXVzdCBiZSBhbiBlbmQgdG8gdGhpcyBzZWdtZW50LlxuICAgICAgICBjb25zdCB0ID0gZS5pbmRleE9mKEosIGkpO1xuICAgICAgICAodCA8IDAgfHwgdCA+IF9fUFJJVkFURV9sYXN0UmVhc29uYWJsZUVzY2FwZUluZGV4KSAmJiBmYWlsKDUwNTE1LCB7XG4gICAgICAgICAgICBwYXRoOiBlXG4gICAgICAgIH0pO1xuICAgICAgICBzd2l0Y2ggKGUuY2hhckF0KHQgKyAxKSkge1xuICAgICAgICAgIGNhc2UgXCJcdTAwMDFcIjpcbiAgICAgICAgICAgIGNvbnN0IHMgPSBlLnN1YnN0cmluZyhpLCB0KTtcbiAgICAgICAgICAgIGxldCBvO1xuICAgICAgICAgICAgMCA9PT0gci5sZW5ndGggPyBcbiAgICAgICAgICAgIC8vIEF2b2lkIGNvcHlpbmcgZm9yIHRoZSBjb21tb24gY2FzZSBvZiBhIHNlZ21lbnQgdGhhdCBleGNsdWRlcyBcXDBcbiAgICAgICAgICAgIC8vIGFuZCBcXDAwMVxuICAgICAgICAgICAgbyA9IHMgOiAociArPSBzLCBvID0gciwgciA9IFwiXCIpLCBuLnB1c2gobyk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCJcdTAwMTBcIjpcbiAgICAgICAgICAgIHIgKz0gZS5zdWJzdHJpbmcoaSwgdCksIHIgKz0gXCJcXDBcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIlx1MDAxMVwiOlxuICAgICAgICAgICAgLy8gVGhlIGVzY2FwZSBjaGFyYWN0ZXIgY2FuIGJlIHVzZWQgaW4gdGhlIG91dHB1dCB0byBlbmNvZGUgaXRzZWxmLlxuICAgICAgICAgICAgciArPSBlLnN1YnN0cmluZyhpLCB0ICsgMSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBmYWlsKDYxMTY3LCB7XG4gICAgICAgICAgICAgICAgcGF0aDogZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaSA9IHQgKyAyO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFJlc291cmNlUGF0aChuKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgSCA9IFwicmVtb3RlRG9jdW1lbnRzXCIsIFkgPSBcIm93bmVyXCIsIFogPSBcIm93bmVyXCIsIFggPSBcIm11dGF0aW9uUXVldWVzXCIsIGVlID0gXCJ1c2VySWRcIiwgdGUgPSBcIm11dGF0aW9uc1wiLCBuZSA9IFwiYmF0Y2hJZFwiLCByZSA9IFwidXNlck11dGF0aW9uc0luZGV4XCIsIGllID0gWyBcInVzZXJJZFwiLCBcImJhdGNoSWRcIiBdO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBOYW1lIG9mIHRoZSBJbmRleGVkRGIgb2JqZWN0IHN0b3JlLlxuICpcbiAqIE5vdGUgdGhhdCB0aGUgbmFtZSAnb3duZXInIGlzIGNob3NlbiB0byBlbnN1cmUgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgd2l0aFxuICogb2xkZXIgY2xpZW50cyB0aGF0IG9ubHkgc3VwcG9ydGVkIHNpbmdsZSBsb2NrZWQgYWNjZXNzIHRvIHRoZSBwZXJzaXN0ZW5jZVxuICogbGF5ZXIuXG4gKi9cbi8qKlxuICogQ3JlYXRlcyBhIFt1c2VySWQsIGVuY29kZWRQYXRoXSBrZXkgZm9yIHVzZSBpbiB0aGUgRGJEb2N1bWVudE11dGF0aW9uc1xuICogaW5kZXggdG8gaXRlcmF0ZSBvdmVyIGFsbCBhdCBkb2N1bWVudCBtdXRhdGlvbnMgZm9yIGEgZ2l2ZW4gcGF0aCBvciBsb3dlci5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX25ld0RiRG9jdW1lbnRNdXRhdGlvblByZWZpeEZvclBhdGgoZSwgdCkge1xuICAgIHJldHVybiBbIGUsIF9fUFJJVkFURV9lbmNvZGVSZXNvdXJjZVBhdGgodCkgXTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgZnVsbCBpbmRleCBrZXkgb2YgW3VzZXJJZCwgZW5jb2RlZFBhdGgsIGJhdGNoSWRdIGZvciBpbnNlcnRpbmdcbiAqIGFuZCBkZWxldGluZyBpbnRvIHRoZSBEYkRvY3VtZW50TXV0YXRpb25zIGluZGV4LlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdEYkRvY3VtZW50TXV0YXRpb25LZXkoZSwgdCwgbikge1xuICAgIHJldHVybiBbIGUsIF9fUFJJVkFURV9lbmNvZGVSZXNvdXJjZVBhdGgodCksIG4gXTtcbn1cblxuLyoqXG4gKiBCZWNhdXNlIHdlIHN0b3JlIGFsbCB0aGUgdXNlZnVsIGluZm9ybWF0aW9uIGZvciB0aGlzIHN0b3JlIGluIHRoZSBrZXksXG4gKiB0aGVyZSBpcyBubyB1c2VmdWwgaW5mb3JtYXRpb24gdG8gc3RvcmUgYXMgdGhlIHZhbHVlLiBUaGUgcmF3ICh1bmVuY29kZWQpXG4gKiBwYXRoIGNhbm5vdCBiZSBzdG9yZWQgYmVjYXVzZSBJbmRleGVkRGIgZG9lc24ndCBzdG9yZSBwcm90b3R5cGVcbiAqIGluZm9ybWF0aW9uLlxuICovIGNvbnN0IHNlID0ge30sIG9lID0gXCJkb2N1bWVudE11dGF0aW9uc1wiLCBfZSA9IFwicmVtb3RlRG9jdW1lbnRzVjE0XCIsIGFlID0gWyBcInByZWZpeFBhdGhcIiwgXCJjb2xsZWN0aW9uR3JvdXBcIiwgXCJyZWFkVGltZVwiLCBcImRvY3VtZW50SWRcIiBdLCB1ZSA9IFwiZG9jdW1lbnRLZXlJbmRleFwiLCBjZSA9IFsgXCJwcmVmaXhQYXRoXCIsIFwiY29sbGVjdGlvbkdyb3VwXCIsIFwiZG9jdW1lbnRJZFwiIF0sIGxlID0gXCJjb2xsZWN0aW9uR3JvdXBJbmRleFwiLCBoZSA9IFsgXCJjb2xsZWN0aW9uR3JvdXBcIiwgXCJyZWFkVGltZVwiLCBcInByZWZpeFBhdGhcIiwgXCJkb2N1bWVudElkXCIgXSwgUGUgPSBcInJlbW90ZURvY3VtZW50R2xvYmFsXCIsIFRlID0gXCJyZW1vdGVEb2N1bWVudEdsb2JhbEtleVwiLCBJZSA9IFwidGFyZ2V0c1wiLCBFZSA9IFwicXVlcnlUYXJnZXRzSW5kZXhcIiwgZGUgPSBbIFwiY2Fub25pY2FsSWRcIiwgXCJ0YXJnZXRJZFwiIF0sIEFlID0gXCJ0YXJnZXREb2N1bWVudHNcIiwgUmUgPSBbIFwidGFyZ2V0SWRcIiwgXCJwYXRoXCIgXSwgVmUgPSBcImRvY3VtZW50VGFyZ2V0c0luZGV4XCIsIG1lID0gWyBcInBhdGhcIiwgXCJ0YXJnZXRJZFwiIF0sIGZlID0gXCJ0YXJnZXRHbG9iYWxLZXlcIiwgZ2UgPSBcInRhcmdldEdsb2JhbFwiLCBwZSA9IFwiY29sbGVjdGlvblBhcmVudHNcIiwgeWUgPSBbIFwiY29sbGVjdGlvbklkXCIsIFwicGFyZW50XCIgXSwgd2UgPSBcImNsaWVudE1ldGFkYXRhXCIsIFNlID0gXCJjbGllbnRJZFwiLCBiZSA9IFwiYnVuZGxlc1wiLCBEZSA9IFwiYnVuZGxlSWRcIiwgQ2UgPSBcIm5hbWVkUXVlcmllc1wiLCB2ZSA9IFwibmFtZVwiLCBGZSA9IFwiaW5kZXhDb25maWd1cmF0aW9uXCIsIE1lID0gXCJpbmRleElkXCIsIHhlID0gXCJjb2xsZWN0aW9uR3JvdXBJbmRleFwiLCBPZSA9IFwiY29sbGVjdGlvbkdyb3VwXCIsIE5lID0gXCJpbmRleFN0YXRlXCIsIEJlID0gWyBcImluZGV4SWRcIiwgXCJ1aWRcIiBdLCBMZSA9IFwic2VxdWVuY2VOdW1iZXJJbmRleFwiLCBrZSA9IFsgXCJ1aWRcIiwgXCJzZXF1ZW5jZU51bWJlclwiIF0sIHFlID0gXCJpbmRleEVudHJpZXNcIiwgUWUgPSBbIFwiaW5kZXhJZFwiLCBcInVpZFwiLCBcImFycmF5VmFsdWVcIiwgXCJkaXJlY3Rpb25hbFZhbHVlXCIsIFwib3JkZXJlZERvY3VtZW50S2V5XCIsIFwiZG9jdW1lbnRLZXlcIiBdLCAkZSA9IFwiZG9jdW1lbnRLZXlJbmRleFwiLCBVZSA9IFsgXCJpbmRleElkXCIsIFwidWlkXCIsIFwib3JkZXJlZERvY3VtZW50S2V5XCIgXSwgS2UgPSBcImRvY3VtZW50T3ZlcmxheXNcIiwgV2UgPSBbIFwidXNlcklkXCIsIFwiY29sbGVjdGlvblBhdGhcIiwgXCJkb2N1bWVudElkXCIgXSwgR2UgPSBcImNvbGxlY3Rpb25QYXRoT3ZlcmxheUluZGV4XCIsIHplID0gWyBcInVzZXJJZFwiLCBcImNvbGxlY3Rpb25QYXRoXCIsIFwibGFyZ2VzdEJhdGNoSWRcIiBdLCBqZSA9IFwiY29sbGVjdGlvbkdyb3VwT3ZlcmxheUluZGV4XCIsIEplID0gWyBcInVzZXJJZFwiLCBcImNvbGxlY3Rpb25Hcm91cFwiLCBcImxhcmdlc3RCYXRjaElkXCIgXSwgSGUgPSBcImdsb2JhbHNcIiwgWWUgPSBcIm5hbWVcIiwgWmUgPSBbIC4uLlsgLi4uWyAuLi5bIC4uLlsgWCwgdGUsIG9lLCBILCBJZSwgWSwgZ2UsIEFlIF0sIHdlIF0sIFBlIF0sIHBlIF0sIGJlLCBDZSBdLCBYZSA9IFsgLi4uWmUsIEtlIF0sIGV0ID0gWyBYLCB0ZSwgb2UsIF9lLCBJZSwgWSwgZ2UsIEFlLCB3ZSwgUGUsIHBlLCBiZSwgQ2UsIEtlIF0sIHR0ID0gZXQsIG50ID0gWyAuLi50dCwgRmUsIE5lLCBxZSBdLCBydCA9IG50LCBpdCA9IFsgLi4ubnQsIEhlIF0sIHN0ID0gaXQ7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jbGFzcyBfX1BSSVZBVEVfSW5kZXhlZERiVHJhbnNhY3Rpb24gZXh0ZW5kcyBQZXJzaXN0ZW5jZVRyYW5zYWN0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMubGUgPSBlLCB0aGlzLmN1cnJlbnRTZXF1ZW5jZU51bWJlciA9IHQ7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZ2V0U3RvcmUoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIHJldHVybiBfX1BSSVZBVEVfU2ltcGxlRGIuTyhuLmxlLCB0KTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX29iamVjdFNpemUoZSkge1xuICAgIGxldCB0ID0gMDtcbiAgICBmb3IgKGNvbnN0IG4gaW4gZSkgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsIG4pICYmIHQrKztcbiAgICByZXR1cm4gdDtcbn1cblxuZnVuY3Rpb24gZm9yRWFjaChlLCB0KSB7XG4gICAgZm9yIChjb25zdCBuIGluIGUpIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLCBuKSAmJiB0KG4sIGVbbl0pO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfbWFwVG9BcnJheShlLCB0KSB7XG4gICAgY29uc3QgbiA9IFtdO1xuICAgIGZvciAoY29uc3QgciBpbiBlKSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSwgcikgJiYgbi5wdXNoKHQoZVtyXSwgciwgZSkpO1xuICAgIHJldHVybiBuO1xufVxuXG5mdW5jdGlvbiBpc0VtcHR5KGUpIHtcbiAgICBmb3IgKGNvbnN0IHQgaW4gZSkgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLCB0KSkgcmV0dXJuICExO1xuICAgIHJldHVybiAhMDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIEFuIGltbXV0YWJsZSBzb3J0ZWQgbWFwIGltcGxlbWVudGF0aW9uLCBiYXNlZCBvbiBhIExlZnQtbGVhbmluZyBSZWQtQmxhY2tcbi8vIHRyZWUuXG5jbGFzcyBTb3J0ZWRNYXAge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5jb21wYXJhdG9yID0gZSwgdGhpcy5yb290ID0gdCB8fCBMTFJCTm9kZS5FTVBUWTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIG1hcCwgd2l0aCB0aGUgc3BlY2lmaWVkIGtleS92YWx1ZSBhZGRlZCBvciByZXBsYWNlZC5cbiAgICBpbnNlcnQoZSwgdCkge1xuICAgICAgICByZXR1cm4gbmV3IFNvcnRlZE1hcCh0aGlzLmNvbXBhcmF0b3IsIHRoaXMucm9vdC5pbnNlcnQoZSwgdCwgdGhpcy5jb21wYXJhdG9yKS5jb3B5KG51bGwsIG51bGwsIExMUkJOb2RlLkJMQUNLLCBudWxsLCBudWxsKSk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSBtYXAsIHdpdGggdGhlIHNwZWNpZmllZCBrZXkgcmVtb3ZlZC5cbiAgICByZW1vdmUoZSkge1xuICAgICAgICByZXR1cm4gbmV3IFNvcnRlZE1hcCh0aGlzLmNvbXBhcmF0b3IsIHRoaXMucm9vdC5yZW1vdmUoZSwgdGhpcy5jb21wYXJhdG9yKS5jb3B5KG51bGwsIG51bGwsIExMUkJOb2RlLkJMQUNLLCBudWxsLCBudWxsKSk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIHZhbHVlIG9mIHRoZSBub2RlIHdpdGggdGhlIGdpdmVuIGtleSwgb3IgbnVsbC5cbiAgICBnZXQoZSkge1xuICAgICAgICBsZXQgdCA9IHRoaXMucm9vdDtcbiAgICAgICAgZm9yICg7IXQuaXNFbXB0eSgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLmNvbXBhcmF0b3IoZSwgdC5rZXkpO1xuICAgICAgICAgICAgaWYgKDAgPT09IG4pIHJldHVybiB0LnZhbHVlO1xuICAgICAgICAgICAgbiA8IDAgPyB0ID0gdC5sZWZ0IDogbiA+IDAgJiYgKHQgPSB0LnJpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGVsZW1lbnQgaW4gdGhpcyBzb3J0ZWQgbWFwLCBvciAtMSBpZiBpdCBkb2Vzbid0XG4gICAgLy8gZXhpc3QuXG4gICAgaW5kZXhPZihlKSB7XG4gICAgICAgIC8vIE51bWJlciBvZiBub2RlcyB0aGF0IHdlcmUgcHJ1bmVkIHdoZW4gZGVzY2VuZGluZyByaWdodFxuICAgICAgICBsZXQgdCA9IDAsIG4gPSB0aGlzLnJvb3Q7XG4gICAgICAgIGZvciAoOyFuLmlzRW1wdHkoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCByID0gdGhpcy5jb21wYXJhdG9yKGUsIG4ua2V5KTtcbiAgICAgICAgICAgIGlmICgwID09PSByKSByZXR1cm4gdCArIG4ubGVmdC5zaXplO1xuICAgICAgICAgICAgciA8IDAgPyBuID0gbi5sZWZ0IDogKFxuICAgICAgICAgICAgLy8gQ291bnQgYWxsIG5vZGVzIGxlZnQgb2YgdGhlIG5vZGUgcGx1cyB0aGUgbm9kZSBpdHNlbGZcbiAgICAgICAgICAgIHQgKz0gbi5sZWZ0LnNpemUgKyAxLCBuID0gbi5yaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gTm9kZSBub3QgZm91bmRcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3QuaXNFbXB0eSgpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSB0b3RhbCBudW1iZXIgb2Ygbm9kZXMgaW4gdGhlIG1hcC5cbiAgICBnZXQgc2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5zaXplO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSBtaW5pbXVtIGtleSBpbiB0aGUgbWFwLlxuICAgIG1pbktleSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5taW5LZXkoKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgbWF4aW11bSBrZXkgaW4gdGhlIG1hcC5cbiAgICBtYXhLZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3QubWF4S2V5KCk7XG4gICAgfVxuICAgIC8vIFRyYXZlcnNlcyB0aGUgbWFwIGluIGtleSBvcmRlciBhbmQgY2FsbHMgdGhlIHNwZWNpZmllZCBhY3Rpb24gZnVuY3Rpb25cbiAgICAvLyBmb3IgZWFjaCBrZXkvdmFsdWUgcGFpci4gSWYgYWN0aW9uIHJldHVybnMgdHJ1ZSwgdHJhdmVyc2FsIGlzIGFib3J0ZWQuXG4gICAgLy8gUmV0dXJucyB0aGUgZmlyc3QgdHJ1dGh5IHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbiwgb3IgdGhlIGxhc3QgZmFsc2V5XG4gICAgLy8gdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLlxuICAgIGlub3JkZXJUcmF2ZXJzYWwoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290Lmlub3JkZXJUcmF2ZXJzYWwoZSk7XG4gICAgfVxuICAgIGZvckVhY2goZSkge1xuICAgICAgICB0aGlzLmlub3JkZXJUcmF2ZXJzYWwoKCh0LCBuKSA9PiAoZSh0LCBuKSwgITEpKSk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLmlub3JkZXJUcmF2ZXJzYWwoKCh0LCBuKSA9PiAoZS5wdXNoKGAke3R9OiR7bn1gKSwgITEpKSksIGB7JHtlLmpvaW4oXCIsIFwiKX19YDtcbiAgICB9XG4gICAgLy8gVHJhdmVyc2VzIHRoZSBtYXAgaW4gcmV2ZXJzZSBrZXkgb3JkZXIgYW5kIGNhbGxzIHRoZSBzcGVjaWZpZWQgYWN0aW9uXG4gICAgLy8gZnVuY3Rpb24gZm9yIGVhY2gga2V5L3ZhbHVlIHBhaXIuIElmIGFjdGlvbiByZXR1cm5zIHRydWUsIHRyYXZlcnNhbCBpc1xuICAgIC8vIGFib3J0ZWQuXG4gICAgLy8gUmV0dXJucyB0aGUgZmlyc3QgdHJ1dGh5IHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbiwgb3IgdGhlIGxhc3QgZmFsc2V5XG4gICAgLy8gdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLlxuICAgIHJldmVyc2VUcmF2ZXJzYWwoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290LnJldmVyc2VUcmF2ZXJzYWwoZSk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYW4gaXRlcmF0b3Igb3ZlciB0aGUgU29ydGVkTWFwLlxuICAgIGdldEl0ZXJhdG9yKCkge1xuICAgICAgICByZXR1cm4gbmV3IFNvcnRlZE1hcEl0ZXJhdG9yKHRoaXMucm9vdCwgbnVsbCwgdGhpcy5jb21wYXJhdG9yLCAhMSk7XG4gICAgfVxuICAgIGdldEl0ZXJhdG9yRnJvbShlKSB7XG4gICAgICAgIHJldHVybiBuZXcgU29ydGVkTWFwSXRlcmF0b3IodGhpcy5yb290LCBlLCB0aGlzLmNvbXBhcmF0b3IsICExKTtcbiAgICB9XG4gICAgZ2V0UmV2ZXJzZUl0ZXJhdG9yKCkge1xuICAgICAgICByZXR1cm4gbmV3IFNvcnRlZE1hcEl0ZXJhdG9yKHRoaXMucm9vdCwgbnVsbCwgdGhpcy5jb21wYXJhdG9yLCAhMCk7XG4gICAgfVxuICAgIGdldFJldmVyc2VJdGVyYXRvckZyb20oZSkge1xuICAgICAgICByZXR1cm4gbmV3IFNvcnRlZE1hcEl0ZXJhdG9yKHRoaXMucm9vdCwgZSwgdGhpcy5jb21wYXJhdG9yLCAhMCk7XG4gICAgfVxufVxuXG4gLy8gZW5kIFNvcnRlZE1hcFxuLy8gQW4gaXRlcmF0b3Igb3ZlciBhbiBMTFJCTm9kZS5cbmNsYXNzIFNvcnRlZE1hcEl0ZXJhdG9yIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByKSB7XG4gICAgICAgIHRoaXMuaXNSZXZlcnNlID0gciwgdGhpcy5ub2RlU3RhY2sgPSBbXTtcbiAgICAgICAgbGV0IGkgPSAxO1xuICAgICAgICBmb3IgKDshZS5pc0VtcHR5KCk7ICkgaWYgKGkgPSB0ID8gbihlLmtleSwgdCkgOiAxLCBcbiAgICAgICAgLy8gZmxpcCB0aGUgY29tcGFyaXNvbiBpZiB3ZSdyZSBnb2luZyBpbiByZXZlcnNlXG4gICAgICAgIHQgJiYgciAmJiAoaSAqPSAtMSksIGkgPCAwKSBcbiAgICAgICAgLy8gVGhpcyBub2RlIGlzIGxlc3MgdGhhbiBvdXIgc3RhcnQga2V5LiBpZ25vcmUgaXRcbiAgICAgICAgZSA9IHRoaXMuaXNSZXZlcnNlID8gZS5sZWZ0IDogZS5yaWdodDsgZWxzZSB7XG4gICAgICAgICAgICBpZiAoMCA9PT0gaSkge1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgbm9kZSBpcyBleGFjdGx5IGVxdWFsIHRvIG91ciBzdGFydCBrZXkuIFB1c2ggaXQgb24gdGhlIHN0YWNrLFxuICAgICAgICAgICAgICAgIC8vIGJ1dCBzdG9wIGl0ZXJhdGluZztcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGVTdGFjay5wdXNoKGUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVGhpcyBub2RlIGlzIGdyZWF0ZXIgdGhhbiBvdXIgc3RhcnQga2V5LCBhZGQgaXQgdG8gdGhlIHN0YWNrIGFuZCBtb3ZlXG4gICAgICAgICAgICAvLyB0byB0aGUgbmV4dCBvbmVcbiAgICAgICAgICAgIHRoaXMubm9kZVN0YWNrLnB1c2goZSksIGUgPSB0aGlzLmlzUmV2ZXJzZSA/IGUucmlnaHQgOiBlLmxlZnQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0TmV4dCgpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzLm5vZGVTdGFjay5wb3AoKTtcbiAgICAgICAgY29uc3QgdCA9IHtcbiAgICAgICAgICAgIGtleTogZS5rZXksXG4gICAgICAgICAgICB2YWx1ZTogZS52YWx1ZVxuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5pc1JldmVyc2UpIGZvciAoZSA9IGUubGVmdDsgIWUuaXNFbXB0eSgpOyApIHRoaXMubm9kZVN0YWNrLnB1c2goZSksIGUgPSBlLnJpZ2h0OyBlbHNlIGZvciAoZSA9IGUucmlnaHQ7ICFlLmlzRW1wdHkoKTsgKSB0aGlzLm5vZGVTdGFjay5wdXNoKGUpLCBcbiAgICAgICAgZSA9IGUubGVmdDtcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxuICAgIGhhc05leHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5vZGVTdGFjay5sZW5ndGggPiAwO1xuICAgIH1cbiAgICBwZWVrKCkge1xuICAgICAgICBpZiAoMCA9PT0gdGhpcy5ub2RlU3RhY2subGVuZ3RoKSByZXR1cm4gbnVsbDtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMubm9kZVN0YWNrW3RoaXMubm9kZVN0YWNrLmxlbmd0aCAtIDFdO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAga2V5OiBlLmtleSxcbiAgICAgICAgICAgIHZhbHVlOiBlLnZhbHVlXG4gICAgICAgIH07XG4gICAgfVxufVxuXG4gLy8gZW5kIFNvcnRlZE1hcEl0ZXJhdG9yXG4vLyBSZXByZXNlbnRzIGEgbm9kZSBpbiBhIExlZnQtbGVhbmluZyBSZWQtQmxhY2sgdHJlZS5cbmNsYXNzIExMUkJOb2RlIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByLCBpKSB7XG4gICAgICAgIHRoaXMua2V5ID0gZSwgdGhpcy52YWx1ZSA9IHQsIHRoaXMuY29sb3IgPSBudWxsICE9IG4gPyBuIDogTExSQk5vZGUuUkVELCB0aGlzLmxlZnQgPSBudWxsICE9IHIgPyByIDogTExSQk5vZGUuRU1QVFksIFxuICAgICAgICB0aGlzLnJpZ2h0ID0gbnVsbCAhPSBpID8gaSA6IExMUkJOb2RlLkVNUFRZLCB0aGlzLnNpemUgPSB0aGlzLmxlZnQuc2l6ZSArIDEgKyB0aGlzLnJpZ2h0LnNpemU7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSBjdXJyZW50IG5vZGUsIG9wdGlvbmFsbHkgcmVwbGFjaW5nIHBpZWNlcyBvZiBpdC5cbiAgICBjb3B5KGUsIHQsIG4sIHIsIGkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBMTFJCTm9kZShudWxsICE9IGUgPyBlIDogdGhpcy5rZXksIG51bGwgIT0gdCA/IHQgOiB0aGlzLnZhbHVlLCBudWxsICE9IG4gPyBuIDogdGhpcy5jb2xvciwgbnVsbCAhPSByID8gciA6IHRoaXMubGVmdCwgbnVsbCAhPSBpID8gaSA6IHRoaXMucmlnaHQpO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIC8vIFRyYXZlcnNlcyB0aGUgdHJlZSBpbiBrZXkgb3JkZXIgYW5kIGNhbGxzIHRoZSBzcGVjaWZpZWQgYWN0aW9uIGZ1bmN0aW9uXG4gICAgLy8gZm9yIGVhY2ggbm9kZS4gSWYgYWN0aW9uIHJldHVybnMgdHJ1ZSwgdHJhdmVyc2FsIGlzIGFib3J0ZWQuXG4gICAgLy8gUmV0dXJucyB0aGUgZmlyc3QgdHJ1dGh5IHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbiwgb3IgdGhlIGxhc3QgZmFsc2V5XG4gICAgLy8gdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLlxuICAgIGlub3JkZXJUcmF2ZXJzYWwoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5sZWZ0Lmlub3JkZXJUcmF2ZXJzYWwoZSkgfHwgZSh0aGlzLmtleSwgdGhpcy52YWx1ZSkgfHwgdGhpcy5yaWdodC5pbm9yZGVyVHJhdmVyc2FsKGUpO1xuICAgIH1cbiAgICAvLyBUcmF2ZXJzZXMgdGhlIHRyZWUgaW4gcmV2ZXJzZSBrZXkgb3JkZXIgYW5kIGNhbGxzIHRoZSBzcGVjaWZpZWQgYWN0aW9uXG4gICAgLy8gZnVuY3Rpb24gZm9yIGVhY2ggbm9kZS4gSWYgYWN0aW9uIHJldHVybnMgdHJ1ZSwgdHJhdmVyc2FsIGlzIGFib3J0ZWQuXG4gICAgLy8gUmV0dXJucyB0aGUgZmlyc3QgdHJ1dGh5IHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbiwgb3IgdGhlIGxhc3QgZmFsc2V5XG4gICAgLy8gdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLlxuICAgIHJldmVyc2VUcmF2ZXJzYWwoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yaWdodC5yZXZlcnNlVHJhdmVyc2FsKGUpIHx8IGUodGhpcy5rZXksIHRoaXMudmFsdWUpIHx8IHRoaXMubGVmdC5yZXZlcnNlVHJhdmVyc2FsKGUpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSBtaW5pbXVtIG5vZGUgaW4gdGhlIHRyZWUuXG4gICAgbWluKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sZWZ0LmlzRW1wdHkoKSA/IHRoaXMgOiB0aGlzLmxlZnQubWluKCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIG1heGltdW0ga2V5IGluIHRoZSB0cmVlLlxuICAgIG1pbktleSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluKCkua2V5O1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSBtYXhpbXVtIGtleSBpbiB0aGUgdHJlZS5cbiAgICBtYXhLZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJpZ2h0LmlzRW1wdHkoKSA/IHRoaXMua2V5IDogdGhpcy5yaWdodC5tYXhLZXkoKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBuZXcgdHJlZSwgd2l0aCB0aGUga2V5L3ZhbHVlIGFkZGVkLlxuICAgIGluc2VydChlLCB0LCBuKSB7XG4gICAgICAgIGxldCByID0gdGhpcztcbiAgICAgICAgY29uc3QgaSA9IG4oZSwgci5rZXkpO1xuICAgICAgICByZXR1cm4gciA9IGkgPCAwID8gci5jb3B5KG51bGwsIG51bGwsIG51bGwsIHIubGVmdC5pbnNlcnQoZSwgdCwgbiksIG51bGwpIDogMCA9PT0gaSA/IHIuY29weShudWxsLCB0LCBudWxsLCBudWxsLCBudWxsKSA6IHIuY29weShudWxsLCBudWxsLCBudWxsLCBudWxsLCByLnJpZ2h0Lmluc2VydChlLCB0LCBuKSksIFxuICAgICAgICByLmZpeFVwKCk7XG4gICAgfVxuICAgIHJlbW92ZU1pbigpIHtcbiAgICAgICAgaWYgKHRoaXMubGVmdC5pc0VtcHR5KCkpIHJldHVybiBMTFJCTm9kZS5FTVBUWTtcbiAgICAgICAgbGV0IGUgPSB0aGlzO1xuICAgICAgICByZXR1cm4gZS5sZWZ0LmlzUmVkKCkgfHwgZS5sZWZ0LmxlZnQuaXNSZWQoKSB8fCAoZSA9IGUubW92ZVJlZExlZnQoKSksIGUgPSBlLmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgZS5sZWZ0LnJlbW92ZU1pbigpLCBudWxsKSwgXG4gICAgICAgIGUuZml4VXAoKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBuZXcgdHJlZSwgd2l0aCB0aGUgc3BlY2lmaWVkIGl0ZW0gcmVtb3ZlZC5cbiAgICByZW1vdmUoZSwgdCkge1xuICAgICAgICBsZXQgbiwgciA9IHRoaXM7XG4gICAgICAgIGlmICh0KGUsIHIua2V5KSA8IDApIHIubGVmdC5pc0VtcHR5KCkgfHwgci5sZWZ0LmlzUmVkKCkgfHwgci5sZWZ0LmxlZnQuaXNSZWQoKSB8fCAociA9IHIubW92ZVJlZExlZnQoKSksIFxuICAgICAgICByID0gci5jb3B5KG51bGwsIG51bGwsIG51bGwsIHIubGVmdC5yZW1vdmUoZSwgdCksIG51bGwpOyBlbHNlIHtcbiAgICAgICAgICAgIGlmIChyLmxlZnQuaXNSZWQoKSAmJiAociA9IHIucm90YXRlUmlnaHQoKSksIHIucmlnaHQuaXNFbXB0eSgpIHx8IHIucmlnaHQuaXNSZWQoKSB8fCByLnJpZ2h0LmxlZnQuaXNSZWQoKSB8fCAociA9IHIubW92ZVJlZFJpZ2h0KCkpLCBcbiAgICAgICAgICAgIDAgPT09IHQoZSwgci5rZXkpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHIucmlnaHQuaXNFbXB0eSgpKSByZXR1cm4gTExSQk5vZGUuRU1QVFk7XG4gICAgICAgICAgICAgICAgbiA9IHIucmlnaHQubWluKCksIHIgPSByLmNvcHkobi5rZXksIG4udmFsdWUsIG51bGwsIG51bGwsIHIucmlnaHQucmVtb3ZlTWluKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgciA9IHIuY29weShudWxsLCBudWxsLCBudWxsLCBudWxsLCByLnJpZ2h0LnJlbW92ZShlLCB0KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHIuZml4VXAoKTtcbiAgICB9XG4gICAgaXNSZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbG9yO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIG5ldyB0cmVlIGFmdGVyIHBlcmZvcm1pbmcgYW55IG5lZWRlZCByb3RhdGlvbnMuXG4gICAgZml4VXAoKSB7XG4gICAgICAgIGxldCBlID0gdGhpcztcbiAgICAgICAgcmV0dXJuIGUucmlnaHQuaXNSZWQoKSAmJiAhZS5sZWZ0LmlzUmVkKCkgJiYgKGUgPSBlLnJvdGF0ZUxlZnQoKSksIGUubGVmdC5pc1JlZCgpICYmIGUubGVmdC5sZWZ0LmlzUmVkKCkgJiYgKGUgPSBlLnJvdGF0ZVJpZ2h0KCkpLCBcbiAgICAgICAgZS5sZWZ0LmlzUmVkKCkgJiYgZS5yaWdodC5pc1JlZCgpICYmIChlID0gZS5jb2xvckZsaXAoKSksIGU7XG4gICAgfVxuICAgIG1vdmVSZWRMZWZ0KCkge1xuICAgICAgICBsZXQgZSA9IHRoaXMuY29sb3JGbGlwKCk7XG4gICAgICAgIHJldHVybiBlLnJpZ2h0LmxlZnQuaXNSZWQoKSAmJiAoZSA9IGUuY29weShudWxsLCBudWxsLCBudWxsLCBudWxsLCBlLnJpZ2h0LnJvdGF0ZVJpZ2h0KCkpLCBcbiAgICAgICAgZSA9IGUucm90YXRlTGVmdCgpLCBlID0gZS5jb2xvckZsaXAoKSksIGU7XG4gICAgfVxuICAgIG1vdmVSZWRSaWdodCgpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzLmNvbG9yRmxpcCgpO1xuICAgICAgICByZXR1cm4gZS5sZWZ0LmxlZnQuaXNSZWQoKSAmJiAoZSA9IGUucm90YXRlUmlnaHQoKSwgZSA9IGUuY29sb3JGbGlwKCkpLCBlO1xuICAgIH1cbiAgICByb3RhdGVMZWZ0KCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5jb3B5KG51bGwsIG51bGwsIExMUkJOb2RlLlJFRCwgbnVsbCwgdGhpcy5yaWdodC5sZWZ0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMucmlnaHQuY29weShudWxsLCBudWxsLCB0aGlzLmNvbG9yLCBlLCBudWxsKTtcbiAgICB9XG4gICAgcm90YXRlUmlnaHQoKSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmNvcHkobnVsbCwgbnVsbCwgTExSQk5vZGUuUkVELCB0aGlzLmxlZnQucmlnaHQsIG51bGwpO1xuICAgICAgICByZXR1cm4gdGhpcy5sZWZ0LmNvcHkobnVsbCwgbnVsbCwgdGhpcy5jb2xvciwgbnVsbCwgZSk7XG4gICAgfVxuICAgIGNvbG9yRmxpcCgpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMubGVmdC5jb3B5KG51bGwsIG51bGwsICF0aGlzLmxlZnQuY29sb3IsIG51bGwsIG51bGwpLCB0ID0gdGhpcy5yaWdodC5jb3B5KG51bGwsIG51bGwsICF0aGlzLnJpZ2h0LmNvbG9yLCBudWxsLCBudWxsKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29weShudWxsLCBudWxsLCAhdGhpcy5jb2xvciwgZSwgdCk7XG4gICAgfVxuICAgIC8vIEZvciB0ZXN0aW5nLlxuICAgIGNoZWNrTWF4RGVwdGgoKSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmNoZWNrKCk7XG4gICAgICAgIHJldHVybiBNYXRoLnBvdygyLCBlKSA8PSB0aGlzLnNpemUgKyAxO1xuICAgIH1cbiAgICAvLyBJbiBhIGJhbGFuY2VkIFJCIHRyZWUsIHRoZSBibGFjay1kZXB0aCAobnVtYmVyIG9mIGJsYWNrIG5vZGVzKSBmcm9tIHJvb3QgdG9cbiAgICAvLyBsZWF2ZXMgaXMgZXF1YWwgb24gYm90aCBzaWRlcy4gIFRoaXMgZnVuY3Rpb24gdmVyaWZpZXMgdGhhdCBvciBhc3NlcnRzLlxuICAgIGNoZWNrKCkge1xuICAgICAgICBpZiAodGhpcy5pc1JlZCgpICYmIHRoaXMubGVmdC5pc1JlZCgpKSB0aHJvdyBmYWlsKDQzNzMwLCB7XG4gICAgICAgICAgICBrZXk6IHRoaXMua2V5LFxuICAgICAgICAgICAgdmFsdWU6IHRoaXMudmFsdWVcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh0aGlzLnJpZ2h0LmlzUmVkKCkpIHRocm93IGZhaWwoMTQxMTMsIHtcbiAgICAgICAgICAgIGtleTogdGhpcy5rZXksXG4gICAgICAgICAgICB2YWx1ZTogdGhpcy52YWx1ZVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMubGVmdC5jaGVjaygpO1xuICAgICAgICBpZiAoZSAhPT0gdGhpcy5yaWdodC5jaGVjaygpKSB0aHJvdyBmYWlsKDI3OTQ5KTtcbiAgICAgICAgcmV0dXJuIGUgKyAodGhpcy5pc1JlZCgpID8gMCA6IDEpO1xuICAgIH1cbn1cblxuIC8vIGVuZCBMTFJCTm9kZVxuLy8gRW1wdHkgbm9kZSBpcyBzaGFyZWQgYmV0d2VlbiBhbGwgTExSQiB0cmVlcy5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5MTFJCTm9kZS5FTVBUWSA9IG51bGwsIExMUkJOb2RlLlJFRCA9ICEwLCBMTFJCTm9kZS5CTEFDSyA9ICExO1xuXG4vLyBlbmQgTExSQkVtcHR5Tm9kZVxuTExSQk5vZGUuRU1QVFkgPSBuZXcgXG4vLyBSZXByZXNlbnRzIGFuIGVtcHR5IG5vZGUgKGEgbGVhZiBub2RlIGluIHRoZSBSZWQtQmxhY2sgVHJlZSkuXG5jbGFzcyBMTFJCRW1wdHlOb2RlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5zaXplID0gMDtcbiAgICB9XG4gICAgZ2V0IGtleSgpIHtcbiAgICAgICAgdGhyb3cgZmFpbCg1Nzc2Nik7XG4gICAgfVxuICAgIGdldCB2YWx1ZSgpIHtcbiAgICAgICAgdGhyb3cgZmFpbCgxNjE0MSk7XG4gICAgfVxuICAgIGdldCBjb2xvcigpIHtcbiAgICAgICAgdGhyb3cgZmFpbCgxNjcyNyk7XG4gICAgfVxuICAgIGdldCBsZWZ0KCkge1xuICAgICAgICB0aHJvdyBmYWlsKDI5NzI2KTtcbiAgICB9XG4gICAgZ2V0IHJpZ2h0KCkge1xuICAgICAgICB0aHJvdyBmYWlsKDM2ODk0KTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIGN1cnJlbnQgbm9kZS5cbiAgICBjb3B5KGUsIHQsIG4sIHIsIGkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSB0cmVlLCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5L3ZhbHVlIGFkZGVkLlxuICAgIGluc2VydChlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgTExSQk5vZGUoZSwgdCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSB0cmVlLCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5IHJlbW92ZWQuXG4gICAgcmVtb3ZlKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgaW5vcmRlclRyYXZlcnNhbChlKSB7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgcmV2ZXJzZVRyYXZlcnNhbChlKSB7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgbWluS2V5KCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgbWF4S2V5KCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaXNSZWQoKSB7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgLy8gRm9yIHRlc3RpbmcuXG4gICAgY2hlY2tNYXhEZXB0aCgpIHtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICBjaGVjaygpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogU29ydGVkU2V0IGlzIGFuIGltbXV0YWJsZSAoY29weS1vbi13cml0ZSkgY29sbGVjdGlvbiB0aGF0IGhvbGRzIGVsZW1lbnRzXG4gKiBpbiBvcmRlciBzcGVjaWZpZWQgYnkgdGhlIHByb3ZpZGVkIGNvbXBhcmF0b3IuXG4gKlxuICogTk9URTogaWYgcHJvdmlkZWQgY29tcGFyYXRvciByZXR1cm5zIDAgZm9yIHR3byBlbGVtZW50cywgd2UgY29uc2lkZXIgdGhlbSB0b1xuICogYmUgZXF1YWwhXG4gKi9cbmNsYXNzIFNvcnRlZFNldCB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLmNvbXBhcmF0b3IgPSBlLCB0aGlzLmRhdGEgPSBuZXcgU29ydGVkTWFwKHRoaXMuY29tcGFyYXRvcik7XG4gICAgfVxuICAgIGhhcyhlKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0aGlzLmRhdGEuZ2V0KGUpO1xuICAgIH1cbiAgICBmaXJzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5taW5LZXkoKTtcbiAgICB9XG4gICAgbGFzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5tYXhLZXkoKTtcbiAgICB9XG4gICAgZ2V0IHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuc2l6ZTtcbiAgICB9XG4gICAgaW5kZXhPZihlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuaW5kZXhPZihlKTtcbiAgICB9XG4gICAgLyoqIEl0ZXJhdGVzIGVsZW1lbnRzIGluIG9yZGVyIGRlZmluZWQgYnkgXCJjb21wYXJhdG9yXCIgKi8gICAgZm9yRWFjaChlKSB7XG4gICAgICAgIHRoaXMuZGF0YS5pbm9yZGVyVHJhdmVyc2FsKCgodCwgbikgPT4gKGUodCksICExKSkpO1xuICAgIH1cbiAgICAvKiogSXRlcmF0ZXMgb3ZlciBgZWxlbWBzIHN1Y2ggdGhhdDogcmFuZ2VbMF0gJmx0Oz0gZWxlbSAmbHQ7IHJhbmdlWzFdLiAqLyAgICBmb3JFYWNoSW5SYW5nZShlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLmRhdGEuZ2V0SXRlcmF0b3JGcm9tKGVbMF0pO1xuICAgICAgICBmb3IgKDtuLmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCByID0gbi5nZXROZXh0KCk7XG4gICAgICAgICAgICBpZiAodGhpcy5jb21wYXJhdG9yKHIua2V5LCBlWzFdKSA+PSAwKSByZXR1cm47XG4gICAgICAgICAgICB0KHIua2V5KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBJdGVyYXRlcyBvdmVyIGBlbGVtYHMgc3VjaCB0aGF0OiBzdGFydCAmbHQ7PSBlbGVtIHVudGlsIGZhbHNlIGlzIHJldHVybmVkLlxuICAgICAqLyAgICBmb3JFYWNoV2hpbGUoZSwgdCkge1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgZm9yIChuID0gdm9pZCAwICE9PSB0ID8gdGhpcy5kYXRhLmdldEl0ZXJhdG9yRnJvbSh0KSA6IHRoaXMuZGF0YS5nZXRJdGVyYXRvcigpOyBuLmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBpZiAoIWUobi5nZXROZXh0KCkua2V5KSkgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBGaW5kcyB0aGUgbGVhc3QgZWxlbWVudCBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gYGVsZW1gLiAqLyAgICBmaXJzdEFmdGVyT3JFcXVhbChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmRhdGEuZ2V0SXRlcmF0b3JGcm9tKGUpO1xuICAgICAgICByZXR1cm4gdC5oYXNOZXh0KCkgPyB0LmdldE5leHQoKS5rZXkgOiBudWxsO1xuICAgIH1cbiAgICBnZXRJdGVyYXRvcigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTb3J0ZWRTZXRJdGVyYXRvcih0aGlzLmRhdGEuZ2V0SXRlcmF0b3IoKSk7XG4gICAgfVxuICAgIGdldEl0ZXJhdG9yRnJvbShlKSB7XG4gICAgICAgIHJldHVybiBuZXcgU29ydGVkU2V0SXRlcmF0b3IodGhpcy5kYXRhLmdldEl0ZXJhdG9yRnJvbShlKSk7XG4gICAgfVxuICAgIC8qKiBJbnNlcnRzIG9yIHVwZGF0ZXMgYW4gZWxlbWVudCAqLyAgICBhZGQoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb3B5KHRoaXMuZGF0YS5yZW1vdmUoZSkuaW5zZXJ0KGUsICEwKSk7XG4gICAgfVxuICAgIC8qKiBEZWxldGVzIGFuIGVsZW1lbnQgKi8gICAgZGVsZXRlKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFzKGUpID8gdGhpcy5jb3B5KHRoaXMuZGF0YS5yZW1vdmUoZSkpIDogdGhpcztcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5pc0VtcHR5KCk7XG4gICAgfVxuICAgIHVuaW9uV2l0aChlKSB7XG4gICAgICAgIGxldCB0ID0gdGhpcztcbiAgICAgICAgLy8gTWFrZSBzdXJlIGByZXN1bHRgIGFsd2F5cyByZWZlcnMgdG8gdGhlIGxhcmdlciBvbmUgb2YgdGhlIHR3byBzZXRzLlxuICAgICAgICAgICAgICAgIHJldHVybiB0LnNpemUgPCBlLnNpemUgJiYgKHQgPSBlLCBlID0gdGhpcyksIGUuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICB0ID0gdC5hZGQoZSk7XG4gICAgICAgIH0pKSwgdDtcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIGlmICghKGUgaW5zdGFuY2VvZiBTb3J0ZWRTZXQpKSByZXR1cm4gITE7XG4gICAgICAgIGlmICh0aGlzLnNpemUgIT09IGUuc2l6ZSkgcmV0dXJuICExO1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5kYXRhLmdldEl0ZXJhdG9yKCksIG4gPSBlLmRhdGEuZ2V0SXRlcmF0b3IoKTtcbiAgICAgICAgZm9yICg7dC5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQuZ2V0TmV4dCgpLmtleSwgciA9IG4uZ2V0TmV4dCgpLmtleTtcbiAgICAgICAgICAgIGlmICgwICE9PSB0aGlzLmNvbXBhcmF0b3IoZSwgcikpIHJldHVybiAhMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIHRvQXJyYXkoKSB7XG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBlLnB1c2godCk7XG4gICAgICAgIH0pKSwgZTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaCgodCA9PiBlLnB1c2godCkpKSwgXCJTb3J0ZWRTZXQoXCIgKyBlLnRvU3RyaW5nKCkgKyBcIilcIjtcbiAgICB9XG4gICAgY29weShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBuZXcgU29ydGVkU2V0KHRoaXMuY29tcGFyYXRvcik7XG4gICAgICAgIHJldHVybiB0LmRhdGEgPSBlLCB0O1xuICAgIH1cbn1cblxuY2xhc3MgU29ydGVkU2V0SXRlcmF0b3Ige1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5pdGVyID0gZTtcbiAgICB9XG4gICAgZ2V0TmV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlci5nZXROZXh0KCkua2V5O1xuICAgIH1cbiAgICBoYXNOZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pdGVyLmhhc05leHQoKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ29tcGFyZXMgdHdvIHNvcnRlZCBzZXRzIGZvciBlcXVhbGl0eSB1c2luZyB0aGVpciBuYXR1cmFsIG9yZGVyaW5nLiBUaGVcbiAqIG1ldGhvZCBjb21wdXRlcyB0aGUgaW50ZXJzZWN0aW9uIGFuZCBpbnZva2VzIGBvbkFkZGAgZm9yIGV2ZXJ5IGVsZW1lbnQgdGhhdFxuICogaXMgaW4gYGFmdGVyYCBidXQgbm90IGBiZWZvcmVgLiBgb25SZW1vdmVgIGlzIGludm9rZWQgZm9yIGV2ZXJ5IGVsZW1lbnQgaW5cbiAqIGBiZWZvcmVgIGJ1dCBtaXNzaW5nIGZyb20gYGFmdGVyYC5cbiAqXG4gKiBUaGUgbWV0aG9kIGNyZWF0ZXMgYSBjb3B5IG9mIGJvdGggYGJlZm9yZWAgYW5kIGBhZnRlcmAgYW5kIHJ1bnMgaW4gTyhuIGxvZ1xuICogbiksIHdoZXJlIG4gaXMgdGhlIHNpemUgb2YgdGhlIHR3byBsaXN0cy5cbiAqXG4gKiBAcGFyYW0gYmVmb3JlIC0gVGhlIGVsZW1lbnRzIHRoYXQgZXhpc3QgaW4gdGhlIG9yaWdpbmFsIHNldC5cbiAqIEBwYXJhbSBhZnRlciAtIFRoZSBlbGVtZW50cyB0byBkaWZmIGFnYWluc3QgdGhlIG9yaWdpbmFsIHNldC5cbiAqIEBwYXJhbSBjb21wYXJhdG9yIC0gVGhlIGNvbXBhcmF0b3IgZm9yIHRoZSBlbGVtZW50cyBpbiBiZWZvcmUgYW5kIGFmdGVyLlxuICogQHBhcmFtIG9uQWRkIC0gQSBmdW5jdGlvbiB0byBpbnZva2UgZm9yIGV2ZXJ5IGVsZW1lbnQgdGhhdCBpcyBwYXJ0IG9mIGBcbiAqIGFmdGVyYCBidXQgbm90IGBiZWZvcmVgLlxuICogQHBhcmFtIG9uUmVtb3ZlIC0gQSBmdW5jdGlvbiB0byBpbnZva2UgZm9yIGV2ZXJ5IGVsZW1lbnQgdGhhdCBpcyBwYXJ0IG9mXG4gKiBgYmVmb3JlYCBidXQgbm90IGBhZnRlcmAuXG4gKi9cbi8qKlxuICogUmV0dXJucyB0aGUgbmV4dCBlbGVtZW50IGZyb20gdGhlIGl0ZXJhdG9yIG9yIGB1bmRlZmluZWRgIGlmIG5vbmUgYXZhaWxhYmxlLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfYWR2YW5jZUl0ZXJhdG9yKGUpIHtcbiAgICByZXR1cm4gZS5oYXNOZXh0KCkgPyBlLmdldE5leHQoKSA6IHZvaWQgMDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUHJvdmlkZXMgYSBzZXQgb2YgZmllbGRzIHRoYXQgY2FuIGJlIHVzZWQgdG8gcGFydGlhbGx5IHBhdGNoIGEgZG9jdW1lbnQuXG4gKiBGaWVsZE1hc2sgaXMgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIE9iamVjdFZhbHVlLlxuICogRXhhbXBsZXM6XG4gKiAgIGZvbyAtIE92ZXJ3cml0ZXMgZm9vIGVudGlyZWx5IHdpdGggdGhlIHByb3ZpZGVkIHZhbHVlLiBJZiBmb28gaXMgbm90XG4gKiAgICAgICAgIHByZXNlbnQgaW4gdGhlIGNvbXBhbmlvbiBPYmplY3RWYWx1ZSwgdGhlIGZpZWxkIGlzIGRlbGV0ZWQuXG4gKiAgIGZvby5iYXIgLSBPdmVyd3JpdGVzIG9ubHkgdGhlIGZpZWxkIGJhciBvZiB0aGUgb2JqZWN0IGZvby5cbiAqICAgICAgICAgICAgIElmIGZvbyBpcyBub3QgYW4gb2JqZWN0LCBmb28gaXMgcmVwbGFjZWQgd2l0aCBhbiBvYmplY3RcbiAqICAgICAgICAgICAgIGNvbnRhaW5pbmcgZm9vXG4gKi8gY2xhc3MgRmllbGRNYXNrIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuZmllbGRzID0gZSwgXG4gICAgICAgIC8vIFRPRE8oZGltb25kKTogdmFsaWRhdGlvbiBvZiBGaWVsZE1hc2tcbiAgICAgICAgLy8gU29ydCB0aGUgZmllbGQgbWFzayB0byBzdXBwb3J0IGBGaWVsZE1hc2suaXNFcXVhbCgpYCBhbmQgYXNzZXJ0IGJlbG93LlxuICAgICAgICBlLnNvcnQoRmllbGRQYXRoJDEuY29tcGFyYXRvcik7XG4gICAgfVxuICAgIHN0YXRpYyBlbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGaWVsZE1hc2soW10pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbmV3IEZpZWxkTWFzayBvYmplY3QgdGhhdCBpcyB0aGUgcmVzdWx0IG9mIGFkZGluZyBhbGwgdGhlIGdpdmVuXG4gICAgICogZmllbGRzIHBhdGhzIHRvIHRoaXMgZmllbGQgbWFzay5cbiAgICAgKi8gICAgdW5pb25XaXRoKGUpIHtcbiAgICAgICAgbGV0IHQgPSBuZXcgU29ydGVkU2V0KEZpZWxkUGF0aCQxLmNvbXBhcmF0b3IpO1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdGhpcy5maWVsZHMpIHQgPSB0LmFkZChlKTtcbiAgICAgICAgZm9yIChjb25zdCBuIG9mIGUpIHQgPSB0LmFkZChuKTtcbiAgICAgICAgcmV0dXJuIG5ldyBGaWVsZE1hc2sodC50b0FycmF5KCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBWZXJpZmllcyB0aGF0IGBmaWVsZFBhdGhgIGlzIGluY2x1ZGVkIGJ5IGF0IGxlYXN0IG9uZSBmaWVsZCBpbiB0aGlzIGZpZWxkXG4gICAgICogbWFzay5cbiAgICAgKlxuICAgICAqIFRoaXMgaXMgYW4gTyhuKSBvcGVyYXRpb24sIHdoZXJlIGBuYCBpcyB0aGUgc2l6ZSBvZiB0aGUgZmllbGQgbWFzay5cbiAgICAgKi8gICAgY292ZXJzKGUpIHtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMuZmllbGRzKSBpZiAodC5pc1ByZWZpeE9mKGUpKSByZXR1cm4gITA7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfYXJyYXlFcXVhbHModGhpcy5maWVsZHMsIGUuZmllbGRzLCAoKGUsIHQpID0+IGUuaXNFcXVhbCh0KSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gZXJyb3IgZW5jb3VudGVyZWQgd2hpbGUgZGVjb2RpbmcgYmFzZTY0IHN0cmluZy5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfQmFzZTY0RGVjb2RlRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyksIHRoaXMubmFtZSA9IFwiQmFzZTY0RGVjb2RlRXJyb3JcIjtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogQ29udmVydHMgYSBCYXNlNjQgZW5jb2RlZCBzdHJpbmcgdG8gYSBiaW5hcnkgc3RyaW5nLiAqL1xuLyoqIFRydWUgaWYgYW5kIG9ubHkgaWYgdGhlIEJhc2U2NCBjb252ZXJzaW9uIGZ1bmN0aW9ucyBhcmUgYXZhaWxhYmxlLiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX2lzQmFzZTY0QXZhaWxhYmxlKCkge1xuICAgIHJldHVybiBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBhdG9iO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBJbW11dGFibGUgY2xhc3MgdGhhdCByZXByZXNlbnRzIGEgXCJwcm90b1wiIGJ5dGUgc3RyaW5nLlxuICpcbiAqIFByb3RvIGJ5dGUgc3RyaW5ncyBjYW4gZWl0aGVyIGJlIEJhc2U2NC1lbmNvZGVkIHN0cmluZ3Mgb3IgVWludDhBcnJheXMgd2hlblxuICogc2VudCBvbiB0aGUgd2lyZS4gVGhpcyBjbGFzcyBhYnN0cmFjdHMgYXdheSB0aGlzIGRpZmZlcmVudGlhdGlvbiBieSBob2xkaW5nXG4gKiB0aGUgcHJvdG8gYnl0ZSBzdHJpbmcgaW4gYSBjb21tb24gY2xhc3MgdGhhdCBtdXN0IGJlIGNvbnZlcnRlZCBpbnRvIGEgc3RyaW5nXG4gKiBiZWZvcmUgYmVpbmcgc2VudCBhcyBhIHByb3RvLlxuICogQGludGVybmFsXG4gKi8gY2xhc3MgQnl0ZVN0cmluZyB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLmJpbmFyeVN0cmluZyA9IGU7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tQmFzZTY0U3RyaW5nKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGZ1bmN0aW9uIF9fUFJJVkFURV9kZWNvZGVCYXNlNjQoZSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXRvYihlKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAvLyBDaGVjayB0aGF0IGBET01FeGNlcHRpb25gIGlzIGRlZmluZWQgYmVmb3JlIHVzaW5nIGl0IHRvIGF2b2lkXG4gICAgICAgICAgICAgICAgLy8gXCJSZWZlcmVuY2VFcnJvcjogUHJvcGVydHkgJ0RPTUV4Y2VwdGlvbicgZG9lc24ndCBleGlzdFwiIGluIHJlYWN0LW5hdGl2ZS5cbiAgICAgICAgICAgICAgICAvLyAoaHR0cHM6Ly9naXRodWIuY29tL2ZpcmViYXNlL2ZpcmViYXNlLWpzLXNkay9pc3N1ZXMvNzExNSlcbiAgICAgICAgICAgICAgICB0aHJvdyBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBET01FeGNlcHRpb24gJiYgZSBpbnN0YW5jZW9mIERPTUV4Y2VwdGlvbiA/IG5ldyBfX1BSSVZBVEVfQmFzZTY0RGVjb2RlRXJyb3IoXCJJbnZhbGlkIGJhc2U2NCBzdHJpbmc6IFwiICsgZSkgOiBlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qKiBDb252ZXJ0cyBhIGJpbmFyeSBzdHJpbmcgdG8gYSBCYXNlNjQgZW5jb2RlZCBzdHJpbmcuICovIChlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBCeXRlU3RyaW5nKHQpO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVVpbnQ4QXJyYXkoZSkge1xuICAgICAgICAvLyBUT0RPKGluZGV4aW5nKTsgUmVtb3ZlIHRoZSBjb3B5IG9mIHRoZSBieXRlIHN0cmluZyBoZXJlIGFzIHRoaXMgbWV0aG9kXG4gICAgICAgIC8vIGlzIGZyZXF1ZW50bHkgY2FsbGVkIGR1cmluZyBpbmRleGluZy5cbiAgICAgICAgY29uc3QgdCA9IFxuICAgICAgICAvKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0byBjb252ZXJ0IGFuIFVpbnQ4YXJyYXkgdG8gYSBiaW5hcnkgc3RyaW5nLlxuICovXG4gICAgICAgIGZ1bmN0aW9uIF9fUFJJVkFURV9iaW5hcnlTdHJpbmdGcm9tVWludDhBcnJheShlKSB7XG4gICAgICAgICAgICBsZXQgdCA9IFwiXCI7XG4gICAgICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IGUubGVuZ3RoOyArK24pIHQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShlW25dKTtcbiAgICAgICAgICAgIHJldHVybiB0O1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogSGVscGVyIGZ1bmN0aW9uIHRvIGNvbnZlcnQgYSBiaW5hcnkgc3RyaW5nIHRvIGFuIFVpbnQ4QXJyYXkuXG4gKi8gKGUpO1xuICAgICAgICByZXR1cm4gbmV3IEJ5dGVTdHJpbmcodCk7XG4gICAgfVxuICAgIFtTeW1ib2wuaXRlcmF0b3JdKCkge1xuICAgICAgICBsZXQgZSA9IDA7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuZXh0OiAoKSA9PiBlIDwgdGhpcy5iaW5hcnlTdHJpbmcubGVuZ3RoID8ge1xuICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLmJpbmFyeVN0cmluZy5jaGFyQ29kZUF0KGUrKyksXG4gICAgICAgICAgICAgICAgZG9uZTogITFcbiAgICAgICAgICAgIH0gOiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHZvaWQgMCxcbiAgICAgICAgICAgICAgICBkb25lOiAhMFxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICB0b0Jhc2U2NCgpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9lbmNvZGVCYXNlNjQoZSkge1xuICAgICAgICAgICAgcmV0dXJuIGJ0b2EoZSk7XG4gICAgICAgIH0odGhpcy5iaW5hcnlTdHJpbmcpO1xuICAgIH1cbiAgICB0b1VpbnQ4QXJyYXkoKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfdWludDhBcnJheUZyb21CaW5hcnlTdHJpbmcoZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBVaW50OEFycmF5KGUubGVuZ3RoKTtcbiAgICAgICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgZS5sZW5ndGg7IG4rKykgdFtuXSA9IGUuY2hhckNvZGVBdChuKTtcbiAgICAgICAgICAgIHJldHVybiB0O1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4gICAgICAgIC8vIEEgUmVnRXhwIG1hdGNoaW5nIElTTyA4NjAxIFVUQyB0aW1lc3RhbXBzIHdpdGggb3B0aW9uYWwgZnJhY3Rpb24uXG4gICAgICAgICh0aGlzLmJpbmFyeVN0cmluZyk7XG4gICAgfVxuICAgIGFwcHJveGltYXRlQnl0ZVNpemUoKSB7XG4gICAgICAgIHJldHVybiAyICogdGhpcy5iaW5hcnlTdHJpbmcubGVuZ3RoO1xuICAgIH1cbiAgICBjb21wYXJlVG8oZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IodGhpcy5iaW5hcnlTdHJpbmcsIGUuYmluYXJ5U3RyaW5nKTtcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJpbmFyeVN0cmluZyA9PT0gZS5iaW5hcnlTdHJpbmc7XG4gICAgfVxufVxuXG5CeXRlU3RyaW5nLkVNUFRZX0JZVEVfU1RSSU5HID0gbmV3IEJ5dGVTdHJpbmcoXCJcIik7XG5cbmNvbnN0IG90ID0gbmV3IFJlZ0V4cCgvXlxcZHs0fS1cXGRcXGQtXFxkXFxkVFxcZFxcZDpcXGRcXGQ6XFxkXFxkKD86XFwuKFxcZCspKT9aJC8pO1xuXG4vKipcbiAqIENvbnZlcnRzIHRoZSBwb3NzaWJsZSBQcm90byB2YWx1ZXMgZm9yIGEgdGltZXN0YW1wIHZhbHVlIGludG8gYSBcInNlY29uZHMgYW5kXG4gKiBuYW5vc1wiIHJlcHJlc2VudGF0aW9uLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9ub3JtYWxpemVUaW1lc3RhbXAoZSkge1xuICAgIC8vIFRoZSBqc29uIGludGVyZmFjZSAoZm9yIHRoZSBicm93c2VyKSB3aWxsIHJldHVybiBhbiBpc28gdGltZXN0YW1wIHN0cmluZyxcbiAgICAvLyB3aGlsZSB0aGUgcHJvdG8ganMgbGlicmFyeSAoZm9yIG5vZGUpIHdpbGwgcmV0dXJuIGFcbiAgICAvLyBnb29nbGUucHJvdG9idWYuVGltZXN0YW1wIGluc3RhbmNlLlxuICAgIGlmIChfX1BSSVZBVEVfaGFyZEFzc2VydCghIWUsIDM5MDE4KSwgXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSkge1xuICAgICAgICAvLyBUaGUgZGF0ZSBzdHJpbmcgY2FuIGhhdmUgaGlnaGVyIHByZWNpc2lvbiAobmFub3MpIHRoYW4gdGhlIERhdGUgY2xhc3NcbiAgICAgICAgLy8gKG1pbGxpcyksIHNvIHdlIGRvIHNvbWUgY3VzdG9tIHBhcnNpbmcgaGVyZS5cbiAgICAgICAgLy8gUGFyc2UgdGhlIG5hbm9zIHJpZ2h0IG91dCBvZiB0aGUgc3RyaW5nLlxuICAgICAgICBsZXQgdCA9IDA7XG4gICAgICAgIGNvbnN0IG4gPSBvdC5leGVjKGUpO1xuICAgICAgICBpZiAoX19QUklWQVRFX2hhcmRBc3NlcnQoISFuLCA0NjU1OCwge1xuICAgICAgICAgICAgdGltZXN0YW1wOiBlXG4gICAgICAgIH0pLCBuWzFdKSB7XG4gICAgICAgICAgICAvLyBQYWQgdGhlIGZyYWN0aW9uIG91dCB0byA5IGRpZ2l0cyAobmFub3MpLlxuICAgICAgICAgICAgbGV0IGUgPSBuWzFdO1xuICAgICAgICAgICAgZSA9IChlICsgXCIwMDAwMDAwMDBcIikuc3Vic3RyKDAsIDkpLCB0ID0gTnVtYmVyKGUpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFBhcnNlIHRoZSBkYXRlIHRvIGdldCB0aGUgc2Vjb25kcy5cbiAgICAgICAgICAgICAgICBjb25zdCByID0gbmV3IERhdGUoZSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzZWNvbmRzOiBNYXRoLmZsb29yKHIuZ2V0VGltZSgpIC8gMWUzKSxcbiAgICAgICAgICAgIG5hbm9zOiB0XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHNlY29uZHM6IF9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIoZS5zZWNvbmRzKSxcbiAgICAgICAgbmFub3M6IF9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIoZS5uYW5vcylcbiAgICB9O1xufVxuXG4vKipcbiAqIENvbnZlcnRzIHRoZSBwb3NzaWJsZSBQcm90byB0eXBlcyBmb3IgbnVtYmVycyBpbnRvIGEgSmF2YVNjcmlwdCBudW1iZXIuXG4gKiBSZXR1cm5zIDAgaWYgdGhlIHZhbHVlIGlzIG5vdCBudW1lcmljLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIoZSkge1xuICAgIC8vIFRPRE8oYmpvcm5pY2spOiBIYW5kbGUgaW50NjQgZ3JlYXRlciB0aGFuIDUzIGJpdHMuXG4gICAgcmV0dXJuIFwibnVtYmVyXCIgPT0gdHlwZW9mIGUgPyBlIDogXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSA/IE51bWJlcihlKSA6IDA7XG59XG5cbi8qKiBDb252ZXJ0cyB0aGUgcG9zc2libGUgUHJvdG8gdHlwZXMgZm9yIEJsb2JzIGludG8gYSBCeXRlU3RyaW5nLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfbm9ybWFsaXplQnl0ZVN0cmluZyhlKSB7XG4gICAgcmV0dXJuIFwic3RyaW5nXCIgPT0gdHlwZW9mIGUgPyBCeXRlU3RyaW5nLmZyb21CYXNlNjRTdHJpbmcoZSkgOiBCeXRlU3RyaW5nLmZyb21VaW50OEFycmF5KGUpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXByZXNlbnRzIGEgbG9jYWxseS1hcHBsaWVkIFNlcnZlclRpbWVzdGFtcC5cbiAqXG4gKiBTZXJ2ZXIgVGltZXN0YW1wcyBhcmUgYmFja2VkIGJ5IE1hcFZhbHVlcyB0aGF0IGNvbnRhaW4gYW4gaW50ZXJuYWwgZmllbGRcbiAqIGBfX3R5cGVfX2Agd2l0aCBhIHZhbHVlIG9mIGBzZXJ2ZXJfdGltZXN0YW1wYC4gVGhlIHByZXZpb3VzIHZhbHVlIGFuZCBsb2NhbFxuICogd3JpdGUgdGltZSBhcmUgc3RvcmVkIGluIGl0cyBgX19wcmV2aW91c192YWx1ZV9fYCBhbmQgYF9fbG9jYWxfd3JpdGVfdGltZV9fYFxuICogZmllbGRzIHJlc3BlY3RpdmVseS5cbiAqXG4gKiBOb3RlczpcbiAqIC0gU2VydmVyVGltZXN0YW1wVmFsdWUgaW5zdGFuY2VzIGFyZSBjcmVhdGVkIGFzIHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgYVxuICogICB0cmFuc2Zvcm0uIFRoZXkgY2FuIG9ubHkgZXhpc3QgaW4gdGhlIGxvY2FsIHZpZXcgb2YgYSBkb2N1bWVudC4gVGhlcmVmb3JlXG4gKiAgIHRoZXkgZG8gbm90IG5lZWQgdG8gYmUgcGFyc2VkIG9yIHNlcmlhbGl6ZWQuXG4gKiAtIFdoZW4gZXZhbHVhdGVkIGxvY2FsbHkgKGUuZy4gZm9yIHNuYXBzaG90LmRhdGEoKSksIHRoZXkgYnkgZGVmYXVsdFxuICogICBldmFsdWF0ZSB0byBgbnVsbGAuIFRoaXMgYmVoYXZpb3IgY2FuIGJlIGNvbmZpZ3VyZWQgYnkgcGFzc2luZyBjdXN0b21cbiAqICAgRmllbGRWYWx1ZU9wdGlvbnMgdG8gdmFsdWUoKS5cbiAqIC0gV2l0aCByZXNwZWN0IHRvIG90aGVyIFNlcnZlclRpbWVzdGFtcFZhbHVlcywgdGhleSBzb3J0IGJ5IHRoZWlyXG4gKiAgIGxvY2FsV3JpdGVUaW1lLlxuICovIGNvbnN0IF90ID0gXCJzZXJ2ZXJfdGltZXN0YW1wXCIsIGF0ID0gXCJfX3R5cGVfX1wiLCB1dCA9IFwiX19wcmV2aW91c192YWx1ZV9fXCIsIGN0ID0gXCJfX2xvY2FsX3dyaXRlX3RpbWVfX1wiO1xuXG5mdW5jdGlvbiBfX1BSSVZBVEVfaXNTZXJ2ZXJUaW1lc3RhbXAoZSkge1xuICAgIGNvbnN0IHQgPSAoZT8ubWFwVmFsdWU/LmZpZWxkcyB8fCB7fSlbYXRdPy5zdHJpbmdWYWx1ZTtcbiAgICByZXR1cm4gdCA9PT0gX3Q7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBTZXJ2ZXJUaW1lc3RhbXAgcHJvdG8gdmFsdWUgKHVzaW5nIHRoZSBpbnRlcm5hbCBmb3JtYXQpLlxuICovXG4vKipcbiAqIFJldHVybnMgdGhlIHZhbHVlIG9mIHRoZSBmaWVsZCBiZWZvcmUgdGhpcyBTZXJ2ZXJUaW1lc3RhbXAgd2FzIHNldC5cbiAqXG4gKiBQcmVzZXJ2aW5nIHRoZSBwcmV2aW91cyB2YWx1ZXMgYWxsb3dzIHRoZSB1c2VyIHRvIGRpc3BsYXkgdGhlIGxhc3QgcmVzb2xlZFxuICogdmFsdWUgdW50aWwgdGhlIGJhY2tlbmQgcmVzcG9uZHMgd2l0aCB0aGUgdGltZXN0YW1wLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfZ2V0UHJldmlvdXNWYWx1ZShlKSB7XG4gICAgY29uc3QgdCA9IGUubWFwVmFsdWUuZmllbGRzW3V0XTtcbiAgICByZXR1cm4gX19QUklWQVRFX2lzU2VydmVyVGltZXN0YW1wKHQpID8gX19QUklWQVRFX2dldFByZXZpb3VzVmFsdWUodCkgOiB0O1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGxvY2FsIHRpbWUgYXQgd2hpY2ggdGhpcyB0aW1lc3RhbXAgd2FzIGZpcnN0IHNldC5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZ2V0TG9jYWxXcml0ZVRpbWUoZSkge1xuICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfbm9ybWFsaXplVGltZXN0YW1wKGUubWFwVmFsdWUuZmllbGRzW2N0XS50aW1lc3RhbXBWYWx1ZSk7XG4gICAgcmV0dXJuIG5ldyBUaW1lc3RhbXAodC5zZWNvbmRzLCB0Lm5hbm9zKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgRGF0YWJhc2VJbmZvIHtcbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RzIGEgRGF0YWJhc2VJbmZvIHVzaW5nIHRoZSBwcm92aWRlZCBob3N0LCBkYXRhYmFzZUlkIGFuZFxuICAgICAqIHBlcnNpc3RlbmNlS2V5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGRhdGFiYXNlSWQgLSBUaGUgZGF0YWJhc2UgdG8gdXNlLlxuICAgICAqIEBwYXJhbSBhcHBJZCAtIFRoZSBGaXJlYmFzZSBBcHAgSWQuXG4gICAgICogQHBhcmFtIHBlcnNpc3RlbmNlS2V5IC0gQSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhpcyBGaXJlc3RvcmUncyBsb2NhbFxuICAgICAqIHN0b3JhZ2UgKHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCB0aGUgZGF0YWJhc2VJZCkuXG4gICAgICogQHBhcmFtIGhvc3QgLSBUaGUgRmlyZXN0b3JlIGJhY2tlbmQgaG9zdCB0byBjb25uZWN0IHRvLlxuICAgICAqIEBwYXJhbSBzc2wgLSBXaGV0aGVyIHRvIHVzZSBTU0wgd2hlbiBjb25uZWN0aW5nLlxuICAgICAqIEBwYXJhbSBmb3JjZUxvbmdQb2xsaW5nIC0gV2hldGhlciB0byB1c2UgdGhlIGZvcmNlTG9uZ1BvbGxpbmcgb3B0aW9uXG4gICAgICogd2hlbiB1c2luZyBXZWJDaGFubmVsIGFzIHRoZSBuZXR3b3JrIHRyYW5zcG9ydC5cbiAgICAgKiBAcGFyYW0gYXV0b0RldGVjdExvbmdQb2xsaW5nIC0gV2hldGhlciB0byB1c2UgdGhlIGRldGVjdEJ1ZmZlcmluZ1Byb3h5XG4gICAgICogb3B0aW9uIHdoZW4gdXNpbmcgV2ViQ2hhbm5lbCBhcyB0aGUgbmV0d29yayB0cmFuc3BvcnQuXG4gICAgICogQHBhcmFtIGxvbmdQb2xsaW5nT3B0aW9ucyBPcHRpb25zIHRoYXQgY29uZmlndXJlIGxvbmctcG9sbGluZy5cbiAgICAgKiBAcGFyYW0gdXNlRmV0Y2hTdHJlYW1zIFdoZXRoZXIgdG8gdXNlIHRoZSBGZXRjaCBBUEkgaW5zdGVhZCBvZlxuICAgICAqIFhNTEhUVFBSZXF1ZXN0XG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgciwgaSwgcywgbywgXywgYSwgdSkge1xuICAgICAgICB0aGlzLmRhdGFiYXNlSWQgPSBlLCB0aGlzLmFwcElkID0gdCwgdGhpcy5wZXJzaXN0ZW5jZUtleSA9IG4sIHRoaXMuaG9zdCA9IHIsIHRoaXMuc3NsID0gaSwgXG4gICAgICAgIHRoaXMuZm9yY2VMb25nUG9sbGluZyA9IHMsIHRoaXMuYXV0b0RldGVjdExvbmdQb2xsaW5nID0gbywgdGhpcy5sb25nUG9sbGluZ09wdGlvbnMgPSBfLCBcbiAgICAgICAgdGhpcy51c2VGZXRjaFN0cmVhbXMgPSBhLCB0aGlzLmlzVXNpbmdFbXVsYXRvciA9IHU7XG4gICAgfVxufVxuXG4vKiogVGhlIGRlZmF1bHQgZGF0YWJhc2UgbmFtZSBmb3IgYSBwcm9qZWN0LiAqLyBjb25zdCBsdCA9IFwiKGRlZmF1bHQpXCI7XG5cbi8qKlxuICogUmVwcmVzZW50cyB0aGUgZGF0YWJhc2UgSUQgYSBGaXJlc3RvcmUgY2xpZW50IGlzIGFzc29jaWF0ZWQgd2l0aC5cbiAqIEBpbnRlcm5hbFxuICovIGNsYXNzIERhdGFiYXNlSWQge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5wcm9qZWN0SWQgPSBlLCB0aGlzLmRhdGFiYXNlID0gdCB8fCBsdDtcbiAgICB9XG4gICAgc3RhdGljIGVtcHR5KCkge1xuICAgICAgICByZXR1cm4gbmV3IERhdGFiYXNlSWQoXCJcIiwgXCJcIik7XG4gICAgfVxuICAgIGdldCBpc0RlZmF1bHREYXRhYmFzZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YWJhc2UgPT09IGx0O1xuICAgIH1cbiAgICBpc0VxdWFsKGUpIHtcbiAgICAgICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBEYXRhYmFzZUlkICYmIGUucHJvamVjdElkID09PSB0aGlzLnByb2plY3RJZCAmJiBlLmRhdGFiYXNlID09PSB0aGlzLmRhdGFiYXNlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNvbnN0IGh0ID0gXCJfX3R5cGVfX1wiLCBQdCA9IFwiX19tYXhfX1wiLCBUdCA9IHtcbiAgICBtYXBWYWx1ZToge1xuICAgICAgICBmaWVsZHM6IHtcbiAgICAgICAgICAgIF9fdHlwZV9fOiB7XG4gICAgICAgICAgICAgICAgc3RyaW5nVmFsdWU6IFB0XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59LCBJdCA9IFwiX192ZWN0b3JfX1wiLCBFdCA9IFwidmFsdWVcIiwgZHQgPSB7XG4gICAgbnVsbFZhbHVlOiBcIk5VTExfVkFMVUVcIlxufTtcblxuLyoqIEV4dHJhY3RzIHRoZSBiYWNrZW5kJ3MgdHlwZSBvcmRlciBmb3IgdGhlIHByb3ZpZGVkIHZhbHVlLiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX3R5cGVPcmRlcihlKSB7XG4gICAgcmV0dXJuIFwibnVsbFZhbHVlXCIgaW4gZSA/IDAgLyogVHlwZU9yZGVyLk51bGxWYWx1ZSAqLyA6IFwiYm9vbGVhblZhbHVlXCIgaW4gZSA/IDEgLyogVHlwZU9yZGVyLkJvb2xlYW5WYWx1ZSAqLyA6IFwiaW50ZWdlclZhbHVlXCIgaW4gZSB8fCBcImRvdWJsZVZhbHVlXCIgaW4gZSA/IDIgLyogVHlwZU9yZGVyLk51bWJlclZhbHVlICovIDogXCJ0aW1lc3RhbXBWYWx1ZVwiIGluIGUgPyAzIC8qIFR5cGVPcmRlci5UaW1lc3RhbXBWYWx1ZSAqLyA6IFwic3RyaW5nVmFsdWVcIiBpbiBlID8gNSAvKiBUeXBlT3JkZXIuU3RyaW5nVmFsdWUgKi8gOiBcImJ5dGVzVmFsdWVcIiBpbiBlID8gNiAvKiBUeXBlT3JkZXIuQmxvYlZhbHVlICovIDogXCJyZWZlcmVuY2VWYWx1ZVwiIGluIGUgPyA3IC8qIFR5cGVPcmRlci5SZWZWYWx1ZSAqLyA6IFwiZ2VvUG9pbnRWYWx1ZVwiIGluIGUgPyA4IC8qIFR5cGVPcmRlci5HZW9Qb2ludFZhbHVlICovIDogXCJhcnJheVZhbHVlXCIgaW4gZSA/IDkgLyogVHlwZU9yZGVyLkFycmF5VmFsdWUgKi8gOiBcIm1hcFZhbHVlXCIgaW4gZSA/IF9fUFJJVkFURV9pc1NlcnZlclRpbWVzdGFtcChlKSA/IDQgLyogVHlwZU9yZGVyLlNlcnZlclRpbWVzdGFtcFZhbHVlICovIDogX19QUklWQVRFX2lzTWF4VmFsdWUoZSkgPyA5MDA3MTk5MjU0NzQwOTkxIC8qIFR5cGVPcmRlci5NYXhWYWx1ZSAqLyA6IF9fUFJJVkFURV9pc1ZlY3RvclZhbHVlKGUpID8gMTAgLyogVHlwZU9yZGVyLlZlY3RvclZhbHVlICovIDogMTEgLyogVHlwZU9yZGVyLk9iamVjdFZhbHVlICovIDogZmFpbCgyODI5NSwge1xuICAgICAgICB2YWx1ZTogZVxuICAgIH0pO1xufVxuXG4vKiogVGVzdHMgYGxlZnRgIGFuZCBgcmlnaHRgIGZvciBlcXVhbGl0eSBiYXNlZCBvbiB0aGUgYmFja2VuZCBzZW1hbnRpY3MuICovIGZ1bmN0aW9uIF9fUFJJVkFURV92YWx1ZUVxdWFscyhlLCB0KSB7XG4gICAgaWYgKGUgPT09IHQpIHJldHVybiAhMDtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX3R5cGVPcmRlcihlKTtcbiAgICBpZiAobiAhPT0gX19QUklWQVRFX3R5cGVPcmRlcih0KSkgcmV0dXJuICExO1xuICAgIHN3aXRjaCAobikge1xuICAgICAgY2FzZSAwIC8qIFR5cGVPcmRlci5OdWxsVmFsdWUgKi8gOlxuICAgICAgY2FzZSA5MDA3MTk5MjU0NzQwOTkxIC8qIFR5cGVPcmRlci5NYXhWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiAhMDtcblxuICAgICAgY2FzZSAxIC8qIFR5cGVPcmRlci5Cb29sZWFuVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZS5ib29sZWFuVmFsdWUgPT09IHQuYm9vbGVhblZhbHVlO1xuXG4gICAgICBjYXNlIDQgLyogVHlwZU9yZGVyLlNlcnZlclRpbWVzdGFtcFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9nZXRMb2NhbFdyaXRlVGltZShlKS5pc0VxdWFsKF9fUFJJVkFURV9nZXRMb2NhbFdyaXRlVGltZSh0KSk7XG5cbiAgICAgIGNhc2UgMyAvKiBUeXBlT3JkZXIuVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX3RpbWVzdGFtcEVxdWFscyhlLCB0KSB7XG4gICAgICAgICAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgZS50aW1lc3RhbXBWYWx1ZSAmJiBcInN0cmluZ1wiID09IHR5cGVvZiB0LnRpbWVzdGFtcFZhbHVlICYmIGUudGltZXN0YW1wVmFsdWUubGVuZ3RoID09PSB0LnRpbWVzdGFtcFZhbHVlLmxlbmd0aCkgXG4gICAgICAgICAgICAvLyBVc2Ugc3RyaW5nIGVxdWFsaXR5IGZvciBJU08gODYwMSB0aW1lc3RhbXBzXG4gICAgICAgICAgICByZXR1cm4gZS50aW1lc3RhbXBWYWx1ZSA9PT0gdC50aW1lc3RhbXBWYWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfbm9ybWFsaXplVGltZXN0YW1wKGUudGltZXN0YW1wVmFsdWUpLCByID0gX19QUklWQVRFX25vcm1hbGl6ZVRpbWVzdGFtcCh0LnRpbWVzdGFtcFZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiBuLnNlY29uZHMgPT09IHIuc2Vjb25kcyAmJiBuLm5hbm9zID09PSByLm5hbm9zO1xuICAgICAgICB9KGUsIHQpO1xuXG4gICAgICBjYXNlIDUgLyogVHlwZU9yZGVyLlN0cmluZ1ZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGUuc3RyaW5nVmFsdWUgPT09IHQuc3RyaW5nVmFsdWU7XG5cbiAgICAgIGNhc2UgNiAvKiBUeXBlT3JkZXIuQmxvYlZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9ibG9iRXF1YWxzKGUsIHQpIHtcbiAgICAgICAgICAgIHJldHVybiBfX1BSSVZBVEVfbm9ybWFsaXplQnl0ZVN0cmluZyhlLmJ5dGVzVmFsdWUpLmlzRXF1YWwoX19QUklWQVRFX25vcm1hbGl6ZUJ5dGVTdHJpbmcodC5ieXRlc1ZhbHVlKSk7XG4gICAgICAgIH0oZSwgdCk7XG5cbiAgICAgIGNhc2UgNyAvKiBUeXBlT3JkZXIuUmVmVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZS5yZWZlcmVuY2VWYWx1ZSA9PT0gdC5yZWZlcmVuY2VWYWx1ZTtcblxuICAgICAgY2FzZSA4IC8qIFR5cGVPcmRlci5HZW9Qb2ludFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9nZW9Qb2ludEVxdWFscyhlLCB0KSB7XG4gICAgICAgICAgICByZXR1cm4gX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcihlLmdlb1BvaW50VmFsdWUubGF0aXR1ZGUpID09PSBfX1BSSVZBVEVfbm9ybWFsaXplTnVtYmVyKHQuZ2VvUG9pbnRWYWx1ZS5sYXRpdHVkZSkgJiYgX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcihlLmdlb1BvaW50VmFsdWUubG9uZ2l0dWRlKSA9PT0gX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcih0Lmdlb1BvaW50VmFsdWUubG9uZ2l0dWRlKTtcbiAgICAgICAgfShlLCB0KTtcblxuICAgICAgY2FzZSAyIC8qIFR5cGVPcmRlci5OdW1iZXJWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfbnVtYmVyRXF1YWxzKGUsIHQpIHtcbiAgICAgICAgICAgIGlmIChcImludGVnZXJWYWx1ZVwiIGluIGUgJiYgXCJpbnRlZ2VyVmFsdWVcIiBpbiB0KSByZXR1cm4gX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcihlLmludGVnZXJWYWx1ZSkgPT09IF9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIodC5pbnRlZ2VyVmFsdWUpO1xuICAgICAgICAgICAgaWYgKFwiZG91YmxlVmFsdWVcIiBpbiBlICYmIFwiZG91YmxlVmFsdWVcIiBpbiB0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIoZS5kb3VibGVWYWx1ZSksIHIgPSBfX1BSSVZBVEVfbm9ybWFsaXplTnVtYmVyKHQuZG91YmxlVmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuID09PSByID8gX19QUklWQVRFX2lzTmVnYXRpdmVaZXJvKG4pID09PSBfX1BSSVZBVEVfaXNOZWdhdGl2ZVplcm8ocikgOiBpc05hTihuKSAmJiBpc05hTihyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgfShlLCB0KTtcblxuICAgICAgY2FzZSA5IC8qIFR5cGVPcmRlci5BcnJheVZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9hcnJheUVxdWFscyhlLmFycmF5VmFsdWUudmFsdWVzIHx8IFtdLCB0LmFycmF5VmFsdWUudmFsdWVzIHx8IFtdLCBfX1BSSVZBVEVfdmFsdWVFcXVhbHMpO1xuXG4gICAgICBjYXNlIDEwIC8qIFR5cGVPcmRlci5WZWN0b3JWYWx1ZSAqLyA6XG4gICAgICBjYXNlIDExIC8qIFR5cGVPcmRlci5PYmplY3RWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfb2JqZWN0RXF1YWxzKGUsIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLm1hcFZhbHVlLmZpZWxkcyB8fCB7fSwgciA9IHQubWFwVmFsdWUuZmllbGRzIHx8IHt9O1xuICAgICAgICAgICAgaWYgKF9fUFJJVkFURV9vYmplY3RTaXplKG4pICE9PSBfX1BSSVZBVEVfb2JqZWN0U2l6ZShyKSkgcmV0dXJuICExO1xuICAgICAgICAgICAgZm9yIChjb25zdCBlIGluIG4pIGlmIChuLmhhc093blByb3BlcnR5KGUpICYmICh2b2lkIDAgPT09IHJbZV0gfHwgIV9fUFJJVkFURV92YWx1ZUVxdWFscyhuW2VdLCByW2VdKSkpIHJldHVybiAhMTtcbiAgICAgICAgICAgIHJldHVybiAhMDtcbiAgICAgICAgfVxuICAgICAgICAvKiogUmV0dXJucyB0cnVlIGlmIHRoZSBBcnJheVZhbHVlIGNvbnRhaW5zIHRoZSBzcGVjaWZpZWQgZWxlbWVudC4gKi8gKGUsIHQpO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZmFpbCg1MjIxNiwge1xuICAgICAgICAgICAgbGVmdDogZVxuICAgICAgICB9KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9hcnJheVZhbHVlQ29udGFpbnMoZSwgdCkge1xuICAgIHJldHVybiB2b2lkIDAgIT09IChlLnZhbHVlcyB8fCBbXSkuZmluZCgoZSA9PiBfX1BSSVZBVEVfdmFsdWVFcXVhbHMoZSwgdCkpKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3ZhbHVlQ29tcGFyZShlLCB0KSB7XG4gICAgaWYgKGUgPT09IHQpIHJldHVybiAwO1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfdHlwZU9yZGVyKGUpLCByID0gX19QUklWQVRFX3R5cGVPcmRlcih0KTtcbiAgICBpZiAobiAhPT0gcikgcmV0dXJuIF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKG4sIHIpO1xuICAgIHN3aXRjaCAobikge1xuICAgICAgY2FzZSAwIC8qIFR5cGVPcmRlci5OdWxsVmFsdWUgKi8gOlxuICAgICAgY2FzZSA5MDA3MTk5MjU0NzQwOTkxIC8qIFR5cGVPcmRlci5NYXhWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiAwO1xuXG4gICAgICBjYXNlIDEgLyogVHlwZU9yZGVyLkJvb2xlYW5WYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihlLmJvb2xlYW5WYWx1ZSwgdC5ib29sZWFuVmFsdWUpO1xuXG4gICAgICBjYXNlIDIgLyogVHlwZU9yZGVyLk51bWJlclZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9jb21wYXJlTnVtYmVycyhlLCB0KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcihlLmludGVnZXJWYWx1ZSB8fCBlLmRvdWJsZVZhbHVlKSwgciA9IF9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIodC5pbnRlZ2VyVmFsdWUgfHwgdC5kb3VibGVWYWx1ZSk7XG4gICAgICAgICAgICByZXR1cm4gbiA8IHIgPyAtMSA6IG4gPiByID8gMSA6IG4gPT09IHIgPyAwIDogXG4gICAgICAgICAgICAvLyBvbmUgb3IgYm90aCBhcmUgTmFOLlxuICAgICAgICAgICAgaXNOYU4obikgPyBpc05hTihyKSA/IDAgOiAtMSA6IDE7XG4gICAgICAgIH0oZSwgdCk7XG5cbiAgICAgIGNhc2UgMyAvKiBUeXBlT3JkZXIuVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gX19QUklWQVRFX2NvbXBhcmVUaW1lc3RhbXBzKGUudGltZXN0YW1wVmFsdWUsIHQudGltZXN0YW1wVmFsdWUpO1xuXG4gICAgICBjYXNlIDQgLyogVHlwZU9yZGVyLlNlcnZlclRpbWVzdGFtcFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9jb21wYXJlVGltZXN0YW1wcyhfX1BSSVZBVEVfZ2V0TG9jYWxXcml0ZVRpbWUoZSksIF9fUFJJVkFURV9nZXRMb2NhbFdyaXRlVGltZSh0KSk7XG5cbiAgICAgIGNhc2UgNSAvKiBUeXBlT3JkZXIuU3RyaW5nVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gX19QUklWQVRFX2NvbXBhcmVVdGY4U3RyaW5ncyhlLnN0cmluZ1ZhbHVlLCB0LnN0cmluZ1ZhbHVlKTtcblxuICAgICAgY2FzZSA2IC8qIFR5cGVPcmRlci5CbG9iVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX2NvbXBhcmVCbG9icyhlLCB0KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX25vcm1hbGl6ZUJ5dGVTdHJpbmcoZSksIHIgPSBfX1BSSVZBVEVfbm9ybWFsaXplQnl0ZVN0cmluZyh0KTtcbiAgICAgICAgICAgIHJldHVybiBuLmNvbXBhcmVUbyhyKTtcbiAgICAgICAgfShlLmJ5dGVzVmFsdWUsIHQuYnl0ZXNWYWx1ZSk7XG5cbiAgICAgIGNhc2UgNyAvKiBUeXBlT3JkZXIuUmVmVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX2NvbXBhcmVSZWZlcmVuY2VzKGUsIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLnNwbGl0KFwiL1wiKSwgciA9IHQuc3BsaXQoXCIvXCIpO1xuICAgICAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCBuLmxlbmd0aCAmJiBlIDwgci5sZW5ndGg7IGUrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihuW2VdLCByW2VdKTtcbiAgICAgICAgICAgICAgICBpZiAoMCAhPT0gdCkgcmV0dXJuIHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3Iobi5sZW5ndGgsIHIubGVuZ3RoKTtcbiAgICAgICAgfShlLnJlZmVyZW5jZVZhbHVlLCB0LnJlZmVyZW5jZVZhbHVlKTtcblxuICAgICAgY2FzZSA4IC8qIFR5cGVPcmRlci5HZW9Qb2ludFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9jb21wYXJlR2VvUG9pbnRzKGUsIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihfX1BSSVZBVEVfbm9ybWFsaXplTnVtYmVyKGUubGF0aXR1ZGUpLCBfX1BSSVZBVEVfbm9ybWFsaXplTnVtYmVyKHQubGF0aXR1ZGUpKTtcbiAgICAgICAgICAgIGlmICgwICE9PSBuKSByZXR1cm4gbjtcbiAgICAgICAgICAgIHJldHVybiBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihfX1BSSVZBVEVfbm9ybWFsaXplTnVtYmVyKGUubG9uZ2l0dWRlKSwgX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcih0LmxvbmdpdHVkZSkpO1xuICAgICAgICB9KGUuZ2VvUG9pbnRWYWx1ZSwgdC5nZW9Qb2ludFZhbHVlKTtcblxuICAgICAgY2FzZSA5IC8qIFR5cGVPcmRlci5BcnJheVZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9jb21wYXJlQXJyYXlzKGUuYXJyYXlWYWx1ZSwgdC5hcnJheVZhbHVlKTtcblxuICAgICAgY2FzZSAxMCAvKiBUeXBlT3JkZXIuVmVjdG9yVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX2NvbXBhcmVWZWN0b3JzKGUsIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLmZpZWxkcyB8fCB7fSwgciA9IHQuZmllbGRzIHx8IHt9LCBpID0gbltFdF0/LmFycmF5VmFsdWUsIHMgPSByW0V0XT8uYXJyYXlWYWx1ZSwgbyA9IF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKGk/LnZhbHVlcz8ubGVuZ3RoIHx8IDAsIHM/LnZhbHVlcz8ubGVuZ3RoIHx8IDApO1xuICAgICAgICAgICAgaWYgKDAgIT09IG8pIHJldHVybiBvO1xuICAgICAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9jb21wYXJlQXJyYXlzKGksIHMpO1xuICAgICAgICB9KGUubWFwVmFsdWUsIHQubWFwVmFsdWUpO1xuXG4gICAgICBjYXNlIDExIC8qIFR5cGVPcmRlci5PYmplY3RWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfY29tcGFyZU1hcHMoZSwgdCkge1xuICAgICAgICAgICAgaWYgKGUgPT09IFR0Lm1hcFZhbHVlICYmIHQgPT09IFR0Lm1hcFZhbHVlKSByZXR1cm4gMDtcbiAgICAgICAgICAgIGlmIChlID09PSBUdC5tYXBWYWx1ZSkgcmV0dXJuIDE7XG4gICAgICAgICAgICBpZiAodCA9PT0gVHQubWFwVmFsdWUpIHJldHVybiAtMTtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLmZpZWxkcyB8fCB7fSwgciA9IE9iamVjdC5rZXlzKG4pLCBpID0gdC5maWVsZHMgfHwge30sIHMgPSBPYmplY3Qua2V5cyhpKTtcbiAgICAgICAgICAgIC8vIEV2ZW4gdGhvdWdoIE1hcFZhbHVlcyBhcmUgbGlrZWx5IHNvcnRlZCBjb3JyZWN0bHkgYmFzZWQgb24gdGhlaXIgaW5zZXJ0aW9uXG4gICAgICAgICAgICAvLyBvcmRlciAoZS5nLiB3aGVuIHJlY2VpdmVkIGZyb20gdGhlIGJhY2tlbmQpLCBsb2NhbCBtb2RpZmljYXRpb25zIGNhbiBicmluZ1xuICAgICAgICAgICAgLy8gZWxlbWVudHMgb3V0IG9mIG9yZGVyLiBXZSBuZWVkIHRvIHJlLXNvcnQgdGhlIGVsZW1lbnRzIHRvIGVuc3VyZSB0aGF0XG4gICAgICAgICAgICAvLyBjYW5vbmljYWwgSURzIGFyZSBpbmRlcGVuZGVudCBvZiBpbnNlcnRpb24gb3JkZXIuXG4gICAgICAgICAgICByLnNvcnQoKSwgcy5zb3J0KCk7XG4gICAgICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IHIubGVuZ3RoICYmIGUgPCBzLmxlbmd0aDsgKytlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9jb21wYXJlVXRmOFN0cmluZ3MocltlXSwgc1tlXSk7XG4gICAgICAgICAgICAgICAgaWYgKDAgIT09IHQpIHJldHVybiB0O1xuICAgICAgICAgICAgICAgIGNvbnN0IG8gPSBfX1BSSVZBVEVfdmFsdWVDb21wYXJlKG5bcltlXV0sIGlbc1tlXV0pO1xuICAgICAgICAgICAgICAgIGlmICgwICE9PSBvKSByZXR1cm4gbztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihyLmxlbmd0aCwgcy5sZW5ndGgpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogR2VuZXJhdGVzIHRoZSBjYW5vbmljYWwgSUQgZm9yIHRoZSBwcm92aWRlZCBmaWVsZCB2YWx1ZSAoYXMgdXNlZCBpbiBUYXJnZXRcbiAqIHNlcmlhbGl6YXRpb24pLlxuICovIChlLm1hcFZhbHVlLCB0Lm1hcFZhbHVlKTtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgZmFpbCgyMzI2NCwge1xuICAgICAgICAgICAgaGU6IG5cbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfY29tcGFyZVRpbWVzdGFtcHMoZSwgdCkge1xuICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiBlICYmIFwic3RyaW5nXCIgPT0gdHlwZW9mIHQgJiYgZS5sZW5ndGggPT09IHQubGVuZ3RoKSByZXR1cm4gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IoZSwgdCk7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9ub3JtYWxpemVUaW1lc3RhbXAoZSksIHIgPSBfX1BSSVZBVEVfbm9ybWFsaXplVGltZXN0YW1wKHQpLCBpID0gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3Iobi5zZWNvbmRzLCByLnNlY29uZHMpO1xuICAgIHJldHVybiAwICE9PSBpID8gaSA6IF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKG4ubmFub3MsIHIubmFub3MpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfY29tcGFyZUFycmF5cyhlLCB0KSB7XG4gICAgY29uc3QgbiA9IGUudmFsdWVzIHx8IFtdLCByID0gdC52YWx1ZXMgfHwgW107XG4gICAgZm9yIChsZXQgZSA9IDA7IGUgPCBuLmxlbmd0aCAmJiBlIDwgci5sZW5ndGg7ICsrZSkge1xuICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX3ZhbHVlQ29tcGFyZShuW2VdLCByW2VdKTtcbiAgICAgICAgaWYgKHQpIHJldHVybiB0O1xuICAgIH1cbiAgICByZXR1cm4gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3Iobi5sZW5ndGgsIHIubGVuZ3RoKTtcbn1cblxuZnVuY3Rpb24gY2Fub25pY2FsSWQoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfY2Fub25pZnlWYWx1ZShlKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2Nhbm9uaWZ5VmFsdWUoZSkge1xuICAgIHJldHVybiBcIm51bGxWYWx1ZVwiIGluIGUgPyBcIm51bGxcIiA6IFwiYm9vbGVhblZhbHVlXCIgaW4gZSA/IFwiXCIgKyBlLmJvb2xlYW5WYWx1ZSA6IFwiaW50ZWdlclZhbHVlXCIgaW4gZSA/IFwiXCIgKyBlLmludGVnZXJWYWx1ZSA6IFwiZG91YmxlVmFsdWVcIiBpbiBlID8gXCJcIiArIGUuZG91YmxlVmFsdWUgOiBcInRpbWVzdGFtcFZhbHVlXCIgaW4gZSA/IGZ1bmN0aW9uIF9fUFJJVkFURV9jYW5vbmlmeVRpbWVzdGFtcChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfbm9ybWFsaXplVGltZXN0YW1wKGUpO1xuICAgICAgICByZXR1cm4gYHRpbWUoJHt0LnNlY29uZHN9LCR7dC5uYW5vc30pYDtcbiAgICB9KGUudGltZXN0YW1wVmFsdWUpIDogXCJzdHJpbmdWYWx1ZVwiIGluIGUgPyBlLnN0cmluZ1ZhbHVlIDogXCJieXRlc1ZhbHVlXCIgaW4gZSA/IGZ1bmN0aW9uIF9fUFJJVkFURV9jYW5vbmlmeUJ5dGVTdHJpbmcoZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX25vcm1hbGl6ZUJ5dGVTdHJpbmcoZSkudG9CYXNlNjQoKTtcbiAgICB9KGUuYnl0ZXNWYWx1ZSkgOiBcInJlZmVyZW5jZVZhbHVlXCIgaW4gZSA/IGZ1bmN0aW9uIF9fUFJJVkFURV9jYW5vbmlmeVJlZmVyZW5jZShlKSB7XG4gICAgICAgIHJldHVybiBEb2N1bWVudEtleS5mcm9tTmFtZShlKS50b1N0cmluZygpO1xuICAgIH0oZS5yZWZlcmVuY2VWYWx1ZSkgOiBcImdlb1BvaW50VmFsdWVcIiBpbiBlID8gZnVuY3Rpb24gX19QUklWQVRFX2Nhbm9uaWZ5R2VvUG9pbnQoZSkge1xuICAgICAgICByZXR1cm4gYGdlbygke2UubGF0aXR1ZGV9LCR7ZS5sb25naXR1ZGV9KWA7XG4gICAgfShlLmdlb1BvaW50VmFsdWUpIDogXCJhcnJheVZhbHVlXCIgaW4gZSA/IGZ1bmN0aW9uIF9fUFJJVkFURV9jYW5vbmlmeUFycmF5KGUpIHtcbiAgICAgICAgbGV0IHQgPSBcIltcIiwgbiA9ICEwO1xuICAgICAgICBmb3IgKGNvbnN0IHIgb2YgZS52YWx1ZXMgfHwgW10pIG4gPyBuID0gITEgOiB0ICs9IFwiLFwiLCB0ICs9IF9fUFJJVkFURV9jYW5vbmlmeVZhbHVlKHIpO1xuICAgICAgICByZXR1cm4gdCArIFwiXVwiO1xuICAgIH1cbiAgICAvKipcbiAqIFJldHVybnMgYW4gYXBwcm94aW1hdGUgKGFuZCB3aWxkbHkgaW5hY2N1cmF0ZSkgaW4tbWVtb3J5IHNpemUgZm9yIHRoZSBmaWVsZFxuICogdmFsdWUuXG4gKlxuICogVGhlIG1lbW9yeSBzaXplIHRha2VzIGludG8gYWNjb3VudCBvbmx5IHRoZSBhY3R1YWwgdXNlciBkYXRhIGFzIGl0IHJlc2lkZXNcbiAqIGluIG1lbW9yeSBhbmQgaWdub3JlcyBvYmplY3Qgb3ZlcmhlYWQuXG4gKi8gKGUuYXJyYXlWYWx1ZSkgOiBcIm1hcFZhbHVlXCIgaW4gZSA/IGZ1bmN0aW9uIF9fUFJJVkFURV9jYW5vbmlmeU1hcChlKSB7XG4gICAgICAgIC8vIEl0ZXJhdGlvbiBvcmRlciBpbiBKYXZhU2NyaXB0IGlzIG5vdCBndWFyYW50ZWVkLiBUbyBlbnN1cmUgdGhhdCB3ZSBnZW5lcmF0ZVxuICAgICAgICAvLyBtYXRjaGluZyBjYW5vbmljYWwgSURzIGZvciBpZGVudGljYWwgbWFwcywgd2UgbmVlZCB0byBzb3J0IHRoZSBrZXlzLlxuICAgICAgICBjb25zdCB0ID0gT2JqZWN0LmtleXMoZS5maWVsZHMgfHwge30pLnNvcnQoKTtcbiAgICAgICAgbGV0IG4gPSBcIntcIiwgciA9ICEwO1xuICAgICAgICBmb3IgKGNvbnN0IGkgb2YgdCkgciA/IHIgPSAhMSA6IG4gKz0gXCIsXCIsIG4gKz0gYCR7aX06JHtfX1BSSVZBVEVfY2Fub25pZnlWYWx1ZShlLmZpZWxkc1tpXSl9YDtcbiAgICAgICAgcmV0dXJuIG4gKyBcIn1cIjtcbiAgICB9KGUubWFwVmFsdWUpIDogZmFpbCg2MTAwNSwge1xuICAgICAgICB2YWx1ZTogZVxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZXN0aW1hdGVCeXRlU2l6ZShlKSB7XG4gICAgc3dpdGNoIChfX1BSSVZBVEVfdHlwZU9yZGVyKGUpKSB7XG4gICAgICBjYXNlIDAgLyogVHlwZU9yZGVyLk51bGxWYWx1ZSAqLyA6XG4gICAgICBjYXNlIDEgLyogVHlwZU9yZGVyLkJvb2xlYW5WYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiA0O1xuXG4gICAgICBjYXNlIDIgLyogVHlwZU9yZGVyLk51bWJlclZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIDg7XG5cbiAgICAgIGNhc2UgMyAvKiBUeXBlT3JkZXIuVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgY2FzZSA4IC8qIFR5cGVPcmRlci5HZW9Qb2ludFZhbHVlICovIDpcbiAgICAgICAgLy8gR2VvUG9pbnRzIGFyZSBtYWRlIHVwIG9mIHR3byBkaXN0aW5jdCBudW1iZXJzIChsYXRpdHVkZSArIGxvbmdpdHVkZSlcbiAgICAgICAgcmV0dXJuIDE2O1xuXG4gICAgICBjYXNlIDQgLyogVHlwZU9yZGVyLlNlcnZlclRpbWVzdGFtcFZhbHVlICovIDpcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9nZXRQcmV2aW91c1ZhbHVlKGUpO1xuICAgICAgICByZXR1cm4gdCA/IDE2ICsgX19QUklWQVRFX2VzdGltYXRlQnl0ZVNpemUodCkgOiAxNjtcblxuICAgICAgY2FzZSA1IC8qIFR5cGVPcmRlci5TdHJpbmdWYWx1ZSAqLyA6XG4gICAgICAgIC8vIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L0RhdGFfc3RydWN0dXJlczpcbiAgICAgICAgLy8gXCJKYXZhU2NyaXB0J3MgU3RyaW5nIHR5cGUgaXMgWy4uLl0gYSBzZXQgb2YgZWxlbWVudHMgb2YgMTYtYml0IHVuc2lnbmVkXG4gICAgICAgIC8vIGludGVnZXIgdmFsdWVzXCJcbiAgICAgICAgcmV0dXJuIDIgKiBlLnN0cmluZ1ZhbHVlLmxlbmd0aDtcblxuICAgICAgY2FzZSA2IC8qIFR5cGVPcmRlci5CbG9iVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gX19QUklWQVRFX25vcm1hbGl6ZUJ5dGVTdHJpbmcoZS5ieXRlc1ZhbHVlKS5hcHByb3hpbWF0ZUJ5dGVTaXplKCk7XG5cbiAgICAgIGNhc2UgNyAvKiBUeXBlT3JkZXIuUmVmVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZS5yZWZlcmVuY2VWYWx1ZS5sZW5ndGg7XG5cbiAgICAgIGNhc2UgOSAvKiBUeXBlT3JkZXIuQXJyYXlWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfZXN0aW1hdGVBcnJheUJ5dGVTaXplKGUpIHtcbiAgICAgICAgICAgIHJldHVybiAoZS52YWx1ZXMgfHwgW10pLnJlZHVjZSgoKGUsIHQpID0+IGUgKyBfX1BSSVZBVEVfZXN0aW1hdGVCeXRlU2l6ZSh0KSksIDApO1xuICAgICAgICB9XG4gICAgICAgIC8qKiBSZXR1cm5zIGEgcmVmZXJlbmNlIHZhbHVlIGZvciB0aGUgcHJvdmlkZWQgZGF0YWJhc2UgYW5kIGtleS4gKi8gKGUuYXJyYXlWYWx1ZSk7XG5cbiAgICAgIGNhc2UgMTAgLyogVHlwZU9yZGVyLlZlY3RvclZhbHVlICovIDpcbiAgICAgIGNhc2UgMTEgLyogVHlwZU9yZGVyLk9iamVjdFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9lc3RpbWF0ZU1hcEJ5dGVTaXplKGUpIHtcbiAgICAgICAgICAgIGxldCB0ID0gMDtcbiAgICAgICAgICAgIHJldHVybiBmb3JFYWNoKGUuZmllbGRzLCAoKGUsIG4pID0+IHtcbiAgICAgICAgICAgICAgICB0ICs9IGUubGVuZ3RoICsgX19QUklWQVRFX2VzdGltYXRlQnl0ZVNpemUobik7XG4gICAgICAgICAgICB9KSksIHQ7XG4gICAgICAgIH0oZS5tYXBWYWx1ZSk7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IGZhaWwoMTM0ODYsIHtcbiAgICAgICAgICAgIHZhbHVlOiBlXG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3JlZlZhbHVlKGUsIHQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICByZWZlcmVuY2VWYWx1ZTogYHByb2plY3RzLyR7ZS5wcm9qZWN0SWR9L2RhdGFiYXNlcy8ke2UuZGF0YWJhc2V9L2RvY3VtZW50cy8ke3QucGF0aC5jYW5vbmljYWxTdHJpbmcoKX1gXG4gICAgfTtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGFuIEludGVnZXJWYWx1ZSAuICovIGZ1bmN0aW9uIGlzSW50ZWdlcihlKSB7XG4gICAgcmV0dXJuICEhZSAmJiBcImludGVnZXJWYWx1ZVwiIGluIGU7XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBhIERvdWJsZVZhbHVlLiAqL1xuLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGFuIEFycmF5VmFsdWUuICovXG5mdW5jdGlvbiBpc0FycmF5KGUpIHtcbiAgICByZXR1cm4gISFlICYmIFwiYXJyYXlWYWx1ZVwiIGluIGU7XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBhIE51bGxWYWx1ZS4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2lzTnVsbFZhbHVlKGUpIHtcbiAgICByZXR1cm4gISFlICYmIFwibnVsbFZhbHVlXCIgaW4gZTtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIE5hTi4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2lzTmFuVmFsdWUoZSkge1xuICAgIHJldHVybiAhIWUgJiYgXCJkb3VibGVWYWx1ZVwiIGluIGUgJiYgaXNOYU4oTnVtYmVyKGUuZG91YmxlVmFsdWUpKTtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGEgTWFwVmFsdWUuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9pc01hcFZhbHVlKGUpIHtcbiAgICByZXR1cm4gISFlICYmIFwibWFwVmFsdWVcIiBpbiBlO1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgYSBWZXRvclZhbHVlLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfaXNWZWN0b3JWYWx1ZShlKSB7XG4gICAgY29uc3QgdCA9IChlPy5tYXBWYWx1ZT8uZmllbGRzIHx8IHt9KVtodF0/LnN0cmluZ1ZhbHVlO1xuICAgIHJldHVybiB0ID09PSBJdDtcbn1cblxuLyoqIENyZWF0ZXMgYSBkZWVwIGNvcHkgb2YgYHNvdXJjZWAuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9kZWVwQ2xvbmUoZSkge1xuICAgIGlmIChlLmdlb1BvaW50VmFsdWUpIHJldHVybiB7XG4gICAgICAgIGdlb1BvaW50VmFsdWU6IHtcbiAgICAgICAgICAgIC4uLmUuZ2VvUG9pbnRWYWx1ZVxuICAgICAgICB9XG4gICAgfTtcbiAgICBpZiAoZS50aW1lc3RhbXBWYWx1ZSAmJiBcIm9iamVjdFwiID09IHR5cGVvZiBlLnRpbWVzdGFtcFZhbHVlKSByZXR1cm4ge1xuICAgICAgICB0aW1lc3RhbXBWYWx1ZToge1xuICAgICAgICAgICAgLi4uZS50aW1lc3RhbXBWYWx1ZVxuICAgICAgICB9XG4gICAgfTtcbiAgICBpZiAoZS5tYXBWYWx1ZSkge1xuICAgICAgICBjb25zdCB0ID0ge1xuICAgICAgICAgICAgbWFwVmFsdWU6IHtcbiAgICAgICAgICAgICAgICBmaWVsZHM6IHt9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBmb3JFYWNoKGUubWFwVmFsdWUuZmllbGRzLCAoKGUsIG4pID0+IHQubWFwVmFsdWUuZmllbGRzW2VdID0gX19QUklWQVRFX2RlZXBDbG9uZShuKSkpLCBcbiAgICAgICAgdDtcbiAgICB9XG4gICAgaWYgKGUuYXJyYXlWYWx1ZSkge1xuICAgICAgICBjb25zdCB0ID0ge1xuICAgICAgICAgICAgYXJyYXlWYWx1ZToge1xuICAgICAgICAgICAgICAgIHZhbHVlczogW11cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCAoZS5hcnJheVZhbHVlLnZhbHVlcyB8fCBbXSkubGVuZ3RoOyArK24pIHQuYXJyYXlWYWx1ZS52YWx1ZXNbbl0gPSBfX1BSSVZBVEVfZGVlcENsb25lKGUuYXJyYXlWYWx1ZS52YWx1ZXNbbl0pO1xuICAgICAgICByZXR1cm4gdDtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4uZVxuICAgIH07XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgdGhlIFZhbHVlIHJlcHJlc2VudHMgdGhlIGNhbm9uaWNhbCB7QGxpbmsgI01BWF9WQUxVRX0gLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfaXNNYXhWYWx1ZShlKSB7XG4gICAgcmV0dXJuICgoKGUubWFwVmFsdWUgfHwge30pLmZpZWxkcyB8fCB7fSkuX190eXBlX18gfHwge30pLnN0cmluZ1ZhbHVlID09PSBQdDtcbn1cblxuY29uc3QgQXQgPSB7XG4gICAgbWFwVmFsdWU6IHtcbiAgICAgICAgZmllbGRzOiB7XG4gICAgICAgICAgICBbaHRdOiB7XG4gICAgICAgICAgICAgICAgc3RyaW5nVmFsdWU6IEl0XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgW0V0XToge1xuICAgICAgICAgICAgICAgIGFycmF5VmFsdWU6IHt9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG4vKiogUmV0dXJucyB0aGUgbG93ZXN0IHZhbHVlIGZvciB0aGUgZ2l2ZW4gdmFsdWUgdHlwZSAoaW5jbHVzaXZlKS4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3ZhbHVlc0dldExvd2VyQm91bmQoZSkge1xuICAgIHJldHVybiBcIm51bGxWYWx1ZVwiIGluIGUgPyBkdCA6IFwiYm9vbGVhblZhbHVlXCIgaW4gZSA/IHtcbiAgICAgICAgYm9vbGVhblZhbHVlOiAhMVxuICAgIH0gOiBcImludGVnZXJWYWx1ZVwiIGluIGUgfHwgXCJkb3VibGVWYWx1ZVwiIGluIGUgPyB7XG4gICAgICAgIGRvdWJsZVZhbHVlOiBOYU5cbiAgICB9IDogXCJ0aW1lc3RhbXBWYWx1ZVwiIGluIGUgPyB7XG4gICAgICAgIHRpbWVzdGFtcFZhbHVlOiB7XG4gICAgICAgICAgICBzZWNvbmRzOiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUlxuICAgICAgICB9XG4gICAgfSA6IFwic3RyaW5nVmFsdWVcIiBpbiBlID8ge1xuICAgICAgICBzdHJpbmdWYWx1ZTogXCJcIlxuICAgIH0gOiBcImJ5dGVzVmFsdWVcIiBpbiBlID8ge1xuICAgICAgICBieXRlc1ZhbHVlOiBcIlwiXG4gICAgfSA6IFwicmVmZXJlbmNlVmFsdWVcIiBpbiBlID8gX19QUklWQVRFX3JlZlZhbHVlKERhdGFiYXNlSWQuZW1wdHkoKSwgRG9jdW1lbnRLZXkuZW1wdHkoKSkgOiBcImdlb1BvaW50VmFsdWVcIiBpbiBlID8ge1xuICAgICAgICBnZW9Qb2ludFZhbHVlOiB7XG4gICAgICAgICAgICBsYXRpdHVkZTogLTkwLFxuICAgICAgICAgICAgbG9uZ2l0dWRlOiAtMTgwXG4gICAgICAgIH1cbiAgICB9IDogXCJhcnJheVZhbHVlXCIgaW4gZSA/IHtcbiAgICAgICAgYXJyYXlWYWx1ZToge31cbiAgICB9IDogXCJtYXBWYWx1ZVwiIGluIGUgPyBfX1BSSVZBVEVfaXNWZWN0b3JWYWx1ZShlKSA/IEF0IDoge1xuICAgICAgICBtYXBWYWx1ZToge31cbiAgICB9IDogZmFpbCgzNTk0Miwge1xuICAgICAgICB2YWx1ZTogZVxuICAgIH0pO1xufVxuXG4vKiogUmV0dXJucyB0aGUgbGFyZ2VzdCB2YWx1ZSBmb3IgdGhlIGdpdmVuIHZhbHVlIHR5cGUgKGV4Y2x1c2l2ZSkuICovIGZ1bmN0aW9uIF9fUFJJVkFURV92YWx1ZXNHZXRVcHBlckJvdW5kKGUpIHtcbiAgICByZXR1cm4gXCJudWxsVmFsdWVcIiBpbiBlID8ge1xuICAgICAgICBib29sZWFuVmFsdWU6ICExXG4gICAgfSA6IFwiYm9vbGVhblZhbHVlXCIgaW4gZSA/IHtcbiAgICAgICAgZG91YmxlVmFsdWU6IE5hTlxuICAgIH0gOiBcImludGVnZXJWYWx1ZVwiIGluIGUgfHwgXCJkb3VibGVWYWx1ZVwiIGluIGUgPyB7XG4gICAgICAgIHRpbWVzdGFtcFZhbHVlOiB7XG4gICAgICAgICAgICBzZWNvbmRzOiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUlxuICAgICAgICB9XG4gICAgfSA6IFwidGltZXN0YW1wVmFsdWVcIiBpbiBlID8ge1xuICAgICAgICBzdHJpbmdWYWx1ZTogXCJcIlxuICAgIH0gOiBcInN0cmluZ1ZhbHVlXCIgaW4gZSA/IHtcbiAgICAgICAgYnl0ZXNWYWx1ZTogXCJcIlxuICAgIH0gOiBcImJ5dGVzVmFsdWVcIiBpbiBlID8gX19QUklWQVRFX3JlZlZhbHVlKERhdGFiYXNlSWQuZW1wdHkoKSwgRG9jdW1lbnRLZXkuZW1wdHkoKSkgOiBcInJlZmVyZW5jZVZhbHVlXCIgaW4gZSA/IHtcbiAgICAgICAgZ2VvUG9pbnRWYWx1ZToge1xuICAgICAgICAgICAgbGF0aXR1ZGU6IC05MCxcbiAgICAgICAgICAgIGxvbmdpdHVkZTogLTE4MFxuICAgICAgICB9XG4gICAgfSA6IFwiZ2VvUG9pbnRWYWx1ZVwiIGluIGUgPyB7XG4gICAgICAgIGFycmF5VmFsdWU6IHt9XG4gICAgfSA6IFwiYXJyYXlWYWx1ZVwiIGluIGUgPyBBdCA6IFwibWFwVmFsdWVcIiBpbiBlID8gX19QUklWQVRFX2lzVmVjdG9yVmFsdWUoZSkgPyB7XG4gICAgICAgIG1hcFZhbHVlOiB7fVxuICAgIH0gOiBUdCA6IGZhaWwoNjE5NTksIHtcbiAgICAgICAgdmFsdWU6IGVcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2xvd2VyQm91bmRDb21wYXJlKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX3ZhbHVlQ29tcGFyZShlLnZhbHVlLCB0LnZhbHVlKTtcbiAgICByZXR1cm4gMCAhPT0gbiA/IG4gOiBlLmluY2x1c2l2ZSAmJiAhdC5pbmNsdXNpdmUgPyAtMSA6ICFlLmluY2x1c2l2ZSAmJiB0LmluY2x1c2l2ZSA/IDEgOiAwO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdXBwZXJCb3VuZENvbXBhcmUoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfdmFsdWVDb21wYXJlKGUudmFsdWUsIHQudmFsdWUpO1xuICAgIHJldHVybiAwICE9PSBuID8gbiA6IGUuaW5jbHVzaXZlICYmICF0LmluY2x1c2l2ZSA/IDEgOiAhZS5pbmNsdXNpdmUgJiYgdC5pbmNsdXNpdmUgPyAtMSA6IDA7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIE9iamVjdFZhbHVlIHJlcHJlc2VudHMgYSBNYXBWYWx1ZSBpbiB0aGUgRmlyZXN0b3JlIFByb3RvIGFuZCBvZmZlcnMgdGhlXG4gKiBhYmlsaXR5IHRvIGFkZCBhbmQgcmVtb3ZlIGZpZWxkcyAodmlhIHRoZSBPYmplY3RWYWx1ZUJ1aWxkZXIpLlxuICovIGNsYXNzIE9iamVjdFZhbHVlIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSBlO1xuICAgIH1cbiAgICBzdGF0aWMgZW1wdHkoKSB7XG4gICAgICAgIHJldHVybiBuZXcgT2JqZWN0VmFsdWUoe1xuICAgICAgICAgICAgbWFwVmFsdWU6IHt9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB2YWx1ZSBhdCB0aGUgZ2l2ZW4gcGF0aCBvciBudWxsLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhdGggLSB0aGUgcGF0aCB0byBzZWFyY2hcbiAgICAgKiBAcmV0dXJucyBUaGUgdmFsdWUgYXQgdGhlIHBhdGggb3IgbnVsbCBpZiB0aGUgcGF0aCBpcyBub3Qgc2V0LlxuICAgICAqLyAgICBmaWVsZChlKSB7XG4gICAgICAgIGlmIChlLmlzRW1wdHkoKSkgcmV0dXJuIHRoaXMudmFsdWU7XG4gICAgICAgIHtcbiAgICAgICAgICAgIGxldCB0ID0gdGhpcy52YWx1ZTtcbiAgICAgICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgZS5sZW5ndGggLSAxOyArK24pIGlmICh0ID0gKHQubWFwVmFsdWUuZmllbGRzIHx8IHt9KVtlLmdldChuKV0sIFxuICAgICAgICAgICAgIV9fUFJJVkFURV9pc01hcFZhbHVlKHQpKSByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiB0ID0gKHQubWFwVmFsdWUuZmllbGRzIHx8IHt9KVtlLmxhc3RTZWdtZW50KCldLCB0IHx8IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgZmllbGQgdG8gdGhlIHByb3ZpZGVkIHZhbHVlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhdGggLSBUaGUgZmllbGQgcGF0aCB0byBzZXQuXG4gICAgICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIHNldC5cbiAgICAgKi8gICAgc2V0KGUsIHQpIHtcbiAgICAgICAgdGhpcy5nZXRGaWVsZHNNYXAoZS5wb3BMYXN0KCkpW2UubGFzdFNlZ21lbnQoKV0gPSBfX1BSSVZBVEVfZGVlcENsb25lKHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBwcm92aWRlZCBmaWVsZHMgdG8gdGhlIHByb3ZpZGVkIHZhbHVlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkYXRhIC0gQSBtYXAgb2YgZmllbGRzIHRvIHZhbHVlcyAob3IgbnVsbCBmb3IgZGVsZXRlcykuXG4gICAgICovICAgIHNldEFsbChlKSB7XG4gICAgICAgIGxldCB0ID0gRmllbGRQYXRoJDEuZW1wdHlQYXRoKCksIG4gPSB7fSwgciA9IFtdO1xuICAgICAgICBlLmZvckVhY2goKChlLCBpKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXQuaXNJbW1lZGlhdGVQYXJlbnRPZihpKSkge1xuICAgICAgICAgICAgICAgIC8vIEluc2VydCB0aGUgYWNjdW11bGF0ZWQgY2hhbmdlcyBhdCB0aGlzIHBhcmVudCBsb2NhdGlvblxuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLmdldEZpZWxkc01hcCh0KTtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGx5Q2hhbmdlcyhlLCBuLCByKSwgbiA9IHt9LCByID0gW10sIHQgPSBpLnBvcExhc3QoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGUgPyBuW2kubGFzdFNlZ21lbnQoKV0gPSBfX1BSSVZBVEVfZGVlcENsb25lKGUpIDogci5wdXNoKGkubGFzdFNlZ21lbnQoKSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMuZ2V0RmllbGRzTWFwKHQpO1xuICAgICAgICB0aGlzLmFwcGx5Q2hhbmdlcyhpLCBuLCByKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyB0aGUgZmllbGQgYXQgdGhlIHNwZWNpZmllZCBwYXRoLiBJZiB0aGVyZSBpcyBubyBmaWVsZCBhdCB0aGVcbiAgICAgKiBzcGVjaWZpZWQgcGF0aCwgbm90aGluZyBpcyBjaGFuZ2VkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhdGggLSBUaGUgZmllbGQgcGF0aCB0byByZW1vdmUuXG4gICAgICovICAgIGRlbGV0ZShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmZpZWxkKGUucG9wTGFzdCgpKTtcbiAgICAgICAgX19QUklWQVRFX2lzTWFwVmFsdWUodCkgJiYgdC5tYXBWYWx1ZS5maWVsZHMgJiYgZGVsZXRlIHQubWFwVmFsdWUuZmllbGRzW2UubGFzdFNlZ21lbnQoKV07XG4gICAgfVxuICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3ZhbHVlRXF1YWxzKHRoaXMudmFsdWUsIGUudmFsdWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBtYXAgdGhhdCBjb250YWlucyB0aGUgbGVhZiBlbGVtZW50IG9mIGBwYXRoYC4gSWYgdGhlIHBhcmVudFxuICAgICAqIGVudHJ5IGRvZXMgbm90IHlldCBleGlzdCwgb3IgaWYgaXQgaXMgbm90IGEgbWFwLCBhIG5ldyBtYXAgd2lsbCBiZSBjcmVhdGVkLlxuICAgICAqLyAgICBnZXRGaWVsZHNNYXAoZSkge1xuICAgICAgICBsZXQgdCA9IHRoaXMudmFsdWU7XG4gICAgICAgIHQubWFwVmFsdWUuZmllbGRzIHx8ICh0Lm1hcFZhbHVlID0ge1xuICAgICAgICAgICAgZmllbGRzOiB7fVxuICAgICAgICB9KTtcbiAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCBlLmxlbmd0aDsgKytuKSB7XG4gICAgICAgICAgICBsZXQgciA9IHQubWFwVmFsdWUuZmllbGRzW2UuZ2V0KG4pXTtcbiAgICAgICAgICAgIF9fUFJJVkFURV9pc01hcFZhbHVlKHIpICYmIHIubWFwVmFsdWUuZmllbGRzIHx8IChyID0ge1xuICAgICAgICAgICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkczoge31cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCB0Lm1hcFZhbHVlLmZpZWxkc1tlLmdldChuKV0gPSByKSwgdCA9IHI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQubWFwVmFsdWUuZmllbGRzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNb2RpZmllcyBgZmllbGRzTWFwYCBieSBhZGRpbmcsIHJlcGxhY2luZyBvciBkZWxldGluZyB0aGUgc3BlY2lmaWVkXG4gICAgICogZW50cmllcy5cbiAgICAgKi8gICAgYXBwbHlDaGFuZ2VzKGUsIHQsIG4pIHtcbiAgICAgICAgZm9yRWFjaCh0LCAoKHQsIG4pID0+IGVbdF0gPSBuKSk7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBuKSBkZWxldGUgZVt0XTtcbiAgICB9XG4gICAgY2xvbmUoKSB7XG4gICAgICAgIHJldHVybiBuZXcgT2JqZWN0VmFsdWUoX19QUklWQVRFX2RlZXBDbG9uZSh0aGlzLnZhbHVlKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgYSBGaWVsZE1hc2sgYnVpbHQgZnJvbSBhbGwgZmllbGRzIGluIGEgTWFwVmFsdWUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2V4dHJhY3RGaWVsZE1hc2soZSkge1xuICAgIGNvbnN0IHQgPSBbXTtcbiAgICByZXR1cm4gZm9yRWFjaChlLmZpZWxkcywgKChlLCBuKSA9PiB7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgRmllbGRQYXRoJDEoWyBlIF0pO1xuICAgICAgICBpZiAoX19QUklWQVRFX2lzTWFwVmFsdWUobikpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBfX1BSSVZBVEVfZXh0cmFjdEZpZWxkTWFzayhuLm1hcFZhbHVlKS5maWVsZHM7XG4gICAgICAgICAgICBpZiAoMCA9PT0gZS5sZW5ndGgpIFxuICAgICAgICAgICAgLy8gUHJlc2VydmUgdGhlIGVtcHR5IG1hcCBieSBhZGRpbmcgaXQgdG8gdGhlIEZpZWxkTWFzay5cbiAgICAgICAgICAgIHQucHVzaChyKTsgZWxzZSBcbiAgICAgICAgICAgIC8vIEZvciBuZXN0ZWQgYW5kIG5vbi1lbXB0eSBPYmplY3RWYWx1ZXMsIGFkZCB0aGUgRmllbGRQYXRoIG9mIHRoZVxuICAgICAgICAgICAgLy8gbGVhZiBub2Rlcy5cbiAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiBlKSB0LnB1c2goci5jaGlsZChuKSk7XG4gICAgICAgIH0gZWxzZSBcbiAgICAgICAgLy8gRm9yIG5lc3RlZCBhbmQgbm9uLWVtcHR5IE9iamVjdFZhbHVlcywgYWRkIHRoZSBGaWVsZFBhdGggb2YgdGhlIGxlYWZcbiAgICAgICAgLy8gbm9kZXMuXG4gICAgICAgIHQucHVzaChyKTtcbiAgICB9KSksIG5ldyBGaWVsZE1hc2sodCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlcHJlc2VudHMgYSBkb2N1bWVudCBpbiBGaXJlc3RvcmUgd2l0aCBhIGtleSwgdmVyc2lvbiwgZGF0YSBhbmQgd2hldGhlciBpdFxuICogaGFzIGxvY2FsIG11dGF0aW9ucyBhcHBsaWVkIHRvIGl0LlxuICpcbiAqIERvY3VtZW50cyBjYW4gdHJhbnNpdGlvbiBiZXR3ZWVuIHN0YXRlcyB2aWEgYGNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQoKWAsXG4gKiBgY29udmVydFRvTm9Eb2N1bWVudCgpYCBhbmQgYGNvbnZlcnRUb1Vua25vd25Eb2N1bWVudCgpYC4gSWYgYSBkb2N1bWVudCBkb2VzXG4gKiBub3QgdHJhbnNpdGlvbiB0byBvbmUgb2YgdGhlc2Ugc3RhdGVzIGV2ZW4gYWZ0ZXIgYWxsIG11dGF0aW9ucyBoYXZlIGJlZW5cbiAqIGFwcGxpZWQsIGBpc1ZhbGlkRG9jdW1lbnQoKWAgcmV0dXJucyBmYWxzZSBhbmQgdGhlIGRvY3VtZW50IHNob3VsZCBiZSByZW1vdmVkXG4gKiBmcm9tIGFsbCB2aWV3cy5cbiAqLyBjbGFzcyBNdXRhYmxlRG9jdW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIHIsIGksIHMsIG8pIHtcbiAgICAgICAgdGhpcy5rZXkgPSBlLCB0aGlzLmRvY3VtZW50VHlwZSA9IHQsIHRoaXMudmVyc2lvbiA9IG4sIHRoaXMucmVhZFRpbWUgPSByLCB0aGlzLmNyZWF0ZVRpbWUgPSBpLCBcbiAgICAgICAgdGhpcy5kYXRhID0gcywgdGhpcy5kb2N1bWVudFN0YXRlID0gbztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGRvY3VtZW50IHdpdGggbm8ga25vd24gdmVyc2lvbiBvciBkYXRhLCBidXQgd2hpY2ggY2FuIHNlcnZlIGFzXG4gICAgICogYmFzZSBkb2N1bWVudCBmb3IgbXV0YXRpb25zLlxuICAgICAqLyAgICBzdGF0aWMgbmV3SW52YWxpZERvY3VtZW50KGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBNdXRhYmxlRG9jdW1lbnQoZSwgMCAvKiBEb2N1bWVudFR5cGUuSU5WQUxJRCAqLyAsIFxuICAgICAgICAvKiB2ZXJzaW9uICovIFNuYXBzaG90VmVyc2lvbi5taW4oKSwgXG4gICAgICAgIC8qIHJlYWRUaW1lICovIFNuYXBzaG90VmVyc2lvbi5taW4oKSwgXG4gICAgICAgIC8qIGNyZWF0ZVRpbWUgKi8gU25hcHNob3RWZXJzaW9uLm1pbigpLCBPYmplY3RWYWx1ZS5lbXB0eSgpLCAwIC8qIERvY3VtZW50U3RhdGUuU1lOQ0VEICovKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBkb2N1bWVudCB0aGF0IGlzIGtub3duIHRvIGV4aXN0IHdpdGggdGhlIGdpdmVuIGRhdGEgYXQgdGhlXG4gICAgICogZ2l2ZW4gdmVyc2lvbi5cbiAgICAgKi8gICAgc3RhdGljIG5ld0ZvdW5kRG9jdW1lbnQoZSwgdCwgbiwgcikge1xuICAgICAgICByZXR1cm4gbmV3IE11dGFibGVEb2N1bWVudChlLCAxIC8qIERvY3VtZW50VHlwZS5GT1VORF9ET0NVTUVOVCAqLyAsIFxuICAgICAgICAvKiB2ZXJzaW9uICovIHQsIFxuICAgICAgICAvKiByZWFkVGltZSAqLyBTbmFwc2hvdFZlcnNpb24ubWluKCksIFxuICAgICAgICAvKiBjcmVhdGVUaW1lICovIG4sIHIsIDAgLyogRG9jdW1lbnRTdGF0ZS5TWU5DRUQgKi8pO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlcyBhIG5ldyBkb2N1bWVudCB0aGF0IGlzIGtub3duIHRvIG5vdCBleGlzdCBhdCB0aGUgZ2l2ZW4gdmVyc2lvbi4gKi8gICAgc3RhdGljIG5ld05vRG9jdW1lbnQoZSwgdCkge1xuICAgICAgICByZXR1cm4gbmV3IE11dGFibGVEb2N1bWVudChlLCAyIC8qIERvY3VtZW50VHlwZS5OT19ET0NVTUVOVCAqLyAsIFxuICAgICAgICAvKiB2ZXJzaW9uICovIHQsIFxuICAgICAgICAvKiByZWFkVGltZSAqLyBTbmFwc2hvdFZlcnNpb24ubWluKCksIFxuICAgICAgICAvKiBjcmVhdGVUaW1lICovIFNuYXBzaG90VmVyc2lvbi5taW4oKSwgT2JqZWN0VmFsdWUuZW1wdHkoKSwgMCAvKiBEb2N1bWVudFN0YXRlLlNZTkNFRCAqLyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgZG9jdW1lbnQgdGhhdCBpcyBrbm93biB0byBleGlzdCBhdCB0aGUgZ2l2ZW4gdmVyc2lvbiBidXRcbiAgICAgKiB3aG9zZSBkYXRhIGlzIG5vdCBrbm93biAoZS5nLiBhIGRvY3VtZW50IHRoYXQgd2FzIHVwZGF0ZWQgd2l0aG91dCBhIGtub3duXG4gICAgICogYmFzZSBkb2N1bWVudCkuXG4gICAgICovICAgIHN0YXRpYyBuZXdVbmtub3duRG9jdW1lbnQoZSwgdCkge1xuICAgICAgICByZXR1cm4gbmV3IE11dGFibGVEb2N1bWVudChlLCAzIC8qIERvY3VtZW50VHlwZS5VTktOT1dOX0RPQ1VNRU5UICovICwgXG4gICAgICAgIC8qIHZlcnNpb24gKi8gdCwgXG4gICAgICAgIC8qIHJlYWRUaW1lICovIFNuYXBzaG90VmVyc2lvbi5taW4oKSwgXG4gICAgICAgIC8qIGNyZWF0ZVRpbWUgKi8gU25hcHNob3RWZXJzaW9uLm1pbigpLCBPYmplY3RWYWx1ZS5lbXB0eSgpLCAyIC8qIERvY3VtZW50U3RhdGUuSEFTX0NPTU1JVFRFRF9NVVRBVElPTlMgKi8pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGFuZ2VzIHRoZSBkb2N1bWVudCB0eXBlIHRvIGluZGljYXRlIHRoYXQgaXQgZXhpc3RzIGFuZCB0aGF0IGl0cyB2ZXJzaW9uXG4gICAgICogYW5kIGRhdGEgYXJlIGtub3duLlxuICAgICAqLyAgICBjb252ZXJ0VG9Gb3VuZERvY3VtZW50KGUsIHQpIHtcbiAgICAgICAgLy8gSWYgYSBkb2N1bWVudCBpcyBzd2l0Y2hpbmcgc3RhdGUgZnJvbSBiZWluZyBhbiBpbnZhbGlkIG9yIGRlbGV0ZWRcbiAgICAgICAgLy8gZG9jdW1lbnQgdG8gYSB2YWxpZCAoRk9VTkRfRE9DVU1FTlQpIGRvY3VtZW50LCBlaXRoZXIgZHVlIHRvIHJlY2VpdmluZyBhblxuICAgICAgICAvLyB1cGRhdGUgZnJvbSBXYXRjaCBvciBkdWUgdG8gYXBwbHlpbmcgYSBsb2NhbCBzZXQgbXV0YXRpb24gb24gdG9wXG4gICAgICAgIC8vIG9mIGEgZGVsZXRlZCBkb2N1bWVudCwgb3VyIGJlc3QgZ3Vlc3MgYWJvdXQgaXRzIGNyZWF0ZVRpbWUgd291bGQgYmUgdGhlXG4gICAgICAgIC8vIHZlcnNpb24gYXQgd2hpY2ggdGhlIGRvY3VtZW50IHRyYW5zaXRpb25lZCB0byBhIEZPVU5EX0RPQ1VNRU5ULlxuICAgICAgICByZXR1cm4gIXRoaXMuY3JlYXRlVGltZS5pc0VxdWFsKFNuYXBzaG90VmVyc2lvbi5taW4oKSkgfHwgMiAvKiBEb2N1bWVudFR5cGUuTk9fRE9DVU1FTlQgKi8gIT09IHRoaXMuZG9jdW1lbnRUeXBlICYmIDAgLyogRG9jdW1lbnRUeXBlLklOVkFMSUQgKi8gIT09IHRoaXMuZG9jdW1lbnRUeXBlIHx8ICh0aGlzLmNyZWF0ZVRpbWUgPSBlKSwgXG4gICAgICAgIHRoaXMudmVyc2lvbiA9IGUsIHRoaXMuZG9jdW1lbnRUeXBlID0gMSAvKiBEb2N1bWVudFR5cGUuRk9VTkRfRE9DVU1FTlQgKi8gLCB0aGlzLmRhdGEgPSB0LCBcbiAgICAgICAgdGhpcy5kb2N1bWVudFN0YXRlID0gMCAvKiBEb2N1bWVudFN0YXRlLlNZTkNFRCAqLyAsIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoYW5nZXMgdGhlIGRvY3VtZW50IHR5cGUgdG8gaW5kaWNhdGUgdGhhdCBpdCBkb2Vzbid0IGV4aXN0IGF0IHRoZSBnaXZlblxuICAgICAqIHZlcnNpb24uXG4gICAgICovICAgIGNvbnZlcnRUb05vRG9jdW1lbnQoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uID0gZSwgdGhpcy5kb2N1bWVudFR5cGUgPSAyIC8qIERvY3VtZW50VHlwZS5OT19ET0NVTUVOVCAqLyAsIFxuICAgICAgICB0aGlzLmRhdGEgPSBPYmplY3RWYWx1ZS5lbXB0eSgpLCB0aGlzLmRvY3VtZW50U3RhdGUgPSAwIC8qIERvY3VtZW50U3RhdGUuU1lOQ0VEICovICwgXG4gICAgICAgIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoYW5nZXMgdGhlIGRvY3VtZW50IHR5cGUgdG8gaW5kaWNhdGUgdGhhdCBpdCBleGlzdHMgYXQgYSBnaXZlbiB2ZXJzaW9uIGJ1dFxuICAgICAqIHRoYXQgaXRzIGRhdGEgaXMgbm90IGtub3duIChlLmcuIGEgZG9jdW1lbnQgdGhhdCB3YXMgdXBkYXRlZCB3aXRob3V0IGEga25vd25cbiAgICAgKiBiYXNlIGRvY3VtZW50KS5cbiAgICAgKi8gICAgY29udmVydFRvVW5rbm93bkRvY3VtZW50KGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmVyc2lvbiA9IGUsIHRoaXMuZG9jdW1lbnRUeXBlID0gMyAvKiBEb2N1bWVudFR5cGUuVU5LTk9XTl9ET0NVTUVOVCAqLyAsIFxuICAgICAgICB0aGlzLmRhdGEgPSBPYmplY3RWYWx1ZS5lbXB0eSgpLCB0aGlzLmRvY3VtZW50U3RhdGUgPSAyIC8qIERvY3VtZW50U3RhdGUuSEFTX0NPTU1JVFRFRF9NVVRBVElPTlMgKi8gLCBcbiAgICAgICAgdGhpcztcbiAgICB9XG4gICAgc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kb2N1bWVudFN0YXRlID0gMiAvKiBEb2N1bWVudFN0YXRlLkhBU19DT01NSVRURURfTVVUQVRJT05TICovICwgdGhpcztcbiAgICB9XG4gICAgc2V0SGFzTG9jYWxNdXRhdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY3VtZW50U3RhdGUgPSAxIC8qIERvY3VtZW50U3RhdGUuSEFTX0xPQ0FMX01VVEFUSU9OUyAqLyAsIHRoaXMudmVyc2lvbiA9IFNuYXBzaG90VmVyc2lvbi5taW4oKSwgXG4gICAgICAgIHRoaXM7XG4gICAgfVxuICAgIHNldFJlYWRUaW1lKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVhZFRpbWUgPSBlLCB0aGlzO1xuICAgIH1cbiAgICBnZXQgaGFzTG9jYWxNdXRhdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiAxIC8qIERvY3VtZW50U3RhdGUuSEFTX0xPQ0FMX01VVEFUSU9OUyAqLyA9PT0gdGhpcy5kb2N1bWVudFN0YXRlO1xuICAgIH1cbiAgICBnZXQgaGFzQ29tbWl0dGVkTXV0YXRpb25zKCkge1xuICAgICAgICByZXR1cm4gMiAvKiBEb2N1bWVudFN0YXRlLkhBU19DT01NSVRURURfTVVUQVRJT05TICovID09PSB0aGlzLmRvY3VtZW50U3RhdGU7XG4gICAgfVxuICAgIGdldCBoYXNQZW5kaW5nV3JpdGVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oYXNMb2NhbE11dGF0aW9ucyB8fCB0aGlzLmhhc0NvbW1pdHRlZE11dGF0aW9ucztcbiAgICB9XG4gICAgaXNWYWxpZERvY3VtZW50KCkge1xuICAgICAgICByZXR1cm4gMCAvKiBEb2N1bWVudFR5cGUuSU5WQUxJRCAqLyAhPT0gdGhpcy5kb2N1bWVudFR5cGU7XG4gICAgfVxuICAgIGlzRm91bmREb2N1bWVudCgpIHtcbiAgICAgICAgcmV0dXJuIDEgLyogRG9jdW1lbnRUeXBlLkZPVU5EX0RPQ1VNRU5UICovID09PSB0aGlzLmRvY3VtZW50VHlwZTtcbiAgICB9XG4gICAgaXNOb0RvY3VtZW50KCkge1xuICAgICAgICByZXR1cm4gMiAvKiBEb2N1bWVudFR5cGUuTk9fRE9DVU1FTlQgKi8gPT09IHRoaXMuZG9jdW1lbnRUeXBlO1xuICAgIH1cbiAgICBpc1Vua25vd25Eb2N1bWVudCgpIHtcbiAgICAgICAgcmV0dXJuIDMgLyogRG9jdW1lbnRUeXBlLlVOS05PV05fRE9DVU1FTlQgKi8gPT09IHRoaXMuZG9jdW1lbnRUeXBlO1xuICAgIH1cbiAgICBpc0VxdWFsKGUpIHtcbiAgICAgICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBNdXRhYmxlRG9jdW1lbnQgJiYgdGhpcy5rZXkuaXNFcXVhbChlLmtleSkgJiYgdGhpcy52ZXJzaW9uLmlzRXF1YWwoZS52ZXJzaW9uKSAmJiB0aGlzLmRvY3VtZW50VHlwZSA9PT0gZS5kb2N1bWVudFR5cGUgJiYgdGhpcy5kb2N1bWVudFN0YXRlID09PSBlLmRvY3VtZW50U3RhdGUgJiYgdGhpcy5kYXRhLmlzRXF1YWwoZS5kYXRhKTtcbiAgICB9XG4gICAgbXV0YWJsZUNvcHkoKSB7XG4gICAgICAgIHJldHVybiBuZXcgTXV0YWJsZURvY3VtZW50KHRoaXMua2V5LCB0aGlzLmRvY3VtZW50VHlwZSwgdGhpcy52ZXJzaW9uLCB0aGlzLnJlYWRUaW1lLCB0aGlzLmNyZWF0ZVRpbWUsIHRoaXMuZGF0YS5jbG9uZSgpLCB0aGlzLmRvY3VtZW50U3RhdGUpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIGBEb2N1bWVudCgke3RoaXMua2V5fSwgJHt0aGlzLnZlcnNpb259LCAke0pTT04uc3RyaW5naWZ5KHRoaXMuZGF0YS52YWx1ZSl9LCB7Y3JlYXRlVGltZTogJHt0aGlzLmNyZWF0ZVRpbWV9fSksIHtkb2N1bWVudFR5cGU6ICR7dGhpcy5kb2N1bWVudFR5cGV9fSksIHtkb2N1bWVudFN0YXRlOiAke3RoaXMuZG9jdW1lbnRTdGF0ZX19KWA7XG4gICAgfVxufVxuXG4vKipcbiAqIENvbXBhcmVzIHRoZSB2YWx1ZSBmb3IgZmllbGQgYGZpZWxkYCBpbiB0aGUgcHJvdmlkZWQgZG9jdW1lbnRzLiBUaHJvd3MgaWZcbiAqIHRoZSBmaWVsZCBkb2VzIG5vdCBleGlzdCBpbiBib3RoIGRvY3VtZW50cy5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVwcmVzZW50cyBhIGJvdW5kIG9mIGEgcXVlcnkuXG4gKlxuICogVGhlIGJvdW5kIGlzIHNwZWNpZmllZCB3aXRoIHRoZSBnaXZlbiBjb21wb25lbnRzIHJlcHJlc2VudGluZyBhIHBvc2l0aW9uIGFuZFxuICogd2hldGhlciBpdCdzIGp1c3QgYmVmb3JlIG9yIGp1c3QgYWZ0ZXIgdGhlIHBvc2l0aW9uIChyZWxhdGl2ZSB0byB3aGF0ZXZlciB0aGVcbiAqIHF1ZXJ5IG9yZGVyIGlzKS5cbiAqXG4gKiBUaGUgcG9zaXRpb24gcmVwcmVzZW50cyBhIGxvZ2ljYWwgaW5kZXggcG9zaXRpb24gZm9yIGEgcXVlcnkuIEl0J3MgYSBwcmVmaXhcbiAqIG9mIHZhbHVlcyBmb3IgdGhlIChwb3RlbnRpYWxseSBpbXBsaWNpdCkgb3JkZXIgYnkgY2xhdXNlcyBvZiBhIHF1ZXJ5LlxuICpcbiAqIEJvdW5kIHByb3ZpZGVzIGEgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIHdoZXRoZXIgYSBkb2N1bWVudCBjb21lcyBiZWZvcmUgb3JcbiAqIGFmdGVyIGEgYm91bmQuIFRoaXMgaXMgaW5mbHVlbmNlZCBieSB3aGV0aGVyIHRoZSBwb3NpdGlvbiBpcyBqdXN0IGJlZm9yZSBvclxuICoganVzdCBhZnRlciB0aGUgcHJvdmlkZWQgdmFsdWVzLlxuICovXG5jbGFzcyBCb3VuZCB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gZSwgdGhpcy5pbmNsdXNpdmUgPSB0O1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2JvdW5kQ29tcGFyZVRvRG9jdW1lbnQoZSwgdCwgbikge1xuICAgIGxldCByID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGUucG9zaXRpb24ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgcyA9IHRbaV0sIG8gPSBlLnBvc2l0aW9uW2ldO1xuICAgICAgICBpZiAocy5maWVsZC5pc0tleUZpZWxkKCkpIHIgPSBEb2N1bWVudEtleS5jb21wYXJhdG9yKERvY3VtZW50S2V5LmZyb21OYW1lKG8ucmVmZXJlbmNlVmFsdWUpLCBuLmtleSk7IGVsc2Uge1xuICAgICAgICAgICAgciA9IF9fUFJJVkFURV92YWx1ZUNvbXBhcmUobywgbi5kYXRhLmZpZWxkKHMuZmllbGQpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoXCJkZXNjXCIgLyogRGlyZWN0aW9uLkRFU0NFTkRJTkcgKi8gPT09IHMuZGlyICYmIChyICo9IC0xKSwgMCAhPT0gcikgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiByO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBhIGRvY3VtZW50IHNvcnRzIGFmdGVyIGEgYm91bmQgdXNpbmcgdGhlIHByb3ZpZGVkIHNvcnRcbiAqIG9yZGVyLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9ib3VuZEVxdWFscyhlLCB0KSB7XG4gICAgaWYgKG51bGwgPT09IGUpIHJldHVybiBudWxsID09PSB0O1xuICAgIGlmIChudWxsID09PSB0KSByZXR1cm4gITE7XG4gICAgaWYgKGUuaW5jbHVzaXZlICE9PSB0LmluY2x1c2l2ZSB8fCBlLnBvc2l0aW9uLmxlbmd0aCAhPT0gdC5wb3NpdGlvbi5sZW5ndGgpIHJldHVybiAhMTtcbiAgICBmb3IgKGxldCBuID0gMDsgbiA8IGUucG9zaXRpb24ubGVuZ3RoOyBuKyspIHtcbiAgICAgICAgaWYgKCFfX1BSSVZBVEVfdmFsdWVFcXVhbHMoZS5wb3NpdGlvbltuXSwgdC5wb3NpdGlvbltuXSkpIHJldHVybiAhMTtcbiAgICB9XG4gICAgcmV0dXJuICEwO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBvcmRlcmluZyBvbiBhIGZpZWxkLCBpbiBzb21lIERpcmVjdGlvbi4gRGlyZWN0aW9uIGRlZmF1bHRzIHRvIEFTQ0VORElORy5cbiAqLyBjbGFzcyBPcmRlckJ5IHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0ID0gXCJhc2NcIiAvKiBEaXJlY3Rpb24uQVNDRU5ESU5HICovKSB7XG4gICAgICAgIHRoaXMuZmllbGQgPSBlLCB0aGlzLmRpciA9IHQ7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfb3JkZXJCeUVxdWFscyhlLCB0KSB7XG4gICAgcmV0dXJuIGUuZGlyID09PSB0LmRpciAmJiBlLmZpZWxkLmlzRXF1YWwodC5maWVsZCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIEZpbHRlciB7fVxuXG5jbGFzcyBGaWVsZEZpbHRlciBleHRlbmRzIEZpbHRlciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbikge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmZpZWxkID0gZSwgdGhpcy5vcCA9IHQsIHRoaXMudmFsdWUgPSBuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZmlsdGVyIGJhc2VkIG9uIHRoZSBwcm92aWRlZCBhcmd1bWVudHMuXG4gICAgICovICAgIHN0YXRpYyBjcmVhdGUoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gZS5pc0tleUZpZWxkKCkgPyBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gPT09IHQgfHwgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gPT09IHQgPyB0aGlzLmNyZWF0ZUtleUZpZWxkSW5GaWx0ZXIoZSwgdCwgbikgOiBuZXcgX19QUklWQVRFX0tleUZpZWxkRmlsdGVyKGUsIHQsIG4pIDogXCJhcnJheS1jb250YWluc1wiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TICovID09PSB0ID8gbmV3IF9fUFJJVkFURV9BcnJheUNvbnRhaW5zRmlsdGVyKGUsIG4pIDogXCJpblwiIC8qIE9wZXJhdG9yLklOICovID09PSB0ID8gbmV3IF9fUFJJVkFURV9JbkZpbHRlcihlLCBuKSA6IFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovID09PSB0ID8gbmV3IF9fUFJJVkFURV9Ob3RJbkZpbHRlcihlLCBuKSA6IFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZICovID09PSB0ID8gbmV3IF9fUFJJVkFURV9BcnJheUNvbnRhaW5zQW55RmlsdGVyKGUsIG4pIDogbmV3IEZpZWxkRmlsdGVyKGUsIHQsIG4pO1xuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlS2V5RmllbGRJbkZpbHRlcihlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gPT09IHQgPyBuZXcgX19QUklWQVRFX0tleUZpZWxkSW5GaWx0ZXIoZSwgbikgOiBuZXcgX19QUklWQVRFX0tleUZpZWxkTm90SW5GaWx0ZXIoZSwgbik7XG4gICAgfVxuICAgIG1hdGNoZXMoZSkge1xuICAgICAgICBjb25zdCB0ID0gZS5kYXRhLmZpZWxkKHRoaXMuZmllbGQpO1xuICAgICAgICAvLyBUeXBlcyBkbyBub3QgaGF2ZSB0byBtYXRjaCBpbiBOT1RfRVFVQUwgZmlsdGVycy5cbiAgICAgICAgICAgICAgICByZXR1cm4gXCIhPVwiIC8qIE9wZXJhdG9yLk5PVF9FUVVBTCAqLyA9PT0gdGhpcy5vcCA/IG51bGwgIT09IHQgJiYgdm9pZCAwID09PSB0Lm51bGxWYWx1ZSAmJiB0aGlzLm1hdGNoZXNDb21wYXJpc29uKF9fUFJJVkFURV92YWx1ZUNvbXBhcmUodCwgdGhpcy52YWx1ZSkpIDogbnVsbCAhPT0gdCAmJiBfX1BSSVZBVEVfdHlwZU9yZGVyKHRoaXMudmFsdWUpID09PSBfX1BSSVZBVEVfdHlwZU9yZGVyKHQpICYmIHRoaXMubWF0Y2hlc0NvbXBhcmlzb24oX19QUklWQVRFX3ZhbHVlQ29tcGFyZSh0LCB0aGlzLnZhbHVlKSk7XG4gICAgICAgIC8vIE9ubHkgY29tcGFyZSB0eXBlcyB3aXRoIG1hdGNoaW5nIGJhY2tlbmQgb3JkZXIgKHN1Y2ggYXMgZG91YmxlIGFuZCBpbnQpLlxuICAgICAgICB9XG4gICAgbWF0Y2hlc0NvbXBhcmlzb24oZSkge1xuICAgICAgICBzd2l0Y2ggKHRoaXMub3ApIHtcbiAgICAgICAgICBjYXNlIFwiPFwiIC8qIE9wZXJhdG9yLkxFU1NfVEhBTiAqLyA6XG4gICAgICAgICAgICByZXR1cm4gZSA8IDA7XG5cbiAgICAgICAgICBjYXNlIFwiPD1cIiAvKiBPcGVyYXRvci5MRVNTX1RIQU5fT1JfRVFVQUwgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIGUgPD0gMDtcblxuICAgICAgICAgIGNhc2UgXCI9PVwiIC8qIE9wZXJhdG9yLkVRVUFMICovIDpcbiAgICAgICAgICAgIHJldHVybiAwID09PSBlO1xuXG4gICAgICAgICAgY2FzZSBcIiE9XCIgLyogT3BlcmF0b3IuTk9UX0VRVUFMICovIDpcbiAgICAgICAgICAgIHJldHVybiAwICE9PSBlO1xuXG4gICAgICAgICAgY2FzZSBcIj5cIiAvKiBPcGVyYXRvci5HUkVBVEVSX1RIQU4gKi8gOlxuICAgICAgICAgICAgcmV0dXJuIGUgPiAwO1xuXG4gICAgICAgICAgY2FzZSBcIj49XCIgLyogT3BlcmF0b3IuR1JFQVRFUl9USEFOX09SX0VRVUFMICovIDpcbiAgICAgICAgICAgIHJldHVybiBlID49IDA7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIGZhaWwoNDcyNjYsIHtcbiAgICAgICAgICAgICAgICBvcGVyYXRvcjogdGhpcy5vcFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaXNJbmVxdWFsaXR5KCkge1xuICAgICAgICByZXR1cm4gWyBcIjxcIiAvKiBPcGVyYXRvci5MRVNTX1RIQU4gKi8gLCBcIjw9XCIgLyogT3BlcmF0b3IuTEVTU19USEFOX09SX0VRVUFMICovICwgXCI+XCIgLyogT3BlcmF0b3IuR1JFQVRFUl9USEFOICovICwgXCI+PVwiIC8qIE9wZXJhdG9yLkdSRUFURVJfVEhBTl9PUl9FUVVBTCAqLyAsIFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gLCBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyBdLmluZGV4T2YodGhpcy5vcCkgPj0gMDtcbiAgICB9XG4gICAgZ2V0RmxhdHRlbmVkRmlsdGVycygpIHtcbiAgICAgICAgcmV0dXJuIFsgdGhpcyBdO1xuICAgIH1cbiAgICBnZXRGaWx0ZXJzKCkge1xuICAgICAgICByZXR1cm4gWyB0aGlzIF07XG4gICAgfVxufVxuXG5jbGFzcyBDb21wb3NpdGVGaWx0ZXIgZXh0ZW5kcyBGaWx0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5maWx0ZXJzID0gZSwgdGhpcy5vcCA9IHQsIHRoaXMuUGUgPSBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZmlsdGVyIGJhc2VkIG9uIHRoZSBwcm92aWRlZCBhcmd1bWVudHMuXG4gICAgICovICAgIHN0YXRpYyBjcmVhdGUoZSwgdCkge1xuICAgICAgICByZXR1cm4gbmV3IENvbXBvc2l0ZUZpbHRlcihlLCB0KTtcbiAgICB9XG4gICAgbWF0Y2hlcyhlKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfY29tcG9zaXRlRmlsdGVySXNDb25qdW5jdGlvbih0aGlzKSA/IHZvaWQgMCA9PT0gdGhpcy5maWx0ZXJzLmZpbmQoKHQgPT4gIXQubWF0Y2hlcyhlKSkpIDogdm9pZCAwICE9PSB0aGlzLmZpbHRlcnMuZmluZCgodCA9PiB0Lm1hdGNoZXMoZSkpKTtcbiAgICB9XG4gICAgZ2V0RmxhdHRlbmVkRmlsdGVycygpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHRoaXMuUGUgfHwgKHRoaXMuUGUgPSB0aGlzLmZpbHRlcnMucmVkdWNlKCgoZSwgdCkgPT4gZS5jb25jYXQodC5nZXRGbGF0dGVuZWRGaWx0ZXJzKCkpKSwgW10pKSwgXG4gICAgICAgIHRoaXMuUGU7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYSBtdXRhYmxlIGNvcHkgb2YgYHRoaXMuZmlsdGVyc2BcbiAgICBnZXRGaWx0ZXJzKCkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihbXSwgdGhpcy5maWx0ZXJzKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJJc0Nvbmp1bmN0aW9uKGUpIHtcbiAgICByZXR1cm4gXCJhbmRcIiAvKiBDb21wb3NpdGVPcGVyYXRvci5BTkQgKi8gPT09IGUub3A7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJJc0Rpc2p1bmN0aW9uKGUpIHtcbiAgICByZXR1cm4gXCJvclwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLk9SICovID09PSBlLm9wO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGZpbHRlciBpcyBhIGNvbmp1bmN0aW9uIG9mIGZpZWxkIGZpbHRlcnMgb25seS4gUmV0dXJucyBmYWxzZSBvdGhlcndpc2UuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcklzRmxhdENvbmp1bmN0aW9uKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcklzRmxhdChlKSAmJiBfX1BSSVZBVEVfY29tcG9zaXRlRmlsdGVySXNDb25qdW5jdGlvbihlKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBmaWx0ZXIgZG9lcyBub3QgY29udGFpbiBhbnkgY29tcG9zaXRlIGZpbHRlcnMuIFJldHVybnMgZmFsc2Ugb3RoZXJ3aXNlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJJc0ZsYXQoZSkge1xuICAgIGZvciAoY29uc3QgdCBvZiBlLmZpbHRlcnMpIGlmICh0IGluc3RhbmNlb2YgQ29tcG9zaXRlRmlsdGVyKSByZXR1cm4gITE7XG4gICAgcmV0dXJuICEwO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfY2Fub25pZnlGaWx0ZXIoZSkge1xuICAgIGlmIChlIGluc3RhbmNlb2YgRmllbGRGaWx0ZXIpIFxuICAgIC8vIFRPRE8oYi8yOTE4MzE2NSk6IFRlY2huaWNhbGx5LCB0aGlzIHdvbid0IGJlIHVuaXF1ZSBpZiB0d28gdmFsdWVzIGhhdmVcbiAgICAvLyB0aGUgc2FtZSBkZXNjcmlwdGlvbiwgc3VjaCBhcyB0aGUgaW50IDMgYW5kIHRoZSBzdHJpbmcgXCIzXCIuIFNvIHdlIHNob3VsZFxuICAgIC8vIGFkZCB0aGUgdHlwZXMgaW4gaGVyZSBzb21laG93LCB0b28uXG4gICAgcmV0dXJuIGUuZmllbGQuY2Fub25pY2FsU3RyaW5nKCkgKyBlLm9wLnRvU3RyaW5nKCkgKyBjYW5vbmljYWxJZChlLnZhbHVlKTtcbiAgICBpZiAoX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcklzRmxhdENvbmp1bmN0aW9uKGUpKSBcbiAgICAvLyBPbGRlciBTREsgdmVyc2lvbnMgdXNlIGFuIGltcGxpY2l0IEFORCBvcGVyYXRpb24gYmV0d2VlbiB0aGVpciBmaWx0ZXJzLlxuICAgIC8vIEluIHRoZSBuZXcgU0RLIHZlcnNpb25zLCB0aGUgZGV2ZWxvcGVyIG1heSB1c2UgYW4gZXhwbGljaXQgQU5EIGZpbHRlci5cbiAgICAvLyBUbyBzdGF5IGNvbnNpc3RlbnQgd2l0aCB0aGUgb2xkIHVzYWdlcywgd2UgYWRkIGEgc3BlY2lhbCBjYXNlIHRvIGVuc3VyZVxuICAgIC8vIHRoZSBjYW5vbmljYWwgSUQgZm9yIHRoZXNlIHR3byBhcmUgdGhlIHNhbWUuIEZvciBleGFtcGxlOlxuICAgIC8vIGBjb2wud2hlcmVFcXVhbHMoXCJhXCIsIDEpLndoZXJlRXF1YWxzKFwiYlwiLCAyKWAgc2hvdWxkIGhhdmUgdGhlIHNhbWVcbiAgICAvLyBjYW5vbmljYWwgSUQgYXMgYGNvbC53aGVyZShhbmQoZXF1YWxzKFwiYVwiLDEpLCBlcXVhbHMoXCJiXCIsMikpKWAuXG4gICAgcmV0dXJuIGUuZmlsdGVycy5tYXAoKGUgPT4gX19QUklWQVRFX2Nhbm9uaWZ5RmlsdGVyKGUpKSkuam9pbihcIixcIik7XG4gICAge1xuICAgICAgICAvLyBmaWx0ZXIgaW5zdGFuY2VvZiBDb21wb3NpdGVGaWx0ZXJcbiAgICAgICAgY29uc3QgdCA9IGUuZmlsdGVycy5tYXAoKGUgPT4gX19QUklWQVRFX2Nhbm9uaWZ5RmlsdGVyKGUpKSkuam9pbihcIixcIik7XG4gICAgICAgIHJldHVybiBgJHtlLm9wfSgke3R9KWA7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZmlsdGVyRXF1YWxzKGUsIHQpIHtcbiAgICByZXR1cm4gZSBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyID8gZnVuY3Rpb24gX19QUklWQVRFX2ZpZWxkRmlsdGVyRXF1YWxzKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBGaWVsZEZpbHRlciAmJiBlLm9wID09PSB0Lm9wICYmIGUuZmllbGQuaXNFcXVhbCh0LmZpZWxkKSAmJiBfX1BSSVZBVEVfdmFsdWVFcXVhbHMoZS52YWx1ZSwgdC52YWx1ZSk7XG4gICAgfShlLCB0KSA6IGUgaW5zdGFuY2VvZiBDb21wb3NpdGVGaWx0ZXIgPyBmdW5jdGlvbiBfX1BSSVZBVEVfY29tcG9zaXRlRmlsdGVyRXF1YWxzKGUsIHQpIHtcbiAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBDb21wb3NpdGVGaWx0ZXIgJiYgZS5vcCA9PT0gdC5vcCAmJiBlLmZpbHRlcnMubGVuZ3RoID09PSB0LmZpbHRlcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gZS5maWx0ZXJzLnJlZHVjZSgoKGUsIG4sIHIpID0+IGUgJiYgX19QUklWQVRFX2ZpbHRlckVxdWFscyhuLCB0LmZpbHRlcnNbcl0pKSwgITApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgLyoqXG4gKiBSZXR1cm5zIGEgbmV3IGNvbXBvc2l0ZSBmaWx0ZXIgdGhhdCBjb250YWlucyBhbGwgZmlsdGVyIGZyb21cbiAqIGBjb21wb3NpdGVGaWx0ZXJgIHBsdXMgYWxsIHRoZSBnaXZlbiBmaWx0ZXJzIGluIGBvdGhlckZpbHRlcnNgLlxuICovIChlLCB0KSA6IHZvaWQgZmFpbCgxOTQzOSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJXaXRoQWRkZWRGaWx0ZXJzKGUsIHQpIHtcbiAgICBjb25zdCBuID0gZS5maWx0ZXJzLmNvbmNhdCh0KTtcbiAgICByZXR1cm4gQ29tcG9zaXRlRmlsdGVyLmNyZWF0ZShuLCBlLm9wKTtcbn1cblxuLyoqIFJldHVybnMgYSBkZWJ1ZyBkZXNjcmlwdGlvbiBmb3IgYGZpbHRlcmAuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9zdHJpbmdpZnlGaWx0ZXIoZSkge1xuICAgIHJldHVybiBlIGluc3RhbmNlb2YgRmllbGRGaWx0ZXIgPyBmdW5jdGlvbiBfX1BSSVZBVEVfc3RyaW5naWZ5RmllbGRGaWx0ZXIoZSkge1xuICAgICAgICByZXR1cm4gYCR7ZS5maWVsZC5jYW5vbmljYWxTdHJpbmcoKX0gJHtlLm9wfSAke2Nhbm9uaWNhbElkKGUudmFsdWUpfWA7XG4gICAgfVxuICAgIC8qKiBGaWx0ZXIgdGhhdCBtYXRjaGVzIG9uIGtleSBmaWVsZHMgKGkuZS4gJ19fbmFtZV9fJykuICovIChlKSA6IGUgaW5zdGFuY2VvZiBDb21wb3NpdGVGaWx0ZXIgPyBmdW5jdGlvbiBfX1BSSVZBVEVfc3RyaW5naWZ5Q29tcG9zaXRlRmlsdGVyKGUpIHtcbiAgICAgICAgcmV0dXJuIGUub3AudG9TdHJpbmcoKSArIFwiIHtcIiArIGUuZ2V0RmlsdGVycygpLm1hcChfX1BSSVZBVEVfc3RyaW5naWZ5RmlsdGVyKS5qb2luKFwiICxcIikgKyBcIn1cIjtcbiAgICB9KGUpIDogXCJGaWx0ZXJcIjtcbn1cblxuY2xhc3MgX19QUklWQVRFX0tleUZpZWxkRmlsdGVyIGV4dGVuZHMgRmllbGRGaWx0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4pIHtcbiAgICAgICAgc3VwZXIoZSwgdCwgbiksIHRoaXMua2V5ID0gRG9jdW1lbnRLZXkuZnJvbU5hbWUobi5yZWZlcmVuY2VWYWx1ZSk7XG4gICAgfVxuICAgIG1hdGNoZXMoZSkge1xuICAgICAgICBjb25zdCB0ID0gRG9jdW1lbnRLZXkuY29tcGFyYXRvcihlLmtleSwgdGhpcy5rZXkpO1xuICAgICAgICByZXR1cm4gdGhpcy5tYXRjaGVzQ29tcGFyaXNvbih0KTtcbiAgICB9XG59XG5cbi8qKiBGaWx0ZXIgdGhhdCBtYXRjaGVzIG9uIGtleSBmaWVsZHMgd2l0aGluIGFuIGFycmF5LiAqLyBjbGFzcyBfX1BSSVZBVEVfS2V5RmllbGRJbkZpbHRlciBleHRlbmRzIEZpZWxkRmlsdGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHN1cGVyKGUsIFwiaW5cIiAvKiBPcGVyYXRvci5JTiAqLyAsIHQpLCB0aGlzLmtleXMgPSBfX1BSSVZBVEVfZXh0cmFjdERvY3VtZW50S2V5c0Zyb21BcnJheVZhbHVlKFwiaW5cIiAvKiBPcGVyYXRvci5JTiAqLyAsIHQpO1xuICAgIH1cbiAgICBtYXRjaGVzKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMua2V5cy5zb21lKCh0ID0+IHQuaXNFcXVhbChlLmtleSkpKTtcbiAgICB9XG59XG5cbi8qKiBGaWx0ZXIgdGhhdCBtYXRjaGVzIG9uIGtleSBmaWVsZHMgbm90IHByZXNlbnQgd2l0aGluIGFuIGFycmF5LiAqLyBjbGFzcyBfX1BSSVZBVEVfS2V5RmllbGROb3RJbkZpbHRlciBleHRlbmRzIEZpZWxkRmlsdGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHN1cGVyKGUsIFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovICwgdCksIHRoaXMua2V5cyA9IF9fUFJJVkFURV9leHRyYWN0RG9jdW1lbnRLZXlzRnJvbUFycmF5VmFsdWUoXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gLCB0KTtcbiAgICB9XG4gICAgbWF0Y2hlcyhlKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5rZXlzLnNvbWUoKHQgPT4gdC5pc0VxdWFsKGUua2V5KSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2V4dHJhY3REb2N1bWVudEtleXNGcm9tQXJyYXlWYWx1ZShlLCB0KSB7XG4gICAgcmV0dXJuICh0LmFycmF5VmFsdWU/LnZhbHVlcyB8fCBbXSkubWFwKChlID0+IERvY3VtZW50S2V5LmZyb21OYW1lKGUucmVmZXJlbmNlVmFsdWUpKSk7XG59XG5cbi8qKiBBIEZpbHRlciB0aGF0IGltcGxlbWVudHMgdGhlIGFycmF5LWNvbnRhaW5zIG9wZXJhdG9yLiAqLyBjbGFzcyBfX1BSSVZBVEVfQXJyYXlDb250YWluc0ZpbHRlciBleHRlbmRzIEZpZWxkRmlsdGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHN1cGVyKGUsIFwiYXJyYXktY29udGFpbnNcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOUyAqLyAsIHQpO1xuICAgIH1cbiAgICBtYXRjaGVzKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGUuZGF0YS5maWVsZCh0aGlzLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuIGlzQXJyYXkodCkgJiYgX19QUklWQVRFX2FycmF5VmFsdWVDb250YWlucyh0LmFycmF5VmFsdWUsIHRoaXMudmFsdWUpO1xuICAgIH1cbn1cblxuLyoqIEEgRmlsdGVyIHRoYXQgaW1wbGVtZW50cyB0aGUgSU4gb3BlcmF0b3IuICovIGNsYXNzIF9fUFJJVkFURV9JbkZpbHRlciBleHRlbmRzIEZpZWxkRmlsdGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHN1cGVyKGUsIFwiaW5cIiAvKiBPcGVyYXRvci5JTiAqLyAsIHQpO1xuICAgIH1cbiAgICBtYXRjaGVzKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGUuZGF0YS5maWVsZCh0aGlzLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHQgJiYgX19QUklWQVRFX2FycmF5VmFsdWVDb250YWlucyh0aGlzLnZhbHVlLmFycmF5VmFsdWUsIHQpO1xuICAgIH1cbn1cblxuLyoqIEEgRmlsdGVyIHRoYXQgaW1wbGVtZW50cyB0aGUgbm90LWluIG9wZXJhdG9yLiAqLyBjbGFzcyBfX1BSSVZBVEVfTm90SW5GaWx0ZXIgZXh0ZW5kcyBGaWVsZEZpbHRlciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICBzdXBlcihlLCBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyAsIHQpO1xuICAgIH1cbiAgICBtYXRjaGVzKGUpIHtcbiAgICAgICAgaWYgKF9fUFJJVkFURV9hcnJheVZhbHVlQ29udGFpbnModGhpcy52YWx1ZS5hcnJheVZhbHVlLCB7XG4gICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgIH0pKSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IHQgPSBlLmRhdGEuZmllbGQodGhpcy5maWVsZCk7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0ICYmIHZvaWQgMCA9PT0gdC5udWxsVmFsdWUgJiYgIV9fUFJJVkFURV9hcnJheVZhbHVlQ29udGFpbnModGhpcy52YWx1ZS5hcnJheVZhbHVlLCB0KTtcbiAgICB9XG59XG5cbi8qKiBBIEZpbHRlciB0aGF0IGltcGxlbWVudHMgdGhlIGFycmF5LWNvbnRhaW5zLWFueSBvcGVyYXRvci4gKi8gY2xhc3MgX19QUklWQVRFX0FycmF5Q29udGFpbnNBbnlGaWx0ZXIgZXh0ZW5kcyBGaWVsZEZpbHRlciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICBzdXBlcihlLCBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWSAqLyAsIHQpO1xuICAgIH1cbiAgICBtYXRjaGVzKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGUuZGF0YS5maWVsZCh0aGlzLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuICEoIWlzQXJyYXkodCkgfHwgIXQuYXJyYXlWYWx1ZS52YWx1ZXMpICYmIHQuYXJyYXlWYWx1ZS52YWx1ZXMuc29tZSgoZSA9PiBfX1BSSVZBVEVfYXJyYXlWYWx1ZUNvbnRhaW5zKHRoaXMudmFsdWUuYXJyYXlWYWx1ZSwgZSkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nXG5jbGFzcyBfX1BSSVZBVEVfVGFyZ2V0SW1wbCB7XG4gICAgY29uc3RydWN0b3IoZSwgdCA9IG51bGwsIG4gPSBbXSwgciA9IFtdLCBpID0gbnVsbCwgcyA9IG51bGwsIG8gPSBudWxsKSB7XG4gICAgICAgIHRoaXMucGF0aCA9IGUsIHRoaXMuY29sbGVjdGlvbkdyb3VwID0gdCwgdGhpcy5vcmRlckJ5ID0gbiwgdGhpcy5maWx0ZXJzID0gciwgdGhpcy5saW1pdCA9IGksIFxuICAgICAgICB0aGlzLnN0YXJ0QXQgPSBzLCB0aGlzLmVuZEF0ID0gbywgdGhpcy5UZSA9IG51bGw7XG4gICAgfVxufVxuXG4vKipcbiAqIEluaXRpYWxpemVzIGEgVGFyZ2V0IHdpdGggYSBwYXRoIGFuZCBvcHRpb25hbCBhZGRpdGlvbmFsIHF1ZXJ5IGNvbnN0cmFpbnRzLlxuICogUGF0aCBtdXN0IGN1cnJlbnRseSBiZSBlbXB0eSBpZiB0aGlzIGlzIGEgY29sbGVjdGlvbiBncm91cCBxdWVyeS5cbiAqXG4gKiBOT1RFOiB5b3Ugc2hvdWxkIGFsd2F5cyBjb25zdHJ1Y3QgYFRhcmdldGAgZnJvbSBgUXVlcnkudG9UYXJnZXRgIGluc3RlYWQgb2ZcbiAqIHVzaW5nIHRoaXMgZmFjdG9yeSBtZXRob2QsIGJlY2F1c2UgYFF1ZXJ5YCBwcm92aWRlcyBhbiBpbXBsaWNpdCBgb3JkZXJCeWBcbiAqIHByb3BlcnR5LlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdUYXJnZXQoZSwgdCA9IG51bGwsIG4gPSBbXSwgciA9IFtdLCBpID0gbnVsbCwgcyA9IG51bGwsIG8gPSBudWxsKSB7XG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfVGFyZ2V0SW1wbChlLCB0LCBuLCByLCBpLCBzLCBvKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2Nhbm9uaWZ5VGFyZ2V0KGUpIHtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICBpZiAobnVsbCA9PT0gdC5UZSkge1xuICAgICAgICBsZXQgZSA9IHQucGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICAgICAgbnVsbCAhPT0gdC5jb2xsZWN0aW9uR3JvdXAgJiYgKGUgKz0gXCJ8Y2c6XCIgKyB0LmNvbGxlY3Rpb25Hcm91cCksIGUgKz0gXCJ8ZjpcIiwgZSArPSB0LmZpbHRlcnMubWFwKChlID0+IF9fUFJJVkFURV9jYW5vbmlmeUZpbHRlcihlKSkpLmpvaW4oXCIsXCIpLCBcbiAgICAgICAgZSArPSBcInxvYjpcIiwgZSArPSB0Lm9yZGVyQnkubWFwKChlID0+IGZ1bmN0aW9uIF9fUFJJVkFURV9jYW5vbmlmeU9yZGVyQnkoZSkge1xuICAgICAgICAgICAgLy8gVE9ETyhiLzI5MTgzMTY1KTogTWFrZSB0aGlzIGNvbGxpc2lvbiByb2J1c3QuXG4gICAgICAgICAgICByZXR1cm4gZS5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSArIGUuZGlyO1xuICAgICAgICB9KGUpKSkuam9pbihcIixcIiksIF9fUFJJVkFURV9pc051bGxPclVuZGVmaW5lZCh0LmxpbWl0KSB8fCAoZSArPSBcInxsOlwiLCBlICs9IHQubGltaXQpLCBcbiAgICAgICAgdC5zdGFydEF0ICYmIChlICs9IFwifGxiOlwiLCBlICs9IHQuc3RhcnRBdC5pbmNsdXNpdmUgPyBcImI6XCIgOiBcImE6XCIsIGUgKz0gdC5zdGFydEF0LnBvc2l0aW9uLm1hcCgoZSA9PiBjYW5vbmljYWxJZChlKSkpLmpvaW4oXCIsXCIpKSwgXG4gICAgICAgIHQuZW5kQXQgJiYgKGUgKz0gXCJ8dWI6XCIsIGUgKz0gdC5lbmRBdC5pbmNsdXNpdmUgPyBcImE6XCIgOiBcImI6XCIsIGUgKz0gdC5lbmRBdC5wb3NpdGlvbi5tYXAoKGUgPT4gY2Fub25pY2FsSWQoZSkpKS5qb2luKFwiLFwiKSksIFxuICAgICAgICB0LlRlID0gZTtcbiAgICB9XG4gICAgcmV0dXJuIHQuVGU7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV90YXJnZXRFcXVhbHMoZSwgdCkge1xuICAgIGlmIChlLmxpbWl0ICE9PSB0LmxpbWl0KSByZXR1cm4gITE7XG4gICAgaWYgKGUub3JkZXJCeS5sZW5ndGggIT09IHQub3JkZXJCeS5sZW5ndGgpIHJldHVybiAhMTtcbiAgICBmb3IgKGxldCBuID0gMDsgbiA8IGUub3JkZXJCeS5sZW5ndGg7IG4rKykgaWYgKCFfX1BSSVZBVEVfb3JkZXJCeUVxdWFscyhlLm9yZGVyQnlbbl0sIHQub3JkZXJCeVtuXSkpIHJldHVybiAhMTtcbiAgICBpZiAoZS5maWx0ZXJzLmxlbmd0aCAhPT0gdC5maWx0ZXJzLmxlbmd0aCkgcmV0dXJuICExO1xuICAgIGZvciAobGV0IG4gPSAwOyBuIDwgZS5maWx0ZXJzLmxlbmd0aDsgbisrKSBpZiAoIV9fUFJJVkFURV9maWx0ZXJFcXVhbHMoZS5maWx0ZXJzW25dLCB0LmZpbHRlcnNbbl0pKSByZXR1cm4gITE7XG4gICAgcmV0dXJuIGUuY29sbGVjdGlvbkdyb3VwID09PSB0LmNvbGxlY3Rpb25Hcm91cCAmJiAoISFlLnBhdGguaXNFcXVhbCh0LnBhdGgpICYmICghIV9fUFJJVkFURV9ib3VuZEVxdWFscyhlLnN0YXJ0QXQsIHQuc3RhcnRBdCkgJiYgX19QUklWQVRFX2JvdW5kRXF1YWxzKGUuZW5kQXQsIHQuZW5kQXQpKSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV90YXJnZXRJc0RvY3VtZW50VGFyZ2V0KGUpIHtcbiAgICByZXR1cm4gRG9jdW1lbnRLZXkuaXNEb2N1bWVudEtleShlLnBhdGgpICYmIG51bGwgPT09IGUuY29sbGVjdGlvbkdyb3VwICYmIDAgPT09IGUuZmlsdGVycy5sZW5ndGg7XG59XG5cbi8qKiBSZXR1cm5zIHRoZSBmaWVsZCBmaWx0ZXJzIHRoYXQgdGFyZ2V0IHRoZSBnaXZlbiBmaWVsZCBwYXRoLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfdGFyZ2V0R2V0RmllbGRGaWx0ZXJzRm9yUGF0aChlLCB0KSB7XG4gICAgcmV0dXJuIGUuZmlsdGVycy5maWx0ZXIoKGUgPT4gZSBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyICYmIGUuZmllbGQuaXNFcXVhbCh0KSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHZhbHVlcyB0aGF0IGFyZSB1c2VkIGluIEFSUkFZX0NPTlRBSU5TIG9yIEFSUkFZX0NPTlRBSU5TX0FOWVxuICogZmlsdGVycy4gUmV0dXJucyBgbnVsbGAgaWYgdGhlcmUgYXJlIG5vIHN1Y2ggZmlsdGVycy5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIHRoZSB2YWx1ZSB0byB1c2UgYXMgdGhlIGxvd2VyIGJvdW5kIGZvciBhc2NlbmRpbmcgaW5kZXggc2VnbWVudCBhdFxuICogdGhlIHByb3ZpZGVkIGBmaWVsZFBhdGhgIChvciB0aGUgdXBwZXIgYm91bmQgZm9yIGFuIGRlc2NlbmRpbmcgc2VnbWVudCkuXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV90YXJnZXRHZXRBc2NlbmRpbmdCb3VuZChlLCB0LCBuKSB7XG4gICAgbGV0IHIgPSBkdCwgaSA9ICEwO1xuICAgIC8vIFByb2Nlc3MgYWxsIGZpbHRlcnMgdG8gZmluZCBhIHZhbHVlIGZvciB0aGUgY3VycmVudCBmaWVsZCBzZWdtZW50XG4gICAgZm9yIChjb25zdCBuIG9mIF9fUFJJVkFURV90YXJnZXRHZXRGaWVsZEZpbHRlcnNGb3JQYXRoKGUsIHQpKSB7XG4gICAgICAgIGxldCBlID0gZHQsIHQgPSAhMDtcbiAgICAgICAgc3dpdGNoIChuLm9wKSB7XG4gICAgICAgICAgY2FzZSBcIjxcIiAvKiBPcGVyYXRvci5MRVNTX1RIQU4gKi8gOlxuICAgICAgICAgIGNhc2UgXCI8PVwiIC8qIE9wZXJhdG9yLkxFU1NfVEhBTl9PUl9FUVVBTCAqLyA6XG4gICAgICAgICAgICBlID0gX19QUklWQVRFX3ZhbHVlc0dldExvd2VyQm91bmQobi52YWx1ZSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCI9PVwiIC8qIE9wZXJhdG9yLkVRVUFMICovIDpcbiAgICAgICAgICBjYXNlIFwiaW5cIiAvKiBPcGVyYXRvci5JTiAqLyA6XG4gICAgICAgICAgY2FzZSBcIj49XCIgLyogT3BlcmF0b3IuR1JFQVRFUl9USEFOX09SX0VRVUFMICovIDpcbiAgICAgICAgICAgIGUgPSBuLnZhbHVlO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwiPlwiIC8qIE9wZXJhdG9yLkdSRUFURVJfVEhBTiAqLyA6XG4gICAgICAgICAgICBlID0gbi52YWx1ZSwgdCA9ICExO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gOlxuICAgICAgICAgIGNhc2UgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gOlxuICAgICAgICAgICAgZSA9IGR0O1xuIC8vIFJlbWFpbmluZyBmaWx0ZXJzIGNhbm5vdCBiZSB1c2VkIGFzIGxvd2VyIGJvdW5kcy5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIF9fUFJJVkFURV9sb3dlckJvdW5kQ29tcGFyZSh7XG4gICAgICAgICAgICB2YWx1ZTogcixcbiAgICAgICAgICAgIGluY2x1c2l2ZTogaVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB2YWx1ZTogZSxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdFxuICAgICAgICB9KSA8IDAgJiYgKHIgPSBlLCBpID0gdCk7XG4gICAgfVxuICAgIC8vIElmIHRoZXJlIGlzIGFuIGFkZGl0aW9uYWwgYm91bmQsIGNvbXBhcmUgdGhlIHZhbHVlcyBhZ2FpbnN0IHRoZSBleGlzdGluZ1xuICAgIC8vIHJhbmdlIHRvIHNlZSBpZiB3ZSBjYW4gbmFycm93IHRoZSBzY29wZS5cbiAgICAgICAgaWYgKG51bGwgIT09IG4pIGZvciAobGV0IHMgPSAwOyBzIDwgZS5vcmRlckJ5Lmxlbmd0aDsgKytzKSB7XG4gICAgICAgIGlmIChlLm9yZGVyQnlbc10uZmllbGQuaXNFcXVhbCh0KSkge1xuICAgICAgICAgICAgY29uc3QgZSA9IG4ucG9zaXRpb25bc107XG4gICAgICAgICAgICBfX1BSSVZBVEVfbG93ZXJCb3VuZENvbXBhcmUoe1xuICAgICAgICAgICAgICAgIHZhbHVlOiByLFxuICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogaVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBlLFxuICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogbi5pbmNsdXNpdmVcbiAgICAgICAgICAgIH0pIDwgMCAmJiAociA9IGUsIGkgPSBuLmluY2x1c2l2ZSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogcixcbiAgICAgICAgaW5jbHVzaXZlOiBpXG4gICAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSB2YWx1ZSB0byB1c2UgYXMgdGhlIHVwcGVyIGJvdW5kIGZvciBhc2NlbmRpbmcgaW5kZXggc2VnbWVudCBhdFxuICogdGhlIHByb3ZpZGVkIGBmaWVsZFBhdGhgIChvciB0aGUgbG93ZXIgYm91bmQgZm9yIGEgZGVzY2VuZGluZyBzZWdtZW50KS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfdGFyZ2V0R2V0RGVzY2VuZGluZ0JvdW5kKGUsIHQsIG4pIHtcbiAgICBsZXQgciA9IFR0LCBpID0gITA7XG4gICAgLy8gUHJvY2VzcyBhbGwgZmlsdGVycyB0byBmaW5kIGEgdmFsdWUgZm9yIHRoZSBjdXJyZW50IGZpZWxkIHNlZ21lbnRcbiAgICBmb3IgKGNvbnN0IG4gb2YgX19QUklWQVRFX3RhcmdldEdldEZpZWxkRmlsdGVyc0ZvclBhdGgoZSwgdCkpIHtcbiAgICAgICAgbGV0IGUgPSBUdCwgdCA9ICEwO1xuICAgICAgICBzd2l0Y2ggKG4ub3ApIHtcbiAgICAgICAgICBjYXNlIFwiPj1cIiAvKiBPcGVyYXRvci5HUkVBVEVSX1RIQU5fT1JfRVFVQUwgKi8gOlxuICAgICAgICAgIGNhc2UgXCI+XCIgLyogT3BlcmF0b3IuR1JFQVRFUl9USEFOICovIDpcbiAgICAgICAgICAgIGUgPSBfX1BSSVZBVEVfdmFsdWVzR2V0VXBwZXJCb3VuZChuLnZhbHVlKSwgdCA9ICExO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwiPT1cIiAvKiBPcGVyYXRvci5FUVVBTCAqLyA6XG4gICAgICAgICAgY2FzZSBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gOlxuICAgICAgICAgIGNhc2UgXCI8PVwiIC8qIE9wZXJhdG9yLkxFU1NfVEhBTl9PUl9FUVVBTCAqLyA6XG4gICAgICAgICAgICBlID0gbi52YWx1ZTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIjxcIiAvKiBPcGVyYXRvci5MRVNTX1RIQU4gKi8gOlxuICAgICAgICAgICAgZSA9IG4udmFsdWUsIHQgPSAhMTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIiE9XCIgLyogT3BlcmF0b3IuTk9UX0VRVUFMICovIDpcbiAgICAgICAgICBjYXNlIFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovIDpcbiAgICAgICAgICAgIGUgPSBUdDtcbiAvLyBSZW1haW5pbmcgZmlsdGVycyBjYW5ub3QgYmUgdXNlZCBhcyB1cHBlciBib3VuZHMuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICBfX1BSSVZBVEVfdXBwZXJCb3VuZENvbXBhcmUoe1xuICAgICAgICAgICAgdmFsdWU6IHIsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGlcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgdmFsdWU6IGUsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRcbiAgICAgICAgfSkgPiAwICYmIChyID0gZSwgaSA9IHQpO1xuICAgIH1cbiAgICAvLyBJZiB0aGVyZSBpcyBhbiBhZGRpdGlvbmFsIGJvdW5kLCBjb21wYXJlIHRoZSB2YWx1ZXMgYWdhaW5zdCB0aGUgZXhpc3RpbmdcbiAgICAvLyByYW5nZSB0byBzZWUgaWYgd2UgY2FuIG5hcnJvdyB0aGUgc2NvcGUuXG4gICAgICAgIGlmIChudWxsICE9PSBuKSBmb3IgKGxldCBzID0gMDsgcyA8IGUub3JkZXJCeS5sZW5ndGg7ICsrcykge1xuICAgICAgICBpZiAoZS5vcmRlckJ5W3NdLmZpZWxkLmlzRXF1YWwodCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBuLnBvc2l0aW9uW3NdO1xuICAgICAgICAgICAgX19QUklWQVRFX3VwcGVyQm91bmRDb21wYXJlKHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogcixcbiAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGlcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogZSxcbiAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IG4uaW5jbHVzaXZlXG4gICAgICAgICAgICB9KSA+IDAgJiYgKHIgPSBlLCBpID0gbi5pbmNsdXNpdmUpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IHIsXG4gICAgICAgIGluY2x1c2l2ZTogaVxuICAgIH07XG59XG5cbi8qKiBSZXR1cm5zIHRoZSBudW1iZXIgb2Ygc2VnbWVudHMgb2YgYSBwZXJmZWN0IGluZGV4IGZvciB0aGlzIHRhcmdldC4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFF1ZXJ5IGVuY2Fwc3VsYXRlcyBhbGwgdGhlIHF1ZXJ5IGF0dHJpYnV0ZXMgd2Ugc3VwcG9ydCBpbiB0aGUgU0RLLiBJdCBjYW5cbiAqIGJlIHJ1biBhZ2FpbnN0IHRoZSBMb2NhbFN0b3JlLCBhcyB3ZWxsIGFzIGJlIGNvbnZlcnRlZCB0byBhIGBUYXJnZXRgIHRvXG4gKiBxdWVyeSB0aGUgUmVtb3RlU3RvcmUgcmVzdWx0cy5cbiAqXG4gKiBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICovXG5jbGFzcyBfX1BSSVZBVEVfUXVlcnlJbXBsIHtcbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplcyBhIFF1ZXJ5IHdpdGggYSBwYXRoIGFuZCBvcHRpb25hbCBhZGRpdGlvbmFsIHF1ZXJ5IGNvbnN0cmFpbnRzLlxuICAgICAqIFBhdGggbXVzdCBjdXJyZW50bHkgYmUgZW1wdHkgaWYgdGhpcyBpcyBhIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcnkuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZSwgdCA9IG51bGwsIG4gPSBbXSwgciA9IFtdLCBpID0gbnVsbCwgcyA9IFwiRlwiIC8qIExpbWl0VHlwZS5GaXJzdCAqLyAsIG8gPSBudWxsLCBfID0gbnVsbCkge1xuICAgICAgICB0aGlzLnBhdGggPSBlLCB0aGlzLmNvbGxlY3Rpb25Hcm91cCA9IHQsIHRoaXMuZXhwbGljaXRPcmRlckJ5ID0gbiwgdGhpcy5maWx0ZXJzID0gciwgXG4gICAgICAgIHRoaXMubGltaXQgPSBpLCB0aGlzLmxpbWl0VHlwZSA9IHMsIHRoaXMuc3RhcnRBdCA9IG8sIHRoaXMuZW5kQXQgPSBfLCB0aGlzLkllID0gbnVsbCwgXG4gICAgICAgIC8vIFRoZSBjb3JyZXNwb25kaW5nIGBUYXJnZXRgIG9mIHRoaXMgYFF1ZXJ5YCBpbnN0YW5jZSwgZm9yIHVzZSB3aXRoXG4gICAgICAgIC8vIG5vbi1hZ2dyZWdhdGUgcXVlcmllcy5cbiAgICAgICAgdGhpcy5FZSA9IG51bGwsIFxuICAgICAgICAvLyBUaGUgY29ycmVzcG9uZGluZyBgVGFyZ2V0YCBvZiB0aGlzIGBRdWVyeWAgaW5zdGFuY2UsIGZvciB1c2Ugd2l0aFxuICAgICAgICAvLyBhZ2dyZWdhdGUgcXVlcmllcy4gVW5saWtlIHRhcmdldHMgZm9yIG5vbi1hZ2dyZWdhdGUgcXVlcmllcyxcbiAgICAgICAgLy8gYWdncmVnYXRlIHF1ZXJ5IHRhcmdldHMgZG8gbm90IGNvbnRhaW4gbm9ybWFsaXplZCBvcmRlci1ieXMsIHRoZXkgb25seVxuICAgICAgICAvLyBjb250YWluIGV4cGxpY2l0IG9yZGVyLWJ5cy5cbiAgICAgICAgdGhpcy5kZSA9IG51bGwsIHRoaXMuc3RhcnRBdCwgdGhpcy5lbmRBdDtcbiAgICB9XG59XG5cbi8qKiBDcmVhdGVzIGEgbmV3IFF1ZXJ5IGluc3RhbmNlIHdpdGggdGhlIG9wdGlvbnMgcHJvdmlkZWQuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdRdWVyeShlLCB0LCBuLCByLCBpLCBzLCBvLCBfKSB7XG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfUXVlcnlJbXBsKGUsIHQsIG4sIHIsIGksIHMsIG8sIF8pO1xufVxuXG4vKiogQ3JlYXRlcyBhIG5ldyBRdWVyeSBmb3IgYSBxdWVyeSB0aGF0IG1hdGNoZXMgYWxsIGRvY3VtZW50cyBhdCBgcGF0aGAgKi8gZnVuY3Rpb24gX19QUklWQVRFX25ld1F1ZXJ5Rm9yUGF0aChlKSB7XG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfUXVlcnlJbXBsKGUpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBjb252ZXJ0IGEgY29sbGVjdGlvbiBncm91cCBxdWVyeSBpbnRvIGEgY29sbGVjdGlvbiBxdWVyeSBhdCBhXG4gKiBzcGVjaWZpYyBwYXRoLiBUaGlzIGlzIHVzZWQgd2hlbiBleGVjdXRpbmcgY29sbGVjdGlvbiBncm91cCBxdWVyaWVzLCBzaW5jZVxuICogd2UgaGF2ZSB0byBzcGxpdCB0aGUgcXVlcnkgaW50byBhIHNldCBvZiBjb2xsZWN0aW9uIHF1ZXJpZXMgYXQgbXVsdGlwbGVcbiAqIHBhdGhzLlxuICovXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIHF1ZXJ5IGRvZXMgbm90IHNwZWNpZnkgYW55IHF1ZXJ5IGNvbnN0cmFpbnRzIHRoYXRcbiAqIGNvdWxkIHJlbW92ZSByZXN1bHRzLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfcXVlcnlNYXRjaGVzQWxsRG9jdW1lbnRzKGUpIHtcbiAgICByZXR1cm4gMCA9PT0gZS5maWx0ZXJzLmxlbmd0aCAmJiBudWxsID09PSBlLmxpbWl0ICYmIG51bGwgPT0gZS5zdGFydEF0ICYmIG51bGwgPT0gZS5lbmRBdCAmJiAoMCA9PT0gZS5leHBsaWNpdE9yZGVyQnkubGVuZ3RoIHx8IDEgPT09IGUuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCAmJiBlLmV4cGxpY2l0T3JkZXJCeVswXS5maWVsZC5pc0tleUZpZWxkKCkpO1xufVxuXG4vLyBSZXR1cm5zIHRoZSBzb3J0ZWQgc2V0IG9mIGluZXF1YWxpdHkgZmlsdGVyIGZpZWxkcyB1c2VkIGluIHRoaXMgcXVlcnkuXG4vKipcbiAqIFJldHVybnMgd2hldGhlciB0aGUgcXVlcnkgbWF0Y2hlcyBhIGNvbGxlY3Rpb24gZ3JvdXAgcmF0aGVyIHRoYW4gYSBzcGVjaWZpY1xuICogY29sbGVjdGlvbi5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX2lzQ29sbGVjdGlvbkdyb3VwUXVlcnkoZSkge1xuICAgIHJldHVybiBudWxsICE9PSBlLmNvbGxlY3Rpb25Hcm91cDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBub3JtYWxpemVkIG9yZGVyLWJ5IGNvbnN0cmFpbnQgdGhhdCBpcyB1c2VkIHRvIGV4ZWN1dGUgdGhlIFF1ZXJ5LFxuICogd2hpY2ggY2FuIGJlIGRpZmZlcmVudCBmcm9tIHRoZSBvcmRlci1ieSBjb25zdHJhaW50cyB0aGUgdXNlciBwcm92aWRlZCAoZS5nLlxuICogdGhlIFNESyBhbmQgYmFja2VuZCBhbHdheXMgb3JkZXJzIGJ5IGBfX25hbWVfX2ApLiBUaGUgbm9ybWFsaXplZCBvcmRlci1ieVxuICogaW5jbHVkZXMgaW1wbGljaXQgb3JkZXItYnlzIGluIGFkZGl0aW9uIHRvIHRoZSBleHBsaWNpdCB1c2VyIHByb3ZpZGVkXG4gKiBvcmRlci1ieXMuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3F1ZXJ5Tm9ybWFsaXplZE9yZGVyQnkoZSkge1xuICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIGlmIChudWxsID09PSB0LkllKSB7XG4gICAgICAgIHQuSWUgPSBbXTtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBTZXQ7XG4gICAgICAgIC8vIEFueSBleHBsaWNpdCBvcmRlciBieSBmaWVsZHMgc2hvdWxkIGJlIGFkZGVkIGFzIGlzLlxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiB0LmV4cGxpY2l0T3JkZXJCeSkgdC5JZS5wdXNoKG4pLCBlLmFkZChuLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpKTtcbiAgICAgICAgLy8gVGhlIG9yZGVyIG9mIHRoZSBpbXBsaWNpdCBvcmRlcmluZyBhbHdheXMgbWF0Y2hlcyB0aGUgbGFzdCBleHBsaWNpdCBvcmRlciBieS5cbiAgICAgICAgICAgICAgICBjb25zdCBuID0gdC5leHBsaWNpdE9yZGVyQnkubGVuZ3RoID4gMCA/IHQuZXhwbGljaXRPcmRlckJ5W3QuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCAtIDFdLmRpciA6IFwiYXNjXCIgLyogRGlyZWN0aW9uLkFTQ0VORElORyAqLyAsIHIgPSBmdW5jdGlvbiBfX1BSSVZBVEVfZ2V0SW5lcXVhbGl0eUZpbHRlckZpZWxkcyhlKSB7XG4gICAgICAgICAgICBsZXQgdCA9IG5ldyBTb3J0ZWRTZXQoRmllbGRQYXRoJDEuY29tcGFyYXRvcik7XG4gICAgICAgICAgICByZXR1cm4gZS5maWx0ZXJzLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgICAgIGUuZ2V0RmxhdHRlbmVkRmlsdGVycygpLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBlLmlzSW5lcXVhbGl0eSgpICYmICh0ID0gdC5hZGQoZS5maWVsZCkpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pKSwgdDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIENyZWF0ZXMgYSBuZXcgUXVlcnkgZm9yIGEgY29sbGVjdGlvbiBncm91cCBxdWVyeSB0aGF0IG1hdGNoZXMgYWxsIGRvY3VtZW50c1xuICogd2l0aGluIHRoZSBwcm92aWRlZCBjb2xsZWN0aW9uIGdyb3VwLlxuICovICh0KTtcbiAgICAgICAgLy8gQW55IGluZXF1YWxpdHkgZmllbGRzIG5vdCBleHBsaWNpdGx5IG9yZGVyZWQgc2hvdWxkIGJlIGltcGxpY2l0bHkgb3JkZXJlZCBpbiBhIGxleGljb2dyYXBoaWNhbFxuICAgICAgICAvLyBvcmRlci4gV2hlbiB0aGVyZSBhcmUgbXVsdGlwbGUgaW5lcXVhbGl0eSBmaWx0ZXJzIG9uIHRoZSBzYW1lIGZpZWxkLCB0aGUgZmllbGQgc2hvdWxkIGJlIGFkZGVkXG4gICAgICAgIC8vIG9ubHkgb25jZS5cbiAgICAgICAgLy8gTm90ZTogYFNvcnRlZFNldDxGaWVsZFBhdGg+YCBzb3J0cyB0aGUga2V5IGZpZWxkIGJlZm9yZSBvdGhlciBmaWVsZHMuIEhvd2V2ZXIsIHdlIHdhbnQgdGhlIGtleVxuICAgICAgICAvLyBmaWVsZCB0byBiZSBzb3J0ZWQgbGFzdC5cbiAgICAgICAgICAgICAgICByLmZvckVhY2goKHIgPT4ge1xuICAgICAgICAgICAgZS5oYXMoci5jYW5vbmljYWxTdHJpbmcoKSkgfHwgci5pc0tleUZpZWxkKCkgfHwgdC5JZS5wdXNoKG5ldyBPcmRlckJ5KHIsIG4pKTtcbiAgICAgICAgfSkpLCBcbiAgICAgICAgLy8gQWRkIHRoZSBkb2N1bWVudCBrZXkgZmllbGQgdG8gdGhlIGxhc3QgaWYgaXQgaXMgbm90IGV4cGxpY2l0bHkgb3JkZXJlZC5cbiAgICAgICAgZS5oYXMoRmllbGRQYXRoJDEua2V5RmllbGQoKS5jYW5vbmljYWxTdHJpbmcoKSkgfHwgdC5JZS5wdXNoKG5ldyBPcmRlckJ5KEZpZWxkUGF0aCQxLmtleUZpZWxkKCksIG4pKTtcbiAgICB9XG4gICAgcmV0dXJuIHQuSWU7XG59XG5cbi8qKlxuICogQ29udmVydHMgdGhpcyBgUXVlcnlgIGluc3RhbmNlIHRvIGl0cyBjb3JyZXNwb25kaW5nIGBUYXJnZXRgIHJlcHJlc2VudGF0aW9uLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9xdWVyeVRvVGFyZ2V0KGUpIHtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICByZXR1cm4gdC5FZSB8fCAodC5FZSA9IF9fUFJJVkFURV9fcXVlcnlUb1RhcmdldCh0LCBfX1BSSVZBVEVfcXVlcnlOb3JtYWxpemVkT3JkZXJCeShlKSkpLCBcbiAgICB0LkVlO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIHRoaXMgYFF1ZXJ5YCBpbnN0YW5jZSB0byBpdHMgY29ycmVzcG9uZGluZyBgVGFyZ2V0YCByZXByZXNlbnRhdGlvbixcbiAqIGZvciB1c2Ugd2l0aGluIGFuIGFnZ3JlZ2F0ZSBxdWVyeS4gVW5saWtlIHRhcmdldHMgZm9yIG5vbi1hZ2dyZWdhdGUgcXVlcmllcyxcbiAqIGFnZ3JlZ2F0ZSBxdWVyeSB0YXJnZXRzIGRvIG5vdCBjb250YWluIG5vcm1hbGl6ZWQgb3JkZXItYnlzLCB0aGV5IG9ubHlcbiAqIGNvbnRhaW4gZXhwbGljaXQgb3JkZXItYnlzLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9xdWVyeVRvQWdncmVnYXRlVGFyZ2V0KGUpIHtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICByZXR1cm4gdC5kZSB8fCAoXG4gICAgLy8gRG8gbm90IGluY2x1ZGUgaW1wbGljaXQgb3JkZXItYnlzIGZvciBhZ2dyZWdhdGUgcXVlcmllcy5cbiAgICB0LmRlID0gX19QUklWQVRFX19xdWVyeVRvVGFyZ2V0KHQsIGUuZXhwbGljaXRPcmRlckJ5KSksIHQuZGU7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9fcXVlcnlUb1RhcmdldChlLCB0KSB7XG4gICAgaWYgKFwiRlwiIC8qIExpbWl0VHlwZS5GaXJzdCAqLyA9PT0gZS5saW1pdFR5cGUpIHJldHVybiBfX1BSSVZBVEVfbmV3VGFyZ2V0KGUucGF0aCwgZS5jb2xsZWN0aW9uR3JvdXAsIHQsIGUuZmlsdGVycywgZS5saW1pdCwgZS5zdGFydEF0LCBlLmVuZEF0KTtcbiAgICB7XG4gICAgICAgIC8vIEZsaXAgdGhlIG9yZGVyQnkgZGlyZWN0aW9ucyBzaW5jZSB3ZSB3YW50IHRoZSBsYXN0IHJlc3VsdHNcbiAgICAgICAgdCA9IHQubWFwKChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBcImRlc2NcIiAvKiBEaXJlY3Rpb24uREVTQ0VORElORyAqLyA9PT0gZS5kaXIgPyBcImFzY1wiIC8qIERpcmVjdGlvbi5BU0NFTkRJTkcgKi8gOiBcImRlc2NcIiAvKiBEaXJlY3Rpb24uREVTQ0VORElORyAqLztcbiAgICAgICAgICAgIHJldHVybiBuZXcgT3JkZXJCeShlLmZpZWxkLCB0KTtcbiAgICAgICAgfSkpO1xuICAgICAgICAvLyBXZSBuZWVkIHRvIHN3YXAgdGhlIGN1cnNvcnMgdG8gbWF0Y2ggdGhlIG5vdy1mbGlwcGVkIHF1ZXJ5IG9yZGVyaW5nLlxuICAgICAgICBjb25zdCBuID0gZS5lbmRBdCA/IG5ldyBCb3VuZChlLmVuZEF0LnBvc2l0aW9uLCBlLmVuZEF0LmluY2x1c2l2ZSkgOiBudWxsLCByID0gZS5zdGFydEF0ID8gbmV3IEJvdW5kKGUuc3RhcnRBdC5wb3NpdGlvbiwgZS5zdGFydEF0LmluY2x1c2l2ZSkgOiBudWxsO1xuICAgICAgICAvLyBOb3cgcmV0dXJuIGFzIGEgTGltaXRUeXBlLkZpcnN0IHF1ZXJ5LlxuICAgICAgICByZXR1cm4gX19QUklWQVRFX25ld1RhcmdldChlLnBhdGgsIGUuY29sbGVjdGlvbkdyb3VwLCB0LCBlLmZpbHRlcnMsIGUubGltaXQsIG4sIHIpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3F1ZXJ5V2l0aEFkZGVkRmlsdGVyKGUsIHQpIHtcbiAgICBjb25zdCBuID0gZS5maWx0ZXJzLmNvbmNhdChbIHQgXSk7XG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfUXVlcnlJbXBsKGUucGF0aCwgZS5jb2xsZWN0aW9uR3JvdXAsIGUuZXhwbGljaXRPcmRlckJ5LnNsaWNlKCksIG4sIGUubGltaXQsIGUubGltaXRUeXBlLCBlLnN0YXJ0QXQsIGUuZW5kQXQpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfcXVlcnlXaXRoTGltaXQoZSwgdCwgbikge1xuICAgIHJldHVybiBuZXcgX19QUklWQVRFX1F1ZXJ5SW1wbChlLnBhdGgsIGUuY29sbGVjdGlvbkdyb3VwLCBlLmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLCBlLmZpbHRlcnMuc2xpY2UoKSwgdCwgbiwgZS5zdGFydEF0LCBlLmVuZEF0KTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3F1ZXJ5RXF1YWxzKGUsIHQpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX3RhcmdldEVxdWFscyhfX1BSSVZBVEVfcXVlcnlUb1RhcmdldChlKSwgX19QUklWQVRFX3F1ZXJ5VG9UYXJnZXQodCkpICYmIGUubGltaXRUeXBlID09PSB0LmxpbWl0VHlwZTtcbn1cblxuLy8gVE9ETyhiLzI5MTgzMTY1KTogVGhpcyBpcyB1c2VkIHRvIGdldCBhIHVuaXF1ZSBzdHJpbmcgZnJvbSBhIHF1ZXJ5IHRvLCBmb3Jcbi8vIGV4YW1wbGUsIHVzZSBhcyBhIGRpY3Rpb25hcnkga2V5LCBidXQgdGhlIGltcGxlbWVudGF0aW9uIGlzIHN1YmplY3QgdG9cbi8vIGNvbGxpc2lvbnMuIE1ha2UgaXQgY29sbGlzaW9uLWZyZWUuXG5mdW5jdGlvbiBfX1BSSVZBVEVfY2Fub25pZnlRdWVyeShlKSB7XG4gICAgcmV0dXJuIGAke19fUFJJVkFURV9jYW5vbmlmeVRhcmdldChfX1BSSVZBVEVfcXVlcnlUb1RhcmdldChlKSl9fGx0OiR7ZS5saW1pdFR5cGV9YDtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3N0cmluZ2lmeVF1ZXJ5KGUpIHtcbiAgICByZXR1cm4gYFF1ZXJ5KHRhcmdldD0ke2Z1bmN0aW9uIF9fUFJJVkFURV9zdHJpbmdpZnlUYXJnZXQoZSkge1xuICAgICAgICBsZXQgdCA9IGUucGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IGUuY29sbGVjdGlvbkdyb3VwICYmICh0ICs9IFwiIGNvbGxlY3Rpb25Hcm91cD1cIiArIGUuY29sbGVjdGlvbkdyb3VwKSwgXG4gICAgICAgIGUuZmlsdGVycy5sZW5ndGggPiAwICYmICh0ICs9IGAsIGZpbHRlcnM6IFske2UuZmlsdGVycy5tYXAoKGUgPT4gX19QUklWQVRFX3N0cmluZ2lmeUZpbHRlcihlKSkpLmpvaW4oXCIsIFwiKX1dYCksIFxuICAgICAgICBfX1BSSVZBVEVfaXNOdWxsT3JVbmRlZmluZWQoZS5saW1pdCkgfHwgKHQgKz0gXCIsIGxpbWl0OiBcIiArIGUubGltaXQpLCBlLm9yZGVyQnkubGVuZ3RoID4gMCAmJiAodCArPSBgLCBvcmRlckJ5OiBbJHtlLm9yZGVyQnkubWFwKChlID0+IGZ1bmN0aW9uIF9fUFJJVkFURV9zdHJpbmdpZnlPcmRlckJ5KGUpIHtcbiAgICAgICAgICAgIHJldHVybiBgJHtlLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpfSAoJHtlLmRpcn0pYDtcbiAgICAgICAgfShlKSkpLmpvaW4oXCIsIFwiKX1dYCksIGUuc3RhcnRBdCAmJiAodCArPSBcIiwgc3RhcnRBdDogXCIsIHQgKz0gZS5zdGFydEF0LmluY2x1c2l2ZSA/IFwiYjpcIiA6IFwiYTpcIiwgXG4gICAgICAgIHQgKz0gZS5zdGFydEF0LnBvc2l0aW9uLm1hcCgoZSA9PiBjYW5vbmljYWxJZChlKSkpLmpvaW4oXCIsXCIpKSwgZS5lbmRBdCAmJiAodCArPSBcIiwgZW5kQXQ6IFwiLCBcbiAgICAgICAgdCArPSBlLmVuZEF0LmluY2x1c2l2ZSA/IFwiYTpcIiA6IFwiYjpcIiwgdCArPSBlLmVuZEF0LnBvc2l0aW9uLm1hcCgoZSA9PiBjYW5vbmljYWxJZChlKSkpLmpvaW4oXCIsXCIpKSwgXG4gICAgICAgIGBUYXJnZXQoJHt0fSlgO1xuICAgIH0oX19QUklWQVRFX3F1ZXJ5VG9UYXJnZXQoZSkpfTsgbGltaXRUeXBlPSR7ZS5saW1pdFR5cGV9KWA7XG59XG5cbi8qKiBSZXR1cm5zIHdoZXRoZXIgYGRvY2AgbWF0Y2hlcyB0aGUgY29uc3RyYWludHMgb2YgYHF1ZXJ5YC4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3F1ZXJ5TWF0Y2hlcyhlLCB0KSB7XG4gICAgcmV0dXJuIHQuaXNGb3VuZERvY3VtZW50KCkgJiYgZnVuY3Rpb24gX19QUklWQVRFX3F1ZXJ5TWF0Y2hlc1BhdGhBbmRDb2xsZWN0aW9uR3JvdXAoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdC5rZXkucGF0aDtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IGUuY29sbGVjdGlvbkdyb3VwID8gdC5rZXkuaGFzQ29sbGVjdGlvbklkKGUuY29sbGVjdGlvbkdyb3VwKSAmJiBlLnBhdGguaXNQcmVmaXhPZihuKSA6IERvY3VtZW50S2V5LmlzRG9jdW1lbnRLZXkoZS5wYXRoKSA/IGUucGF0aC5pc0VxdWFsKG4pIDogZS5wYXRoLmlzSW1tZWRpYXRlUGFyZW50T2Yobik7XG4gICAgfVxuICAgIC8qKlxuICogQSBkb2N1bWVudCBtdXN0IGhhdmUgYSB2YWx1ZSBmb3IgZXZlcnkgb3JkZXJpbmcgY2xhdXNlIGluIG9yZGVyIHRvIHNob3cgdXBcbiAqIGluIHRoZSByZXN1bHRzLlxuICovIChlLCB0KSAmJiBmdW5jdGlvbiBfX1BSSVZBVEVfcXVlcnlNYXRjaGVzT3JkZXJCeShlLCB0KSB7XG4gICAgICAgIC8vIFdlIG11c3QgdXNlIGBxdWVyeU5vcm1hbGl6ZWRPcmRlckJ5KClgIHRvIGdldCB0aGUgbGlzdCBvZiBhbGwgb3JkZXJCeXMgKGJvdGggaW1wbGljaXQgYW5kIGV4cGxpY2l0KS5cbiAgICAgICAgLy8gTm90ZSB0aGF0IGZvciBPUiBxdWVyaWVzLCBvcmRlckJ5IGFwcGxpZXMgdG8gYWxsIGRpc2p1bmN0aW9uIHRlcm1zIGFuZCBpbXBsaWNpdCBvcmRlckJ5cyBtdXN0XG4gICAgICAgIC8vIGJlIHRha2VuIGludG8gYWNjb3VudC4gRm9yIGV4YW1wbGUsIHRoZSBxdWVyeSBcImEgPiAxIHx8IGI9PTFcIiBoYXMgYW4gaW1wbGljaXQgXCJvcmRlckJ5IGFcIiBkdWVcbiAgICAgICAgLy8gdG8gdGhlIGluZXF1YWxpdHksIGFuZCBpcyBldmFsdWF0ZWQgYXMgXCJhID4gMSBvcmRlckJ5IGEgfHwgYj09MSBvcmRlckJ5IGFcIi5cbiAgICAgICAgLy8gQSBkb2N1bWVudCB3aXRoIGNvbnRlbnQgb2Yge2I6MX0gbWF0Y2hlcyB0aGUgZmlsdGVycywgYnV0IGRvZXMgbm90IG1hdGNoIHRoZSBvcmRlckJ5IGJlY2F1c2VcbiAgICAgICAgLy8gaXQncyBtaXNzaW5nIHRoZSBmaWVsZCAnYScuXG4gICAgICAgIGZvciAoY29uc3QgbiBvZiBfX1BSSVZBVEVfcXVlcnlOb3JtYWxpemVkT3JkZXJCeShlKSkgXG4gICAgICAgIC8vIG9yZGVyLWJ5IGtleSBhbHdheXMgbWF0Y2hlc1xuICAgICAgICBpZiAoIW4uZmllbGQuaXNLZXlGaWVsZCgpICYmIG51bGwgPT09IHQuZGF0YS5maWVsZChuLmZpZWxkKSkgcmV0dXJuICExO1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfShlLCB0KSAmJiBmdW5jdGlvbiBfX1BSSVZBVEVfcXVlcnlNYXRjaGVzRmlsdGVycyhlLCB0KSB7XG4gICAgICAgIGZvciAoY29uc3QgbiBvZiBlLmZpbHRlcnMpIGlmICghbi5tYXRjaGVzKHQpKSByZXR1cm4gITE7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgLyoqIE1ha2VzIHN1cmUgYSBkb2N1bWVudCBpcyB3aXRoaW4gdGhlIGJvdW5kcywgaWYgcHJvdmlkZWQuICovIChlLCB0KSAmJiBmdW5jdGlvbiBfX1BSSVZBVEVfcXVlcnlNYXRjaGVzQm91bmRzKGUsIHQpIHtcbiAgICAgICAgaWYgKGUuc3RhcnRBdCAmJiAhXG4gICAgICAgIC8qKlxuICogUmV0dXJucyB0cnVlIGlmIGEgZG9jdW1lbnQgc29ydHMgYmVmb3JlIGEgYm91bmQgdXNpbmcgdGhlIHByb3ZpZGVkIHNvcnRcbiAqIG9yZGVyLlxuICovXG4gICAgICAgIGZ1bmN0aW9uIF9fUFJJVkFURV9ib3VuZFNvcnRzQmVmb3JlRG9jdW1lbnQoZSwgdCwgbikge1xuICAgICAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9ib3VuZENvbXBhcmVUb0RvY3VtZW50KGUsIHQsIG4pO1xuICAgICAgICAgICAgcmV0dXJuIGUuaW5jbHVzaXZlID8gciA8PSAwIDogciA8IDA7XG4gICAgICAgIH0oZS5zdGFydEF0LCBfX1BSSVZBVEVfcXVlcnlOb3JtYWxpemVkT3JkZXJCeShlKSwgdCkpIHJldHVybiAhMTtcbiAgICAgICAgaWYgKGUuZW5kQXQgJiYgIWZ1bmN0aW9uIF9fUFJJVkFURV9ib3VuZFNvcnRzQWZ0ZXJEb2N1bWVudChlLCB0LCBuKSB7XG4gICAgICAgICAgICBjb25zdCByID0gX19QUklWQVRFX2JvdW5kQ29tcGFyZVRvRG9jdW1lbnQoZSwgdCwgbik7XG4gICAgICAgICAgICByZXR1cm4gZS5pbmNsdXNpdmUgPyByID49IDAgOiByID4gMDtcbiAgICAgICAgfShlLmVuZEF0LCBfX1BSSVZBVEVfcXVlcnlOb3JtYWxpemVkT3JkZXJCeShlKSwgdCkpIHJldHVybiAhMTtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICAvKipcbiAqIFJldHVybnMgdGhlIGNvbGxlY3Rpb24gZ3JvdXAgdGhhdCB0aGlzIHF1ZXJ5IHRhcmdldHMuXG4gKlxuICogUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBpbiB0aGUgV2ViIFNESyB0byBmYWNpbGl0YXRlIG11bHRpLXRhYlxuICogc3luY2hyb25pemF0aW9uIGZvciBxdWVyeSByZXN1bHRzLlxuICovIChlLCB0KTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3F1ZXJ5Q29sbGVjdGlvbkdyb3VwKGUpIHtcbiAgICByZXR1cm4gZS5jb2xsZWN0aW9uR3JvdXAgfHwgKGUucGF0aC5sZW5ndGggJSAyID09IDEgPyBlLnBhdGgubGFzdFNlZ21lbnQoKSA6IGUucGF0aC5nZXQoZS5wYXRoLmxlbmd0aCAtIDIpKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgbmV3IGNvbXBhcmF0b3IgZnVuY3Rpb24gdGhhdCBjYW4gYmUgdXNlZCB0byBjb21wYXJlIHR3byBkb2N1bWVudHNcbiAqIGJhc2VkIG9uIHRoZSBRdWVyeSdzIG9yZGVyaW5nIGNvbnN0cmFpbnQuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX25ld1F1ZXJ5Q29tcGFyYXRvcihlKSB7XG4gICAgcmV0dXJuICh0LCBuKSA9PiB7XG4gICAgICAgIGxldCByID0gITE7XG4gICAgICAgIGZvciAoY29uc3QgaSBvZiBfX1BSSVZBVEVfcXVlcnlOb3JtYWxpemVkT3JkZXJCeShlKSkge1xuICAgICAgICAgICAgY29uc3QgZSA9IF9fUFJJVkFURV9jb21wYXJlRG9jcyhpLCB0LCBuKTtcbiAgICAgICAgICAgIGlmICgwICE9PSBlKSByZXR1cm4gZTtcbiAgICAgICAgICAgIHIgPSByIHx8IGkuZmllbGQuaXNLZXlGaWVsZCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwO1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9jb21wYXJlRG9jcyhlLCB0LCBuKSB7XG4gICAgY29uc3QgciA9IGUuZmllbGQuaXNLZXlGaWVsZCgpID8gRG9jdW1lbnRLZXkuY29tcGFyYXRvcih0LmtleSwgbi5rZXkpIDogZnVuY3Rpb24gX19QUklWQVRFX2NvbXBhcmVEb2N1bWVudHNCeUZpZWxkKGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IHQuZGF0YS5maWVsZChlKSwgaSA9IG4uZGF0YS5maWVsZChlKTtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHIgJiYgbnVsbCAhPT0gaSA/IF9fUFJJVkFURV92YWx1ZUNvbXBhcmUociwgaSkgOiBmYWlsKDQyODg2KTtcbiAgICB9KGUuZmllbGQsIHQsIG4pO1xuICAgIHN3aXRjaCAoZS5kaXIpIHtcbiAgICAgIGNhc2UgXCJhc2NcIiAvKiBEaXJlY3Rpb24uQVNDRU5ESU5HICovIDpcbiAgICAgICAgcmV0dXJuIHI7XG5cbiAgICAgIGNhc2UgXCJkZXNjXCIgLyogRGlyZWN0aW9uLkRFU0NFTkRJTkcgKi8gOlxuICAgICAgICByZXR1cm4gLTEgKiByO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZmFpbCgxOTc5MCwge1xuICAgICAgICAgICAgZGlyZWN0aW9uOiBlLmRpclxuICAgICAgICB9KTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgbWFwIGltcGxlbWVudGF0aW9uIHRoYXQgdXNlcyBvYmplY3RzIGFzIGtleXMuIE9iamVjdHMgbXVzdCBoYXZlIGFuXG4gKiBhc3NvY2lhdGVkIGVxdWFscyBmdW5jdGlvbiBhbmQgbXVzdCBiZSBpbW11dGFibGUuIEVudHJpZXMgaW4gdGhlIG1hcCBhcmVcbiAqIHN0b3JlZCB0b2dldGhlciB3aXRoIHRoZSBrZXkgYmVpbmcgcHJvZHVjZWQgZnJvbSB0aGUgbWFwS2V5Rm4uIFRoaXMgbWFwXG4gKiBhdXRvbWF0aWNhbGx5IGhhbmRsZXMgY29sbGlzaW9ucyBvZiBrZXlzLlxuICovIGNsYXNzIE9iamVjdE1hcCB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLm1hcEtleUZuID0gZSwgdGhpcy5lcXVhbHNGbiA9IHQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGlubmVyIG1hcCBmb3IgYSBrZXkvdmFsdWUgcGFpci4gRHVlIHRvIHRoZSBwb3NzaWJpbGl0eSBvZiBjb2xsaXNpb25zIHdlXG4gICAgICAgICAqIGtlZXAgYSBsaXN0IG9mIGVudHJpZXMgdGhhdCB3ZSBkbyBhIGxpbmVhciBzZWFyY2ggdGhyb3VnaCB0byBmaW5kIGFuIGFjdHVhbFxuICAgICAgICAgKiBtYXRjaC4gTm90ZSB0aGF0IGNvbGxpc2lvbnMgc2hvdWxkIGJlIHJhcmUsIHNvIHdlIHN0aWxsIGV4cGVjdCBuZWFyXG4gICAgICAgICAqIGNvbnN0YW50IHRpbWUgbG9va3VwcyBpbiBwcmFjdGljZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaW5uZXIgPSB7fSwgXG4gICAgICAgIC8qKiBUaGUgbnVtYmVyIG9mIGVudHJpZXMgc3RvcmVkIGluIHRoZSBtYXAgKi9cbiAgICAgICAgdGhpcy5pbm5lclNpemUgPSAwO1xuICAgIH1cbiAgICAvKiogR2V0IGEgdmFsdWUgZm9yIHRoaXMga2V5LCBvciB1bmRlZmluZWQgaWYgaXQgZG9lcyBub3QgZXhpc3QuICovICAgIGdldChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLm1hcEtleUZuKGUpLCBuID0gdGhpcy5pbm5lclt0XTtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gbikgZm9yIChjb25zdCBbdCwgcl0gb2YgbikgaWYgKHRoaXMuZXF1YWxzRm4odCwgZSkpIHJldHVybiByO1xuICAgIH1cbiAgICBoYXMoZSkge1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSB0aGlzLmdldChlKTtcbiAgICB9XG4gICAgLyoqIFB1dCB0aGlzIGtleSBhbmQgdmFsdWUgaW4gdGhlIG1hcC4gKi8gICAgc2V0KGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMubWFwS2V5Rm4oZSksIHIgPSB0aGlzLmlubmVyW25dO1xuICAgICAgICBpZiAodm9pZCAwID09PSByKSByZXR1cm4gdGhpcy5pbm5lcltuXSA9IFsgWyBlLCB0IF0gXSwgdm9pZCB0aGlzLmlubmVyU2l6ZSsrO1xuICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHIubGVuZ3RoOyBuKyspIGlmICh0aGlzLmVxdWFsc0ZuKHJbbl1bMF0sIGUpKSBcbiAgICAgICAgLy8gVGhpcyBpcyB1cGRhdGluZyBhbiBleGlzdGluZyBlbnRyeSBhbmQgZG9lcyBub3QgaW5jcmVhc2UgYGlubmVyU2l6ZWAuXG4gICAgICAgIHJldHVybiB2b2lkIChyW25dID0gWyBlLCB0IF0pO1xuICAgICAgICByLnB1c2goWyBlLCB0IF0pLCB0aGlzLmlubmVyU2l6ZSsrO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgdGhpcyBrZXkgZnJvbSB0aGUgbWFwLiBSZXR1cm5zIGEgYm9vbGVhbiBpZiBhbnl0aGluZyB3YXMgZGVsZXRlZC5cbiAgICAgKi8gICAgZGVsZXRlKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMubWFwS2V5Rm4oZSksIG4gPSB0aGlzLmlubmVyW3RdO1xuICAgICAgICBpZiAodm9pZCAwID09PSBuKSByZXR1cm4gITE7XG4gICAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgbi5sZW5ndGg7IHIrKykgaWYgKHRoaXMuZXF1YWxzRm4obltyXVswXSwgZSkpIHJldHVybiAxID09PSBuLmxlbmd0aCA/IGRlbGV0ZSB0aGlzLmlubmVyW3RdIDogbi5zcGxpY2UociwgMSksIFxuICAgICAgICB0aGlzLmlubmVyU2l6ZS0tLCAhMDtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICBmb3JFYWNoKGUpIHtcbiAgICAgICAgZm9yRWFjaCh0aGlzLmlubmVyLCAoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW3QsIHJdIG9mIG4pIGUodCwgcik7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIGlzRW1wdHkodGhpcy5pbm5lcik7XG4gICAgfVxuICAgIHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlubmVyU2l6ZTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IFJ0ID0gbmV3IFNvcnRlZE1hcChEb2N1bWVudEtleS5jb21wYXJhdG9yKTtcblxuZnVuY3Rpb24gX19QUklWQVRFX211dGFibGVEb2N1bWVudE1hcCgpIHtcbiAgICByZXR1cm4gUnQ7XG59XG5cbmNvbnN0IFZ0ID0gbmV3IFNvcnRlZE1hcChEb2N1bWVudEtleS5jb21wYXJhdG9yKTtcblxuZnVuY3Rpb24gZG9jdW1lbnRNYXAoLi4uZSkge1xuICAgIGxldCB0ID0gVnQ7XG4gICAgZm9yIChjb25zdCBuIG9mIGUpIHQgPSB0Lmluc2VydChuLmtleSwgbik7XG4gICAgcmV0dXJuIHQ7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9jb252ZXJ0T3ZlcmxheWVkRG9jdW1lbnRNYXBUb0RvY3VtZW50TWFwKGUpIHtcbiAgICBsZXQgdCA9IFZ0O1xuICAgIHJldHVybiBlLmZvckVhY2goKChlLCBuKSA9PiB0ID0gdC5pbnNlcnQoZSwgbi5vdmVybGF5ZWREb2N1bWVudCkpKSwgdDtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX25ld092ZXJsYXlNYXAoKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9uZXdEb2N1bWVudEtleU1hcCgpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfbmV3TXV0YXRpb25NYXAoKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9uZXdEb2N1bWVudEtleU1hcCgpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfbmV3RG9jdW1lbnRLZXlNYXAoKSB7XG4gICAgcmV0dXJuIG5ldyBPYmplY3RNYXAoKGUgPT4gZS50b1N0cmluZygpKSwgKChlLCB0KSA9PiBlLmlzRXF1YWwodCkpKTtcbn1cblxuY29uc3QgbXQgPSBuZXcgU29ydGVkTWFwKERvY3VtZW50S2V5LmNvbXBhcmF0b3IpO1xuXG5jb25zdCBmdCA9IG5ldyBTb3J0ZWRTZXQoRG9jdW1lbnRLZXkuY29tcGFyYXRvcik7XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9kb2N1bWVudEtleVNldCguLi5lKSB7XG4gICAgbGV0IHQgPSBmdDtcbiAgICBmb3IgKGNvbnN0IG4gb2YgZSkgdCA9IHQuYWRkKG4pO1xuICAgIHJldHVybiB0O1xufVxuXG5jb25zdCBndCA9IG5ldyBTb3J0ZWRTZXQoX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IpO1xuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdGFyZ2V0SWRTZXQoKSB7XG4gICAgcmV0dXJuIGd0O1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIGFuIERvdWJsZVZhbHVlIGZvciBgdmFsdWVgIHRoYXQgaXMgZW5jb2RlZCBiYXNlZCB0aGUgc2VyaWFsaXplcidzXG4gKiBgdXNlUHJvdG8zSnNvbmAgc2V0dGluZy5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfdG9Eb3VibGUoZSwgdCkge1xuICAgIGlmIChlLnVzZVByb3RvM0pzb24pIHtcbiAgICAgICAgaWYgKGlzTmFOKHQpKSByZXR1cm4ge1xuICAgICAgICAgICAgZG91YmxlVmFsdWU6IFwiTmFOXCJcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHQgPT09IDEgLyAwKSByZXR1cm4ge1xuICAgICAgICAgICAgZG91YmxlVmFsdWU6IFwiSW5maW5pdHlcIlxuICAgICAgICB9O1xuICAgICAgICBpZiAodCA9PT0gLTEgLyAwKSByZXR1cm4ge1xuICAgICAgICAgICAgZG91YmxlVmFsdWU6IFwiLUluZmluaXR5XCJcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZG91YmxlVmFsdWU6IF9fUFJJVkFURV9pc05lZ2F0aXZlWmVybyh0KSA/IFwiLTBcIiA6IHRcbiAgICB9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYW4gSW50ZWdlclZhbHVlIGZvciBgdmFsdWVgLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV90b0ludGVnZXIoZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGludGVnZXJWYWx1ZTogXCJcIiArIGVcbiAgICB9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYSB2YWx1ZSBmb3IgYSBudW1iZXIgdGhhdCdzIGFwcHJvcHJpYXRlIHRvIHB1dCBpbnRvIGEgcHJvdG8uXG4gKiBUaGUgcmV0dXJuIHZhbHVlIGlzIGFuIEludGVnZXJWYWx1ZSBpZiBpdCBjYW4gc2FmZWx5IHJlcHJlc2VudCB0aGUgdmFsdWUsXG4gKiBvdGhlcndpc2UgYSBEb3VibGVWYWx1ZSBpcyByZXR1cm5lZC5cbiAqLyBmdW5jdGlvbiB0b051bWJlcihlLCB0KSB7XG4gICAgcmV0dXJuIGlzU2FmZUludGVnZXIodCkgPyBfX1BSSVZBVEVfdG9JbnRlZ2VyKHQpIDogX19QUklWQVRFX3RvRG91YmxlKGUsIHQpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFVzZWQgdG8gcmVwcmVzZW50IGEgZmllbGQgdHJhbnNmb3JtIG9uIGEgbXV0YXRpb24uICovIGNsYXNzIFRyYW5zZm9ybU9wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vIE1ha2Ugc3VyZSB0aGF0IHRoZSBzdHJ1Y3R1cmFsIHR5cGUgb2YgYFRyYW5zZm9ybU9wZXJhdGlvbmAgaXMgdW5pcXVlLlxuICAgICAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9UeXBlU2NyaXB0L2lzc3Vlcy81NDUxXG4gICAgICAgIHRoaXMuXyA9IHZvaWQgMDtcbiAgICB9XG59XG5cbi8qKlxuICogQ29tcHV0ZXMgdGhlIGxvY2FsIHRyYW5zZm9ybSByZXN1bHQgYWdhaW5zdCB0aGUgcHJvdmlkZWQgYHByZXZpb3VzVmFsdWVgLFxuICogb3B0aW9uYWxseSB1c2luZyB0aGUgcHJvdmlkZWQgbG9jYWxXcml0ZVRpbWUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2FwcGx5VHJhbnNmb3JtT3BlcmF0aW9uVG9Mb2NhbFZpZXcoZSwgdCwgbikge1xuICAgIHJldHVybiBlIGluc3RhbmNlb2YgX19QUklWQVRFX1NlcnZlclRpbWVzdGFtcFRyYW5zZm9ybSA/IGZ1bmN0aW9uIHNlcnZlclRpbWVzdGFtcCQxKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHtcbiAgICAgICAgICAgIGZpZWxkczoge1xuICAgICAgICAgICAgICAgIFthdF06IHtcbiAgICAgICAgICAgICAgICAgICAgc3RyaW5nVmFsdWU6IF90XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBbY3RdOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWNvbmRzOiBlLnNlY29uZHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW5vczogZS5uYW5vc2Vjb25kc1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvLyBXZSBzaG91bGQgYXZvaWQgc3RvcmluZyBkZWVwbHkgbmVzdGVkIHNlcnZlciB0aW1lc3RhbXAgbWFwIHZhbHVlc1xuICAgICAgICAvLyBiZWNhdXNlIHdlIG5ldmVyIHVzZSB0aGUgaW50ZXJtZWRpYXRlIFwicHJldmlvdXMgdmFsdWVzXCIuXG4gICAgICAgIC8vIEZvciBleGFtcGxlOlxuICAgICAgICAvLyBwcmV2aW91czogNDJMLCBhZGQ6IHQxLCByZXN1bHQ6IHQxIC0+IDQyTFxuICAgICAgICAvLyBwcmV2aW91czogdDEsICBhZGQ6IHQyLCByZXN1bHQ6IHQyIC0+IDQyTCAoTk9UIHQyIC0+IHQxIC0+IDQyTClcbiAgICAgICAgLy8gcHJldmlvdXM6IHQyLCAgYWRkOiB0MywgcmVzdWx0OiB0MyAtPiA0MkwgKE5PVCB0MyAtPiB0MiAtPiB0MSAtPiA0MkwpXG4gICAgICAgIC8vIGBnZXRQcmV2aW91c1ZhbHVlYCByZWN1cnNpdmVseSB0cmF2ZXJzZXMgc2VydmVyIHRpbWVzdGFtcHMgdG8gZmluZCB0aGVcbiAgICAgICAgLy8gbGVhc3QgcmVjZW50IFZhbHVlLlxuICAgICAgICAgICAgICAgIHJldHVybiB0ICYmIF9fUFJJVkFURV9pc1NlcnZlclRpbWVzdGFtcCh0KSAmJiAodCA9IF9fUFJJVkFURV9nZXRQcmV2aW91c1ZhbHVlKHQpKSwgXG4gICAgICAgIHQgJiYgKG4uZmllbGRzW3V0XSA9IHQpLCB7XG4gICAgICAgICAgICBtYXBWYWx1ZTogblxuICAgICAgICB9O1xuICAgIH0obiwgdCkgOiBlIGluc3RhbmNlb2YgX19QUklWQVRFX0FycmF5VW5pb25UcmFuc2Zvcm1PcGVyYXRpb24gPyBfX1BSSVZBVEVfYXBwbHlBcnJheVVuaW9uVHJhbnNmb3JtT3BlcmF0aW9uKGUsIHQpIDogZSBpbnN0YW5jZW9mIF9fUFJJVkFURV9BcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbiA/IF9fUFJJVkFURV9hcHBseUFycmF5UmVtb3ZlVHJhbnNmb3JtT3BlcmF0aW9uKGUsIHQpIDogZnVuY3Rpb24gX19QUklWQVRFX2FwcGx5TnVtZXJpY0luY3JlbWVudFRyYW5zZm9ybU9wZXJhdGlvblRvTG9jYWxWaWV3KGUsIHQpIHtcbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBTaW5jZSBKYXZhU2NyaXB0J3MgaW50ZWdlciBhcml0aG1ldGljIGlzIGxpbWl0ZWQgdG8gNTMgYml0XG4gICAgICAgIC8vIHByZWNpc2lvbiBhbmQgcmVzb2x2ZXMgb3ZlcmZsb3dzIGJ5IHJlZHVjaW5nIHByZWNpc2lvbiwgd2UgZG8gbm90XG4gICAgICAgIC8vIG1hbnVhbGx5IGNhcCBvdmVyZmxvd3MgYXQgMl42My5cbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9jb21wdXRlVHJhbnNmb3JtT3BlcmF0aW9uQmFzZVZhbHVlKGUsIHQpLCByID0gYXNOdW1iZXIobikgKyBhc051bWJlcihlLkFlKTtcbiAgICAgICAgcmV0dXJuIGlzSW50ZWdlcihuKSAmJiBpc0ludGVnZXIoZS5BZSkgPyBfX1BSSVZBVEVfdG9JbnRlZ2VyKHIpIDogX19QUklWQVRFX3RvRG91YmxlKGUuc2VyaWFsaXplciwgcik7XG4gICAgfShlLCB0KTtcbn1cblxuLyoqXG4gKiBDb21wdXRlcyBhIGZpbmFsIHRyYW5zZm9ybSByZXN1bHQgYWZ0ZXIgdGhlIHRyYW5zZm9ybSBoYXMgYmVlbiBhY2tub3dsZWRnZWRcbiAqIGJ5IHRoZSBzZXJ2ZXIsIHBvdGVudGlhbGx5IHVzaW5nIHRoZSBzZXJ2ZXItcHJvdmlkZWQgdHJhbnNmb3JtUmVzdWx0LlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9hcHBseVRyYW5zZm9ybU9wZXJhdGlvblRvUmVtb3RlRG9jdW1lbnQoZSwgdCwgbikge1xuICAgIC8vIFRoZSBzZXJ2ZXIganVzdCBzZW5kcyBudWxsIGFzIHRoZSB0cmFuc2Zvcm0gcmVzdWx0IGZvciBhcnJheSBvcGVyYXRpb25zLFxuICAgIC8vIHNvIHdlIGhhdmUgdG8gY2FsY3VsYXRlIGEgcmVzdWx0IHRoZSBzYW1lIGFzIHdlIGRvIGZvciBsb2NhbFxuICAgIC8vIGFwcGxpY2F0aW9ucy5cbiAgICByZXR1cm4gZSBpbnN0YW5jZW9mIF9fUFJJVkFURV9BcnJheVVuaW9uVHJhbnNmb3JtT3BlcmF0aW9uID8gX19QUklWQVRFX2FwcGx5QXJyYXlVbmlvblRyYW5zZm9ybU9wZXJhdGlvbihlLCB0KSA6IGUgaW5zdGFuY2VvZiBfX1BSSVZBVEVfQXJyYXlSZW1vdmVUcmFuc2Zvcm1PcGVyYXRpb24gPyBfX1BSSVZBVEVfYXBwbHlBcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbihlLCB0KSA6IG47XG59XG5cbi8qKlxuICogSWYgdGhpcyB0cmFuc2Zvcm0gb3BlcmF0aW9uIGlzIG5vdCBpZGVtcG90ZW50LCByZXR1cm5zIHRoZSBiYXNlIHZhbHVlIHRvXG4gKiBwZXJzaXN0IGZvciB0aGlzIHRyYW5zZm9ybS4gSWYgYSBiYXNlIHZhbHVlIGlzIHJldHVybmVkLCB0aGUgdHJhbnNmb3JtXG4gKiBvcGVyYXRpb24gaXMgYWx3YXlzIGFwcGxpZWQgdG8gdGhpcyBiYXNlIHZhbHVlLCBldmVuIGlmIGRvY3VtZW50IGhhc1xuICogYWxyZWFkeSBiZWVuIHVwZGF0ZWQuXG4gKlxuICogQmFzZSB2YWx1ZXMgcHJvdmlkZSBjb25zaXN0ZW50IGJlaGF2aW9yIGZvciBub24taWRlbXBvdGVudCB0cmFuc2Zvcm1zIGFuZFxuICogYWxsb3cgdXMgdG8gcmV0dXJuIHRoZSBzYW1lIGxhdGVuY3ktY29tcGVuc2F0ZWQgdmFsdWUgZXZlbiBpZiB0aGUgYmFja2VuZFxuICogaGFzIGFscmVhZHkgYXBwbGllZCB0aGUgdHJhbnNmb3JtIG9wZXJhdGlvbi4gVGhlIGJhc2UgdmFsdWUgaXMgbnVsbCBmb3JcbiAqIGlkZW1wb3RlbnQgdHJhbnNmb3JtcywgYXMgdGhleSBjYW4gYmUgcmUtcGxheWVkIGV2ZW4gaWYgdGhlIGJhY2tlbmQgaGFzXG4gKiBhbHJlYWR5IGFwcGxpZWQgdGhlbS5cbiAqXG4gKiBAcmV0dXJucyBhIGJhc2UgdmFsdWUgdG8gc3RvcmUgYWxvbmcgd2l0aCB0aGUgbXV0YXRpb24sIG9yIG51bGwgZm9yXG4gKiBpZGVtcG90ZW50IHRyYW5zZm9ybXMuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2NvbXB1dGVUcmFuc2Zvcm1PcGVyYXRpb25CYXNlVmFsdWUoZSwgdCkge1xuICAgIHJldHVybiBlIGluc3RhbmNlb2YgX19QUklWQVRFX051bWVyaWNJbmNyZW1lbnRUcmFuc2Zvcm1PcGVyYXRpb24gPyBcbiAgICAvKiogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgZWl0aGVyIGFuIEludGVnZXJWYWx1ZSBvciBhIERvdWJsZVZhbHVlLiAqL1xuICAgIGZ1bmN0aW9uIF9fUFJJVkFURV9pc051bWJlcihlKSB7XG4gICAgICAgIHJldHVybiBpc0ludGVnZXIoZSkgfHwgZnVuY3Rpb24gX19QUklWQVRFX2lzRG91YmxlKGUpIHtcbiAgICAgICAgICAgIHJldHVybiAhIWUgJiYgXCJkb3VibGVWYWx1ZVwiIGluIGU7XG4gICAgICAgIH0oZSk7XG4gICAgfSh0KSA/IHQgOiB7XG4gICAgICAgIGludGVnZXJWYWx1ZTogMFxuICAgIH0gOiBudWxsO1xufVxuXG4vKiogVHJhbnNmb3JtcyBhIHZhbHVlIGludG8gYSBzZXJ2ZXItZ2VuZXJhdGVkIHRpbWVzdGFtcC4gKi9cbmNsYXNzIF9fUFJJVkFURV9TZXJ2ZXJUaW1lc3RhbXBUcmFuc2Zvcm0gZXh0ZW5kcyBUcmFuc2Zvcm1PcGVyYXRpb24ge31cblxuLyoqIFRyYW5zZm9ybXMgYW4gYXJyYXkgdmFsdWUgdmlhIGEgdW5pb24gb3BlcmF0aW9uLiAqLyBjbGFzcyBfX1BSSVZBVEVfQXJyYXlVbmlvblRyYW5zZm9ybU9wZXJhdGlvbiBleHRlbmRzIFRyYW5zZm9ybU9wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmVsZW1lbnRzID0gZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9hcHBseUFycmF5VW5pb25UcmFuc2Zvcm1PcGVyYXRpb24oZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfY29lcmNlZEZpZWxkVmFsdWVzQXJyYXkodCk7XG4gICAgZm9yIChjb25zdCB0IG9mIGUuZWxlbWVudHMpIG4uc29tZSgoZSA9PiBfX1BSSVZBVEVfdmFsdWVFcXVhbHMoZSwgdCkpKSB8fCBuLnB1c2godCk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYXJyYXlWYWx1ZToge1xuICAgICAgICAgICAgdmFsdWVzOiBuXG4gICAgICAgIH1cbiAgICB9O1xufVxuXG4vKiogVHJhbnNmb3JtcyBhbiBhcnJheSB2YWx1ZSB2aWEgYSByZW1vdmUgb3BlcmF0aW9uLiAqLyBjbGFzcyBfX1BSSVZBVEVfQXJyYXlSZW1vdmVUcmFuc2Zvcm1PcGVyYXRpb24gZXh0ZW5kcyBUcmFuc2Zvcm1PcGVyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5lbGVtZW50cyA9IGU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfYXBwbHlBcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbihlLCB0KSB7XG4gICAgbGV0IG4gPSBfX1BSSVZBVEVfY29lcmNlZEZpZWxkVmFsdWVzQXJyYXkodCk7XG4gICAgZm9yIChjb25zdCB0IG9mIGUuZWxlbWVudHMpIG4gPSBuLmZpbHRlcigoZSA9PiAhX19QUklWQVRFX3ZhbHVlRXF1YWxzKGUsIHQpKSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYXJyYXlWYWx1ZToge1xuICAgICAgICAgICAgdmFsdWVzOiBuXG4gICAgICAgIH1cbiAgICB9O1xufVxuXG4vKipcbiAqIEltcGxlbWVudHMgdGhlIGJhY2tlbmQgc2VtYW50aWNzIGZvciBsb2NhbGx5IGNvbXB1dGVkIE5VTUVSSUNfQUREIChpbmNyZW1lbnQpXG4gKiB0cmFuc2Zvcm1zLiBDb252ZXJ0cyBhbGwgZmllbGQgdmFsdWVzIHRvIGludGVnZXJzIG9yIGRvdWJsZXMsIGJ1dCB1bmxpa2UgdGhlXG4gKiBiYWNrZW5kIGRvZXMgbm90IGNhcCBpbnRlZ2VyIHZhbHVlcyBhdCAyXjYzLiBJbnN0ZWFkLCBKYXZhU2NyaXB0IG51bWJlclxuICogYXJpdGhtZXRpYyBpcyB1c2VkIGFuZCBwcmVjaXNpb24gbG9zcyBjYW4gb2NjdXIgZm9yIHZhbHVlcyBncmVhdGVyIHRoYW4gMl41My5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfTnVtZXJpY0luY3JlbWVudFRyYW5zZm9ybU9wZXJhdGlvbiBleHRlbmRzIFRyYW5zZm9ybU9wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLnNlcmlhbGl6ZXIgPSBlLCB0aGlzLkFlID0gdDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGFzTnVtYmVyKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcihlLmludGVnZXJWYWx1ZSB8fCBlLmRvdWJsZVZhbHVlKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2NvZXJjZWRGaWVsZFZhbHVlc0FycmF5KGUpIHtcbiAgICByZXR1cm4gaXNBcnJheShlKSAmJiBlLmFycmF5VmFsdWUudmFsdWVzID8gZS5hcnJheVZhbHVlLnZhbHVlcy5zbGljZSgpIDogW107XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogQSBmaWVsZCBwYXRoIGFuZCB0aGUgVHJhbnNmb3JtT3BlcmF0aW9uIHRvIHBlcmZvcm0gdXBvbiBpdC4gKi8gY2xhc3MgRmllbGRUcmFuc2Zvcm0ge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5maWVsZCA9IGUsIHRoaXMudHJhbnNmb3JtID0gdDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9maWVsZFRyYW5zZm9ybUVxdWFscyhlLCB0KSB7XG4gICAgcmV0dXJuIGUuZmllbGQuaXNFcXVhbCh0LmZpZWxkKSAmJiBmdW5jdGlvbiBfX1BSSVZBVEVfdHJhbnNmb3JtT3BlcmF0aW9uRXF1YWxzKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBfX1BSSVZBVEVfQXJyYXlVbmlvblRyYW5zZm9ybU9wZXJhdGlvbiAmJiB0IGluc3RhbmNlb2YgX19QUklWQVRFX0FycmF5VW5pb25UcmFuc2Zvcm1PcGVyYXRpb24gfHwgZSBpbnN0YW5jZW9mIF9fUFJJVkFURV9BcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbiAmJiB0IGluc3RhbmNlb2YgX19QUklWQVRFX0FycmF5UmVtb3ZlVHJhbnNmb3JtT3BlcmF0aW9uID8gX19QUklWQVRFX2FycmF5RXF1YWxzKGUuZWxlbWVudHMsIHQuZWxlbWVudHMsIF9fUFJJVkFURV92YWx1ZUVxdWFscykgOiBlIGluc3RhbmNlb2YgX19QUklWQVRFX051bWVyaWNJbmNyZW1lbnRUcmFuc2Zvcm1PcGVyYXRpb24gJiYgdCBpbnN0YW5jZW9mIF9fUFJJVkFURV9OdW1lcmljSW5jcmVtZW50VHJhbnNmb3JtT3BlcmF0aW9uID8gX19QUklWQVRFX3ZhbHVlRXF1YWxzKGUuQWUsIHQuQWUpIDogZSBpbnN0YW5jZW9mIF9fUFJJVkFURV9TZXJ2ZXJUaW1lc3RhbXBUcmFuc2Zvcm0gJiYgdCBpbnN0YW5jZW9mIF9fUFJJVkFURV9TZXJ2ZXJUaW1lc3RhbXBUcmFuc2Zvcm07XG4gICAgfShlLnRyYW5zZm9ybSwgdC50cmFuc2Zvcm0pO1xufVxuXG4vKiogVGhlIHJlc3VsdCBvZiBzdWNjZXNzZnVsbHkgYXBwbHlpbmcgYSBtdXRhdGlvbiB0byB0aGUgYmFja2VuZC4gKi9cbmNsYXNzIE11dGF0aW9uUmVzdWx0IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgdmVyc2lvbiBhdCB3aGljaCB0aGUgbXV0YXRpb24gd2FzIGNvbW1pdHRlZDpcbiAgICAgKlxuICAgICAqIC0gRm9yIG1vc3Qgb3BlcmF0aW9ucywgdGhpcyBpcyB0aGUgdXBkYXRlVGltZSBpbiB0aGUgV3JpdGVSZXN1bHQuXG4gICAgICogLSBGb3IgZGVsZXRlcywgdGhlIGNvbW1pdFRpbWUgb2YgdGhlIFdyaXRlUmVzcG9uc2UgKGJlY2F1c2UgZGVsZXRlcyBhcmVcbiAgICAgKiAgIG5vdCBzdG9yZWQgYW5kIGhhdmUgbm8gdXBkYXRlVGltZSkuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgdGhlc2UgdmVyc2lvbnMgY2FuIGJlIGRpZmZlcmVudDogTm8tb3Agd3JpdGVzIHdpbGwgbm90IGNoYW5nZVxuICAgICAqIHRoZSB1cGRhdGVUaW1lIGV2ZW4gdGhvdWdoIHRoZSBjb21taXRUaW1lIGFkdmFuY2VzLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIFRoZSByZXN1bHRpbmcgZmllbGRzIHJldHVybmVkIGZyb20gdGhlIGJhY2tlbmQgYWZ0ZXIgYSBtdXRhdGlvblxuICAgICAqIGNvbnRhaW5pbmcgZmllbGQgdHJhbnNmb3JtcyBoYXMgYmVlbiBjb21taXR0ZWQuIENvbnRhaW5zIG9uZSBGaWVsZFZhbHVlXG4gICAgICogZm9yIGVhY2ggRmllbGRUcmFuc2Zvcm0gdGhhdCB3YXMgaW4gdGhlIG11dGF0aW9uLlxuICAgICAqXG4gICAgICogV2lsbCBiZSBlbXB0eSBpZiB0aGUgbXV0YXRpb24gZGlkIG5vdCBjb250YWluIGFueSBmaWVsZCB0cmFuc2Zvcm1zLlxuICAgICAqL1xuICAgIHQpIHtcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gZSwgdGhpcy50cmFuc2Zvcm1SZXN1bHRzID0gdDtcbiAgICB9XG59XG5cbi8qKlxuICogRW5jb2RlcyBhIHByZWNvbmRpdGlvbiBmb3IgYSBtdXRhdGlvbi4gVGhpcyBmb2xsb3dzIHRoZSBtb2RlbCB0aGF0IHRoZVxuICogYmFja2VuZCBhY2NlcHRzIHdpdGggdGhlIHNwZWNpYWwgY2FzZSBvZiBhbiBleHBsaWNpdCBcImVtcHR5XCIgcHJlY29uZGl0aW9uXG4gKiAobWVhbmluZyBubyBwcmVjb25kaXRpb24pLlxuICovIGNsYXNzIFByZWNvbmRpdGlvbiB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLnVwZGF0ZVRpbWUgPSBlLCB0aGlzLmV4aXN0cyA9IHQ7XG4gICAgfVxuICAgIC8qKiBDcmVhdGVzIGEgbmV3IGVtcHR5IFByZWNvbmRpdGlvbi4gKi8gICAgc3RhdGljIG5vbmUoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJlY29uZGl0aW9uO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlcyBhIG5ldyBQcmVjb25kaXRpb24gd2l0aCBhbiBleGlzdHMgZmxhZy4gKi8gICAgc3RhdGljIGV4aXN0cyhlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJlY29uZGl0aW9uKHZvaWQgMCwgZSk7XG4gICAgfVxuICAgIC8qKiBDcmVhdGVzIGEgbmV3IFByZWNvbmRpdGlvbiBiYXNlZCBvbiBhIHZlcnNpb24gYSBkb2N1bWVudCBleGlzdHMgYXQuICovICAgIHN0YXRpYyB1cGRhdGVUaW1lKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcmVjb25kaXRpb24oZSk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHdoZXRoZXIgdGhpcyBQcmVjb25kaXRpb24gaXMgZW1wdHkuICovICAgIGdldCBpc05vbmUoKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgPT09IHRoaXMudXBkYXRlVGltZSAmJiB2b2lkIDAgPT09IHRoaXMuZXhpc3RzO1xuICAgIH1cbiAgICBpc0VxdWFsKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXhpc3RzID09PSBlLmV4aXN0cyAmJiAodGhpcy51cGRhdGVUaW1lID8gISFlLnVwZGF0ZVRpbWUgJiYgdGhpcy51cGRhdGVUaW1lLmlzRXF1YWwoZS51cGRhdGVUaW1lKSA6ICFlLnVwZGF0ZVRpbWUpO1xuICAgIH1cbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcHJlY29uZGl0aW9ucyBpcyB2YWxpZCBmb3IgdGhlIGdpdmVuIGRvY3VtZW50LiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfcHJlY29uZGl0aW9uSXNWYWxpZEZvckRvY3VtZW50KGUsIHQpIHtcbiAgICByZXR1cm4gdm9pZCAwICE9PSBlLnVwZGF0ZVRpbWUgPyB0LmlzRm91bmREb2N1bWVudCgpICYmIHQudmVyc2lvbi5pc0VxdWFsKGUudXBkYXRlVGltZSkgOiB2b2lkIDAgPT09IGUuZXhpc3RzIHx8IGUuZXhpc3RzID09PSB0LmlzRm91bmREb2N1bWVudCgpO1xufVxuXG4vKipcbiAqIEEgbXV0YXRpb24gZGVzY3JpYmVzIGEgc2VsZi1jb250YWluZWQgY2hhbmdlIHRvIGEgZG9jdW1lbnQuIE11dGF0aW9ucyBjYW5cbiAqIGNyZWF0ZSwgcmVwbGFjZSwgZGVsZXRlLCBhbmQgdXBkYXRlIHN1YnNldHMgb2YgZG9jdW1lbnRzLlxuICpcbiAqIE11dGF0aW9ucyBub3Qgb25seSBhY3Qgb24gdGhlIHZhbHVlIG9mIHRoZSBkb2N1bWVudCBidXQgYWxzbyBpdHMgdmVyc2lvbi5cbiAqXG4gKiBGb3IgbG9jYWwgbXV0YXRpb25zIChtdXRhdGlvbnMgdGhhdCBoYXZlbid0IGJlZW4gY29tbWl0dGVkIHlldCksIHdlIHByZXNlcnZlXG4gKiB0aGUgZXhpc3RpbmcgdmVyc2lvbiBmb3IgU2V0IGFuZCBQYXRjaCBtdXRhdGlvbnMuIEZvciBEZWxldGUgbXV0YXRpb25zLCB3ZVxuICogcmVzZXQgdGhlIHZlcnNpb24gdG8gMC5cbiAqXG4gKiBIZXJlJ3MgdGhlIGV4cGVjdGVkIHRyYW5zaXRpb24gdGFibGUuXG4gKlxuICogTVVUQVRJT04gICAgICAgICAgIEFQUExJRUQgVE8gICAgICAgICAgICBSRVNVTFRTIElOXG4gKlxuICogU2V0TXV0YXRpb24gICAgICAgIERvY3VtZW50KHYzKSAgICAgICAgICBEb2N1bWVudCh2MylcbiAqIFNldE11dGF0aW9uICAgICAgICBOb0RvY3VtZW50KHYzKSAgICAgICAgRG9jdW1lbnQodjApXG4gKiBTZXRNdXRhdGlvbiAgICAgICAgSW52YWxpZERvY3VtZW50KHYwKSAgIERvY3VtZW50KHYwKVxuICogUGF0Y2hNdXRhdGlvbiAgICAgIERvY3VtZW50KHYzKSAgICAgICAgICBEb2N1bWVudCh2MylcbiAqIFBhdGNoTXV0YXRpb24gICAgICBOb0RvY3VtZW50KHYzKSAgICAgICAgTm9Eb2N1bWVudCh2MylcbiAqIFBhdGNoTXV0YXRpb24gICAgICBJbnZhbGlkRG9jdW1lbnQodjApICAgVW5rbm93bkRvY3VtZW50KHYzKVxuICogRGVsZXRlTXV0YXRpb24gICAgIERvY3VtZW50KHYzKSAgICAgICAgICBOb0RvY3VtZW50KHYwKVxuICogRGVsZXRlTXV0YXRpb24gICAgIE5vRG9jdW1lbnQodjMpICAgICAgICBOb0RvY3VtZW50KHYwKVxuICogRGVsZXRlTXV0YXRpb24gICAgIEludmFsaWREb2N1bWVudCh2MCkgICBOb0RvY3VtZW50KHYwKVxuICpcbiAqIEZvciBhY2tub3dsZWRnZWQgbXV0YXRpb25zLCB3ZSB1c2UgdGhlIHVwZGF0ZVRpbWUgb2YgdGhlIFdyaXRlUmVzcG9uc2UgYXNcbiAqIHRoZSByZXN1bHRpbmcgdmVyc2lvbiBmb3IgU2V0IGFuZCBQYXRjaCBtdXRhdGlvbnMuIEFzIGRlbGV0ZXMgaGF2ZSBub1xuICogZXhwbGljaXQgdXBkYXRlIHRpbWUsIHdlIHVzZSB0aGUgY29tbWl0VGltZSBvZiB0aGUgV3JpdGVSZXNwb25zZSBmb3JcbiAqIERlbGV0ZSBtdXRhdGlvbnMuXG4gKlxuICogSWYgYSBtdXRhdGlvbiBpcyBhY2tub3dsZWRnZWQgYnkgdGhlIGJhY2tlbmQgYnV0IGZhaWxzIHRoZSBwcmVjb25kaXRpb24gY2hlY2tcbiAqIGxvY2FsbHksIHdlIHRyYW5zaXRpb24gdG8gYW4gYFVua25vd25Eb2N1bWVudGAgYW5kIHJlbHkgb24gV2F0Y2ggdG8gc2VuZCB1c1xuICogdGhlIHVwZGF0ZWQgdmVyc2lvbi5cbiAqXG4gKiBGaWVsZCB0cmFuc2Zvcm1zIGFyZSB1c2VkIG9ubHkgd2l0aCBQYXRjaCBhbmQgU2V0IE11dGF0aW9ucy4gV2UgdXNlIHRoZVxuICogYHVwZGF0ZVRyYW5zZm9ybXNgIG1lc3NhZ2UgdG8gc3RvcmUgdHJhbnNmb3JtcywgcmF0aGVyIHRoYW4gdGhlIGB0cmFuc2Zvcm1zYHNcbiAqIG1lc3NhZ2VzLlxuICpcbiAqICMjIFN1YmNsYXNzaW5nIE5vdGVzXG4gKlxuICogRXZlcnkgdHlwZSBvZiBtdXRhdGlvbiBuZWVkcyB0byBpbXBsZW1lbnQgaXRzIG93biBhcHBseVRvUmVtb3RlRG9jdW1lbnQoKSBhbmRcbiAqIGFwcGx5VG9Mb2NhbFZpZXcoKSB0byBpbXBsZW1lbnQgdGhlIGFjdHVhbCBiZWhhdmlvciBvZiBhcHBseWluZyB0aGUgbXV0YXRpb25cbiAqIHRvIHNvbWUgc291cmNlIGRvY3VtZW50IChzZWUgYHNldE11dGF0aW9uQXBwbHlUb1JlbW90ZURvY3VtZW50KClgIGZvciBhblxuICogZXhhbXBsZSkuXG4gKi8gY2xhc3MgTXV0YXRpb24ge31cblxuLyoqXG4gKiBBIHV0aWxpdHkgbWV0aG9kIHRvIGNhbGN1bGF0ZSBhIGBNdXRhdGlvbmAgcmVwcmVzZW50aW5nIHRoZSBvdmVybGF5IGZyb20gdGhlXG4gKiBmaW5hbCBzdGF0ZSBvZiB0aGUgZG9jdW1lbnQsIGFuZCBhIGBGaWVsZE1hc2tgIHJlcHJlc2VudGluZyB0aGUgZmllbGRzIHRoYXRcbiAqIGFyZSBtdXRhdGVkIGJ5IHRoZSBsb2NhbCBtdXRhdGlvbnMuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2NhbGN1bGF0ZU92ZXJsYXlNdXRhdGlvbihlLCB0KSB7XG4gICAgaWYgKCFlLmhhc0xvY2FsTXV0YXRpb25zIHx8IHQgJiYgMCA9PT0gdC5maWVsZHMubGVuZ3RoKSByZXR1cm4gbnVsbDtcbiAgICAvLyBtYXNrIGlzIG51bGwgd2hlbiBzZXRzIG9yIGRlbGV0ZXMgYXJlIGFwcGxpZWQgdG8gdGhlIGN1cnJlbnQgZG9jdW1lbnQuXG4gICAgICAgIGlmIChudWxsID09PSB0KSByZXR1cm4gZS5pc05vRG9jdW1lbnQoKSA/IG5ldyBfX1BSSVZBVEVfRGVsZXRlTXV0YXRpb24oZS5rZXksIFByZWNvbmRpdGlvbi5ub25lKCkpIDogbmV3IF9fUFJJVkFURV9TZXRNdXRhdGlvbihlLmtleSwgZS5kYXRhLCBQcmVjb25kaXRpb24ubm9uZSgpKTtcbiAgICB7XG4gICAgICAgIGNvbnN0IG4gPSBlLmRhdGEsIHIgPSBPYmplY3RWYWx1ZS5lbXB0eSgpO1xuICAgICAgICBsZXQgaSA9IG5ldyBTb3J0ZWRTZXQoRmllbGRQYXRoJDEuY29tcGFyYXRvcik7XG4gICAgICAgIGZvciAobGV0IGUgb2YgdC5maWVsZHMpIGlmICghaS5oYXMoZSkpIHtcbiAgICAgICAgICAgIGxldCB0ID0gbi5maWVsZChlKTtcbiAgICAgICAgICAgIC8vIElmIHdlIGFyZSBkZWxldGluZyBhIG5lc3RlZCBmaWVsZCwgd2UgdGFrZSB0aGUgaW1tZWRpYXRlIHBhcmVudCBhc1xuICAgICAgICAgICAgLy8gdGhlIG1hc2sgdXNlZCB0byBjb25zdHJ1Y3QgdGhlIHJlc3VsdGluZyBtdXRhdGlvbi5cbiAgICAgICAgICAgIC8vIEp1c3RpZmljYXRpb246IE5lc3RlZCBmaWVsZHMgY2FuIGNyZWF0ZSBwYXJlbnQgZmllbGRzIGltcGxpY2l0bHkuIElmXG4gICAgICAgICAgICAvLyBvbmx5IGEgbGVhZiBlbnRyeSBpcyBkZWxldGVkIGluIGxhdGVyIG11dGF0aW9ucywgdGhlIHBhcmVudCBmaWVsZFxuICAgICAgICAgICAgLy8gc2hvdWxkIHN0aWxsIHJlbWFpbiwgYnV0IHdlIG1heSBoYXZlIGxvc3QgdGhpcyBpbmZvcm1hdGlvbi5cbiAgICAgICAgICAgIC8vIENvbnNpZGVyIG11dGF0aW9uIChmb28uYmFyIDEpLCB0aGVuIG11dGF0aW9uIChmb28uYmFyIGRlbGV0ZSgpKS5cbiAgICAgICAgICAgIC8vIFRoaXMgbGVhdmVzIHRoZSBmaW5hbCByZXN1bHQgKGZvbywge30pLiBEZXNwaXRlIHRoZSBmYWN0IHRoYXQgYGRvY2BcbiAgICAgICAgICAgIC8vIGhhcyB0aGUgY29ycmVjdCByZXN1bHQsIGBmb29gIGlzIG5vdCBpbiBgbWFza2AsIGFuZCB0aGUgcmVzdWx0aW5nXG4gICAgICAgICAgICAvLyBtdXRhdGlvbiB3b3VsZCBtaXNzIGBmb29gLlxuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCA9PT0gdCAmJiBlLmxlbmd0aCA+IDEgJiYgKGUgPSBlLnBvcExhc3QoKSwgdCA9IG4uZmllbGQoZSkpLCBudWxsID09PSB0ID8gci5kZWxldGUoZSkgOiByLnNldChlLCB0KSwgXG4gICAgICAgICAgICBpID0gaS5hZGQoZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfUGF0Y2hNdXRhdGlvbihlLmtleSwgciwgbmV3IEZpZWxkTWFzayhpLnRvQXJyYXkoKSksIFByZWNvbmRpdGlvbi5ub25lKCkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBcHBsaWVzIHRoaXMgbXV0YXRpb24gdG8gdGhlIGdpdmVuIGRvY3VtZW50IGZvciB0aGUgcHVycG9zZXMgb2YgY29tcHV0aW5nIGFcbiAqIG5ldyByZW1vdGUgZG9jdW1lbnQuIElmIHRoZSBpbnB1dCBkb2N1bWVudCBkb2Vzbid0IG1hdGNoIHRoZSBleHBlY3RlZCBzdGF0ZVxuICogKGUuZy4gaXQgaXMgaW52YWxpZCBvciBvdXRkYXRlZCksIHRoZSBkb2N1bWVudCB0eXBlIG1heSB0cmFuc2l0aW9uIHRvXG4gKiB1bmtub3duLlxuICpcbiAqIEBwYXJhbSBtdXRhdGlvbiAtIFRoZSBtdXRhdGlvbiB0byBhcHBseS5cbiAqIEBwYXJhbSBkb2N1bWVudCAtIFRoZSBkb2N1bWVudCB0byBtdXRhdGUuIFRoZSBpbnB1dCBkb2N1bWVudCBjYW4gYmUgYW5cbiAqICAgICBpbnZhbGlkIGRvY3VtZW50IGlmIHRoZSBjbGllbnQgaGFzIG5vIGtub3dsZWRnZSBvZiB0aGUgcHJlLW11dGF0aW9uIHN0YXRlXG4gKiAgICAgb2YgdGhlIGRvY3VtZW50LlxuICogQHBhcmFtIG11dGF0aW9uUmVzdWx0IC0gVGhlIHJlc3VsdCBvZiBhcHBseWluZyB0aGUgbXV0YXRpb24gZnJvbSB0aGUgYmFja2VuZC5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfbXV0YXRpb25BcHBseVRvUmVtb3RlRG9jdW1lbnQoZSwgdCwgbikge1xuICAgIGUgaW5zdGFuY2VvZiBfX1BSSVZBVEVfU2V0TXV0YXRpb24gPyBmdW5jdGlvbiBfX1BSSVZBVEVfc2V0TXV0YXRpb25BcHBseVRvUmVtb3RlRG9jdW1lbnQoZSwgdCwgbikge1xuICAgICAgICAvLyBVbmxpa2Ugc2V0TXV0YXRpb25BcHBseVRvTG9jYWxWaWV3LCBpZiB3ZSdyZSBhcHBseWluZyBhIG11dGF0aW9uIHRvIGFcbiAgICAgICAgLy8gcmVtb3RlIGRvY3VtZW50IHRoZSBzZXJ2ZXIgaGFzIGFjY2VwdGVkIHRoZSBtdXRhdGlvbiBzbyB0aGUgcHJlY29uZGl0aW9uXG4gICAgICAgIC8vIG11c3QgaGF2ZSBoZWxkLlxuICAgICAgICBjb25zdCByID0gZS52YWx1ZS5jbG9uZSgpLCBpID0gX19QUklWQVRFX3NlcnZlclRyYW5zZm9ybVJlc3VsdHMoZS5maWVsZFRyYW5zZm9ybXMsIHQsIG4udHJhbnNmb3JtUmVzdWx0cyk7XG4gICAgICAgIHIuc2V0QWxsKGkpLCB0LmNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQobi52ZXJzaW9uLCByKS5zZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMoKTtcbiAgICB9KGUsIHQsIG4pIDogZSBpbnN0YW5jZW9mIF9fUFJJVkFURV9QYXRjaE11dGF0aW9uID8gZnVuY3Rpb24gX19QUklWQVRFX3BhdGNoTXV0YXRpb25BcHBseVRvUmVtb3RlRG9jdW1lbnQoZSwgdCwgbikge1xuICAgICAgICBpZiAoIV9fUFJJVkFURV9wcmVjb25kaXRpb25Jc1ZhbGlkRm9yRG9jdW1lbnQoZS5wcmVjb25kaXRpb24sIHQpKSBcbiAgICAgICAgLy8gU2luY2UgdGhlIG11dGF0aW9uIHdhcyBub3QgcmVqZWN0ZWQsIHdlIGtub3cgdGhhdCB0aGUgcHJlY29uZGl0aW9uXG4gICAgICAgIC8vIG1hdGNoZWQgb24gdGhlIGJhY2tlbmQuIFdlIHRoZXJlZm9yZSBtdXN0IG5vdCBoYXZlIHRoZSBleHBlY3RlZCB2ZXJzaW9uXG4gICAgICAgIC8vIG9mIHRoZSBkb2N1bWVudCBpbiBvdXIgY2FjaGUgYW5kIGNvbnZlcnQgdG8gYW4gVW5rbm93bkRvY3VtZW50IHdpdGggYVxuICAgICAgICAvLyBrbm93biB1cGRhdGVUaW1lLlxuICAgICAgICByZXR1cm4gdm9pZCB0LmNvbnZlcnRUb1Vua25vd25Eb2N1bWVudChuLnZlcnNpb24pO1xuICAgICAgICBjb25zdCByID0gX19QUklWQVRFX3NlcnZlclRyYW5zZm9ybVJlc3VsdHMoZS5maWVsZFRyYW5zZm9ybXMsIHQsIG4udHJhbnNmb3JtUmVzdWx0cyksIGkgPSB0LmRhdGE7XG4gICAgICAgIGkuc2V0QWxsKF9fUFJJVkFURV9nZXRQYXRjaChlKSksIGkuc2V0QWxsKHIpLCB0LmNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQobi52ZXJzaW9uLCBpKS5zZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMoKTtcbiAgICB9KGUsIHQsIG4pIDogZnVuY3Rpb24gX19QUklWQVRFX2RlbGV0ZU11dGF0aW9uQXBwbHlUb1JlbW90ZURvY3VtZW50KGUsIHQsIG4pIHtcbiAgICAgICAgLy8gVW5saWtlIGFwcGx5VG9Mb2NhbFZpZXcsIGlmIHdlJ3JlIGFwcGx5aW5nIGEgbXV0YXRpb24gdG8gYSByZW1vdGVcbiAgICAgICAgLy8gZG9jdW1lbnQgdGhlIHNlcnZlciBoYXMgYWNjZXB0ZWQgdGhlIG11dGF0aW9uIHNvIHRoZSBwcmVjb25kaXRpb24gbXVzdFxuICAgICAgICAvLyBoYXZlIGhlbGQuXG4gICAgICAgIHQuY29udmVydFRvTm9Eb2N1bWVudChuLnZlcnNpb24pLnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpO1xuICAgIH0oMCwgdCwgbik7XG59XG5cbi8qKlxuICogQXBwbGllcyB0aGlzIG11dGF0aW9uIHRvIHRoZSBnaXZlbiBkb2N1bWVudCBmb3IgdGhlIHB1cnBvc2VzIG9mIGNvbXB1dGluZ1xuICogdGhlIG5ldyBsb2NhbCB2aWV3IG9mIGEgZG9jdW1lbnQuIElmIHRoZSBpbnB1dCBkb2N1bWVudCBkb2Vzbid0IG1hdGNoIHRoZVxuICogZXhwZWN0ZWQgc3RhdGUsIHRoZSBkb2N1bWVudCBpcyBub3QgbW9kaWZpZWQuXG4gKlxuICogQHBhcmFtIG11dGF0aW9uIC0gVGhlIG11dGF0aW9uIHRvIGFwcGx5LlxuICogQHBhcmFtIGRvY3VtZW50IC0gVGhlIGRvY3VtZW50IHRvIG11dGF0ZS4gVGhlIGlucHV0IGRvY3VtZW50IGNhbiBiZSBhblxuICogICAgIGludmFsaWQgZG9jdW1lbnQgaWYgdGhlIGNsaWVudCBoYXMgbm8ga25vd2xlZGdlIG9mIHRoZSBwcmUtbXV0YXRpb24gc3RhdGVcbiAqICAgICBvZiB0aGUgZG9jdW1lbnQuXG4gKiBAcGFyYW0gcHJldmlvdXNNYXNrIC0gVGhlIGZpZWxkcyB0aGF0IGhhdmUgYmVlbiB1cGRhdGVkIGJlZm9yZSBhcHBseWluZyB0aGlzIG11dGF0aW9uLlxuICogQHBhcmFtIGxvY2FsV3JpdGVUaW1lIC0gQSB0aW1lc3RhbXAgaW5kaWNhdGluZyB0aGUgbG9jYWwgd3JpdGUgdGltZSBvZiB0aGVcbiAqICAgICBiYXRjaCB0aGlzIG11dGF0aW9uIGlzIGEgcGFydCBvZi5cbiAqIEByZXR1cm5zIEEgYEZpZWxkTWFza2AgcmVwcmVzZW50aW5nIHRoZSBmaWVsZHMgdGhhdCBhcmUgY2hhbmdlZCBieSBhcHBseWluZyB0aGlzIG11dGF0aW9uLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9tdXRhdGlvbkFwcGx5VG9Mb2NhbFZpZXcoZSwgdCwgbiwgcikge1xuICAgIHJldHVybiBlIGluc3RhbmNlb2YgX19QUklWQVRFX1NldE11dGF0aW9uID8gZnVuY3Rpb24gX19QUklWQVRFX3NldE11dGF0aW9uQXBwbHlUb0xvY2FsVmlldyhlLCB0LCBuLCByKSB7XG4gICAgICAgIGlmICghX19QUklWQVRFX3ByZWNvbmRpdGlvbklzVmFsaWRGb3JEb2N1bWVudChlLnByZWNvbmRpdGlvbiwgdCkpIFxuICAgICAgICAvLyBUaGUgbXV0YXRpb24gZmFpbGVkIHRvIGFwcGx5IChlLmcuIGEgZG9jdW1lbnQgSUQgY3JlYXRlZCB3aXRoIGFkZCgpXG4gICAgICAgIC8vIGNhdXNlZCBhIG5hbWUgY29sbGlzaW9uKS5cbiAgICAgICAgcmV0dXJuIG47XG4gICAgICAgIGNvbnN0IGkgPSBlLnZhbHVlLmNsb25lKCksIHMgPSBfX1BSSVZBVEVfbG9jYWxUcmFuc2Zvcm1SZXN1bHRzKGUuZmllbGRUcmFuc2Zvcm1zLCByLCB0KTtcbiAgICAgICAgcmV0dXJuIGkuc2V0QWxsKHMpLCB0LmNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQodC52ZXJzaW9uLCBpKS5zZXRIYXNMb2NhbE11dGF0aW9ucygpLCBcbiAgICAgICAgbnVsbDtcbiAvLyBTZXRNdXRhdGlvbiBvdmVyd3JpdGVzIGFsbCBmaWVsZHMuXG4gICAgICAgIH1cbiAgICAvKipcbiAqIEEgbXV0YXRpb24gdGhhdCBtb2RpZmllcyBmaWVsZHMgb2YgdGhlIGRvY3VtZW50IGF0IHRoZSBnaXZlbiBrZXkgd2l0aCB0aGVcbiAqIGdpdmVuIHZhbHVlcy4gVGhlIHZhbHVlcyBhcmUgYXBwbGllZCB0aHJvdWdoIGEgZmllbGQgbWFzazpcbiAqXG4gKiAgKiBXaGVuIGEgZmllbGQgaXMgaW4gYm90aCB0aGUgbWFzayBhbmQgdGhlIHZhbHVlcywgdGhlIGNvcnJlc3BvbmRpbmcgZmllbGRcbiAqICAgIGlzIHVwZGF0ZWQuXG4gKiAgKiBXaGVuIGEgZmllbGQgaXMgaW4gbmVpdGhlciB0aGUgbWFzayBub3IgdGhlIHZhbHVlcywgdGhlIGNvcnJlc3BvbmRpbmdcbiAqICAgIGZpZWxkIGlzIHVubW9kaWZpZWQuXG4gKiAgKiBXaGVuIGEgZmllbGQgaXMgaW4gdGhlIG1hc2sgYnV0IG5vdCBpbiB0aGUgdmFsdWVzLCB0aGUgY29ycmVzcG9uZGluZyBmaWVsZFxuICogICAgaXMgZGVsZXRlZC5cbiAqICAqIFdoZW4gYSBmaWVsZCBpcyBub3QgaW4gdGhlIG1hc2sgYnV0IGlzIGluIHRoZSB2YWx1ZXMsIHRoZSB2YWx1ZXMgbWFwIGlzXG4gKiAgICBpZ25vcmVkLlxuICovIChlLCB0LCBuLCByKSA6IGUgaW5zdGFuY2VvZiBfX1BSSVZBVEVfUGF0Y2hNdXRhdGlvbiA/IGZ1bmN0aW9uIF9fUFJJVkFURV9wYXRjaE11dGF0aW9uQXBwbHlUb0xvY2FsVmlldyhlLCB0LCBuLCByKSB7XG4gICAgICAgIGlmICghX19QUklWQVRFX3ByZWNvbmRpdGlvbklzVmFsaWRGb3JEb2N1bWVudChlLnByZWNvbmRpdGlvbiwgdCkpIHJldHVybiBuO1xuICAgICAgICBjb25zdCBpID0gX19QUklWQVRFX2xvY2FsVHJhbnNmb3JtUmVzdWx0cyhlLmZpZWxkVHJhbnNmb3JtcywgciwgdCksIHMgPSB0LmRhdGE7XG4gICAgICAgIGlmIChzLnNldEFsbChfX1BSSVZBVEVfZ2V0UGF0Y2goZSkpLCBzLnNldEFsbChpKSwgdC5jb252ZXJ0VG9Gb3VuZERvY3VtZW50KHQudmVyc2lvbiwgcykuc2V0SGFzTG9jYWxNdXRhdGlvbnMoKSwgXG4gICAgICAgIG51bGwgPT09IG4pIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4gbi51bmlvbldpdGgoZS5maWVsZE1hc2suZmllbGRzKS51bmlvbldpdGgoZS5maWVsZFRyYW5zZm9ybXMubWFwKChlID0+IGUuZmllbGQpKSk7XG4gICAgfVxuICAgIC8qKlxuICogUmV0dXJucyBhIEZpZWxkUGF0aC9WYWx1ZSBtYXAgd2l0aCB0aGUgY29udGVudCBvZiB0aGUgUGF0Y2hNdXRhdGlvbi5cbiAqLyAoZSwgdCwgbiwgcikgOiBmdW5jdGlvbiBfX1BSSVZBVEVfZGVsZXRlTXV0YXRpb25BcHBseVRvTG9jYWxWaWV3KGUsIHQsIG4pIHtcbiAgICAgICAgaWYgKF9fUFJJVkFURV9wcmVjb25kaXRpb25Jc1ZhbGlkRm9yRG9jdW1lbnQoZS5wcmVjb25kaXRpb24sIHQpKSByZXR1cm4gdC5jb252ZXJ0VG9Ob0RvY3VtZW50KHQudmVyc2lvbikuc2V0SGFzTG9jYWxNdXRhdGlvbnMoKSwgXG4gICAgICAgIG51bGw7XG4gICAgICAgIHJldHVybiBuO1xuICAgIH1cbiAgICAvKipcbiAqIEEgbXV0YXRpb24gdGhhdCB2ZXJpZmllcyB0aGUgZXhpc3RlbmNlIG9mIHRoZSBkb2N1bWVudCBhdCB0aGUgZ2l2ZW4ga2V5IHdpdGhcbiAqIHRoZSBwcm92aWRlZCBwcmVjb25kaXRpb24uXG4gKlxuICogVGhlIGB2ZXJpZnlgIG9wZXJhdGlvbiBpcyBvbmx5IHVzZWQgaW4gVHJhbnNhY3Rpb25zLCBhbmQgdGhpcyBjbGFzcyBzZXJ2ZXNcbiAqIHByaW1hcmlseSB0byBmYWNpbGl0YXRlIHNlcmlhbGl6YXRpb24gaW50byBwcm90b3MuXG4gKi8gKGUsIHQsIG4pO1xufVxuXG4vKipcbiAqIElmIHRoaXMgbXV0YXRpb24gaXMgbm90IGlkZW1wb3RlbnQsIHJldHVybnMgdGhlIGJhc2UgdmFsdWUgdG8gcGVyc2lzdCB3aXRoXG4gKiB0aGlzIG11dGF0aW9uLiBJZiBhIGJhc2UgdmFsdWUgaXMgcmV0dXJuZWQsIHRoZSBtdXRhdGlvbiBpcyBhbHdheXMgYXBwbGllZFxuICogdG8gdGhpcyBiYXNlIHZhbHVlLCBldmVuIGlmIGRvY3VtZW50IGhhcyBhbHJlYWR5IGJlZW4gdXBkYXRlZC5cbiAqXG4gKiBUaGUgYmFzZSB2YWx1ZSBpcyBhIHNwYXJzZSBvYmplY3QgdGhhdCBjb25zaXN0cyBvZiBvbmx5IHRoZSBkb2N1bWVudFxuICogZmllbGRzIGZvciB3aGljaCB0aGlzIG11dGF0aW9uIGNvbnRhaW5zIGEgbm9uLWlkZW1wb3RlbnQgdHJhbnNmb3JtYXRpb25cbiAqIChlLmcuIGEgbnVtZXJpYyBpbmNyZW1lbnQpLiBUaGUgcHJvdmlkZWQgdmFsdWUgZ3VhcmFudGVlcyBjb25zaXN0ZW50XG4gKiBiZWhhdmlvciBmb3Igbm9uLWlkZW1wb3RlbnQgdHJhbnNmb3JtcyBhbmQgYWxsb3cgdXMgdG8gcmV0dXJuIHRoZSBzYW1lXG4gKiBsYXRlbmN5LWNvbXBlbnNhdGVkIHZhbHVlIGV2ZW4gaWYgdGhlIGJhY2tlbmQgaGFzIGFscmVhZHkgYXBwbGllZCB0aGVcbiAqIG11dGF0aW9uLiBUaGUgYmFzZSB2YWx1ZSBpcyBudWxsIGZvciBpZGVtcG90ZW50IG11dGF0aW9ucywgYXMgdGhleSBjYW4gYmVcbiAqIHJlLXBsYXllZCBldmVuIGlmIHRoZSBiYWNrZW5kIGhhcyBhbHJlYWR5IGFwcGxpZWQgdGhlbS5cbiAqXG4gKiBAcmV0dXJucyBhIGJhc2UgdmFsdWUgdG8gc3RvcmUgYWxvbmcgd2l0aCB0aGUgbXV0YXRpb24sIG9yIG51bGwgZm9yXG4gKiBpZGVtcG90ZW50IG11dGF0aW9ucy5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfbXV0YXRpb25FeHRyYWN0QmFzZVZhbHVlKGUsIHQpIHtcbiAgICBsZXQgbiA9IG51bGw7XG4gICAgZm9yIChjb25zdCByIG9mIGUuZmllbGRUcmFuc2Zvcm1zKSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LmRhdGEuZmllbGQoci5maWVsZCksIGkgPSBfX1BSSVZBVEVfY29tcHV0ZVRyYW5zZm9ybU9wZXJhdGlvbkJhc2VWYWx1ZShyLnRyYW5zZm9ybSwgZSB8fCBudWxsKTtcbiAgICAgICAgbnVsbCAhPSBpICYmIChudWxsID09PSBuICYmIChuID0gT2JqZWN0VmFsdWUuZW1wdHkoKSksIG4uc2V0KHIuZmllbGQsIGkpKTtcbiAgICB9XG4gICAgcmV0dXJuIG4gfHwgbnVsbDtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX211dGF0aW9uRXF1YWxzKGUsIHQpIHtcbiAgICByZXR1cm4gZS50eXBlID09PSB0LnR5cGUgJiYgKCEhZS5rZXkuaXNFcXVhbCh0LmtleSkgJiYgKCEhZS5wcmVjb25kaXRpb24uaXNFcXVhbCh0LnByZWNvbmRpdGlvbikgJiYgKCEhZnVuY3Rpb24gX19QUklWQVRFX2ZpZWxkVHJhbnNmb3Jtc0FyZUVxdWFsKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gZSAmJiB2b2lkIDAgPT09IHQgfHwgISghZSB8fCAhdCkgJiYgX19QUklWQVRFX2FycmF5RXF1YWxzKGUsIHQsICgoZSwgdCkgPT4gX19QUklWQVRFX2ZpZWxkVHJhbnNmb3JtRXF1YWxzKGUsIHQpKSk7XG4gICAgfShlLmZpZWxkVHJhbnNmb3JtcywgdC5maWVsZFRyYW5zZm9ybXMpICYmICgwIC8qIE11dGF0aW9uVHlwZS5TZXQgKi8gPT09IGUudHlwZSA/IGUudmFsdWUuaXNFcXVhbCh0LnZhbHVlKSA6IDEgLyogTXV0YXRpb25UeXBlLlBhdGNoICovICE9PSBlLnR5cGUgfHwgZS5kYXRhLmlzRXF1YWwodC5kYXRhKSAmJiBlLmZpZWxkTWFzay5pc0VxdWFsKHQuZmllbGRNYXNrKSkpKSk7XG59XG5cbi8qKlxuICogQSBtdXRhdGlvbiB0aGF0IGNyZWF0ZXMgb3IgcmVwbGFjZXMgdGhlIGRvY3VtZW50IGF0IHRoZSBnaXZlbiBrZXkgd2l0aCB0aGVcbiAqIG9iamVjdCB2YWx1ZSBjb250ZW50cy5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfU2V0TXV0YXRpb24gZXh0ZW5kcyBNdXRhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgciA9IFtdKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMua2V5ID0gZSwgdGhpcy52YWx1ZSA9IHQsIHRoaXMucHJlY29uZGl0aW9uID0gbiwgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSByLCBcbiAgICAgICAgdGhpcy50eXBlID0gMCAvKiBNdXRhdGlvblR5cGUuU2V0ICovO1xuICAgIH1cbiAgICBnZXRGaWVsZE1hc2soKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cblxuY2xhc3MgX19QUklWQVRFX1BhdGNoTXV0YXRpb24gZXh0ZW5kcyBNdXRhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgciwgaSA9IFtdKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMua2V5ID0gZSwgdGhpcy5kYXRhID0gdCwgdGhpcy5maWVsZE1hc2sgPSBuLCB0aGlzLnByZWNvbmRpdGlvbiA9IHIsIFxuICAgICAgICB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IGksIHRoaXMudHlwZSA9IDEgLyogTXV0YXRpb25UeXBlLlBhdGNoICovO1xuICAgIH1cbiAgICBnZXRGaWVsZE1hc2soKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpZWxkTWFzaztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9nZXRQYXRjaChlKSB7XG4gICAgY29uc3QgdCA9IG5ldyBNYXA7XG4gICAgcmV0dXJuIGUuZmllbGRNYXNrLmZpZWxkcy5mb3JFYWNoKChuID0+IHtcbiAgICAgICAgaWYgKCFuLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgY29uc3QgciA9IGUuZGF0YS5maWVsZChuKTtcbiAgICAgICAgICAgIHQuc2V0KG4sIHIpO1xuICAgICAgICB9XG4gICAgfSkpLCB0O1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBsaXN0IG9mIFwidHJhbnNmb3JtIHJlc3VsdHNcIiAoYSB0cmFuc2Zvcm0gcmVzdWx0IGlzIGEgZmllbGQgdmFsdWVcbiAqIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIGEgdHJhbnNmb3JtKSBmb3IgdXNlIGFmdGVyIGEgbXV0YXRpb25cbiAqIGNvbnRhaW5pbmcgdHJhbnNmb3JtcyBoYXMgYmVlbiBhY2tub3dsZWRnZWQgYnkgdGhlIHNlcnZlci5cbiAqXG4gKiBAcGFyYW0gZmllbGRUcmFuc2Zvcm1zIC0gVGhlIGZpZWxkIHRyYW5zZm9ybXMgdG8gYXBwbHkgdGhlIHJlc3VsdCB0by5cbiAqIEBwYXJhbSBtdXRhYmxlRG9jdW1lbnQgLSBUaGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgZG9jdW1lbnQgYWZ0ZXIgYXBwbHlpbmcgYWxsXG4gKiBwcmV2aW91cyBtdXRhdGlvbnMuXG4gKiBAcGFyYW0gc2VydmVyVHJhbnNmb3JtUmVzdWx0cyAtIFRoZSB0cmFuc2Zvcm0gcmVzdWx0cyByZWNlaXZlZCBieSB0aGUgc2VydmVyLlxuICogQHJldHVybnMgVGhlIHRyYW5zZm9ybSByZXN1bHRzIGxpc3QuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3NlcnZlclRyYW5zZm9ybVJlc3VsdHMoZSwgdCwgbikge1xuICAgIGNvbnN0IHIgPSBuZXcgTWFwO1xuICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KGUubGVuZ3RoID09PSBuLmxlbmd0aCwgMzI2NTYsIHtcbiAgICAgICAgUmU6IG4ubGVuZ3RoLFxuICAgICAgICBWZTogZS5sZW5ndGhcbiAgICB9KTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgcyA9IGVbaV0sIG8gPSBzLnRyYW5zZm9ybSwgXyA9IHQuZGF0YS5maWVsZChzLmZpZWxkKTtcbiAgICAgICAgci5zZXQocy5maWVsZCwgX19QUklWQVRFX2FwcGx5VHJhbnNmb3JtT3BlcmF0aW9uVG9SZW1vdGVEb2N1bWVudChvLCBfLCBuW2ldKSk7XG4gICAgfVxuICAgIHJldHVybiByO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBsaXN0IG9mIFwidHJhbnNmb3JtIHJlc3VsdHNcIiAoYSB0cmFuc2Zvcm0gcmVzdWx0IGlzIGEgZmllbGQgdmFsdWVcbiAqIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIGEgdHJhbnNmb3JtKSBmb3IgdXNlIHdoZW4gYXBwbHlpbmcgYVxuICogdHJhbnNmb3JtIGxvY2FsbHkuXG4gKlxuICogQHBhcmFtIGZpZWxkVHJhbnNmb3JtcyAtIFRoZSBmaWVsZCB0cmFuc2Zvcm1zIHRvIGFwcGx5IHRoZSByZXN1bHQgdG8uXG4gKiBAcGFyYW0gbG9jYWxXcml0ZVRpbWUgLSBUaGUgbG9jYWwgdGltZSBvZiB0aGUgbXV0YXRpb24gKHVzZWQgdG9cbiAqICAgICBnZW5lcmF0ZSBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZXMpLlxuICogQHBhcmFtIG11dGFibGVEb2N1bWVudCAtIFRoZSBkb2N1bWVudCB0byBhcHBseSB0cmFuc2Zvcm1zIG9uLlxuICogQHJldHVybnMgVGhlIHRyYW5zZm9ybSByZXN1bHRzIGxpc3QuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsVHJhbnNmb3JtUmVzdWx0cyhlLCB0LCBuKSB7XG4gICAgY29uc3QgciA9IG5ldyBNYXA7XG4gICAgZm9yIChjb25zdCBpIG9mIGUpIHtcbiAgICAgICAgY29uc3QgZSA9IGkudHJhbnNmb3JtLCBzID0gbi5kYXRhLmZpZWxkKGkuZmllbGQpO1xuICAgICAgICByLnNldChpLmZpZWxkLCBfX1BSSVZBVEVfYXBwbHlUcmFuc2Zvcm1PcGVyYXRpb25Ub0xvY2FsVmlldyhlLCBzLCB0KSk7XG4gICAgfVxuICAgIHJldHVybiByO1xufVxuXG4vKiogQSBtdXRhdGlvbiB0aGF0IGRlbGV0ZXMgdGhlIGRvY3VtZW50IGF0IHRoZSBnaXZlbiBrZXkuICovIGNsYXNzIF9fUFJJVkFURV9EZWxldGVNdXRhdGlvbiBleHRlbmRzIE11dGF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMua2V5ID0gZSwgdGhpcy5wcmVjb25kaXRpb24gPSB0LCB0aGlzLnR5cGUgPSAyIC8qIE11dGF0aW9uVHlwZS5EZWxldGUgKi8gLCBcbiAgICAgICAgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBbXTtcbiAgICB9XG4gICAgZ2V0RmllbGRNYXNrKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9WZXJpZnlNdXRhdGlvbiBleHRlbmRzIE11dGF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMua2V5ID0gZSwgdGhpcy5wcmVjb25kaXRpb24gPSB0LCB0aGlzLnR5cGUgPSAzIC8qIE11dGF0aW9uVHlwZS5WZXJpZnkgKi8gLCBcbiAgICAgICAgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBbXTtcbiAgICB9XG4gICAgZ2V0RmllbGRNYXNrKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgYmF0Y2ggb2YgbXV0YXRpb25zIHRoYXQgd2lsbCBiZSBzZW50IGFzIG9uZSB1bml0IHRvIHRoZSBiYWNrZW5kLlxuICovIGNsYXNzIE11dGF0aW9uQmF0Y2gge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBiYXRjaElkIC0gVGhlIHVuaXF1ZSBJRCBvZiB0aGlzIG11dGF0aW9uIGJhdGNoLlxuICAgICAqIEBwYXJhbSBsb2NhbFdyaXRlVGltZSAtIFRoZSBvcmlnaW5hbCB3cml0ZSB0aW1lIG9mIHRoaXMgbXV0YXRpb24uXG4gICAgICogQHBhcmFtIGJhc2VNdXRhdGlvbnMgLSBNdXRhdGlvbnMgdGhhdCBhcmUgdXNlZCB0byBwb3B1bGF0ZSB0aGUgYmFzZVxuICAgICAqIHZhbHVlcyB3aGVuIHRoaXMgbXV0YXRpb24gaXMgYXBwbGllZCBsb2NhbGx5LiBUaGlzIGNhbiBiZSB1c2VkIHRvIGxvY2FsbHlcbiAgICAgKiBvdmVyd3JpdGUgdmFsdWVzIHRoYXQgYXJlIHBlcnNpc3RlZCBpbiB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlLiBCYXNlXG4gICAgICogbXV0YXRpb25zIGFyZSBuZXZlciBzZW50IHRvIHRoZSBiYWNrZW5kLlxuICAgICAqIEBwYXJhbSBtdXRhdGlvbnMgLSBUaGUgdXNlci1wcm92aWRlZCBtdXRhdGlvbnMgaW4gdGhpcyBtdXRhdGlvbiBiYXRjaC5cbiAgICAgKiBVc2VyLXByb3ZpZGVkIG11dGF0aW9ucyBhcmUgYXBwbGllZCBib3RoIGxvY2FsbHkgYW5kIHJlbW90ZWx5IG9uIHRoZVxuICAgICAqIGJhY2tlbmQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgcikge1xuICAgICAgICB0aGlzLmJhdGNoSWQgPSBlLCB0aGlzLmxvY2FsV3JpdGVUaW1lID0gdCwgdGhpcy5iYXNlTXV0YXRpb25zID0gbiwgdGhpcy5tdXRhdGlvbnMgPSByO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIGFsbCB0aGUgbXV0YXRpb25zIGluIHRoaXMgTXV0YXRpb25CYXRjaCB0byB0aGUgc3BlY2lmaWVkIGRvY3VtZW50XG4gICAgICogdG8gY29tcHV0ZSB0aGUgc3RhdGUgb2YgdGhlIHJlbW90ZSBkb2N1bWVudFxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50IC0gVGhlIGRvY3VtZW50IHRvIGFwcGx5IG11dGF0aW9ucyB0by5cbiAgICAgKiBAcGFyYW0gYmF0Y2hSZXN1bHQgLSBUaGUgcmVzdWx0IG9mIGFwcGx5aW5nIHRoZSBNdXRhdGlvbkJhdGNoIHRvIHRoZVxuICAgICAqIGJhY2tlbmQuXG4gICAgICovICAgIGFwcGx5VG9SZW1vdGVEb2N1bWVudChlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0Lm11dGF0aW9uUmVzdWx0cztcbiAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCB0aGlzLm11dGF0aW9ucy5sZW5ndGg7IHQrKykge1xuICAgICAgICAgICAgY29uc3QgciA9IHRoaXMubXV0YXRpb25zW3RdO1xuICAgICAgICAgICAgaWYgKHIua2V5LmlzRXF1YWwoZS5rZXkpKSB7XG4gICAgICAgICAgICAgICAgX19QUklWQVRFX211dGF0aW9uQXBwbHlUb1JlbW90ZURvY3VtZW50KHIsIGUsIG5bdF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbXB1dGVzIHRoZSBsb2NhbCB2aWV3IG9mIGEgZG9jdW1lbnQgZ2l2ZW4gYWxsIHRoZSBtdXRhdGlvbnMgaW4gdGhpc1xuICAgICAqIGJhdGNoLlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50IC0gVGhlIGRvY3VtZW50IHRvIGFwcGx5IG11dGF0aW9ucyB0by5cbiAgICAgKiBAcGFyYW0gbXV0YXRlZEZpZWxkcyAtIEZpZWxkcyB0aGF0IGhhdmUgYmVlbiB1cGRhdGVkIGJlZm9yZSBhcHBseWluZyB0aGlzIG11dGF0aW9uIGJhdGNoLlxuICAgICAqIEByZXR1cm5zIEEgYEZpZWxkTWFza2AgcmVwcmVzZW50aW5nIGFsbCB0aGUgZmllbGRzIHRoYXQgYXJlIG11dGF0ZWQuXG4gICAgICovICAgIGFwcGx5VG9Mb2NhbFZpZXcoZSwgdCkge1xuICAgICAgICAvLyBGaXJzdCwgYXBwbHkgdGhlIGJhc2Ugc3RhdGUuIFRoaXMgYWxsb3dzIHVzIHRvIGFwcGx5IG5vbi1pZGVtcG90ZW50XG4gICAgICAgIC8vIHRyYW5zZm9ybSBhZ2FpbnN0IGEgY29uc2lzdGVudCBzZXQgb2YgdmFsdWVzLlxuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdGhpcy5iYXNlTXV0YXRpb25zKSBuLmtleS5pc0VxdWFsKGUua2V5KSAmJiAodCA9IF9fUFJJVkFURV9tdXRhdGlvbkFwcGx5VG9Mb2NhbFZpZXcobiwgZSwgdCwgdGhpcy5sb2NhbFdyaXRlVGltZSkpO1xuICAgICAgICAvLyBTZWNvbmQsIGFwcGx5IGFsbCB1c2VyLXByb3ZpZGVkIG11dGF0aW9ucy5cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdGhpcy5tdXRhdGlvbnMpIG4ua2V5LmlzRXF1YWwoZS5rZXkpICYmICh0ID0gX19QUklWQVRFX211dGF0aW9uQXBwbHlUb0xvY2FsVmlldyhuLCBlLCB0LCB0aGlzLmxvY2FsV3JpdGVUaW1lKSk7XG4gICAgICAgIHJldHVybiB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21wdXRlcyB0aGUgbG9jYWwgdmlldyBmb3IgYWxsIHByb3ZpZGVkIGRvY3VtZW50cyBnaXZlbiB0aGUgbXV0YXRpb25zIGluXG4gICAgICogdGhpcyBiYXRjaC4gUmV0dXJucyBhIGBEb2N1bWVudEtleWAgdG8gYE11dGF0aW9uYCBtYXAgd2hpY2ggY2FuIGJlIHVzZWQgdG9cbiAgICAgKiByZXBsYWNlIGFsbCB0aGUgbXV0YXRpb24gYXBwbGljYXRpb25zLlxuICAgICAqLyAgICBhcHBseVRvTG9jYWxEb2N1bWVudFNldChlLCB0KSB7XG4gICAgICAgIC8vIFRPRE8obXJzY2htaWR0KTogVGhpcyBpbXBsZW1lbnRhdGlvbiBpcyBPKG5eMikuIElmIHdlIGFwcGx5IHRoZSBtdXRhdGlvbnNcbiAgICAgICAgLy8gZGlyZWN0bHkgKGFzIGRvbmUgaW4gYGFwcGx5VG9Mb2NhbFZpZXcoKWApLCB3ZSBjYW4gcmVkdWNlIHRoZSBjb21wbGV4aXR5XG4gICAgICAgIC8vIHRvIE8obikuXG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfbmV3TXV0YXRpb25NYXAoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubXV0YXRpb25zLmZvckVhY2goKHIgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IGUuZ2V0KHIua2V5KSwgcyA9IGkub3ZlcmxheWVkRG9jdW1lbnQ7XG4gICAgICAgICAgICAvLyBUT0RPKG11dGFibGVkb2N1bWVudHMpOiBUaGlzIG1ldGhvZCBzaG91bGQgdGFrZSBhIE11dGFibGVEb2N1bWVudE1hcFxuICAgICAgICAgICAgLy8gYW5kIHdlIHNob3VsZCByZW1vdmUgdGhpcyBjYXN0LlxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG8gPSB0aGlzLmFwcGx5VG9Mb2NhbFZpZXcocywgaS5tdXRhdGVkRmllbGRzKTtcbiAgICAgICAgICAgIC8vIFNldCBtdXRhdGVkRmllbGRzIHRvIG51bGwgaWYgdGhlIGRvY3VtZW50IGlzIG9ubHkgZnJvbSBsb2NhbCBtdXRhdGlvbnMuXG4gICAgICAgICAgICAvLyBUaGlzIGNyZWF0ZXMgYSBTZXQgb3IgRGVsZXRlIG11dGF0aW9uLCBpbnN0ZWFkIG9mIHRyeWluZyB0byBjcmVhdGUgYVxuICAgICAgICAgICAgLy8gcGF0Y2ggbXV0YXRpb24gYXMgdGhlIG92ZXJsYXkuXG4gICAgICAgICAgICAgICAgICAgICAgICBvID0gdC5oYXMoci5rZXkpID8gbnVsbCA6IG87XG4gICAgICAgICAgICBjb25zdCBfID0gX19QUklWQVRFX2NhbGN1bGF0ZU92ZXJsYXlNdXRhdGlvbihzLCBvKTtcbiAgICAgICAgICAgIG51bGwgIT09IF8gJiYgbi5zZXQoci5rZXksIF8pLCBzLmlzVmFsaWREb2N1bWVudCgpIHx8IHMuY29udmVydFRvTm9Eb2N1bWVudChTbmFwc2hvdFZlcnNpb24ubWluKCkpO1xuICAgICAgICB9KSksIG47XG4gICAgfVxuICAgIGtleXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm11dGF0aW9ucy5yZWR1Y2UoKChlLCB0KSA9PiBlLmFkZCh0LmtleSkpLCBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKSk7XG4gICAgfVxuICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5iYXRjaElkID09PSBlLmJhdGNoSWQgJiYgX19QUklWQVRFX2FycmF5RXF1YWxzKHRoaXMubXV0YXRpb25zLCBlLm11dGF0aW9ucywgKChlLCB0KSA9PiBfX1BSSVZBVEVfbXV0YXRpb25FcXVhbHMoZSwgdCkpKSAmJiBfX1BSSVZBVEVfYXJyYXlFcXVhbHModGhpcy5iYXNlTXV0YXRpb25zLCBlLmJhc2VNdXRhdGlvbnMsICgoZSwgdCkgPT4gX19QUklWQVRFX211dGF0aW9uRXF1YWxzKGUsIHQpKSk7XG4gICAgfVxufVxuXG4vKiogVGhlIHJlc3VsdCBvZiBhcHBseWluZyBhIG11dGF0aW9uIGJhdGNoIHRvIHRoZSBiYWNrZW5kLiAqLyBjbGFzcyBNdXRhdGlvbkJhdGNoUmVzdWx0IHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCBcbiAgICAvKipcbiAgICAgKiBBIHByZS1jb21wdXRlZCBtYXBwaW5nIGZyb20gZWFjaCBtdXRhdGVkIGRvY3VtZW50IHRvIHRoZSByZXN1bHRpbmdcbiAgICAgKiB2ZXJzaW9uLlxuICAgICAqL1xuICAgIHIpIHtcbiAgICAgICAgdGhpcy5iYXRjaCA9IGUsIHRoaXMuY29tbWl0VmVyc2lvbiA9IHQsIHRoaXMubXV0YXRpb25SZXN1bHRzID0gbiwgdGhpcy5kb2NWZXJzaW9ucyA9IHI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgTXV0YXRpb25CYXRjaFJlc3VsdCBmb3IgdGhlIGdpdmVuIGJhdGNoIGFuZCByZXN1bHRzLiBUaGVyZVxuICAgICAqIG11c3QgYmUgb25lIHJlc3VsdCBmb3IgZWFjaCBtdXRhdGlvbiBpbiB0aGUgYmF0Y2guIFRoaXMgc3RhdGljIGZhY3RvcnlcbiAgICAgKiBjYWNoZXMgYSBkb2N1bWVudD0mZ3Q7dmVyc2lvbiBtYXBwaW5nIChkb2NWZXJzaW9ucykuXG4gICAgICovICAgIHN0YXRpYyBmcm9tKGUsIHQsIG4pIHtcbiAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQoZS5tdXRhdGlvbnMubGVuZ3RoID09PSBuLmxlbmd0aCwgNTg4NDIsIHtcbiAgICAgICAgICAgIG1lOiBlLm11dGF0aW9ucy5sZW5ndGgsXG4gICAgICAgICAgICBmZTogbi5sZW5ndGhcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCByID0gZnVuY3Rpb24gX19QUklWQVRFX2RvY3VtZW50VmVyc2lvbk1hcCgpIHtcbiAgICAgICAgICAgIHJldHVybiBtdDtcbiAgICAgICAgfSgpO1xuICAgICAgICBjb25zdCBpID0gZS5tdXRhdGlvbnM7XG4gICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgaS5sZW5ndGg7IGUrKykgciA9IHIuaW5zZXJ0KGlbZV0ua2V5LCBuW2VdLnZlcnNpb24pO1xuICAgICAgICByZXR1cm4gbmV3IE11dGF0aW9uQmF0Y2hSZXN1bHQoZSwgdCwgbiwgcik7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXByZXNlbnRhdGlvbiBvZiBhbiBvdmVybGF5IGNvbXB1dGVkIGJ5IEZpcmVzdG9yZS5cbiAqXG4gKiBIb2xkcyBpbmZvcm1hdGlvbiBhYm91dCBhIG11dGF0aW9uIGFuZCB0aGUgbGFyZ2VzdCBiYXRjaCBpZCBpbiBGaXJlc3RvcmUgd2hlblxuICogdGhlIG11dGF0aW9uIHdhcyBjcmVhdGVkLlxuICovIGNsYXNzIE92ZXJsYXkge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5sYXJnZXN0QmF0Y2hJZCA9IGUsIHRoaXMubXV0YXRpb24gPSB0O1xuICAgIH1cbiAgICBnZXRLZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm11dGF0aW9uLmtleTtcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSBlICYmIHRoaXMubXV0YXRpb24gPT09IGUubXV0YXRpb247XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gYE92ZXJsYXl7XFxuICAgICAgbGFyZ2VzdEJhdGNoSWQ6ICR7dGhpcy5sYXJnZXN0QmF0Y2hJZH0sXFxuICAgICAgbXV0YXRpb246ICR7dGhpcy5tdXRhdGlvbi50b1N0cmluZygpfVxcbiAgICB9YDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIENvbmNyZXRlIGltcGxlbWVudGF0aW9uIG9mIHRoZSBBZ2dyZWdhdGUgdHlwZS5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfQWdncmVnYXRlSW1wbCB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbikge1xuICAgICAgICB0aGlzLmFsaWFzID0gZSwgdGhpcy5hZ2dyZWdhdGVUeXBlID0gdCwgdGhpcy5maWVsZFBhdGggPSBuO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgRXhpc3RlbmNlRmlsdGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMuY291bnQgPSBlLCB0aGlzLnVuY2hhbmdlZE5hbWVzID0gdDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEVycm9yIENvZGVzIGRlc2NyaWJpbmcgdGhlIGRpZmZlcmVudCB3YXlzIEdSUEMgY2FuIGZhaWwuIFRoZXNlIGFyZSBjb3BpZWRcbiAqIGRpcmVjdGx5IGZyb20gR1JQQydzIHNvdXJjZXMgaGVyZTpcbiAqXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZ3JwYy9ncnBjL2Jsb2IvYmNlZWM5NGVhNGZjNWYwMDg1ZDgxMjM1ZDhlMWMwNjc5OGRjMzQxYS9pbmNsdWRlL2dycGMlMkIlMkIvaW1wbC9jb2RlZ2VuL3N0YXR1c19jb2RlX2VudW0uaFxuICpcbiAqIEltcG9ydGFudCEgVGhlIG5hbWVzIG9mIHRoZXNlIGlkZW50aWZpZXJzIG1hdHRlciBiZWNhdXNlIHRoZSBzdHJpbmcgZm9ybXNcbiAqIGFyZSB1c2VkIGZvciByZXZlcnNlIGxvb2t1cHMgZnJvbSB0aGUgd2ViY2hhbm5lbCBzdHJlYW0uIERvIE5PVCBjaGFuZ2UgdGhlXG4gKiBuYW1lcyBvZiB0aGVzZSBpZGVudGlmaWVycyBvciBjaGFuZ2UgdGhpcyBpbnRvIGEgY29uc3QgZW51bS5cbiAqLyB2YXIgcHQsIHl0O1xuXG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciBhbiBlcnJvciBjb2RlIHJlcHJlc2VudHMgYSBwZXJtYW5lbnQgZXJyb3Igd2hlbiByZWNlaXZlZFxuICogaW4gcmVzcG9uc2UgdG8gYSBub24td3JpdGUgb3BlcmF0aW9uLlxuICpcbiAqIFNlZSBpc1Blcm1hbmVudFdyaXRlRXJyb3IgZm9yIGNsYXNzaWZ5aW5nIHdyaXRlIGVycm9ycy5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX2lzUGVybWFuZW50RXJyb3IoZSkge1xuICAgIHN3aXRjaCAoZSkge1xuICAgICAgY2FzZSBOLk9LOlxuICAgICAgICByZXR1cm4gZmFpbCg2NDkzOCk7XG5cbiAgICAgIGNhc2UgTi5DQU5DRUxMRUQ6XG4gICAgICBjYXNlIE4uVU5LTk9XTjpcbiAgICAgIGNhc2UgTi5ERUFETElORV9FWENFRURFRDpcbiAgICAgIGNhc2UgTi5SRVNPVVJDRV9FWEhBVVNURUQ6XG4gICAgICBjYXNlIE4uSU5URVJOQUw6XG4gICAgICBjYXNlIE4uVU5BVkFJTEFCTEU6XG4gLy8gVW5hdXRoZW50aWNhdGVkIG1lYW5zIHNvbWV0aGluZyB3ZW50IHdyb25nIHdpdGggb3VyIHRva2VuIGFuZCB3ZSBuZWVkXG4gICAgICAgIC8vIHRvIHJldHJ5IHdpdGggbmV3IGNyZWRlbnRpYWxzIHdoaWNoIHdpbGwgaGFwcGVuIGF1dG9tYXRpY2FsbHkuXG4gICAgICAgICAgICAgIGNhc2UgTi5VTkFVVEhFTlRJQ0FURUQ6XG4gICAgICAgIHJldHVybiAhMTtcblxuICAgICAgY2FzZSBOLklOVkFMSURfQVJHVU1FTlQ6XG4gICAgICBjYXNlIE4uTk9UX0ZPVU5EOlxuICAgICAgY2FzZSBOLkFMUkVBRFlfRVhJU1RTOlxuICAgICAgY2FzZSBOLlBFUk1JU1NJT05fREVOSUVEOlxuICAgICAgY2FzZSBOLkZBSUxFRF9QUkVDT05ESVRJT046XG4gLy8gQWJvcnRlZCBtaWdodCBiZSByZXRyaWVkIGluIHNvbWUgc2NlbmFyaW9zLCBidXQgdGhhdCBpcyBkZXBlbmRlbnQgb25cbiAgICAgICAgLy8gdGhlIGNvbnRleHQgYW5kIHNob3VsZCBoYW5kbGVkIGluZGl2aWR1YWxseSBieSB0aGUgY2FsbGluZyBjb2RlLlxuICAgICAgICAvLyBTZWUgaHR0cHM6Ly9jbG91ZC5nb29nbGUuY29tL2FwaXMvZGVzaWduL2Vycm9ycy5cbiAgICAgICAgICAgICAgY2FzZSBOLkFCT1JURUQ6XG4gICAgICBjYXNlIE4uT1VUX09GX1JBTkdFOlxuICAgICAgY2FzZSBOLlVOSU1QTEVNRU5URUQ6XG4gICAgICBjYXNlIE4uREFUQV9MT1NTOlxuICAgICAgICByZXR1cm4gITA7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBmYWlsKDE1NDY3LCB7XG4gICAgICAgICAgICBjb2RlOiBlXG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBEZXRlcm1pbmVzIHdoZXRoZXIgYW4gZXJyb3IgY29kZSByZXByZXNlbnRzIGEgcGVybWFuZW50IGVycm9yIHdoZW4gcmVjZWl2ZWRcbiAqIGluIHJlc3BvbnNlIHRvIGEgd3JpdGUgb3BlcmF0aW9uLlxuICpcbiAqIFdyaXRlIG9wZXJhdGlvbnMgbXVzdCBiZSBoYW5kbGVkIHNwZWNpYWxseSBiZWNhdXNlIGFzIG9mIGIvMTE5NDM3NzY0LCBBQk9SVEVEXG4gKiBlcnJvcnMgb24gdGhlIHdyaXRlIHN0cmVhbSBzaG91bGQgYmUgcmV0cmllZCB0b28gKGV2ZW4gdGhvdWdoIEFCT1JURUQgZXJyb3JzXG4gKiBhcmUgbm90IGdlbmVyYWxseSByZXRyeWFibGUpLlxuICpcbiAqIE5vdGUgdGhhdCBkdXJpbmcgdGhlIGluaXRpYWwgaGFuZHNoYWtlIG9uIHRoZSB3cml0ZSBzdHJlYW0gYW4gQUJPUlRFRCBlcnJvclxuICogc2lnbmFscyB0aGF0IHdlIHNob3VsZCBkaXNjYXJkIG91ciBzdHJlYW0gdG9rZW4gKGkuZS4gaXQgaXMgcGVybWFuZW50KS4gVGhpc1xuICogbWVhbnMgYSBoYW5kc2hha2UgZXJyb3Igc2hvdWxkIGJlIGNsYXNzaWZpZWQgd2l0aCBpc1Blcm1hbmVudEVycm9yLCBhYm92ZS5cbiAqL1xuLyoqXG4gKiBNYXBzIGFuIGVycm9yIENvZGUgZnJvbSBHUlBDIHN0YXR1cyBjb2RlIG51bWJlciwgbGlrZSAwLCAxLCBvciAxNC4gVGhlc2VcbiAqIGFyZSBub3QgdGhlIHNhbWUgYXMgSFRUUCBzdGF0dXMgY29kZXMuXG4gKlxuICogQHJldHVybnMgVGhlIENvZGUgZXF1aXZhbGVudCB0byB0aGUgZ2l2ZW4gR1JQQyBzdGF0dXMgY29kZS4gRmFpbHMgaWYgdGhlcmVcbiAqICAgICBpcyBubyBtYXRjaC5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX21hcENvZGVGcm9tUnBjQ29kZShlKSB7XG4gICAgaWYgKHZvaWQgMCA9PT0gZSkgXG4gICAgLy8gVGhpcyBzaG91bGRuJ3Qgbm9ybWFsbHkgaGFwcGVuLCBidXQgaW4gY2VydGFpbiBlcnJvciBjYXNlcyAobGlrZSB0cnlpbmdcbiAgICAvLyB0byBzZW5kIGludmFsaWQgcHJvdG8gbWVzc2FnZXMpIHdlIG1heSBnZXQgYW4gZXJyb3Igd2l0aCBubyBHUlBDIGNvZGUuXG4gICAgcmV0dXJuIF9fUFJJVkFURV9sb2dFcnJvcihcIkdSUEMgZXJyb3IgaGFzIG5vIC5jb2RlXCIpLCBOLlVOS05PV047XG4gICAgc3dpdGNoIChlKSB7XG4gICAgICBjYXNlIHB0Lk9LOlxuICAgICAgICByZXR1cm4gTi5PSztcblxuICAgICAgY2FzZSBwdC5DQU5DRUxMRUQ6XG4gICAgICAgIHJldHVybiBOLkNBTkNFTExFRDtcblxuICAgICAgY2FzZSBwdC5VTktOT1dOOlxuICAgICAgICByZXR1cm4gTi5VTktOT1dOO1xuXG4gICAgICBjYXNlIHB0LkRFQURMSU5FX0VYQ0VFREVEOlxuICAgICAgICByZXR1cm4gTi5ERUFETElORV9FWENFRURFRDtcblxuICAgICAgY2FzZSBwdC5SRVNPVVJDRV9FWEhBVVNURUQ6XG4gICAgICAgIHJldHVybiBOLlJFU09VUkNFX0VYSEFVU1RFRDtcblxuICAgICAgY2FzZSBwdC5JTlRFUk5BTDpcbiAgICAgICAgcmV0dXJuIE4uSU5URVJOQUw7XG5cbiAgICAgIGNhc2UgcHQuVU5BVkFJTEFCTEU6XG4gICAgICAgIHJldHVybiBOLlVOQVZBSUxBQkxFO1xuXG4gICAgICBjYXNlIHB0LlVOQVVUSEVOVElDQVRFRDpcbiAgICAgICAgcmV0dXJuIE4uVU5BVVRIRU5USUNBVEVEO1xuXG4gICAgICBjYXNlIHB0LklOVkFMSURfQVJHVU1FTlQ6XG4gICAgICAgIHJldHVybiBOLklOVkFMSURfQVJHVU1FTlQ7XG5cbiAgICAgIGNhc2UgcHQuTk9UX0ZPVU5EOlxuICAgICAgICByZXR1cm4gTi5OT1RfRk9VTkQ7XG5cbiAgICAgIGNhc2UgcHQuQUxSRUFEWV9FWElTVFM6XG4gICAgICAgIHJldHVybiBOLkFMUkVBRFlfRVhJU1RTO1xuXG4gICAgICBjYXNlIHB0LlBFUk1JU1NJT05fREVOSUVEOlxuICAgICAgICByZXR1cm4gTi5QRVJNSVNTSU9OX0RFTklFRDtcblxuICAgICAgY2FzZSBwdC5GQUlMRURfUFJFQ09ORElUSU9OOlxuICAgICAgICByZXR1cm4gTi5GQUlMRURfUFJFQ09ORElUSU9OO1xuXG4gICAgICBjYXNlIHB0LkFCT1JURUQ6XG4gICAgICAgIHJldHVybiBOLkFCT1JURUQ7XG5cbiAgICAgIGNhc2UgcHQuT1VUX09GX1JBTkdFOlxuICAgICAgICByZXR1cm4gTi5PVVRfT0ZfUkFOR0U7XG5cbiAgICAgIGNhc2UgcHQuVU5JTVBMRU1FTlRFRDpcbiAgICAgICAgcmV0dXJuIE4uVU5JTVBMRU1FTlRFRDtcblxuICAgICAgY2FzZSBwdC5EQVRBX0xPU1M6XG4gICAgICAgIHJldHVybiBOLkRBVEFfTE9TUztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGZhaWwoMzkzMjMsIHtcbiAgICAgICAgICAgIGNvZGU6IGVcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG4vKipcbiAqIENvbnZlcnRzIGFuIEhUVFAgcmVzcG9uc2UncyBlcnJvciBzdGF0dXMgdG8gdGhlIGVxdWl2YWxlbnQgZXJyb3IgY29kZS5cbiAqXG4gKiBAcGFyYW0gc3RhdHVzIC0gQW4gSFRUUCBlcnJvciByZXNwb25zZSBzdGF0dXMgKFwiRkFJTEVEX1BSRUNPTkRJVElPTlwiLFxuICogXCJVTktOT1dOXCIsIGV0Yy4pXG4gKiBAcmV0dXJucyBUaGUgZXF1aXZhbGVudCBDb2RlLiBOb24tbWF0Y2hpbmcgcmVzcG9uc2VzIGFyZSBtYXBwZWQgdG9cbiAqICAgICBDb2RlLlVOS05PV04uXG4gKi8gKHl0ID0gcHQgfHwgKHB0ID0ge30pKVt5dC5PSyA9IDBdID0gXCJPS1wiLCB5dFt5dC5DQU5DRUxMRUQgPSAxXSA9IFwiQ0FOQ0VMTEVEXCIsIFxueXRbeXQuVU5LTk9XTiA9IDJdID0gXCJVTktOT1dOXCIsIHl0W3l0LklOVkFMSURfQVJHVU1FTlQgPSAzXSA9IFwiSU5WQUxJRF9BUkdVTUVOVFwiLCBcbnl0W3l0LkRFQURMSU5FX0VYQ0VFREVEID0gNF0gPSBcIkRFQURMSU5FX0VYQ0VFREVEXCIsIHl0W3l0Lk5PVF9GT1VORCA9IDVdID0gXCJOT1RfRk9VTkRcIiwgXG55dFt5dC5BTFJFQURZX0VYSVNUUyA9IDZdID0gXCJBTFJFQURZX0VYSVNUU1wiLCB5dFt5dC5QRVJNSVNTSU9OX0RFTklFRCA9IDddID0gXCJQRVJNSVNTSU9OX0RFTklFRFwiLCBcbnl0W3l0LlVOQVVUSEVOVElDQVRFRCA9IDE2XSA9IFwiVU5BVVRIRU5USUNBVEVEXCIsIHl0W3l0LlJFU09VUkNFX0VYSEFVU1RFRCA9IDhdID0gXCJSRVNPVVJDRV9FWEhBVVNURURcIiwgXG55dFt5dC5GQUlMRURfUFJFQ09ORElUSU9OID0gOV0gPSBcIkZBSUxFRF9QUkVDT05ESVRJT05cIiwgeXRbeXQuQUJPUlRFRCA9IDEwXSA9IFwiQUJPUlRFRFwiLCBcbnl0W3l0Lk9VVF9PRl9SQU5HRSA9IDExXSA9IFwiT1VUX09GX1JBTkdFXCIsIHl0W3l0LlVOSU1QTEVNRU5URUQgPSAxMl0gPSBcIlVOSU1QTEVNRU5URURcIiwgXG55dFt5dC5JTlRFUk5BTCA9IDEzXSA9IFwiSU5URVJOQUxcIiwgeXRbeXQuVU5BVkFJTEFCTEUgPSAxNF0gPSBcIlVOQVZBSUxBQkxFXCIsIHl0W3l0LkRBVEFfTE9TUyA9IDE1XSA9IFwiREFUQV9MT1NTXCI7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRoZSBnbG9iYWwsIHNpbmdsZXRvbiBpbnN0YW5jZSBvZiBUZXN0aW5nSG9va3NTcGkuXG4gKlxuICogVGhpcyB2YXJpYWJsZSB3aWxsIGJlIGBudWxsYCBpbiBhbGwgY2FzZXMgX2V4Y2VwdF8gd2hlbiBydW5uaW5nIGZyb21cbiAqIGludGVncmF0aW9uIHRlc3RzIHRoYXQgaGF2ZSByZWdpc3RlcmVkIGNhbGxiYWNrcyB0byBiZSBub3RpZmllZCBvZiBldmVudHNcbiAqIHRoYXQgaGFwcGVuIGR1cmluZyB0aGUgdGVzdCBleGVjdXRpb24uXG4gKi9cbmxldCB3dCA9IG51bGw7XG5cbi8qKlxuICogU2V0cyB0aGUgdmFsdWUgb2YgdGhlIGB0ZXN0aW5nSG9va3NTcGlgIG9iamVjdC5cbiAqIEBwYXJhbSBpbnN0YW5jZSB0aGUgaW5zdGFuY2UgdG8gc2V0LlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbnN0YW5jZSBvZiB0aGUgUGxhdGZvcm0ncyAnVGV4dEVuY29kZXInIGltcGxlbWVudGF0aW9uLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfbmV3VGV4dEVuY29kZXIoKSB7XG4gICAgcmV0dXJuIG5ldyBUZXh0RW5jb2Rlcjtcbn1cblxuLyoqXG4gKiBBbiBpbnN0YW5jZSBvZiB0aGUgUGxhdGZvcm0ncyAnVGV4dERlY29kZXInIGltcGxlbWVudGF0aW9uLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY29uc3QgU3QgPSBuZXcgSW50ZWdlcihbIDQyOTQ5NjcyOTUsIDQyOTQ5NjcyOTUgXSwgMCk7XG5cbi8vIEhhc2ggYSBzdHJpbmcgdXNpbmcgbWQ1IGhhc2hpbmcgYWxnb3JpdGhtLlxuZnVuY3Rpb24gX19QUklWQVRFX2dldE1kNUhhc2hWYWx1ZShlKSB7XG4gICAgY29uc3QgdCA9IF9fUFJJVkFURV9uZXdUZXh0RW5jb2RlcigpLmVuY29kZShlKSwgbiA9IG5ldyBNZDU7XG4gICAgcmV0dXJuIG4udXBkYXRlKHQpLCBuZXcgVWludDhBcnJheShuLmRpZ2VzdCgpKTtcbn1cblxuLy8gSW50ZXJwcmV0IHRoZSAxNiBieXRlcyBhcnJheSBhcyB0d28gNjQtYml0IHVuc2lnbmVkIGludGVnZXJzLCBlbmNvZGVkIHVzaW5nXG4vLyAy4oCZcyBjb21wbGVtZW50IHVzaW5nIGxpdHRsZSBlbmRpYW4uXG5mdW5jdGlvbiBfX1BSSVZBVEVfZ2V0NjRCaXRVaW50cyhlKSB7XG4gICAgY29uc3QgdCA9IG5ldyBEYXRhVmlldyhlLmJ1ZmZlciksIG4gPSB0LmdldFVpbnQzMigwLCAvKiBsaXR0bGVFbmRpYW49ICovICEwKSwgciA9IHQuZ2V0VWludDMyKDQsIC8qIGxpdHRsZUVuZGlhbj0gKi8gITApLCBpID0gdC5nZXRVaW50MzIoOCwgLyogbGl0dGxlRW5kaWFuPSAqLyAhMCksIHMgPSB0LmdldFVpbnQzMigxMiwgLyogbGl0dGxlRW5kaWFuPSAqLyAhMCk7XG4gICAgcmV0dXJuIFsgbmV3IEludGVnZXIoWyBuLCByIF0sIDApLCBuZXcgSW50ZWdlcihbIGksIHMgXSwgMCkgXTtcbn1cblxuY2xhc3MgQmxvb21GaWx0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4pIHtcbiAgICAgICAgaWYgKHRoaXMuYml0bWFwID0gZSwgdGhpcy5wYWRkaW5nID0gdCwgdGhpcy5oYXNoQ291bnQgPSBuLCB0IDwgMCB8fCB0ID49IDgpIHRocm93IG5ldyBfX1BSSVZBVEVfQmxvb21GaWx0ZXJFcnJvcihgSW52YWxpZCBwYWRkaW5nOiAke3R9YCk7XG4gICAgICAgIGlmIChuIDwgMCkgdGhyb3cgbmV3IF9fUFJJVkFURV9CbG9vbUZpbHRlckVycm9yKGBJbnZhbGlkIGhhc2ggY291bnQ6ICR7bn1gKTtcbiAgICAgICAgaWYgKGUubGVuZ3RoID4gMCAmJiAwID09PSB0aGlzLmhhc2hDb3VudCkgXG4gICAgICAgIC8vIE9ubHkgZW1wdHkgYmxvb20gZmlsdGVyIGNhbiBoYXZlIDAgaGFzaCBjb3VudC5cbiAgICAgICAgdGhyb3cgbmV3IF9fUFJJVkFURV9CbG9vbUZpbHRlckVycm9yKGBJbnZhbGlkIGhhc2ggY291bnQ6ICR7bn1gKTtcbiAgICAgICAgaWYgKDAgPT09IGUubGVuZ3RoICYmIDAgIT09IHQpIFxuICAgICAgICAvLyBFbXB0eSBibG9vbSBmaWx0ZXIgc2hvdWxkIGhhdmUgMCBwYWRkaW5nLlxuICAgICAgICB0aHJvdyBuZXcgX19QUklWQVRFX0Jsb29tRmlsdGVyRXJyb3IoYEludmFsaWQgcGFkZGluZyB3aGVuIGJpdG1hcCBsZW5ndGggaXMgMDogJHt0fWApO1xuICAgICAgICB0aGlzLmdlID0gOCAqIGUubGVuZ3RoIC0gdCwgXG4gICAgICAgIC8vIFNldCB0aGUgYml0IGNvdW50IGluIEludGVnZXIgdG8gYXZvaWQgcmVwZXRpdGlvbiBpbiBtaWdodENvbnRhaW4oKS5cbiAgICAgICAgdGhpcy5wZSA9IEludGVnZXIuZnJvbU51bWJlcih0aGlzLmdlKTtcbiAgICB9XG4gICAgLy8gQ2FsY3VsYXRlIHRoZSBpdGggaGFzaCB2YWx1ZSBiYXNlZCBvbiB0aGUgaGFzaGVkIDY0Yml0IGludGVnZXJzLFxuICAgIC8vIGFuZCBjYWxjdWxhdGUgaXRzIGNvcnJlc3BvbmRpbmcgYml0IGluZGV4IGluIHRoZSBiaXRtYXAgdG8gYmUgY2hlY2tlZC5cbiAgICB5ZShlLCB0LCBuKSB7XG4gICAgICAgIC8vIENhbGN1bGF0ZSBoYXNoZWQgdmFsdWUgaChpKSA9IGgxICsgKGkgKiBoMikuXG4gICAgICAgIGxldCByID0gZS5hZGQodC5tdWx0aXBseShJbnRlZ2VyLmZyb21OdW1iZXIobikpKTtcbiAgICAgICAgLy8gV3JhcCBpZiBoYXNoIHZhbHVlIG92ZXJmbG93IDY0Yml0LlxuICAgICAgICAgICAgICAgIHJldHVybiAxID09PSByLmNvbXBhcmUoU3QpICYmIChyID0gbmV3IEludGVnZXIoWyByLmdldEJpdHMoMCksIHIuZ2V0Qml0cygxKSBdLCAwKSksIFxuICAgICAgICByLm1vZHVsbyh0aGlzLnBlKS50b051bWJlcigpO1xuICAgIH1cbiAgICAvLyBSZXR1cm4gd2hldGhlciB0aGUgYml0IG9uIHRoZSBnaXZlbiBpbmRleCBpbiB0aGUgYml0bWFwIGlzIHNldCB0byAxLlxuICAgIHdlKGUpIHtcbiAgICAgICAgcmV0dXJuICEhKHRoaXMuYml0bWFwW01hdGguZmxvb3IoZSAvIDgpXSAmIDEgPDwgZSAlIDgpO1xuICAgIH1cbiAgICBtaWdodENvbnRhaW4oZSkge1xuICAgICAgICAvLyBFbXB0eSBiaXRtYXAgc2hvdWxkIGFsd2F5cyByZXR1cm4gZmFsc2Ugb24gbWVtYmVyc2hpcCBjaGVjay5cbiAgICAgICAgaWYgKDAgPT09IHRoaXMuZ2UpIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9nZXRNZDVIYXNoVmFsdWUoZSksIFtuLCByXSA9IF9fUFJJVkFURV9nZXQ2NEJpdFVpbnRzKHQpO1xuICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IHRoaXMuaGFzaENvdW50OyBlKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLnllKG4sIHIsIGUpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLndlKHQpKSByZXR1cm4gITE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlIGJsb29tIGZpbHRlciBmb3IgdGVzdGluZyBwdXJwb3NlcyBvbmx5LiAqLyAgICBzdGF0aWMgY3JlYXRlKGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IGUgJSA4ID09IDAgPyAwIDogOCAtIGUgJSA4LCBpID0gbmV3IFVpbnQ4QXJyYXkoTWF0aC5jZWlsKGUgLyA4KSksIHMgPSBuZXcgQmxvb21GaWx0ZXIoaSwgciwgdCk7XG4gICAgICAgIHJldHVybiBuLmZvckVhY2goKGUgPT4gcy5pbnNlcnQoZSkpKSwgcztcbiAgICB9XG4gICAgaW5zZXJ0KGUpIHtcbiAgICAgICAgaWYgKDAgPT09IHRoaXMuZ2UpIHJldHVybjtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9nZXRNZDVIYXNoVmFsdWUoZSksIFtuLCByXSA9IF9fUFJJVkFURV9nZXQ2NEJpdFVpbnRzKHQpO1xuICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IHRoaXMuaGFzaENvdW50OyBlKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLnllKG4sIHIsIGUpO1xuICAgICAgICAgICAgdGhpcy5TZSh0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBTZShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBNYXRoLmZsb29yKGUgLyA4KSwgbiA9IGUgJSA4O1xuICAgICAgICB0aGlzLmJpdG1hcFt0XSB8PSAxIDw8IG47XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfQmxvb21GaWx0ZXJFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKSwgdGhpcy5uYW1lID0gXCJCbG9vbUZpbHRlckVycm9yXCI7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBldmVudCBmcm9tIHRoZSBSZW1vdGVTdG9yZS4gSXQgaXMgc3BsaXQgaW50byB0YXJnZXRDaGFuZ2VzIChjaGFuZ2VzIHRvIHRoZVxuICogc3RhdGUgb3IgdGhlIHNldCBvZiBkb2N1bWVudHMgaW4gb3VyIHdhdGNoZWQgdGFyZ2V0cykgYW5kIGRvY3VtZW50VXBkYXRlc1xuICogKGNoYW5nZXMgdG8gdGhlIGFjdHVhbCBkb2N1bWVudHMpLlxuICovIGNsYXNzIFJlbW90ZUV2ZW50IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgc25hcHNob3QgdmVyc2lvbiB0aGlzIGV2ZW50IGJyaW5ncyB1cyB1cCB0bywgb3IgTUlOIGlmIG5vdCBzZXQuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogQSBtYXAgZnJvbSB0YXJnZXQgdG8gY2hhbmdlcyB0byB0aGUgdGFyZ2V0LiBTZWUgVGFyZ2V0Q2hhbmdlLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIEEgbWFwIG9mIHRhcmdldHMgdGhhdCBpcyBrbm93biB0byBiZSBpbmNvbnNpc3RlbnQsIGFuZCB0aGUgcHVycG9zZSBmb3JcbiAgICAgKiByZS1saXN0ZW5pbmcuIExpc3RlbnMgZm9yIHRoZXNlIHRhcmdldHMgc2hvdWxkIGJlIHJlLWVzdGFibGlzaGVkIHdpdGhvdXRcbiAgICAgKiByZXN1bWUgdG9rZW5zLlxuICAgICAqL1xuICAgIG4sIFxuICAgIC8qKlxuICAgICAqIEEgc2V0IG9mIHdoaWNoIGRvY3VtZW50cyBoYXZlIGNoYW5nZWQgb3IgYmVlbiBkZWxldGVkLCBhbG9uZyB3aXRoIHRoZVxuICAgICAqIGRvYydzIG5ldyB2YWx1ZXMgKGlmIG5vdCBkZWxldGVkKS5cbiAgICAgKi9cbiAgICByLCBcbiAgICAvKipcbiAgICAgKiBBIHNldCBvZiB3aGljaCBkb2N1bWVudCB1cGRhdGVzIGFyZSBkdWUgb25seSB0byBsaW1ibyByZXNvbHV0aW9uIHRhcmdldHMuXG4gICAgICovXG4gICAgaSkge1xuICAgICAgICB0aGlzLnNuYXBzaG90VmVyc2lvbiA9IGUsIHRoaXMudGFyZ2V0Q2hhbmdlcyA9IHQsIHRoaXMudGFyZ2V0TWlzbWF0Y2hlcyA9IG4sIHRoaXMuZG9jdW1lbnRVcGRhdGVzID0gciwgXG4gICAgICAgIHRoaXMucmVzb2x2ZWRMaW1ib0RvY3VtZW50cyA9IGk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhBQ0s6IFZpZXdzIHJlcXVpcmUgUmVtb3RlRXZlbnRzIGluIG9yZGVyIHRvIGRldGVybWluZSB3aGV0aGVyIHRoZSB2aWV3IGlzXG4gICAgICogQ1VSUkVOVCwgYnV0IHNlY29uZGFyeSB0YWJzIGRvbid0IHJlY2VpdmUgcmVtb3RlIGV2ZW50cy4gU28gdGhpcyBtZXRob2QgaXNcbiAgICAgKiB1c2VkIHRvIGNyZWF0ZSBhIHN5bnRoZXNpemVkIFJlbW90ZUV2ZW50IHRoYXQgY2FuIGJlIHVzZWQgdG8gYXBwbHkgYVxuICAgICAqIENVUlJFTlQgc3RhdHVzIGNoYW5nZSB0byBhIFZpZXcsIGZvciBxdWVyaWVzIGV4ZWN1dGVkIGluIGEgZGlmZmVyZW50IHRhYi5cbiAgICAgKi9cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5XG4gICAgc3RhdGljIGNyZWF0ZVN5bnRoZXNpemVkUmVtb3RlRXZlbnRGb3JDdXJyZW50Q2hhbmdlKGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IG5ldyBNYXA7XG4gICAgICAgIHJldHVybiByLnNldChlLCBUYXJnZXRDaGFuZ2UuY3JlYXRlU3ludGhlc2l6ZWRUYXJnZXRDaGFuZ2VGb3JDdXJyZW50Q2hhbmdlKGUsIHQsIG4pKSwgXG4gICAgICAgIG5ldyBSZW1vdGVFdmVudChTbmFwc2hvdFZlcnNpb24ubWluKCksIHIsIG5ldyBTb3J0ZWRNYXAoX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IpLCBfX1BSSVZBVEVfbXV0YWJsZURvY3VtZW50TWFwKCksIF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBUYXJnZXRDaGFuZ2Ugc3BlY2lmaWVzIHRoZSBzZXQgb2YgY2hhbmdlcyBmb3IgYSBzcGVjaWZpYyB0YXJnZXQgYXMgcGFydCBvZlxuICogYSBSZW1vdGVFdmVudC4gVGhlc2UgY2hhbmdlcyB0cmFjayB3aGljaCBkb2N1bWVudHMgYXJlIGFkZGVkLCBtb2RpZmllZCBvclxuICogcmVtb3ZlZCwgYXMgd2VsbCBhcyB0aGUgdGFyZ2V0J3MgcmVzdW1lIHRva2VuIGFuZCB3aGV0aGVyIHRoZSB0YXJnZXQgaXNcbiAqIG1hcmtlZCBDVVJSRU5ULlxuICogVGhlIGFjdHVhbCBjaGFuZ2VzICp0byogZG9jdW1lbnRzIGFyZSBub3QgcGFydCBvZiB0aGUgVGFyZ2V0Q2hhbmdlIHNpbmNlXG4gKiBkb2N1bWVudHMgbWF5IGJlIHBhcnQgb2YgbXVsdGlwbGUgdGFyZ2V0cy5cbiAqLyBjbGFzcyBUYXJnZXRDaGFuZ2Uge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIEFuIG9wYXF1ZSwgc2VydmVyLWFzc2lnbmVkIHRva2VuIHRoYXQgYWxsb3dzIHdhdGNoaW5nIGEgcXVlcnkgdG8gYmUgcmVzdW1lZFxuICAgICAqIGFmdGVyIGRpc2Nvbm5lY3Rpbmcgd2l0aG91dCByZXRyYW5zbWl0dGluZyBhbGwgdGhlIGRhdGEgdGhhdCBtYXRjaGVzIHRoZVxuICAgICAqIHF1ZXJ5LiBUaGUgcmVzdW1lIHRva2VuIGVzc2VudGlhbGx5IGlkZW50aWZpZXMgYSBwb2ludCBpbiB0aW1lIGZyb20gd2hpY2hcbiAgICAgKiB0aGUgc2VydmVyIHNob3VsZCByZXN1bWUgc2VuZGluZyByZXN1bHRzLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIFRoZSBcImN1cnJlbnRcIiAoc3luY2VkKSBzdGF0dXMgb2YgdGhpcyB0YXJnZXQuIE5vdGUgdGhhdCBcImN1cnJlbnRcIlxuICAgICAqIGhhcyBzcGVjaWFsIG1lYW5pbmcgaW4gdGhlIFJQQyBwcm90b2NvbCB0aGF0IGltcGxpZXMgdGhhdCBhIHRhcmdldCBpc1xuICAgICAqIGJvdGggdXAtdG8tZGF0ZSBhbmQgY29uc2lzdGVudCB3aXRoIHRoZSByZXN0IG9mIHRoZSB3YXRjaCBzdHJlYW0uXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIHNldCBvZiBkb2N1bWVudHMgdGhhdCB3ZXJlIG5ld2x5IGFzc2lnbmVkIHRvIHRoaXMgdGFyZ2V0IGFzIHBhcnQgb2ZcbiAgICAgKiB0aGlzIHJlbW90ZSBldmVudC5cbiAgICAgKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBUaGUgc2V0IG9mIGRvY3VtZW50cyB0aGF0IHdlcmUgYWxyZWFkeSBhc3NpZ25lZCB0byB0aGlzIHRhcmdldCBidXQgcmVjZWl2ZWRcbiAgICAgKiBhbiB1cGRhdGUgZHVyaW5nIHRoaXMgcmVtb3RlIGV2ZW50LlxuICAgICAqL1xuICAgIHIsIFxuICAgIC8qKlxuICAgICAqIFRoZSBzZXQgb2YgZG9jdW1lbnRzIHRoYXQgd2VyZSByZW1vdmVkIGZyb20gdGhpcyB0YXJnZXQgYXMgcGFydCBvZiB0aGlzXG4gICAgICogcmVtb3RlIGV2ZW50LlxuICAgICAqL1xuICAgIGkpIHtcbiAgICAgICAgdGhpcy5yZXN1bWVUb2tlbiA9IGUsIHRoaXMuY3VycmVudCA9IHQsIHRoaXMuYWRkZWREb2N1bWVudHMgPSBuLCB0aGlzLm1vZGlmaWVkRG9jdW1lbnRzID0gciwgXG4gICAgICAgIHRoaXMucmVtb3ZlZERvY3VtZW50cyA9IGk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIHVzZWQgdG8gY3JlYXRlIGEgc3ludGhlc2l6ZWQgVGFyZ2V0Q2hhbmdlcyB0aGF0IGNhbiBiZSB1c2VkIHRvXG4gICAgICogYXBwbHkgYSBDVVJSRU5UIHN0YXR1cyBjaGFuZ2UgdG8gYSBWaWV3IChmb3IgcXVlcmllcyBleGVjdXRlZCBpbiBhIGRpZmZlcmVudFxuICAgICAqIHRhYikgb3IgZm9yIG5ldyBxdWVyaWVzICh0byByYWlzZSBzbmFwc2hvdHMgd2l0aCBjb3JyZWN0IENVUlJFTlQgc3RhdHVzKS5cbiAgICAgKi8gICAgc3RhdGljIGNyZWF0ZVN5bnRoZXNpemVkVGFyZ2V0Q2hhbmdlRm9yQ3VycmVudENoYW5nZShlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgVGFyZ2V0Q2hhbmdlKG4sIHQsIF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpLCBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKSwgX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVwcmVzZW50cyBhIGNoYW5nZWQgZG9jdW1lbnQgYW5kIGEgbGlzdCBvZiB0YXJnZXQgaWRzIHRvIHdoaWNoIHRoaXMgY2hhbmdlXG4gKiBhcHBsaWVzLlxuICpcbiAqIElmIGRvY3VtZW50IGhhcyBiZWVuIGRlbGV0ZWQgTm9Eb2N1bWVudCB3aWxsIGJlIHByb3ZpZGVkLlxuICovIGNsYXNzIF9fUFJJVkFURV9Eb2N1bWVudFdhdGNoQ2hhbmdlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogVGhlIG5ldyBkb2N1bWVudCBhcHBsaWVzIHRvIGFsbCBvZiB0aGVzZSB0YXJnZXRzLiAqL1xuICAgIGUsIFxuICAgIC8qKiBUaGUgbmV3IGRvY3VtZW50IGlzIHJlbW92ZWQgZnJvbSBhbGwgb2YgdGhlc2UgdGFyZ2V0cy4gKi9cbiAgICB0LCBcbiAgICAvKiogVGhlIGtleSBvZiB0aGUgZG9jdW1lbnQgZm9yIHRoaXMgY2hhbmdlLiAqL1xuICAgIG4sIFxuICAgIC8qKlxuICAgICAqIFRoZSBuZXcgZG9jdW1lbnQgb3IgTm9Eb2N1bWVudCBpZiBpdCB3YXMgZGVsZXRlZC4gSXMgbnVsbCBpZiB0aGVcbiAgICAgKiBkb2N1bWVudCB3ZW50IG91dCBvZiB2aWV3IHdpdGhvdXQgdGhlIHNlcnZlciBzZW5kaW5nIGEgbmV3IGRvY3VtZW50LlxuICAgICAqL1xuICAgIHIpIHtcbiAgICAgICAgdGhpcy5iZSA9IGUsIHRoaXMucmVtb3ZlZFRhcmdldElkcyA9IHQsIHRoaXMua2V5ID0gbiwgdGhpcy5EZSA9IHI7XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfRXhpc3RlbmNlRmlsdGVyQ2hhbmdlIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMudGFyZ2V0SWQgPSBlLCB0aGlzLkNlID0gdDtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9XYXRjaFRhcmdldENoYW5nZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFdoYXQga2luZCBvZiBjaGFuZ2Ugb2NjdXJyZWQgdG8gdGhlIHdhdGNoIHRhcmdldC4gKi9cbiAgICBlLCBcbiAgICAvKiogVGhlIHRhcmdldCBJRHMgdGhhdCB3ZXJlIGFkZGVkL3JlbW92ZWQvc2V0LiAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIEFuIG9wYXF1ZSwgc2VydmVyLWFzc2lnbmVkIHRva2VuIHRoYXQgYWxsb3dzIHdhdGNoaW5nIGEgdGFyZ2V0IHRvIGJlXG4gICAgICogcmVzdW1lZCBhZnRlciBkaXNjb25uZWN0aW5nIHdpdGhvdXQgcmV0cmFuc21pdHRpbmcgYWxsIHRoZSBkYXRhIHRoYXRcbiAgICAgKiBtYXRjaGVzIHRoZSB0YXJnZXQuIFRoZSByZXN1bWUgdG9rZW4gZXNzZW50aWFsbHkgaWRlbnRpZmllcyBhIHBvaW50IGluXG4gICAgICogdGltZSBmcm9tIHdoaWNoIHRoZSBzZXJ2ZXIgc2hvdWxkIHJlc3VtZSBzZW5kaW5nIHJlc3VsdHMuXG4gICAgICovXG4gICAgbiA9IEJ5dGVTdHJpbmcuRU1QVFlfQllURV9TVFJJTkdcbiAgICAvKiogQW4gUlBDIGVycm9yIGluZGljYXRpbmcgd2h5IHRoZSB3YXRjaCBmYWlsZWQuICovICwgciA9IG51bGwpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IGUsIHRoaXMudGFyZ2V0SWRzID0gdCwgdGhpcy5yZXN1bWVUb2tlbiA9IG4sIHRoaXMuY2F1c2UgPSByO1xuICAgIH1cbn1cblxuLyoqIFRyYWNrcyB0aGUgaW50ZXJuYWwgc3RhdGUgb2YgYSBXYXRjaCB0YXJnZXQuICovIGNsYXNzIF9fUFJJVkFURV9UYXJnZXRTdGF0ZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbnVtYmVyIG9mIHBlbmRpbmcgcmVzcG9uc2VzIChhZGRzIG9yIHJlbW92ZXMpIHRoYXQgd2UgYXJlIHdhaXRpbmcgb24uXG4gICAgICAgICAqIFdlIG9ubHkgY29uc2lkZXIgdGFyZ2V0cyBhY3RpdmUgdGhhdCBoYXZlIG5vIHBlbmRpbmcgcmVzcG9uc2VzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy52ZSA9IDAsIFxuICAgICAgICAvKipcbiAgICAgICAgICogS2VlcHMgdHJhY2sgb2YgdGhlIGRvY3VtZW50IGNoYW5nZXMgc2luY2UgdGhlIGxhc3QgcmFpc2VkIHNuYXBzaG90LlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGVzZSBjaGFuZ2VzIGFyZSBjb250aW51b3VzbHkgdXBkYXRlZCBhcyB3ZSByZWNlaXZlIGRvY3VtZW50IHVwZGF0ZXMgYW5kXG4gICAgICAgICAqIGFsd2F5cyByZWZsZWN0IHRoZSBjdXJyZW50IHNldCBvZiBjaGFuZ2VzIGFnYWluc3QgdGhlIGxhc3QgaXNzdWVkIHNuYXBzaG90LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5GZSA9IF9fUFJJVkFURV9zbmFwc2hvdENoYW5nZXNNYXAoKSwgXG4gICAgICAgIC8qKiBTZWUgcHVibGljIGdldHRlcnMgZm9yIGV4cGxhbmF0aW9ucyBvZiB0aGVzZSBmaWVsZHMuICovXG4gICAgICAgIHRoaXMuTWUgPSBCeXRlU3RyaW5nLkVNUFRZX0JZVEVfU1RSSU5HLCB0aGlzLnhlID0gITEsIFxuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciB0aGlzIHRhcmdldCBzdGF0ZSBzaG91bGQgYmUgaW5jbHVkZWQgaW4gdGhlIG5leHQgc25hcHNob3QuIFdlXG4gICAgICAgICAqIGluaXRpYWxpemUgdG8gdHJ1ZSBzbyB0aGF0IG5ld2x5LWFkZGVkIHRhcmdldHMgYXJlIGluY2x1ZGVkIGluIHRoZSBuZXh0XG4gICAgICAgICAqIFJlbW90ZUV2ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5PZSA9ICEwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoaXMgdGFyZ2V0IGhhcyBiZWVuIG1hcmtlZCAnY3VycmVudCcuXG4gICAgICpcbiAgICAgKiAnQ3VycmVudCcgaGFzIHNwZWNpYWwgbWVhbmluZyBpbiB0aGUgUlBDIHByb3RvY29sOiBJdCBpbXBsaWVzIHRoYXQgdGhlXG4gICAgICogV2F0Y2ggYmFja2VuZCBoYXMgc2VudCB1cyBhbGwgY2hhbmdlcyB1cCB0byB0aGUgcG9pbnQgYXQgd2hpY2ggdGhlIHRhcmdldFxuICAgICAqIHdhcyBhZGRlZCBhbmQgdGhhdCB0aGUgdGFyZ2V0IGlzIGNvbnNpc3RlbnQgd2l0aCB0aGUgcmVzdCBvZiB0aGUgd2F0Y2hcbiAgICAgKiBzdHJlYW0uXG4gICAgICovICAgIGdldCBjdXJyZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy54ZTtcbiAgICB9XG4gICAgLyoqIFRoZSBsYXN0IHJlc3VtZSB0b2tlbiBzZW50IHRvIHVzIGZvciB0aGlzIHRhcmdldC4gKi8gICAgZ2V0IHJlc3VtZVRva2VuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5NZTtcbiAgICB9XG4gICAgLyoqIFdoZXRoZXIgdGhpcyB0YXJnZXQgaGFzIHBlbmRpbmcgdGFyZ2V0IGFkZHMgb3IgdGFyZ2V0IHJlbW92ZXMuICovICAgIGdldCBOZSgpIHtcbiAgICAgICAgcmV0dXJuIDAgIT09IHRoaXMudmU7XG4gICAgfVxuICAgIC8qKiBXaGV0aGVyIHdlIGhhdmUgbW9kaWZpZWQgYW55IHN0YXRlIHRoYXQgc2hvdWxkIHRyaWdnZXIgYSBzbmFwc2hvdC4gKi8gICAgZ2V0IEJlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5PZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyB0aGUgcmVzdW1lIHRva2VuIHRvIHRoZSBUYXJnZXRDaGFuZ2UsIGJ1dCBvbmx5IHdoZW4gaXQgaGFzIGEgbmV3XG4gICAgICogdmFsdWUuIEVtcHR5IHJlc3VtZVRva2VucyBhcmUgZGlzY2FyZGVkLlxuICAgICAqLyAgICBMZShlKSB7XG4gICAgICAgIGUuYXBwcm94aW1hdGVCeXRlU2l6ZSgpID4gMCAmJiAodGhpcy5PZSA9ICEwLCB0aGlzLk1lID0gZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSB0YXJnZXQgY2hhbmdlIGZyb20gdGhlIGN1cnJlbnQgc2V0IG9mIGNoYW5nZXMuXG4gICAgICpcbiAgICAgKiBUbyByZXNldCB0aGUgZG9jdW1lbnQgY2hhbmdlcyBhZnRlciByYWlzaW5nIHRoaXMgc25hcHNob3QsIGNhbGxcbiAgICAgKiBgY2xlYXJQZW5kaW5nQ2hhbmdlcygpYC5cbiAgICAgKi8gICAga2UoKSB7XG4gICAgICAgIGxldCBlID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCksIHQgPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKSwgbiA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5GZS5mb3JFYWNoKCgociwgaSkgPT4ge1xuICAgICAgICAgICAgc3dpdGNoIChpKSB7XG4gICAgICAgICAgICAgIGNhc2UgMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovIDpcbiAgICAgICAgICAgICAgICBlID0gZS5hZGQocik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAyIC8qIENoYW5nZVR5cGUuTW9kaWZpZWQgKi8gOlxuICAgICAgICAgICAgICAgIHQgPSB0LmFkZChyKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDEgLyogQ2hhbmdlVHlwZS5SZW1vdmVkICovIDpcbiAgICAgICAgICAgICAgICBuID0gbi5hZGQocik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBmYWlsKDM4MDE3LCB7XG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZVR5cGU6IGlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpLCBuZXcgVGFyZ2V0Q2hhbmdlKHRoaXMuTWUsIHRoaXMueGUsIGUsIHQsIG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhlIGRvY3VtZW50IGNoYW5nZXMgYW5kIHNldHMgYGhhc1BlbmRpbmdDaGFuZ2VzYCB0byBmYWxzZS5cbiAgICAgKi8gICAgcWUoKSB7XG4gICAgICAgIHRoaXMuT2UgPSAhMSwgdGhpcy5GZSA9IF9fUFJJVkFURV9zbmFwc2hvdENoYW5nZXNNYXAoKTtcbiAgICB9XG4gICAgUWUoZSwgdCkge1xuICAgICAgICB0aGlzLk9lID0gITAsIHRoaXMuRmUgPSB0aGlzLkZlLmluc2VydChlLCB0KTtcbiAgICB9XG4gICAgJGUoZSkge1xuICAgICAgICB0aGlzLk9lID0gITAsIHRoaXMuRmUgPSB0aGlzLkZlLnJlbW92ZShlKTtcbiAgICB9XG4gICAgVWUoKSB7XG4gICAgICAgIHRoaXMudmUgKz0gMTtcbiAgICB9XG4gICAgS2UoKSB7XG4gICAgICAgIHRoaXMudmUgLT0gMSwgX19QUklWQVRFX2hhcmRBc3NlcnQodGhpcy52ZSA+PSAwLCAzMjQxLCB7XG4gICAgICAgICAgICB2ZTogdGhpcy52ZVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgV2UoKSB7XG4gICAgICAgIHRoaXMuT2UgPSAhMCwgdGhpcy54ZSA9ICEwO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGhlbHBlciBjbGFzcyB0byBhY2N1bXVsYXRlIHdhdGNoIGNoYW5nZXMgaW50byBhIFJlbW90ZUV2ZW50LlxuICovXG5jbGFzcyBfX1BSSVZBVEVfV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuR2UgPSBlLCBcbiAgICAgICAgLyoqIFRoZSBpbnRlcm5hbCBzdGF0ZSBvZiBhbGwgdHJhY2tlZCB0YXJnZXRzLiAqL1xuICAgICAgICB0aGlzLnplID0gbmV3IE1hcCwgXG4gICAgICAgIC8qKiBLZWVwcyB0cmFjayBvZiB0aGUgZG9jdW1lbnRzIHRvIHVwZGF0ZSBzaW5jZSB0aGUgbGFzdCByYWlzZWQgc25hcHNob3QuICovXG4gICAgICAgIHRoaXMuamUgPSBfX1BSSVZBVEVfbXV0YWJsZURvY3VtZW50TWFwKCksIHRoaXMuSmUgPSBfX1BSSVZBVEVfZG9jdW1lbnRUYXJnZXRNYXAoKSwgXG4gICAgICAgIC8qKiBBIG1hcHBpbmcgb2YgZG9jdW1lbnQga2V5cyB0byB0aGVpciBzZXQgb2YgdGFyZ2V0IElEcy4gKi9cbiAgICAgICAgdGhpcy5IZSA9IF9fUFJJVkFURV9kb2N1bWVudFRhcmdldE1hcCgpLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgbWFwIG9mIHRhcmdldHMgd2l0aCBleGlzdGVuY2UgZmlsdGVyIG1pc21hdGNoZXMuIFRoZXNlIHRhcmdldHMgYXJlXG4gICAgICAgICAqIGtub3duIHRvIGJlIGluY29uc2lzdGVudCBhbmQgdGhlaXIgbGlzdGVucyBuZWVkcyB0byBiZSByZS1lc3RhYmxpc2hlZCBieVxuICAgICAgICAgKiBSZW1vdGVTdG9yZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuWWUgPSBuZXcgU29ydGVkTWFwKF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJvY2Vzc2VzIGFuZCBhZGRzIHRoZSBEb2N1bWVudFdhdGNoQ2hhbmdlIHRvIHRoZSBjdXJyZW50IHNldCBvZiBjaGFuZ2VzLlxuICAgICAqLyAgICBaZShlKSB7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBlLmJlKSBlLkRlICYmIGUuRGUuaXNGb3VuZERvY3VtZW50KCkgPyB0aGlzLlhlKHQsIGUuRGUpIDogdGhpcy5ldCh0LCBlLmtleSwgZS5EZSk7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBlLnJlbW92ZWRUYXJnZXRJZHMpIHRoaXMuZXQodCwgZS5rZXksIGUuRGUpO1xuICAgIH1cbiAgICAvKiogUHJvY2Vzc2VzIGFuZCBhZGRzIHRoZSBXYXRjaFRhcmdldENoYW5nZSB0byB0aGUgY3VycmVudCBzZXQgb2YgY2hhbmdlcy4gKi8gICAgdHQoZSkge1xuICAgICAgICB0aGlzLmZvckVhY2hUYXJnZXQoZSwgKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMubnQodCk7XG4gICAgICAgICAgICBzd2l0Y2ggKGUuc3RhdGUpIHtcbiAgICAgICAgICAgICAgY2FzZSAwIC8qIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuTm9DaGFuZ2UgKi8gOlxuICAgICAgICAgICAgICAgIHRoaXMucnQodCkgJiYgbi5MZShlLnJlc3VtZVRva2VuKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDEgLyogV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5BZGRlZCAqLyA6XG4gICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBkZWNyZW1lbnQgdGhlIG51bWJlciBvZiBwZW5kaW5nIGFja3MgbmVlZGVkIGZyb20gd2F0Y2hcbiAgICAgICAgICAgICAgICAvLyBmb3IgdGhpcyB0YXJnZXRJZC5cbiAgICAgICAgICAgICAgICBuLktlKCksIG4uTmUgfHwgXG4gICAgICAgICAgICAgICAgLy8gV2UgaGF2ZSBhIGZyZXNobHkgYWRkZWQgdGFyZ2V0LCBzbyB3ZSBuZWVkIHRvIHJlc2V0IGFueSBzdGF0ZVxuICAgICAgICAgICAgICAgIC8vIHRoYXQgd2UgaGFkIHByZXZpb3VzbHkuIFRoaXMgY2FuIGhhcHBlbiBlLmcuIHdoZW4gcmVtb3ZlIGFuZCBhZGRcbiAgICAgICAgICAgICAgICAvLyBiYWNrIGEgdGFyZ2V0IGZvciBleGlzdGVuY2UgZmlsdGVyIG1pc21hdGNoZXMuXG4gICAgICAgICAgICAgICAgbi5xZSgpLCBuLkxlKGUucmVzdW1lVG9rZW4pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgMiAvKiBXYXRjaFRhcmdldENoYW5nZVN0YXRlLlJlbW92ZWQgKi8gOlxuICAgICAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8ga2VlcCB0cmFjayBvZiByZW1vdmVkIHRhcmdldHMgdG8gd2UgY2FuIHBvc3QtZmlsdGVyIGFuZFxuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBhbnkgdGFyZ2V0IGNoYW5nZXMuXG4gICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBkZWNyZW1lbnQgdGhlIG51bWJlciBvZiBwZW5kaW5nIGFja3MgbmVlZGVkIGZyb20gd2F0Y2hcbiAgICAgICAgICAgICAgICAvLyBmb3IgdGhpcyB0YXJnZXRJZC5cbiAgICAgICAgICAgICAgICBuLktlKCksIG4uTmUgfHwgdGhpcy5yZW1vdmVUYXJnZXQodCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAzIC8qIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuQ3VycmVudCAqLyA6XG4gICAgICAgICAgICAgICAgdGhpcy5ydCh0KSAmJiAobi5XZSgpLCBuLkxlKGUucmVzdW1lVG9rZW4pKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDQgLyogV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5SZXNldCAqLyA6XG4gICAgICAgICAgICAgICAgdGhpcy5ydCh0KSAmJiAoXG4gICAgICAgICAgICAgICAgLy8gUmVzZXQgdGhlIHRhcmdldCBhbmQgc3ludGhlc2l6ZXMgcmVtb3ZlcyBmb3IgYWxsIGV4aXN0aW5nXG4gICAgICAgICAgICAgICAgLy8gZG9jdW1lbnRzLiBUaGUgYmFja2VuZCB3aWxsIHJlLWFkZCBhbnkgZG9jdW1lbnRzIHRoYXQgc3RpbGxcbiAgICAgICAgICAgICAgICAvLyBtYXRjaCB0aGUgdGFyZ2V0IGJlZm9yZSBpdCBzZW5kcyB0aGUgbmV4dCBnbG9iYWwgc25hcHNob3QuXG4gICAgICAgICAgICAgICAgdGhpcy5pdCh0KSwgbi5MZShlLnJlc3VtZVRva2VuKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBmYWlsKDU2NzkwLCB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlOiBlLnN0YXRlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBhbGwgdGFyZ2V0SWRzIHRoYXQgdGhlIHdhdGNoIGNoYW5nZSBhcHBsaWVzIHRvOiBlaXRoZXIgdGhlXG4gICAgICogdGFyZ2V0SWRzIGV4cGxpY2l0bHkgbGlzdGVkIGluIHRoZSBjaGFuZ2Ugb3IgdGhlIHRhcmdldElkcyBvZiBhbGwgY3VycmVudGx5XG4gICAgICogYWN0aXZlIHRhcmdldHMuXG4gICAgICovICAgIGZvckVhY2hUYXJnZXQoZSwgdCkge1xuICAgICAgICBlLnRhcmdldElkcy5sZW5ndGggPiAwID8gZS50YXJnZXRJZHMuZm9yRWFjaCh0KSA6IHRoaXMuemUuZm9yRWFjaCgoKGUsIG4pID0+IHtcbiAgICAgICAgICAgIHRoaXMucnQobikgJiYgdChuKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIGV4aXN0ZW5jZSBmaWx0ZXJzIGFuZCBzeW50aGVzaXplcyBkZWxldGVzIGZvciBmaWx0ZXIgbWlzbWF0Y2hlcy5cbiAgICAgKiBUYXJnZXRzIHRoYXQgYXJlIGludmFsaWRhdGVkIGJ5IGZpbHRlciBtaXNtYXRjaGVzIGFyZSBhZGRlZCB0b1xuICAgICAqIGBwZW5kaW5nVGFyZ2V0UmVzZXRzYC5cbiAgICAgKi8gICAgc3QoZSkge1xuICAgICAgICBjb25zdCB0ID0gZS50YXJnZXRJZCwgbiA9IGUuQ2UuY291bnQsIHIgPSB0aGlzLm90KHQpO1xuICAgICAgICBpZiAocikge1xuICAgICAgICAgICAgY29uc3QgaSA9IHIudGFyZ2V0O1xuICAgICAgICAgICAgaWYgKF9fUFJJVkFURV90YXJnZXRJc0RvY3VtZW50VGFyZ2V0KGkpKSBpZiAoMCA9PT0gbikge1xuICAgICAgICAgICAgICAgIC8vIFRoZSBleGlzdGVuY2UgZmlsdGVyIHRvbGQgdXMgdGhlIGRvY3VtZW50IGRvZXMgbm90IGV4aXN0LiBXZSBkZWR1Y2VcbiAgICAgICAgICAgICAgICAvLyB0aGF0IHRoaXMgZG9jdW1lbnQgZG9lcyBub3QgZXhpc3QgYW5kIGFwcGx5IGEgZGVsZXRlZCBkb2N1bWVudCB0b1xuICAgICAgICAgICAgICAgIC8vIG91ciB1cGRhdGVzLiBXaXRob3V0IGFwcGx5aW5nIHRoaXMgZGVsZXRlZCBkb2N1bWVudCB0aGVyZSBtaWdodCBiZVxuICAgICAgICAgICAgICAgIC8vIGFub3RoZXIgcXVlcnkgdGhhdCB3aWxsIHJhaXNlIHRoaXMgZG9jdW1lbnQgYXMgcGFydCBvZiBhIHNuYXBzaG90XG4gICAgICAgICAgICAgICAgLy8gdW50aWwgaXQgaXMgcmVzb2x2ZWQsIGVzc2VudGlhbGx5IGV4cG9zaW5nIGluY29uc2lzdGVuY3kgYmV0d2VlblxuICAgICAgICAgICAgICAgIC8vIHF1ZXJpZXMuXG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBEb2N1bWVudEtleShpLnBhdGgpO1xuICAgICAgICAgICAgICAgIHRoaXMuZXQodCwgZSwgTXV0YWJsZURvY3VtZW50Lm5ld05vRG9jdW1lbnQoZSwgU25hcHNob3RWZXJzaW9uLm1pbigpKSk7XG4gICAgICAgICAgICB9IGVsc2UgX19QUklWQVRFX2hhcmRBc3NlcnQoMSA9PT0gbiwgMjAwMTMsIHtcbiAgICAgICAgICAgICAgICBleHBlY3RlZENvdW50OiBuXG4gICAgICAgICAgICB9KTsgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IHRoaXMuX3QodCk7XG4gICAgICAgICAgICAgICAgLy8gRXhpc3RlbmNlIGZpbHRlciBtaXNtYXRjaC4gTWFyayB0aGUgZG9jdW1lbnRzIGFzIGJlaW5nIGluIGxpbWJvLCBhbmRcbiAgICAgICAgICAgICAgICAvLyByYWlzZSBhIHNuYXBzaG90IHdpdGggYGlzRnJvbUNhY2hlOnRydWVgLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAociAhPT0gbikge1xuICAgICAgICAgICAgICAgICAgICAvLyBBcHBseSBibG9vbSBmaWx0ZXIgdG8gaWRlbnRpZnkgYW5kIG1hcmsgcmVtb3ZlZCBkb2N1bWVudHMuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLnV0KGUpLCBpID0gbiA/IHRoaXMuY3QobiwgZSwgcikgOiAxIC8qIEJsb29tRmlsdGVyQXBwbGljYXRpb25TdGF0dXMuU2tpcHBlZCAqLztcbiAgICAgICAgICAgICAgICAgICAgaWYgKDAgLyogQmxvb21GaWx0ZXJBcHBsaWNhdGlvblN0YXR1cy5TdWNjZXNzICovICE9PSBpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBibG9vbSBmaWx0ZXIgYXBwbGljYXRpb24gZmFpbHMsIHdlIHJlc2V0IHRoZSBtYXBwaW5nIGFuZFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHJpZ2dlciByZS1ydW4gb2YgdGhlIHF1ZXJ5LlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pdCh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSAyIC8qIEJsb29tRmlsdGVyQXBwbGljYXRpb25TdGF0dXMuRmFsc2VQb3NpdGl2ZSAqLyA9PT0gaSA/IFwiVGFyZ2V0UHVycG9zZUV4aXN0ZW5jZUZpbHRlck1pc21hdGNoQmxvb21cIiAvKiBUYXJnZXRQdXJwb3NlLkV4aXN0ZW5jZUZpbHRlck1pc21hdGNoQmxvb20gKi8gOiBcIlRhcmdldFB1cnBvc2VFeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaFwiIC8qIFRhcmdldFB1cnBvc2UuRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2ggKi87XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLlllID0gdGhpcy5ZZS5pbnNlcnQodCwgZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgd3Q/Lmx0KGZ1bmN0aW9uIF9fUFJJVkFURV9jcmVhdGVFeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaEluZm9Gb3JUZXN0aW5nSG9va3MoZSwgdCwgbiwgciwgaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbENhY2hlQ291bnQ6IGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RlbmNlRmlsdGVyQ291bnQ6IHQuY291bnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YWJhc2VJZDogbi5kYXRhYmFzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9qZWN0SWQ6IG4ucHJvamVjdElkXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBvID0gdC51bmNoYW5nZWROYW1lcztcbiAgICAgICAgICAgICAgICAgICAgICAgIG8gJiYgKHMuYmxvb21GaWx0ZXIgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwbGllZDogMCAvKiBCbG9vbUZpbHRlckFwcGxpY2F0aW9uU3RhdHVzLlN1Y2Nlc3MgKi8gPT09IGksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzaENvdW50OiBvPy5oYXNoQ291bnQgPz8gMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRtYXBMZW5ndGg6IG8/LmJpdHM/LmJpdG1hcD8ubGVuZ3RoID8/IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogbz8uYml0cz8ucGFkZGluZyA/PyAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pZ2h0Q29udGFpbjogZSA9PiByPy5taWdodENvbnRhaW4oZSkgPz8gITFcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKHIsIGUuQ2UsIHRoaXMuR2UuaHQoKSwgbiwgaSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZSB0aGUgYmxvb20gZmlsdGVyIGZyb20gdGhlIFwidW5jaGFuZ2VkX25hbWVzXCIgZmllbGQgb2YgYW4gZXhpc3RlbmNlXG4gICAgICogZmlsdGVyLlxuICAgICAqLyAgICB1dChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlLkNlLnVuY2hhbmdlZE5hbWVzO1xuICAgICAgICBpZiAoIXQgfHwgIXQuYml0cykgcmV0dXJuIG51bGw7XG4gICAgICAgIGNvbnN0IHtiaXRzOiB7Yml0bWFwOiBuID0gXCJcIiwgcGFkZGluZzogciA9IDB9LCBoYXNoQ291bnQ6IGkgPSAwfSA9IHQ7XG4gICAgICAgIGxldCBzLCBvO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcyA9IF9fUFJJVkFURV9ub3JtYWxpemVCeXRlU3RyaW5nKG4pLnRvVWludDhBcnJheSgpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIF9fUFJJVkFURV9CYXNlNjREZWNvZGVFcnJvcikgcmV0dXJuIF9fUFJJVkFURV9sb2dXYXJuKFwiRGVjb2RpbmcgdGhlIGJhc2U2NCBibG9vbSBmaWx0ZXIgaW4gZXhpc3RlbmNlIGZpbHRlciBmYWlsZWQgKFwiICsgZS5tZXNzYWdlICsgXCIpOyBpZ25vcmluZyB0aGUgYmxvb20gZmlsdGVyIGFuZCBmYWxsaW5nIGJhY2sgdG8gZnVsbCByZS1xdWVyeS5cIiksIFxuICAgICAgICAgICAgbnVsbDtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEJsb29tRmlsdGVyIHRocm93cyBlcnJvciBpZiB0aGUgaW5wdXRzIGFyZSBpbnZhbGlkLlxuICAgICAgICAgICAgbyA9IG5ldyBCbG9vbUZpbHRlcihzLCByLCBpKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9sb2dXYXJuKGUgaW5zdGFuY2VvZiBfX1BSSVZBVEVfQmxvb21GaWx0ZXJFcnJvciA/IFwiQmxvb21GaWx0ZXIgZXJyb3I6IFwiIDogXCJBcHBseWluZyBibG9vbSBmaWx0ZXIgZmFpbGVkOiBcIiwgZSksIFxuICAgICAgICAgICAgbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMCA9PT0gby5nZSA/IG51bGwgOiBvO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBseSBibG9vbSBmaWx0ZXIgdG8gcmVtb3ZlIHRoZSBkZWxldGVkIGRvY3VtZW50cywgYW5kIHJldHVybiB0aGVcbiAgICAgKiBhcHBsaWNhdGlvbiBzdGF0dXMuXG4gICAgICovICAgIGN0KGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIHQuQ2UuY291bnQgPT09IG4gLSB0aGlzLlB0KGUsIHQudGFyZ2V0SWQpID8gMCAvKiBCbG9vbUZpbHRlckFwcGxpY2F0aW9uU3RhdHVzLlN1Y2Nlc3MgKi8gOiAyIC8qIEJsb29tRmlsdGVyQXBwbGljYXRpb25TdGF0dXMuRmFsc2VQb3NpdGl2ZSAqLztcbiAgICB9XG4gICAgLyoqXG4gICAgICogRmlsdGVyIG91dCByZW1vdmVkIGRvY3VtZW50cyBiYXNlZCBvbiBibG9vbSBmaWx0ZXIgbWVtYmVyc2hpcCByZXN1bHQgYW5kXG4gICAgICogcmV0dXJuIG51bWJlciBvZiBkb2N1bWVudHMgcmVtb3ZlZC5cbiAgICAgKi8gICAgUHQoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5HZS5nZXRSZW1vdGVLZXlzRm9yVGFyZ2V0KHQpO1xuICAgICAgICBsZXQgciA9IDA7XG4gICAgICAgIHJldHVybiBuLmZvckVhY2goKG4gPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IHRoaXMuR2UuaHQoKSwgcyA9IGBwcm9qZWN0cy8ke2kucHJvamVjdElkfS9kYXRhYmFzZXMvJHtpLmRhdGFiYXNlfS9kb2N1bWVudHMvJHtuLnBhdGguY2Fub25pY2FsU3RyaW5nKCl9YDtcbiAgICAgICAgICAgIGUubWlnaHRDb250YWluKHMpIHx8ICh0aGlzLmV0KHQsIG4sIC8qdXBkYXRlZERvY3VtZW50PSovIG51bGwpLCByKyspO1xuICAgICAgICB9KSksIHI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoZSBjdXJyZW50bHkgYWNjdW11bGF0ZWQgc3RhdGUgaW50byBhIHJlbW90ZSBldmVudCBhdCB0aGVcbiAgICAgKiBwcm92aWRlZCBzbmFwc2hvdCB2ZXJzaW9uLiBSZXNldHMgdGhlIGFjY3VtdWxhdGVkIGNoYW5nZXMgYmVmb3JlIHJldHVybmluZy5cbiAgICAgKi8gICAgVHQoZSkge1xuICAgICAgICBjb25zdCB0ID0gbmV3IE1hcDtcbiAgICAgICAgdGhpcy56ZS5mb3JFYWNoKCgobiwgcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IHRoaXMub3Qocik7XG4gICAgICAgICAgICBpZiAoaSkge1xuICAgICAgICAgICAgICAgIGlmIChuLmN1cnJlbnQgJiYgX19QUklWQVRFX3RhcmdldElzRG9jdW1lbnRUYXJnZXQoaS50YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIERvY3VtZW50IHF1ZXJpZXMgZm9yIGRvY3VtZW50IHRoYXQgZG9uJ3QgZXhpc3QgY2FuIHByb2R1Y2UgYW4gZW1wdHlcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVzdWx0IHNldC4gVG8gdXBkYXRlIG91ciBsb2NhbCBjYWNoZSwgd2Ugc3ludGhlc2l6ZSBhIGRvY3VtZW50XG4gICAgICAgICAgICAgICAgICAgIC8vIGRlbGV0ZSBpZiB3ZSBoYXZlIG5vdCBwcmV2aW91c2x5IHJlY2VpdmVkIHRoZSBkb2N1bWVudCBmb3IgdGhpc1xuICAgICAgICAgICAgICAgICAgICAvLyB0YXJnZXQuIFRoaXMgcmVzb2x2ZXMgdGhlIGxpbWJvIHN0YXRlIG9mIHRoZSBkb2N1bWVudCwgcmVtb3ZpbmcgaXRcbiAgICAgICAgICAgICAgICAgICAgLy8gZnJvbSBsaW1ib0RvY3VtZW50UmVmcy5cbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiBJZGVhbGx5IHdlIHdvdWxkIGhhdmUgYW4gZXhwbGljaXQgbG9va3VwIHRhcmdldFxuICAgICAgICAgICAgICAgICAgICAvLyBpbnN0ZWFkIHJlc3VsdGluZyBpbiBhbiBleHBsaWNpdCBkZWxldGUgbWVzc2FnZSBhbmQgd2UgY291bGRcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIHRoaXMgc3BlY2lhbCBsb2dpYy5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBEb2N1bWVudEtleShpLnRhcmdldC5wYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5JdCh0KS5oYXMocikgfHwgdGhpcy5FdChyLCB0KSB8fCB0aGlzLmV0KHIsIHQsIE11dGFibGVEb2N1bWVudC5uZXdOb0RvY3VtZW50KHQsIGUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbi5CZSAmJiAodC5zZXQociwgbi5rZSgpKSwgbi5xZSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBsZXQgbiA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpO1xuICAgICAgICAvLyBXZSBleHRyYWN0IHRoZSBzZXQgb2YgbGltYm8tb25seSBkb2N1bWVudCB1cGRhdGVzIGFzIHRoZSBHQyBsb2dpY1xuICAgICAgICAvLyBzcGVjaWFsLWNhc2VzIGRvY3VtZW50cyB0aGF0IGRvIG5vdCBhcHBlYXIgaW4gdGhlIHRhcmdldCBjYWNoZS5cbiAgICAgICAgXG4gICAgICAgIC8vIFRPRE8oZ3NvbHRpcyk6IEV4cGFuZCBvbiB0aGlzIGNvbW1lbnQgb25jZSBHQyBpcyBhdmFpbGFibGUgaW4gdGhlIEpTXG4gICAgICAgIC8vIGNsaWVudC5cbiAgICAgICAgICAgICAgICB0aGlzLkhlLmZvckVhY2goKChlLCB0KSA9PiB7XG4gICAgICAgICAgICBsZXQgciA9ICEwO1xuICAgICAgICAgICAgdC5mb3JFYWNoV2hpbGUoKGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLm90KGUpO1xuICAgICAgICAgICAgICAgIHJldHVybiAhdCB8fCBcIlRhcmdldFB1cnBvc2VMaW1ib1Jlc29sdXRpb25cIiAvKiBUYXJnZXRQdXJwb3NlLkxpbWJvUmVzb2x1dGlvbiAqLyA9PT0gdC5wdXJwb3NlIHx8IChyID0gITEsIFxuICAgICAgICAgICAgICAgICExKTtcbiAgICAgICAgICAgIH0pKSwgciAmJiAobiA9IG4uYWRkKGUpKTtcbiAgICAgICAgfSkpLCB0aGlzLmplLmZvckVhY2goKCh0LCBuKSA9PiBuLnNldFJlYWRUaW1lKGUpKSk7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgUmVtb3RlRXZlbnQoZSwgdCwgdGhpcy5ZZSwgdGhpcy5qZSwgbik7XG4gICAgICAgIHJldHVybiB0aGlzLmplID0gX19QUklWQVRFX211dGFibGVEb2N1bWVudE1hcCgpLCB0aGlzLkplID0gX19QUklWQVRFX2RvY3VtZW50VGFyZ2V0TWFwKCksIFxuICAgICAgICB0aGlzLkhlID0gX19QUklWQVRFX2RvY3VtZW50VGFyZ2V0TWFwKCksIHRoaXMuWWUgPSBuZXcgU29ydGVkTWFwKF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKSwgXG4gICAgICAgIHI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgdGhlIHByb3ZpZGVkIGRvY3VtZW50IHRvIHRoZSBpbnRlcm5hbCBsaXN0IG9mIGRvY3VtZW50IHVwZGF0ZXMgYW5kXG4gICAgICogaXRzIGRvY3VtZW50IGtleSB0byB0aGUgZ2l2ZW4gdGFyZ2V0J3MgbWFwcGluZy5cbiAgICAgKi9cbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICAgIFhlKGUsIHQpIHtcbiAgICAgICAgaWYgKCF0aGlzLnJ0KGUpKSByZXR1cm47XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLkV0KGUsIHQua2V5KSA/IDIgLyogQ2hhbmdlVHlwZS5Nb2RpZmllZCAqLyA6IDAgLyogQ2hhbmdlVHlwZS5BZGRlZCAqLztcbiAgICAgICAgdGhpcy5udChlKS5RZSh0LmtleSwgbiksIHRoaXMuamUgPSB0aGlzLmplLmluc2VydCh0LmtleSwgdCksIHRoaXMuSmUgPSB0aGlzLkplLmluc2VydCh0LmtleSwgdGhpcy5JdCh0LmtleSkuYWRkKGUpKSwgXG4gICAgICAgIHRoaXMuSGUgPSB0aGlzLkhlLmluc2VydCh0LmtleSwgdGhpcy5kdCh0LmtleSkuYWRkKGUpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyB0aGUgcHJvdmlkZWQgZG9jdW1lbnQgZnJvbSB0aGUgdGFyZ2V0IG1hcHBpbmcuIElmIHRoZVxuICAgICAqIGRvY3VtZW50IG5vIGxvbmdlciBtYXRjaGVzIHRoZSB0YXJnZXQsIGJ1dCB0aGUgZG9jdW1lbnQncyBzdGF0ZSBpcyBzdGlsbFxuICAgICAqIGtub3duIChlLmcuIHdlIGtub3cgdGhhdCB0aGUgZG9jdW1lbnQgd2FzIGRlbGV0ZWQgb3Igd2UgcmVjZWl2ZWQgdGhlIGNoYW5nZVxuICAgICAqIHRoYXQgY2F1c2VkIHRoZSBmaWx0ZXIgbWlzbWF0Y2gpLCB0aGUgbmV3IGRvY3VtZW50IGNhbiBiZSBwcm92aWRlZFxuICAgICAqIHRvIHVwZGF0ZSB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlLlxuICAgICAqL1xuICAgIC8vIFZpc2libGUgZm9yIHRlc3RpbmcuXG4gICAgZXQoZSwgdCwgbikge1xuICAgICAgICBpZiAoIXRoaXMucnQoZSkpIHJldHVybjtcbiAgICAgICAgY29uc3QgciA9IHRoaXMubnQoZSk7XG4gICAgICAgIHRoaXMuRXQoZSwgdCkgPyByLlFlKHQsIDEgLyogQ2hhbmdlVHlwZS5SZW1vdmVkICovKSA6IFxuICAgICAgICAvLyBUaGUgZG9jdW1lbnQgbWF5IGhhdmUgZW50ZXJlZCBhbmQgbGVmdCB0aGUgdGFyZ2V0IGJlZm9yZSB3ZSByYWlzZWQgYVxuICAgICAgICAvLyBzbmFwc2hvdCwgc28gd2UgY2FuIGp1c3QgaWdub3JlIHRoZSBjaGFuZ2UuXG4gICAgICAgIHIuJGUodCksIHRoaXMuSGUgPSB0aGlzLkhlLmluc2VydCh0LCB0aGlzLmR0KHQpLmRlbGV0ZShlKSksIHRoaXMuSGUgPSB0aGlzLkhlLmluc2VydCh0LCB0aGlzLmR0KHQpLmFkZChlKSksIFxuICAgICAgICBuICYmICh0aGlzLmplID0gdGhpcy5qZS5pbnNlcnQodCwgbikpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXQoZSkge1xuICAgICAgICB0aGlzLnplLmRlbGV0ZShlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY3VycmVudCBjb3VudCBvZiBkb2N1bWVudHMgaW4gdGhlIHRhcmdldC4gVGhpcyBpbmNsdWRlcyBib3RoXG4gICAgICogdGhlIG51bWJlciBvZiBkb2N1bWVudHMgdGhhdCB0aGUgTG9jYWxTdG9yZSBjb25zaWRlcnMgdG8gYmUgcGFydCBvZiB0aGVcbiAgICAgKiB0YXJnZXQgYXMgd2VsbCBhcyBhbnkgYWNjdW11bGF0ZWQgY2hhbmdlcy5cbiAgICAgKi8gICAgX3QoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5udChlKS5rZSgpO1xuICAgICAgICByZXR1cm4gdGhpcy5HZS5nZXRSZW1vdGVLZXlzRm9yVGFyZ2V0KGUpLnNpemUgKyB0LmFkZGVkRG9jdW1lbnRzLnNpemUgLSB0LnJlbW92ZWREb2N1bWVudHMuc2l6ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW5jcmVtZW50IHRoZSBudW1iZXIgb2YgYWNrcyBuZWVkZWQgZnJvbSB3YXRjaCBiZWZvcmUgd2UgY2FuIGNvbnNpZGVyIHRoZVxuICAgICAqIHNlcnZlciB0byBiZSAnaW4tc3luYycgd2l0aCB0aGUgY2xpZW50J3MgYWN0aXZlIHRhcmdldHMuXG4gICAgICovICAgIFVlKGUpIHtcbiAgICAgICAgdGhpcy5udChlKS5VZSgpO1xuICAgIH1cbiAgICBudChlKSB7XG4gICAgICAgIGxldCB0ID0gdGhpcy56ZS5nZXQoZSk7XG4gICAgICAgIHJldHVybiB0IHx8ICh0ID0gbmV3IF9fUFJJVkFURV9UYXJnZXRTdGF0ZSwgdGhpcy56ZS5zZXQoZSwgdCkpLCB0O1xuICAgIH1cbiAgICBkdChlKSB7XG4gICAgICAgIGxldCB0ID0gdGhpcy5IZS5nZXQoZSk7XG4gICAgICAgIHJldHVybiB0IHx8ICh0ID0gbmV3IFNvcnRlZFNldChfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvciksIHRoaXMuSGUgPSB0aGlzLkhlLmluc2VydChlLCB0KSksIFxuICAgICAgICB0O1xuICAgIH1cbiAgICBJdChlKSB7XG4gICAgICAgIGxldCB0ID0gdGhpcy5KZS5nZXQoZSk7XG4gICAgICAgIHJldHVybiB0IHx8ICh0ID0gbmV3IFNvcnRlZFNldChfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvciksIHRoaXMuSmUgPSB0aGlzLkplLmluc2VydChlLCB0KSksIFxuICAgICAgICB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBWZXJpZmllcyB0aGF0IHRoZSB1c2VyIGlzIHN0aWxsIGludGVyZXN0ZWQgaW4gdGhpcyB0YXJnZXQgKGJ5IGNhbGxpbmdcbiAgICAgKiBgZ2V0VGFyZ2V0RGF0YUZvclRhcmdldCgpYCkgYW5kIHRoYXQgd2UgYXJlIG5vdCB3YWl0aW5nIGZvciBwZW5kaW5nIEFERHNcbiAgICAgKiBmcm9tIHdhdGNoLlxuICAgICAqLyAgICBydChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBudWxsICE9PSB0aGlzLm90KGUpO1xuICAgICAgICByZXR1cm4gdCB8fCBfX1BSSVZBVEVfbG9nRGVidWcoXCJXYXRjaENoYW5nZUFnZ3JlZ2F0b3JcIiwgXCJEZXRlY3RlZCBpbmFjdGl2ZSB0YXJnZXRcIiwgZSksIFxuICAgICAgICB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBUYXJnZXREYXRhIGZvciBhbiBhY3RpdmUgdGFyZ2V0IChpLmUuIGEgdGFyZ2V0IHRoYXQgdGhlIHVzZXJcbiAgICAgKiBpcyBzdGlsbCBpbnRlcmVzdGVkIGluIHRoYXQgaGFzIG5vIG91dHN0YW5kaW5nIHRhcmdldCBjaGFuZ2UgcmVxdWVzdHMpLlxuICAgICAqLyAgICBvdChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnplLmdldChlKTtcbiAgICAgICAgcmV0dXJuIHQgJiYgdC5OZSA/IG51bGwgOiB0aGlzLkdlLkF0KGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhlIHN0YXRlIG9mIGEgV2F0Y2ggdGFyZ2V0IHRvIGl0cyBpbml0aWFsIHN0YXRlIChlLmcuIHNldHNcbiAgICAgKiAnY3VycmVudCcgdG8gZmFsc2UsIGNsZWFycyB0aGUgcmVzdW1lIHRva2VuIGFuZCByZW1vdmVzIGl0cyB0YXJnZXQgbWFwcGluZ1xuICAgICAqIGZyb20gYWxsIGRvY3VtZW50cykuXG4gICAgICovICAgIGl0KGUpIHtcbiAgICAgICAgdGhpcy56ZS5zZXQoZSwgbmV3IF9fUFJJVkFURV9UYXJnZXRTdGF0ZSk7XG4gICAgICAgIHRoaXMuR2UuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldChlKS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuZXQoZSwgdCwgLyp1cGRhdGVkRG9jdW1lbnQ9Ki8gbnVsbCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBMb2NhbFN0b3JlIGNvbnNpZGVycyB0aGUgZG9jdW1lbnQgdG8gYmUgcGFydCBvZiB0aGVcbiAgICAgKiBzcGVjaWZpZWQgdGFyZ2V0LlxuICAgICAqLyAgICBFdChlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLkdlLmdldFJlbW90ZUtleXNGb3JUYXJnZXQoZSkuaGFzKHQpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2RvY3VtZW50VGFyZ2V0TWFwKCkge1xuICAgIHJldHVybiBuZXcgU29ydGVkTWFwKERvY3VtZW50S2V5LmNvbXBhcmF0b3IpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfc25hcHNob3RDaGFuZ2VzTWFwKCkge1xuICAgIHJldHVybiBuZXcgU29ydGVkTWFwKERvY3VtZW50S2V5LmNvbXBhcmF0b3IpO1xufVxuXG5jb25zdCBidCA9ICgoKSA9PiB7XG4gICAgY29uc3QgZSA9IHtcbiAgICAgICAgYXNjOiBcIkFTQ0VORElOR1wiLFxuICAgICAgICBkZXNjOiBcIkRFU0NFTkRJTkdcIlxuICAgIH07XG4gICAgcmV0dXJuIGU7XG59KSgpLCBEdCA9ICgoKSA9PiB7XG4gICAgY29uc3QgZSA9IHtcbiAgICAgICAgXCI8XCI6IFwiTEVTU19USEFOXCIsXG4gICAgICAgIFwiPD1cIjogXCJMRVNTX1RIQU5fT1JfRVFVQUxcIixcbiAgICAgICAgXCI+XCI6IFwiR1JFQVRFUl9USEFOXCIsXG4gICAgICAgIFwiPj1cIjogXCJHUkVBVEVSX1RIQU5fT1JfRVFVQUxcIixcbiAgICAgICAgXCI9PVwiOiBcIkVRVUFMXCIsXG4gICAgICAgIFwiIT1cIjogXCJOT1RfRVFVQUxcIixcbiAgICAgICAgXCJhcnJheS1jb250YWluc1wiOiBcIkFSUkFZX0NPTlRBSU5TXCIsXG4gICAgICAgIGluOiBcIklOXCIsXG4gICAgICAgIFwibm90LWluXCI6IFwiTk9UX0lOXCIsXG4gICAgICAgIFwiYXJyYXktY29udGFpbnMtYW55XCI6IFwiQVJSQVlfQ09OVEFJTlNfQU5ZXCJcbiAgICB9O1xuICAgIHJldHVybiBlO1xufSkoKSwgQ3QgPSAoKCkgPT4ge1xuICAgIGNvbnN0IGUgPSB7XG4gICAgICAgIGFuZDogXCJBTkRcIixcbiAgICAgICAgb3I6IFwiT1JcIlxuICAgIH07XG4gICAgcmV0dXJuIGU7XG59KSgpO1xuXG4vKipcbiAqIFRoaXMgY2xhc3MgZ2VuZXJhdGVzIEpzb25PYmplY3QgdmFsdWVzIGZvciB0aGUgRGF0YXN0b3JlIEFQSSBzdWl0YWJsZSBmb3JcbiAqIHNlbmRpbmcgdG8gZWl0aGVyIEdSUEMgc3R1YiBtZXRob2RzIG9yIHZpYSB0aGUgSlNPTi9IVFRQIFJFU1QgQVBJLlxuICpcbiAqIFRoZSBzZXJpYWxpemVyIHN1cHBvcnRzIGJvdGggUHJvdG9idWYuanMgYW5kIFByb3RvMyBKU09OIGZvcm1hdHMuIEJ5XG4gKiBzZXR0aW5nIGB1c2VQcm90bzNKc29uYCB0byB0cnVlLCB0aGUgc2VyaWFsaXplciB3aWxsIHVzZSB0aGUgUHJvdG8zIEpTT05cbiAqIGZvcm1hdC5cbiAqXG4gKiBGb3IgYSBkZXNjcmlwdGlvbiBvZiB0aGUgUHJvdG8zIEpTT04gZm9ybWF0IGNoZWNrXG4gKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9wcm90b2NvbC1idWZmZXJzL2RvY3MvcHJvdG8zI2pzb25cbiAqXG4gKiBUT0RPKGtsaW10KTogV2UgY2FuIHJlbW92ZSB0aGUgZGF0YWJhc2VJZCBhcmd1bWVudCBpZiB3ZSBrZWVwIHRoZSBmdWxsXG4gKiByZXNvdXJjZSBuYW1lIGluIGRvY3VtZW50cy5cbiAqL1xuY2xhc3MgSnNvblByb3RvU2VyaWFsaXplciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLmRhdGFiYXNlSWQgPSBlLCB0aGlzLnVzZVByb3RvM0pzb24gPSB0O1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgdmFsdWUgZm9yIGEgbnVtYmVyIChvciBudWxsKSB0aGF0J3MgYXBwcm9wcmlhdGUgdG8gcHV0IGludG9cbiAqIGEgZ29vZ2xlLnByb3RvYnVmLkludDMyVmFsdWUgcHJvdG8uXG4gKiBETyBOT1QgVVNFIFRISVMgRk9SIEFOWVRISU5HIEVMU0UuXG4gKiBUaGlzIG1ldGhvZCBjaGVhdHMuIEl0J3MgdHlwZWQgYXMgcmV0dXJuaW5nIFwibnVtYmVyXCIgYmVjYXVzZSB0aGF0J3Mgd2hhdFxuICogb3VyIGdlbmVyYXRlZCBwcm90byBpbnRlcmZhY2VzIHNheSBJbnQzMlZhbHVlIG11c3QgYmUuIEJ1dCBHUlBDIGFjdHVhbGx5XG4gKiBleHBlY3RzIGEgeyB2YWx1ZTogPG51bWJlcj4gfSBzdHJ1Y3QuXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV90b0ludDMyUHJvdG8oZSwgdCkge1xuICAgIHJldHVybiBlLnVzZVByb3RvM0pzb24gfHwgX19QUklWQVRFX2lzTnVsbE9yVW5kZWZpbmVkKHQpID8gdCA6IHtcbiAgICAgICAgdmFsdWU6IHRcbiAgICB9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBudW1iZXIgKG9yIG51bGwpIGZyb20gYSBnb29nbGUucHJvdG9idWYuSW50MzJWYWx1ZSBwcm90by5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIGEgdmFsdWUgZm9yIGEgRGF0ZSB0aGF0J3MgYXBwcm9wcmlhdGUgdG8gcHV0IGludG8gYSBwcm90by5cbiAqL1xuZnVuY3Rpb24gdG9UaW1lc3RhbXAoZSwgdCkge1xuICAgIGlmIChlLnVzZVByb3RvM0pzb24pIHtcbiAgICAgICAgcmV0dXJuIGAke25ldyBEYXRlKDFlMyAqIHQuc2Vjb25kcykudG9JU09TdHJpbmcoKS5yZXBsYWNlKC9cXC5cXGQqLywgXCJcIikucmVwbGFjZShcIlpcIiwgXCJcIil9LiR7KFwiMDAwMDAwMDAwXCIgKyB0Lm5hbm9zZWNvbmRzKS5zbGljZSgtOSl9WmA7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHNlY29uZHM6IFwiXCIgKyB0LnNlY29uZHMsXG4gICAgICAgIG5hbm9zOiB0Lm5hbm9zZWNvbmRzXG4gICAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgVGltZXN0YW1wIHR5cGVkIG9iamVjdCBnaXZlbiBwcm90b2J1ZiB0aW1lc3RhbXAgdmFsdWUuXG4gKi9cbi8qKlxuICogUmV0dXJucyBhIHZhbHVlIGZvciBieXRlcyB0aGF0J3MgYXBwcm9wcmlhdGUgdG8gcHV0IGluIGEgcHJvdG8uXG4gKlxuICogVmlzaWJsZSBmb3IgdGVzdGluZy5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX3RvQnl0ZXMoZSwgdCkge1xuICAgIHJldHVybiBlLnVzZVByb3RvM0pzb24gPyB0LnRvQmFzZTY0KCkgOiB0LnRvVWludDhBcnJheSgpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBCeXRlU3RyaW5nIGJhc2VkIG9uIHRoZSBwcm90byBzdHJpbmcgdmFsdWUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3RvVmVyc2lvbihlLCB0KSB7XG4gICAgcmV0dXJuIHRvVGltZXN0YW1wKGUsIHQudG9UaW1lc3RhbXAoKSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tVmVyc2lvbihlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9oYXJkQXNzZXJ0KCEhZSwgNDkyMzIpLCBTbmFwc2hvdFZlcnNpb24uZnJvbVRpbWVzdGFtcChmdW5jdGlvbiBmcm9tVGltZXN0YW1wKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9ub3JtYWxpemVUaW1lc3RhbXAoZSk7XG4gICAgICAgIHJldHVybiBuZXcgVGltZXN0YW1wKHQuc2Vjb25kcywgdC5uYW5vcyk7XG4gICAgfShlKSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV90b1Jlc291cmNlTmFtZShlLCB0KSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV90b1Jlc291cmNlUGF0aChlLCB0KS5jYW5vbmljYWxTdHJpbmcoKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3RvUmVzb3VyY2VQYXRoKGUsIHQpIHtcbiAgICBjb25zdCBuID0gZnVuY3Rpb24gX19QUklWQVRFX2Z1bGx5UXVhbGlmaWVkUHJlZml4UGF0aChlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVzb3VyY2VQYXRoKFsgXCJwcm9qZWN0c1wiLCBlLnByb2plY3RJZCwgXCJkYXRhYmFzZXNcIiwgZS5kYXRhYmFzZSBdKTtcbiAgICB9KGUpLmNoaWxkKFwiZG9jdW1lbnRzXCIpO1xuICAgIHJldHVybiB2b2lkIDAgPT09IHQgPyBuIDogbi5jaGlsZCh0KTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2Zyb21SZXNvdXJjZU5hbWUoZSkge1xuICAgIGNvbnN0IHQgPSBSZXNvdXJjZVBhdGguZnJvbVN0cmluZyhlKTtcbiAgICByZXR1cm4gX19QUklWQVRFX2hhcmRBc3NlcnQoX19QUklWQVRFX2lzVmFsaWRSZXNvdXJjZU5hbWUodCksIDEwMTkwLCB7XG4gICAgICAgIGtleTogdC50b1N0cmluZygpXG4gICAgfSksIHQ7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV90b05hbWUoZSwgdCkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfdG9SZXNvdXJjZU5hbWUoZS5kYXRhYmFzZUlkLCB0LnBhdGgpO1xufVxuXG5mdW5jdGlvbiBmcm9tTmFtZShlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9mcm9tUmVzb3VyY2VOYW1lKHQpO1xuICAgIGlmIChuLmdldCgxKSAhPT0gZS5kYXRhYmFzZUlkLnByb2plY3RJZCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKE4uSU5WQUxJRF9BUkdVTUVOVCwgXCJUcmllZCB0byBkZXNlcmlhbGl6ZSBrZXkgZnJvbSBkaWZmZXJlbnQgcHJvamVjdDogXCIgKyBuLmdldCgxKSArIFwiIHZzIFwiICsgZS5kYXRhYmFzZUlkLnByb2plY3RJZCk7XG4gICAgaWYgKG4uZ2V0KDMpICE9PSBlLmRhdGFiYXNlSWQuZGF0YWJhc2UpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihOLklOVkFMSURfQVJHVU1FTlQsIFwiVHJpZWQgdG8gZGVzZXJpYWxpemUga2V5IGZyb20gZGlmZmVyZW50IGRhdGFiYXNlOiBcIiArIG4uZ2V0KDMpICsgXCIgdnMgXCIgKyBlLmRhdGFiYXNlSWQuZGF0YWJhc2UpO1xuICAgIHJldHVybiBuZXcgRG9jdW1lbnRLZXkoX19QUklWQVRFX2V4dHJhY3RMb2NhbFBhdGhGcm9tUmVzb3VyY2VOYW1lKG4pKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3RvUXVlcnlQYXRoKGUsIHQpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX3RvUmVzb3VyY2VOYW1lKGUuZGF0YWJhc2VJZCwgdCk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tUXVlcnlQYXRoKGUpIHtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX2Zyb21SZXNvdXJjZU5hbWUoZSk7XG4gICAgLy8gSW4gdjFiZXRhMSBxdWVyaWVzIGZvciBjb2xsZWN0aW9ucyBhdCB0aGUgcm9vdCBkaWQgbm90IGhhdmUgYSB0cmFpbGluZ1xuICAgIC8vIFwiL2RvY3VtZW50c1wiLiBJbiB2MSBhbGwgcmVzb3VyY2UgcGF0aHMgY29udGFpbiBcIi9kb2N1bWVudHNcIi4gUHJlc2VydmUgdGhlXG4gICAgLy8gYWJpbGl0eSB0byByZWFkIHRoZSB2MWJldGExIGZvcm0gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBxdWVyaWVzIHBlcnNpc3RlZFxuICAgIC8vIGluIHRoZSBsb2NhbCB0YXJnZXQgY2FjaGUuXG4gICAgICAgIHJldHVybiA0ID09PSB0Lmxlbmd0aCA/IFJlc291cmNlUGF0aC5lbXB0eVBhdGgoKSA6IF9fUFJJVkFURV9leHRyYWN0TG9jYWxQYXRoRnJvbVJlc291cmNlTmFtZSh0KTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2dldEVuY29kZWREYXRhYmFzZUlkKGUpIHtcbiAgICByZXR1cm4gbmV3IFJlc291cmNlUGF0aChbIFwicHJvamVjdHNcIiwgZS5kYXRhYmFzZUlkLnByb2plY3RJZCwgXCJkYXRhYmFzZXNcIiwgZS5kYXRhYmFzZUlkLmRhdGFiYXNlIF0pLmNhbm9uaWNhbFN0cmluZygpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZXh0cmFjdExvY2FsUGF0aEZyb21SZXNvdXJjZU5hbWUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfaGFyZEFzc2VydChlLmxlbmd0aCA+IDQgJiYgXCJkb2N1bWVudHNcIiA9PT0gZS5nZXQoNCksIDI5MDkxLCB7XG4gICAgICAgIGtleTogZS50b1N0cmluZygpXG4gICAgfSksIGUucG9wRmlyc3QoNSk7XG59XG5cbi8qKiBDcmVhdGVzIGEgRG9jdW1lbnQgcHJvdG8gZnJvbSBrZXkgYW5kIGZpZWxkcyAoYnV0IG5vIGNyZWF0ZS91cGRhdGUgdGltZSkgKi8gZnVuY3Rpb24gX19QUklWQVRFX3RvTXV0YXRpb25Eb2N1bWVudChlLCB0LCBuKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogX19QUklWQVRFX3RvTmFtZShlLCB0KSxcbiAgICAgICAgZmllbGRzOiBuLnZhbHVlLm1hcFZhbHVlLmZpZWxkc1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tRG9jdW1lbnQoZSwgdCwgbikge1xuICAgIGNvbnN0IHIgPSBmcm9tTmFtZShlLCB0Lm5hbWUpLCBpID0gX19QUklWQVRFX2Zyb21WZXJzaW9uKHQudXBkYXRlVGltZSksIHMgPSB0LmNyZWF0ZVRpbWUgPyBfX1BSSVZBVEVfZnJvbVZlcnNpb24odC5jcmVhdGVUaW1lKSA6IFNuYXBzaG90VmVyc2lvbi5taW4oKSwgbyA9IG5ldyBPYmplY3RWYWx1ZSh7XG4gICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICBmaWVsZHM6IHQuZmllbGRzXG4gICAgICAgIH1cbiAgICB9KSwgXyA9IE11dGFibGVEb2N1bWVudC5uZXdGb3VuZERvY3VtZW50KHIsIGksIHMsIG8pO1xuICAgIHJldHVybiBuICYmIF8uc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCksIG4gPyBfLnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpIDogXztcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2Zyb21CYXRjaEdldERvY3VtZW50c1Jlc3BvbnNlKGUsIHQpIHtcbiAgICByZXR1cm4gXCJmb3VuZFwiIGluIHQgPyBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbUZvdW5kKGUsIHQpIHtcbiAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQoISF0LmZvdW5kLCA0MzU3MSksIHQuZm91bmQubmFtZSwgdC5mb3VuZC51cGRhdGVUaW1lO1xuICAgICAgICBjb25zdCBuID0gZnJvbU5hbWUoZSwgdC5mb3VuZC5uYW1lKSwgciA9IF9fUFJJVkFURV9mcm9tVmVyc2lvbih0LmZvdW5kLnVwZGF0ZVRpbWUpLCBpID0gdC5mb3VuZC5jcmVhdGVUaW1lID8gX19QUklWQVRFX2Zyb21WZXJzaW9uKHQuZm91bmQuY3JlYXRlVGltZSkgOiBTbmFwc2hvdFZlcnNpb24ubWluKCksIHMgPSBuZXcgT2JqZWN0VmFsdWUoe1xuICAgICAgICAgICAgbWFwVmFsdWU6IHtcbiAgICAgICAgICAgICAgICBmaWVsZHM6IHQuZm91bmQuZmllbGRzXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gTXV0YWJsZURvY3VtZW50Lm5ld0ZvdW5kRG9jdW1lbnQobiwgciwgaSwgcyk7XG4gICAgfShlLCB0KSA6IFwibWlzc2luZ1wiIGluIHQgPyBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbU1pc3NpbmcoZSwgdCkge1xuICAgICAgICBfX1BSSVZBVEVfaGFyZEFzc2VydCghIXQubWlzc2luZywgMzg5NCksIF9fUFJJVkFURV9oYXJkQXNzZXJ0KCEhdC5yZWFkVGltZSwgMjI5MzMpO1xuICAgICAgICBjb25zdCBuID0gZnJvbU5hbWUoZSwgdC5taXNzaW5nKSwgciA9IF9fUFJJVkFURV9mcm9tVmVyc2lvbih0LnJlYWRUaW1lKTtcbiAgICAgICAgcmV0dXJuIE11dGFibGVEb2N1bWVudC5uZXdOb0RvY3VtZW50KG4sIHIpO1xuICAgIH0oZSwgdCkgOiBmYWlsKDcyMzQsIHtcbiAgICAgICAgcmVzdWx0OiB0XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tV2F0Y2hDaGFuZ2UoZSwgdCkge1xuICAgIGxldCBuO1xuICAgIGlmIChcInRhcmdldENoYW5nZVwiIGluIHQpIHtcbiAgICAgICAgdC50YXJnZXRDaGFuZ2U7XG4gICAgICAgIC8vIHByb3RvMyBkZWZhdWx0IHZhbHVlIGlzIHVuc2V0IGluIEpTT04gKHVuZGVmaW5lZCksIHNvIHVzZSAnTk9fQ0hBTkdFJ1xuICAgICAgICAvLyBpZiB1bnNldFxuICAgICAgICBjb25zdCByID0gZnVuY3Rpb24gX19QUklWQVRFX2Zyb21XYXRjaFRhcmdldENoYW5nZVN0YXRlKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBcIk5PX0NIQU5HRVwiID09PSBlID8gMCAvKiBXYXRjaFRhcmdldENoYW5nZVN0YXRlLk5vQ2hhbmdlICovIDogXCJBRERcIiA9PT0gZSA/IDEgLyogV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5BZGRlZCAqLyA6IFwiUkVNT1ZFXCIgPT09IGUgPyAyIC8qIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuUmVtb3ZlZCAqLyA6IFwiQ1VSUkVOVFwiID09PSBlID8gMyAvKiBXYXRjaFRhcmdldENoYW5nZVN0YXRlLkN1cnJlbnQgKi8gOiBcIlJFU0VUXCIgPT09IGUgPyA0IC8qIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuUmVzZXQgKi8gOiBmYWlsKDM5MzEzLCB7XG4gICAgICAgICAgICAgICAgc3RhdGU6IGVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KHQudGFyZ2V0Q2hhbmdlLnRhcmdldENoYW5nZVR5cGUgfHwgXCJOT19DSEFOR0VcIiksIGkgPSB0LnRhcmdldENoYW5nZS50YXJnZXRJZHMgfHwgW10sIHMgPSBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbUJ5dGVzKGUsIHQpIHtcbiAgICAgICAgICAgIHJldHVybiBlLnVzZVByb3RvM0pzb24gPyAoX19QUklWQVRFX2hhcmRBc3NlcnQodm9pZCAwID09PSB0IHx8IFwic3RyaW5nXCIgPT0gdHlwZW9mIHQsIDU4MTIzKSwgXG4gICAgICAgICAgICBCeXRlU3RyaW5nLmZyb21CYXNlNjRTdHJpbmcodCB8fCBcIlwiKSkgOiAoX19QUklWQVRFX2hhcmRBc3NlcnQodm9pZCAwID09PSB0IHx8IFxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHZhbHVlIGlzIGFuIGluc3RhbmNlIG9mIGJvdGggQnVmZmVyIGFuZCBVaW50OEFycmF5LFxuICAgICAgICAgICAgLy8gZGVzcGl0ZSB0aGUgZmFjdCB0aGF0IEJ1ZmZlciBleHRlbmRzIFVpbnQ4QXJyYXkuIEluIHNvbWVcbiAgICAgICAgICAgIC8vIGVudmlyb25tZW50cywgc3VjaCBhcyBqc2RvbSwgdGhlIHByb3RvdHlwZSBjaGFpbiBvZiBCdWZmZXJcbiAgICAgICAgICAgIC8vIGRvZXMgbm90IGluZGljYXRlIHRoYXQgaXQgZXh0ZW5kcyBVaW50OEFycmF5LlxuICAgICAgICAgICAgdCBpbnN0YW5jZW9mIEJ1ZmZlciB8fCB0IGluc3RhbmNlb2YgVWludDhBcnJheSwgMTYxOTMpLCBCeXRlU3RyaW5nLmZyb21VaW50OEFycmF5KHQgfHwgbmV3IFVpbnQ4QXJyYXkpKTtcbiAgICAgICAgfShlLCB0LnRhcmdldENoYW5nZS5yZXN1bWVUb2tlbiksIG8gPSB0LnRhcmdldENoYW5nZS5jYXVzZSwgXyA9IG8gJiYgZnVuY3Rpb24gX19QUklWQVRFX2Zyb21ScGNTdGF0dXMoZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IHZvaWQgMCA9PT0gZS5jb2RlID8gTi5VTktOT1dOIDogX19QUklWQVRFX21hcENvZGVGcm9tUnBjQ29kZShlLmNvZGUpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBGaXJlc3RvcmVFcnJvcih0LCBlLm1lc3NhZ2UgfHwgXCJcIik7XG4gICAgICAgIH0obyk7XG4gICAgICAgIG4gPSBuZXcgX19QUklWQVRFX1dhdGNoVGFyZ2V0Q2hhbmdlKHIsIGksIHMsIF8gfHwgbnVsbCk7XG4gICAgfSBlbHNlIGlmIChcImRvY3VtZW50Q2hhbmdlXCIgaW4gdCkge1xuICAgICAgICB0LmRvY3VtZW50Q2hhbmdlO1xuICAgICAgICBjb25zdCByID0gdC5kb2N1bWVudENoYW5nZTtcbiAgICAgICAgci5kb2N1bWVudCwgci5kb2N1bWVudC5uYW1lLCByLmRvY3VtZW50LnVwZGF0ZVRpbWU7XG4gICAgICAgIGNvbnN0IGkgPSBmcm9tTmFtZShlLCByLmRvY3VtZW50Lm5hbWUpLCBzID0gX19QUklWQVRFX2Zyb21WZXJzaW9uKHIuZG9jdW1lbnQudXBkYXRlVGltZSksIG8gPSByLmRvY3VtZW50LmNyZWF0ZVRpbWUgPyBfX1BSSVZBVEVfZnJvbVZlcnNpb24oci5kb2N1bWVudC5jcmVhdGVUaW1lKSA6IFNuYXBzaG90VmVyc2lvbi5taW4oKSwgXyA9IG5ldyBPYmplY3RWYWx1ZSh7XG4gICAgICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgICAgIGZpZWxkczogci5kb2N1bWVudC5maWVsZHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSksIGEgPSBNdXRhYmxlRG9jdW1lbnQubmV3Rm91bmREb2N1bWVudChpLCBzLCBvLCBfKSwgdSA9IHIudGFyZ2V0SWRzIHx8IFtdLCBjID0gci5yZW1vdmVkVGFyZ2V0SWRzIHx8IFtdO1xuICAgICAgICBuID0gbmV3IF9fUFJJVkFURV9Eb2N1bWVudFdhdGNoQ2hhbmdlKHUsIGMsIGEua2V5LCBhKTtcbiAgICB9IGVsc2UgaWYgKFwiZG9jdW1lbnREZWxldGVcIiBpbiB0KSB7XG4gICAgICAgIHQuZG9jdW1lbnREZWxldGU7XG4gICAgICAgIGNvbnN0IHIgPSB0LmRvY3VtZW50RGVsZXRlO1xuICAgICAgICByLmRvY3VtZW50O1xuICAgICAgICBjb25zdCBpID0gZnJvbU5hbWUoZSwgci5kb2N1bWVudCksIHMgPSByLnJlYWRUaW1lID8gX19QUklWQVRFX2Zyb21WZXJzaW9uKHIucmVhZFRpbWUpIDogU25hcHNob3RWZXJzaW9uLm1pbigpLCBvID0gTXV0YWJsZURvY3VtZW50Lm5ld05vRG9jdW1lbnQoaSwgcyksIF8gPSByLnJlbW92ZWRUYXJnZXRJZHMgfHwgW107XG4gICAgICAgIG4gPSBuZXcgX19QUklWQVRFX0RvY3VtZW50V2F0Y2hDaGFuZ2UoW10sIF8sIG8ua2V5LCBvKTtcbiAgICB9IGVsc2UgaWYgKFwiZG9jdW1lbnRSZW1vdmVcIiBpbiB0KSB7XG4gICAgICAgIHQuZG9jdW1lbnRSZW1vdmU7XG4gICAgICAgIGNvbnN0IHIgPSB0LmRvY3VtZW50UmVtb3ZlO1xuICAgICAgICByLmRvY3VtZW50O1xuICAgICAgICBjb25zdCBpID0gZnJvbU5hbWUoZSwgci5kb2N1bWVudCksIHMgPSByLnJlbW92ZWRUYXJnZXRJZHMgfHwgW107XG4gICAgICAgIG4gPSBuZXcgX19QUklWQVRFX0RvY3VtZW50V2F0Y2hDaGFuZ2UoW10sIHMsIGksIG51bGwpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghKFwiZmlsdGVyXCIgaW4gdCkpIHJldHVybiBmYWlsKDExNjAxLCB7XG4gICAgICAgICAgICBSdDogdFxuICAgICAgICB9KTtcbiAgICAgICAge1xuICAgICAgICAgICAgdC5maWx0ZXI7XG4gICAgICAgICAgICBjb25zdCBlID0gdC5maWx0ZXI7XG4gICAgICAgICAgICBlLnRhcmdldElkO1xuICAgICAgICAgICAgY29uc3Qge2NvdW50OiByID0gMCwgdW5jaGFuZ2VkTmFtZXM6IGl9ID0gZSwgcyA9IG5ldyBFeGlzdGVuY2VGaWx0ZXIociwgaSksIG8gPSBlLnRhcmdldElkO1xuICAgICAgICAgICAgbiA9IG5ldyBfX1BSSVZBVEVfRXhpc3RlbmNlRmlsdGVyQ2hhbmdlKG8sIHMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuO1xufVxuXG5mdW5jdGlvbiB0b011dGF0aW9uKGUsIHQpIHtcbiAgICBsZXQgbjtcbiAgICBpZiAodCBpbnN0YW5jZW9mIF9fUFJJVkFURV9TZXRNdXRhdGlvbikgbiA9IHtcbiAgICAgICAgdXBkYXRlOiBfX1BSSVZBVEVfdG9NdXRhdGlvbkRvY3VtZW50KGUsIHQua2V5LCB0LnZhbHVlKVxuICAgIH07IGVsc2UgaWYgKHQgaW5zdGFuY2VvZiBfX1BSSVZBVEVfRGVsZXRlTXV0YXRpb24pIG4gPSB7XG4gICAgICAgIGRlbGV0ZTogX19QUklWQVRFX3RvTmFtZShlLCB0LmtleSlcbiAgICB9OyBlbHNlIGlmICh0IGluc3RhbmNlb2YgX19QUklWQVRFX1BhdGNoTXV0YXRpb24pIG4gPSB7XG4gICAgICAgIHVwZGF0ZTogX19QUklWQVRFX3RvTXV0YXRpb25Eb2N1bWVudChlLCB0LmtleSwgdC5kYXRhKSxcbiAgICAgICAgdXBkYXRlTWFzazogX19QUklWQVRFX3RvRG9jdW1lbnRNYXNrKHQuZmllbGRNYXNrKVxuICAgIH07IGVsc2Uge1xuICAgICAgICBpZiAoISh0IGluc3RhbmNlb2YgX19QUklWQVRFX1ZlcmlmeU11dGF0aW9uKSkgcmV0dXJuIGZhaWwoMTY1OTksIHtcbiAgICAgICAgICAgIFZ0OiB0LnR5cGVcbiAgICAgICAgfSk7XG4gICAgICAgIG4gPSB7XG4gICAgICAgICAgICB2ZXJpZnk6IF9fUFJJVkFURV90b05hbWUoZSwgdC5rZXkpXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB0LmZpZWxkVHJhbnNmb3Jtcy5sZW5ndGggPiAwICYmIChuLnVwZGF0ZVRyYW5zZm9ybXMgPSB0LmZpZWxkVHJhbnNmb3Jtcy5tYXAoKGUgPT4gZnVuY3Rpb24gX19QUklWQVRFX3RvRmllbGRUcmFuc2Zvcm0oZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdC50cmFuc2Zvcm07XG4gICAgICAgIGlmIChuIGluc3RhbmNlb2YgX19QUklWQVRFX1NlcnZlclRpbWVzdGFtcFRyYW5zZm9ybSkgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpZWxkUGF0aDogdC5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSxcbiAgICAgICAgICAgIHNldFRvU2VydmVyVmFsdWU6IFwiUkVRVUVTVF9USU1FXCJcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKG4gaW5zdGFuY2VvZiBfX1BSSVZBVEVfQXJyYXlVbmlvblRyYW5zZm9ybU9wZXJhdGlvbikgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpZWxkUGF0aDogdC5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSxcbiAgICAgICAgICAgIGFwcGVuZE1pc3NpbmdFbGVtZW50czoge1xuICAgICAgICAgICAgICAgIHZhbHVlczogbi5lbGVtZW50c1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBpZiAobiBpbnN0YW5jZW9mIF9fUFJJVkFURV9BcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbikgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpZWxkUGF0aDogdC5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSxcbiAgICAgICAgICAgIHJlbW92ZUFsbEZyb21BcnJheToge1xuICAgICAgICAgICAgICAgIHZhbHVlczogbi5lbGVtZW50c1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBpZiAobiBpbnN0YW5jZW9mIF9fUFJJVkFURV9OdW1lcmljSW5jcmVtZW50VHJhbnNmb3JtT3BlcmF0aW9uKSByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRQYXRoOiB0LmZpZWxkLmNhbm9uaWNhbFN0cmluZygpLFxuICAgICAgICAgICAgaW5jcmVtZW50OiBuLkFlXG4gICAgICAgIH07XG4gICAgICAgIHRocm93IGZhaWwoMjA5MzAsIHtcbiAgICAgICAgICAgIHRyYW5zZm9ybTogdC50cmFuc2Zvcm1cbiAgICAgICAgfSk7XG4gICAgfSgwLCBlKSkpKSwgdC5wcmVjb25kaXRpb24uaXNOb25lIHx8IChuLmN1cnJlbnREb2N1bWVudCA9IGZ1bmN0aW9uIF9fUFJJVkFURV90b1ByZWNvbmRpdGlvbihlLCB0KSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IHQudXBkYXRlVGltZSA/IHtcbiAgICAgICAgICAgIHVwZGF0ZVRpbWU6IF9fUFJJVkFURV90b1ZlcnNpb24oZSwgdC51cGRhdGVUaW1lKVxuICAgICAgICB9IDogdm9pZCAwICE9PSB0LmV4aXN0cyA/IHtcbiAgICAgICAgICAgIGV4aXN0czogdC5leGlzdHNcbiAgICAgICAgfSA6IGZhaWwoMjc0OTcpO1xuICAgIH0oZSwgdC5wcmVjb25kaXRpb24pKSwgbjtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2Zyb21NdXRhdGlvbihlLCB0KSB7XG4gICAgY29uc3QgbiA9IHQuY3VycmVudERvY3VtZW50ID8gZnVuY3Rpb24gX19QUklWQVRFX2Zyb21QcmVjb25kaXRpb24oZSkge1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSBlLnVwZGF0ZVRpbWUgPyBQcmVjb25kaXRpb24udXBkYXRlVGltZShfX1BSSVZBVEVfZnJvbVZlcnNpb24oZS51cGRhdGVUaW1lKSkgOiB2b2lkIDAgIT09IGUuZXhpc3RzID8gUHJlY29uZGl0aW9uLmV4aXN0cyhlLmV4aXN0cykgOiBQcmVjb25kaXRpb24ubm9uZSgpO1xuICAgIH0odC5jdXJyZW50RG9jdW1lbnQpIDogUHJlY29uZGl0aW9uLm5vbmUoKSwgciA9IHQudXBkYXRlVHJhbnNmb3JtcyA/IHQudXBkYXRlVHJhbnNmb3Jtcy5tYXAoKHQgPT4gZnVuY3Rpb24gX19QUklWQVRFX2Zyb21GaWVsZFRyYW5zZm9ybShlLCB0KSB7XG4gICAgICAgIGxldCBuID0gbnVsbDtcbiAgICAgICAgaWYgKFwic2V0VG9TZXJ2ZXJWYWx1ZVwiIGluIHQpIF9fUFJJVkFURV9oYXJkQXNzZXJ0KFwiUkVRVUVTVF9USU1FXCIgPT09IHQuc2V0VG9TZXJ2ZXJWYWx1ZSwgMTY2MzAsIHtcbiAgICAgICAgICAgIHByb3RvOiB0XG4gICAgICAgIH0pLCBuID0gbmV3IF9fUFJJVkFURV9TZXJ2ZXJUaW1lc3RhbXBUcmFuc2Zvcm07IGVsc2UgaWYgKFwiYXBwZW5kTWlzc2luZ0VsZW1lbnRzXCIgaW4gdCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQuYXBwZW5kTWlzc2luZ0VsZW1lbnRzLnZhbHVlcyB8fCBbXTtcbiAgICAgICAgICAgIG4gPSBuZXcgX19QUklWQVRFX0FycmF5VW5pb25UcmFuc2Zvcm1PcGVyYXRpb24oZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoXCJyZW1vdmVBbGxGcm9tQXJyYXlcIiBpbiB0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdC5yZW1vdmVBbGxGcm9tQXJyYXkudmFsdWVzIHx8IFtdO1xuICAgICAgICAgICAgbiA9IG5ldyBfX1BSSVZBVEVfQXJyYXlSZW1vdmVUcmFuc2Zvcm1PcGVyYXRpb24oZSk7XG4gICAgICAgIH0gZWxzZSBcImluY3JlbWVudFwiIGluIHQgPyBuID0gbmV3IF9fUFJJVkFURV9OdW1lcmljSW5jcmVtZW50VHJhbnNmb3JtT3BlcmF0aW9uKGUsIHQuaW5jcmVtZW50KSA6IGZhaWwoMTY1ODQsIHtcbiAgICAgICAgICAgIHByb3RvOiB0XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCByID0gRmllbGRQYXRoJDEuZnJvbVNlcnZlckZvcm1hdCh0LmZpZWxkUGF0aCk7XG4gICAgICAgIHJldHVybiBuZXcgRmllbGRUcmFuc2Zvcm0ociwgbik7XG4gICAgfShlLCB0KSkpIDogW107XG4gICAgaWYgKHQudXBkYXRlKSB7XG4gICAgICAgIHQudXBkYXRlLm5hbWU7XG4gICAgICAgIGNvbnN0IGkgPSBmcm9tTmFtZShlLCB0LnVwZGF0ZS5uYW1lKSwgcyA9IG5ldyBPYmplY3RWYWx1ZSh7XG4gICAgICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgICAgIGZpZWxkczogdC51cGRhdGUuZmllbGRzXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodC51cGRhdGVNYXNrKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gZnVuY3Rpb24gX19QUklWQVRFX2Zyb21Eb2N1bWVudE1hc2soZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBlLmZpZWxkUGF0aHMgfHwgW107XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGaWVsZE1hc2sodC5tYXAoKGUgPT4gRmllbGRQYXRoJDEuZnJvbVNlcnZlckZvcm1hdChlKSkpKTtcbiAgICAgICAgICAgIH0odC51cGRhdGVNYXNrKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1BhdGNoTXV0YXRpb24oaSwgcywgZSwgbiwgcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfU2V0TXV0YXRpb24oaSwgcywgbiwgcik7XG4gICAgfVxuICAgIGlmICh0LmRlbGV0ZSkge1xuICAgICAgICBjb25zdCByID0gZnJvbU5hbWUoZSwgdC5kZWxldGUpO1xuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9EZWxldGVNdXRhdGlvbihyLCBuKTtcbiAgICB9XG4gICAgaWYgKHQudmVyaWZ5KSB7XG4gICAgICAgIGNvbnN0IHIgPSBmcm9tTmFtZShlLCB0LnZlcmlmeSk7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1ZlcmlmeU11dGF0aW9uKHIsIG4pO1xuICAgIH1cbiAgICByZXR1cm4gZmFpbCgxNDYzLCB7XG4gICAgICAgIHByb3RvOiB0XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tV3JpdGVSZXN1bHRzKGUsIHQpIHtcbiAgICByZXR1cm4gZSAmJiBlLmxlbmd0aCA+IDAgPyAoX19QUklWQVRFX2hhcmRBc3NlcnQodm9pZCAwICE9PSB0LCAxNDM1MyksIGUubWFwKChlID0+IGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tV3JpdGVSZXN1bHQoZSwgdCkge1xuICAgICAgICAvLyBOT1RFOiBEZWxldGVzIGRvbid0IGhhdmUgYW4gdXBkYXRlVGltZS5cbiAgICAgICAgbGV0IG4gPSBlLnVwZGF0ZVRpbWUgPyBfX1BSSVZBVEVfZnJvbVZlcnNpb24oZS51cGRhdGVUaW1lKSA6IF9fUFJJVkFURV9mcm9tVmVyc2lvbih0KTtcbiAgICAgICAgcmV0dXJuIG4uaXNFcXVhbChTbmFwc2hvdFZlcnNpb24ubWluKCkpICYmIChcbiAgICAgICAgLy8gVGhlIEZpcmVzdG9yZSBFbXVsYXRvciBjdXJyZW50bHkgcmV0dXJucyBhbiB1cGRhdGUgdGltZSBvZiAwIGZvclxuICAgICAgICAvLyBkZWxldGVzIG9mIG5vbi1leGlzdGluZyBkb2N1bWVudHMgKHJhdGhlciB0aGFuIG51bGwpLiBUaGlzIGJyZWFrcyB0aGVcbiAgICAgICAgLy8gdGVzdCBcImdldCBkZWxldGVkIGRvYyB3aGlsZSBvZmZsaW5lIHdpdGggc291cmNlPWNhY2hlXCIgYXMgTm9Eb2N1bWVudHNcbiAgICAgICAgLy8gd2l0aCB2ZXJzaW9uIDAgYXJlIGZpbHRlcmVkIGJ5IEluZGV4ZWREYidzIFJlbW90ZURvY3VtZW50Q2FjaGUuXG4gICAgICAgIC8vIFRPRE8oIzIxNDkpOiBSZW1vdmUgdGhpcyB3aGVuIEVtdWxhdG9yIGlzIGZpeGVkXG4gICAgICAgIG4gPSBfX1BSSVZBVEVfZnJvbVZlcnNpb24odCkpLCBuZXcgTXV0YXRpb25SZXN1bHQobiwgZS50cmFuc2Zvcm1SZXN1bHRzIHx8IFtdKTtcbiAgICB9KGUsIHQpKSkpIDogW107XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV90b0RvY3VtZW50c1RhcmdldChlLCB0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZG9jdW1lbnRzOiBbIF9fUFJJVkFURV90b1F1ZXJ5UGF0aChlLCB0LnBhdGgpIF1cbiAgICB9O1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdG9RdWVyeVRhcmdldChlLCB0KSB7XG4gICAgLy8gRGlzc2VjdCB0aGUgcGF0aCBpbnRvIHBhcmVudCwgY29sbGVjdGlvbklkLCBhbmQgb3B0aW9uYWwga2V5IGZpbHRlci5cbiAgICBjb25zdCBuID0ge1xuICAgICAgICBzdHJ1Y3R1cmVkUXVlcnk6IHt9XG4gICAgfSwgciA9IHQucGF0aDtcbiAgICBsZXQgaTtcbiAgICBudWxsICE9PSB0LmNvbGxlY3Rpb25Hcm91cCA/IChpID0gciwgbi5zdHJ1Y3R1cmVkUXVlcnkuZnJvbSA9IFsge1xuICAgICAgICBjb2xsZWN0aW9uSWQ6IHQuY29sbGVjdGlvbkdyb3VwLFxuICAgICAgICBhbGxEZXNjZW5kYW50czogITBcbiAgICB9IF0pIDogKGkgPSByLnBvcExhc3QoKSwgbi5zdHJ1Y3R1cmVkUXVlcnkuZnJvbSA9IFsge1xuICAgICAgICBjb2xsZWN0aW9uSWQ6IHIubGFzdFNlZ21lbnQoKVxuICAgIH0gXSksIG4ucGFyZW50ID0gX19QUklWQVRFX3RvUXVlcnlQYXRoKGUsIGkpO1xuICAgIGNvbnN0IHMgPSBmdW5jdGlvbiBfX1BSSVZBVEVfdG9GaWx0ZXJzKGUpIHtcbiAgICAgICAgaWYgKDAgPT09IGUubGVuZ3RoKSByZXR1cm47XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfdG9GaWx0ZXIoQ29tcG9zaXRlRmlsdGVyLmNyZWF0ZShlLCBcImFuZFwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLkFORCAqLykpO1xuICAgIH0odC5maWx0ZXJzKTtcbiAgICBzICYmIChuLnN0cnVjdHVyZWRRdWVyeS53aGVyZSA9IHMpO1xuICAgIGNvbnN0IG8gPSBmdW5jdGlvbiBfX1BSSVZBVEVfdG9PcmRlcihlKSB7XG4gICAgICAgIGlmICgwID09PSBlLmxlbmd0aCkgcmV0dXJuO1xuICAgICAgICByZXR1cm4gZS5tYXAoKGUgPT4gXG4gICAgICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcbiAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX3RvUHJvcGVydHlPcmRlcihlKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGZpZWxkOiBfX1BSSVZBVEVfdG9GaWVsZFBhdGhSZWZlcmVuY2UoZS5maWVsZCksXG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uOiBfX1BSSVZBVEVfdG9EaXJlY3Rpb24oZS5kaXIpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KGUpKSk7XG4gICAgfSh0Lm9yZGVyQnkpO1xuICAgIG8gJiYgKG4uc3RydWN0dXJlZFF1ZXJ5Lm9yZGVyQnkgPSBvKTtcbiAgICBjb25zdCBfID0gX19QUklWQVRFX3RvSW50MzJQcm90byhlLCB0LmxpbWl0KTtcbiAgICByZXR1cm4gbnVsbCAhPT0gXyAmJiAobi5zdHJ1Y3R1cmVkUXVlcnkubGltaXQgPSBfKSwgdC5zdGFydEF0ICYmIChuLnN0cnVjdHVyZWRRdWVyeS5zdGFydEF0ID0gZnVuY3Rpb24gX19QUklWQVRFX3RvU3RhcnRBdEN1cnNvcihlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBiZWZvcmU6IGUuaW5jbHVzaXZlLFxuICAgICAgICAgICAgdmFsdWVzOiBlLnBvc2l0aW9uXG4gICAgICAgIH07XG4gICAgfSh0LnN0YXJ0QXQpKSwgdC5lbmRBdCAmJiAobi5zdHJ1Y3R1cmVkUXVlcnkuZW5kQXQgPSBmdW5jdGlvbiBfX1BSSVZBVEVfdG9FbmRBdEN1cnNvcihlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBiZWZvcmU6ICFlLmluY2x1c2l2ZSxcbiAgICAgICAgICAgIHZhbHVlczogZS5wb3NpdGlvblxuICAgICAgICB9O1xuICAgIH0odC5lbmRBdCkpLCB7XG4gICAgICAgIGZ0OiBuLFxuICAgICAgICBwYXJlbnQ6IGlcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdG9SdW5BZ2dyZWdhdGlvblF1ZXJ5UmVxdWVzdChlLCB0LCBuLCByKSB7XG4gICAgY29uc3Qge2Z0OiBpLCBwYXJlbnQ6IHN9ID0gX19QUklWQVRFX3RvUXVlcnlUYXJnZXQoZSwgdCksIG8gPSB7fSwgXyA9IFtdO1xuICAgIGxldCBhID0gMDtcbiAgICByZXR1cm4gbi5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgLy8gTWFwIGFsbCBjbGllbnQtc2lkZSBhbGlhc2VzIHRvIGEgdW5pcXVlIHNob3J0LWZvcm1cbiAgICAgICAgLy8gYWxpYXMuIFRoaXMgYXZvaWRzIGlzc3VlcyB3aXRoIGNsaWVudC1zaWRlIGFsaWFzZXMgdGhhdFxuICAgICAgICAvLyBleGNlZWQgdGhlIDE1MDAtYnl0ZSBzdHJpbmcgc2l6ZSBsaW1pdC5cbiAgICAgICAgY29uc3QgdCA9IHIgPyBlLmFsaWFzIDogXCJhZ2dyZWdhdGVfXCIgKyBhKys7XG4gICAgICAgIG9bdF0gPSBlLmFsaWFzLCBcImNvdW50XCIgPT09IGUuYWdncmVnYXRlVHlwZSA/IF8ucHVzaCh7XG4gICAgICAgICAgICBhbGlhczogdCxcbiAgICAgICAgICAgIGNvdW50OiB7fVxuICAgICAgICB9KSA6IFwiYXZnXCIgPT09IGUuYWdncmVnYXRlVHlwZSA/IF8ucHVzaCh7XG4gICAgICAgICAgICBhbGlhczogdCxcbiAgICAgICAgICAgIGF2Zzoge1xuICAgICAgICAgICAgICAgIGZpZWxkOiBfX1BSSVZBVEVfdG9GaWVsZFBhdGhSZWZlcmVuY2UoZS5maWVsZFBhdGgpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pIDogXCJzdW1cIiA9PT0gZS5hZ2dyZWdhdGVUeXBlICYmIF8ucHVzaCh7XG4gICAgICAgICAgICBhbGlhczogdCxcbiAgICAgICAgICAgIHN1bToge1xuICAgICAgICAgICAgICAgIGZpZWxkOiBfX1BSSVZBVEVfdG9GaWVsZFBhdGhSZWZlcmVuY2UoZS5maWVsZFBhdGgpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pKSwge1xuICAgICAgICByZXF1ZXN0OiB7XG4gICAgICAgICAgICBzdHJ1Y3R1cmVkQWdncmVnYXRpb25RdWVyeToge1xuICAgICAgICAgICAgICAgIGFnZ3JlZ2F0aW9uczogXyxcbiAgICAgICAgICAgICAgICBzdHJ1Y3R1cmVkUXVlcnk6IGkuc3RydWN0dXJlZFF1ZXJ5XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGFyZW50OiBpLnBhcmVudFxuICAgICAgICB9LFxuICAgICAgICBndDogbyxcbiAgICAgICAgcGFyZW50OiBzXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2NvbnZlcnRRdWVyeVRhcmdldFRvUXVlcnkoZSkge1xuICAgIGxldCB0ID0gX19QUklWQVRFX2Zyb21RdWVyeVBhdGgoZS5wYXJlbnQpO1xuICAgIGNvbnN0IG4gPSBlLnN0cnVjdHVyZWRRdWVyeSwgciA9IG4uZnJvbSA/IG4uZnJvbS5sZW5ndGggOiAwO1xuICAgIGxldCBpID0gbnVsbDtcbiAgICBpZiAociA+IDApIHtcbiAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQoMSA9PT0gciwgNjUwNjIpO1xuICAgICAgICBjb25zdCBlID0gbi5mcm9tWzBdO1xuICAgICAgICBlLmFsbERlc2NlbmRhbnRzID8gaSA9IGUuY29sbGVjdGlvbklkIDogdCA9IHQuY2hpbGQoZS5jb2xsZWN0aW9uSWQpO1xuICAgIH1cbiAgICBsZXQgcyA9IFtdO1xuICAgIG4ud2hlcmUgJiYgKHMgPSBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbUZpbHRlcnMoZSkge1xuICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2Zyb21GaWx0ZXIoZSk7XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgQ29tcG9zaXRlRmlsdGVyICYmIF9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJJc0ZsYXRDb25qdW5jdGlvbih0KSkgcmV0dXJuIHQuZ2V0RmlsdGVycygpO1xuICAgICAgICByZXR1cm4gWyB0IF07XG4gICAgfShuLndoZXJlKSk7XG4gICAgbGV0IG8gPSBbXTtcbiAgICBuLm9yZGVyQnkgJiYgKG8gPSBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbU9yZGVyKGUpIHtcbiAgICAgICAgcmV0dXJuIGUubWFwKChlID0+IGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tUHJvcGVydHlPcmRlcihlKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE9yZGVyQnkoX19QUklWQVRFX2Zyb21GaWVsZFBhdGhSZWZlcmVuY2UoZS5maWVsZCksIFxuICAgICAgICAgICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgICAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX2Zyb21EaXJlY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgY2FzZSBcIkFTQ0VORElOR1wiOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJhc2NcIiAvKiBEaXJlY3Rpb24uQVNDRU5ESU5HICovO1xuXG4gICAgICAgICAgICAgICAgICBjYXNlIFwiREVTQ0VORElOR1wiOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJkZXNjXCIgLyogRGlyZWN0aW9uLkRFU0NFTkRJTkcgKi87XG5cbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgICAgICAgICAoZS5kaXJlY3Rpb24pKTtcbiAgICAgICAgfVxuICAgICAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgICAgIChlKSkpO1xuICAgIH0obi5vcmRlckJ5KSk7XG4gICAgbGV0IF8gPSBudWxsO1xuICAgIG4ubGltaXQgJiYgKF8gPSBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbUludDMyUHJvdG8oZSkge1xuICAgICAgICBsZXQgdDtcbiAgICAgICAgcmV0dXJuIHQgPSBcIm9iamVjdFwiID09IHR5cGVvZiBlID8gZS52YWx1ZSA6IGUsIF9fUFJJVkFURV9pc051bGxPclVuZGVmaW5lZCh0KSA/IG51bGwgOiB0O1xuICAgIH0obi5saW1pdCkpO1xuICAgIGxldCBhID0gbnVsbDtcbiAgICBuLnN0YXJ0QXQgJiYgKGEgPSBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbVN0YXJ0QXRDdXJzb3IoZSkge1xuICAgICAgICBjb25zdCB0ID0gISFlLmJlZm9yZSwgbiA9IGUudmFsdWVzIHx8IFtdO1xuICAgICAgICByZXR1cm4gbmV3IEJvdW5kKG4sIHQpO1xuICAgIH0obi5zdGFydEF0KSk7XG4gICAgbGV0IHUgPSBudWxsO1xuICAgIHJldHVybiBuLmVuZEF0ICYmICh1ID0gZnVuY3Rpb24gX19QUklWQVRFX2Zyb21FbmRBdEN1cnNvcihlKSB7XG4gICAgICAgIGNvbnN0IHQgPSAhZS5iZWZvcmUsIG4gPSBlLnZhbHVlcyB8fCBbXTtcbiAgICAgICAgcmV0dXJuIG5ldyBCb3VuZChuLCB0KTtcbiAgICB9XG4gICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgIChuLmVuZEF0KSksIF9fUFJJVkFURV9uZXdRdWVyeSh0LCBpLCBvLCBzLCBfLCBcIkZcIiAvKiBMaW1pdFR5cGUuRmlyc3QgKi8gLCBhLCB1KTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3RvTGlzdGVuUmVxdWVzdExhYmVscyhlLCB0KSB7XG4gICAgY29uc3QgbiA9IGZ1bmN0aW9uIF9fUFJJVkFURV90b0xhYmVsKGUpIHtcbiAgICAgICAgc3dpdGNoIChlKSB7XG4gICAgICAgICAgY2FzZSBcIlRhcmdldFB1cnBvc2VMaXN0ZW5cIiAvKiBUYXJnZXRQdXJwb3NlLkxpc3RlbiAqLyA6XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcblxuICAgICAgICAgIGNhc2UgXCJUYXJnZXRQdXJwb3NlRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2hcIiAvKiBUYXJnZXRQdXJwb3NlLkV4aXN0ZW5jZUZpbHRlck1pc21hdGNoICovIDpcbiAgICAgICAgICAgIHJldHVybiBcImV4aXN0ZW5jZS1maWx0ZXItbWlzbWF0Y2hcIjtcblxuICAgICAgICAgIGNhc2UgXCJUYXJnZXRQdXJwb3NlRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2hCbG9vbVwiIC8qIFRhcmdldFB1cnBvc2UuRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2hCbG9vbSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gXCJleGlzdGVuY2UtZmlsdGVyLW1pc21hdGNoLWJsb29tXCI7XG5cbiAgICAgICAgICBjYXNlIFwiVGFyZ2V0UHVycG9zZUxpbWJvUmVzb2x1dGlvblwiIC8qIFRhcmdldFB1cnBvc2UuTGltYm9SZXNvbHV0aW9uICovIDpcbiAgICAgICAgICAgIHJldHVybiBcImxpbWJvLWRvY3VtZW50XCI7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIGZhaWwoMjg5ODcsIHtcbiAgICAgICAgICAgICAgICBwdXJwb3NlOiBlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0odC5wdXJwb3NlKTtcbiAgICByZXR1cm4gbnVsbCA9PSBuID8gbnVsbCA6IHtcbiAgICAgICAgXCJnb29nLWxpc3Rlbi10YWdzXCI6IG5cbiAgICB9O1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZnJvbUZpbHRlcihlKSB7XG4gICAgcmV0dXJuIHZvaWQgMCAhPT0gZS51bmFyeUZpbHRlciA/IGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tVW5hcnlGaWx0ZXIoZSkge1xuICAgICAgICBzd2l0Y2ggKGUudW5hcnlGaWx0ZXIub3ApIHtcbiAgICAgICAgICBjYXNlIFwiSVNfTkFOXCI6XG4gICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2Zyb21GaWVsZFBhdGhSZWZlcmVuY2UoZS51bmFyeUZpbHRlci5maWVsZCk7XG4gICAgICAgICAgICByZXR1cm4gRmllbGRGaWx0ZXIuY3JlYXRlKHQsIFwiPT1cIiAvKiBPcGVyYXRvci5FUVVBTCAqLyAsIHtcbiAgICAgICAgICAgICAgICBkb3VibGVWYWx1ZTogTmFOXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgIGNhc2UgXCJJU19OVUxMXCI6XG4gICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2Zyb21GaWVsZFBhdGhSZWZlcmVuY2UoZS51bmFyeUZpbHRlci5maWVsZCk7XG4gICAgICAgICAgICByZXR1cm4gRmllbGRGaWx0ZXIuY3JlYXRlKG4sIFwiPT1cIiAvKiBPcGVyYXRvci5FUVVBTCAqLyAsIHtcbiAgICAgICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgIGNhc2UgXCJJU19OT1RfTkFOXCI6XG4gICAgICAgICAgICBjb25zdCByID0gX19QUklWQVRFX2Zyb21GaWVsZFBhdGhSZWZlcmVuY2UoZS51bmFyeUZpbHRlci5maWVsZCk7XG4gICAgICAgICAgICByZXR1cm4gRmllbGRGaWx0ZXIuY3JlYXRlKHIsIFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gLCB7XG4gICAgICAgICAgICAgICAgZG91YmxlVmFsdWU6IE5hTlxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICBjYXNlIFwiSVNfTk9UX05VTExcIjpcbiAgICAgICAgICAgIGNvbnN0IGkgPSBfX1BSSVZBVEVfZnJvbUZpZWxkUGF0aFJlZmVyZW5jZShlLnVuYXJ5RmlsdGVyLmZpZWxkKTtcbiAgICAgICAgICAgIHJldHVybiBGaWVsZEZpbHRlci5jcmVhdGUoaSwgXCIhPVwiIC8qIE9wZXJhdG9yLk5PVF9FUVVBTCAqLyAsIHtcbiAgICAgICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgIGNhc2UgXCJPUEVSQVRPUl9VTlNQRUNJRklFRFwiOlxuICAgICAgICAgICAgcmV0dXJuIGZhaWwoNjEzMTMpO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBmYWlsKDYwNzI2KTtcbiAgICAgICAgfVxuICAgIH0oZSkgOiB2b2lkIDAgIT09IGUuZmllbGRGaWx0ZXIgPyBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbUZpZWxkRmlsdGVyKGUpIHtcbiAgICAgICAgcmV0dXJuIEZpZWxkRmlsdGVyLmNyZWF0ZShfX1BSSVZBVEVfZnJvbUZpZWxkUGF0aFJlZmVyZW5jZShlLmZpZWxkRmlsdGVyLmZpZWxkKSwgZnVuY3Rpb24gX19QUklWQVRFX2Zyb21PcGVyYXRvck5hbWUoZSkge1xuICAgICAgICAgICAgc3dpdGNoIChlKSB7XG4gICAgICAgICAgICAgIGNhc2UgXCJFUVVBTFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcIj09XCIgLyogT3BlcmF0b3IuRVFVQUwgKi87XG5cbiAgICAgICAgICAgICAgY2FzZSBcIk5PVF9FUVVBTFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcIiE9XCIgLyogT3BlcmF0b3IuTk9UX0VRVUFMICovO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJHUkVBVEVSX1RIQU5cIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCI+XCIgLyogT3BlcmF0b3IuR1JFQVRFUl9USEFOICovO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJHUkVBVEVSX1RIQU5fT1JfRVFVQUxcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCI+PVwiIC8qIE9wZXJhdG9yLkdSRUFURVJfVEhBTl9PUl9FUVVBTCAqLztcblxuICAgICAgICAgICAgICBjYXNlIFwiTEVTU19USEFOXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiPFwiIC8qIE9wZXJhdG9yLkxFU1NfVEhBTiAqLztcblxuICAgICAgICAgICAgICBjYXNlIFwiTEVTU19USEFOX09SX0VRVUFMXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiPD1cIiAvKiBPcGVyYXRvci5MRVNTX1RIQU5fT1JfRVFVQUwgKi87XG5cbiAgICAgICAgICAgICAgY2FzZSBcIkFSUkFZX0NPTlRBSU5TXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiYXJyYXktY29udGFpbnNcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOUyAqLztcblxuICAgICAgICAgICAgICBjYXNlIFwiSU5cIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJpblwiIC8qIE9wZXJhdG9yLklOICovO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJOT1RfSU5cIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi87XG5cbiAgICAgICAgICAgICAgY2FzZSBcIkFSUkFZX0NPTlRBSU5TX0FOWVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWSAqLztcblxuICAgICAgICAgICAgICBjYXNlIFwiT1BFUkFUT1JfVU5TUEVDSUZJRURcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCg1ODExMCk7XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCg1MDUwNik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0oZS5maWVsZEZpbHRlci5vcCksIGUuZmllbGRGaWx0ZXIudmFsdWUpO1xuICAgIH0oZSkgOiB2b2lkIDAgIT09IGUuY29tcG9zaXRlRmlsdGVyID8gZnVuY3Rpb24gX19QUklWQVRFX2Zyb21Db21wb3NpdGVGaWx0ZXIoZSkge1xuICAgICAgICByZXR1cm4gQ29tcG9zaXRlRmlsdGVyLmNyZWF0ZShlLmNvbXBvc2l0ZUZpbHRlci5maWx0ZXJzLm1hcCgoZSA9PiBfX1BSSVZBVEVfZnJvbUZpbHRlcihlKSkpLCBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbUNvbXBvc2l0ZU9wZXJhdG9yTmFtZShlKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgY2FzZSBcIkFORFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcImFuZFwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLkFORCAqLztcblxuICAgICAgICAgICAgICBjYXNlIFwiT1JcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJvclwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLk9SICovO1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwoMTAyNik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0oZS5jb21wb3NpdGVGaWx0ZXIub3ApKTtcbiAgICB9KGUpIDogZmFpbCgzMDA5Nywge1xuICAgICAgICBmaWx0ZXI6IGVcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3RvRGlyZWN0aW9uKGUpIHtcbiAgICByZXR1cm4gYnRbZV07XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV90b09wZXJhdG9yTmFtZShlKSB7XG4gICAgcmV0dXJuIER0W2VdO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdG9Db21wb3NpdGVPcGVyYXRvck5hbWUoZSkge1xuICAgIHJldHVybiBDdFtlXTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3RvRmllbGRQYXRoUmVmZXJlbmNlKGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBmaWVsZFBhdGg6IGUuY2Fub25pY2FsU3RyaW5nKClcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZnJvbUZpZWxkUGF0aFJlZmVyZW5jZShlKSB7XG4gICAgcmV0dXJuIEZpZWxkUGF0aCQxLmZyb21TZXJ2ZXJGb3JtYXQoZS5maWVsZFBhdGgpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdG9GaWx0ZXIoZSkge1xuICAgIHJldHVybiBlIGluc3RhbmNlb2YgRmllbGRGaWx0ZXIgPyBmdW5jdGlvbiBfX1BSSVZBVEVfdG9VbmFyeU9yRmllbGRGaWx0ZXIoZSkge1xuICAgICAgICBpZiAoXCI9PVwiIC8qIE9wZXJhdG9yLkVRVUFMICovID09PSBlLm9wKSB7XG4gICAgICAgICAgICBpZiAoX19QUklWQVRFX2lzTmFuVmFsdWUoZS52YWx1ZSkpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdW5hcnlGaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGQ6IF9fUFJJVkFURV90b0ZpZWxkUGF0aFJlZmVyZW5jZShlLmZpZWxkKSxcbiAgICAgICAgICAgICAgICAgICAgb3A6IFwiSVNfTkFOXCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKF9fUFJJVkFURV9pc051bGxWYWx1ZShlLnZhbHVlKSkgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1bmFyeUZpbHRlcjoge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZDogX19QUklWQVRFX3RvRmllbGRQYXRoUmVmZXJlbmNlKGUuZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICBvcDogXCJJU19OVUxMXCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2UgaWYgKFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gPT09IGUub3ApIHtcbiAgICAgICAgICAgIGlmIChfX1BSSVZBVEVfaXNOYW5WYWx1ZShlLnZhbHVlKSkgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1bmFyeUZpbHRlcjoge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZDogX19QUklWQVRFX3RvRmllbGRQYXRoUmVmZXJlbmNlKGUuZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICBvcDogXCJJU19OT1RfTkFOXCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKF9fUFJJVkFURV9pc051bGxWYWx1ZShlLnZhbHVlKSkgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1bmFyeUZpbHRlcjoge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZDogX19QUklWQVRFX3RvRmllbGRQYXRoUmVmZXJlbmNlKGUuZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICBvcDogXCJJU19OT1RfTlVMTFwiXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRGaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICBmaWVsZDogX19QUklWQVRFX3RvRmllbGRQYXRoUmVmZXJlbmNlKGUuZmllbGQpLFxuICAgICAgICAgICAgICAgIG9wOiBfX1BSSVZBVEVfdG9PcGVyYXRvck5hbWUoZS5vcCksXG4gICAgICAgICAgICAgICAgdmFsdWU6IGUudmFsdWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KGUpIDogZSBpbnN0YW5jZW9mIENvbXBvc2l0ZUZpbHRlciA/IGZ1bmN0aW9uIF9fUFJJVkFURV90b0NvbXBvc2l0ZUZpbHRlcihlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlLmdldEZpbHRlcnMoKS5tYXAoKGUgPT4gX19QUklWQVRFX3RvRmlsdGVyKGUpKSk7XG4gICAgICAgIGlmICgxID09PSB0Lmxlbmd0aCkgcmV0dXJuIHRbMF07XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjb21wb3NpdGVGaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICBvcDogX19QUklWQVRFX3RvQ29tcG9zaXRlT3BlcmF0b3JOYW1lKGUub3ApLFxuICAgICAgICAgICAgICAgIGZpbHRlcnM6IHRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KGUpIDogZmFpbCg1NDg3Nywge1xuICAgICAgICBmaWx0ZXI6IGVcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3RvRG9jdW1lbnRNYXNrKGUpIHtcbiAgICBjb25zdCB0ID0gW107XG4gICAgcmV0dXJuIGUuZmllbGRzLmZvckVhY2goKGUgPT4gdC5wdXNoKGUuY2Fub25pY2FsU3RyaW5nKCkpKSksIHtcbiAgICAgICAgZmllbGRQYXRoczogdFxuICAgIH07XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9pc1ZhbGlkUmVzb3VyY2VOYW1lKGUpIHtcbiAgICAvLyBSZXNvdXJjZSBuYW1lcyBoYXZlIGF0IGxlYXN0IDQgY29tcG9uZW50cyAocHJvamVjdCBJRCwgZGF0YWJhc2UgSUQpXG4gICAgcmV0dXJuIGUubGVuZ3RoID49IDQgJiYgXCJwcm9qZWN0c1wiID09PSBlLmdldCgwKSAmJiBcImRhdGFiYXNlc1wiID09PSBlLmdldCgyKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gaW1tdXRhYmxlIHNldCBvZiBtZXRhZGF0YSB0aGF0IHRoZSBsb2NhbCBzdG9yZSB0cmFja3MgZm9yIGVhY2ggdGFyZ2V0LlxuICovIGNsYXNzIFRhcmdldERhdGEge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBUaGUgdGFyZ2V0IGJlaW5nIGxpc3RlbmVkIHRvLiAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIFRoZSB0YXJnZXQgSUQgdG8gd2hpY2ggdGhlIHRhcmdldCBjb3JyZXNwb25kczsgQXNzaWduZWQgYnkgdGhlXG4gICAgICogTG9jYWxTdG9yZSBmb3IgdXNlciBsaXN0ZW5zIGFuZCBieSB0aGUgU3luY0VuZ2luZSBmb3IgbGltYm8gd2F0Y2hlcy5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKiogVGhlIHB1cnBvc2Ugb2YgdGhlIHRhcmdldC4gKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBUaGUgc2VxdWVuY2UgbnVtYmVyIG9mIHRoZSBsYXN0IHRyYW5zYWN0aW9uIGR1cmluZyB3aGljaCB0aGlzIHRhcmdldCBkYXRhXG4gICAgICogd2FzIG1vZGlmaWVkLlxuICAgICAqL1xuICAgIHIsIFxuICAgIC8qKiBUaGUgbGF0ZXN0IHNuYXBzaG90IHZlcnNpb24gc2VlbiBmb3IgdGhpcyB0YXJnZXQuICovXG4gICAgaSA9IFNuYXBzaG90VmVyc2lvbi5taW4oKVxuICAgIC8qKlxuICAgICAqIFRoZSBtYXhpbXVtIHNuYXBzaG90IHZlcnNpb24gYXQgd2hpY2ggdGhlIGFzc29jaWF0ZWQgdmlld1xuICAgICAqIGNvbnRhaW5lZCBubyBsaW1ibyBkb2N1bWVudHMuXG4gICAgICovICwgcyA9IFNuYXBzaG90VmVyc2lvbi5taW4oKVxuICAgIC8qKlxuICAgICAqIEFuIG9wYXF1ZSwgc2VydmVyLWFzc2lnbmVkIHRva2VuIHRoYXQgYWxsb3dzIHdhdGNoaW5nIGEgdGFyZ2V0IHRvIGJlXG4gICAgICogcmVzdW1lZCBhZnRlciBkaXNjb25uZWN0aW5nIHdpdGhvdXQgcmV0cmFuc21pdHRpbmcgYWxsIHRoZSBkYXRhIHRoYXRcbiAgICAgKiBtYXRjaGVzIHRoZSB0YXJnZXQuIFRoZSByZXN1bWUgdG9rZW4gZXNzZW50aWFsbHkgaWRlbnRpZmllcyBhIHBvaW50IGluXG4gICAgICogdGltZSBmcm9tIHdoaWNoIHRoZSBzZXJ2ZXIgc2hvdWxkIHJlc3VtZSBzZW5kaW5nIHJlc3VsdHMuXG4gICAgICovICwgbyA9IEJ5dGVTdHJpbmcuRU1QVFlfQllURV9TVFJJTkdcbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIGRvY3VtZW50cyB0aGF0IGxhc3QgbWF0Y2hlZCB0aGUgcXVlcnkgYXQgdGhlIHJlc3VtZSB0b2tlbiBvclxuICAgICAqIHJlYWQgdGltZS4gRG9jdW1lbnRzIGFyZSBjb3VudGVkIG9ubHkgd2hlbiBtYWtpbmcgYSBsaXN0ZW4gcmVxdWVzdCB3aXRoXG4gICAgICogcmVzdW1lIHRva2VuIG9yIHJlYWQgdGltZSwgb3RoZXJ3aXNlLCBrZWVwIGl0IG51bGwuXG4gICAgICovICwgXyA9IG51bGwpIHtcbiAgICAgICAgdGhpcy50YXJnZXQgPSBlLCB0aGlzLnRhcmdldElkID0gdCwgdGhpcy5wdXJwb3NlID0gbiwgdGhpcy5zZXF1ZW5jZU51bWJlciA9IHIsIHRoaXMuc25hcHNob3RWZXJzaW9uID0gaSwgXG4gICAgICAgIHRoaXMubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiA9IHMsIHRoaXMucmVzdW1lVG9rZW4gPSBvLCB0aGlzLmV4cGVjdGVkQ291bnQgPSBfO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlcyBhIG5ldyB0YXJnZXQgZGF0YSBpbnN0YW5jZSB3aXRoIGFuIHVwZGF0ZWQgc2VxdWVuY2UgbnVtYmVyLiAqLyAgICB3aXRoU2VxdWVuY2VOdW1iZXIoZSkge1xuICAgICAgICByZXR1cm4gbmV3IFRhcmdldERhdGEodGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0SWQsIHRoaXMucHVycG9zZSwgZSwgdGhpcy5zbmFwc2hvdFZlcnNpb24sIHRoaXMubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiwgdGhpcy5yZXN1bWVUb2tlbiwgdGhpcy5leHBlY3RlZENvdW50KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0YXJnZXQgZGF0YSBpbnN0YW5jZSB3aXRoIGFuIHVwZGF0ZWQgcmVzdW1lIHRva2VuIGFuZFxuICAgICAqIHNuYXBzaG90IHZlcnNpb24uXG4gICAgICovICAgIHdpdGhSZXN1bWVUb2tlbihlLCB0KSB7XG4gICAgICAgIHJldHVybiBuZXcgVGFyZ2V0RGF0YSh0aGlzLnRhcmdldCwgdGhpcy50YXJnZXRJZCwgdGhpcy5wdXJwb3NlLCB0aGlzLnNlcXVlbmNlTnVtYmVyLCB0LCB0aGlzLmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24sIGUsIFxuICAgICAgICAvKiBleHBlY3RlZENvdW50PSAqLyBudWxsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0YXJnZXQgZGF0YSBpbnN0YW5jZSB3aXRoIGFuIHVwZGF0ZWQgZXhwZWN0ZWQgY291bnQuXG4gICAgICovICAgIHdpdGhFeHBlY3RlZENvdW50KGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUYXJnZXREYXRhKHRoaXMudGFyZ2V0LCB0aGlzLnRhcmdldElkLCB0aGlzLnB1cnBvc2UsIHRoaXMuc2VxdWVuY2VOdW1iZXIsIHRoaXMuc25hcHNob3RWZXJzaW9uLCB0aGlzLmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24sIHRoaXMucmVzdW1lVG9rZW4sIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRhcmdldCBkYXRhIGluc3RhbmNlIHdpdGggYW4gdXBkYXRlZCBsYXN0IGxpbWJvIGZyZWVcbiAgICAgKiBzbmFwc2hvdCB2ZXJzaW9uIG51bWJlci5cbiAgICAgKi8gICAgd2l0aExhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24oZSkge1xuICAgICAgICByZXR1cm4gbmV3IFRhcmdldERhdGEodGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0SWQsIHRoaXMucHVycG9zZSwgdGhpcy5zZXF1ZW5jZU51bWJlciwgdGhpcy5zbmFwc2hvdFZlcnNpb24sIGUsIHRoaXMucmVzdW1lVG9rZW4sIHRoaXMuZXhwZWN0ZWRDb3VudCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFNlcmlhbGl6ZXIgZm9yIHZhbHVlcyBzdG9yZWQgaW4gdGhlIExvY2FsU3RvcmUuICovIGNsYXNzIF9fUFJJVkFURV9Mb2NhbFNlcmlhbGl6ZXIge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy55dCA9IGU7XG4gICAgfVxufVxuXG4vKiogRGVjb2RlcyBhIHJlbW90ZSBkb2N1bWVudCBmcm9tIHN0b3JhZ2UgbG9jYWxseSB0byBhIERvY3VtZW50LiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbURiUmVtb3RlRG9jdW1lbnQoZSwgdCkge1xuICAgIGxldCBuO1xuICAgIGlmICh0LmRvY3VtZW50KSBuID0gX19QUklWQVRFX2Zyb21Eb2N1bWVudChlLnl0LCB0LmRvY3VtZW50LCAhIXQuaGFzQ29tbWl0dGVkTXV0YXRpb25zKTsgZWxzZSBpZiAodC5ub0RvY3VtZW50KSB7XG4gICAgICAgIGNvbnN0IGUgPSBEb2N1bWVudEtleS5mcm9tU2VnbWVudHModC5ub0RvY3VtZW50LnBhdGgpLCByID0gX19QUklWQVRFX2Zyb21EYlRpbWVzdGFtcCh0Lm5vRG9jdW1lbnQucmVhZFRpbWUpO1xuICAgICAgICBuID0gTXV0YWJsZURvY3VtZW50Lm5ld05vRG9jdW1lbnQoZSwgciksIHQuaGFzQ29tbWl0dGVkTXV0YXRpb25zICYmIG4uc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCF0LnVua25vd25Eb2N1bWVudCkgcmV0dXJuIGZhaWwoNTY3MDkpO1xuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBlID0gRG9jdW1lbnRLZXkuZnJvbVNlZ21lbnRzKHQudW5rbm93bkRvY3VtZW50LnBhdGgpLCByID0gX19QUklWQVRFX2Zyb21EYlRpbWVzdGFtcCh0LnVua25vd25Eb2N1bWVudC52ZXJzaW9uKTtcbiAgICAgICAgICAgIG4gPSBNdXRhYmxlRG9jdW1lbnQubmV3VW5rbm93bkRvY3VtZW50KGUsIHIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0LnJlYWRUaW1lICYmIG4uc2V0UmVhZFRpbWUoZnVuY3Rpb24gX19QUklWQVRFX2Zyb21EYlRpbWVzdGFtcEtleShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBuZXcgVGltZXN0YW1wKGVbMF0sIGVbMV0pO1xuICAgICAgICByZXR1cm4gU25hcHNob3RWZXJzaW9uLmZyb21UaW1lc3RhbXAodCk7XG4gICAgfSh0LnJlYWRUaW1lKSksIG47XG59XG5cbi8qKiBFbmNvZGVzIGEgZG9jdW1lbnQgZm9yIHN0b3JhZ2UgbG9jYWxseS4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3RvRGJSZW1vdGVEb2N1bWVudChlLCB0KSB7XG4gICAgY29uc3QgbiA9IHQua2V5LCByID0ge1xuICAgICAgICBwcmVmaXhQYXRoOiBuLmdldENvbGxlY3Rpb25QYXRoKCkucG9wTGFzdCgpLnRvQXJyYXkoKSxcbiAgICAgICAgY29sbGVjdGlvbkdyb3VwOiBuLmNvbGxlY3Rpb25Hcm91cCxcbiAgICAgICAgZG9jdW1lbnRJZDogbi5wYXRoLmxhc3RTZWdtZW50KCksXG4gICAgICAgIHJlYWRUaW1lOiBfX1BSSVZBVEVfdG9EYlRpbWVzdGFtcEtleSh0LnJlYWRUaW1lKSxcbiAgICAgICAgaGFzQ29tbWl0dGVkTXV0YXRpb25zOiB0Lmhhc0NvbW1pdHRlZE11dGF0aW9uc1xuICAgIH07XG4gICAgaWYgKHQuaXNGb3VuZERvY3VtZW50KCkpIHIuZG9jdW1lbnQgPSBmdW5jdGlvbiBfX1BSSVZBVEVfdG9Eb2N1bWVudChlLCB0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuYW1lOiBfX1BSSVZBVEVfdG9OYW1lKGUsIHQua2V5KSxcbiAgICAgICAgICAgIGZpZWxkczogdC5kYXRhLnZhbHVlLm1hcFZhbHVlLmZpZWxkcyxcbiAgICAgICAgICAgIHVwZGF0ZVRpbWU6IHRvVGltZXN0YW1wKGUsIHQudmVyc2lvbi50b1RpbWVzdGFtcCgpKSxcbiAgICAgICAgICAgIGNyZWF0ZVRpbWU6IHRvVGltZXN0YW1wKGUsIHQuY3JlYXRlVGltZS50b1RpbWVzdGFtcCgpKVxuICAgICAgICB9O1xuICAgIH0oZS55dCwgdCk7IGVsc2UgaWYgKHQuaXNOb0RvY3VtZW50KCkpIHIubm9Eb2N1bWVudCA9IHtcbiAgICAgICAgcGF0aDogbi5wYXRoLnRvQXJyYXkoKSxcbiAgICAgICAgcmVhZFRpbWU6IF9fUFJJVkFURV90b0RiVGltZXN0YW1wKHQudmVyc2lvbilcbiAgICB9OyBlbHNlIHtcbiAgICAgICAgaWYgKCF0LmlzVW5rbm93bkRvY3VtZW50KCkpIHJldHVybiBmYWlsKDU3OTA0LCB7XG4gICAgICAgICAgICBkb2N1bWVudDogdFxuICAgICAgICB9KTtcbiAgICAgICAgci51bmtub3duRG9jdW1lbnQgPSB7XG4gICAgICAgICAgICBwYXRoOiBuLnBhdGgudG9BcnJheSgpLFxuICAgICAgICAgICAgdmVyc2lvbjogX19QUklWQVRFX3RvRGJUaW1lc3RhbXAodC52ZXJzaW9uKVxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gcjtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3RvRGJUaW1lc3RhbXBLZXkoZSkge1xuICAgIGNvbnN0IHQgPSBlLnRvVGltZXN0YW1wKCk7XG4gICAgcmV0dXJuIFsgdC5zZWNvbmRzLCB0Lm5hbm9zZWNvbmRzIF07XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV90b0RiVGltZXN0YW1wKGUpIHtcbiAgICBjb25zdCB0ID0gZS50b1RpbWVzdGFtcCgpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHNlY29uZHM6IHQuc2Vjb25kcyxcbiAgICAgICAgbmFub3NlY29uZHM6IHQubmFub3NlY29uZHNcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZnJvbURiVGltZXN0YW1wKGUpIHtcbiAgICBjb25zdCB0ID0gbmV3IFRpbWVzdGFtcChlLnNlY29uZHMsIGUubmFub3NlY29uZHMpO1xuICAgIHJldHVybiBTbmFwc2hvdFZlcnNpb24uZnJvbVRpbWVzdGFtcCh0KTtcbn1cblxuLyoqIEVuY29kZXMgYSBiYXRjaCBvZiBtdXRhdGlvbnMgaW50byBhIERiTXV0YXRpb25CYXRjaCBmb3IgbG9jYWwgc3RvcmFnZS4gKi9cbi8qKiBEZWNvZGVzIGEgRGJNdXRhdGlvbkJhdGNoIGludG8gYSBNdXRhdGlvbkJhdGNoICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfZnJvbURiTXV0YXRpb25CYXRjaChlLCB0KSB7XG4gICAgY29uc3QgbiA9ICh0LmJhc2VNdXRhdGlvbnMgfHwgW10pLm1hcCgodCA9PiBfX1BSSVZBVEVfZnJvbU11dGF0aW9uKGUueXQsIHQpKSk7XG4gICAgLy8gU3F1YXNoIG9sZCB0cmFuc2Zvcm0gbXV0YXRpb25zIGludG8gZXhpc3RpbmcgcGF0Y2ggb3Igc2V0IG11dGF0aW9ucy5cbiAgICAvLyBUaGUgcmVwbGFjZW1lbnQgb2YgcmVwcmVzZW50aW5nIGB0cmFuc2Zvcm1zYCB3aXRoIGB1cGRhdGVfdHJhbnNmb3Jtc2BcbiAgICAvLyBvbiB0aGUgU0RLIG1lYW5zIHRoYXQgb2xkIGB0cmFuc2Zvcm1gIG11dGF0aW9ucyBzdG9yZWQgaW4gSW5kZXhlZERCIG5lZWRcbiAgICAvLyB0byBiZSB1cGRhdGVkIHRvIGB1cGRhdGVfdHJhbnNmb3Jtc2AuXG4gICAgLy8gVE9ETyhiLzE3NDYwODM3NCk6IFJlbW92ZSB0aGlzIGNvZGUgb25jZSB3ZSBwZXJmb3JtIGEgc2NoZW1hIG1pZ3JhdGlvbi5cbiAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCB0Lm11dGF0aW9ucy5sZW5ndGggLSAxOyArK2UpIHtcbiAgICAgICAgY29uc3QgbiA9IHQubXV0YXRpb25zW2VdO1xuICAgICAgICBpZiAoZSArIDEgPCB0Lm11dGF0aW9ucy5sZW5ndGggJiYgdm9pZCAwICE9PSB0Lm11dGF0aW9uc1tlICsgMV0udHJhbnNmb3JtKSB7XG4gICAgICAgICAgICBjb25zdCByID0gdC5tdXRhdGlvbnNbZSArIDFdO1xuICAgICAgICAgICAgbi51cGRhdGVUcmFuc2Zvcm1zID0gci50cmFuc2Zvcm0uZmllbGRUcmFuc2Zvcm1zLCB0Lm11dGF0aW9ucy5zcGxpY2UoZSArIDEsIDEpLCBcbiAgICAgICAgICAgICsrZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCByID0gdC5tdXRhdGlvbnMubWFwKCh0ID0+IF9fUFJJVkFURV9mcm9tTXV0YXRpb24oZS55dCwgdCkpKSwgaSA9IFRpbWVzdGFtcC5mcm9tTWlsbGlzKHQubG9jYWxXcml0ZVRpbWVNcyk7XG4gICAgcmV0dXJuIG5ldyBNdXRhdGlvbkJhdGNoKHQuYmF0Y2hJZCwgaSwgbiwgcik7XG59XG5cbi8qKiBEZWNvZGVzIGEgRGJUYXJnZXQgaW50byBUYXJnZXREYXRhICovIGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tRGJUYXJnZXQoZSkge1xuICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZnJvbURiVGltZXN0YW1wKGUucmVhZFRpbWUpLCBuID0gdm9pZCAwICE9PSBlLmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24gPyBfX1BSSVZBVEVfZnJvbURiVGltZXN0YW1wKGUubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbikgOiBTbmFwc2hvdFZlcnNpb24ubWluKCk7XG4gICAgbGV0IHI7XG4gICAgcmV0dXJuIHIgPSBcbiAgICAvKipcbiAqIEEgaGVscGVyIGZ1bmN0aW9uIGZvciBmaWd1cmluZyBvdXQgd2hhdCBraW5kIG9mIHF1ZXJ5IGhhcyBiZWVuIHN0b3JlZC5cbiAqL1xuICAgIGZ1bmN0aW9uIF9fUFJJVkFURV9pc0RvY3VtZW50UXVlcnkoZSkge1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSBlLmRvY3VtZW50cztcbiAgICB9XG4gICAgLyoqIEVuY29kZXMgYSBEYkJ1bmRsZSB0byBhIEJ1bmRsZU1ldGFkYXRhIG9iamVjdC4gKi8gKGUucXVlcnkpID8gZnVuY3Rpb24gX19QUklWQVRFX2Zyb21Eb2N1bWVudHNUYXJnZXQoZSkge1xuICAgICAgICBjb25zdCB0ID0gZS5kb2N1bWVudHMubGVuZ3RoO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2hhcmRBc3NlcnQoMSA9PT0gdCwgMTk2Niwge1xuICAgICAgICAgICAgY291bnQ6IHRcbiAgICAgICAgfSksIF9fUFJJVkFURV9xdWVyeVRvVGFyZ2V0KF9fUFJJVkFURV9uZXdRdWVyeUZvclBhdGgoX19QUklWQVRFX2Zyb21RdWVyeVBhdGgoZS5kb2N1bWVudHNbMF0pKSk7XG4gICAgfShlLnF1ZXJ5KSA6IGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tUXVlcnlUYXJnZXQoZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3F1ZXJ5VG9UYXJnZXQoX19QUklWQVRFX2NvbnZlcnRRdWVyeVRhcmdldFRvUXVlcnkoZSkpO1xuICAgIH0oZS5xdWVyeSksIG5ldyBUYXJnZXREYXRhKHIsIGUudGFyZ2V0SWQsIFwiVGFyZ2V0UHVycG9zZUxpc3RlblwiIC8qIFRhcmdldFB1cnBvc2UuTGlzdGVuICovICwgZS5sYXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIsIHQsIG4sIEJ5dGVTdHJpbmcuZnJvbUJhc2U2NFN0cmluZyhlLnJlc3VtZVRva2VuKSk7XG59XG5cbi8qKiBFbmNvZGVzIFRhcmdldERhdGEgaW50byBhIERiVGFyZ2V0IGZvciBzdG9yYWdlIGxvY2FsbHkuICovIGZ1bmN0aW9uIF9fUFJJVkFURV90b0RiVGFyZ2V0KGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX3RvRGJUaW1lc3RhbXAodC5zbmFwc2hvdFZlcnNpb24pLCByID0gX19QUklWQVRFX3RvRGJUaW1lc3RhbXAodC5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKTtcbiAgICBsZXQgaTtcbiAgICBpID0gX19QUklWQVRFX3RhcmdldElzRG9jdW1lbnRUYXJnZXQodC50YXJnZXQpID8gX19QUklWQVRFX3RvRG9jdW1lbnRzVGFyZ2V0KGUueXQsIHQudGFyZ2V0KSA6IF9fUFJJVkFURV90b1F1ZXJ5VGFyZ2V0KGUueXQsIHQudGFyZ2V0KS5mdDtcbiAgICAvLyBXZSBjYW4ndCBzdG9yZSB0aGUgcmVzdW1lVG9rZW4gYXMgYSBCeXRlU3RyaW5nIGluIEluZGV4ZWREYiwgc28gd2VcbiAgICAvLyBjb252ZXJ0IGl0IHRvIGEgYmFzZTY0IHN0cmluZyBmb3Igc3RvcmFnZS5cbiAgICAgICAgY29uc3QgcyA9IHQucmVzdW1lVG9rZW4udG9CYXNlNjQoKTtcbiAgICAvLyBsYXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgaXMgYWx3YXlzIDAgdW50aWwgd2UgZG8gcmVhbCBHQy5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgdGFyZ2V0SWQ6IHQudGFyZ2V0SWQsXG4gICAgICAgIGNhbm9uaWNhbElkOiBfX1BSSVZBVEVfY2Fub25pZnlUYXJnZXQodC50YXJnZXQpLFxuICAgICAgICByZWFkVGltZTogbixcbiAgICAgICAgcmVzdW1lVG9rZW46IHMsXG4gICAgICAgIGxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcjogdC5zZXF1ZW5jZU51bWJlcixcbiAgICAgICAgbGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbjogcixcbiAgICAgICAgcXVlcnk6IGlcbiAgICB9O1xufVxuXG4vKipcbiAqIEVuY29kZXMgYSBgQnVuZGxlZFF1ZXJ5YCBmcm9tIGJ1bmRsZSBwcm90byB0byBhIFF1ZXJ5IG9iamVjdC5cbiAqXG4gKiBUaGlzIHJlY29uc3RydWN0cyB0aGUgb3JpZ2luYWwgcXVlcnkgdXNlZCB0byBidWlsZCB0aGUgYnVuZGxlIGJlaW5nIGxvYWRlZCxcbiAqIGluY2x1ZGluZyBmZWF0dXJlcyBleGlzdHMgb25seSBpbiBTREtzIChmb3IgZXhhbXBsZTogbGltaXQtdG8tbGFzdCkuXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tQnVuZGxlZFF1ZXJ5KGUpIHtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX2NvbnZlcnRRdWVyeVRhcmdldFRvUXVlcnkoe1xuICAgICAgICBwYXJlbnQ6IGUucGFyZW50LFxuICAgICAgICBzdHJ1Y3R1cmVkUXVlcnk6IGUuc3RydWN0dXJlZFF1ZXJ5XG4gICAgfSk7XG4gICAgcmV0dXJuIFwiTEFTVFwiID09PSBlLmxpbWl0VHlwZSA/IF9fUFJJVkFURV9xdWVyeVdpdGhMaW1pdCh0LCB0LmxpbWl0LCBcIkxcIiAvKiBMaW1pdFR5cGUuTGFzdCAqLykgOiB0O1xufVxuXG4vKiogRW5jb2RlcyBhIE5hbWVkUXVlcnkgcHJvdG8gb2JqZWN0IHRvIGEgTmFtZWRRdWVyeSBtb2RlbCBvYmplY3QuICovXG4vKiogRW5jb2RlcyBhIERiRG9jdW1lbnRPdmVybGF5IG9iamVjdCB0byBhbiBPdmVybGF5IG1vZGVsIG9iamVjdC4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tRGJEb2N1bWVudE92ZXJsYXkoZSwgdCkge1xuICAgIHJldHVybiBuZXcgT3ZlcmxheSh0Lmxhcmdlc3RCYXRjaElkLCBfX1BSSVZBVEVfZnJvbU11dGF0aW9uKGUueXQsIHQub3ZlcmxheU11dGF0aW9uKSk7XG59XG5cbi8qKiBEZWNvZGVzIGFuIE92ZXJsYXkgbW9kZWwgb2JqZWN0IGludG8gYSBEYkRvY3VtZW50T3ZlcmxheSBvYmplY3QuICovXG4vKipcbiAqIFJldHVybnMgdGhlIERiRG9jdW1lbnRPdmVybGF5S2V5IGNvcnJlc3BvbmRpbmcgdG8gdGhlIGdpdmVuIHVzZXIgYW5kXG4gKiBkb2N1bWVudCBrZXkuXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV90b0RiRG9jdW1lbnRPdmVybGF5S2V5KGUsIHQpIHtcbiAgICBjb25zdCBuID0gdC5wYXRoLmxhc3RTZWdtZW50KCk7XG4gICAgcmV0dXJuIFsgZSwgX19QUklWQVRFX2VuY29kZVJlc291cmNlUGF0aCh0LnBhdGgucG9wTGFzdCgpKSwgbiBdO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdG9EYkluZGV4U3RhdGUoZSwgdCwgbiwgcikge1xuICAgIHJldHVybiB7XG4gICAgICAgIGluZGV4SWQ6IGUsXG4gICAgICAgIHVpZDogdCxcbiAgICAgICAgc2VxdWVuY2VOdW1iZXI6IG4sXG4gICAgICAgIHJlYWRUaW1lOiBfX1BSSVZBVEVfdG9EYlRpbWVzdGFtcChyLnJlYWRUaW1lKSxcbiAgICAgICAgZG9jdW1lbnRLZXk6IF9fUFJJVkFURV9lbmNvZGVSZXNvdXJjZVBhdGgoci5kb2N1bWVudEtleS5wYXRoKSxcbiAgICAgICAgbGFyZ2VzdEJhdGNoSWQ6IHIubGFyZ2VzdEJhdGNoSWRcbiAgICB9O1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfSW5kZXhlZERiQnVuZGxlQ2FjaGUge1xuICAgIGdldEJ1bmRsZU1ldGFkYXRhKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9idW5kbGVzU3RvcmUoZSkuZ2V0KHQpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgaWYgKGUpIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbURiQnVuZGxlKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBpZDogZS5idW5kbGVJZCxcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlVGltZTogX19QUklWQVRFX2Zyb21EYlRpbWVzdGFtcChlLmNyZWF0ZVRpbWUpLFxuICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uOiBlLnZlcnNpb25cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqIEVuY29kZXMgYSBCdW5kbGVNZXRhZGF0YSB0byBhIERiQnVuZGxlLiAqLyAoZSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc2F2ZUJ1bmRsZU1ldGFkYXRhKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9idW5kbGVzU3RvcmUoZSkucHV0KGZ1bmN0aW9uIF9fUFJJVkFURV90b0RiQnVuZGxlKGUpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgYnVuZGxlSWQ6IGUuaWQsXG4gICAgICAgICAgICAgICAgY3JlYXRlVGltZTogX19QUklWQVRFX3RvRGJUaW1lc3RhbXAoX19QUklWQVRFX2Zyb21WZXJzaW9uKGUuY3JlYXRlVGltZSkpLFxuICAgICAgICAgICAgICAgIHZlcnNpb246IGUudmVyc2lvblxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICAvKiogRW5jb2RlcyBhIERiTmFtZWRRdWVyeSB0byBhIE5hbWVkUXVlcnkuICovICh0KSk7XG4gICAgfVxuICAgIGdldE5hbWVkUXVlcnkoZSwgdCkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX25hbWVkUXVlcmllc1N0b3JlKGUpLmdldCh0KS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGlmIChlKSByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX2Zyb21EYk5hbWVkUXVlcnkoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGUubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgcXVlcnk6IF9fUFJJVkFURV9mcm9tQnVuZGxlZFF1ZXJ5KGUuYnVuZGxlZFF1ZXJ5KSxcbiAgICAgICAgICAgICAgICAgICAgcmVhZFRpbWU6IF9fUFJJVkFURV9mcm9tRGJUaW1lc3RhbXAoZS5yZWFkVGltZSlcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqIEVuY29kZXMgYSBOYW1lZFF1ZXJ5IGZyb20gYSBidW5kbGUgcHJvdG8gdG8gYSBEYk5hbWVkUXVlcnkuICovIChlKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBzYXZlTmFtZWRRdWVyeShlLCB0KSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfbmFtZWRRdWVyaWVzU3RvcmUoZSkucHV0KGZ1bmN0aW9uIF9fUFJJVkFURV90b0RiTmFtZWRRdWVyeShlKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG5hbWU6IGUubmFtZSxcbiAgICAgICAgICAgICAgICByZWFkVGltZTogX19QUklWQVRFX3RvRGJUaW1lc3RhbXAoX19QUklWQVRFX2Zyb21WZXJzaW9uKGUucmVhZFRpbWUpKSxcbiAgICAgICAgICAgICAgICBidW5kbGVkUXVlcnk6IGUuYnVuZGxlZFF1ZXJ5XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KHQpKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBidW5kbGVzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfYnVuZGxlc1N0b3JlKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2dldFN0b3JlKGUsIGJlKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIG5hbWVkUXVlcmllcyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX25hbWVkUXVlcmllc1N0b3JlKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2dldFN0b3JlKGUsIENlKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSW1wbGVtZW50YXRpb24gb2YgRG9jdW1lbnRPdmVybGF5Q2FjaGUgdXNpbmcgSW5kZXhlZERiLlxuICovIGNsYXNzIF9fUFJJVkFURV9JbmRleGVkRGJEb2N1bWVudE92ZXJsYXlDYWNoZSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHNlcmlhbGl6ZXIgLSBUaGUgZG9jdW1lbnQgc2VyaWFsaXplci5cbiAgICAgKiBAcGFyYW0gdXNlcklkIC0gVGhlIHVzZXJJZCBmb3Igd2hpY2ggd2UgYXJlIGFjY2Vzc2luZyBvdmVybGF5cy5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMuc2VyaWFsaXplciA9IGUsIHRoaXMudXNlcklkID0gdDtcbiAgICB9XG4gICAgc3RhdGljIHd0KGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHQudWlkIHx8IFwiXCI7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX0luZGV4ZWREYkRvY3VtZW50T3ZlcmxheUNhY2hlKGUsIG4pO1xuICAgIH1cbiAgICBnZXRPdmVybGF5KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9kb2N1bWVudE92ZXJsYXlTdG9yZShlKS5nZXQoX19QUklWQVRFX3RvRGJEb2N1bWVudE92ZXJsYXlLZXkodGhpcy51c2VySWQsIHQpKS5uZXh0KChlID0+IGUgPyBfX1BSSVZBVEVfZnJvbURiRG9jdW1lbnRPdmVybGF5KHRoaXMuc2VyaWFsaXplciwgZSkgOiBudWxsKSk7XG4gICAgfVxuICAgIGdldE92ZXJsYXlzKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9uZXdPdmVybGF5TWFwKCk7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaCh0LCAodCA9PiB0aGlzLmdldE92ZXJsYXkoZSwgdCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBudWxsICE9PSBlICYmIG4uc2V0KHQsIGUpO1xuICAgICAgICB9KSkpKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIHNhdmVPdmVybGF5cyhlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSBbXTtcbiAgICAgICAgcmV0dXJuIG4uZm9yRWFjaCgoKG4sIGkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBuZXcgT3ZlcmxheSh0LCBpKTtcbiAgICAgICAgICAgIHIucHVzaCh0aGlzLlN0KGUsIHMpKTtcbiAgICAgICAgfSkpLCBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihyKTtcbiAgICB9XG4gICAgcmVtb3ZlT3ZlcmxheXNGb3JCYXRjaElkKGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IG5ldyBTZXQ7XG4gICAgICAgIC8vIEdldCB0aGUgc2V0IG9mIHVuaXF1ZSBjb2xsZWN0aW9uIHBhdGhzLlxuICAgICAgICAgICAgICAgIHQuZm9yRWFjaCgoZSA9PiByLmFkZChfX1BSSVZBVEVfZW5jb2RlUmVzb3VyY2VQYXRoKGUuZ2V0Q29sbGVjdGlvblBhdGgoKSkpKSk7XG4gICAgICAgIGNvbnN0IGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIHIuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gSURCS2V5UmFuZ2UuYm91bmQoWyB0aGlzLnVzZXJJZCwgdCwgbiBdLCBbIHRoaXMudXNlcklkLCB0LCBuICsgMSBdLCBcbiAgICAgICAgICAgIC8qbG93ZXJPcGVuPSovICExLCBcbiAgICAgICAgICAgIC8qdXBwZXJPcGVuPSovICEwKTtcbiAgICAgICAgICAgIGkucHVzaChfX1BSSVZBVEVfZG9jdW1lbnRPdmVybGF5U3RvcmUoZSkuWihHZSwgcikpO1xuICAgICAgICB9KSksIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKGkpO1xuICAgIH1cbiAgICBnZXRPdmVybGF5c0ZvckNvbGxlY3Rpb24oZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gX19QUklWQVRFX25ld092ZXJsYXlNYXAoKSwgaSA9IF9fUFJJVkFURV9lbmNvZGVSZXNvdXJjZVBhdGgodCksIHMgPSBJREJLZXlSYW5nZS5ib3VuZChbIHRoaXMudXNlcklkLCBpLCBuIF0sIFsgdGhpcy51c2VySWQsIGksIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSBdLCBcbiAgICAgICAgLypsb3dlck9wZW49Ki8gITApO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2RvY3VtZW50T3ZlcmxheVN0b3JlKGUpLkooR2UsIHMpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gX19QUklWQVRFX2Zyb21EYkRvY3VtZW50T3ZlcmxheSh0aGlzLnNlcmlhbGl6ZXIsIHQpO1xuICAgICAgICAgICAgICAgIHIuc2V0KGUuZ2V0S2V5KCksIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHI7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0T3ZlcmxheXNGb3JDb2xsZWN0aW9uR3JvdXAoZSwgdCwgbiwgcikge1xuICAgICAgICBjb25zdCBpID0gX19QUklWQVRFX25ld092ZXJsYXlNYXAoKTtcbiAgICAgICAgbGV0IHM7XG4gICAgICAgIC8vIFdlIHdhbnQgYmF0Y2ggSURzIGxhcmdlciB0aGFuIGBzaW5jZUJhdGNoSWRgLCBhbmQgc28gdGhlIGxvd2VyIGJvdW5kXG4gICAgICAgIC8vIGlzIG5vdCBpbmNsdXNpdmUuXG4gICAgICAgICAgICAgICAgY29uc3QgbyA9IElEQktleVJhbmdlLmJvdW5kKFsgdGhpcy51c2VySWQsIHQsIG4gXSwgWyB0aGlzLnVzZXJJZCwgdCwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZIF0sIFxuICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMCk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfZG9jdW1lbnRPdmVybGF5U3RvcmUoZSkuZWUoe1xuICAgICAgICAgICAgaW5kZXg6IGplLFxuICAgICAgICAgICAgcmFuZ2U6IG9cbiAgICAgICAgfSwgKChlLCB0LCBuKSA9PiB7XG4gICAgICAgICAgICAvLyBXZSBkbyBub3Qgd2FudCB0byByZXR1cm4gcGFydGlhbCBiYXRjaCBvdmVybGF5cywgZXZlbiBpZiB0aGUgc2l6ZVxuICAgICAgICAgICAgLy8gb2YgdGhlIHJlc3VsdCBzZXQgZXhjZWVkcyB0aGUgZ2l2ZW4gYGNvdW50YCBhcmd1bWVudC4gVGhlcmVmb3JlLCB3ZVxuICAgICAgICAgICAgLy8gY29udGludWUgdG8gYWdncmVnYXRlIHJlc3VsdHMgZXZlbiBhZnRlciB0aGUgcmVzdWx0IHNpemUgZXhjZWVkc1xuICAgICAgICAgICAgLy8gYGNvdW50YCBpZiB0aGVyZSBhcmUgbW9yZSBvdmVybGF5cyBmcm9tIHRoZSBgY3VycmVudEJhdGNoSWRgLlxuICAgICAgICAgICAgY29uc3QgbyA9IF9fUFJJVkFURV9mcm9tRGJEb2N1bWVudE92ZXJsYXkodGhpcy5zZXJpYWxpemVyLCB0KTtcbiAgICAgICAgICAgIGkuc2l6ZSgpIDwgciB8fCBvLmxhcmdlc3RCYXRjaElkID09PSBzID8gKGkuc2V0KG8uZ2V0S2V5KCksIG8pLCBzID0gby5sYXJnZXN0QmF0Y2hJZCkgOiBuLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgU3QoZSwgdCkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2RvY3VtZW50T3ZlcmxheVN0b3JlKGUpLnB1dChmdW5jdGlvbiBfX1BSSVZBVEVfdG9EYkRvY3VtZW50T3ZlcmxheShlLCB0LCBuKSB7XG4gICAgICAgICAgICBjb25zdCBbciwgaSwgc10gPSBfX1BSSVZBVEVfdG9EYkRvY3VtZW50T3ZlcmxheUtleSh0LCBuLm11dGF0aW9uLmtleSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVzZXJJZDogdCxcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uUGF0aDogaSxcbiAgICAgICAgICAgICAgICBkb2N1bWVudElkOiBzLFxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25Hcm91cDogbi5tdXRhdGlvbi5rZXkuZ2V0Q29sbGVjdGlvbkdyb3VwKCksXG4gICAgICAgICAgICAgICAgbGFyZ2VzdEJhdGNoSWQ6IG4ubGFyZ2VzdEJhdGNoSWQsXG4gICAgICAgICAgICAgICAgb3ZlcmxheU11dGF0aW9uOiB0b011dGF0aW9uKGUueXQsIG4ubXV0YXRpb24pXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KHRoaXMuc2VyaWFsaXplciwgdGhpcy51c2VySWQsIHQpKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBkb2N1bWVudCBvdmVybGF5IG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZG9jdW1lbnRPdmVybGF5U3RvcmUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZ2V0U3RvcmUoZSwgS2UpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyNCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfSW5kZXhlZERiR2xvYmFsc0NhY2hlIHtcbiAgICBidChlKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfZ2V0U3RvcmUoZSwgSGUpO1xuICAgIH1cbiAgICBnZXRTZXNzaW9uVG9rZW4oZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5idChlKS5nZXQoXCJzZXNzaW9uVG9rZW5cIikubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZT8udmFsdWU7XG4gICAgICAgICAgICByZXR1cm4gdCA/IEJ5dGVTdHJpbmcuZnJvbVVpbnQ4QXJyYXkodCkgOiBCeXRlU3RyaW5nLkVNUFRZX0JZVEVfU1RSSU5HO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHNldFNlc3Npb25Ub2tlbihlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJ0KGUpLnB1dCh7XG4gICAgICAgICAgICBuYW1lOiBcInNlc3Npb25Ub2tlblwiLFxuICAgICAgICAgICAgdmFsdWU6IHQudG9VaW50OEFycmF5KClcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gTm90ZTogVGhpcyBjb2RlIGlzIGNvcGllZCBmcm9tIHRoZSBiYWNrZW5kLiBDb2RlIHRoYXQgaXMgbm90IHVzZWQgYnlcbi8vIEZpcmVzdG9yZSB3YXMgcmVtb3ZlZC5cbi8qKiBGaXJlc3RvcmUgaW5kZXggdmFsdWUgd3JpdGVyLiAgKi9cbmNsYXNzIF9fUFJJVkFURV9GaXJlc3RvcmVJbmRleFZhbHVlV3JpdGVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHt9XG4gICAgLy8gVGhlIHdyaXRlIG1ldGhvZHMgYmVsb3cgc2hvcnQtY2lyY3VpdCB3cml0aW5nIHRlcm1pbmF0b3JzIGZvciB2YWx1ZXNcbiAgICAvLyBjb250YWluaW5nIGEgKHRlcm1pbmF0aW5nKSB0cnVuY2F0ZWQgdmFsdWUuXG4gICAgLy8gQXMgYW4gZXhhbXBsZSwgY29uc2lkZXIgdGhlIHJlc3VsdGluZyBlbmNvZGluZyBmb3I6XG4gICAgLy8gW1wiYmFyXCIsIFsyLCBcImZvb1wiXV0gLT4gKFNUUklORywgXCJiYXJcIiwgVEVSTSwgQVJSQVksIE5VTUJFUiwgMiwgU1RSSU5HLCBcImZvb1wiLCBURVJNLCBURVJNLCBURVJNKVxuICAgIC8vIFtcImJhclwiLCBbMiwgdHJ1bmNhdGVkKFwiZm9vXCIpXV0gLT4gKFNUUklORywgXCJiYXJcIiwgVEVSTSwgQVJSQVksIE5VTUJFUiwgMiwgU1RSSU5HLCBcImZvb1wiLCBUUlVOQylcbiAgICAvLyBbXCJiYXJcIiwgdHJ1bmNhdGVkKFtcImZvb1wiXSldIC0+IChTVFJJTkcsIFwiYmFyXCIsIFRFUk0sIEFSUkFZLiBTVFJJTkcsIFwiZm9vXCIsIFRFUk0sIFRSVU5DKVxuICAgIC8qKiBXcml0ZXMgYW4gaW5kZXggdmFsdWUuICAqL1xuICAgIER0KGUsIHQpIHtcbiAgICAgICAgdGhpcy5DdChlLCB0KSwgXG4gICAgICAgIC8vIFdyaXRlIHNlcGFyYXRvciB0byBzcGxpdCBpbmRleCB2YWx1ZXNcbiAgICAgICAgLy8gKHNlZSBnby9maXJlc3RvcmUtc3RvcmFnZS1mb3JtYXQjZW5jb2RpbmdzKS5cbiAgICAgICAgdC52dCgpO1xuICAgIH1cbiAgICBDdChlLCB0KSB7XG4gICAgICAgIGlmIChcIm51bGxWYWx1ZVwiIGluIGUpIHRoaXMuRnQodCwgNSk7IGVsc2UgaWYgKFwiYm9vbGVhblZhbHVlXCIgaW4gZSkgdGhpcy5GdCh0LCAxMCksIFxuICAgICAgICB0Lk10KGUuYm9vbGVhblZhbHVlID8gMSA6IDApOyBlbHNlIGlmIChcImludGVnZXJWYWx1ZVwiIGluIGUpIHRoaXMuRnQodCwgMTUpLCB0Lk10KF9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIoZS5pbnRlZ2VyVmFsdWUpKTsgZWxzZSBpZiAoXCJkb3VibGVWYWx1ZVwiIGluIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfbm9ybWFsaXplTnVtYmVyKGUuZG91YmxlVmFsdWUpO1xuICAgICAgICAgICAgaXNOYU4obikgPyB0aGlzLkZ0KHQsIDEzKSA6ICh0aGlzLkZ0KHQsIDE1KSwgX19QUklWQVRFX2lzTmVnYXRpdmVaZXJvKG4pID8gXG4gICAgICAgICAgICAvLyAtMC4wLCAwIGFuZCAwLjAgYXJlIGFsbCBjb25zaWRlcmVkIHRoZSBzYW1lXG4gICAgICAgICAgICB0Lk10KDApIDogdC5NdChuKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoXCJ0aW1lc3RhbXBWYWx1ZVwiIGluIGUpIHtcbiAgICAgICAgICAgIGxldCBuID0gZS50aW1lc3RhbXBWYWx1ZTtcbiAgICAgICAgICAgIHRoaXMuRnQodCwgMjApLCBcInN0cmluZ1wiID09IHR5cGVvZiBuICYmIChuID0gX19QUklWQVRFX25vcm1hbGl6ZVRpbWVzdGFtcChuKSksIHQueHQoYCR7bi5zZWNvbmRzIHx8IFwiXCJ9YCksIFxuICAgICAgICAgICAgdC5NdChuLm5hbm9zIHx8IDApO1xuICAgICAgICB9IGVsc2UgaWYgKFwic3RyaW5nVmFsdWVcIiBpbiBlKSB0aGlzLk90KGUuc3RyaW5nVmFsdWUsIHQpLCB0aGlzLk50KHQpOyBlbHNlIGlmIChcImJ5dGVzVmFsdWVcIiBpbiBlKSB0aGlzLkZ0KHQsIDMwKSwgXG4gICAgICAgIHQuQnQoX19QUklWQVRFX25vcm1hbGl6ZUJ5dGVTdHJpbmcoZS5ieXRlc1ZhbHVlKSksIHRoaXMuTnQodCk7IGVsc2UgaWYgKFwicmVmZXJlbmNlVmFsdWVcIiBpbiBlKSB0aGlzLkx0KGUucmVmZXJlbmNlVmFsdWUsIHQpOyBlbHNlIGlmIChcImdlb1BvaW50VmFsdWVcIiBpbiBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gZS5nZW9Qb2ludFZhbHVlO1xuICAgICAgICAgICAgdGhpcy5GdCh0LCA0NSksIHQuTXQobi5sYXRpdHVkZSB8fCAwKSwgdC5NdChuLmxvbmdpdHVkZSB8fCAwKTtcbiAgICAgICAgfSBlbHNlIFwibWFwVmFsdWVcIiBpbiBlID8gX19QUklWQVRFX2lzTWF4VmFsdWUoZSkgPyB0aGlzLkZ0KHQsIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSKSA6IF9fUFJJVkFURV9pc1ZlY3RvclZhbHVlKGUpID8gdGhpcy5rdChlLm1hcFZhbHVlLCB0KSA6ICh0aGlzLnF0KGUubWFwVmFsdWUsIHQpLCBcbiAgICAgICAgdGhpcy5OdCh0KSkgOiBcImFycmF5VmFsdWVcIiBpbiBlID8gKHRoaXMuUXQoZS5hcnJheVZhbHVlLCB0KSwgdGhpcy5OdCh0KSkgOiBmYWlsKDE5MDIyLCB7XG4gICAgICAgICAgICAkdDogZVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgT3QoZSwgdCkge1xuICAgICAgICB0aGlzLkZ0KHQsIDI1KSwgdGhpcy5VdChlLCB0KTtcbiAgICB9XG4gICAgVXQoZSwgdCkge1xuICAgICAgICB0Lnh0KGUpO1xuICAgIH1cbiAgICBxdChlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLmZpZWxkcyB8fCB7fTtcbiAgICAgICAgdGhpcy5GdCh0LCA1NSk7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiBPYmplY3Qua2V5cyhuKSkgdGhpcy5PdChlLCB0KSwgdGhpcy5DdChuW2VdLCB0KTtcbiAgICB9XG4gICAga3QoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gZS5maWVsZHMgfHwge307XG4gICAgICAgIHRoaXMuRnQodCwgNTMpO1xuICAgICAgICAvLyBWZWN0b3JzIHNvcnQgZmlyc3QgYnkgbGVuZ3RoXG4gICAgICAgIGNvbnN0IHIgPSBFdCwgaSA9IG5bcl0uYXJyYXlWYWx1ZT8udmFsdWVzPy5sZW5ndGggfHwgMDtcbiAgICAgICAgdGhpcy5GdCh0LCAxNSksIHQuTXQoX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcihpKSksIFxuICAgICAgICAvLyBWZWN0b3JzIHRoZW4gc29ydCBieSBwb3NpdGlvbiB2YWx1ZVxuICAgICAgICB0aGlzLk90KHIsIHQpLCB0aGlzLkN0KG5bcl0sIHQpO1xuICAgIH1cbiAgICBRdChlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLnZhbHVlcyB8fCBbXTtcbiAgICAgICAgdGhpcy5GdCh0LCA1MCk7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiBuKSB0aGlzLkN0KGUsIHQpO1xuICAgIH1cbiAgICBMdChlLCB0KSB7XG4gICAgICAgIHRoaXMuRnQodCwgMzcpO1xuICAgICAgICBEb2N1bWVudEtleS5mcm9tTmFtZShlKS5wYXRoLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5GdCh0LCA2MCksIHRoaXMuVXQoZSwgdCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgRnQoZSwgdCkge1xuICAgICAgICBlLk10KHQpO1xuICAgIH1cbiAgICBOdChlKSB7XG4gICAgICAgIC8vIFdoaWxlIHRoZSBTREsgZG9lcyBub3QgaW1wbGVtZW50IHRydW5jYXRpb24sIHRoZSB0cnVuY2F0aW9uIG1hcmtlciBpc1xuICAgICAgICAvLyB1c2VkIHRvIHRlcm1pbmF0ZSBhbGwgdmFyaWFibGUgbGVuZ3RoIHZhbHVlcyAod2hpY2ggYXJlIHN0cmluZ3MsIGJ5dGVzLFxuICAgICAgICAvLyByZWZlcmVuY2VzLCBhcnJheXMgYW5kIG1hcHMpLlxuICAgICAgICBlLk10KDIpO1xuICAgIH1cbn1cblxuX19QUklWQVRFX0ZpcmVzdG9yZUluZGV4VmFsdWVXcml0ZXIuS3QgPSBuZXcgX19QUklWQVRFX0ZpcmVzdG9yZUluZGV4VmFsdWVXcml0ZXI7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgfCBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyB8IENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIHwgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogVGhlc2UgY29uc3RhbnRzIGFyZSB0YWtlbiBmcm9tIHRoZSBiYWNrZW5kLiAqL1xuY29uc3QgdnQgPSAyNTU7XG5cbi8qKlxuICogQ291bnRzIHRoZSBudW1iZXIgb2YgemVyb3MgaW4gYSBieXRlLlxuICpcbiAqIFZpc2libGUgZm9yIHRlc3RpbmcuXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9udW1iZXJPZkxlYWRpbmdaZXJvc0luQnl0ZShlKSB7XG4gICAgaWYgKDAgPT09IGUpIHJldHVybiA4O1xuICAgIGxldCB0ID0gMDtcbiAgICByZXR1cm4gZSA+PiA0IHx8IChcbiAgICAvLyBUZXN0IGlmIHRoZSBmaXJzdCBmb3VyIGJpdHMgYXJlIHplcm8uXG4gICAgdCArPSA0LCBlIDw8PSA0KSwgZSA+PiA2IHx8IChcbiAgICAvLyBUZXN0IGlmIHRoZSBmaXJzdCB0d28gKG9yIG5leHQgdHdvKSBiaXRzIGFyZSB6ZXJvLlxuICAgIHQgKz0gMiwgZSA8PD0gMiksIGUgPj4gNyB8fCAoXG4gICAgLy8gVGVzdCBpZiB0aGUgcmVtYWluaW5nIGJpdCBpcyB6ZXJvLlxuICAgIHQgKz0gMSksIHQ7XG59XG5cbi8qKiBDb3VudHMgdGhlIG51bWJlciBvZiBsZWFkaW5nIHplcm9zIGluIHRoZSBnaXZlbiBieXRlIGFycmF5LiAqL1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgYnl0ZXMgcmVxdWlyZWQgdG8gc3RvcmUgXCJ2YWx1ZVwiLiBMZWFkaW5nIHplcm8gYnl0ZXNcbiAqIGFyZSBza2lwcGVkLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfdW5zaWduZWROdW1MZW5ndGgoZSkge1xuICAgIC8vIFRoaXMgaXMganVzdCB0aGUgbnVtYmVyIG9mIGJ5dGVzIGZvciB0aGUgdW5zaWduZWQgcmVwcmVzZW50YXRpb24gb2YgdGhlIG51bWJlci5cbiAgICBjb25zdCB0ID0gNjQgLSBmdW5jdGlvbiBfX1BSSVZBVEVfbnVtYmVyT2ZMZWFkaW5nWmVyb3MoZSkge1xuICAgICAgICBsZXQgdCA9IDA7XG4gICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgODsgKytuKSB7XG4gICAgICAgICAgICBjb25zdCByID0gX19QUklWQVRFX251bWJlck9mTGVhZGluZ1plcm9zSW5CeXRlKDI1NSAmIGVbbl0pO1xuICAgICAgICAgICAgaWYgKHQgKz0gciwgOCAhPT0gcikgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfShlKTtcbiAgICByZXR1cm4gTWF0aC5jZWlsKHQgLyA4KTtcbn1cblxuLyoqXG4gKiBPcmRlcmVkQ29kZVdyaXRlciBpcyBhIG1pbmltYWwtYWxsb2NhdGlvbiBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgd3JpdGluZ1xuICogYmVoYXZpb3IgZGVmaW5lZCBieSB0aGUgYmFja2VuZC5cbiAqXG4gKiBUaGUgY29kZSBpcyBwb3J0ZWQgZnJvbSBpdHMgSmF2YSBjb3VudGVycGFydC5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfT3JkZXJlZENvZGVXcml0ZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDEwMjQpLCB0aGlzLnBvc2l0aW9uID0gMDtcbiAgICB9XG4gICAgV3QoZSkge1xuICAgICAgICBjb25zdCB0ID0gZVtTeW1ib2wuaXRlcmF0b3JdKCk7XG4gICAgICAgIGxldCBuID0gdC5uZXh0KCk7XG4gICAgICAgIGZvciAoOyFuLmRvbmU7ICkgdGhpcy5HdChuLnZhbHVlKSwgbiA9IHQubmV4dCgpO1xuICAgICAgICB0aGlzLnp0KCk7XG4gICAgfVxuICAgIGp0KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGVbU3ltYm9sLml0ZXJhdG9yXSgpO1xuICAgICAgICBsZXQgbiA9IHQubmV4dCgpO1xuICAgICAgICBmb3IgKDshbi5kb25lOyApIHRoaXMuSnQobi52YWx1ZSksIG4gPSB0Lm5leHQoKTtcbiAgICAgICAgdGhpcy5IdCgpO1xuICAgIH1cbiAgICAvKiogV3JpdGVzIHV0ZjggYnl0ZXMgaW50byB0aGlzIGJ5dGUgc2VxdWVuY2UsIGFzY2VuZGluZy4gKi8gICAgWXQoZSkge1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQuY2hhckNvZGVBdCgwKTtcbiAgICAgICAgICAgIGlmIChlIDwgMTI4KSB0aGlzLkd0KGUpOyBlbHNlIGlmIChlIDwgMjA0OCkgdGhpcy5HdCg5NjAgfCBlID4+PiA2KSwgdGhpcy5HdCgxMjggfCA2MyAmIGUpOyBlbHNlIGlmICh0IDwgXCJcXHVkODAwXCIgfHwgXCJcXHVkYmZmXCIgPCB0KSB0aGlzLkd0KDQ4MCB8IGUgPj4+IDEyKSwgXG4gICAgICAgICAgICB0aGlzLkd0KDEyOCB8IDYzICYgZSA+Pj4gNiksIHRoaXMuR3QoMTI4IHwgNjMgJiBlKTsgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHQuY29kZVBvaW50QXQoMCk7XG4gICAgICAgICAgICAgICAgdGhpcy5HdCgyNDAgfCBlID4+PiAxOCksIHRoaXMuR3QoMTI4IHwgNjMgJiBlID4+PiAxMiksIHRoaXMuR3QoMTI4IHwgNjMgJiBlID4+PiA2KSwgXG4gICAgICAgICAgICAgICAgdGhpcy5HdCgxMjggfCA2MyAmIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuenQoKTtcbiAgICB9XG4gICAgLyoqIFdyaXRlcyB1dGY4IGJ5dGVzIGludG8gdGhpcyBieXRlIHNlcXVlbmNlLCBkZXNjZW5kaW5nICovICAgIFp0KGUpIHtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LmNoYXJDb2RlQXQoMCk7XG4gICAgICAgICAgICBpZiAoZSA8IDEyOCkgdGhpcy5KdChlKTsgZWxzZSBpZiAoZSA8IDIwNDgpIHRoaXMuSnQoOTYwIHwgZSA+Pj4gNiksIHRoaXMuSnQoMTI4IHwgNjMgJiBlKTsgZWxzZSBpZiAodCA8IFwiXFx1ZDgwMFwiIHx8IFwiXFx1ZGJmZlwiIDwgdCkgdGhpcy5KdCg0ODAgfCBlID4+PiAxMiksIFxuICAgICAgICAgICAgdGhpcy5KdCgxMjggfCA2MyAmIGUgPj4+IDYpLCB0aGlzLkp0KDEyOCB8IDYzICYgZSk7IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0LmNvZGVQb2ludEF0KDApO1xuICAgICAgICAgICAgICAgIHRoaXMuSnQoMjQwIHwgZSA+Pj4gMTgpLCB0aGlzLkp0KDEyOCB8IDYzICYgZSA+Pj4gMTIpLCB0aGlzLkp0KDEyOCB8IDYzICYgZSA+Pj4gNiksIFxuICAgICAgICAgICAgICAgIHRoaXMuSnQoMTI4IHwgNjMgJiBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLkh0KCk7XG4gICAgfVxuICAgIFh0KGUpIHtcbiAgICAgICAgLy8gVmFsdWVzIGFyZSBlbmNvZGVkIHdpdGggYSBzaW5nbGUgYnl0ZSBsZW5ndGggcHJlZml4LCBmb2xsb3dlZCBieSB0aGVcbiAgICAgICAgLy8gYWN0dWFsIHZhbHVlIGluIGJpZy1lbmRpYW4gZm9ybWF0IHdpdGggbGVhZGluZyAwIGJ5dGVzIGRyb3BwZWQuXG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmVuKGUpLCBuID0gX19QUklWQVRFX3Vuc2lnbmVkTnVtTGVuZ3RoKHQpO1xuICAgICAgICB0aGlzLnRuKDEgKyBuKSwgdGhpcy5idWZmZXJbdGhpcy5wb3NpdGlvbisrXSA9IDI1NSAmIG47XG4gICAgICAgIC8vIFdyaXRlIHRoZSBsZW5ndGhcbiAgICAgICAgZm9yIChsZXQgZSA9IHQubGVuZ3RoIC0gbjsgZSA8IHQubGVuZ3RoOyArK2UpIHRoaXMuYnVmZmVyW3RoaXMucG9zaXRpb24rK10gPSAyNTUgJiB0W2VdO1xuICAgIH1cbiAgICBubihlKSB7XG4gICAgICAgIC8vIFZhbHVlcyBhcmUgZW5jb2RlZCB3aXRoIGEgc2luZ2xlIGJ5dGUgbGVuZ3RoIHByZWZpeCwgZm9sbG93ZWQgYnkgdGhlXG4gICAgICAgIC8vIGludmVydGVkIHZhbHVlIGluIGJpZy1lbmRpYW4gZm9ybWF0IHdpdGggbGVhZGluZyAwIGJ5dGVzIGRyb3BwZWQuXG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmVuKGUpLCBuID0gX19QUklWQVRFX3Vuc2lnbmVkTnVtTGVuZ3RoKHQpO1xuICAgICAgICB0aGlzLnRuKDEgKyBuKSwgdGhpcy5idWZmZXJbdGhpcy5wb3NpdGlvbisrXSA9IH4oMjU1ICYgbik7XG4gICAgICAgIC8vIFdyaXRlIHRoZSBsZW5ndGhcbiAgICAgICAgZm9yIChsZXQgZSA9IHQubGVuZ3RoIC0gbjsgZSA8IHQubGVuZ3RoOyArK2UpIHRoaXMuYnVmZmVyW3RoaXMucG9zaXRpb24rK10gPSB+KDI1NSAmIHRbZV0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXcml0ZXMgdGhlIFwiaW5maW5pdHlcIiBieXRlIHNlcXVlbmNlIHRoYXQgc29ydHMgYWZ0ZXIgYWxsIG90aGVyIGJ5dGVcbiAgICAgKiBzZXF1ZW5jZXMgd3JpdHRlbiBpbiBhc2NlbmRpbmcgb3JkZXIuXG4gICAgICovICAgIHJuKCkge1xuICAgICAgICB0aGlzLnNuKHZ0KSwgdGhpcy5zbigyNTUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXcml0ZXMgdGhlIFwiaW5maW5pdHlcIiBieXRlIHNlcXVlbmNlIHRoYXQgc29ydHMgYmVmb3JlIGFsbCBvdGhlciBieXRlXG4gICAgICogc2VxdWVuY2VzIHdyaXR0ZW4gaW4gZGVzY2VuZGluZyBvcmRlci5cbiAgICAgKi8gICAgX24oKSB7XG4gICAgICAgIHRoaXMuYW4odnQpLCB0aGlzLmFuKDI1NSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0cyB0aGUgYnVmZmVyIHN1Y2ggdGhhdCBpdCBpcyB0aGUgc2FtZSBhcyB3aGVuIGl0IHdhcyBuZXdseVxuICAgICAqIGNvbnN0cnVjdGVkLlxuICAgICAqLyAgICByZXNldCgpIHtcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IDA7XG4gICAgfVxuICAgIHNlZWQoZSkge1xuICAgICAgICB0aGlzLnRuKGUubGVuZ3RoKSwgdGhpcy5idWZmZXIuc2V0KGUsIHRoaXMucG9zaXRpb24pLCB0aGlzLnBvc2l0aW9uICs9IGUubGVuZ3RoO1xuICAgIH1cbiAgICAvKiogTWFrZXMgYSBjb3B5IG9mIHRoZSBlbmNvZGVkIGJ5dGVzIGluIHRoaXMgYnVmZmVyLiAgKi8gICAgdW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlci5zbGljZSgwLCB0aGlzLnBvc2l0aW9uKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW5jb2RlcyBgdmFsYCBpbnRvIGFuIGVuY29kaW5nIHNvIHRoYXQgdGhlIG9yZGVyIG1hdGNoZXMgdGhlIElFRUUgNzU0XG4gICAgICogZmxvYXRpbmctcG9pbnQgY29tcGFyaXNvbiByZXN1bHRzIHdpdGggdGhlIGZvbGxvd2luZyBleGNlcHRpb25zOlxuICAgICAqICAgLTAuMCA8IDAuMFxuICAgICAqICAgYWxsIG5vbi1OYU4gPCBOYU5cbiAgICAgKiAgIE5hTiA9IE5hTlxuICAgICAqLyAgICBlbihlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBcbiAgICAgICAgLyoqIENvbnZlcnRzIGEgSmF2YVNjcmlwdCBudW1iZXIgdG8gYSBieXRlIGFycmF5ICh1c2luZyBiaWcgZW5kaWFuIGVuY29kaW5nKS4gKi9cbiAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX2RvdWJsZVRvTG9uZ0JpdHMoZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBEYXRhVmlldyhuZXcgQXJyYXlCdWZmZXIoOCkpO1xuICAgICAgICAgICAgcmV0dXJuIHQuc2V0RmxvYXQ2NCgwLCBlLCAvKiBsaXR0bGVFbmRpYW49ICovICExKSwgbmV3IFVpbnQ4QXJyYXkodC5idWZmZXIpO1xuICAgICAgICB9KGUpLCBuID0gISEoMTI4ICYgdFswXSk7XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBmaXJzdCBiaXQgaXMgc2V0LiBXZSB1c2UgYSBiaXQgbWFzayBzaW5jZSB2YWx1ZVswXSBpc1xuICAgICAgICAvLyBlbmNvZGVkIGFzIGEgbnVtYmVyIGZyb20gMCB0byAyNTUuXG4gICAgICAgICAgICAgICAgLy8gUmV2ZXJ0IHRoZSB0d28gY29tcGxlbWVudCB0byBnZXQgbmF0dXJhbCBvcmRlcmluZ1xuICAgICAgICB0WzBdIF49IG4gPyAyNTUgOiAxMjg7XG4gICAgICAgIGZvciAobGV0IGUgPSAxOyBlIDwgdC5sZW5ndGg7ICsrZSkgdFtlXSBePSBuID8gMjU1IDogMDtcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxuICAgIC8qKiBXcml0ZXMgYSBzaW5nbGUgYnl0ZSBhc2NlbmRpbmcgdG8gdGhlIGJ1ZmZlci4gKi8gICAgR3QoZSkge1xuICAgICAgICBjb25zdCB0ID0gMjU1ICYgZTtcbiAgICAgICAgMCA9PT0gdCA/ICh0aGlzLnNuKDApLCB0aGlzLnNuKDI1NSkpIDogdCA9PT0gdnQgPyAodGhpcy5zbih2dCksIHRoaXMuc24oMCkpIDogdGhpcy5zbih0KTtcbiAgICB9XG4gICAgLyoqIFdyaXRlcyBhIHNpbmdsZSBieXRlIGRlc2NlbmRpbmcgdG8gdGhlIGJ1ZmZlci4gICovICAgIEp0KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IDI1NSAmIGU7XG4gICAgICAgIDAgPT09IHQgPyAodGhpcy5hbigwKSwgdGhpcy5hbigyNTUpKSA6IHQgPT09IHZ0ID8gKHRoaXMuYW4odnQpLCB0aGlzLmFuKDApKSA6IHRoaXMuYW4oZSk7XG4gICAgfVxuICAgIHp0KCkge1xuICAgICAgICB0aGlzLnNuKDApLCB0aGlzLnNuKDEpO1xuICAgIH1cbiAgICBIdCgpIHtcbiAgICAgICAgdGhpcy5hbigwKSwgdGhpcy5hbigxKTtcbiAgICB9XG4gICAgc24oZSkge1xuICAgICAgICB0aGlzLnRuKDEpLCB0aGlzLmJ1ZmZlclt0aGlzLnBvc2l0aW9uKytdID0gZTtcbiAgICB9XG4gICAgYW4oZSkge1xuICAgICAgICB0aGlzLnRuKDEpLCB0aGlzLmJ1ZmZlclt0aGlzLnBvc2l0aW9uKytdID0gfmU7XG4gICAgfVxuICAgIHRuKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGUgKyB0aGlzLnBvc2l0aW9uO1xuICAgICAgICBpZiAodCA8PSB0aGlzLmJ1ZmZlci5sZW5ndGgpIHJldHVybjtcbiAgICAgICAgLy8gVHJ5IGRvdWJsaW5nLlxuICAgICAgICAgICAgICAgIGxldCBuID0gMiAqIHRoaXMuYnVmZmVyLmxlbmd0aDtcbiAgICAgICAgLy8gU3RpbGwgbm90IGJpZyBlbm91Z2g/IEp1c3QgYWxsb2NhdGUgdGhlIHJpZ2h0IHNpemUuXG4gICAgICAgICAgICAgICAgbiA8IHQgJiYgKG4gPSB0KTtcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBuZXcgYnVmZmVyLlxuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgVWludDhBcnJheShuKTtcbiAgICAgICAgci5zZXQodGhpcy5idWZmZXIpLCAvLyBjb3B5IG9sZCBkYXRhXG4gICAgICAgIHRoaXMuYnVmZmVyID0gcjtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9Bc2NlbmRpbmdJbmRleEJ5dGVFbmNvZGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuY24gPSBlO1xuICAgIH1cbiAgICBCdChlKSB7XG4gICAgICAgIHRoaXMuY24uV3QoZSk7XG4gICAgfVxuICAgIHh0KGUpIHtcbiAgICAgICAgdGhpcy5jbi5ZdChlKTtcbiAgICB9XG4gICAgTXQoZSkge1xuICAgICAgICB0aGlzLmNuLlh0KGUpO1xuICAgIH1cbiAgICB2dCgpIHtcbiAgICAgICAgdGhpcy5jbi5ybigpO1xuICAgIH1cbn1cblxuY2xhc3MgX19QUklWQVRFX0Rlc2NlbmRpbmdJbmRleEJ5dGVFbmNvZGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuY24gPSBlO1xuICAgIH1cbiAgICBCdChlKSB7XG4gICAgICAgIHRoaXMuY24uanQoZSk7XG4gICAgfVxuICAgIHh0KGUpIHtcbiAgICAgICAgdGhpcy5jbi5adChlKTtcbiAgICB9XG4gICAgTXQoZSkge1xuICAgICAgICB0aGlzLmNuLm5uKGUpO1xuICAgIH1cbiAgICB2dCgpIHtcbiAgICAgICAgdGhpcy5jbi5fbigpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJbXBsZW1lbnRzIGBEaXJlY3Rpb25hbEluZGV4Qnl0ZUVuY29kZXJgIHVzaW5nIGBPcmRlcmVkQ29kZVdyaXRlcmAgZm9yIHRoZVxuICogYWN0dWFsIGVuY29kaW5nLlxuICovIGNsYXNzIF9fUFJJVkFURV9JbmRleEJ5dGVFbmNvZGVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5jbiA9IG5ldyBfX1BSSVZBVEVfT3JkZXJlZENvZGVXcml0ZXIsIHRoaXMubG4gPSBuZXcgX19QUklWQVRFX0FzY2VuZGluZ0luZGV4Qnl0ZUVuY29kZXIodGhpcy5jbiksIFxuICAgICAgICB0aGlzLmhuID0gbmV3IF9fUFJJVkFURV9EZXNjZW5kaW5nSW5kZXhCeXRlRW5jb2Rlcih0aGlzLmNuKTtcbiAgICB9XG4gICAgc2VlZChlKSB7XG4gICAgICAgIHRoaXMuY24uc2VlZChlKTtcbiAgICB9XG4gICAgUG4oZSkge1xuICAgICAgICByZXR1cm4gMCAvKiBJbmRleEtpbmQuQVNDRU5ESU5HICovID09PSBlID8gdGhpcy5sbiA6IHRoaXMuaG47XG4gICAgfVxuICAgIHVuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jbi51bigpO1xuICAgIH1cbiAgICByZXNldCgpIHtcbiAgICAgICAgdGhpcy5jbi5yZXNldCgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBSZXByZXNlbnRzIGFuIGluZGV4IGVudHJ5IHNhdmVkIGJ5IHRoZSBTREsgaW4gcGVyc2lzdGVkIHN0b3JhZ2UuICovIGNsYXNzIF9fUFJJVkFURV9JbmRleEVudHJ5IHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByKSB7XG4gICAgICAgIHRoaXMuVG4gPSBlLCB0aGlzLkluID0gdCwgdGhpcy5FbiA9IG4sIHRoaXMuZG4gPSByO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIEluZGV4RW50cnkgZW50cnkgdGhhdCBzb3J0cyBpbW1lZGlhdGVseSBhZnRlciB0aGUgY3VycmVudFxuICAgICAqIGRpcmVjdGlvbmFsIHZhbHVlLlxuICAgICAqLyAgICBBbigpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZG4ubGVuZ3RoLCB0ID0gMCA9PT0gZSB8fCAyNTUgPT09IHRoaXMuZG5bZSAtIDFdID8gZSArIDEgOiBlLCBuID0gbmV3IFVpbnQ4QXJyYXkodCk7XG4gICAgICAgIHJldHVybiBuLnNldCh0aGlzLmRuLCAwKSwgdCAhPT0gZSA/IG4uc2V0KFsgMCBdLCB0aGlzLmRuLmxlbmd0aCkgOiArK25bbi5sZW5ndGggLSAxXSwgXG4gICAgICAgIG5ldyBfX1BSSVZBVEVfSW5kZXhFbnRyeSh0aGlzLlRuLCB0aGlzLkluLCB0aGlzLkVuLCBuKTtcbiAgICB9XG4gICAgLy8gQ3JlYXRlIGEgcmVwcmVzZW50YXRpb24gb2YgdGhlIEluZGV4IEVudHJ5IGFzIGEgRGJJbmRleEVudHJ5XG4gICAgUm4oZSwgdCwgbikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaW5kZXhJZDogdGhpcy5UbixcbiAgICAgICAgICAgIHVpZDogZSxcbiAgICAgICAgICAgIGFycmF5VmFsdWU6IF9fUFJJVkFURV9lbmNvZGVLZXlTYWZlQnl0ZXModGhpcy5FbiksXG4gICAgICAgICAgICBkaXJlY3Rpb25hbFZhbHVlOiBfX1BSSVZBVEVfZW5jb2RlS2V5U2FmZUJ5dGVzKHRoaXMuZG4pLFxuICAgICAgICAgICAgb3JkZXJlZERvY3VtZW50S2V5OiBfX1BSSVZBVEVfZW5jb2RlS2V5U2FmZUJ5dGVzKHQpLFxuICAgICAgICAgICAgZG9jdW1lbnRLZXk6IG4ucGF0aC50b0FycmF5KClcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLy8gQ3JlYXRlIGEgcmVwcmVzZW50YXRpb24gb2YgdGhlIEluZGV4IEVudHJ5IGFzIGEgRGJJbmRleEVudHJ5S2V5XG4gICAgVm4oZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gdGhpcy5SbihlLCB0LCBuKTtcbiAgICAgICAgcmV0dXJuIFsgci5pbmRleElkLCByLnVpZCwgci5hcnJheVZhbHVlLCByLmRpcmVjdGlvbmFsVmFsdWUsIHIub3JkZXJlZERvY3VtZW50S2V5LCByLmRvY3VtZW50S2V5IF07XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfaW5kZXhFbnRyeUNvbXBhcmF0b3IoZSwgdCkge1xuICAgIGxldCBuID0gZS5UbiAtIHQuVG47XG4gICAgcmV0dXJuIDAgIT09IG4gPyBuIDogKG4gPSBfX1BSSVZBVEVfY29tcGFyZUJ5dGVBcnJheXMoZS5FbiwgdC5FbiksIDAgIT09IG4gPyBuIDogKG4gPSBfX1BSSVZBVEVfY29tcGFyZUJ5dGVBcnJheXMoZS5kbiwgdC5kbiksIFxuICAgIDAgIT09IG4gPyBuIDogRG9jdW1lbnRLZXkuY29tcGFyYXRvcihlLkluLCB0LkluKSkpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfY29tcGFyZUJ5dGVBcnJheXMoZSwgdCkge1xuICAgIGZvciAobGV0IG4gPSAwOyBuIDwgZS5sZW5ndGggJiYgbiA8IHQubGVuZ3RoOyArK24pIHtcbiAgICAgICAgY29uc3QgciA9IGVbbl0gLSB0W25dO1xuICAgICAgICBpZiAoMCAhPT0gcikgcmV0dXJuIHI7XG4gICAgfVxuICAgIHJldHVybiBlLmxlbmd0aCAtIHQubGVuZ3RoO1xufVxuXG4vKipcbiAqIFdvcmthcm91bmQgZm9yIFdlYktpdCBidWc6IGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0yOTI3MjFcbiAqIENyZWF0ZSBhIGtleSBzYWZlIHJlcHJlc2VudGF0aW9uIG9mIFVpbnQ4QXJyYXkgdmFsdWVzLlxuICogSWYgdGhlIGJyb3dzZXIgaXMgZGV0ZWN0ZWQgYXMgU2FmYXJpIG9yIFdlYktpdCwgdGhlblxuICogdGhlIGlucHV0IGFycmF5IHdpbGwgYmUgY29udmVydGVkIHRvIFwic29ydGFibGUgYnl0ZSBzdHJpbmdcIi5cbiAqIE90aGVyd2lzZSwgdGhlIGlucHV0IGFycmF5IHdpbGwgYmUgcmV0dXJuZWQgaW4gaXRzIG9yaWdpbmFsIHR5cGUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2VuY29kZUtleVNhZmVCeXRlcyhlKSB7XG4gICAgcmV0dXJuIGlzU2FmYXJpT3JXZWJraXQoKSA/IFxuICAgIC8qKlxuICogRW5jb2RlcyBhIFVpbnQ4QXJyYXkgaW50byBhIFwic29ydGFibGUgYnl0ZSBzdHJpbmdcIi5cbiAqIEEgXCJzb3J0YWJsZSBieXRlIHN0cmluZ1wiIHNvcnRzIGluIHRoZSBzYW1lIG9yZGVyIGFzIHRoZSBVaW50OEFycmF5LlxuICogVGhpcyB3b3JrcyBiZWNhdXNlIEpTIHN0cmluZyBjb21wYXJpc29uIHNvcnRzIHN0cmluZ3MgYmFzZWQgb24gY29kZSBwb2ludHMuXG4gKi9cbiAgICBmdW5jdGlvbiBfX1BSSVZBVEVfZW5jb2RlVWludDhBcnJheVRvU29ydGFibGVTdHJpbmcoZSkge1xuICAgICAgICBsZXQgdCA9IFwiXCI7XG4gICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgZS5sZW5ndGg7IG4rKykgdCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGVbbl0pO1xuICAgICAgICByZXR1cm4gdDtcbiAgICB9XG4gICAgLyoqXG4gKiBEZWNvZGVzIGEgXCJzb3J0YWJsZSBieXRlIHN0cmluZ1wiIGJhY2sgaW50byBhIFVpbnQ4QXJyYXkuXG4gKiBBIFwic29ydGFibGUgYnl0ZSBzdHJpbmdcIiBpcyBhc3N1bWVkIHRvIGJlIGNyZWF0ZWQgd2hlcmUgZWFjaCBjaGFyYWN0ZXInc1xuICogVW5pY29kZSBjb2RlIHBvaW50IGRpcmVjdGx5IGNvcnJlc3BvbmRzIHRvIGEgc2luZ2xlIGJ5dGUgdmFsdWUgKDAtMjU1KS5cbiAqLyAoZSkgOiBlO1xufVxuXG4vKipcbiAqIFJldmVydHMgdGhlIGtleSBzYWZlIHJlcHJlc2VudGF0aW9uIG9mIFVpbnQ4QXJyYXkgKGNyZWF0ZWQgYnlcbiAqIGVuY29kZUtleVNhZmVCeXRlcykgdG8gYSBub3JtYWwgVWludDhBcnJheS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZGVjb2RlS2V5U2FmZUJ5dGVzKGUpIHtcbiAgICByZXR1cm4gXCJzdHJpbmdcIiAhPSB0eXBlb2YgZSA/IGUgOiBmdW5jdGlvbiBfX1BSSVZBVEVfZGVjb2RlU29ydGFibGVTdHJpbmdUb1VpbnQ4QXJyYXkoZSkge1xuICAgICAgICBjb25zdCB0ID0gbmV3IFVpbnQ4QXJyYXkoZS5sZW5ndGgpO1xuICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IGUubGVuZ3RoOyBuKyspIHRbbl0gPSBlLmNoYXJDb2RlQXQobik7XG4gICAgICAgIHJldHVybiB0O1xuICAgIH1cbiAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgIC8qKlxuICogQSBsaWdodCBxdWVyeSBwbGFubmVyIGZvciBGaXJlc3RvcmUuXG4gKlxuICogVGhpcyBjbGFzcyBtYXRjaGVzIGEgYEZpZWxkSW5kZXhgIGFnYWluc3QgYSBGaXJlc3RvcmUgUXVlcnkgYFRhcmdldGAuIEl0XG4gKiBkZXRlcm1pbmVzIHdoZXRoZXIgYSBnaXZlbiBpbmRleCBjYW4gYmUgdXNlZCB0byBzZXJ2ZSB0aGUgc3BlY2lmaWVkIHRhcmdldC5cbiAqXG4gKiBUaGUgZm9sbG93aW5nIHRhYmxlIHNob3djYXNlcyBzb21lIHBvc3NpYmxlIGluZGV4IGNvbmZpZ3VyYXRpb25zOlxuICpcbiAqIFF1ZXJ5ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IEluZGV4XG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogd2hlcmUoJ2EnLCAnPT0nLCAnYScpLndoZXJlKCdiJywgJz09JywgJ2InKSAgICAgICAgIHwgYSBBU0MsIGIgREVTQ1xuICogd2hlcmUoJ2EnLCAnPT0nLCAnYScpLndoZXJlKCdiJywgJz09JywgJ2InKSAgICAgICAgIHwgYSBBU0NcbiAqIHdoZXJlKCdhJywgJz09JywgJ2EnKS53aGVyZSgnYicsICc9PScsICdiJykgICAgICAgICB8IGIgREVTQ1xuICogd2hlcmUoJ2EnLCAnPj0nLCAnYScpLm9yZGVyQnkoJ2EnKSAgICAgICAgICAgICAgICAgIHwgYSBBU0NcbiAqIHdoZXJlKCdhJywgJz49JywgJ2EnKS5vcmRlckJ5KCdhJywgJ2Rlc2MnKSAgICAgICAgICB8IGEgREVTQ1xuICogd2hlcmUoJ2EnLCAnPj0nLCAnYScpLm9yZGVyQnkoJ2EnKS5vcmRlckJ5KCdiJykgICAgIHwgYSBBU0MsIGIgQVNDXG4gKiB3aGVyZSgnYScsICc+PScsICdhJykub3JkZXJCeSgnYScpLm9yZGVyQnkoJ2InKSAgICAgfCBhIEFTQ1xuICogd2hlcmUoJ2EnLCAnYXJyYXktY29udGFpbnMnLCAnYScpLm9yZGVyQnkoJ2InKSAgICAgIHwgYSBDT05UQUlOUywgYiBBU0NFTkRJTkdcbiAqIHdoZXJlKCdhJywgJ2FycmF5LWNvbnRhaW5zJywgJ2EnKS5vcmRlckJ5KCdiJykgICAgICB8IGEgQ09OVEFJTlNcbiAqLyAoZSk7XG59XG5cbmNsYXNzIF9fUFJJVkFURV9UYXJnZXRJbmRleE1hdGNoZXIge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgLy8gVGhlIGluZXF1YWxpdHkgZmlsdGVycyBvZiB0aGUgdGFyZ2V0IChpZiBpdCBleGlzdHMpLlxuICAgICAgICAvLyBOb3RlOiBUaGUgc29ydCBvbiBGaWVsZEZpbHRlcnMgaXMgbm90IHJlcXVpcmVkLiBVc2luZyBTb3J0ZWRTZXQgaGVyZSBqdXN0IHRvIHV0aWxpemUgdGhlIGN1c3RvbVxuICAgICAgICAvLyBjb21wYXJhdG9yLlxuICAgICAgICB0aGlzLm1uID0gbmV3IFNvcnRlZFNldCgoKGUsIHQpID0+IEZpZWxkUGF0aCQxLmNvbXBhcmF0b3IoZS5maWVsZCwgdC5maWVsZCkpKSwgdGhpcy5jb2xsZWN0aW9uSWQgPSBudWxsICE9IGUuY29sbGVjdGlvbkdyb3VwID8gZS5jb2xsZWN0aW9uR3JvdXAgOiBlLnBhdGgubGFzdFNlZ21lbnQoKSwgXG4gICAgICAgIHRoaXMuZm4gPSBlLm9yZGVyQnksIHRoaXMuZ24gPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIGUuZmlsdGVycykge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQ7XG4gICAgICAgICAgICBlLmlzSW5lcXVhbGl0eSgpID8gdGhpcy5tbiA9IHRoaXMubW4uYWRkKGUpIDogdGhpcy5nbi5wdXNoKGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBwbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubW4uc2l6ZSA+IDE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciB0aGUgaW5kZXggY2FuIGJlIHVzZWQgdG8gc2VydmUgdGhlIFRhcmdldEluZGV4TWF0Y2hlcidzXG4gICAgICogdGFyZ2V0LlxuICAgICAqXG4gICAgICogQW4gaW5kZXggaXMgY29uc2lkZXJlZCBjYXBhYmxlIG9mIHNlcnZpbmcgdGhlIHRhcmdldCB3aGVuOlxuICAgICAqIC0gVGhlIHRhcmdldCB1c2VzIGFsbCBpbmRleCBzZWdtZW50cyBmb3IgaXRzIGZpbHRlcnMgYW5kIG9yZGVyQnkgY2xhdXNlcy5cbiAgICAgKiAgIFRoZSB0YXJnZXQgY2FuIGhhdmUgYWRkaXRpb25hbCBmaWx0ZXIgYW5kIG9yZGVyQnkgY2xhdXNlcywgYnV0IG5vdFxuICAgICAqICAgZmV3ZXIuXG4gICAgICogLSBJZiBhbiBBcnJheUNvbnRhaW5zL0FycmF5Q29udGFpbnNBbnlmaWx0ZXIgaXMgdXNlZCwgdGhlIGluZGV4IG11c3QgYWxzb1xuICAgICAqICAgaGF2ZSBhIGNvcnJlc3BvbmRpbmcgYENPTlRBSU5TYCBzZWdtZW50LlxuICAgICAqIC0gQWxsIGRpcmVjdGlvbmFsIGluZGV4IHNlZ21lbnRzIGNhbiBiZSBtYXBwZWQgdG8gdGhlIHRhcmdldCBhcyBhIHNlcmllcyBvZlxuICAgICAqICAgZXF1YWxpdHkgZmlsdGVycywgYSBzaW5nbGUgaW5lcXVhbGl0eSBmaWx0ZXIgYW5kIGEgc2VyaWVzIG9mIG9yZGVyQnlcbiAgICAgKiAgIGNsYXVzZXMuXG4gICAgICogLSBUaGUgc2VnbWVudHMgdGhhdCByZXByZXNlbnQgdGhlIGVxdWFsaXR5IGZpbHRlcnMgbWF5IGFwcGVhciBvdXQgb2Ygb3JkZXIuXG4gICAgICogLSBUaGUgb3B0aW9uYWwgc2VnbWVudCBmb3IgdGhlIGluZXF1YWxpdHkgZmlsdGVyIG11c3QgYXBwZWFyIGFmdGVyIGFsbFxuICAgICAqICAgZXF1YWxpdHkgc2VnbWVudHMuXG4gICAgICogLSBUaGUgc2VnbWVudHMgdGhhdCByZXByZXNlbnQgdGhhdCBvcmRlckJ5IGNsYXVzZSBvZiB0aGUgdGFyZ2V0IG11c3QgYXBwZWFyXG4gICAgICogICBpbiBvcmRlciBhZnRlciBhbGwgZXF1YWxpdHkgYW5kIGluZXF1YWxpdHkgc2VnbWVudHMuIFNpbmdsZSBvcmRlckJ5XG4gICAgICogICBjbGF1c2VzIGNhbm5vdCBiZSBza2lwcGVkLCBidXQgYSBjb250aW51b3VzIG9yZGVyQnkgc3VmZml4IG1heSBiZVxuICAgICAqICAgb21pdHRlZC5cbiAgICAgKi8gICAgeW4oZSkge1xuICAgICAgICBpZiAoX19QUklWQVRFX2hhcmRBc3NlcnQoZS5jb2xsZWN0aW9uR3JvdXAgPT09IHRoaXMuY29sbGVjdGlvbklkLCA0OTI3OSksIHRoaXMucG4pIFxuICAgICAgICAvLyBPbmx5IHNpbmdsZSBpbmVxdWFsaXR5IGlzIHN1cHBvcnRlZCBmb3Igbm93LlxuICAgICAgICAvLyBUT0RPKEFkZCBzdXBwb3J0IGZvciBtdWx0aXBsZSBpbmVxdWFsaXR5IHF1ZXJ5KTogYi8yOTg0NDEwNDNcbiAgICAgICAgcmV0dXJuICExO1xuICAgICAgICAvLyBJZiB0aGVyZSBpcyBhbiBhcnJheSBlbGVtZW50LCBmaW5kIGEgbWF0Y2hpbmcgZmlsdGVyLlxuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZmllbGRJbmRleEdldEFycmF5U2VnbWVudChlKTtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gdCAmJiAhdGhpcy53bih0KSkgcmV0dXJuICExO1xuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2ZpZWxkSW5kZXhHZXREaXJlY3Rpb25hbFNlZ21lbnRzKGUpO1xuICAgICAgICBsZXQgciA9IG5ldyBTZXQsIGkgPSAwLCBzID0gMDtcbiAgICAgICAgLy8gUHJvY2VzcyBhbGwgZXF1YWxpdGllcyBmaXJzdC4gRXF1YWxpdGllcyBjYW4gYXBwZWFyIG91dCBvZiBvcmRlci5cbiAgICAgICAgZm9yICg7aSA8IG4ubGVuZ3RoICYmIHRoaXMud24obltpXSk7ICsraSkgciA9IHIuYWRkKG5baV0uZmllbGRQYXRoLmNhbm9uaWNhbFN0cmluZygpKTtcbiAgICAgICAgLy8gSWYgd2UgYWxyZWFkeSBoYXZlIHByb2Nlc3NlZCBhbGwgc2VnbWVudHMsIGFsbCBzZWdtZW50cyBhcmUgdXNlZCB0byBzZXJ2ZVxuICAgICAgICAvLyB0aGUgZXF1YWxpdHkgZmlsdGVycyBhbmQgd2UgZG8gbm90IG5lZWQgdG8gbWFwIGFueSBzZWdtZW50cyB0byB0aGVcbiAgICAgICAgLy8gdGFyZ2V0J3MgaW5lcXVhbGl0eSBhbmQgb3JkZXJCeSBjbGF1c2VzLlxuICAgICAgICAgICAgICAgIGlmIChpID09PSBuLmxlbmd0aCkgcmV0dXJuICEwO1xuICAgICAgICBpZiAodGhpcy5tbi5zaXplID4gMCkge1xuICAgICAgICAgICAgLy8gT25seSBhIHNpbmdsZSBpbmVxdWFsaXR5IGlzIGN1cnJlbnRseSBzdXBwb3J0ZWQuIEdldCB0aGUgb25seSBlbnRyeSBpbiB0aGUgc2V0LlxuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMubW4uZ2V0SXRlcmF0b3IoKS5nZXROZXh0KCk7XG4gICAgICAgICAgICAvLyBJZiB0aGVyZSBpcyBhbiBpbmVxdWFsaXR5IGZpbHRlciBhbmQgdGhlIGZpZWxkIHdhcyBub3QgaW4gb25lIG9mIHRoZVxuICAgICAgICAgICAgLy8gZXF1YWxpdHkgZmlsdGVycyBhYm92ZSwgdGhlIG5leHQgc2VnbWVudCBtdXN0IG1hdGNoIGJvdGggdGhlIGZpbHRlclxuICAgICAgICAgICAgLy8gYW5kIHRoZSBmaXJzdCBvcmRlckJ5IGNsYXVzZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghci5oYXMoZS5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gbltpXTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuU24oZSwgdCkgfHwgIXRoaXMuYm4odGhpcy5mbltzKytdLCB0KSkgcmV0dXJuICExO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgKytpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEFsbCByZW1haW5pbmcgc2VnbWVudHMgbmVlZCB0byByZXByZXNlbnQgdGhlIHByZWZpeCBvZiB0aGUgdGFyZ2V0J3NcbiAgICAgICAgLy8gb3JkZXJCeS5cbiAgICAgICAgICAgICAgICBmb3IgKDtpIDwgbi5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgY29uc3QgZSA9IG5baV07XG4gICAgICAgICAgICBpZiAocyA+PSB0aGlzLmZuLmxlbmd0aCB8fCAhdGhpcy5ibih0aGlzLmZuW3MrK10sIGUpKSByZXR1cm4gITE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgZnVsbCBtYXRjaGVkIGZpZWxkIGluZGV4IGZvciB0aGlzIHRhcmdldC4gQ3VycmVudGx5IG11bHRpcGxlXG4gICAgICogaW5lcXVhbGl0eSBxdWVyeSBpcyBub3Qgc3VwcG9ydGVkIHNvIGZ1bmN0aW9uIHJldHVybnMgbnVsbC5cbiAgICAgKi8gICAgRG4oKSB7XG4gICAgICAgIGlmICh0aGlzLnBuKSByZXR1cm4gbnVsbDtcbiAgICAgICAgLy8gV2Ugd2FudCB0byBtYWtlIHN1cmUgb25seSBvbmUgc2VnbWVudCBjcmVhdGVkIGZvciBvbmUgZmllbGQuIEZvciBleGFtcGxlLFxuICAgICAgICAvLyBpbiBjYXNlIGxpa2UgYSA9PSAzIGFuZCBhID4gMiwgSW5kZXgge2EgQVNDRU5ESU5HfSB3aWxsIG9ubHkgYmUgY3JlYXRlZFxuICAgICAgICAvLyBvbmNlLlxuICAgICAgICAgICAgICAgIGxldCBlID0gbmV3IFNvcnRlZFNldChGaWVsZFBhdGgkMS5jb21wYXJhdG9yKTtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdGhpcy5nbikge1xuICAgICAgICAgICAgaWYgKG4uZmllbGQuaXNLZXlGaWVsZCgpKSBjb250aW51ZTtcbiAgICAgICAgICAgIGlmIChcImFycmF5LWNvbnRhaW5zXCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlMgKi8gPT09IG4ub3AgfHwgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlkgKi8gPT09IG4ub3ApIHQucHVzaChuZXcgSW5kZXhTZWdtZW50KG4uZmllbGQsIDIgLyogSW5kZXhLaW5kLkNPTlRBSU5TICovKSk7IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChlLmhhcyhuLmZpZWxkKSkgY29udGludWU7XG4gICAgICAgICAgICAgICAgZSA9IGUuYWRkKG4uZmllbGQpLCB0LnB1c2gobmV3IEluZGV4U2VnbWVudChuLmZpZWxkLCAwIC8qIEluZGV4S2luZC5BU0NFTkRJTkcgKi8pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBOb3RlOiBXZSBkbyBub3QgZXhwbGljaXRseSBjaGVjayBgdGhpcy5pbmVxdWFsaXR5RmlsdGVyYCBidXQgcmF0aGVyIHJlbHlcbiAgICAgICAgLy8gb24gdGhlIHRhcmdldCBkZWZpbmluZyBhbiBhcHByb3ByaWF0ZSBcIm9yZGVyIGJ5XCIgdG8gZW5zdXJlIHRoYXQgdGhlXG4gICAgICAgIC8vIHJlcXVpcmVkIGluZGV4IHNlZ21lbnQgaXMgYWRkZWQuIFRoZSBxdWVyeSBlbmdpbmUgd291bGQgcmVqZWN0IGEgcXVlcnlcbiAgICAgICAgLy8gd2l0aCBhbiBpbmVxdWFsaXR5IGZpbHRlciB0aGF0IGxhY2tzIHRoZSByZXF1aXJlZCBvcmRlci1ieSBjbGF1c2UuXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIHRoaXMuZm4pIFxuICAgICAgICAvLyBTdG9wIGFkZGluZyBtb3JlIHNlZ21lbnRzIGlmIHdlIHNlZSBhIG9yZGVyLWJ5IG9uIGtleS4gVHlwaWNhbGx5IHRoaXNcbiAgICAgICAgLy8gaXMgdGhlIGRlZmF1bHQgaW1wbGljaXQgb3JkZXItYnkgd2hpY2ggaXMgY292ZXJlZCBpbiB0aGUgaW5kZXhfZW50cnlcbiAgICAgICAgLy8gdGFibGUgYXMgYSBzZXBhcmF0ZSBjb2x1bW4uIElmIGl0IGlzIG5vdCB0aGUgZGVmYXVsdCBvcmRlci1ieSwgdGhlXG4gICAgICAgIC8vIGdlbmVyYXRlZCBpbmRleCB3aWxsIGJlIG1pc3Npbmcgc29tZSBzZWdtZW50cyBvcHRpbWl6ZWQgZm9yIG9yZGVyLWJ5cyxcbiAgICAgICAgLy8gd2hpY2ggaXMgcHJvYmFibHkgZmluZS5cbiAgICAgICAgbi5maWVsZC5pc0tleUZpZWxkKCkgfHwgZS5oYXMobi5maWVsZCkgfHwgKGUgPSBlLmFkZChuLmZpZWxkKSwgdC5wdXNoKG5ldyBJbmRleFNlZ21lbnQobi5maWVsZCwgXCJhc2NcIiAvKiBEaXJlY3Rpb24uQVNDRU5ESU5HICovID09PSBuLmRpciA/IDAgLyogSW5kZXhLaW5kLkFTQ0VORElORyAqLyA6IDEgLyogSW5kZXhLaW5kLkRFU0NFTkRJTkcgKi8pKSk7XG4gICAgICAgIHJldHVybiBuZXcgRmllbGRJbmRleChGaWVsZEluZGV4LlVOS05PV05fSUQsIHRoaXMuY29sbGVjdGlvbklkLCB0LCBJbmRleFN0YXRlLmVtcHR5KCkpO1xuICAgIH1cbiAgICB3bihlKSB7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiB0aGlzLmduKSBpZiAodGhpcy5Tbih0LCBlKSkgcmV0dXJuICEwO1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIFNuKGUsIHQpIHtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gZSB8fCAhZS5maWVsZC5pc0VxdWFsKHQuZmllbGRQYXRoKSkgcmV0dXJuICExO1xuICAgICAgICBjb25zdCBuID0gXCJhcnJheS1jb250YWluc1wiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TICovID09PSBlLm9wIHx8IFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZICovID09PSBlLm9wO1xuICAgICAgICByZXR1cm4gMiAvKiBJbmRleEtpbmQuQ09OVEFJTlMgKi8gPT09IHQua2luZCA9PT0gbjtcbiAgICB9XG4gICAgYm4oZSwgdCkge1xuICAgICAgICByZXR1cm4gISFlLmZpZWxkLmlzRXF1YWwodC5maWVsZFBhdGgpICYmICgwIC8qIEluZGV4S2luZC5BU0NFTkRJTkcgKi8gPT09IHQua2luZCAmJiBcImFzY1wiIC8qIERpcmVjdGlvbi5BU0NFTkRJTkcgKi8gPT09IGUuZGlyIHx8IDEgLyogSW5kZXhLaW5kLkRFU0NFTkRJTkcgKi8gPT09IHQua2luZCAmJiBcImRlc2NcIiAvKiBEaXJlY3Rpb24uREVTQ0VORElORyAqLyA9PT0gZS5kaXIpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUHJvdmlkZXMgdXRpbGl0eSBmdW5jdGlvbnMgdGhhdCBoZWxwIHdpdGggYm9vbGVhbiBsb2dpYyB0cmFuc2Zvcm1hdGlvbnMgbmVlZGVkIGZvciBoYW5kbGluZ1xuICogY29tcGxleCBmaWx0ZXJzIHVzZWQgaW4gcXVlcmllcy5cbiAqL1xuLyoqXG4gKiBUaGUgYGluYCBmaWx0ZXIgaXMgb25seSBhIHN5bnRhY3RpYyBzdWdhciBvdmVyIGEgZGlzanVuY3Rpb24gb2YgZXF1YWxpdGllcy4gRm9yIGluc3RhbmNlOiBgYSBpblxuICogWzEsMiwzXWAgaXMgaW4gZmFjdCBgYT09MSB8fCBhPT0yIHx8IGE9PTNgLiBUaGlzIG1ldGhvZCBleHBhbmRzIGFueSBgaW5gIGZpbHRlciBpbiB0aGUgZ2l2ZW5cbiAqIGlucHV0IGludG8gYSBkaXNqdW5jdGlvbiBvZiBlcXVhbGl0eSBmaWx0ZXJzIGFuZCByZXR1cm5zIHRoZSBleHBhbmRlZCBmaWx0ZXIuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2NvbXB1dGVJbkV4cGFuc2lvbihlKSB7XG4gICAgaWYgKF9fUFJJVkFURV9oYXJkQXNzZXJ0KGUgaW5zdGFuY2VvZiBGaWVsZEZpbHRlciB8fCBlIGluc3RhbmNlb2YgQ29tcG9zaXRlRmlsdGVyLCAyMDAxMiksIFxuICAgIGUgaW5zdGFuY2VvZiBGaWVsZEZpbHRlcikge1xuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIF9fUFJJVkFURV9JbkZpbHRlcikge1xuICAgICAgICAgICAgY29uc3QgdCA9IGUudmFsdWUuYXJyYXlWYWx1ZT8udmFsdWVzPy5tYXAoKHQgPT4gRmllbGRGaWx0ZXIuY3JlYXRlKGUuZmllbGQsIFwiPT1cIiAvKiBPcGVyYXRvci5FUVVBTCAqLyAsIHQpKSkgfHwgW107XG4gICAgICAgICAgICByZXR1cm4gQ29tcG9zaXRlRmlsdGVyLmNyZWF0ZSh0LCBcIm9yXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuT1IgKi8pO1xuICAgICAgICB9XG4gICAgICAgIC8vIFdlIGhhdmUgcmVhY2hlZCBvdGhlciBraW5kcyBvZiBmaWVsZCBmaWx0ZXJzLlxuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgLy8gV2UgaGF2ZSBhIGNvbXBvc2l0ZSBmaWx0ZXIuXG4gICAgICAgIGNvbnN0IHQgPSBlLmZpbHRlcnMubWFwKChlID0+IF9fUFJJVkFURV9jb21wdXRlSW5FeHBhbnNpb24oZSkpKTtcbiAgICByZXR1cm4gQ29tcG9zaXRlRmlsdGVyLmNyZWF0ZSh0LCBlLm9wKTtcbn1cblxuLyoqXG4gKiBHaXZlbiBhIGNvbXBvc2l0ZSBmaWx0ZXIsIHJldHVybnMgdGhlIGxpc3Qgb2YgdGVybXMgaW4gaXRzIGRpc2p1bmN0aXZlIG5vcm1hbCBmb3JtLlxuICpcbiAqIDxwPkVhY2ggZWxlbWVudCBpbiB0aGUgcmV0dXJuIHZhbHVlIGlzIG9uZSB0ZXJtIG9mIHRoZSByZXN1bHRpbmcgRE5GLiBGb3IgaW5zdGFuY2U6IEZvciB0aGVcbiAqIGlucHV0OiAoQSB8fCBCKSAmJiBDLCB0aGUgRE5GIGZvcm0gaXM6IChBICYmIEMpIHx8IChCICYmIEMpLCBhbmQgdGhlIHJldHVybiB2YWx1ZSBpcyBhIGxpc3RcbiAqIHdpdGggdHdvIGVsZW1lbnRzOiBhIGNvbXBvc2l0ZSBmaWx0ZXIgdGhhdCBwZXJmb3JtcyAoQSAmJiBDKSwgYW5kIGEgY29tcG9zaXRlIGZpbHRlciB0aGF0XG4gKiBwZXJmb3JtcyAoQiAmJiBDKS5cbiAqXG4gKiBAcGFyYW0gZmlsdGVyIHRoZSBjb21wb3NpdGUgZmlsdGVyIHRvIGNhbGN1bGF0ZSBETkYgdHJhbnNmb3JtIGZvci5cbiAqIEByZXR1cm4gdGhlIHRlcm1zIGluIHRoZSBETkYgdHJhbnNmb3JtLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9nZXREbmZUZXJtcyhlKSB7XG4gICAgaWYgKDAgPT09IGUuZ2V0RmlsdGVycygpLmxlbmd0aCkgcmV0dXJuIFtdO1xuICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfY29tcHV0ZURpc3RyaWJ1dGVkTm9ybWFsRm9ybShfX1BSSVZBVEVfY29tcHV0ZUluRXhwYW5zaW9uKGUpKTtcbiAgICByZXR1cm4gX19QUklWQVRFX2hhcmRBc3NlcnQoX19QUklWQVRFX2lzRGlzanVuY3RpdmVOb3JtYWxGb3JtKHQpLCA3MzkxKSwgX19QUklWQVRFX2lzU2luZ2xlRmllbGRGaWx0ZXIodCkgfHwgX19QUklWQVRFX2lzRmxhdENvbmp1bmN0aW9uKHQpID8gWyB0IF0gOiB0LmdldEZpbHRlcnMoKTtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gZmlsdGVyIGlzIGEgc2luZ2xlIGZpZWxkIGZpbHRlci4gZS5nLiAoYSA9PSAxMCkuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9pc1NpbmdsZUZpZWxkRmlsdGVyKGUpIHtcbiAgICByZXR1cm4gZSBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gZmlsdGVyIGlzIHRoZSBjb25qdW5jdGlvbiBvZiBvbmUgb3IgbW9yZSBmaWVsZCBmaWx0ZXJzLiBlLmcuIChhID09IDEwXG4gKiAmJiBiID09IDIwKVxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9pc0ZsYXRDb25qdW5jdGlvbihlKSB7XG4gICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBDb21wb3NpdGVGaWx0ZXIgJiYgX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcklzRmxhdENvbmp1bmN0aW9uKGUpO1xufVxuXG4vKipcbiAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIGdpdmVuIGZpbHRlciBpcyBpbiBkaXNqdW5jdGl2ZSBub3JtYWwgZm9ybSAoRE5GKS5cbiAqXG4gKiA8cD5JbiBib29sZWFuIGxvZ2ljLCBhIGRpc2p1bmN0aXZlIG5vcm1hbCBmb3JtIChETkYpIGlzIGEgY2Fub25pY2FsIG5vcm1hbCBmb3JtIG9mIGEgbG9naWNhbFxuICogZm9ybXVsYSBjb25zaXN0aW5nIG9mIGEgZGlzanVuY3Rpb24gb2YgY29uanVuY3Rpb25zOyBpdCBjYW4gYWxzbyBiZSBkZXNjcmliZWQgYXMgYW4gT1Igb2YgQU5Ecy5cbiAqXG4gKiA8cD5Gb3IgbW9yZSBpbmZvLCB2aXNpdDogaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRGlzanVuY3RpdmVfbm9ybWFsX2Zvcm1cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfaXNEaXNqdW5jdGl2ZU5vcm1hbEZvcm0oZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfaXNTaW5nbGVGaWVsZEZpbHRlcihlKSB8fCBfX1BSSVZBVEVfaXNGbGF0Q29uanVuY3Rpb24oZSkgfHwgXG4gICAgLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIGZpbHRlciBpcyB0aGUgZGlzanVuY3Rpb24gb2Ygb25lIG9yIG1vcmUgXCJmbGF0IGNvbmp1bmN0aW9uc1wiIGFuZFxuICogZmllbGQgZmlsdGVycy4gZS5nLiAoYSA9PSAxMCkgfHwgKGI9PTIwICYmIGM9PTMwKVxuICovXG4gICAgZnVuY3Rpb24gX19QUklWQVRFX2lzRGlzanVuY3Rpb25PZkZpZWxkRmlsdGVyc0FuZEZsYXRDb25qdW5jdGlvbnMoZSkge1xuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIENvbXBvc2l0ZUZpbHRlciAmJiBfX1BSSVZBVEVfY29tcG9zaXRlRmlsdGVySXNEaXNqdW5jdGlvbihlKSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIGUuZ2V0RmlsdGVycygpKSBpZiAoIV9fUFJJVkFURV9pc1NpbmdsZUZpZWxkRmlsdGVyKHQpICYmICFfX1BSSVZBVEVfaXNGbGF0Q29uanVuY3Rpb24odCkpIHJldHVybiAhMTtcbiAgICAgICAgICAgIHJldHVybiAhMDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gITE7XG4gICAgfShlKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2NvbXB1dGVEaXN0cmlidXRlZE5vcm1hbEZvcm0oZSkge1xuICAgIGlmIChfX1BSSVZBVEVfaGFyZEFzc2VydChlIGluc3RhbmNlb2YgRmllbGRGaWx0ZXIgfHwgZSBpbnN0YW5jZW9mIENvbXBvc2l0ZUZpbHRlciwgMzQwMTgpLCBcbiAgICBlIGluc3RhbmNlb2YgRmllbGRGaWx0ZXIpIHJldHVybiBlO1xuICAgIGlmICgxID09PSBlLmZpbHRlcnMubGVuZ3RoKSByZXR1cm4gX19QUklWQVRFX2NvbXB1dGVEaXN0cmlidXRlZE5vcm1hbEZvcm0oZS5maWx0ZXJzWzBdKTtcbiAgICAvLyBDb21wdXRlIERORiBmb3IgZWFjaCBvZiB0aGUgc3ViZmlsdGVycyBmaXJzdFxuICAgICAgICBjb25zdCB0ID0gZS5maWx0ZXJzLm1hcCgoZSA9PiBfX1BSSVZBVEVfY29tcHV0ZURpc3RyaWJ1dGVkTm9ybWFsRm9ybShlKSkpO1xuICAgIGxldCBuID0gQ29tcG9zaXRlRmlsdGVyLmNyZWF0ZSh0LCBlLm9wKTtcbiAgICByZXR1cm4gbiA9IF9fUFJJVkFURV9hcHBseUFzc29jaWF0aW9uKG4pLCBfX1BSSVZBVEVfaXNEaXNqdW5jdGl2ZU5vcm1hbEZvcm0obikgPyBuIDogKF9fUFJJVkFURV9oYXJkQXNzZXJ0KG4gaW5zdGFuY2VvZiBDb21wb3NpdGVGaWx0ZXIsIDY0NDk4KSwgXG4gICAgX19QUklWQVRFX2hhcmRBc3NlcnQoX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcklzQ29uanVuY3Rpb24obiksIDQwMjUxKSwgX19QUklWQVRFX2hhcmRBc3NlcnQobi5maWx0ZXJzLmxlbmd0aCA+IDEsIDU3OTI3KSwgXG4gICAgbi5maWx0ZXJzLnJlZHVjZSgoKGUsIHQpID0+IF9fUFJJVkFURV9hcHBseURpc3RyaWJ1dGlvbihlLCB0KSkpKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2FwcGx5RGlzdHJpYnV0aW9uKGUsIHQpIHtcbiAgICBsZXQgbjtcbiAgICByZXR1cm4gX19QUklWQVRFX2hhcmRBc3NlcnQoZSBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyIHx8IGUgaW5zdGFuY2VvZiBDb21wb3NpdGVGaWx0ZXIsIDM4Mzg4KSwgXG4gICAgX19QUklWQVRFX2hhcmRBc3NlcnQodCBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyIHx8IHQgaW5zdGFuY2VvZiBDb21wb3NpdGVGaWx0ZXIsIDI1NDczKSwgXG4gICAgLy8gRmllbGRGaWx0ZXIgRmllbGRGaWx0ZXJcbiAgICBuID0gZSBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyID8gdCBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyID8gZnVuY3Rpb24gX19QUklWQVRFX2FwcGx5RGlzdHJpYnV0aW9uRmllbGRGaWx0ZXJzKGUsIHQpIHtcbiAgICAgICAgLy8gQ29uanVuY3Rpb24gZGlzdHJpYnV0aW9uIGZvciB0d28gZmllbGQgZmlsdGVycyBpcyB0aGUgY29uanVuY3Rpb24gb2YgdGhlbS5cbiAgICAgICAgcmV0dXJuIENvbXBvc2l0ZUZpbHRlci5jcmVhdGUoWyBlLCB0IF0sIFwiYW5kXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuQU5EICovKTtcbiAgICB9KGUsIHQpIDogX19QUklWQVRFX2FwcGx5RGlzdHJpYnV0aW9uRmllbGRBbmRDb21wb3NpdGVGaWx0ZXJzKGUsIHQpIDogdCBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyID8gX19QUklWQVRFX2FwcGx5RGlzdHJpYnV0aW9uRmllbGRBbmRDb21wb3NpdGVGaWx0ZXJzKHQsIGUpIDogZnVuY3Rpb24gX19QUklWQVRFX2FwcGx5RGlzdHJpYnV0aW9uQ29tcG9zaXRlRmlsdGVycyhlLCB0KSB7XG4gICAgICAgIC8vIFRoZXJlIGFyZSBmb3VyIGNhc2VzOlxuICAgICAgICAvLyAoQSAmIEIpICYgKEMgJiBEKSAtLT4gKEEgJiBCICYgQyAmIEQpXG4gICAgICAgIC8vIChBICYgQikgJiAoQyB8IEQpIC0tPiAoQSAmIEIgJiBDKSB8IChBICYgQiAmIEQpXG4gICAgICAgIC8vIChBIHwgQikgJiAoQyAmIEQpIC0tPiAoQyAmIEQgJiBBKSB8IChDICYgRCAmIEIpXG4gICAgICAgIC8vIChBIHwgQikgJiAoQyB8IEQpIC0tPiAoQSAmIEMpIHwgKEEgJiBEKSB8IChCICYgQykgfCAoQiAmIEQpXG4gICAgICAgIC8vIENhc2UgMSBpcyBhIG1lcmdlLlxuICAgICAgICBpZiAoX19QUklWQVRFX2hhcmRBc3NlcnQoZS5maWx0ZXJzLmxlbmd0aCA+IDAgJiYgdC5maWx0ZXJzLmxlbmd0aCA+IDAsIDQ4MDA1KSwgX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcklzQ29uanVuY3Rpb24oZSkgJiYgX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcklzQ29uanVuY3Rpb24odCkpIHJldHVybiBfX1BSSVZBVEVfY29tcG9zaXRlRmlsdGVyV2l0aEFkZGVkRmlsdGVycyhlLCB0LmdldEZpbHRlcnMoKSk7XG4gICAgICAgIC8vIENhc2UgMiwzLDQgYWxsIGhhdmUgYXQgbGVhc3Qgb25lIHNpZGUgKGxocyBvciByaHMpIHRoYXQgaXMgYSBkaXNqdW5jdGlvbi4gSW4gYWxsIHRocmVlIGNhc2VzXG4gICAgICAgIC8vIHdlIHNob3VsZCB0YWtlIGVhY2ggZWxlbWVudCBvZiB0aGUgZGlzanVuY3Rpb24gYW5kIGRpc3RyaWJ1dGUgaXQgb3ZlciB0aGUgb3RoZXIgc2lkZSwgYW5kXG4gICAgICAgIC8vIHJldHVybiB0aGUgZGlzanVuY3Rpb24gb2YgdGhlIGRpc3RyaWJ1dGlvbiByZXN1bHRzLlxuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfY29tcG9zaXRlRmlsdGVySXNEaXNqdW5jdGlvbihlKSA/IGUgOiB0LCByID0gX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcklzRGlzanVuY3Rpb24oZSkgPyB0IDogZSwgaSA9IG4uZmlsdGVycy5tYXAoKGUgPT4gX19QUklWQVRFX2FwcGx5RGlzdHJpYnV0aW9uKGUsIHIpKSk7XG4gICAgICAgIHJldHVybiBDb21wb3NpdGVGaWx0ZXIuY3JlYXRlKGksIFwib3JcIiAvKiBDb21wb3NpdGVPcGVyYXRvci5PUiAqLyk7XG4gICAgfShlLCB0KSwgX19QUklWQVRFX2FwcGx5QXNzb2NpYXRpb24obik7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9hcHBseURpc3RyaWJ1dGlvbkZpZWxkQW5kQ29tcG9zaXRlRmlsdGVycyhlLCB0KSB7XG4gICAgLy8gVGhlcmUgYXJlIHR3byBjYXNlczpcbiAgICAvLyBBICYgKEIgJiBDKSAtLT4gKEEgJiBCICYgQylcbiAgICAvLyBBICYgKEIgfCBDKSAtLT4gKEEgJiBCKSB8IChBICYgQylcbiAgICBpZiAoX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcklzQ29uanVuY3Rpb24odCkpIFxuICAgIC8vIENhc2UgMVxuICAgIHJldHVybiBfX1BSSVZBVEVfY29tcG9zaXRlRmlsdGVyV2l0aEFkZGVkRmlsdGVycyh0LCBlLmdldEZpbHRlcnMoKSk7XG4gICAge1xuICAgICAgICAvLyBDYXNlIDJcbiAgICAgICAgY29uc3QgbiA9IHQuZmlsdGVycy5tYXAoKHQgPT4gX19QUklWQVRFX2FwcGx5RGlzdHJpYnV0aW9uKGUsIHQpKSk7XG4gICAgICAgIHJldHVybiBDb21wb3NpdGVGaWx0ZXIuY3JlYXRlKG4sIFwib3JcIiAvKiBDb21wb3NpdGVPcGVyYXRvci5PUiAqLyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEFwcGxpZXMgdGhlIGFzc29jaWF0aXZpdHkgcHJvcGVydHkgdG8gdGhlIGdpdmVuIGZpbHRlciBhbmQgcmV0dXJucyB0aGUgcmVzdWx0aW5nIGZpbHRlci5cbiAqXG4gKiA8dWw+XG4gKiAgIDxsaT5BIHwgKEIgfCBDKSA9PSAoQSB8IEIpIHwgQyA9PSAoQSB8IEIgfCBDKVxuICogICA8bGk+QSAmIChCICYgQykgPT0gKEEgJiBCKSAmIEMgPT0gKEEgJiBCICYgQylcbiAqIDwvdWw+XG4gKlxuICogPHA+Rm9yIG1vcmUgaW5mbywgdmlzaXQ6IGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Fzc29jaWF0aXZlX3Byb3BlcnR5I1Byb3Bvc2l0aW9uYWxfbG9naWNcbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfYXBwbHlBc3NvY2lhdGlvbihlKSB7XG4gICAgaWYgKF9fUFJJVkFURV9oYXJkQXNzZXJ0KGUgaW5zdGFuY2VvZiBGaWVsZEZpbHRlciB8fCBlIGluc3RhbmNlb2YgQ29tcG9zaXRlRmlsdGVyLCAxMTg1MCksIFxuICAgIGUgaW5zdGFuY2VvZiBGaWVsZEZpbHRlcikgcmV0dXJuIGU7XG4gICAgY29uc3QgdCA9IGUuZ2V0RmlsdGVycygpO1xuICAgIC8vIElmIHRoZSBjb21wb3NpdGUgZmlsdGVyIG9ubHkgY29udGFpbnMgMSBmaWx0ZXIsIGFwcGx5IGFzc29jaWF0aXZpdHkgdG8gaXQuXG4gICAgICAgIGlmICgxID09PSB0Lmxlbmd0aCkgcmV0dXJuIF9fUFJJVkFURV9hcHBseUFzc29jaWF0aW9uKHRbMF0pO1xuICAgIC8vIEFzc29jaWF0aXZpdHkgYXBwbGllZCB0byBhIGZsYXQgY29tcG9zaXRlIGZpbHRlciByZXN1bHRzIGlzIGl0c2VsZi5cbiAgICAgICAgaWYgKF9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJJc0ZsYXQoZSkpIHJldHVybiBlO1xuICAgIC8vIEZpcnN0IGFwcGx5IGFzc29jaWF0aXZpdHkgdG8gYWxsIHN1YmZpbHRlcnMuIFRoaXMgd2lsbCBpbiB0dXJuIHJlY3Vyc2l2ZWx5IGFwcGx5XG4gICAgLy8gYXNzb2NpYXRpdml0eSB0byBhbGwgbmVzdGVkIGNvbXBvc2l0ZSBmaWx0ZXJzIGFuZCBmaWVsZCBmaWx0ZXJzLlxuICAgICAgICBjb25zdCBuID0gdC5tYXAoKGUgPT4gX19QUklWQVRFX2FwcGx5QXNzb2NpYXRpb24oZSkpKSwgciA9IFtdO1xuICAgIC8vIEZvciBjb21wb3NpdGUgc3ViZmlsdGVycyB0aGF0IHBlcmZvcm0gdGhlIHNhbWUga2luZCBvZiBsb2dpY2FsIG9wZXJhdGlvbiBhcyBgY29tcG9zaXRlRmlsdGVyYFxuICAgIC8vIHRha2Ugb3V0IHRoZWlyIGZpbHRlcnMgYW5kIGFkZCB0aGVtIHRvIGBjb21wb3NpdGVGaWx0ZXJgLiBGb3IgZXhhbXBsZTpcbiAgICAvLyBjb21wb3NpdGVGaWx0ZXIgPSAoQSB8IChCIHwgQyB8IEQpKVxuICAgIC8vIGNvbXBvc2l0ZVN1YmZpbHRlciA9IChCIHwgQyB8IEQpXG4gICAgLy8gUmVzdWx0OiAoQSB8IEIgfCBDIHwgRClcbiAgICAvLyBOb3RlIHRoYXQgdGhlIGBjb21wb3NpdGVTdWJmaWx0ZXJgIGhhcyBiZWVuIGVsaW1pbmF0ZWQsIGFuZCBpdHMgZmlsdGVycyAoQiwgQywgRCkgaGF2ZSBiZWVuXG4gICAgLy8gYWRkZWQgdG8gdGhlIHRvcC1sZXZlbCBcImNvbXBvc2l0ZUZpbHRlclwiLlxuICAgICAgICByZXR1cm4gbi5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgdCBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyID8gci5wdXNoKHQpIDogdCBpbnN0YW5jZW9mIENvbXBvc2l0ZUZpbHRlciAmJiAodC5vcCA9PT0gZS5vcCA/IFxuICAgICAgICAvLyBjb21wb3NpdGVGaWx0ZXI6IChBIHwgKEIgfCBDKSlcbiAgICAgICAgLy8gY29tcG9zaXRlU3ViZmlsdGVyOiAoQiB8IEMpXG4gICAgICAgIC8vIFJlc3VsdDogKEEgfCBCIHwgQylcbiAgICAgICAgci5wdXNoKC4uLnQuZmlsdGVycykgOiBcbiAgICAgICAgLy8gY29tcG9zaXRlRmlsdGVyOiAoQSB8IChCICYgQykpXG4gICAgICAgIC8vIGNvbXBvc2l0ZVN1YmZpbHRlcjogKEIgJiBDKVxuICAgICAgICAvLyBSZXN1bHQ6IChBIHwgKEIgJiBDKSlcbiAgICAgICAgci5wdXNoKHQpKTtcbiAgICB9KSksIDEgPT09IHIubGVuZ3RoID8gclswXSA6IENvbXBvc2l0ZUZpbHRlci5jcmVhdGUociwgZS5vcCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGluLW1lbW9yeSBpbXBsZW1lbnRhdGlvbiBvZiBJbmRleE1hbmFnZXIuXG4gKi8gY2xhc3MgX19QUklWQVRFX01lbW9yeUluZGV4TWFuYWdlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuQ24gPSBuZXcgX19QUklWQVRFX01lbW9yeUNvbGxlY3Rpb25QYXJlbnRJbmRleDtcbiAgICB9XG4gICAgYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5Dbi5hZGQodCksIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldENvbGxlY3Rpb25QYXJlbnRzKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMuQ24uZ2V0RW50cmllcyh0KSk7XG4gICAgfVxuICAgIGFkZEZpZWxkSW5kZXgoZSwgdCkge1xuICAgICAgICAvLyBGaWVsZCBpbmRpY2VzIGFyZSBub3Qgc3VwcG9ydGVkIHdpdGggbWVtb3J5IHBlcnNpc3RlbmNlLlxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZGVsZXRlRmllbGRJbmRleChlLCB0KSB7XG4gICAgICAgIC8vIEZpZWxkIGluZGljZXMgYXJlIG5vdCBzdXBwb3J0ZWQgd2l0aCBtZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBkZWxldGVBbGxGaWVsZEluZGV4ZXMoZSkge1xuICAgICAgICAvLyBGaWVsZCBpbmRpY2VzIGFyZSBub3Qgc3VwcG9ydGVkIHdpdGggbWVtb3J5IHBlcnNpc3RlbmNlLlxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgY3JlYXRlVGFyZ2V0SW5kZXhlcyhlLCB0KSB7XG4gICAgICAgIC8vIEZpZWxkIGluZGljZXMgYXJlIG5vdCBzdXBwb3J0ZWQgd2l0aCBtZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXREb2N1bWVudHNNYXRjaGluZ1RhcmdldChlLCB0KSB7XG4gICAgICAgIC8vIEZpZWxkIGluZGljZXMgYXJlIG5vdCBzdXBwb3J0ZWQgd2l0aCBtZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShudWxsKTtcbiAgICB9XG4gICAgZ2V0SW5kZXhUeXBlKGUsIHQpIHtcbiAgICAgICAgLy8gRmllbGQgaW5kaWNlcyBhcmUgbm90IHN1cHBvcnRlZCB3aXRoIG1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKDAgLyogSW5kZXhUeXBlLk5PTkUgKi8pO1xuICAgIH1cbiAgICBnZXRGaWVsZEluZGV4ZXMoZSwgdCkge1xuICAgICAgICAvLyBGaWVsZCBpbmRpY2VzIGFyZSBub3Qgc3VwcG9ydGVkIHdpdGggbWVtb3J5IHBlcnNpc3RlbmNlLlxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoW10pO1xuICAgIH1cbiAgICBnZXROZXh0Q29sbGVjdGlvbkdyb3VwVG9VcGRhdGUoZSkge1xuICAgICAgICAvLyBGaWVsZCBpbmRpY2VzIGFyZSBub3Qgc3VwcG9ydGVkIHdpdGggbWVtb3J5IHBlcnNpc3RlbmNlLlxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUobnVsbCk7XG4gICAgfVxuICAgIGdldE1pbk9mZnNldChlLCB0KSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShJbmRleE9mZnNldC5taW4oKSk7XG4gICAgfVxuICAgIGdldE1pbk9mZnNldEZyb21Db2xsZWN0aW9uR3JvdXAoZSwgdCkge1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoSW5kZXhPZmZzZXQubWluKCkpO1xuICAgIH1cbiAgICB1cGRhdGVDb2xsZWN0aW9uR3JvdXAoZSwgdCwgbikge1xuICAgICAgICAvLyBGaWVsZCBpbmRpY2VzIGFyZSBub3Qgc3VwcG9ydGVkIHdpdGggbWVtb3J5IHBlcnNpc3RlbmNlLlxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgdXBkYXRlSW5kZXhFbnRyaWVzKGUsIHQpIHtcbiAgICAgICAgLy8gRmllbGQgaW5kaWNlcyBhcmUgbm90IHN1cHBvcnRlZCB3aXRoIG1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEludGVybmFsIGltcGxlbWVudGF0aW9uIG9mIHRoZSBjb2xsZWN0aW9uLXBhcmVudCBpbmRleCBleHBvc2VkIGJ5IE1lbW9yeUluZGV4TWFuYWdlci5cbiAqIEFsc28gdXNlZCBmb3IgaW4tbWVtb3J5IGNhY2hpbmcgYnkgSW5kZXhlZERiSW5kZXhNYW5hZ2VyIGFuZCBpbml0aWFsIGluZGV4IHBvcHVsYXRpb25cbiAqIGluIGluZGV4ZWRkYl9zY2hlbWEudHNcbiAqLyBjbGFzcyBfX1BSSVZBVEVfTWVtb3J5Q29sbGVjdGlvblBhcmVudEluZGV4IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5pbmRleCA9IHt9O1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGZhbHNlIGlmIHRoZSBlbnRyeSBhbHJlYWR5IGV4aXN0ZWQuXG4gICAgYWRkKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGUubGFzdFNlZ21lbnQoKSwgbiA9IGUucG9wTGFzdCgpLCByID0gdGhpcy5pbmRleFt0XSB8fCBuZXcgU29ydGVkU2V0KFJlc291cmNlUGF0aC5jb21wYXJhdG9yKSwgaSA9ICFyLmhhcyhuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXhbdF0gPSByLmFkZChuKSwgaTtcbiAgICB9XG4gICAgaGFzKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGUubGFzdFNlZ21lbnQoKSwgbiA9IGUucG9wTGFzdCgpLCByID0gdGhpcy5pbmRleFt0XTtcbiAgICAgICAgcmV0dXJuIHIgJiYgci5oYXMobik7XG4gICAgfVxuICAgIGdldEVudHJpZXMoZSkge1xuICAgICAgICByZXR1cm4gKHRoaXMuaW5kZXhbZV0gfHwgbmV3IFNvcnRlZFNldChSZXNvdXJjZVBhdGguY29tcGFyYXRvcikpLnRvQXJyYXkoKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IEZ0ID0gXCJJbmRleGVkRGJJbmRleE1hbmFnZXJcIiwgTXQgPSBuZXcgVWludDhBcnJheSgwKTtcblxuLyoqXG4gKiBBIHBlcnNpc3RlZCBpbXBsZW1lbnRhdGlvbiBvZiBJbmRleE1hbmFnZXIuXG4gKlxuICogUE9SVElORyBOT1RFOiBVbmxpa2UgaU9TIGFuZCBBbmRyb2lkLCB0aGUgV2ViIFNESyBkb2VzIG5vdCBtZW1vaXplIGluZGV4XG4gKiBkYXRhIGFzIGl0IHN1cHBvcnRzIG11bHRpLXRhYiBhY2Nlc3MuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9JbmRleGVkRGJJbmRleE1hbmFnZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5kYXRhYmFzZUlkID0gdCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBbiBpbi1tZW1vcnkgY29weSBvZiB0aGUgaW5kZXggZW50cmllcyB3ZSd2ZSBhbHJlYWR5IHdyaXR0ZW4gc2luY2UgdGhlIFNES1xuICAgICAgICAgKiBsYXVuY2hlZC4gVXNlZCB0byBhdm9pZCByZS13cml0aW5nIHRoZSBzYW1lIGVudHJ5IHJlcGVhdGVkbHkuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoaXMgaXMgKk5PVCogYSBjb21wbGV0ZSBjYWNoZSBvZiB3aGF0J3MgaW4gcGVyc2lzdGVuY2UgYW5kIHNvIGNhbiBuZXZlciBiZVxuICAgICAgICAgKiB1c2VkIHRvIHNhdGlzZnkgcmVhZHMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnZuID0gbmV3IF9fUFJJVkFURV9NZW1vcnlDb2xsZWN0aW9uUGFyZW50SW5kZXgsIFxuICAgICAgICAvKipcbiAgICAgICAgICogTWFwcyBmcm9tIGEgdGFyZ2V0IHRvIGl0cyBlcXVpdmFsZW50IGxpc3Qgb2Ygc3ViLXRhcmdldHMuIEVhY2ggc3ViLXRhcmdldFxuICAgICAgICAgKiBjb250YWlucyBvbmx5IG9uZSB0ZXJtIGZyb20gdGhlIHRhcmdldCdzIGRpc2p1bmN0aXZlIG5vcm1hbCBmb3JtIChETkYpLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5GbiA9IG5ldyBPYmplY3RNYXAoKGUgPT4gX19QUklWQVRFX2Nhbm9uaWZ5VGFyZ2V0KGUpKSwgKChlLCB0KSA9PiBfX1BSSVZBVEVfdGFyZ2V0RXF1YWxzKGUsIHQpKSksIFxuICAgICAgICB0aGlzLnVpZCA9IGUudWlkIHx8IFwiXCI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBuZXcgZW50cnkgdG8gdGhlIGNvbGxlY3Rpb24gcGFyZW50IGluZGV4LlxuICAgICAqXG4gICAgICogUmVwZWF0ZWQgY2FsbHMgZm9yIHRoZSBzYW1lIGNvbGxlY3Rpb25QYXRoIHNob3VsZCBiZSBhdm9pZGVkIHdpdGhpbiBhXG4gICAgICogdHJhbnNhY3Rpb24gYXMgSW5kZXhlZERiSW5kZXhNYW5hZ2VyIG9ubHkgY2FjaGVzIHdyaXRlcyBvbmNlIGEgdHJhbnNhY3Rpb25cbiAgICAgKiBoYXMgYmVlbiBjb21taXR0ZWQuXG4gICAgICovICAgIGFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4KGUsIHQpIHtcbiAgICAgICAgaWYgKCF0aGlzLnZuLmhhcyh0KSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQubGFzdFNlZ21lbnQoKSwgciA9IHQucG9wTGFzdCgpO1xuICAgICAgICAgICAgZS5hZGRPbkNvbW1pdHRlZExpc3RlbmVyKCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBjb2xsZWN0aW9uIHRvIHRoZSBpbiBtZW1vcnkgY2FjaGUgb25seSBpZiB0aGUgdHJhbnNhY3Rpb24gd2FzXG4gICAgICAgICAgICAgICAgLy8gc3VjY2Vzc2Z1bGx5IGNvbW1pdHRlZC5cbiAgICAgICAgICAgICAgICB0aGlzLnZuLmFkZCh0KTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGNvbnN0IGkgPSB7XG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbklkOiBuLFxuICAgICAgICAgICAgICAgIHBhcmVudDogX19QUklWQVRFX2VuY29kZVJlc291cmNlUGF0aChyKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBfX1BSSVZBVEVfY29sbGVjdGlvblBhcmVudHNTdG9yZShlKS5wdXQoaSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldENvbGxlY3Rpb25QYXJlbnRzKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IFtdLCByID0gSURCS2V5UmFuZ2UuYm91bmQoWyB0LCBcIlwiIF0sIFsgX19QUklWQVRFX2ltbWVkaWF0ZVN1Y2Nlc3Nvcih0KSwgXCJcIiBdLCBcbiAgICAgICAgLypsb3dlck9wZW49Ki8gITEsIFxuICAgICAgICAvKnVwcGVyT3Blbj0qLyAhMCk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfY29sbGVjdGlvblBhcmVudHNTdG9yZShlKS5KKHIpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCByIG9mIGUpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGNvbGxlY3Rpb25JZCBndWFyZCBzaG91bGRuJ3QgYmUgbmVjZXNzYXJ5IChhbmQgaXNuJ3QgYXMgbG9uZ1xuICAgICAgICAgICAgICAgIC8vIGFzIHdlJ3JlIHJ1bm5pbmcgaW4gYSByZWFsIGJyb3dzZXIpLCBidXQgdGhlcmUncyBhIGJ1ZyBpblxuICAgICAgICAgICAgICAgIC8vIGluZGV4ZWRkYnNoaW0gdGhhdCBicmVha3Mgb3VyIHJhbmdlIGluIG91ciB0ZXN0cyBydW5uaW5nIGluIG5vZGU6XG4gICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2F4ZW1jbGlvbi9JbmRleGVkREJTaGltL2lzc3Vlcy8zMzRcbiAgICAgICAgICAgICAgICBpZiAoci5jb2xsZWN0aW9uSWQgIT09IHQpIGJyZWFrO1xuICAgICAgICAgICAgICAgIG4ucHVzaChfX1BSSVZBVEVfZGVjb2RlUmVzb3VyY2VQYXRoKHIucGFyZW50KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbjtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBhZGRGaWVsZEluZGV4KGUsIHQpIHtcbiAgICAgICAgLy8gVE9ETyhpbmRleGluZyk6IFZlcmlmeSB0aGF0IHRoZSBhdXRvLWluY3JlbWVudGluZyBpbmRleCBJRCB3b3JrcyBpblxuICAgICAgICAvLyBTYWZhcmkgJiBGaXJlZm94LlxuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2luZGV4Q29uZmlndXJhdGlvblN0b3JlKGUpLCByID0gZnVuY3Rpb24gX19QUklWQVRFX3RvRGJJbmRleENvbmZpZ3VyYXRpb24oZSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpbmRleElkOiBlLmluZGV4SWQsXG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbkdyb3VwOiBlLmNvbGxlY3Rpb25Hcm91cCxcbiAgICAgICAgICAgICAgICBmaWVsZHM6IGUuZmllbGRzLm1hcCgoZSA9PiBbIGUuZmllbGRQYXRoLmNhbm9uaWNhbFN0cmluZygpLCBlLmtpbmQgXSkpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KHQpO1xuICAgICAgICBkZWxldGUgci5pbmRleElkO1xuICAgICAgICAvLyBgaW5kZXhJZGAgaXMgYXV0by1wb3B1bGF0ZWQgYnkgSW5kZXhlZERiXG4gICAgICAgIGNvbnN0IGkgPSBuLmFkZChyKTtcbiAgICAgICAgaWYgKHQuaW5kZXhTdGF0ZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9pbmRleFN0YXRlU3RvcmUoZSk7XG4gICAgICAgICAgICByZXR1cm4gaS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgICAgICBuLnB1dChfX1BSSVZBVEVfdG9EYkluZGV4U3RhdGUoZSwgdGhpcy51aWQsIHQuaW5kZXhTdGF0ZS5zZXF1ZW5jZU51bWJlciwgdC5pbmRleFN0YXRlLm9mZnNldCkpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpLm5leHQoKTtcbiAgICB9XG4gICAgZGVsZXRlRmllbGRJbmRleChlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfaW5kZXhDb25maWd1cmF0aW9uU3RvcmUoZSksIHIgPSBfX1BSSVZBVEVfaW5kZXhTdGF0ZVN0b3JlKGUpLCBpID0gX19QUklWQVRFX2luZGV4RW50cmllc1N0b3JlKGUpO1xuICAgICAgICByZXR1cm4gbi5kZWxldGUodC5pbmRleElkKS5uZXh0KCgoKSA9PiByLmRlbGV0ZShJREJLZXlSYW5nZS5ib3VuZChbIHQuaW5kZXhJZCBdLCBbIHQuaW5kZXhJZCArIDEgXSwgXG4gICAgICAgIC8qbG93ZXJPcGVuPSovICExLCBcbiAgICAgICAgLyp1cHBlck9wZW49Ki8gITApKSkpLm5leHQoKCgpID0+IGkuZGVsZXRlKElEQktleVJhbmdlLmJvdW5kKFsgdC5pbmRleElkIF0sIFsgdC5pbmRleElkICsgMSBdLCBcbiAgICAgICAgLypsb3dlck9wZW49Ki8gITEsIFxuICAgICAgICAvKnVwcGVyT3Blbj0qLyAhMCkpKSk7XG4gICAgfVxuICAgIGRlbGV0ZUFsbEZpZWxkSW5kZXhlcyhlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfaW5kZXhDb25maWd1cmF0aW9uU3RvcmUoZSksIG4gPSBfX1BSSVZBVEVfaW5kZXhFbnRyaWVzU3RvcmUoZSksIHIgPSBfX1BSSVZBVEVfaW5kZXhTdGF0ZVN0b3JlKGUpO1xuICAgICAgICByZXR1cm4gdC5aKCkubmV4dCgoKCkgPT4gbi5aKCkpKS5uZXh0KCgoKSA9PiByLlooKSkpO1xuICAgIH1cbiAgICBjcmVhdGVUYXJnZXRJbmRleGVzKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHRoaXMuTW4odCksICh0ID0+IHRoaXMuZ2V0SW5kZXhUeXBlKGUsIHQpLm5leHQoKG4gPT4ge1xuICAgICAgICAgICAgaWYgKDAgLyogSW5kZXhUeXBlLk5PTkUgKi8gPT09IG4gfHwgMSAvKiBJbmRleFR5cGUuUEFSVElBTCAqLyA9PT0gbikge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBuZXcgX19QUklWQVRFX1RhcmdldEluZGV4TWF0Y2hlcih0KS5EbigpO1xuICAgICAgICAgICAgICAgIGlmIChudWxsICE9IG4pIHJldHVybiB0aGlzLmFkZEZpZWxkSW5kZXgoZSwgbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSkpO1xuICAgIH1cbiAgICBnZXREb2N1bWVudHNNYXRjaGluZ1RhcmdldChlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfaW5kZXhFbnRyaWVzU3RvcmUoZSk7XG4gICAgICAgIGxldCByID0gITA7XG4gICAgICAgIGNvbnN0IGkgPSBuZXcgTWFwO1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2godGhpcy5Nbih0KSwgKHQgPT4gdGhpcy54bihlLCB0KS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIHIgJiYgKHIgPSAhIWUpLCBpLnNldCh0LCBlKTtcbiAgICAgICAgfSkpKSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHIpIHtcbiAgICAgICAgICAgICAgICBsZXQgZSA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBbXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2goaSwgKChpLCBzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhGdCwgYFVzaW5nIGluZGV4ICR7ZnVuY3Rpb24gX19QUklWQVRFX2ZpZWxkSW5kZXhUb1N0cmluZyhlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYGlkPSR7ZS5pbmRleElkfXxjZz0ke2UuY29sbGVjdGlvbkdyb3VwfXxmPSR7ZS5maWVsZHMubWFwKChlID0+IGAke2UuZmllbGRQYXRofToke2Uua2luZH1gKSkuam9pbihcIixcIil9YDtcbiAgICAgICAgICAgICAgICAgICAgfShpKX0gdG8gZXhlY3V0ZSAke19fUFJJVkFURV9jYW5vbmlmeVRhcmdldCh0KX1gKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbyA9IGZ1bmN0aW9uIF9fUFJJVkFURV90YXJnZXRHZXRBcnJheVZhbHVlcyhlLCB0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2ZpZWxkSW5kZXhHZXRBcnJheVNlZ21lbnQodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwID09PSBuKSByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBfX1BSSVZBVEVfdGFyZ2V0R2V0RmllbGRGaWx0ZXJzRm9yUGF0aChlLCBuLmZpZWxkUGF0aCkpIHN3aXRjaCAodC5vcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC52YWx1ZS5hcnJheVZhbHVlLnZhbHVlcyB8fCBbXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYXJyYXktY29udGFpbnNcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOUyAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsgdC52YWx1ZSBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlbWFpbmluZyBmaWx0ZXJzIGFyZSBub3QgYXJyYXkgZmlsdGVycy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICogUmV0dXJucyB0aGUgbGlzdCBvZiB2YWx1ZXMgdGhhdCBhcmUgdXNlZCBpbiAhPSBvciBOT1RfSU4gZmlsdGVycy4gUmV0dXJuc1xuICogYG51bGxgIGlmIHRoZXJlIGFyZSBubyBzdWNoIGZpbHRlcnMuXG4gKi8gKHMsIGkpLCBfID0gZnVuY3Rpb24gX19QUklWQVRFX3RhcmdldEdldE5vdEluVmFsdWVzKGUsIHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBuZXcgTWFwO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCByIG9mIF9fUFJJVkFURV9maWVsZEluZGV4R2V0RGlyZWN0aW9uYWxTZWdtZW50cyh0KSkgZm9yIChjb25zdCB0IG9mIF9fUFJJVkFURV90YXJnZXRHZXRGaWVsZEZpbHRlcnNGb3JQYXRoKGUsIHIuZmllbGRQYXRoKSkgc3dpdGNoICh0Lm9wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCI9PVwiIC8qIE9wZXJhdG9yLkVRVUFMICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVuY29kZSBlcXVhbGl0eSBwcmVmaXgsIHdoaWNoIGlzIGVuY29kZWQgaW4gdGhlIGluZGV4IHZhbHVlIGJlZm9yZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBpbmVxdWFsaXR5IChlLmcuIGBhID09ICdhJyAmJiBiICE9ICdiJ2AgaXMgZW5jb2RlZCB0b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGB2YWx1ZSAhPSAnYWInYCkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5zZXQoci5maWVsZFBhdGguY2Fub25pY2FsU3RyaW5nKCksIHQudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdEluL05vdEVxdWFsIGlzIGFsd2F5cyBhIHN1ZmZpeC4gVGhlcmUgY2Fubm90IGJlIGFueSByZW1haW5pbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZWdtZW50cyBhbmQgaGVuY2Ugd2UgY2FuIHJldHVybiBlYXJseSBoZXJlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLnNldChyLmZpZWxkUGF0aC5jYW5vbmljYWxTdHJpbmcoKSwgdC52YWx1ZSksIEFycmF5LmZyb20obi52YWx1ZXMoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVtYWluaW5nIGZpbHRlcnMgY2Fubm90IGJlIHVzZWQgYXMgbm90SW4gYm91bmRzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gKiBSZXR1cm5zIGEgbG93ZXIgYm91bmQgb2YgZmllbGQgdmFsdWVzIHRoYXQgY2FuIGJlIHVzZWQgYXMgYSBzdGFydGluZyBwb2ludCB0b1xuICogc2NhbiB0aGUgaW5kZXggZGVmaW5lZCBieSBgZmllbGRJbmRleGAuIFJldHVybnMgYE1JTl9WQUxVRWAgaWYgbm8gbG93ZXIgYm91bmRcbiAqIGV4aXN0cy5cbiAqLyAocywgaSksIGEgPSBmdW5jdGlvbiBfX1BSSVZBVEVfdGFyZ2V0R2V0TG93ZXJCb3VuZChlLCB0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgciA9ICEwO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm9yIGVhY2ggc2VnbWVudCwgcmV0cmlldmUgYSBsb3dlciBib3VuZCBpZiB0aGVyZSBpcyBhIHN1aXRhYmxlIGZpbHRlciBvclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3RhcnRBdC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaSBvZiBfX1BSSVZBVEVfZmllbGRJbmRleEdldERpcmVjdGlvbmFsU2VnbWVudHModCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gMCAvKiBJbmRleEtpbmQuQVNDRU5ESU5HICovID09PSBpLmtpbmQgPyBfX1BSSVZBVEVfdGFyZ2V0R2V0QXNjZW5kaW5nQm91bmQoZSwgaS5maWVsZFBhdGgsIGUuc3RhcnRBdCkgOiBfX1BSSVZBVEVfdGFyZ2V0R2V0RGVzY2VuZGluZ0JvdW5kKGUsIGkuZmllbGRQYXRoLCBlLnN0YXJ0QXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4ucHVzaCh0LnZhbHVlKSwgciAmJiAociA9IHQuaW5jbHVzaXZlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQm91bmQobiwgcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gKiBSZXR1cm5zIGFuIHVwcGVyIGJvdW5kIG9mIGZpZWxkIHZhbHVlcyB0aGF0IGNhbiBiZSB1c2VkIGFzIGFuIGVuZGluZyBwb2ludFxuICogd2hlbiBzY2FubmluZyB0aGUgaW5kZXggZGVmaW5lZCBieSBgZmllbGRJbmRleGAuIFJldHVybnMgYE1BWF9WQUxVRWAgaWYgbm9cbiAqIHVwcGVyIGJvdW5kIGV4aXN0cy5cbiAqLyAocywgaSksIHUgPSBmdW5jdGlvbiBfX1BSSVZBVEVfdGFyZ2V0R2V0VXBwZXJCb3VuZChlLCB0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgciA9ICEwO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm9yIGVhY2ggc2VnbWVudCwgcmV0cmlldmUgYW4gdXBwZXIgYm91bmQgaWYgdGhlcmUgaXMgYSBzdWl0YWJsZSBmaWx0ZXIgb3JcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVuZEF0LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBpIG9mIF9fUFJJVkFURV9maWVsZEluZGV4R2V0RGlyZWN0aW9uYWxTZWdtZW50cyh0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSAwIC8qIEluZGV4S2luZC5BU0NFTkRJTkcgKi8gPT09IGkua2luZCA/IF9fUFJJVkFURV90YXJnZXRHZXREZXNjZW5kaW5nQm91bmQoZSwgaS5maWVsZFBhdGgsIGUuZW5kQXQpIDogX19QUklWQVRFX3RhcmdldEdldEFzY2VuZGluZ0JvdW5kKGUsIGkuZmllbGRQYXRoLCBlLmVuZEF0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLnB1c2godC52YWx1ZSksIHIgJiYgKHIgPSB0LmluY2x1c2l2ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEJvdW5kKG4sIHIpO1xuICAgICAgICAgICAgICAgICAgICB9KHMsIGkpLCBjID0gdGhpcy5PbihpLCBzLCBhKSwgbCA9IHRoaXMuT24oaSwgcywgdSksIGggPSB0aGlzLk5uKGksIHMsIF8pLCBQID0gdGhpcy5CbihpLmluZGV4SWQsIG8sIGMsIGEuaW5jbHVzaXZlLCBsLCB1LmluY2x1c2l2ZSwgaCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaChQLCAoaSA9PiBuLlkoaSwgdC5saW1pdCkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0LmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBEb2N1bWVudEtleS5mcm9tU2VnbWVudHModC5kb2N1bWVudEtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5oYXMobikgfHwgKGUgPSBlLmFkZChuKSwgci5wdXNoKG4pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpKSk7XG4gICAgICAgICAgICAgICAgfSkpLm5leHQoKCgpID0+IHIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShudWxsKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBNbihlKSB7XG4gICAgICAgIGxldCB0ID0gdGhpcy5Gbi5nZXQoZSk7XG4gICAgICAgIGlmICh0KSByZXR1cm4gdDtcbiAgICAgICAgaWYgKDAgPT09IGUuZmlsdGVycy5sZW5ndGgpIHQgPSBbIGUgXTsgZWxzZSB7XG4gICAgICAgICAgICB0ID0gX19QUklWQVRFX2dldERuZlRlcm1zKENvbXBvc2l0ZUZpbHRlci5jcmVhdGUoZS5maWx0ZXJzLCBcImFuZFwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLkFORCAqLykpLm1hcCgodCA9PiBfX1BSSVZBVEVfbmV3VGFyZ2V0KGUucGF0aCwgZS5jb2xsZWN0aW9uR3JvdXAsIGUub3JkZXJCeSwgdC5nZXRGaWx0ZXJzKCksIGUubGltaXQsIGUuc3RhcnRBdCwgZS5lbmRBdCkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5Gbi5zZXQoZSwgdCksIHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdHMgYSBrZXkgcmFuZ2UgcXVlcnkgb24gYERiSW5kZXhFbnRyeVN0b3JlYCB0aGF0IHVuaW9ucyBhbGxcbiAgICAgKiBib3VuZHMuXG4gICAgICovICAgIEJuKGUsIHQsIG4sIHIsIGksIHMsIG8pIHtcbiAgICAgICAgLy8gVGhlIG51bWJlciBvZiB0b3RhbCBpbmRleCBzY2FucyB3ZSB1bmlvbiB0b2dldGhlci4gVGhpcyBpcyBzaW1pbGFyIHRvIGFcbiAgICAgICAgLy8gZGlzdHJpYnV0ZWQgbm9ybWFsIGZvcm0sIGJ1dCBhZGFwdGVkIGZvciBhcnJheSB2YWx1ZXMuIFdlIGNyZWF0ZSBhIHNpbmdsZVxuICAgICAgICAvLyBpbmRleCByYW5nZSBwZXIgdmFsdWUgaW4gYW4gQVJSQVlfQ09OVEFJTlMgb3IgQVJSQVlfQ09OVEFJTlNfQU5ZIGZpbHRlclxuICAgICAgICAvLyBjb21iaW5lZCB3aXRoIHRoZSB2YWx1ZXMgZnJvbSB0aGUgcXVlcnkgYm91bmRzLlxuICAgICAgICBjb25zdCBfID0gKG51bGwgIT0gdCA/IHQubGVuZ3RoIDogMSkgKiBNYXRoLm1heChuLmxlbmd0aCwgaS5sZW5ndGgpLCBhID0gXyAvIChudWxsICE9IHQgPyB0Lmxlbmd0aCA6IDEpLCB1ID0gW107XG4gICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgXzsgKytjKSB7XG4gICAgICAgICAgICBjb25zdCBfID0gdCA/IHRoaXMuTG4odFtjIC8gYV0pIDogTXQsIGwgPSB0aGlzLmtuKGUsIF8sIG5bYyAlIGFdLCByKSwgaCA9IHRoaXMucW4oZSwgXywgaVtjICUgYV0sIHMpLCBQID0gby5tYXAoKHQgPT4gdGhpcy5rbihlLCBfLCB0LCBcbiAgICAgICAgICAgIC8qIGluY2x1c2l2ZT0gKi8gITApKSk7XG4gICAgICAgICAgICB1LnB1c2goLi4udGhpcy5jcmVhdGVSYW5nZShsLCBoLCBQKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHU7XG4gICAgfVxuICAgIC8qKiBHZW5lcmF0ZXMgdGhlIGxvd2VyIGJvdW5kIGZvciBgYXJyYXlWYWx1ZWAgYW5kIGBkaXJlY3Rpb25hbFZhbHVlYC4gKi8gICAga24oZSwgdCwgbiwgcikge1xuICAgICAgICBjb25zdCBpID0gbmV3IF9fUFJJVkFURV9JbmRleEVudHJ5KGUsIERvY3VtZW50S2V5LmVtcHR5KCksIHQsIG4pO1xuICAgICAgICByZXR1cm4gciA/IGkgOiBpLkFuKCk7XG4gICAgfVxuICAgIC8qKiBHZW5lcmF0ZXMgdGhlIHVwcGVyIGJvdW5kIGZvciBgYXJyYXlWYWx1ZWAgYW5kIGBkaXJlY3Rpb25hbFZhbHVlYC4gKi8gICAgcW4oZSwgdCwgbiwgcikge1xuICAgICAgICBjb25zdCBpID0gbmV3IF9fUFJJVkFURV9JbmRleEVudHJ5KGUsIERvY3VtZW50S2V5LmVtcHR5KCksIHQsIG4pO1xuICAgICAgICByZXR1cm4gciA/IGkuQW4oKSA6IGk7XG4gICAgfVxuICAgIHhuKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBfX1BSSVZBVEVfVGFyZ2V0SW5kZXhNYXRjaGVyKHQpLCByID0gbnVsbCAhPSB0LmNvbGxlY3Rpb25Hcm91cCA/IHQuY29sbGVjdGlvbkdyb3VwIDogdC5wYXRoLmxhc3RTZWdtZW50KCk7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEZpZWxkSW5kZXhlcyhlLCByKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIC8vIFJldHVybiB0aGUgaW5kZXggd2l0aCB0aGUgbW9zdCBudW1iZXIgb2Ygc2VnbWVudHMuXG4gICAgICAgICAgICBsZXQgdCA9IG51bGw7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHIgb2YgZSkge1xuICAgICAgICAgICAgICAgIG4ueW4ocikgJiYgKCF0IHx8IHIuZmllbGRzLmxlbmd0aCA+IHQuZmllbGRzLmxlbmd0aCkgJiYgKHQgPSByKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldEluZGV4VHlwZShlLCB0KSB7XG4gICAgICAgIGxldCBuID0gMiAvKiBJbmRleFR5cGUuRlVMTCAqLztcbiAgICAgICAgY29uc3QgciA9IHRoaXMuTW4odCk7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaChyLCAodCA9PiB0aGlzLnhuKGUsIHQpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgZSA/IDAgLyogSW5kZXhUeXBlLk5PTkUgKi8gIT09IG4gJiYgZS5maWVsZHMubGVuZ3RoIDwgZnVuY3Rpb24gX19QUklWQVRFX3RhcmdldEdldFNlZ21lbnRDb3VudChlKSB7XG4gICAgICAgICAgICAgICAgbGV0IHQgPSBuZXcgU29ydGVkU2V0KEZpZWxkUGF0aCQxLmNvbXBhcmF0b3IpLCBuID0gITE7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCByIG9mIGUuZmlsdGVycykgZm9yIChjb25zdCBlIG9mIHIuZ2V0RmxhdHRlbmVkRmlsdGVycygpKSBcbiAgICAgICAgICAgICAgICAvLyBfX25hbWVfXyBpcyBub3QgYW4gZXhwbGljaXQgc2VnbWVudCBvZiBhbnkgaW5kZXgsIHNvIHdlIGRvbid0IG5lZWQgdG9cbiAgICAgICAgICAgICAgICAvLyBjb3VudCBpdC5cbiAgICAgICAgICAgICAgICBlLmZpZWxkLmlzS2V5RmllbGQoKSB8fCAoXG4gICAgICAgICAgICAgICAgLy8gQVJSQVlfQ09OVEFJTlMgb3IgQVJSQVlfQ09OVEFJTlNfQU5ZIGZpbHRlcnMgbXVzdCBiZSBjb3VudGVkIHNlcGFyYXRlbHkuXG4gICAgICAgICAgICAgICAgLy8gRm9yIGluc3RhbmNlLCBpdCBpcyBwb3NzaWJsZSB0byBoYXZlIGFuIGluZGV4IGZvciBcImEgQVJSQVkgYSBBU0NcIi4gRXZlblxuICAgICAgICAgICAgICAgIC8vIHRob3VnaCB0aGVzZSBhcmUgb24gdGhlIHNhbWUgZmllbGQsIHRoZXkgc2hvdWxkIGJlIGNvdW50ZWQgYXMgdHdvXG4gICAgICAgICAgICAgICAgLy8gc2VwYXJhdGUgc2VnbWVudHMgaW4gYW4gaW5kZXguXG4gICAgICAgICAgICAgICAgXCJhcnJheS1jb250YWluc1wiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TICovID09PSBlLm9wIHx8IFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZICovID09PSBlLm9wID8gbiA9ICEwIDogdCA9IHQuYWRkKGUuZmllbGQpKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgZS5vcmRlckJ5KSBcbiAgICAgICAgICAgICAgICAvLyBfX25hbWVfXyBpcyBub3QgYW4gZXhwbGljaXQgc2VnbWVudCBvZiBhbnkgaW5kZXgsIHNvIHdlIGRvbid0IG5lZWQgdG9cbiAgICAgICAgICAgICAgICAvLyBjb3VudCBpdC5cbiAgICAgICAgICAgICAgICBuLmZpZWxkLmlzS2V5RmllbGQoKSB8fCAodCA9IHQuYWRkKG4uZmllbGQpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdC5zaXplICsgKG4gPyAxIDogMCk7XG4gICAgICAgICAgICB9KHQpICYmIChuID0gMSAvKiBJbmRleFR5cGUuUEFSVElBTCAqLykgOiBuID0gMCAvKiBJbmRleFR5cGUuTk9ORSAqLztcbiAgICAgICAgfSkpKSkubmV4dCgoKCkgPT4gXG4gICAgICAgIC8vIE9SIHF1ZXJpZXMgaGF2ZSBtb3JlIHRoYW4gb25lIHN1Yi10YXJnZXQgKG9uZSBzdWItdGFyZ2V0IHBlciBETkYgdGVybSkuIFdlIGN1cnJlbnRseSBjb25zaWRlclxuICAgICAgICAvLyBPUiBxdWVyaWVzIHRoYXQgaGF2ZSBhIGBsaW1pdGAgdG8gaGF2ZSBhIHBhcnRpYWwgaW5kZXguIEZvciBzdWNoIHF1ZXJpZXMgd2UgcGVyZm9ybSBzb3J0aW5nXG4gICAgICAgIC8vIGFuZCBhcHBseSB0aGUgbGltaXQgaW4gbWVtb3J5IGFzIGEgcG9zdC1wcm9jZXNzaW5nIHN0ZXAuXG4gICAgICAgIGZ1bmN0aW9uIF9fUFJJVkFURV90YXJnZXRIYXNMaW1pdChlKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbCAhPT0gZS5saW1pdDtcbiAgICAgICAgfSh0KSAmJiByLmxlbmd0aCA+IDEgJiYgMiAvKiBJbmRleFR5cGUuRlVMTCAqLyA9PT0gbiA/IDEgLyogSW5kZXhUeXBlLlBBUlRJQUwgKi8gOiBuKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGJ5dGUgZW5jb2RlZCBmb3JtIG9mIHRoZSBkaXJlY3Rpb25hbCB2YWx1ZXMgaW4gdGhlIGZpZWxkIGluZGV4LlxuICAgICAqIFJldHVybnMgYG51bGxgIGlmIHRoZSBkb2N1bWVudCBkb2VzIG5vdCBoYXZlIGFsbCBmaWVsZHMgc3BlY2lmaWVkIGluIHRoZVxuICAgICAqIGluZGV4LlxuICAgICAqLyAgICBRbihlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgX19QUklWQVRFX0luZGV4Qnl0ZUVuY29kZXI7XG4gICAgICAgIGZvciAoY29uc3QgciBvZiBfX1BSSVZBVEVfZmllbGRJbmRleEdldERpcmVjdGlvbmFsU2VnbWVudHMoZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LmRhdGEuZmllbGQoci5maWVsZFBhdGgpO1xuICAgICAgICAgICAgaWYgKG51bGwgPT0gZSkgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICBjb25zdCBpID0gbi5QbihyLmtpbmQpO1xuICAgICAgICAgICAgX19QUklWQVRFX0ZpcmVzdG9yZUluZGV4VmFsdWVXcml0ZXIuS3QuRHQoZSwgaSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG4udW4oKTtcbiAgICB9XG4gICAgLyoqIEVuY29kZXMgYSBzaW5nbGUgdmFsdWUgdG8gdGhlIGFzY2VuZGluZyBpbmRleCBmb3JtYXQuICovICAgIExuKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IG5ldyBfX1BSSVZBVEVfSW5kZXhCeXRlRW5jb2RlcjtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9GaXJlc3RvcmVJbmRleFZhbHVlV3JpdGVyLkt0LkR0KGUsIHQuUG4oMCAvKiBJbmRleEtpbmQuQVNDRU5ESU5HICovKSksIFxuICAgICAgICB0LnVuKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gZW5jb2RlZCBmb3JtIG9mIHRoZSBkb2N1bWVudCBrZXkgdGhhdCBzb3J0cyBiYXNlZCBvbiB0aGUga2V5XG4gICAgICogb3JkZXJpbmcgb2YgdGhlIGZpZWxkIGluZGV4LlxuICAgICAqLyAgICAkbihlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgX19QUklWQVRFX0luZGV4Qnl0ZUVuY29kZXI7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfRmlyZXN0b3JlSW5kZXhWYWx1ZVdyaXRlci5LdC5EdChfX1BSSVZBVEVfcmVmVmFsdWUodGhpcy5kYXRhYmFzZUlkLCB0KSwgbi5QbihmdW5jdGlvbiBfX1BSSVZBVEVfZmllbGRJbmRleEdldEtleU9yZGVyKGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZmllbGRJbmRleEdldERpcmVjdGlvbmFsU2VnbWVudHMoZSk7XG4gICAgICAgICAgICByZXR1cm4gMCA9PT0gdC5sZW5ndGggPyAwIC8qIEluZGV4S2luZC5BU0NFTkRJTkcgKi8gOiB0W3QubGVuZ3RoIC0gMV0ua2luZDtcbiAgICAgICAgfShlKSkpLCBuLnVuKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuY29kZXMgdGhlIGdpdmVuIGZpZWxkIHZhbHVlcyBhY2NvcmRpbmcgdG8gdGhlIHNwZWNpZmljYXRpb24gaW4gYHRhcmdldGAuXG4gICAgICogRm9yIElOIHF1ZXJpZXMsIGEgbGlzdCBvZiBwb3NzaWJsZSB2YWx1ZXMgaXMgcmV0dXJuZWQuXG4gICAgICovICAgIE5uKGUsIHQsIG4pIHtcbiAgICAgICAgaWYgKG51bGwgPT09IG4pIHJldHVybiBbXTtcbiAgICAgICAgbGV0IHIgPSBbXTtcbiAgICAgICAgci5wdXNoKG5ldyBfX1BSSVZBVEVfSW5kZXhCeXRlRW5jb2Rlcik7XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgZm9yIChjb25zdCBzIG9mIF9fUFJJVkFURV9maWVsZEluZGV4R2V0RGlyZWN0aW9uYWxTZWdtZW50cyhlKSkge1xuICAgICAgICAgICAgY29uc3QgZSA9IG5baSsrXTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiByKSBpZiAodGhpcy5Vbih0LCBzLmZpZWxkUGF0aCkgJiYgaXNBcnJheShlKSkgciA9IHRoaXMuS24ociwgcywgZSk7IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBuLlBuKHMua2luZCk7XG4gICAgICAgICAgICAgICAgX19QUklWQVRFX0ZpcmVzdG9yZUluZGV4VmFsdWVXcml0ZXIuS3QuRHQoZSwgdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuV24ocik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuY29kZXMgdGhlIGdpdmVuIGJvdW5kcyBhY2NvcmRpbmcgdG8gdGhlIHNwZWNpZmljYXRpb24gaW4gYHRhcmdldGAuIEZvciBJTlxuICAgICAqIHF1ZXJpZXMsIGEgbGlzdCBvZiBwb3NzaWJsZSB2YWx1ZXMgaXMgcmV0dXJuZWQuXG4gICAgICovICAgIE9uKGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuTm4oZSwgdCwgbi5wb3NpdGlvbik7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRoZSBieXRlIHJlcHJlc2VudGF0aW9uIGZvciB0aGUgcHJvdmlkZWQgZW5jb2RlcnMuICovICAgIFduKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IGUubGVuZ3RoOyArK24pIHRbbl0gPSBlW25dLnVuKCk7XG4gICAgICAgIHJldHVybiB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgc2VwYXJhdGUgZW5jb2RlciBmb3IgZWFjaCBlbGVtZW50IG9mIGFuIGFycmF5LlxuICAgICAqXG4gICAgICogVGhlIG1ldGhvZCBhcHBlbmRzIGVhY2ggdmFsdWUgdG8gYWxsIGV4aXN0aW5nIGVuY29kZXJzIChlLmcuIGZpbHRlcihcImFcIixcbiAgICAgKiBcIj09XCIsIFwiYTFcIikuZmlsdGVyKFwiYlwiLCBcImluXCIsIFtcImIxXCIsIFwiYjJcIl0pIGJlY29tZXMgW1wiYTEsYjFcIiwgXCJhMSxiMlwiXSkuIEFcbiAgICAgKiBsaXN0IG9mIG5ldyBlbmNvZGVycyBpcyByZXR1cm5lZC5cbiAgICAgKi8gICAgS24oZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gWyAuLi5lIF0sIGkgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIG4uYXJyYXlWYWx1ZS52YWx1ZXMgfHwgW10pIGZvciAoY29uc3QgbiBvZiByKSB7XG4gICAgICAgICAgICBjb25zdCByID0gbmV3IF9fUFJJVkFURV9JbmRleEJ5dGVFbmNvZGVyO1xuICAgICAgICAgICAgci5zZWVkKG4udW4oKSksIF9fUFJJVkFURV9GaXJlc3RvcmVJbmRleFZhbHVlV3JpdGVyLkt0LkR0KGUsIHIuUG4odC5raW5kKSksIGkucHVzaChyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaTtcbiAgICB9XG4gICAgVW4oZSwgdCkge1xuICAgICAgICByZXR1cm4gISFlLmZpbHRlcnMuZmluZCgoZSA9PiBlIGluc3RhbmNlb2YgRmllbGRGaWx0ZXIgJiYgZS5maWVsZC5pc0VxdWFsKHQpICYmIChcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gPT09IGUub3AgfHwgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gPT09IGUub3ApKSk7XG4gICAgfVxuICAgIGdldEZpZWxkSW5kZXhlcyhlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfaW5kZXhDb25maWd1cmF0aW9uU3RvcmUoZSksIHIgPSBfX1BSSVZBVEVfaW5kZXhTdGF0ZVN0b3JlKGUpO1xuICAgICAgICByZXR1cm4gKHQgPyBuLkooeGUsIElEQktleVJhbmdlLmJvdW5kKHQsIHQpKSA6IG4uSigpKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaChlLCAoZSA9PiByLmdldChbIGUuaW5kZXhJZCwgdGhpcy51aWQgXSkubmV4dCgobiA9PiB7XG4gICAgICAgICAgICAgICAgdC5wdXNoKGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tRGJJbmRleENvbmZpZ3VyYXRpb24oZSwgdCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gdCA/IG5ldyBJbmRleFN0YXRlKHQuc2VxdWVuY2VOdW1iZXIsIG5ldyBJbmRleE9mZnNldChfX1BSSVZBVEVfZnJvbURiVGltZXN0YW1wKHQucmVhZFRpbWUpLCBuZXcgRG9jdW1lbnRLZXkoX19QUklWQVRFX2RlY29kZVJlc291cmNlUGF0aCh0LmRvY3VtZW50S2V5KSksIHQubGFyZ2VzdEJhdGNoSWQpKSA6IEluZGV4U3RhdGUuZW1wdHkoKSwgciA9IGUuZmllbGRzLm1hcCgoKFtlLCB0XSkgPT4gbmV3IEluZGV4U2VnbWVudChGaWVsZFBhdGgkMS5mcm9tU2VydmVyRm9ybWF0KGUpLCB0KSkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEZpZWxkSW5kZXgoZS5pbmRleElkLCBlLmNvbGxlY3Rpb25Hcm91cCwgciwgbik7XG4gICAgICAgICAgICAgICAgfShlLCBuKSk7XG4gICAgICAgICAgICB9KSkpKS5uZXh0KCgoKSA9PiB0KSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0TmV4dENvbGxlY3Rpb25Hcm91cFRvVXBkYXRlKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RmllbGRJbmRleGVzKGUpLm5leHQoKGUgPT4gMCA9PT0gZS5sZW5ndGggPyBudWxsIDogKGUuc29ydCgoKGUsIHQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLmluZGV4U3RhdGUuc2VxdWVuY2VOdW1iZXIgLSB0LmluZGV4U3RhdGUuc2VxdWVuY2VOdW1iZXI7XG4gICAgICAgICAgICByZXR1cm4gMCAhPT0gbiA/IG4gOiBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihlLmNvbGxlY3Rpb25Hcm91cCwgdC5jb2xsZWN0aW9uR3JvdXApO1xuICAgICAgICB9KSksIGVbMF0uY29sbGVjdGlvbkdyb3VwKSkpO1xuICAgIH1cbiAgICB1cGRhdGVDb2xsZWN0aW9uR3JvdXAoZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gX19QUklWQVRFX2luZGV4Q29uZmlndXJhdGlvblN0b3JlKGUpLCBpID0gX19QUklWQVRFX2luZGV4U3RhdGVTdG9yZShlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuR24oZSkubmV4dCgoZSA9PiByLkooeGUsIElEQktleVJhbmdlLmJvdW5kKHQsIHQpKS5uZXh0KCh0ID0+IFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHQsICh0ID0+IGkucHV0KF9fUFJJVkFURV90b0RiSW5kZXhTdGF0ZSh0LmluZGV4SWQsIHRoaXMudWlkLCBlLCBuKSkpKSkpKSk7XG4gICAgfVxuICAgIHVwZGF0ZUluZGV4RW50cmllcyhlLCB0KSB7XG4gICAgICAgIC8vIFBvcnRpbmcgTm90ZTogYGdldEZpZWxkSW5kZXhlcygpYCBvbiBXZWIgZG9lcyBub3QgY2FjaGUgaW5kZXggbG9va3VwcyBhc1xuICAgICAgICAvLyBpdCBjb3VsZCBiZSB1c2VkIGFjcm9zcyBkaWZmZXJlbnQgSW5kZXhlZERCIHRyYW5zYWN0aW9ucy4gQXMgYW55IGNhY2hlZFxuICAgICAgICAvLyBkYXRhIG1pZ2h0IGJlIGludmFsaWRhdGVkIGJ5IG90aGVyIG11bHRpLXRhYiBjbGllbnRzLCB3ZSBjYW4gb25seSB0cnVzdFxuICAgICAgICAvLyBkYXRhIHdpdGhpbiBhIHNpbmdsZSBJbmRleGVkREIgdHJhbnNhY3Rpb24uIFdlIHRoZXJlZm9yZSBhZGQgYSBjYWNoZVxuICAgICAgICAvLyBoZXJlLlxuICAgICAgICBjb25zdCBuID0gbmV3IE1hcDtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHQsICgodCwgcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IG4uZ2V0KHQuY29sbGVjdGlvbkdyb3VwKTtcbiAgICAgICAgICAgIHJldHVybiAoaSA/IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKGkpIDogdGhpcy5nZXRGaWVsZEluZGV4ZXMoZSwgdC5jb2xsZWN0aW9uR3JvdXApKS5uZXh0KChpID0+IChuLnNldCh0LmNvbGxlY3Rpb25Hcm91cCwgaSksIFxuICAgICAgICAgICAgUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2goaSwgKG4gPT4gdGhpcy56bihlLCB0LCBuKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpID0gdGhpcy5qbihyLCBuKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdC5pc0VxdWFsKGkpID8gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKSA6IHRoaXMuSm4oZSwgciwgbiwgdCwgaSk7XG4gICAgICAgICAgICB9KSkpKSkpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBIbihlLCB0LCBuLCByKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfaW5kZXhFbnRyaWVzU3RvcmUoZSkucHV0KHIuUm4odGhpcy51aWQsIHRoaXMuJG4obiwgdC5rZXkpLCB0LmtleSkpO1xuICAgIH1cbiAgICBZbihlLCB0LCBuLCByKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfaW5kZXhFbnRyaWVzU3RvcmUoZSkuZGVsZXRlKHIuVm4odGhpcy51aWQsIHRoaXMuJG4obiwgdC5rZXkpLCB0LmtleSkpO1xuICAgIH1cbiAgICB6bihlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfaW5kZXhFbnRyaWVzU3RvcmUoZSk7XG4gICAgICAgIGxldCBpID0gbmV3IFNvcnRlZFNldChfX1BSSVZBVEVfaW5kZXhFbnRyeUNvbXBhcmF0b3IpO1xuICAgICAgICByZXR1cm4gci5lZSh7XG4gICAgICAgICAgICBpbmRleDogJGUsXG4gICAgICAgICAgICByYW5nZTogSURCS2V5UmFuZ2Uub25seShbIG4uaW5kZXhJZCwgdGhpcy51aWQsIF9fUFJJVkFURV9lbmNvZGVLZXlTYWZlQnl0ZXModGhpcy4kbihuLCB0KSkgXSlcbiAgICAgICAgfSwgKChlLCByKSA9PiB7XG4gICAgICAgICAgICBpID0gaS5hZGQobmV3IF9fUFJJVkFURV9JbmRleEVudHJ5KG4uaW5kZXhJZCwgdCwgX19QUklWQVRFX2RlY29kZUtleVNhZmVCeXRlcyhyLmFycmF5VmFsdWUpLCBfX1BSSVZBVEVfZGVjb2RlS2V5U2FmZUJ5dGVzKHIuZGlyZWN0aW9uYWxWYWx1ZSkpKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgdGhlIGluZGV4IGVudHJpZXMgZm9yIHRoZSBnaXZlbiBkb2N1bWVudC4gKi8gICAgam4oZSwgdCkge1xuICAgICAgICBsZXQgbiA9IG5ldyBTb3J0ZWRTZXQoX19QUklWQVRFX2luZGV4RW50cnlDb21wYXJhdG9yKTtcbiAgICAgICAgY29uc3QgciA9IHRoaXMuUW4odCwgZSk7XG4gICAgICAgIGlmIChudWxsID09IHIpIHJldHVybiBuO1xuICAgICAgICBjb25zdCBpID0gX19QUklWQVRFX2ZpZWxkSW5kZXhHZXRBcnJheVNlZ21lbnQodCk7XG4gICAgICAgIGlmIChudWxsICE9IGkpIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBlLmRhdGEuZmllbGQoaS5maWVsZFBhdGgpO1xuICAgICAgICAgICAgaWYgKGlzQXJyYXkocykpIGZvciAoY29uc3QgaSBvZiBzLmFycmF5VmFsdWUudmFsdWVzIHx8IFtdKSBuID0gbi5hZGQobmV3IF9fUFJJVkFURV9JbmRleEVudHJ5KHQuaW5kZXhJZCwgZS5rZXksIHRoaXMuTG4oaSksIHIpKTtcbiAgICAgICAgfSBlbHNlIG4gPSBuLmFkZChuZXcgX19QUklWQVRFX0luZGV4RW50cnkodC5pbmRleElkLCBlLmtleSwgTXQsIHIpKTtcbiAgICAgICAgcmV0dXJuIG47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGluZGV4IGVudHJpZXMgZm9yIHRoZSBwcm92aWRlZCBkb2N1bWVudCBieSBkZWxldGluZyBlbnRyaWVzXG4gICAgICogdGhhdCBhcmUgbm8gbG9uZ2VyIHJlZmVyZW5jZWQgaW4gYG5ld0VudHJpZXNgIGFuZCBhZGRpbmcgYWxsIG5ld2x5IGFkZGVkXG4gICAgICogZW50cmllcy5cbiAgICAgKi8gICAgSm4oZSwgdCwgbiwgciwgaSkge1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoRnQsIFwiVXBkYXRpbmcgaW5kZXggZW50cmllcyBmb3IgZG9jdW1lbnQgJyVzJ1wiLCB0LmtleSk7XG4gICAgICAgIGNvbnN0IHMgPSBbXTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9kaWZmU29ydGVkU2V0cyhlLCB0LCBuLCByLCBpKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gZS5nZXRJdGVyYXRvcigpLCBvID0gdC5nZXRJdGVyYXRvcigpO1xuICAgICAgICAgICAgbGV0IF8gPSBfX1BSSVZBVEVfYWR2YW5jZUl0ZXJhdG9yKHMpLCBhID0gX19QUklWQVRFX2FkdmFuY2VJdGVyYXRvcihvKTtcbiAgICAgICAgICAgIC8vIFdhbGsgdGhyb3VnaCB0aGUgdHdvIHNldHMgYXQgdGhlIHNhbWUgdGltZSwgdXNpbmcgdGhlIG9yZGVyaW5nIGRlZmluZWQgYnlcbiAgICAgICAgICAgIC8vIGBjb21wYXJhdG9yYC5cbiAgICAgICAgICAgIGZvciAoO18gfHwgYTsgKSB7XG4gICAgICAgICAgICAgICAgbGV0IGUgPSAhMSwgdCA9ICExO1xuICAgICAgICAgICAgICAgIGlmIChfICYmIGEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9IG4oXywgYSk7XG4gICAgICAgICAgICAgICAgICAgIHIgPCAwID8gXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSBlbGVtZW50IHdhcyByZW1vdmVkIGlmIHRoZSBuZXh0IGVsZW1lbnQgaW4gb3VyIG9yZGVyZWRcbiAgICAgICAgICAgICAgICAgICAgLy8gd2Fsa3Rocm91Z2ggaXMgb25seSBpbiBgYmVmb3JlYC5cbiAgICAgICAgICAgICAgICAgICAgdCA9ICEwIDogciA+IDAgJiYgKFxuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZWxlbWVudCB3YXMgYWRkZWQgaWYgdGhlIG5leHQgZWxlbWVudCBpbiBvdXIgb3JkZXJlZCB3YWxrdGhyb3VnaFxuICAgICAgICAgICAgICAgICAgICAvLyBpcyBvbmx5IGluIGBhZnRlcmAuXG4gICAgICAgICAgICAgICAgICAgIGUgPSAhMCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIG51bGwgIT0gXyA/IHQgPSAhMCA6IGUgPSAhMDtcbiAgICAgICAgICAgICAgICBlID8gKHIoYSksIGEgPSBfX1BSSVZBVEVfYWR2YW5jZUl0ZXJhdG9yKG8pKSA6IHQgPyAoaShfKSwgXyA9IF9fUFJJVkFURV9hZHZhbmNlSXRlcmF0b3IocykpIDogKF8gPSBfX1BSSVZBVEVfYWR2YW5jZUl0ZXJhdG9yKHMpLCBcbiAgICAgICAgICAgICAgICBhID0gX19QUklWQVRFX2FkdmFuY2VJdGVyYXRvcihvKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0ociwgaSwgX19QUklWQVRFX2luZGV4RW50cnlDb21wYXJhdG9yLCAoXG4gICAgICAgIC8qIG9uQWRkPSAqLyByID0+IHtcbiAgICAgICAgICAgIHMucHVzaCh0aGlzLkhuKGUsIHQsIG4sIHIpKTtcbiAgICAgICAgfSksIChcbiAgICAgICAgLyogb25SZW1vdmU9ICovIHIgPT4ge1xuICAgICAgICAgICAgcy5wdXNoKHRoaXMuWW4oZSwgdCwgbiwgcikpO1xuICAgICAgICB9KSksIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHMpO1xuICAgIH1cbiAgICBHbihlKSB7XG4gICAgICAgIGxldCB0ID0gMTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9pbmRleFN0YXRlU3RvcmUoZSkuZWUoe1xuICAgICAgICAgICAgaW5kZXg6IExlLFxuICAgICAgICAgICAgcmV2ZXJzZTogITAsXG4gICAgICAgICAgICByYW5nZTogSURCS2V5UmFuZ2UudXBwZXJCb3VuZChbIHRoaXMudWlkLCBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiBdKVxuICAgICAgICB9LCAoKGUsIG4sIHIpID0+IHtcbiAgICAgICAgICAgIHIuZG9uZSgpLCB0ID0gbi5zZXF1ZW5jZU51bWJlciArIDE7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB0KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBuZXcgc2V0IG9mIElEQiByYW5nZXMgdGhhdCBzcGxpdHMgdGhlIGV4aXN0aW5nIHJhbmdlIGFuZCBleGNsdWRlc1xuICAgICAqIGFueSB2YWx1ZXMgdGhhdCBtYXRjaCB0aGUgYG5vdEluVmFsdWVgIGZyb20gdGhlc2UgcmFuZ2VzLiBBcyBhbiBleGFtcGxlLFxuICAgICAqICdbZm9vID4gMiAmJiBmb28gIT0gM11gIGJlY29tZXMgIGBbZm9vID4gMiAmJiA8IDMsIGZvbyA+IDNdYC5cbiAgICAgKi8gICAgY3JlYXRlUmFuZ2UoZSwgdCwgbikge1xuICAgICAgICAvLyBUaGUgbm90SW4gdmFsdWVzIG5lZWQgdG8gYmUgc29ydGVkIGFuZCB1bmlxdWUgc28gdGhhdCB3ZSBjYW4gcmV0dXJuIGFcbiAgICAgICAgLy8gc29ydGVkIHNldCBvZiBub24tb3ZlcmxhcHBpbmcgcmFuZ2VzLlxuICAgICAgICBuID0gbi5zb3J0KCgoZSwgdCkgPT4gX19QUklWQVRFX2luZGV4RW50cnlDb21wYXJhdG9yKGUsIHQpKSkuZmlsdGVyKCgoZSwgdCwgbikgPT4gIXQgfHwgMCAhPT0gX19QUklWQVRFX2luZGV4RW50cnlDb21wYXJhdG9yKGUsIG5bdCAtIDFdKSkpO1xuICAgICAgICBjb25zdCByID0gW107XG4gICAgICAgIHIucHVzaChlKTtcbiAgICAgICAgZm9yIChjb25zdCBpIG9mIG4pIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfaW5kZXhFbnRyeUNvbXBhcmF0b3IoaSwgZSksIHMgPSBfX1BSSVZBVEVfaW5kZXhFbnRyeUNvbXBhcmF0b3IoaSwgdCk7XG4gICAgICAgICAgICBpZiAoMCA9PT0gbikgXG4gICAgICAgICAgICAvLyBgbm90SW5WYWx1ZWAgaXMgdGhlIGxvd2VyIGJvdW5kLiBXZSB0aGVyZWZvcmUgbmVlZCB0byByYWlzZSB0aGUgYm91bmRcbiAgICAgICAgICAgIC8vIHRvIHRoZSBuZXh0IHZhbHVlLlxuICAgICAgICAgICAgclswXSA9IGUuQW4oKTsgZWxzZSBpZiAobiA+IDAgJiYgcyA8IDApIFxuICAgICAgICAgICAgLy8gYG5vdEluVmFsdWVgIGlzIGluIHRoZSBtaWRkbGUgb2YgdGhlIHJhbmdlXG4gICAgICAgICAgICByLnB1c2goaSksIHIucHVzaChpLkFuKCkpOyBlbHNlIGlmIChzID4gMCkgXG4gICAgICAgICAgICAvLyBgbm90SW5WYWx1ZWAgKGFuZCBhbGwgZm9sbG93aW5nIHZhbHVlcykgYXJlIG91dCBvZiB0aGUgcmFuZ2VcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHIucHVzaCh0KTtcbiAgICAgICAgY29uc3QgaSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IHIubGVuZ3RoOyBlICs9IDIpIHtcbiAgICAgICAgICAgIC8vIElmIHdlIGVuY291bnRlciB0d28gYm91bmRzIHRoYXQgd2lsbCBjcmVhdGUgYW4gdW5tYXRjaGFibGUga2V5IHJhbmdlLFxuICAgICAgICAgICAgLy8gdGhlbiB3ZSByZXR1cm4gYW4gZW1wdHkgc2V0IG9mIGtleSByYW5nZXMuXG4gICAgICAgICAgICBpZiAodGhpcy5abihyW2VdLCByW2UgKyAxXSkpIHJldHVybiBbXTtcbiAgICAgICAgICAgIGNvbnN0IHQgPSByW2VdLlZuKHRoaXMudWlkLCBNdCwgRG9jdW1lbnRLZXkuZW1wdHkoKSksIG4gPSByW2UgKyAxXS5Wbih0aGlzLnVpZCwgTXQsIERvY3VtZW50S2V5LmVtcHR5KCkpO1xuICAgICAgICAgICAgaS5wdXNoKElEQktleVJhbmdlLmJvdW5kKHQsIG4pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaTtcbiAgICB9XG4gICAgWm4oZSwgdCkge1xuICAgICAgICAvLyBJZiBsb3dlciBib3VuZCBpcyBncmVhdGVyIHRoYW4gdGhlIHVwcGVyIGJvdW5kLCB0aGVuIHRoZSBrZXlcbiAgICAgICAgLy8gcmFuZ2UgY2FuIG5ldmVyIGJlIG1hdGNoZWQuXG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfaW5kZXhFbnRyeUNvbXBhcmF0b3IoZSwgdCkgPiAwO1xuICAgIH1cbiAgICBnZXRNaW5PZmZzZXRGcm9tQ29sbGVjdGlvbkdyb3VwKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RmllbGRJbmRleGVzKGUsIHQpLm5leHQoX19QUklWQVRFX2dldE1pbk9mZnNldEZyb21GaWVsZEluZGV4ZXMpO1xuICAgIH1cbiAgICBnZXRNaW5PZmZzZXQoZSwgdCkge1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLm1hcEFycmF5KHRoaXMuTW4odCksICh0ID0+IHRoaXMueG4oZSwgdCkubmV4dCgoZSA9PiBlIHx8IGZhaWwoNDQ0MjYpKSkpKS5uZXh0KF9fUFJJVkFURV9nZXRNaW5PZmZzZXRGcm9tRmllbGRJbmRleGVzKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBjb2xsZWN0aW9uUGFyZW50c1xuICogZG9jdW1lbnQgc3RvcmUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2NvbGxlY3Rpb25QYXJlbnRzU3RvcmUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZ2V0U3RvcmUoZSwgcGUpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgaW5kZXggZW50cnkgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9pbmRleEVudHJpZXNTdG9yZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9nZXRTdG9yZShlLCBxZSk7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBpbmRleCBjb25maWd1cmF0aW9uIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfaW5kZXhDb25maWd1cmF0aW9uU3RvcmUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZ2V0U3RvcmUoZSwgRmUpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgaW5kZXggc3RhdGUgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9pbmRleFN0YXRlU3RvcmUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZ2V0U3RvcmUoZSwgTmUpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZ2V0TWluT2Zmc2V0RnJvbUZpZWxkSW5kZXhlcyhlKSB7XG4gICAgX19QUklWQVRFX2hhcmRBc3NlcnQoMCAhPT0gZS5sZW5ndGgsIDI4ODI1KTtcbiAgICBsZXQgdCA9IGVbMF0uaW5kZXhTdGF0ZS5vZmZzZXQsIG4gPSB0Lmxhcmdlc3RCYXRjaElkO1xuICAgIGZvciAobGV0IHIgPSAxOyByIDwgZS5sZW5ndGg7IHIrKykge1xuICAgICAgICBjb25zdCBpID0gZVtyXS5pbmRleFN0YXRlLm9mZnNldDtcbiAgICAgICAgX19QUklWQVRFX2luZGV4T2Zmc2V0Q29tcGFyYXRvcihpLCB0KSA8IDAgJiYgKHQgPSBpKSwgbiA8IGkubGFyZ2VzdEJhdGNoSWQgJiYgKG4gPSBpLmxhcmdlc3RCYXRjaElkKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBJbmRleE9mZnNldCh0LnJlYWRUaW1lLCB0LmRvY3VtZW50S2V5LCBuKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgeHQgPSB7XG4gICAgZGlkUnVuOiAhMSxcbiAgICBzZXF1ZW5jZU51bWJlcnNDb2xsZWN0ZWQ6IDAsXG4gICAgdGFyZ2V0c1JlbW92ZWQ6IDAsXG4gICAgZG9jdW1lbnRzUmVtb3ZlZDogMFxufSwgT3QgPSA0MTk0MzA0MDtcblxuY2xhc3MgTHJ1UGFyYW1zIHtcbiAgICBzdGF0aWMgd2l0aENhY2hlU2l6ZShlKSB7XG4gICAgICAgIHJldHVybiBuZXcgTHJ1UGFyYW1zKGUsIExydVBhcmFtcy5ERUZBVUxUX0NPTExFQ1RJT05fUEVSQ0VOVElMRSwgTHJ1UGFyYW1zLkRFRkFVTFRfTUFYX1NFUVVFTkNFX05VTUJFUlNfVE9fQ09MTEVDVCk7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8vIFdoZW4gd2UgYXR0ZW1wdCB0byBjb2xsZWN0LCB3ZSB3aWxsIG9ubHkgZG8gc28gaWYgdGhlIGNhY2hlIHNpemUgaXMgZ3JlYXRlciB0aGFuIHRoaXNcbiAgICAvLyB0aHJlc2hvbGQuIFBhc3NpbmcgYENPTExFQ1RJT05fRElTQUJMRURgIGhlcmUgd2lsbCBjYXVzZSBjb2xsZWN0aW9uIHRvIGFsd2F5cyBiZSBza2lwcGVkLlxuICAgIGUsIFxuICAgIC8vIFRoZSBwZXJjZW50YWdlIG9mIHNlcXVlbmNlIG51bWJlcnMgdGhhdCB3ZSB3aWxsIGF0dGVtcHQgdG8gY29sbGVjdFxuICAgIHQsIFxuICAgIC8vIEEgY2FwIG9uIHRoZSB0b3RhbCBudW1iZXIgb2Ygc2VxdWVuY2UgbnVtYmVycyB0aGF0IHdpbGwgYmUgY29sbGVjdGVkLiBUaGlzIHByZXZlbnRzXG4gICAgLy8gdXMgZnJvbSBjb2xsZWN0aW5nIGEgaHVnZSBudW1iZXIgb2Ygc2VxdWVuY2UgbnVtYmVycyBpZiB0aGUgY2FjaGUgaGFzIGdyb3duIHZlcnkgbGFyZ2UuXG4gICAgbikge1xuICAgICAgICB0aGlzLmNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQgPSBlLCB0aGlzLnBlcmNlbnRpbGVUb0NvbGxlY3QgPSB0LCB0aGlzLm1heGltdW1TZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3QgPSBuO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRGVsZXRlIGEgbXV0YXRpb24gYmF0Y2ggYW5kIHRoZSBhc3NvY2lhdGVkIGRvY3VtZW50IG11dGF0aW9ucy5cbiAqIEByZXR1cm5zIEEgUGVyc2lzdGVuY2VQcm9taXNlIG9mIHRoZSBkb2N1bWVudCBtdXRhdGlvbnMgdGhhdCB3ZXJlIHJlbW92ZWQuXG4gKi9cbmZ1bmN0aW9uIHJlbW92ZU11dGF0aW9uQmF0Y2goZSwgdCwgbikge1xuICAgIGNvbnN0IHIgPSBlLnN0b3JlKHRlKSwgaSA9IGUuc3RvcmUob2UpLCBzID0gW10sIG8gPSBJREJLZXlSYW5nZS5vbmx5KG4uYmF0Y2hJZCk7XG4gICAgbGV0IF8gPSAwO1xuICAgIGNvbnN0IGEgPSByLmVlKHtcbiAgICAgICAgcmFuZ2U6IG9cbiAgICB9LCAoKGUsIHQsIG4pID0+IChfKyssIG4uZGVsZXRlKCkpKSk7XG4gICAgcy5wdXNoKGEubmV4dCgoKCkgPT4ge1xuICAgICAgICBfX1BSSVZBVEVfaGFyZEFzc2VydCgxID09PSBfLCA0NzA3MCwge1xuICAgICAgICAgICAgYmF0Y2hJZDogbi5iYXRjaElkXG4gICAgICAgIH0pO1xuICAgIH0pKSk7XG4gICAgY29uc3QgdSA9IFtdO1xuICAgIGZvciAoY29uc3QgZSBvZiBuLm11dGF0aW9ucykge1xuICAgICAgICBjb25zdCByID0gX19QUklWQVRFX25ld0RiRG9jdW1lbnRNdXRhdGlvbktleSh0LCBlLmtleS5wYXRoLCBuLmJhdGNoSWQpO1xuICAgICAgICBzLnB1c2goaS5kZWxldGUocikpLCB1LnB1c2goZS5rZXkpO1xuICAgIH1cbiAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IocykubmV4dCgoKCkgPT4gdSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYW4gYXBwcm94aW1hdGUgc2l6ZSBmb3IgdGhlIGdpdmVuIGRvY3VtZW50LlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9kYkRvY3VtZW50U2l6ZShlKSB7XG4gICAgaWYgKCFlKSByZXR1cm4gMDtcbiAgICBsZXQgdDtcbiAgICBpZiAoZS5kb2N1bWVudCkgdCA9IGUuZG9jdW1lbnQ7IGVsc2UgaWYgKGUudW5rbm93bkRvY3VtZW50KSB0ID0gZS51bmtub3duRG9jdW1lbnQ7IGVsc2Uge1xuICAgICAgICBpZiAoIWUubm9Eb2N1bWVudCkgdGhyb3cgZmFpbCgxNDczMSk7XG4gICAgICAgIHQgPSBlLm5vRG9jdW1lbnQ7XG4gICAgfVxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0KS5sZW5ndGg7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogQSBtdXRhdGlvbiBxdWV1ZSBmb3IgYSBzcGVjaWZpYyB1c2VyLCBiYWNrZWQgYnkgSW5kZXhlZERCLiAqLyBMcnVQYXJhbXMuREVGQVVMVF9DT0xMRUNUSU9OX1BFUkNFTlRJTEUgPSAxMCwgXG5McnVQYXJhbXMuREVGQVVMVF9NQVhfU0VRVUVOQ0VfTlVNQkVSU19UT19DT0xMRUNUID0gMWUzLCBMcnVQYXJhbXMuREVGQVVMVCA9IG5ldyBMcnVQYXJhbXMoT3QsIExydVBhcmFtcy5ERUZBVUxUX0NPTExFQ1RJT05fUEVSQ0VOVElMRSwgTHJ1UGFyYW1zLkRFRkFVTFRfTUFYX1NFUVVFTkNFX05VTUJFUlNfVE9fQ09MTEVDVCksIFxuTHJ1UGFyYW1zLkRJU0FCTEVEID0gbmV3IExydVBhcmFtcygtMSwgMCwgMCk7XG5cbmNsYXNzIF9fUFJJVkFURV9JbmRleGVkRGJNdXRhdGlvblF1ZXVlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgbm9ybWFsaXplZCB1c2VySWQgKGUuZy4gbnVsbCBVSUQgPT4gXCJcIiB1c2VySWQpIHVzZWQgdG8gc3RvcmUgL1xuICAgICAqIHJldHJpZXZlIG11dGF0aW9ucy5cbiAgICAgKi9cbiAgICBlLCB0LCBuLCByKSB7XG4gICAgICAgIHRoaXMudXNlcklkID0gZSwgdGhpcy5zZXJpYWxpemVyID0gdCwgdGhpcy5pbmRleE1hbmFnZXIgPSBuLCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlID0gciwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWNoZXMgdGhlIGRvY3VtZW50IGtleXMgZm9yIHBlbmRpbmcgbXV0YXRpb24gYmF0Y2hlcy4gSWYgdGhlIG11dGF0aW9uXG4gICAgICAgICAqIGhhcyBiZWVuIHJlbW92ZWQgZnJvbSBJbmRleGVkRGIsIHRoZSBjYWNoZWQgdmFsdWUgbWF5IGNvbnRpbnVlIHRvXG4gICAgICAgICAqIGJlIHVzZWQgdG8gcmV0cmlldmUgdGhlIGJhdGNoJ3MgZG9jdW1lbnQga2V5cy4gVG8gcmVtb3ZlIGEgY2FjaGVkIHZhbHVlXG4gICAgICAgICAqIGxvY2FsbHksIGByZW1vdmVDYWNoZWRNdXRhdGlvbktleXMoKWAgc2hvdWxkIGJlIGludm9rZWQgZWl0aGVyIGRpcmVjdGx5XG4gICAgICAgICAqIG9yIHRocm91Z2ggYHJlbW92ZU11dGF0aW9uQmF0Y2hlcygpYC5cbiAgICAgICAgICpcbiAgICAgICAgICogV2l0aCBtdWx0aS10YWIsIHdoZW4gdGhlIHByaW1hcnkgY2xpZW50IGFja25vd2xlZGdlcyBvciByZWplY3RzIGEgbXV0YXRpb24sXG4gICAgICAgICAqIHRoaXMgY2FjaGUgaXMgdXNlZCBieSBzZWNvbmRhcnkgY2xpZW50cyB0byBpbnZhbGlkYXRlIHRoZSBsb2NhbFxuICAgICAgICAgKiB2aWV3IG9mIHRoZSBkb2N1bWVudHMgdGhhdCB3ZXJlIHByZXZpb3VzbHkgYWZmZWN0ZWQgYnkgdGhlIG11dGF0aW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cbiAgICAgICAgdGhpcy5YbiA9IHt9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IG11dGF0aW9uIHF1ZXVlIGZvciB0aGUgZ2l2ZW4gdXNlci5cbiAgICAgKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyIGZvciB3aGljaCB0byBjcmVhdGUgYSBtdXRhdGlvbiBxdWV1ZS5cbiAgICAgKiBAcGFyYW0gc2VyaWFsaXplciAtIFRoZSBzZXJpYWxpemVyIHRvIHVzZSB3aGVuIHBlcnNpc3RpbmcgdG8gSW5kZXhlZERiLlxuICAgICAqLyAgICBzdGF0aWMgd3QoZSwgdCwgbiwgcikge1xuICAgICAgICAvLyBUT0RPKG1jZyk6IEZpZ3VyZSBvdXQgd2hhdCBjb25zdHJhaW50cyB0aGVyZSBhcmUgb24gdXNlcklEc1xuICAgICAgICAvLyBJbiBwYXJ0aWN1bGFyLCBhcmUgdGhlcmUgYW55IHJlc2VydmVkIGNoYXJhY3RlcnM/IGFyZSBlbXB0eSBpZHMgYWxsb3dlZD9cbiAgICAgICAgLy8gRm9yIHRoZSBtb21lbnQgc3RvcmUgdGhlc2UgdG9nZXRoZXIgaW4gdGhlIHNhbWUgbXV0YXRpb25zIHRhYmxlIGFzc3VtaW5nXG4gICAgICAgIC8vIHRoYXQgZW1wdHkgdXNlcklEcyBhcmVuJ3QgYWxsb3dlZC5cbiAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQoXCJcIiAhPT0gZS51aWQsIDY0Mzg3KTtcbiAgICAgICAgY29uc3QgaSA9IGUuaXNBdXRoZW50aWNhdGVkKCkgPyBlLnVpZCA6IFwiXCI7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX0luZGV4ZWREYk11dGF0aW9uUXVldWUoaSwgdCwgbiwgcik7XG4gICAgfVxuICAgIGNoZWNrRW1wdHkoZSkge1xuICAgICAgICBsZXQgdCA9ICEwO1xuICAgICAgICBjb25zdCBuID0gSURCS2V5UmFuZ2UuYm91bmQoWyB0aGlzLnVzZXJJZCwgTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZIF0sIFsgdGhpcy51c2VySWQsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSBdKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9tdXRhdGlvbnNTdG9yZShlKS5lZSh7XG4gICAgICAgICAgICBpbmRleDogcmUsXG4gICAgICAgICAgICByYW5nZTogblxuICAgICAgICB9LCAoKGUsIG4sIHIpID0+IHtcbiAgICAgICAgICAgIHQgPSAhMSwgci5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB0KSk7XG4gICAgfVxuICAgIGFkZE11dGF0aW9uQmF0Y2goZSwgdCwgbiwgcikge1xuICAgICAgICBjb25zdCBpID0gX19QUklWQVRFX2RvY3VtZW50TXV0YXRpb25zU3RvcmUoZSksIHMgPSBfX1BSSVZBVEVfbXV0YXRpb25zU3RvcmUoZSk7XG4gICAgICAgIC8vIFRoZSBJbmRleGVkRGIgaW1wbGVtZW50YXRpb24gaW4gQ2hyb21lIChhbmQgRmlyZWZveCkgZG9lcyBub3QgaGFuZGxlXG4gICAgICAgIC8vIGNvbXBvdW5kIGluZGljZXMgdGhhdCBpbmNsdWRlIGF1dG8tZ2VuZXJhdGVkIGtleXMgY29ycmVjdGx5LiBUbyBlbnN1cmVcbiAgICAgICAgLy8gdGhhdCB0aGUgaW5kZXggZW50cnkgaXMgYWRkZWQgY29ycmVjdGx5IGluIGFsbCBicm93c2Vycywgd2UgcGVyZm9ybSB0d29cbiAgICAgICAgLy8gd3JpdGVzOiBUaGUgZmlyc3Qgd3JpdGUgaXMgdXNlZCB0byByZXRyaWV2ZSB0aGUgbmV4dCBhdXRvLWdlbmVyYXRlZCBCYXRjaFxuICAgICAgICAvLyBJRCwgYW5kIHRoZSBzZWNvbmQgd3JpdGUgcG9wdWxhdGVzIHRoZSBpbmRleCBhbmQgc3RvcmVzIHRoZSBhY3R1YWxcbiAgICAgICAgLy8gbXV0YXRpb24gYmF0Y2guXG4gICAgICAgIC8vIFNlZTogaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NzAxOTcyXG4gICAgICAgIC8vIFdlIHdyaXRlIGFuIGVtcHR5IG9iamVjdCB0byBvYnRhaW4ga2V5XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHJldHVybiBzLmFkZCh7fSkubmV4dCgobyA9PiB7XG4gICAgICAgICAgICBfX1BSSVZBVEVfaGFyZEFzc2VydChcIm51bWJlclwiID09IHR5cGVvZiBvLCA0OTAxOSk7XG4gICAgICAgICAgICBjb25zdCBfID0gbmV3IE11dGF0aW9uQmF0Y2gobywgdCwgbiwgciksIGEgPSBmdW5jdGlvbiBfX1BSSVZBVEVfdG9EYk11dGF0aW9uQmF0Y2goZSwgdCwgbikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBuLmJhc2VNdXRhdGlvbnMubWFwKCh0ID0+IHRvTXV0YXRpb24oZS55dCwgdCkpKSwgaSA9IG4ubXV0YXRpb25zLm1hcCgodCA9PiB0b011dGF0aW9uKGUueXQsIHQpKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiB0LFxuICAgICAgICAgICAgICAgICAgICBiYXRjaElkOiBuLmJhdGNoSWQsXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsV3JpdGVUaW1lTXM6IG4ubG9jYWxXcml0ZVRpbWUudG9NaWxsaXMoKSxcbiAgICAgICAgICAgICAgICAgICAgYmFzZU11dGF0aW9uczogcixcbiAgICAgICAgICAgICAgICAgICAgbXV0YXRpb25zOiBpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0odGhpcy5zZXJpYWxpemVyLCB0aGlzLnVzZXJJZCwgXyksIHUgPSBbXTtcbiAgICAgICAgICAgIGxldCBjID0gbmV3IFNvcnRlZFNldCgoKGUsIHQpID0+IF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKGUuY2Fub25pY2FsU3RyaW5nKCksIHQuY2Fub25pY2FsU3RyaW5nKCkpKSk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2Ygcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfbmV3RGJEb2N1bWVudE11dGF0aW9uS2V5KHRoaXMudXNlcklkLCBlLmtleS5wYXRoLCBvKTtcbiAgICAgICAgICAgICAgICBjID0gYy5hZGQoZS5rZXkucGF0aC5wb3BMYXN0KCkpLCB1LnB1c2gocy5wdXQoYSkpLCB1LnB1c2goaS5wdXQodCwgc2UpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgICAgIHUucHVzaCh0aGlzLmluZGV4TWFuYWdlci5hZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleChlLCB0KSk7XG4gICAgICAgICAgICB9KSksIGUuYWRkT25Db21taXR0ZWRMaXN0ZW5lcigoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuWG5bb10gPSBfLmtleXMoKTtcbiAgICAgICAgICAgIH0pKSwgUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IodSkubmV4dCgoKCkgPT4gXykpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGxvb2t1cE11dGF0aW9uQmF0Y2goZSwgdCkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX211dGF0aW9uc1N0b3JlKGUpLmdldCh0KS5uZXh0KChlID0+IGUgPyAoX19QUklWQVRFX2hhcmRBc3NlcnQoZS51c2VySWQgPT09IHRoaXMudXNlcklkLCA0OCwgXCJVbmV4cGVjdGVkIHVzZXIgZm9yIG11dGF0aW9uIGJhdGNoXCIsIHtcbiAgICAgICAgICAgIHVzZXJJZDogZS51c2VySWQsXG4gICAgICAgICAgICBiYXRjaElkOiB0XG4gICAgICAgIH0pLCBfX1BSSVZBVEVfZnJvbURiTXV0YXRpb25CYXRjaCh0aGlzLnNlcmlhbGl6ZXIsIGUpKSA6IG51bGwpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgZG9jdW1lbnQga2V5cyBmb3IgdGhlIG11dGF0aW9uIGJhdGNoIHdpdGggdGhlIGdpdmVuIGJhdGNoSWQuXG4gICAgICogRm9yIHByaW1hcnkgY2xpZW50cywgdGhpcyBtZXRob2QgcmV0dXJucyBgbnVsbGAgYWZ0ZXJcbiAgICAgKiBgcmVtb3ZlTXV0YXRpb25CYXRjaGVzKClgIGhhcyBiZWVuIGNhbGxlZC4gU2Vjb25kYXJ5IGNsaWVudHMgcmV0dXJuIGFcbiAgICAgKiBjYWNoZWQgcmVzdWx0IHVudGlsIGByZW1vdmVDYWNoZWRNdXRhdGlvbktleXMoKWAgaXMgaW52b2tlZC5cbiAgICAgKi9cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxuICAgIGVyKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuWG5bdF0gPyBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLlhuW3RdKSA6IHRoaXMubG9va3VwTXV0YXRpb25CYXRjaChlLCB0KS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGlmIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IGUua2V5cygpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLlhuW3RdID0gbiwgbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldE5leHRNdXRhdGlvbkJhdGNoQWZ0ZXJCYXRjaElkKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHQgKyAxLCByID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChbIHRoaXMudXNlcklkLCBuIF0pO1xuICAgICAgICBsZXQgaSA9IG51bGw7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfbXV0YXRpb25zU3RvcmUoZSkuZWUoe1xuICAgICAgICAgICAgaW5kZXg6IHJlLFxuICAgICAgICAgICAgcmFuZ2U6IHJcbiAgICAgICAgfSwgKChlLCB0LCByKSA9PiB7XG4gICAgICAgICAgICB0LnVzZXJJZCA9PT0gdGhpcy51c2VySWQgJiYgKF9fUFJJVkFURV9oYXJkQXNzZXJ0KHQuYmF0Y2hJZCA+PSBuLCA0NzUyNCwge1xuICAgICAgICAgICAgICAgIHRyOiBuXG4gICAgICAgICAgICB9KSwgaSA9IF9fUFJJVkFURV9mcm9tRGJNdXRhdGlvbkJhdGNoKHRoaXMuc2VyaWFsaXplciwgdCkpLCByLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgZ2V0SGlnaGVzdFVuYWNrbm93bGVkZ2VkQmF0Y2hJZChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBJREJLZXlSYW5nZS51cHBlckJvdW5kKFsgdGhpcy51c2VySWQsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSBdKTtcbiAgICAgICAgbGV0IG4gPSBqO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX211dGF0aW9uc1N0b3JlKGUpLmVlKHtcbiAgICAgICAgICAgIGluZGV4OiByZSxcbiAgICAgICAgICAgIHJhbmdlOiB0LFxuICAgICAgICAgICAgcmV2ZXJzZTogITBcbiAgICAgICAgfSwgKChlLCB0LCByKSA9PiB7XG4gICAgICAgICAgICBuID0gdC5iYXRjaElkLCByLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IElEQktleVJhbmdlLmJvdW5kKFsgdGhpcy51c2VySWQsIGogXSwgWyB0aGlzLnVzZXJJZCwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZIF0pO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX211dGF0aW9uc1N0b3JlKGUpLkoocmUsIHQpLm5leHQoKGUgPT4gZS5tYXAoKGUgPT4gX19QUklWQVRFX2Zyb21EYk11dGF0aW9uQmF0Y2godGhpcy5zZXJpYWxpemVyLCBlKSkpKSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5KGUsIHQpIHtcbiAgICAgICAgLy8gU2NhbiB0aGUgZG9jdW1lbnQtbXV0YXRpb24gaW5kZXggc3RhcnRpbmcgd2l0aCBhIHByZWZpeCBzdGFydGluZyB3aXRoXG4gICAgICAgIC8vIHRoZSBnaXZlbiBkb2N1bWVudEtleS5cbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9uZXdEYkRvY3VtZW50TXV0YXRpb25QcmVmaXhGb3JQYXRoKHRoaXMudXNlcklkLCB0LnBhdGgpLCByID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChuKSwgaSA9IFtdO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2RvY3VtZW50TXV0YXRpb25zU3RvcmUoZSkuZWUoe1xuICAgICAgICAgICAgcmFuZ2U6IHJcbiAgICAgICAgfSwgKChuLCByLCBzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBbbywgXywgYV0gPSBuLCB1ID0gX19QUklWQVRFX2RlY29kZVJlc291cmNlUGF0aChfKTtcbiAgICAgICAgICAgIC8vIE9ubHkgY29uc2lkZXIgcm93cyBtYXRjaGluZyBleGFjdGx5IHRoZSBzcGVjaWZpYyBrZXkgb2ZcbiAgICAgICAgICAgIC8vIGludGVyZXN0LiBOb3RlIHRoYXQgYmVjYXVzZSB3ZSBvcmRlciBieSBwYXRoIGZpcnN0LCBhbmQgd2VcbiAgICAgICAgICAgIC8vIG9yZGVyIHRlcm1pbmF0b3JzIGJlZm9yZSBwYXRoIHNlcGFyYXRvcnMsIHdlJ2xsIGVuY291bnRlciBhbGxcbiAgICAgICAgICAgIC8vIHRoZSBpbmRleCByb3dzIGZvciBkb2N1bWVudEtleSBjb250aWd1b3VzbHkuIEluIHBhcnRpY3VsYXIsIGFsbFxuICAgICAgICAgICAgLy8gdGhlIHJvd3MgZm9yIGRvY3VtZW50S2V5IHdpbGwgb2NjdXIgYmVmb3JlIGFueSByb3dzIGZvclxuICAgICAgICAgICAgLy8gZG9jdW1lbnRzIG5lc3RlZCBpbiBhIHN1YmNvbGxlY3Rpb24gYmVuZWF0aCBkb2N1bWVudEtleSBzbyB3ZVxuICAgICAgICAgICAgLy8gY2FuIHN0b3AgYXMgc29vbiBhcyB3ZSBoaXQgYW55IHN1Y2ggcm93LlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8gPT09IHRoaXMudXNlcklkICYmIHQucGF0aC5pc0VxdWFsKHUpKSBcbiAgICAgICAgICAgIC8vIExvb2sgdXAgdGhlIG11dGF0aW9uIGJhdGNoIGluIHRoZSBzdG9yZS5cbiAgICAgICAgICAgIHJldHVybiBfX1BSSVZBVEVfbXV0YXRpb25zU3RvcmUoZSkuZ2V0KGEpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghZSkgdGhyb3cgZmFpbCg2MTQ4MCwge1xuICAgICAgICAgICAgICAgICAgICBucjogbixcbiAgICAgICAgICAgICAgICAgICAgYmF0Y2hJZDogYVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KGUudXNlcklkID09PSB0aGlzLnVzZXJJZCwgMTA1MDMsIFwiVW5leHBlY3RlZCB1c2VyIGZvciBtdXRhdGlvbiBiYXRjaFwiLCB7XG4gICAgICAgICAgICAgICAgICAgIHVzZXJJZDogZS51c2VySWQsXG4gICAgICAgICAgICAgICAgICAgIGJhdGNoSWQ6IGFcbiAgICAgICAgICAgICAgICB9KSwgaS5wdXNoKF9fUFJJVkFURV9mcm9tRGJNdXRhdGlvbkJhdGNoKHRoaXMuc2VyaWFsaXplciwgZSkpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgcy5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpKSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5cyhlLCB0KSB7XG4gICAgICAgIGxldCBuID0gbmV3IFNvcnRlZFNldChfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcik7XG4gICAgICAgIGNvbnN0IHIgPSBbXTtcbiAgICAgICAgcmV0dXJuIHQuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gX19QUklWQVRFX25ld0RiRG9jdW1lbnRNdXRhdGlvblByZWZpeEZvclBhdGgodGhpcy51c2VySWQsIHQucGF0aCksIHMgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKGkpLCBvID0gX19QUklWQVRFX2RvY3VtZW50TXV0YXRpb25zU3RvcmUoZSkuZWUoe1xuICAgICAgICAgICAgICAgIHJhbmdlOiBzXG4gICAgICAgICAgICB9LCAoKGUsIHIsIGkpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBbcywgbywgX10gPSBlLCBhID0gX19QUklWQVRFX2RlY29kZVJlc291cmNlUGF0aChvKTtcbiAgICAgICAgICAgICAgICAvLyBPbmx5IGNvbnNpZGVyIHJvd3MgbWF0Y2hpbmcgZXhhY3RseSB0aGUgc3BlY2lmaWMga2V5IG9mXG4gICAgICAgICAgICAgICAgLy8gaW50ZXJlc3QuIE5vdGUgdGhhdCBiZWNhdXNlIHdlIG9yZGVyIGJ5IHBhdGggZmlyc3QsIGFuZCB3ZVxuICAgICAgICAgICAgICAgIC8vIG9yZGVyIHRlcm1pbmF0b3JzIGJlZm9yZSBwYXRoIHNlcGFyYXRvcnMsIHdlJ2xsIGVuY291bnRlciBhbGxcbiAgICAgICAgICAgICAgICAvLyB0aGUgaW5kZXggcm93cyBmb3IgZG9jdW1lbnRLZXkgY29udGlndW91c2x5LiBJbiBwYXJ0aWN1bGFyLCBhbGxcbiAgICAgICAgICAgICAgICAvLyB0aGUgcm93cyBmb3IgZG9jdW1lbnRLZXkgd2lsbCBvY2N1ciBiZWZvcmUgYW55IHJvd3MgZm9yXG4gICAgICAgICAgICAgICAgLy8gZG9jdW1lbnRzIG5lc3RlZCBpbiBhIHN1YmNvbGxlY3Rpb24gYmVuZWF0aCBkb2N1bWVudEtleSBzbyB3ZVxuICAgICAgICAgICAgICAgIC8vIGNhbiBzdG9wIGFzIHNvb24gYXMgd2UgaGl0IGFueSBzdWNoIHJvdy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9PT0gdGhpcy51c2VySWQgJiYgdC5wYXRoLmlzRXF1YWwoYSkgPyBuID0gbi5hZGQoXykgOiBpLmRvbmUoKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHIucHVzaChvKTtcbiAgICAgICAgfSkpLCBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihyKS5uZXh0KCgoKSA9PiB0aGlzLnJyKGUsIG4pKSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ1F1ZXJ5KGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHQucGF0aCwgciA9IG4ubGVuZ3RoICsgMSwgaSA9IF9fUFJJVkFURV9uZXdEYkRvY3VtZW50TXV0YXRpb25QcmVmaXhGb3JQYXRoKHRoaXMudXNlcklkLCBuKSwgcyA9IElEQktleVJhbmdlLmxvd2VyQm91bmQoaSk7XG4gICAgICAgIC8vIENvbGxlY3QgdXAgdW5pcXVlIGJhdGNoSURzIGVuY291bnRlcmVkIGR1cmluZyBhIHNjYW4gb2YgdGhlIGluZGV4LiBVc2UgYVxuICAgICAgICAvLyBTb3J0ZWRTZXQgdG8gYWNjdW11bGF0ZSBiYXRjaCBJRHMgc28gdGhleSBjYW4gYmUgdHJhdmVyc2VkIGluIG9yZGVyIGluIGFcbiAgICAgICAgLy8gc2NhbiBvZiB0aGUgbWFpbiB0YWJsZS5cbiAgICAgICAgbGV0IG8gPSBuZXcgU29ydGVkU2V0KF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9kb2N1bWVudE11dGF0aW9uc1N0b3JlKGUpLmVlKHtcbiAgICAgICAgICAgIHJhbmdlOiBzXG4gICAgICAgIH0sICgoZSwgdCwgaSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgW3MsIF8sIGFdID0gZSwgdSA9IF9fUFJJVkFURV9kZWNvZGVSZXNvdXJjZVBhdGgoXyk7XG4gICAgICAgICAgICBzID09PSB0aGlzLnVzZXJJZCAmJiBuLmlzUHJlZml4T2YodSkgPyBcbiAgICAgICAgICAgIC8vIFJvd3Mgd2l0aCBkb2N1bWVudCBrZXlzIG1vcmUgdGhhbiBvbmUgc2VnbWVudCBsb25nZXIgdGhhbiB0aGVcbiAgICAgICAgICAgIC8vIHF1ZXJ5IHBhdGggY2FuJ3QgYmUgbWF0Y2hlcy4gRm9yIGV4YW1wbGUsIGEgcXVlcnkgb24gJ3Jvb21zJ1xuICAgICAgICAgICAgLy8gY2FuJ3QgbWF0Y2ggdGhlIGRvY3VtZW50IC9yb29tcy9hYmMvbWVzc2FnZXMveHl4LlxuICAgICAgICAgICAgLy8gVE9ETyhtY2cpOiB3ZSdsbCBuZWVkIGEgZGlmZmVyZW50IHNjYW5uZXIgd2hlbiB3ZSBpbXBsZW1lbnRcbiAgICAgICAgICAgIC8vIGFuY2VzdG9yIHF1ZXJpZXMuXG4gICAgICAgICAgICB1Lmxlbmd0aCA9PT0gciAmJiAobyA9IG8uYWRkKGEpKSA6IGkuZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gdGhpcy5ycihlLCBvKSkpO1xuICAgIH1cbiAgICBycihlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBbXSwgciA9IFtdO1xuICAgICAgICAvLyBUT0RPKHJvY2t3b29kKTogSW1wbGVtZW50IHRoaXMgdXNpbmcgaXRlcmF0ZS5cbiAgICAgICAgcmV0dXJuIHQuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICByLnB1c2goX19QUklWQVRFX211dGF0aW9uc1N0b3JlKGUpLmdldCh0KS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gZSkgdGhyb3cgZmFpbCgzNTI3NCwge1xuICAgICAgICAgICAgICAgICAgICBiYXRjaElkOiB0XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQoZS51c2VySWQgPT09IHRoaXMudXNlcklkLCA5NzQ4LCBcIlVuZXhwZWN0ZWQgdXNlciBmb3IgbXV0YXRpb24gYmF0Y2hcIiwge1xuICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IGUudXNlcklkLFxuICAgICAgICAgICAgICAgICAgICBiYXRjaElkOiB0XG4gICAgICAgICAgICAgICAgfSksIG4ucHVzaChfX1BSSVZBVEVfZnJvbURiTXV0YXRpb25CYXRjaCh0aGlzLnNlcmlhbGl6ZXIsIGUpKTtcbiAgICAgICAgICAgIH0pKSk7XG4gICAgICAgIH0pKSwgUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IocikubmV4dCgoKCkgPT4gbikpO1xuICAgIH1cbiAgICByZW1vdmVNdXRhdGlvbkJhdGNoKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHJlbW92ZU11dGF0aW9uQmF0Y2goZS5sZSwgdGhpcy51c2VySWQsIHQpLm5leHQoKG4gPT4gKGUuYWRkT25Db21taXR0ZWRMaXN0ZW5lcigoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5pcih0LmJhdGNoSWQpO1xuICAgICAgICB9KSksIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKG4sICh0ID0+IHRoaXMucmVmZXJlbmNlRGVsZWdhdGUubWFya1BvdGVudGlhbGx5T3JwaGFuZWQoZSwgdCkpKSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xlYXJzIHRoZSBjYWNoZWQga2V5cyBmb3IgYSBtdXRhdGlvbiBiYXRjaC4gVGhpcyBtZXRob2Qgc2hvdWxkIGJlXG4gICAgICogY2FsbGVkIGJ5IHNlY29uZGFyeSBjbGllbnRzIGFmdGVyIHRoZXkgcHJvY2VzcyBtdXRhdGlvbiB1cGRhdGVzLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IHRoaXMgbWV0aG9kIGRvZXMgbm90IGhhdmUgdG8gYmUgY2FsbGVkIGZyb20gcHJpbWFyeSBjbGllbnRzIGFzXG4gICAgICogdGhlIGNvcnJlc3BvbmRpbmcgY2FjaGUgZW50cmllcyBhcmUgY2xlYXJlZCB3aGVuIGFuIGFja25vd2xlZGdlZCBvclxuICAgICAqIHJlamVjdGVkIGJhdGNoIGlzIHJlbW92ZWQgZnJvbSB0aGUgbXV0YXRpb24gcXVldWUuXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seVxuICAgIGlyKGUpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuWG5bZV07XG4gICAgfVxuICAgIHBlcmZvcm1Db25zaXN0ZW5jeUNoZWNrKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hlY2tFbXB0eShlKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGlmICghdCkgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICAvLyBWZXJpZnkgdGhhdCB0aGVyZSBhcmUgbm8gZW50cmllcyBpbiB0aGUgZG9jdW1lbnRNdXRhdGlvbnMgaW5kZXggaWZcbiAgICAgICAgICAgIC8vIHRoZSBxdWV1ZSBpcyBlbXB0eS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKFxuICAgICAgICAgICAgLyoqXG4gKiBDcmVhdGVzIGEgW3VzZXJJZF0ga2V5IGZvciB1c2UgaW4gdGhlIERiRG9jdW1lbnRNdXRhdGlvbnMgaW5kZXggdG8gaXRlcmF0ZVxuICogb3ZlciBhbGwgb2YgYSB1c2VyJ3MgZG9jdW1lbnQgbXV0YXRpb25zLlxuICovXG4gICAgICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3RGJEb2N1bWVudE11dGF0aW9uUHJlZml4Rm9yVXNlcihlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsgZSBdO1xuICAgICAgICAgICAgfSh0aGlzLnVzZXJJZCkpLCByID0gW107XG4gICAgICAgICAgICByZXR1cm4gX19QUklWQVRFX2RvY3VtZW50TXV0YXRpb25zU3RvcmUoZSkuZWUoe1xuICAgICAgICAgICAgICAgIHJhbmdlOiBuXG4gICAgICAgICAgICB9LCAoKGUsIHQsIG4pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZVswXSA9PT0gdGhpcy51c2VySWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9kZWNvZGVSZXNvdXJjZVBhdGgoZVsxXSk7XG4gICAgICAgICAgICAgICAgICAgIHIucHVzaCh0KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Ugbi5kb25lKCk7XG4gICAgICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KDAgPT09IHIubGVuZ3RoLCA1NjcyMCwge1xuICAgICAgICAgICAgICAgICAgICBzcjogci5tYXAoKGUgPT4gZS5jYW5vbmljYWxTdHJpbmcoKSkpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgY29udGFpbnNLZXkoZSwgdCkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX211dGF0aW9uUXVldWVDb250YWluc0tleShlLCB0aGlzLnVzZXJJZCwgdCk7XG4gICAgfVxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkgKHN0YXRlIGlzIGhlbGQgaW4gbWVtb3J5IGluIG90aGVyIGNsaWVudHMpLlxuICAgIC8qKiBSZXR1cm5zIHRoZSBtdXRhdGlvbiBxdWV1ZSdzIG1ldGFkYXRhIGZyb20gSW5kZXhlZERiLiAqL1xuICAgIF9yKGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9tdXRhdGlvblF1ZXVlc1N0b3JlKGUpLmdldCh0aGlzLnVzZXJJZCkubmV4dCgoZSA9PiBlIHx8IHtcbiAgICAgICAgICAgIHVzZXJJZDogdGhpcy51c2VySWQsXG4gICAgICAgICAgICBsYXN0QWNrbm93bGVkZ2VkQmF0Y2hJZDogaixcbiAgICAgICAgICAgIGxhc3RTdHJlYW1Ub2tlbjogXCJcIlxuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEByZXR1cm5zIHRydWUgaWYgdGhlIG11dGF0aW9uIHF1ZXVlIGZvciB0aGUgZ2l2ZW4gdXNlciBjb250YWlucyBhIHBlbmRpbmdcbiAqICAgICAgICAgbXV0YXRpb24gZm9yIHRoZSBnaXZlbiBrZXkuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX211dGF0aW9uUXVldWVDb250YWluc0tleShlLCB0LCBuKSB7XG4gICAgY29uc3QgciA9IF9fUFJJVkFURV9uZXdEYkRvY3VtZW50TXV0YXRpb25QcmVmaXhGb3JQYXRoKHQsIG4ucGF0aCksIGkgPSByWzFdLCBzID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChyKTtcbiAgICBsZXQgbyA9ICExO1xuICAgIHJldHVybiBfX1BSSVZBVEVfZG9jdW1lbnRNdXRhdGlvbnNTdG9yZShlKS5lZSh7XG4gICAgICAgIHJhbmdlOiBzLFxuICAgICAgICBYOiAhMFxuICAgIH0sICgoZSwgbiwgcikgPT4ge1xuICAgICAgICBjb25zdCBbcywgXywgLypiYXRjaElEKi8gYV0gPSBlO1xuICAgICAgICBzID09PSB0ICYmIF8gPT09IGkgJiYgKG8gPSAhMCksIHIuZG9uZSgpO1xuICAgIH0pKS5uZXh0KCgoKSA9PiBvKSk7XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgYW55IG11dGF0aW9uIHF1ZXVlIGNvbnRhaW5zIHRoZSBnaXZlbiBkb2N1bWVudC4gKi9cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBtdXRhdGlvbnMgb2JqZWN0IHN0b3JlLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfbXV0YXRpb25zU3RvcmUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZ2V0U3RvcmUoZSwgdGUpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgbXV0YXRpb25RdWV1ZXMgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9kb2N1bWVudE11dGF0aW9uc1N0b3JlKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2dldFN0b3JlKGUsIG9lKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIG11dGF0aW9uUXVldWVzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfbXV0YXRpb25RdWV1ZXNTdG9yZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9nZXRTdG9yZShlLCBYKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBPZmZzZXQgdG8gZW5zdXJlIG5vbi1vdmVybGFwcGluZyB0YXJnZXQgaWRzLiAqL1xuLyoqXG4gKiBHZW5lcmF0ZXMgbW9ub3RvbmljYWxseSBpbmNyZWFzaW5nIHRhcmdldCBJRHMgZm9yIHNlbmRpbmcgdGFyZ2V0cyB0byB0aGVcbiAqIHdhdGNoIHN0cmVhbS5cbiAqXG4gKiBUaGUgY2xpZW50IGNvbnN0cnVjdHMgdHdvIGdlbmVyYXRvcnMsIG9uZSBmb3IgdGhlIHRhcmdldCBjYWNoZSwgYW5kIG9uZSBmb3JcbiAqIGZvciB0aGUgc3luYyBlbmdpbmUgKHRvIGdlbmVyYXRlIGxpbWJvIGRvY3VtZW50cyB0YXJnZXRzKS4gVGhlc2VcbiAqIGdlbmVyYXRvcnMgcHJvZHVjZSBub24tb3ZlcmxhcHBpbmcgSURzIChieSB1c2luZyBldmVuIGFuZCBvZGQgSURzXG4gKiByZXNwZWN0aXZlbHkpLlxuICpcbiAqIEJ5IHNlcGFyYXRpbmcgdGhlIHRhcmdldCBJRCBzcGFjZSwgdGhlIHF1ZXJ5IGNhY2hlIGNhbiBnZW5lcmF0ZSB0YXJnZXQgSURzXG4gKiB0aGF0IHBlcnNpc3QgYWNyb3NzIGNsaWVudCByZXN0YXJ0cywgd2hpbGUgc3luYyBlbmdpbmUgY2FuIGluZGVwZW5kZW50bHlcbiAqIGdlbmVyYXRlIGluLW1lbW9yeSB0YXJnZXQgSURzIHRoYXQgYXJlIHRyYW5zaWVudCBhbmQgY2FuIGJlIHJldXNlZCBhZnRlciBhXG4gKiByZXN0YXJ0LlxuICovXG5jbGFzcyBfX1BSSVZBVEVfVGFyZ2V0SWRHZW5lcmF0b3Ige1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5hciA9IGU7XG4gICAgfVxuICAgIG5leHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFyICs9IDIsIHRoaXMuYXI7XG4gICAgfVxuICAgIHN0YXRpYyB1cigpIHtcbiAgICAgICAgLy8gVGhlIHRhcmdldCBjYWNoZSBnZW5lcmF0b3IgbXVzdCByZXR1cm4gJzInIGluIGl0cyBmaXJzdCBjYWxsIHRvIGBuZXh0KClgXG4gICAgICAgIC8vIGFzIHRoZXJlIGlzIG5vIGRpZmZlcmVudGlhdGlvbiBpbiB0aGUgcHJvdG9jb2wgbGF5ZXIgYmV0d2VlbiBhbiB1bnNldFxuICAgICAgICAvLyBudW1iZXIgYW5kIHRoZSBudW1iZXIgJzAnLiBJZiB3ZSB3ZXJlIHRvIHNlbnQgYSB0YXJnZXQgd2l0aCB0YXJnZXQgSURcbiAgICAgICAgLy8gJzAnLCB0aGUgYmFja2VuZCB3b3VsZCBjb25zaWRlciBpdCB1bnNldCBhbmQgcmVwbGFjZSBpdCB3aXRoIGl0cyBvd24gSUQuXG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1RhcmdldElkR2VuZXJhdG9yKDApO1xuICAgIH1cbiAgICBzdGF0aWMgY3IoKSB7XG4gICAgICAgIC8vIFN5bmMgZW5naW5lIGFzc2lnbnMgdGFyZ2V0IElEcyBmb3IgbGltYm8gZG9jdW1lbnQgZGV0ZWN0aW9uLlxuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9UYXJnZXRJZEdlbmVyYXRvcigtMSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfSW5kZXhlZERiVGFyZ2V0Q2FjaGUge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSA9IGUsIHRoaXMuc2VyaWFsaXplciA9IHQ7XG4gICAgfVxuICAgIC8vIFBPUlRJTkcgTk9URTogV2UgZG9uJ3QgY2FjaGUgZ2xvYmFsIG1ldGFkYXRhIGZvciB0aGUgdGFyZ2V0IGNhY2hlLCBzaW5jZVxuICAgIC8vIHNvbWUgb2YgaXQgKGluIHBhcnRpY3VsYXIgYGhpZ2hlc3RUYXJnZXRJZGApIGNhbiBiZSBtb2RpZmllZCBieSBzZWNvbmRhcnlcbiAgICAvLyB0YWJzLiBXZSBjb3VsZCBwZXJoYXBzIGJlIG1vcmUgZ3JhbnVsYXIgKGFuZCBlLmcuIHN0aWxsIGNhY2hlXG4gICAgLy8gYGxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb25gIGluIG1lbW9yeSkgYnV0IGZvciBzaW1wbGljaXR5IHdlIGN1cnJlbnRseSBnb1xuICAgIC8vIHRvIEluZGV4ZWREYiB3aGVuZXZlciB3ZSBuZWVkIHRvIHJlYWQgbWV0YWRhdGEuIFdlIGNhbiByZXZpc2l0IGlmIGl0IHR1cm5zXG4gICAgLy8gb3V0IHRvIGhhdmUgYSBtZWFuaW5nZnVsIHBlcmZvcm1hbmNlIGltcGFjdC5cbiAgICBhbGxvY2F0ZVRhcmdldElkKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubHIoZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gbmV3IF9fUFJJVkFURV9UYXJnZXRJZEdlbmVyYXRvcih0LmhpZ2hlc3RUYXJnZXRJZCk7XG4gICAgICAgICAgICByZXR1cm4gdC5oaWdoZXN0VGFyZ2V0SWQgPSBuLm5leHQoKSwgdGhpcy5ocihlLCB0KS5uZXh0KCgoKSA9PiB0LmhpZ2hlc3RUYXJnZXRJZCkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24oZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5scihlKS5uZXh0KChlID0+IFNuYXBzaG90VmVyc2lvbi5mcm9tVGltZXN0YW1wKG5ldyBUaW1lc3RhbXAoZS5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uLnNlY29uZHMsIGUubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbi5uYW5vc2Vjb25kcykpKSk7XG4gICAgfVxuICAgIGdldEhpZ2hlc3RTZXF1ZW5jZU51bWJlcihlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxyKGUpLm5leHQoKGUgPT4gZS5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIpKTtcbiAgICB9XG4gICAgc2V0VGFyZ2V0c01ldGFkYXRhKGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubHIoZSkubmV4dCgociA9PiAoci5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgPSB0LCBuICYmIChyLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24gPSBuLnRvVGltZXN0YW1wKCkpLCBcbiAgICAgICAgdCA+IHIuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyICYmIChyLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciA9IHQpLCB0aGlzLmhyKGUsIHIpKSkpO1xuICAgIH1cbiAgICBhZGRUYXJnZXREYXRhKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuUHIoZSwgdCkubmV4dCgoKCkgPT4gdGhpcy5scihlKS5uZXh0KChuID0+IChuLnRhcmdldENvdW50ICs9IDEsIHRoaXMuVHIodCwgbiksIFxuICAgICAgICB0aGlzLmhyKGUsIG4pKSkpKSk7XG4gICAgfVxuICAgIHVwZGF0ZVRhcmdldERhdGEoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5QcihlLCB0KTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0RGF0YShlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKGUsIHQudGFyZ2V0SWQpLm5leHQoKCgpID0+IF9fUFJJVkFURV90YXJnZXRzU3RvcmUoZSkuZGVsZXRlKHQudGFyZ2V0SWQpKSkubmV4dCgoKCkgPT4gdGhpcy5scihlKSkpLm5leHQoKHQgPT4gKF9fUFJJVkFURV9oYXJkQXNzZXJ0KHQudGFyZ2V0Q291bnQgPiAwLCA4MDY1KSwgXG4gICAgICAgIHQudGFyZ2V0Q291bnQgLT0gMSwgdGhpcy5ocihlLCB0KSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRHJvcHMgYW55IHRhcmdldHMgd2l0aCBzZXF1ZW5jZSBudW1iZXIgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIHRoZSB1cHBlciBib3VuZCwgZXhjZXB0aW5nIHRob3NlXG4gICAgICogcHJlc2VudCBpbiBgYWN0aXZlVGFyZ2V0SWRzYC4gRG9jdW1lbnQgYXNzb2NpYXRpb25zIGZvciB0aGUgcmVtb3ZlZCB0YXJnZXRzIGFyZSBhbHNvIHJlbW92ZWQuXG4gICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIHRhcmdldHMgcmVtb3ZlZC5cbiAgICAgKi8gICAgcmVtb3ZlVGFyZ2V0cyhlLCB0LCBuKSB7XG4gICAgICAgIGxldCByID0gMDtcbiAgICAgICAgY29uc3QgaSA9IFtdO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3RhcmdldHNTdG9yZShlKS5lZSgoKHMsIG8pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IF8gPSBfX1BSSVZBVEVfZnJvbURiVGFyZ2V0KG8pO1xuICAgICAgICAgICAgXy5zZXF1ZW5jZU51bWJlciA8PSB0ICYmIG51bGwgPT09IG4uZ2V0KF8udGFyZ2V0SWQpICYmIChyKyssIGkucHVzaCh0aGlzLnJlbW92ZVRhcmdldERhdGEoZSwgXykpKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKGkpKSkubmV4dCgoKCkgPT4gcikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsIHByb3ZpZGVkIGZ1bmN0aW9uIHdpdGggZWFjaCBgVGFyZ2V0RGF0YWAgdGhhdCB3ZSBoYXZlIGNhY2hlZC5cbiAgICAgKi8gICAgZm9yRWFjaFRhcmdldChlLCB0KSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfdGFyZ2V0c1N0b3JlKGUpLmVlKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9mcm9tRGJUYXJnZXQobik7XG4gICAgICAgICAgICB0KHIpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGxyKGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9nbG9iYWxUYXJnZXRTdG9yZShlKS5nZXQoZmUpLm5leHQoKGUgPT4gKF9fUFJJVkFURV9oYXJkQXNzZXJ0KG51bGwgIT09IGUsIDI4ODgpLCBcbiAgICAgICAgZSkpKTtcbiAgICB9XG4gICAgaHIoZSwgdCkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2dsb2JhbFRhcmdldFN0b3JlKGUpLnB1dChmZSwgdCk7XG4gICAgfVxuICAgIFByKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV90YXJnZXRzU3RvcmUoZSkucHV0KF9fUFJJVkFURV90b0RiVGFyZ2V0KHRoaXMuc2VyaWFsaXplciwgdCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbi1wbGFjZSB1cGRhdGVzIHRoZSBwcm92aWRlZCBtZXRhZGF0YSB0byBhY2NvdW50IGZvciB2YWx1ZXMgaW4gdGhlIGdpdmVuXG4gICAgICogVGFyZ2V0RGF0YS4gU2F2aW5nIGlzIGRvbmUgc2VwYXJhdGVseS4gUmV0dXJucyB0cnVlIGlmIHRoZXJlIHdlcmUgYW55XG4gICAgICogY2hhbmdlcyB0byB0aGUgbWV0YWRhdGEuXG4gICAgICovICAgIFRyKGUsIHQpIHtcbiAgICAgICAgbGV0IG4gPSAhMTtcbiAgICAgICAgcmV0dXJuIGUudGFyZ2V0SWQgPiB0LmhpZ2hlc3RUYXJnZXRJZCAmJiAodC5oaWdoZXN0VGFyZ2V0SWQgPSBlLnRhcmdldElkLCBuID0gITApLCBcbiAgICAgICAgZS5zZXF1ZW5jZU51bWJlciA+IHQuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyICYmICh0LmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciA9IGUuc2VxdWVuY2VOdW1iZXIsIFxuICAgICAgICBuID0gITApLCBuO1xuICAgIH1cbiAgICBnZXRUYXJnZXRDb3VudChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxyKGUpLm5leHQoKGUgPT4gZS50YXJnZXRDb3VudCkpO1xuICAgIH1cbiAgICBnZXRUYXJnZXREYXRhKGUsIHQpIHtcbiAgICAgICAgLy8gSXRlcmF0aW5nIGJ5IHRoZSBjYW5vbmljYWxJZCBtYXkgeWllbGQgbW9yZSB0aGFuIG9uZSByZXN1bHQgYmVjYXVzZVxuICAgICAgICAvLyBjYW5vbmljYWxJZCB2YWx1ZXMgYXJlIG5vdCByZXF1aXJlZCB0byBiZSB1bmlxdWUgcGVyIHRhcmdldC4gVGhpcyBxdWVyeVxuICAgICAgICAvLyBkZXBlbmRzIG9uIHRoZSBxdWVyeVRhcmdldHMgaW5kZXggdG8gYmUgZWZmaWNpZW50LlxuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2Nhbm9uaWZ5VGFyZ2V0KHQpLCByID0gSURCS2V5UmFuZ2UuYm91bmQoWyBuLCBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFkgXSwgWyBuLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgXSk7XG4gICAgICAgIGxldCBpID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV90YXJnZXRzU3RvcmUoZSkuZWUoe1xuICAgICAgICAgICAgcmFuZ2U6IHIsXG4gICAgICAgICAgICBpbmRleDogRWVcbiAgICAgICAgfSwgKChlLCBuLCByKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gX19QUklWQVRFX2Zyb21EYlRhcmdldChuKTtcbiAgICAgICAgICAgIC8vIEFmdGVyIGZpbmRpbmcgYSBwb3RlbnRpYWwgbWF0Y2gsIGNoZWNrIHRoYXQgdGhlIHRhcmdldCBpc1xuICAgICAgICAgICAgLy8gYWN0dWFsbHkgZXF1YWwgdG8gdGhlIHJlcXVlc3RlZCB0YXJnZXQuXG4gICAgICAgICAgICAgICAgICAgICAgICBfX1BSSVZBVEVfdGFyZ2V0RXF1YWxzKHQsIHMudGFyZ2V0KSAmJiAoaSA9IHMsIHIuZG9uZSgpKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgYWRkTWF0Y2hpbmdLZXlzKGUsIHQsIG4pIHtcbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBUaGUgcmV2ZXJzZSBpbmRleCAoZG9jdW1lbnRzVGFyZ2V0cykgaXMgbWFpbnRhaW5lZCBieVxuICAgICAgICAvLyBJbmRleGVkRGIuXG4gICAgICAgIGNvbnN0IHIgPSBbXSwgaSA9IF9fUFJJVkFURV9kb2N1bWVudFRhcmdldFN0b3JlKGUpO1xuICAgICAgICByZXR1cm4gdC5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBfX1BSSVZBVEVfZW5jb2RlUmVzb3VyY2VQYXRoKHQucGF0aCk7XG4gICAgICAgICAgICByLnB1c2goaS5wdXQoe1xuICAgICAgICAgICAgICAgIHRhcmdldElkOiBuLFxuICAgICAgICAgICAgICAgIHBhdGg6IHNcbiAgICAgICAgICAgIH0pKSwgci5wdXNoKHRoaXMucmVmZXJlbmNlRGVsZWdhdGUuYWRkUmVmZXJlbmNlKGUsIG4sIHQpKTtcbiAgICAgICAgfSkpLCBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihyKTtcbiAgICB9XG4gICAgcmVtb3ZlTWF0Y2hpbmdLZXlzKGUsIHQsIG4pIHtcbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBUaGUgcmV2ZXJzZSBpbmRleCAoZG9jdW1lbnRzVGFyZ2V0cykgaXMgbWFpbnRhaW5lZCBieVxuICAgICAgICAvLyBJbmRleGVkRGIuXG4gICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfZG9jdW1lbnRUYXJnZXRTdG9yZShlKTtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHQsICh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBfX1BSSVZBVEVfZW5jb2RlUmVzb3VyY2VQYXRoKHQucGF0aCk7XG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IoWyByLmRlbGV0ZShbIG4sIGkgXSksIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUucmVtb3ZlUmVmZXJlbmNlKGUsIG4sIHQpIF0pO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9kb2N1bWVudFRhcmdldFN0b3JlKGUpLCByID0gSURCS2V5UmFuZ2UuYm91bmQoWyB0IF0sIFsgdCArIDEgXSwgXG4gICAgICAgIC8qbG93ZXJPcGVuPSovICExLCBcbiAgICAgICAgLyp1cHBlck9wZW49Ki8gITApO1xuICAgICAgICByZXR1cm4gbi5kZWxldGUocik7XG4gICAgfVxuICAgIGdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IElEQktleVJhbmdlLmJvdW5kKFsgdCBdLCBbIHQgKyAxIF0sIFxuICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMSwgXG4gICAgICAgIC8qdXBwZXJPcGVuPSovICEwKSwgciA9IF9fUFJJVkFURV9kb2N1bWVudFRhcmdldFN0b3JlKGUpO1xuICAgICAgICBsZXQgaSA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpO1xuICAgICAgICByZXR1cm4gci5lZSh7XG4gICAgICAgICAgICByYW5nZTogbixcbiAgICAgICAgICAgIFg6ICEwXG4gICAgICAgIH0sICgoZSwgdCwgbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9kZWNvZGVSZXNvdXJjZVBhdGgoZVsxXSksIHMgPSBuZXcgRG9jdW1lbnRLZXkocik7XG4gICAgICAgICAgICBpID0gaS5hZGQocyk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpKSk7XG4gICAgfVxuICAgIGNvbnRhaW5zS2V5KGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9lbmNvZGVSZXNvdXJjZVBhdGgodC5wYXRoKSwgciA9IElEQktleVJhbmdlLmJvdW5kKFsgbiBdLCBbIF9fUFJJVkFURV9pbW1lZGlhdGVTdWNjZXNzb3IobikgXSwgXG4gICAgICAgIC8qbG93ZXJPcGVuPSovICExLCBcbiAgICAgICAgLyp1cHBlck9wZW49Ki8gITApO1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfZG9jdW1lbnRUYXJnZXRTdG9yZShlKS5lZSh7XG4gICAgICAgICAgICBpbmRleDogVmUsXG4gICAgICAgICAgICBYOiAhMCxcbiAgICAgICAgICAgIHJhbmdlOiByXG4gICAgICAgIH0sICgoW2UsIHRdLCBuLCByKSA9PiB7XG4gICAgICAgICAgICAvLyBIYXZpbmcgYSBzZW50aW5lbCByb3cgZm9yIGEgZG9jdW1lbnQgZG9lcyBub3QgY291bnQgYXMgY29udGFpbmluZyB0aGF0IGRvY3VtZW50O1xuICAgICAgICAgICAgLy8gRm9yIHRoZSB0YXJnZXQgY2FjaGUsIGNvbnRhaW5pbmcgdGhlIGRvY3VtZW50IG1lYW5zIHRoZSBkb2N1bWVudCBpcyBwYXJ0IG9mIHNvbWVcbiAgICAgICAgICAgIC8vIHRhcmdldC5cbiAgICAgICAgICAgIDAgIT09IGUgJiYgKGkrKywgci5kb25lKCkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSA+IDApKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9va3MgdXAgYSBUYXJnZXREYXRhIGVudHJ5IGJ5IHRhcmdldCBJRC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0YXJnZXRJZCAtIFRoZSB0YXJnZXQgSUQgb2YgdGhlIFRhcmdldERhdGEgZW50cnkgdG8gbG9vayB1cC5cbiAgICAgKiBAcmV0dXJucyBUaGUgY2FjaGVkIFRhcmdldERhdGEgZW50cnksIG9yIG51bGwgaWYgdGhlIGNhY2hlIGhhcyBubyBlbnRyeSBmb3JcbiAgICAgKiB0aGUgdGFyZ2V0LlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXG4gICAgQXQoZSwgdCkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3RhcmdldHNTdG9yZShlKS5nZXQodCkubmV4dCgoZSA9PiBlID8gX19QUklWQVRFX2Zyb21EYlRhcmdldChlKSA6IG51bGwpKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBxdWVyaWVzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfdGFyZ2V0c1N0b3JlKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2dldFN0b3JlKGUsIEllKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIHRhcmdldCBnbG9iYWxzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZ2xvYmFsVGFyZ2V0U3RvcmUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZ2V0U3RvcmUoZSwgZ2UpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgZG9jdW1lbnQgdGFyZ2V0IG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZG9jdW1lbnRUYXJnZXRTdG9yZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9nZXRTdG9yZShlLCBBZSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IE50ID0gXCJMcnVHYXJiYWdlQ29sbGVjdG9yXCIsIEJ0ID0gMTA0ODU3NjtcblxuZnVuY3Rpb24gX19QUklWQVRFX2J1ZmZlckVudHJ5Q29tcGFyYXRvcihbZSwgdF0sIFtuLCByXSkge1xuICAgIGNvbnN0IGkgPSBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihlLCBuKTtcbiAgICByZXR1cm4gMCA9PT0gaSA/IF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKHQsIHIpIDogaTtcbn1cblxuLyoqXG4gKiBVc2VkIHRvIGNhbGN1bGF0ZSB0aGUgbnRoIHNlcXVlbmNlIG51bWJlci4gS2VlcHMgYSByb2xsaW5nIGJ1ZmZlciBvZiB0aGVcbiAqIGxvd2VzdCBuIHZhbHVlcyBwYXNzZWQgdG8gYGFkZEVsZW1lbnRgLCBhbmQgZmluYWxseSByZXBvcnRzIHRoZSBsYXJnZXN0IG9mXG4gKiB0aGVtIGluIGBtYXhWYWx1ZWAuXG4gKi8gY2xhc3MgX19QUklWQVRFX1JvbGxpbmdTZXF1ZW5jZU51bWJlckJ1ZmZlciB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLklyID0gZSwgdGhpcy5idWZmZXIgPSBuZXcgU29ydGVkU2V0KF9fUFJJVkFURV9idWZmZXJFbnRyeUNvbXBhcmF0b3IpLCB0aGlzLkVyID0gMDtcbiAgICB9XG4gICAgZHIoKSB7XG4gICAgICAgIHJldHVybiArK3RoaXMuRXI7XG4gICAgfVxuICAgIEFyKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IFsgZSwgdGhpcy5kcigpIF07XG4gICAgICAgIGlmICh0aGlzLmJ1ZmZlci5zaXplIDwgdGhpcy5JcikgdGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5hZGQodCk7IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuYnVmZmVyLmxhc3QoKTtcbiAgICAgICAgICAgIF9fUFJJVkFURV9idWZmZXJFbnRyeUNvbXBhcmF0b3IodCwgZSkgPCAwICYmICh0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLmRlbGV0ZShlKS5hZGQodCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBtYXhWYWx1ZSgpIHtcbiAgICAgICAgLy8gR3VhcmFudGVlZCB0byBiZSBub24tZW1wdHkuIElmIHdlIGRlY2lkZSB3ZSBhcmUgbm90IGNvbGxlY3RpbmcgYW55XG4gICAgICAgIC8vIHNlcXVlbmNlIG51bWJlcnMsIG50aFNlcXVlbmNlTnVtYmVyIGJlbG93IHNob3J0LWNpcmN1aXRzLiBJZiB3ZSBoYXZlXG4gICAgICAgIC8vIGRlY2lkZWQgdGhhdCB3ZSBhcmUgY29sbGVjdGluZyBuIHNlcXVlbmNlIG51bWJlcnMsIGl0J3MgYmVjYXVzZSBuIGlzIHNvbWVcbiAgICAgICAgLy8gcGVyY2VudGFnZSBvZiB0aGUgZXhpc3Rpbmcgc2VxdWVuY2UgbnVtYmVycy4gVGhhdCBtZWFucyB3ZSBzaG91bGQgbmV2ZXJcbiAgICAgICAgLy8gYmUgaW4gYSBzaXR1YXRpb24gd2hlcmUgd2UgYXJlIGNvbGxlY3Rpbmcgc2VxdWVuY2UgbnVtYmVycyBidXQgZG9uJ3RcbiAgICAgICAgLy8gYWN0dWFsbHkgaGF2ZSBhbnkuXG4gICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlci5sYXN0KClbMF07XG4gICAgfVxufVxuXG4vKipcbiAqIFRoaXMgY2xhc3MgaXMgcmVzcG9uc2libGUgZm9yIHRoZSBzY2hlZHVsaW5nIG9mIExSVSBnYXJiYWdlIGNvbGxlY3Rpb24uIEl0IGhhbmRsZXMgY2hlY2tpbmdcbiAqIHdoZXRoZXIgb3Igbm90IEdDIGlzIGVuYWJsZWQsIGFzIHdlbGwgYXMgd2hpY2ggZGVsYXkgdG8gdXNlIGJlZm9yZSB0aGUgbmV4dCBydW4uXG4gKi8gY2xhc3MgX19QUklWQVRFX0xydVNjaGVkdWxlciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbikge1xuICAgICAgICB0aGlzLmdhcmJhZ2VDb2xsZWN0b3IgPSBlLCB0aGlzLmFzeW5jUXVldWUgPSB0LCB0aGlzLmxvY2FsU3RvcmUgPSBuLCB0aGlzLlJyID0gbnVsbDtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIC0xICE9PSB0aGlzLmdhcmJhZ2VDb2xsZWN0b3IucGFyYW1zLmNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQgJiYgdGhpcy5Wcig2ZTQpO1xuICAgIH1cbiAgICBzdG9wKCkge1xuICAgICAgICB0aGlzLlJyICYmICh0aGlzLlJyLmNhbmNlbCgpLCB0aGlzLlJyID0gbnVsbCk7XG4gICAgfVxuICAgIGdldCBzdGFydGVkKCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdGhpcy5ScjtcbiAgICB9XG4gICAgVnIoZSkge1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoTnQsIGBHYXJiYWdlIGNvbGxlY3Rpb24gc2NoZWR1bGVkIGluICR7ZX1tc2ApLCB0aGlzLlJyID0gdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBZnRlckRlbGF5KFwibHJ1X2dhcmJhZ2VfY29sbGVjdGlvblwiIC8qIFRpbWVySWQuTHJ1R2FyYmFnZUNvbGxlY3Rpb24gKi8gLCBlLCAoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5SciA9IG51bGw7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMubG9jYWxTdG9yZS5jb2xsZWN0R2FyYmFnZSh0aGlzLmdhcmJhZ2VDb2xsZWN0b3IpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9pc0luZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IoZSkgPyBfX1BSSVZBVEVfbG9nRGVidWcoTnQsIFwiSWdub3JpbmcgSW5kZXhlZERCIGVycm9yIGR1cmluZyBnYXJiYWdlIGNvbGxlY3Rpb246IFwiLCBlKSA6IGF3YWl0IF9fUFJJVkFURV9pZ25vcmVJZlByaW1hcnlMZWFzZUxvc3MoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCB0aGlzLlZyKDNlNSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbi8qKlxuICogSW1wbGVtZW50cyB0aGUgc3RlcHMgZm9yIExSVSBnYXJiYWdlIGNvbGxlY3Rpb24uXG4gKi8gY2xhc3MgX19QUklWQVRFX0xydUdhcmJhZ2VDb2xsZWN0b3JJbXBsIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMubXIgPSBlLCB0aGlzLnBhcmFtcyA9IHQ7XG4gICAgfVxuICAgIGNhbGN1bGF0ZVRhcmdldENvdW50KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubXIuZ3IoZSkubmV4dCgoZSA9PiBNYXRoLmZsb29yKHQgLyAxMDAgKiBlKSkpO1xuICAgIH1cbiAgICBudGhTZXF1ZW5jZU51bWJlcihlLCB0KSB7XG4gICAgICAgIGlmICgwID09PSB0KSByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoX19QUklWQVRFX0xpc3RlblNlcXVlbmNlLmNlKTtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBfX1BSSVZBVEVfUm9sbGluZ1NlcXVlbmNlTnVtYmVyQnVmZmVyKHQpO1xuICAgICAgICByZXR1cm4gdGhpcy5tci5mb3JFYWNoVGFyZ2V0KGUsIChlID0+IG4uQXIoZS5zZXF1ZW5jZU51bWJlcikpKS5uZXh0KCgoKSA9PiB0aGlzLm1yLnByKGUsIChlID0+IG4uQXIoZSkpKSkpLm5leHQoKCgpID0+IG4ubWF4VmFsdWUpKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0cyhlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1yLnJlbW92ZVRhcmdldHMoZSwgdCwgbik7XG4gICAgfVxuICAgIHJlbW92ZU9ycGhhbmVkRG9jdW1lbnRzKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubXIucmVtb3ZlT3JwaGFuZWREb2N1bWVudHMoZSwgdCk7XG4gICAgfVxuICAgIGNvbGxlY3QoZSwgdCkge1xuICAgICAgICByZXR1cm4gLTEgPT09IHRoaXMucGFyYW1zLmNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQgPyAoX19QUklWQVRFX2xvZ0RlYnVnKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLCBcIkdhcmJhZ2UgY29sbGVjdGlvbiBza2lwcGVkOyBkaXNhYmxlZFwiKSwgXG4gICAgICAgIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHh0KSkgOiB0aGlzLmdldENhY2hlU2l6ZShlKS5uZXh0KChuID0+IG4gPCB0aGlzLnBhcmFtcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkID8gKF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkxydUdhcmJhZ2VDb2xsZWN0b3JcIiwgYEdhcmJhZ2UgY29sbGVjdGlvbiBza2lwcGVkOyBDYWNoZSBzaXplICR7bn0gaXMgbG93ZXIgdGhhbiB0aHJlc2hvbGQgJHt0aGlzLnBhcmFtcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkfWApLCBcbiAgICAgICAgeHQpIDogdGhpcy55cihlLCB0KSkpO1xuICAgIH1cbiAgICBnZXRDYWNoZVNpemUoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5tci5nZXRDYWNoZVNpemUoZSk7XG4gICAgfVxuICAgIHlyKGUsIHQpIHtcbiAgICAgICAgbGV0IG4sIHIsIGksIHMsIG8sIF8sIHU7XG4gICAgICAgIGNvbnN0IGMgPSBEYXRlLm5vdygpO1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxjdWxhdGVUYXJnZXRDb3VudChlLCB0aGlzLnBhcmFtcy5wZXJjZW50aWxlVG9Db2xsZWN0KS5uZXh0KCh0ID0+IChcbiAgICAgICAgLy8gQ2FwIGF0IHRoZSBjb25maWd1cmVkIG1heFxuICAgICAgICB0ID4gdGhpcy5wYXJhbXMubWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCA/IChfX1BSSVZBVEVfbG9nRGVidWcoXCJMcnVHYXJiYWdlQ29sbGVjdG9yXCIsIGBDYXBwaW5nIHNlcXVlbmNlIG51bWJlcnMgdG8gY29sbGVjdCBkb3duIHRvIHRoZSBtYXhpbXVtIG9mICR7dGhpcy5wYXJhbXMubWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdH0gZnJvbSAke3R9YCksIFxuICAgICAgICByID0gdGhpcy5wYXJhbXMubWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCkgOiByID0gdCwgcyA9IERhdGUubm93KCksIHRoaXMubnRoU2VxdWVuY2VOdW1iZXIoZSwgcikpKSkubmV4dCgociA9PiAobiA9IHIsIFxuICAgICAgICBvID0gRGF0ZS5ub3coKSwgdGhpcy5yZW1vdmVUYXJnZXRzKGUsIG4sIHQpKSkpLm5leHQoKHQgPT4gKGkgPSB0LCBfID0gRGF0ZS5ub3coKSwgXG4gICAgICAgIHRoaXMucmVtb3ZlT3JwaGFuZWREb2N1bWVudHMoZSwgbikpKSkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBpZiAodSA9IERhdGUubm93KCksIF9fUFJJVkFURV9nZXRMb2dMZXZlbCgpIDw9IExvZ0xldmVsLkRFQlVHKSB7XG4gICAgICAgICAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLCBgTFJVIEdhcmJhZ2UgQ29sbGVjdGlvblxcblxcdENvdW50ZWQgdGFyZ2V0cyBpbiAke3MgLSBjfW1zXFxuXFx0RGV0ZXJtaW5lZCBsZWFzdCByZWNlbnRseSB1c2VkICR7cn0gaW4gYCArIChvIC0gcykgKyBcIm1zXFxuXCIgKyBgXFx0UmVtb3ZlZCAke2l9IHRhcmdldHMgaW4gYCArIChfIC0gbykgKyBcIm1zXFxuXCIgKyBgXFx0UmVtb3ZlZCAke2V9IGRvY3VtZW50cyBpbiBgICsgKHUgLSBfKSArIFwibXNcXG5cIiArIGBUb3RhbCBEdXJhdGlvbjogJHt1IC0gY31tc2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgICAgICBkaWRSdW46ICEwLFxuICAgICAgICAgICAgICAgIHNlcXVlbmNlTnVtYmVyc0NvbGxlY3RlZDogcixcbiAgICAgICAgICAgICAgICB0YXJnZXRzUmVtb3ZlZDogaSxcbiAgICAgICAgICAgICAgICBkb2N1bWVudHNSZW1vdmVkOiBlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX25ld0xydUdhcmJhZ2VDb2xsZWN0b3IoZSwgdCkge1xuICAgIHJldHVybiBuZXcgX19QUklWQVRFX0xydUdhcmJhZ2VDb2xsZWN0b3JJbXBsKGUsIHQpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFByb3ZpZGVzIExSVSBmdW5jdGlvbmFsaXR5IGZvciBJbmRleGVkREIgcGVyc2lzdGVuY2UuICovIGNsYXNzIF9fUFJJVkFURV9JbmRleGVkRGJMcnVEZWxlZ2F0ZUltcGwge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5kYiA9IGUsIHRoaXMuZ2FyYmFnZUNvbGxlY3RvciA9IF9fUFJJVkFURV9uZXdMcnVHYXJiYWdlQ29sbGVjdG9yKHRoaXMsIHQpO1xuICAgIH1cbiAgICBncihlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLndyKGUpO1xuICAgICAgICByZXR1cm4gdGhpcy5kYi5nZXRUYXJnZXRDYWNoZSgpLmdldFRhcmdldENvdW50KGUpLm5leHQoKGUgPT4gdC5uZXh0KCh0ID0+IGUgKyB0KSkpKTtcbiAgICB9XG4gICAgd3IoZSkge1xuICAgICAgICBsZXQgdCA9IDA7XG4gICAgICAgIHJldHVybiB0aGlzLnByKGUsIChlID0+IHtcbiAgICAgICAgICAgIHQrKztcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHQpKTtcbiAgICB9XG4gICAgZm9yRWFjaFRhcmdldChlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRiLmdldFRhcmdldENhY2hlKCkuZm9yRWFjaFRhcmdldChlLCB0KTtcbiAgICB9XG4gICAgcHIoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5TcihlLCAoKGUsIG4pID0+IHQobikpKTtcbiAgICB9XG4gICAgYWRkUmVmZXJlbmNlKGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV93cml0ZVNlbnRpbmVsS2V5KGUsIG4pO1xuICAgIH1cbiAgICByZW1vdmVSZWZlcmVuY2UoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3dyaXRlU2VudGluZWxLZXkoZSwgbik7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldHMoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5kYi5nZXRUYXJnZXRDYWNoZSgpLnJlbW92ZVRhcmdldHMoZSwgdCwgbik7XG4gICAgfVxuICAgIG1hcmtQb3RlbnRpYWxseU9ycGhhbmVkKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV93cml0ZVNlbnRpbmVsS2V5KGUsIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgYW55dGhpbmcgd291bGQgcHJldmVudCB0aGlzIGRvY3VtZW50IGZyb20gYmVpbmcgZ2FyYmFnZVxuICAgICAqIGNvbGxlY3RlZCwgZ2l2ZW4gdGhhdCB0aGUgZG9jdW1lbnQgaW4gcXVlc3Rpb24gaXMgbm90IHByZXNlbnQgaW4gYW55XG4gICAgICogdGFyZ2V0cyBhbmQgaGFzIGEgc2VxdWVuY2UgbnVtYmVyIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgdXBwZXIgYm91bmQgZm9yXG4gICAgICogdGhlIGNvbGxlY3Rpb24gcnVuLlxuICAgICAqLyAgICBicihlLCB0KSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfbXV0YXRpb25RdWV1ZXNDb250YWluS2V5KGUsIHQpIHtcbiAgICAgICAgICAgIGxldCBuID0gITE7XG4gICAgICAgICAgICByZXR1cm4gX19QUklWQVRFX211dGF0aW9uUXVldWVzU3RvcmUoZSkudGUoKHIgPT4gX19QUklWQVRFX211dGF0aW9uUXVldWVDb250YWluc0tleShlLCByLCB0KS5uZXh0KChlID0+IChlICYmIChuID0gITApLCBcbiAgICAgICAgICAgIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCFlKSkpKSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICAgICAgfShlLCB0KTtcbiAgICB9XG4gICAgcmVtb3ZlT3JwaGFuZWREb2N1bWVudHMoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5kYi5nZXRSZW1vdGVEb2N1bWVudENhY2hlKCkubmV3Q2hhbmdlQnVmZmVyKCksIHIgPSBbXTtcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICByZXR1cm4gdGhpcy5TcihlLCAoKHMsIG8pID0+IHtcbiAgICAgICAgICAgIGlmIChvIDw9IHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5icihlLCBzKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0KSBcbiAgICAgICAgICAgICAgICAgICAgLy8gT3VyIHNpemUgYWNjb3VudGluZyByZXF1aXJlcyB1cyB0byByZWFkIGFsbCBkb2N1bWVudHMgYmVmb3JlXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbW92aW5nIHRoZW0uXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpKyssIG4uZ2V0RW50cnkoZSwgcykubmV4dCgoKCkgPT4gKG4ucmVtb3ZlRW50cnkocywgU25hcHNob3RWZXJzaW9uLm1pbigpKSwgXG4gICAgICAgICAgICAgICAgICAgIF9fUFJJVkFURV9kb2N1bWVudFRhcmdldFN0b3JlKGUpLmRlbGV0ZShmdW5jdGlvbiBfX1BSSVZBVEVfc2VudGluZWxLZXkkMShlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWyAwLCBfX1BSSVZBVEVfZW5jb2RlUmVzb3VyY2VQYXRoKGUucGF0aCkgXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvKipcbiAqIEByZXR1cm5zIEEgdmFsdWUgc3VpdGFibGUgZm9yIHdyaXRpbmcgYSBzZW50aW5lbCByb3cgaW4gdGhlIHRhcmdldC1kb2N1bWVudFxuICogc3RvcmUuXG4gKi8gKHMpKSkpKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgci5wdXNoKHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSkubmV4dCgoKCkgPT4gUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IocikpKS5uZXh0KCgoKSA9PiBuLmFwcGx5KGUpKSkubmV4dCgoKCkgPT4gaSkpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXQoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdC53aXRoU2VxdWVuY2VOdW1iZXIoZS5jdXJyZW50U2VxdWVuY2VOdW1iZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5kYi5nZXRUYXJnZXRDYWNoZSgpLnVwZGF0ZVRhcmdldERhdGEoZSwgbik7XG4gICAgfVxuICAgIHVwZGF0ZUxpbWJvRG9jdW1lbnQoZSwgdCkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3dyaXRlU2VudGluZWxLZXkoZSwgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGwgcHJvdmlkZWQgZnVuY3Rpb24gZm9yIGVhY2ggZG9jdW1lbnQgaW4gdGhlIGNhY2hlIHRoYXQgaXMgJ29ycGhhbmVkJy4gT3JwaGFuZWRcbiAgICAgKiBtZWFucyBub3QgYSBwYXJ0IG9mIGFueSB0YXJnZXQsIHNvIHRoZSBvbmx5IGVudHJ5IGluIHRoZSB0YXJnZXQtZG9jdW1lbnQgaW5kZXggZm9yXG4gICAgICogdGhhdCBkb2N1bWVudCB3aWxsIGJlIHRoZSBzZW50aW5lbCByb3cgKHRhcmdldElkIDApLCB3aGljaCB3aWxsIGFsc28gaGF2ZSB0aGUgc2VxdWVuY2VcbiAgICAgKiBudW1iZXIgZm9yIHRoZSBsYXN0IHRpbWUgdGhlIGRvY3VtZW50IHdhcyBhY2Nlc3NlZC5cbiAgICAgKi8gICAgU3IoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2RvY3VtZW50VGFyZ2V0U3RvcmUoZSk7XG4gICAgICAgIGxldCByLCBpID0gX19QUklWQVRFX0xpc3RlblNlcXVlbmNlLmNlO1xuICAgICAgICByZXR1cm4gbi5lZSh7XG4gICAgICAgICAgICBpbmRleDogVmVcbiAgICAgICAgfSwgKChbZSwgbl0sIHtwYXRoOiBzLCBzZXF1ZW5jZU51bWJlcjogb30pID0+IHtcbiAgICAgICAgICAgIDAgPT09IGUgPyAoXG4gICAgICAgICAgICAvLyBpZiBuZXh0VG9SZXBvcnQgaXMgdmFsaWQsIHJlcG9ydCBpdCwgdGhpcyBpcyBhIG5ldyBrZXkgc28gdGhlXG4gICAgICAgICAgICAvLyBsYXN0IG9uZSBtdXN0IG5vdCBiZSBhIG1lbWJlciBvZiBhbnkgdGFyZ2V0cy5cbiAgICAgICAgICAgIGkgIT09IF9fUFJJVkFURV9MaXN0ZW5TZXF1ZW5jZS5jZSAmJiB0KG5ldyBEb2N1bWVudEtleShfX1BSSVZBVEVfZGVjb2RlUmVzb3VyY2VQYXRoKHIpKSwgaSksIFxuICAgICAgICAgICAgLy8gc2V0IG5leHRUb1JlcG9ydCB0byBiZSB0aGlzIHNlcXVlbmNlIG51bWJlci4gSXQncyB0aGUgbmV4dCBvbmUgd2VcbiAgICAgICAgICAgIC8vIG1pZ2h0IHJlcG9ydCwgaWYgd2UgZG9uJ3QgZmluZCBhbnkgdGFyZ2V0cyBmb3IgdGhpcyBkb2N1bWVudC5cbiAgICAgICAgICAgIC8vIE5vdGUgdGhhdCB0aGUgc2VxdWVuY2UgbnVtYmVyIG11c3QgYmUgZGVmaW5lZCB3aGVuIHRoZSB0YXJnZXRJZFxuICAgICAgICAgICAgLy8gaXMgMC5cbiAgICAgICAgICAgIGkgPSBvLCByID0gcykgOiBcbiAgICAgICAgICAgIC8vIHNldCBuZXh0VG9SZXBvcnQgdG8gYmUgaW52YWxpZCwgd2Uga25vdyB3ZSBkb24ndCBuZWVkIHRvIHJlcG9ydFxuICAgICAgICAgICAgLy8gdGhpcyBvbmUgc2luY2Ugd2UgZm91bmQgYSB0YXJnZXQgZm9yIGl0LlxuICAgICAgICAgICAgaSA9IF9fUFJJVkFURV9MaXN0ZW5TZXF1ZW5jZS5jZTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIC8vIFNpbmNlIHdlIHJlcG9ydCBzZXF1ZW5jZSBudW1iZXJzIGFmdGVyIGdldHRpbmcgdG8gdGhlIG5leHQga2V5LCB3ZVxuICAgICAgICAgICAgLy8gbmVlZCB0byBjaGVjayBpZiB0aGUgbGFzdCBrZXkgd2UgaXRlcmF0ZWQgb3ZlciB3YXMgYW4gb3JwaGFuZWRcbiAgICAgICAgICAgIC8vIGRvY3VtZW50IGFuZCByZXBvcnQgaXQuXG4gICAgICAgICAgICBpICE9PSBfX1BSSVZBVEVfTGlzdGVuU2VxdWVuY2UuY2UgJiYgdChuZXcgRG9jdW1lbnRLZXkoX19QUklWQVRFX2RlY29kZVJlc291cmNlUGF0aChyKSksIGkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldENhY2hlU2l6ZShlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRiLmdldFJlbW90ZURvY3VtZW50Q2FjaGUoKS5nZXRTaXplKGUpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3dyaXRlU2VudGluZWxLZXkoZSwgdCkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZG9jdW1lbnRUYXJnZXRTdG9yZShlKS5wdXQoZnVuY3Rpb24gX19QUklWQVRFX3NlbnRpbmVsUm93KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRhcmdldElkOiAwLFxuICAgICAgICAgICAgcGF0aDogX19QUklWQVRFX2VuY29kZVJlc291cmNlUGF0aChlLnBhdGgpLFxuICAgICAgICAgICAgc2VxdWVuY2VOdW1iZXI6IHRcbiAgICAgICAgfTtcbiAgICB9KHQsIGUuY3VycmVudFNlcXVlbmNlTnVtYmVyKSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGluLW1lbW9yeSBidWZmZXIgb2YgZW50cmllcyB0byBiZSB3cml0dGVuIHRvIGEgUmVtb3RlRG9jdW1lbnRDYWNoZS5cbiAqIEl0IGNhbiBiZSB1c2VkIHRvIGJhdGNoIHVwIGEgc2V0IG9mIGNoYW5nZXMgdG8gYmUgd3JpdHRlbiB0byB0aGUgY2FjaGUsIGJ1dFxuICogYWRkaXRpb25hbGx5IHN1cHBvcnRzIHJlYWRpbmcgZW50cmllcyBiYWNrIHdpdGggdGhlIGBnZXRFbnRyeSgpYCBtZXRob2QsXG4gKiBmYWxsaW5nIGJhY2sgdG8gdGhlIHVuZGVybHlpbmcgUmVtb3RlRG9jdW1lbnRDYWNoZSBpZiBubyBlbnRyeSBpc1xuICogYnVmZmVyZWQuXG4gKlxuICogRW50cmllcyBhZGRlZCB0byB0aGUgY2FjaGUgKm11c3QqIGJlIHJlYWQgZmlyc3QuIFRoaXMgaXMgdG8gZmFjaWxpdGF0ZVxuICogY2FsY3VsYXRpbmcgdGhlIHNpemUgZGVsdGEgb2YgdGhlIHBlbmRpbmcgY2hhbmdlcy5cbiAqXG4gKiBQT1JUSU5HIE5PVEU6IFRoaXMgY2xhc3Mgd2FzIGltcGxlbWVudGVkIHRoZW4gcmVtb3ZlZCBmcm9tIG90aGVyIHBsYXRmb3Jtcy5cbiAqIElmIGJ5dGUtY291bnRpbmcgZW5kcyB1cCBiZWluZyBuZWVkZWQgb24gdGhlIG90aGVyIHBsYXRmb3JtcywgY29uc2lkZXJcbiAqIHBvcnRpbmcgdGhpcyBjbGFzcyBhcyBwYXJ0IG9mIHRoYXQgaW1wbGVtZW50YXRpb24gd29yay5cbiAqLyBjbGFzcyBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vIEEgbWFwcGluZyBvZiBkb2N1bWVudCBrZXkgdG8gdGhlIG5ldyBjYWNoZSBlbnRyeSB0aGF0IHNob3VsZCBiZSB3cml0dGVuLlxuICAgICAgICB0aGlzLmNoYW5nZXMgPSBuZXcgT2JqZWN0TWFwKChlID0+IGUudG9TdHJpbmcoKSksICgoZSwgdCkgPT4gZS5pc0VxdWFsKHQpKSksIHRoaXMuY2hhbmdlc0FwcGxpZWQgPSAhMTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQnVmZmVycyBhIGBSZW1vdGVEb2N1bWVudENhY2hlLmFkZEVudHJ5KClgIGNhbGwuXG4gICAgICpcbiAgICAgKiBZb3UgY2FuIG9ubHkgbW9kaWZ5IGRvY3VtZW50cyB0aGF0IGhhdmUgYWxyZWFkeSBiZWVuIHJldHJpZXZlZCB2aWFcbiAgICAgKiBgZ2V0RW50cnkoKS9nZXRFbnRyaWVzKClgIChlbmZvcmNlZCB2aWEgSW5kZXhlZERicyBgYXBwbHkoKWApLlxuICAgICAqLyAgICBhZGRFbnRyeShlKSB7XG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90QXBwbGllZCgpLCB0aGlzLmNoYW5nZXMuc2V0KGUua2V5LCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQnVmZmVycyBhIGBSZW1vdGVEb2N1bWVudENhY2hlLnJlbW92ZUVudHJ5KClgIGNhbGwuXG4gICAgICpcbiAgICAgKiBZb3UgY2FuIG9ubHkgcmVtb3ZlIGRvY3VtZW50cyB0aGF0IGhhdmUgYWxyZWFkeSBiZWVuIHJldHJpZXZlZCB2aWFcbiAgICAgKiBgZ2V0RW50cnkoKS9nZXRFbnRyaWVzKClgIChlbmZvcmNlZCB2aWEgSW5kZXhlZERicyBgYXBwbHkoKWApLlxuICAgICAqLyAgICByZW1vdmVFbnRyeShlLCB0KSB7XG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90QXBwbGllZCgpLCB0aGlzLmNoYW5nZXMuc2V0KGUsIE11dGFibGVEb2N1bWVudC5uZXdJbnZhbGlkRG9jdW1lbnQoZSkuc2V0UmVhZFRpbWUodCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb29rcyB1cCBhbiBlbnRyeSBpbiB0aGUgY2FjaGUuIFRoZSBidWZmZXJlZCBjaGFuZ2VzIHdpbGwgZmlyc3QgYmUgY2hlY2tlZCxcbiAgICAgKiBhbmQgaWYgbm8gYnVmZmVyZWQgY2hhbmdlIGFwcGxpZXMsIHRoaXMgd2lsbCBmb3J3YXJkIHRvXG4gICAgICogYFJlbW90ZURvY3VtZW50Q2FjaGUuZ2V0RW50cnkoKWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHJhbnNhY3Rpb24gLSBUaGUgdHJhbnNhY3Rpb24gaW4gd2hpY2ggdG8gcGVyZm9ybSBhbnkgcGVyc2lzdGVuY2VcbiAgICAgKiAgICAgb3BlcmF0aW9ucy5cbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRLZXkgLSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBsb29rIHVwLlxuICAgICAqIEByZXR1cm5zIFRoZSBjYWNoZWQgZG9jdW1lbnQgb3IgYW4gaW52YWxpZCBkb2N1bWVudCBpZiB3ZSBoYXZlIG5vdGhpbmdcbiAgICAgKiBjYWNoZWQuXG4gICAgICovICAgIGdldEVudHJ5KGUsIHQpIHtcbiAgICAgICAgdGhpcy5hc3NlcnROb3RBcHBsaWVkKCk7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLmNoYW5nZXMuZ2V0KHQpO1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSBuID8gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUobikgOiB0aGlzLmdldEZyb21DYWNoZShlLCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9va3MgdXAgc2V2ZXJhbCBlbnRyaWVzIGluIHRoZSBjYWNoZSwgZm9yd2FyZGluZyB0b1xuICAgICAqIGBSZW1vdGVEb2N1bWVudENhY2hlLmdldEVudHJ5KClgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRyYW5zYWN0aW9uIC0gVGhlIHRyYW5zYWN0aW9uIGluIHdoaWNoIHRvIHBlcmZvcm0gYW55IHBlcnNpc3RlbmNlXG4gICAgICogICAgIG9wZXJhdGlvbnMuXG4gICAgICogQHBhcmFtIGRvY3VtZW50S2V5cyAtIFRoZSBrZXlzIG9mIHRoZSBlbnRyaWVzIHRvIGxvb2sgdXAuXG4gICAgICogQHJldHVybnMgQSBtYXAgb2YgY2FjaGVkIGRvY3VtZW50cywgaW5kZXhlZCBieSBrZXkuIElmIGFuIGVudHJ5IGNhbm5vdCBiZVxuICAgICAqICAgICBmb3VuZCwgdGhlIGNvcnJlc3BvbmRpbmcga2V5IHdpbGwgYmUgbWFwcGVkIHRvIGFuIGludmFsaWQgZG9jdW1lbnQuXG4gICAgICovICAgIGdldEVudHJpZXMoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRBbGxGcm9tQ2FjaGUoZSwgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgYnVmZmVyZWQgY2hhbmdlcyB0byB0aGUgdW5kZXJseWluZyBSZW1vdGVEb2N1bWVudENhY2hlLCB1c2luZ1xuICAgICAqIHRoZSBwcm92aWRlZCB0cmFuc2FjdGlvbi5cbiAgICAgKi8gICAgYXBwbHkoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5hc3NlcnROb3RBcHBsaWVkKCksIHRoaXMuY2hhbmdlc0FwcGxpZWQgPSAhMCwgdGhpcy5hcHBseUNoYW5nZXMoZSk7XG4gICAgfVxuICAgIC8qKiBIZWxwZXIgdG8gYXNzZXJ0IHRoaXMuY2hhbmdlcyBpcyBub3QgbnVsbCAgKi8gICAgYXNzZXJ0Tm90QXBwbGllZCgpIHt9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRoZSBSZW1vdGVEb2N1bWVudENhY2hlIGZvciBJbmRleGVkRGIuIFRvIGNvbnN0cnVjdCwgaW52b2tlXG4gKiBgbmV3SW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZSgpYC5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZUltcGwge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5zZXJpYWxpemVyID0gZTtcbiAgICB9XG4gICAgc2V0SW5kZXhNYW5hZ2VyKGUpIHtcbiAgICAgICAgdGhpcy5pbmRleE1hbmFnZXIgPSBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIHRoZSBzdXBwbGllZCBlbnRyaWVzIHRvIHRoZSBjYWNoZS5cbiAgICAgKlxuICAgICAqIEFsbCBjYWxscyBvZiBgYWRkRW50cnlgIGFyZSByZXF1aXJlZCB0byBnbyB0aHJvdWdoIHRoZSBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlclxuICAgICAqIHJldHVybmVkIGJ5IGBuZXdDaGFuZ2VCdWZmZXIoKWAgdG8gZW5zdXJlIHByb3BlciBhY2NvdW50aW5nIG9mIG1ldGFkYXRhLlxuICAgICAqLyAgICBhZGRFbnRyeShlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfcmVtb3RlRG9jdW1lbnRzU3RvcmUoZSkucHV0KG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGEgZG9jdW1lbnQgZnJvbSB0aGUgY2FjaGUuXG4gICAgICpcbiAgICAgKiBBbGwgY2FsbHMgb2YgYHJlbW92ZUVudHJ5YCAgYXJlIHJlcXVpcmVkIHRvIGdvIHRocm91Z2ggdGhlIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyXG4gICAgICogcmV0dXJuZWQgYnkgYG5ld0NoYW5nZUJ1ZmZlcigpYCB0byBlbnN1cmUgcHJvcGVyIGFjY291bnRpbmcgb2YgbWV0YWRhdGEuXG4gICAgICovICAgIHJlbW92ZUVudHJ5KGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9yZW1vdGVEb2N1bWVudHNTdG9yZShlKS5kZWxldGUoXG4gICAgICAgIC8qKlxuICogUmV0dXJucyBhIGtleSB0aGF0IGNhbiBiZSB1c2VkIGZvciBkb2N1bWVudCBsb29rdXBzIHZpYSB0aGUgcHJpbWFyeSBrZXkgb2ZcbiAqIHRoZSBEYlJlbW90ZURvY3VtZW50IG9iamVjdCBzdG9yZS5cbiAqL1xuICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfZGJSZWFkVGltZUtleShlLCB0KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gZS5wYXRoLnRvQXJyYXkoKTtcbiAgICAgICAgICAgIHJldHVybiBbIFxuICAgICAgICAgICAgLyogcHJlZml4IHBhdGggKi8gbi5zbGljZSgwLCBuLmxlbmd0aCAtIDIpLCBcbiAgICAgICAgICAgIC8qIGNvbGxlY3Rpb24gaWQgKi8gbltuLmxlbmd0aCAtIDJdLCBfX1BSSVZBVEVfdG9EYlRpbWVzdGFtcEtleSh0KSwgXG4gICAgICAgICAgICAvKiBkb2N1bWVudCBpZCAqLyBuW24ubGVuZ3RoIC0gMV0gXTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIFJldHVybnMgYSBrZXkgdGhhdCBjYW4gYmUgdXNlZCBmb3IgZG9jdW1lbnQgbG9va3VwcyBvbiB0aGVcbiAqIGBEYlJlbW90ZURvY3VtZW50RG9jdW1lbnRDb2xsZWN0aW9uR3JvdXBJbmRleGAgaW5kZXguXG4gKi8gKHQsIG4pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgY3VycmVudCBjYWNoZSBzaXplLlxuICAgICAqXG4gICAgICogQ2FsbGVycyB0byBgYWRkRW50cnkoKWAgYW5kIGByZW1vdmVFbnRyeSgpYCAqbXVzdCogY2FsbCB0aGlzIGFmdGVyd2FyZHMgdG8gdXBkYXRlIHRoZVxuICAgICAqIGNhY2hlJ3MgbWV0YWRhdGEuXG4gICAgICovICAgIHVwZGF0ZU1ldGFkYXRhKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TWV0YWRhdGEoZSkubmV4dCgobiA9PiAobi5ieXRlU2l6ZSArPSB0LCB0aGlzLkRyKGUsIG4pKSkpO1xuICAgIH1cbiAgICBnZXRFbnRyeShlLCB0KSB7XG4gICAgICAgIGxldCBuID0gTXV0YWJsZURvY3VtZW50Lm5ld0ludmFsaWREb2N1bWVudCh0KTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9yZW1vdGVEb2N1bWVudHNTdG9yZShlKS5lZSh7XG4gICAgICAgICAgICBpbmRleDogdWUsXG4gICAgICAgICAgICByYW5nZTogSURCS2V5UmFuZ2Uub25seShfX1BSSVZBVEVfZGJLZXkodCkpXG4gICAgICAgIH0sICgoZSwgcikgPT4ge1xuICAgICAgICAgICAgbiA9IHRoaXMuQ3IodCwgcik7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvb2tzIHVwIGFuIGVudHJ5IGluIHRoZSBjYWNoZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudEtleSAtIFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGxvb2sgdXAuXG4gICAgICogQHJldHVybnMgVGhlIGNhY2hlZCBkb2N1bWVudCBlbnRyeSBhbmQgaXRzIHNpemUuXG4gICAgICovICAgIHZyKGUsIHQpIHtcbiAgICAgICAgbGV0IG4gPSB7XG4gICAgICAgICAgICBzaXplOiAwLFxuICAgICAgICAgICAgZG9jdW1lbnQ6IE11dGFibGVEb2N1bWVudC5uZXdJbnZhbGlkRG9jdW1lbnQodClcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9yZW1vdGVEb2N1bWVudHNTdG9yZShlKS5lZSh7XG4gICAgICAgICAgICBpbmRleDogdWUsXG4gICAgICAgICAgICByYW5nZTogSURCS2V5UmFuZ2Uub25seShfX1BSSVZBVEVfZGJLZXkodCkpXG4gICAgICAgIH0sICgoZSwgcikgPT4ge1xuICAgICAgICAgICAgbiA9IHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudDogdGhpcy5Dcih0LCByKSxcbiAgICAgICAgICAgICAgICBzaXplOiBfX1BSSVZBVEVfZGJEb2N1bWVudFNpemUocilcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIGdldEVudHJpZXMoZSwgdCkge1xuICAgICAgICBsZXQgbiA9IF9fUFJJVkFURV9tdXRhYmxlRG9jdW1lbnRNYXAoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuRnIoZSwgdCwgKChlLCB0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gdGhpcy5DcihlLCB0KTtcbiAgICAgICAgICAgIG4gPSBuLmluc2VydChlLCByKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9va3MgdXAgc2V2ZXJhbCBlbnRyaWVzIGluIHRoZSBjYWNoZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudEtleXMgLSBUaGUgc2V0IG9mIGtleXMgZW50cmllcyB0byBsb29rIHVwLlxuICAgICAqIEByZXR1cm5zIEEgbWFwIG9mIGRvY3VtZW50cyBpbmRleGVkIGJ5IGtleSBhbmQgYSBtYXAgb2Ygc2l6ZXMgaW5kZXhlZCBieVxuICAgICAqICAgICBrZXkgKHplcm8gaWYgdGhlIGRvY3VtZW50IGRvZXMgbm90IGV4aXN0KS5cbiAgICAgKi8gICAgTXIoZSwgdCkge1xuICAgICAgICBsZXQgbiA9IF9fUFJJVkFURV9tdXRhYmxlRG9jdW1lbnRNYXAoKSwgciA9IG5ldyBTb3J0ZWRNYXAoRG9jdW1lbnRLZXkuY29tcGFyYXRvcik7XG4gICAgICAgIHJldHVybiB0aGlzLkZyKGUsIHQsICgoZSwgdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IHRoaXMuQ3IoZSwgdCk7XG4gICAgICAgICAgICBuID0gbi5pbnNlcnQoZSwgaSksIHIgPSByLmluc2VydChlLCBfX1BSSVZBVEVfZGJEb2N1bWVudFNpemUodCkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gKHtcbiAgICAgICAgICAgIGRvY3VtZW50czogbixcbiAgICAgICAgICAgIE9yOiByXG4gICAgICAgIH0pKSk7XG4gICAgfVxuICAgIEZyKGUsIHQsIG4pIHtcbiAgICAgICAgaWYgKHQuaXNFbXB0eSgpKSByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgbGV0IHIgPSBuZXcgU29ydGVkU2V0KF9fUFJJVkFURV9kYktleUNvbXBhcmF0b3IpO1xuICAgICAgICB0LmZvckVhY2goKGUgPT4gciA9IHIuYWRkKGUpKSk7XG4gICAgICAgIGNvbnN0IGkgPSBJREJLZXlSYW5nZS5ib3VuZChfX1BSSVZBVEVfZGJLZXkoci5maXJzdCgpKSwgX19QUklWQVRFX2RiS2V5KHIubGFzdCgpKSksIHMgPSByLmdldEl0ZXJhdG9yKCk7XG4gICAgICAgIGxldCBvID0gcy5nZXROZXh0KCk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfcmVtb3RlRG9jdW1lbnRzU3RvcmUoZSkuZWUoe1xuICAgICAgICAgICAgaW5kZXg6IHVlLFxuICAgICAgICAgICAgcmFuZ2U6IGlcbiAgICAgICAgfSwgKChlLCB0LCByKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gRG9jdW1lbnRLZXkuZnJvbVNlZ21lbnRzKFsgLi4udC5wcmVmaXhQYXRoLCB0LmNvbGxlY3Rpb25Hcm91cCwgdC5kb2N1bWVudElkIF0pO1xuICAgICAgICAgICAgLy8gR28gdGhyb3VnaCBrZXlzIG5vdCBmb3VuZCBpbiBjYWNoZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoO28gJiYgX19QUklWQVRFX2RiS2V5Q29tcGFyYXRvcihvLCBpKSA8IDA7ICkgbihvLCBudWxsKSwgbyA9IHMuZ2V0TmV4dCgpO1xuICAgICAgICAgICAgbyAmJiBvLmlzRXF1YWwoaSkgJiYgKFxuICAgICAgICAgICAgLy8gS2V5IGZvdW5kIGluIGNhY2hlLlxuICAgICAgICAgICAgbihvLCB0KSwgbyA9IHMuaGFzTmV4dCgpID8gcy5nZXROZXh0KCkgOiBudWxsKSwgXG4gICAgICAgICAgICAvLyBTa2lwIHRvIHRoZSBuZXh0IGtleSAoaWYgdGhlcmUgaXMgb25lKS5cbiAgICAgICAgICAgIG8gPyByLmooX19QUklWQVRFX2RiS2V5KG8pKSA6IHIuZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgLy8gVGhlIHJlc3Qgb2YgdGhlIGtleXMgYXJlIG5vdCBpbiB0aGUgY2FjaGUuIE9uZSBjYXNlIHdoZXJlIGBpdGVyYXRlYFxuICAgICAgICAgICAgLy8gYWJvdmUgd29uJ3QgZ28gdGhyb3VnaCB0aGVtIGlzIHdoZW4gdGhlIGNhY2hlIGlzIGVtcHR5LlxuICAgICAgICAgICAgZm9yICg7bzsgKSBuKG8sIG51bGwpLCBvID0gcy5oYXNOZXh0KCkgPyBzLmdldE5leHQoKSA6IG51bGw7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeShlLCB0LCBuLCByLCBpKSB7XG4gICAgICAgIGNvbnN0IHMgPSB0LnBhdGgsIG8gPSBbIHMucG9wTGFzdCgpLnRvQXJyYXkoKSwgcy5sYXN0U2VnbWVudCgpLCBfX1BSSVZBVEVfdG9EYlRpbWVzdGFtcEtleShuLnJlYWRUaW1lKSwgbi5kb2N1bWVudEtleS5wYXRoLmlzRW1wdHkoKSA/IFwiXCIgOiBuLmRvY3VtZW50S2V5LnBhdGgubGFzdFNlZ21lbnQoKSBdLCBfID0gWyBzLnBvcExhc3QoKS50b0FycmF5KCksIHMubGFzdFNlZ21lbnQoKSwgWyBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiwgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIgXSwgXCJcIiBdO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3JlbW90ZURvY3VtZW50c1N0b3JlKGUpLkooSURCS2V5UmFuZ2UuYm91bmQobywgXywgITApKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGk/LmluY3JlbWVudERvY3VtZW50UmVhZENvdW50KGUubGVuZ3RoKTtcbiAgICAgICAgICAgIGxldCBuID0gX19QUklWQVRFX211dGFibGVEb2N1bWVudE1hcCgpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBpIG9mIGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdGhpcy5DcihEb2N1bWVudEtleS5mcm9tU2VnbWVudHMoaS5wcmVmaXhQYXRoLmNvbmNhdChpLmNvbGxlY3Rpb25Hcm91cCwgaS5kb2N1bWVudElkKSksIGkpO1xuICAgICAgICAgICAgICAgIGUuaXNGb3VuZERvY3VtZW50KCkgJiYgKF9fUFJJVkFURV9xdWVyeU1hdGNoZXModCwgZSkgfHwgci5oYXMoZS5rZXkpKSAmJiAoXG4gICAgICAgICAgICAgICAgLy8gRWl0aGVyIHRoZSBkb2N1bWVudCBtYXRjaGVzIHRoZSBnaXZlbiBxdWVyeSwgb3IgaXQgaXMgbXV0YXRlZC5cbiAgICAgICAgICAgICAgICBuID0gbi5pbnNlcnQoZS5rZXksIGUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldEFsbEZyb21Db2xsZWN0aW9uR3JvdXAoZSwgdCwgbiwgcikge1xuICAgICAgICBsZXQgaSA9IF9fUFJJVkFURV9tdXRhYmxlRG9jdW1lbnRNYXAoKTtcbiAgICAgICAgY29uc3QgcyA9IF9fUFJJVkFURV9kYkNvbGxlY3Rpb25Hcm91cEtleSh0LCBuKSwgbyA9IF9fUFJJVkFURV9kYkNvbGxlY3Rpb25Hcm91cEtleSh0LCBJbmRleE9mZnNldC5tYXgoKSk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfcmVtb3RlRG9jdW1lbnRzU3RvcmUoZSkuZWUoe1xuICAgICAgICAgICAgaW5kZXg6IGxlLFxuICAgICAgICAgICAgcmFuZ2U6IElEQktleVJhbmdlLmJvdW5kKHMsIG8sICEwKVxuICAgICAgICB9LCAoKGUsIHQsIG4pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSB0aGlzLkNyKERvY3VtZW50S2V5LmZyb21TZWdtZW50cyh0LnByZWZpeFBhdGguY29uY2F0KHQuY29sbGVjdGlvbkdyb3VwLCB0LmRvY3VtZW50SWQpKSwgdCk7XG4gICAgICAgICAgICBpID0gaS5pbnNlcnQocy5rZXksIHMpLCBpLnNpemUgPT09IHIgJiYgbi5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpKSk7XG4gICAgfVxuICAgIG5ld0NoYW5nZUJ1ZmZlcihlKSB7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX0luZGV4ZWREYlJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyKHRoaXMsICEhZSAmJiBlLnRyYWNrUmVtb3ZhbHMpO1xuICAgIH1cbiAgICBnZXRTaXplKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TWV0YWRhdGEoZSkubmV4dCgoZSA9PiBlLmJ5dGVTaXplKSk7XG4gICAgfVxuICAgIGdldE1ldGFkYXRhKGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9kb2N1bWVudEdsb2JhbFN0b3JlKGUpLmdldChUZSkubmV4dCgoZSA9PiAoX19QUklWQVRFX2hhcmRBc3NlcnQoISFlLCAyMDAyMSksIFxuICAgICAgICBlKSkpO1xuICAgIH1cbiAgICBEcihlLCB0KSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfZG9jdW1lbnRHbG9iYWxTdG9yZShlKS5wdXQoVGUsIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWNvZGVzIGBkYlJlbW90ZURvY2AgYW5kIHJldHVybnMgdGhlIGRvY3VtZW50IChvciBhbiBpbnZhbGlkIGRvY3VtZW50IGlmXG4gICAgICogdGhlIGRvY3VtZW50IGNvcnJlc3BvbmRzIHRvIHRoZSBmb3JtYXQgdXNlZCBmb3Igc2VudGluZWwgZGVsZXRlcykuXG4gICAgICovICAgIENyKGUsIHQpIHtcbiAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBfX1BSSVZBVEVfZnJvbURiUmVtb3RlRG9jdW1lbnQodGhpcy5zZXJpYWxpemVyLCB0KTtcbiAgICAgICAgICAgIC8vIFdoZXRoZXIgdGhlIGRvY3VtZW50IGlzIGEgc2VudGluZWwgcmVtb3ZhbCBhbmQgc2hvdWxkIG9ubHkgYmUgdXNlZCBpbiB0aGVcbiAgICAgICAgICAgIC8vIGBnZXROZXdEb2N1bWVudENoYW5nZXMoKWBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGUuaXNOb0RvY3VtZW50KCkgJiYgZS52ZXJzaW9uLmlzRXF1YWwoU25hcHNob3RWZXJzaW9uLm1pbigpKSkpIHJldHVybiBlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBNdXRhYmxlRG9jdW1lbnQubmV3SW52YWxpZERvY3VtZW50KGUpO1xuICAgIH1cbn1cblxuLyoqIENyZWF0ZXMgYSBuZXcgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZS4gKi8gZnVuY3Rpb24gX19QUklWQVRFX25ld0luZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUoZSkge1xuICAgIHJldHVybiBuZXcgX19QUklWQVRFX0luZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGVJbXBsKGUpO1xufVxuXG4vKipcbiAqIEhhbmRsZXMgdGhlIGRldGFpbHMgb2YgYWRkaW5nIGFuZCB1cGRhdGluZyBkb2N1bWVudHMgaW4gdGhlIEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUuXG4gKlxuICogVW5saWtlIHRoZSBNZW1vcnlSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlciwgdGhlIEluZGV4ZWREYiBpbXBsZW1lbnRhdGlvbiBjb21wdXRlcyB0aGUgc2l6ZVxuICogZGVsdGEgZm9yIGFsbCBzdWJtaXR0ZWQgY2hhbmdlcy4gVGhpcyBhdm9pZHMgaGF2aW5nIHRvIHJlLXJlYWQgYWxsIGRvY3VtZW50cyBmcm9tIEluZGV4ZWREYlxuICogd2hlbiB3ZSBhcHBseSB0aGUgY2hhbmdlcy5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIgZXh0ZW5kcyBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlciB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGRvY3VtZW50Q2FjaGUgLSBUaGUgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZSB0byBhcHBseSB0aGUgY2hhbmdlcyB0by5cbiAgICAgKiBAcGFyYW0gdHJhY2tSZW1vdmFscyAtIFdoZXRoZXIgdG8gY3JlYXRlIHNlbnRpbmVsIGRlbGV0ZXMgdGhhdCBjYW4gYmUgdHJhY2tlZCBieVxuICAgICAqIGBnZXROZXdEb2N1bWVudENoYW5nZXMoKWAuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLk5yID0gZSwgdGhpcy50cmFja1JlbW92YWxzID0gdCwgXG4gICAgICAgIC8vIEEgbWFwIG9mIGRvY3VtZW50IHNpemVzIGFuZCByZWFkIHRpbWVzIHByaW9yIHRvIGFwcGx5aW5nIHRoZSBjaGFuZ2VzIGluXG4gICAgICAgIC8vIHRoaXMgYnVmZmVyLlxuICAgICAgICB0aGlzLkJyID0gbmV3IE9iamVjdE1hcCgoZSA9PiBlLnRvU3RyaW5nKCkpLCAoKGUsIHQpID0+IGUuaXNFcXVhbCh0KSkpO1xuICAgIH1cbiAgICBhcHBseUNoYW5nZXMoZSkge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIGxldCBuID0gMCwgciA9IG5ldyBTb3J0ZWRTZXQoKChlLCB0KSA9PiBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihlLmNhbm9uaWNhbFN0cmluZygpLCB0LmNhbm9uaWNhbFN0cmluZygpKSkpO1xuICAgICAgICByZXR1cm4gdGhpcy5jaGFuZ2VzLmZvckVhY2goKChpLCBzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvID0gdGhpcy5Cci5nZXQoaSk7XG4gICAgICAgICAgICBpZiAodC5wdXNoKHRoaXMuTnIucmVtb3ZlRW50cnkoZSwgaSwgby5yZWFkVGltZSkpLCBzLmlzVmFsaWREb2N1bWVudCgpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgXyA9IF9fUFJJVkFURV90b0RiUmVtb3RlRG9jdW1lbnQodGhpcy5Oci5zZXJpYWxpemVyLCBzKTtcbiAgICAgICAgICAgICAgICByID0gci5hZGQoaS5wYXRoLnBvcExhc3QoKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYSA9IF9fUFJJVkFURV9kYkRvY3VtZW50U2l6ZShfKTtcbiAgICAgICAgICAgICAgICBuICs9IGEgLSBvLnNpemUsIHQucHVzaCh0aGlzLk5yLmFkZEVudHJ5KGUsIGksIF8pKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobiAtPSBvLnNpemUsIHRoaXMudHJhY2tSZW1vdmFscykge1xuICAgICAgICAgICAgICAgIC8vIEluIG9yZGVyIHRvIHRyYWNrIHJlbW92YWxzLCB3ZSBzdG9yZSBhIFwic2VudGluZWwgZGVsZXRlXCIgaW4gdGhlXG4gICAgICAgICAgICAgICAgLy8gUmVtb3RlRG9jdW1lbnRDYWNoZS4gVGhpcyBlbnRyeSBpcyByZXByZXNlbnRlZCBieSBhIE5vRG9jdW1lbnRcbiAgICAgICAgICAgICAgICAvLyB3aXRoIGEgdmVyc2lvbiBvZiAwIGFuZCBpZ25vcmVkIGJ5IGBtYXliZURlY29kZURvY3VtZW50KClgIGJ1dFxuICAgICAgICAgICAgICAgIC8vIHByZXNlcnZlZCBpbiBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgLlxuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfdG9EYlJlbW90ZURvY3VtZW50KHRoaXMuTnIuc2VyaWFsaXplciwgcy5jb252ZXJ0VG9Ob0RvY3VtZW50KFNuYXBzaG90VmVyc2lvbi5taW4oKSkpO1xuICAgICAgICAgICAgICAgIHQucHVzaCh0aGlzLk5yLmFkZEVudHJ5KGUsIGksIG4pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpLCByLmZvckVhY2goKG4gPT4ge1xuICAgICAgICAgICAgdC5wdXNoKHRoaXMuTnIuaW5kZXhNYW5hZ2VyLmFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4KGUsIG4pKTtcbiAgICAgICAgfSkpLCB0LnB1c2godGhpcy5Oci51cGRhdGVNZXRhZGF0YShlLCBuKSksIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHQpO1xuICAgIH1cbiAgICBnZXRGcm9tQ2FjaGUoZSwgdCkge1xuICAgICAgICAvLyBSZWNvcmQgdGhlIHNpemUgb2YgZXZlcnl0aGluZyB3ZSBsb2FkIGZyb20gdGhlIGNhY2hlIHNvIHdlIGNhbiBjb21wdXRlIGEgZGVsdGEgbGF0ZXIuXG4gICAgICAgIHJldHVybiB0aGlzLk5yLnZyKGUsIHQpLm5leHQoKGUgPT4gKHRoaXMuQnIuc2V0KHQsIHtcbiAgICAgICAgICAgIHNpemU6IGUuc2l6ZSxcbiAgICAgICAgICAgIHJlYWRUaW1lOiBlLmRvY3VtZW50LnJlYWRUaW1lXG4gICAgICAgIH0pLCBlLmRvY3VtZW50KSkpO1xuICAgIH1cbiAgICBnZXRBbGxGcm9tQ2FjaGUoZSwgdCkge1xuICAgICAgICAvLyBSZWNvcmQgdGhlIHNpemUgb2YgZXZlcnl0aGluZyB3ZSBsb2FkIGZyb20gdGhlIGNhY2hlIHNvIHdlIGNhbiBjb21wdXRlXG4gICAgICAgIC8vIGEgZGVsdGEgbGF0ZXIuXG4gICAgICAgIHJldHVybiB0aGlzLk5yLk1yKGUsIHQpLm5leHQoKCh7ZG9jdW1lbnRzOiBlLCBPcjogdH0pID0+IChcbiAgICAgICAgLy8gTm90ZTogYGdldEFsbEZyb21DYWNoZWAgcmV0dXJucyB0d28gbWFwcyBpbnN0ZWFkIG9mIGEgc2luZ2xlIG1hcCBmcm9tXG4gICAgICAgIC8vIGtleXMgdG8gYERvY3VtZW50U2l6ZUVudHJ5YHMuIFRoaXMgaXMgdG8gYWxsb3cgcmV0dXJuaW5nIHRoZVxuICAgICAgICAvLyBgTXV0YWJsZURvY3VtZW50TWFwYCBkaXJlY3RseSwgd2l0aG91dCBhIGNvbnZlcnNpb24uXG4gICAgICAgIHQuZm9yRWFjaCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIHRoaXMuQnIuc2V0KHQsIHtcbiAgICAgICAgICAgICAgICBzaXplOiBuLFxuICAgICAgICAgICAgICAgIHJlYWRUaW1lOiBlLmdldCh0KS5yZWFkVGltZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKSwgZSkpKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9kb2N1bWVudEdsb2JhbFN0b3JlKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2dldFN0b3JlKGUsIFBlKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIHJlbW90ZURvY3VtZW50cyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3JlbW90ZURvY3VtZW50c1N0b3JlKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2dldFN0b3JlKGUsIF9lKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEga2V5IHRoYXQgY2FuIGJlIHVzZWQgZm9yIGRvY3VtZW50IGxvb2t1cHMgb24gdGhlXG4gKiBgRGJSZW1vdGVEb2N1bWVudERvY3VtZW50S2V5SW5kZXhgIGluZGV4LlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9kYktleShlKSB7XG4gICAgY29uc3QgdCA9IGUucGF0aC50b0FycmF5KCk7XG4gICAgcmV0dXJuIFsgXG4gICAgLyogcHJlZml4IHBhdGggKi8gdC5zbGljZSgwLCB0Lmxlbmd0aCAtIDIpLCBcbiAgICAvKiBjb2xsZWN0aW9uIGlkICovIHRbdC5sZW5ndGggLSAyXSwgXG4gICAgLyogZG9jdW1lbnQgaWQgKi8gdFt0Lmxlbmd0aCAtIDFdIF07XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9kYkNvbGxlY3Rpb25Hcm91cEtleShlLCB0KSB7XG4gICAgY29uc3QgbiA9IHQuZG9jdW1lbnRLZXkucGF0aC50b0FycmF5KCk7XG4gICAgcmV0dXJuIFsgXG4gICAgLyogY29sbGVjdGlvbiBpZCAqLyBlLCBfX1BSSVZBVEVfdG9EYlRpbWVzdGFtcEtleSh0LnJlYWRUaW1lKSwgXG4gICAgLyogcHJlZml4IHBhdGggKi8gbi5zbGljZSgwLCBuLmxlbmd0aCAtIDIpLCBcbiAgICAvKiBkb2N1bWVudCBpZCAqLyBuLmxlbmd0aCA+IDAgPyBuW24ubGVuZ3RoIC0gMV0gOiBcIlwiIF07XG59XG5cbi8qKlxuICogQ29tcGFyYXRvciB0aGF0IGNvbXBhcmVzIGRvY3VtZW50IGtleXMgYWNjb3JkaW5nIHRvIHRoZSBwcmltYXJ5IGtleSBzb3J0aW5nXG4gKiB1c2VkIGJ5IHRoZSBgRGJSZW1vdGVEb2N1bWVudERvY3VtZW50YCBzdG9yZSAoYnkgcHJlZml4IHBhdGgsIGNvbGxlY3Rpb24gaWRcbiAqIGFuZCB0aGVuIGRvY3VtZW50IElEKS5cbiAqXG4gKiBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9kYktleUNvbXBhcmF0b3IoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBlLnBhdGgudG9BcnJheSgpLCByID0gdC5wYXRoLnRvQXJyYXkoKTtcbiAgICAvLyBUaGUgb3JkZXJpbmcgaXMgYmFzZWQgb24gaHR0cHM6Ly9jaHJvbWl1bS5nb29nbGVzb3VyY2UuY29tL2Nocm9taXVtL2JsaW5rLysvZmU1YzIxZmVmOTRkYWU3MWMxYzMzNDQ3NzViOGQ4YTdmN2U2ZDllYy9Tb3VyY2UvbW9kdWxlcy9pbmRleGVkZGIvSURCS2V5LmNwcCM3NFxuICAgIGxldCBpID0gMDtcbiAgICBmb3IgKGxldCBlID0gMDsgZSA8IG4ubGVuZ3RoIC0gMiAmJiBlIDwgci5sZW5ndGggLSAyOyArK2UpIGlmIChpID0gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IobltlXSwgcltlXSksIFxuICAgIGkpIHJldHVybiBpO1xuICAgIHJldHVybiBpID0gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3Iobi5sZW5ndGgsIHIubGVuZ3RoKSwgaSB8fCAoaSA9IF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKG5bbi5sZW5ndGggLSAyXSwgcltyLmxlbmd0aCAtIDJdKSwgXG4gICAgaSB8fCBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihuW24ubGVuZ3RoIC0gMV0sIHJbci5sZW5ndGggLSAxXSkpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBTY2hlbWEgVmVyc2lvbiBmb3IgdGhlIFdlYiBjbGllbnQ6XG4gKiAxLiAgSW5pdGlhbCB2ZXJzaW9uIGluY2x1ZGluZyBNdXRhdGlvbiBRdWV1ZSwgUXVlcnkgQ2FjaGUsIGFuZCBSZW1vdGVcbiAqICAgICBEb2N1bWVudCBDYWNoZVxuICogMi4gIFVzZWQgdG8gZW5zdXJlIGEgdGFyZ2V0R2xvYmFsIG9iamVjdCBleGlzdHMgYW5kIGFkZCB0YXJnZXRDb3VudCB0byBpdC4gTm9cbiAqICAgICBsb25nZXIgcmVxdWlyZWQgYmVjYXVzZSBtaWdyYXRpb24gMyB1bmNvbmRpdGlvbmFsbHkgY2xlYXJzIGl0LlxuICogMy4gIERyb3BwZWQgYW5kIHJlLWNyZWF0ZWQgUXVlcnkgQ2FjaGUgdG8gZGVhbCB3aXRoIGNhY2hlIGNvcnJ1cHRpb24gcmVsYXRlZFxuICogICAgIHRvIGxpbWJvIHJlc29sdXRpb24uIEFkZHJlc3Nlc1xuICogICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1pb3Mtc2RrL2lzc3Vlcy8xNTQ4XG4gKiA0LiAgTXVsdGktVGFiIFN1cHBvcnQuXG4gKiA1LiAgUmVtb3ZhbCBvZiBoZWxkIHdyaXRlIGFja3MuXG4gKiA2LiAgQ3JlYXRlIGRvY3VtZW50IGdsb2JhbCBmb3IgdHJhY2tpbmcgZG9jdW1lbnQgY2FjaGUgc2l6ZS5cbiAqIDcuICBFbnN1cmUgZXZlcnkgY2FjaGVkIGRvY3VtZW50IGhhcyBhIHNlbnRpbmVsIHJvdyB3aXRoIGEgc2VxdWVuY2UgbnVtYmVyLlxuICogOC4gIEFkZCBjb2xsZWN0aW9uLXBhcmVudCBpbmRleCBmb3IgQ29sbGVjdGlvbiBHcm91cCBxdWVyaWVzLlxuICogOS4gIENoYW5nZSBSZW1vdGVEb2N1bWVudENoYW5nZXMgc3RvcmUgdG8gYmUga2V5ZWQgYnkgcmVhZFRpbWUgcmF0aGVyIHRoYW5cbiAqICAgICBhbiBhdXRvLWluY3JlbWVudGluZyBJRC4gVGhpcyBpcyByZXF1aXJlZCBmb3IgSW5kZXgtRnJlZSBxdWVyaWVzLlxuICogMTAuIFJld3JpdGUgdGhlIGNhbm9uaWNhbCBJRHMgdG8gdGhlIGV4cGxpY2l0IFByb3RvYnVmLWJhc2VkIGZvcm1hdC5cbiAqIDExLiBBZGQgYnVuZGxlcyBhbmQgbmFtZWRfcXVlcmllcyBmb3IgYnVuZGxlIHN1cHBvcnQuXG4gKiAxMi4gQWRkIGRvY3VtZW50IG92ZXJsYXlzLlxuICogMTMuIFJld3JpdGUgdGhlIGtleXMgb2YgdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZSB0byBhbGxvdyBmb3IgZWZmaWNpZW50XG4gKiAgICAgZG9jdW1lbnQgbG9va3VwIHZpYSBgZ2V0QWxsKClgLlxuICogMTQuIEFkZCBvdmVybGF5cy5cbiAqIDE1LiBBZGQgaW5kZXhpbmcgc3VwcG9ydC5cbiAqIDE2LiBQYXJzZSB0aW1lc3RhbXAgc3RyaW5ncyBiZWZvcmUgY3JlYXRpbmcgaW5kZXggZW50cmllcy5cbiAqIDE3LiBUT0RPKHRvbWFuZGVyc2VuKVxuICogMTguIEVuY29kZSBrZXkgc2FmZSByZXByZXNlbnRhdGlvbnMgb2YgSW5kZXhFbnRyeSBpbiBEYkluZGV4RW50cnlTdG9yZS5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVwcmVzZW50cyBhIGxvY2FsIHZpZXcgKG92ZXJsYXkpIG9mIGEgZG9jdW1lbnQsIGFuZCB0aGUgZmllbGRzIHRoYXQgYXJlXG4gKiBsb2NhbGx5IG11dGF0ZWQuXG4gKi9cbmNsYXNzIE92ZXJsYXllZERvY3VtZW50IHtcbiAgICBjb25zdHJ1Y3RvcihlLCBcbiAgICAvKipcbiAgICAgKiBUaGUgZmllbGRzIHRoYXQgYXJlIGxvY2FsbHkgbXV0YXRlZCBieSBwYXRjaCBtdXRhdGlvbnMuXG4gICAgICpcbiAgICAgKiBJZiB0aGUgb3ZlcmxheWVkXHRkb2N1bWVudCBpcyBmcm9tIHNldCBvciBkZWxldGUgbXV0YXRpb25zLCB0aGlzIGlzIGBudWxsYC5cbiAgICAgKiBJZiB0aGVyZSBpcyBubyBvdmVybGF5IChtdXRhdGlvbikgZm9yIHRoZSBkb2N1bWVudCwgdGhpcyBpcyBhbiBlbXB0eSBgRmllbGRNYXNrYC5cbiAgICAgKi9cbiAgICB0KSB7XG4gICAgICAgIHRoaXMub3ZlcmxheWVkRG9jdW1lbnQgPSBlLCB0aGlzLm11dGF0ZWRGaWVsZHMgPSB0O1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSByZWFkb25seSB2aWV3IG9mIHRoZSBsb2NhbCBzdGF0ZSBvZiBhbGwgZG9jdW1lbnRzIHdlJ3JlIHRyYWNraW5nIChpLmUuIHdlXG4gKiBoYXZlIGEgY2FjaGVkIHZlcnNpb24gaW4gcmVtb3RlRG9jdW1lbnRDYWNoZSBvciBsb2NhbCBtdXRhdGlvbnMgZm9yIHRoZVxuICogZG9jdW1lbnQpLiBUaGUgdmlldyBpcyBjb21wdXRlZCBieSBhcHBseWluZyB0aGUgbXV0YXRpb25zIGluIHRoZVxuICogTXV0YXRpb25RdWV1ZSB0byB0aGUgUmVtb3RlRG9jdW1lbnRDYWNoZS5cbiAqLyBjbGFzcyBMb2NhbERvY3VtZW50c1ZpZXcge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlID0gZSwgdGhpcy5tdXRhdGlvblF1ZXVlID0gdCwgdGhpcy5kb2N1bWVudE92ZXJsYXlDYWNoZSA9IG4sIFxuICAgICAgICB0aGlzLmluZGV4TWFuYWdlciA9IHI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbG9jYWwgdmlldyBvZiB0aGUgZG9jdW1lbnQgaWRlbnRpZmllZCBieSBga2V5YC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIExvY2FsIHZpZXcgb2YgdGhlIGRvY3VtZW50IG9yIG51bGwgaWYgd2UgZG9uJ3QgaGF2ZSBhbnkgY2FjaGVkXG4gICAgICogc3RhdGUgZm9yIGl0LlxuICAgICAqLyAgICBnZXREb2N1bWVudChlLCB0KSB7XG4gICAgICAgIGxldCBuID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jdW1lbnRPdmVybGF5Q2FjaGUuZ2V0T3ZlcmxheShlLCB0KS5uZXh0KChyID0+IChuID0gciwgdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlLmdldEVudHJ5KGUsIHQpKSkpLm5leHQoKGUgPT4gKG51bGwgIT09IG4gJiYgX19QUklWQVRFX211dGF0aW9uQXBwbHlUb0xvY2FsVmlldyhuLm11dGF0aW9uLCBlLCBGaWVsZE1hc2suZW1wdHkoKSwgVGltZXN0YW1wLm5vdygpKSwgXG4gICAgICAgIGUpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGxvY2FsIHZpZXcgb2YgdGhlIGRvY3VtZW50cyBpZGVudGlmaWVkIGJ5IGBrZXlzYC5cbiAgICAgKlxuICAgICAqIElmIHdlIGRvbid0IGhhdmUgY2FjaGVkIHN0YXRlIGZvciBhIGRvY3VtZW50IGluIGBrZXlzYCwgYSBOb0RvY3VtZW50IHdpbGxcbiAgICAgKiBiZSBzdG9yZWQgZm9yIHRoYXQga2V5IGluIHRoZSByZXN1bHRpbmcgc2V0LlxuICAgICAqLyAgICBnZXREb2N1bWVudHMoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlLmdldEVudHJpZXMoZSwgdCkubmV4dCgodCA9PiB0aGlzLmdldExvY2FsVmlld09mRG9jdW1lbnRzKGUsIHQsIF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpKS5uZXh0KCgoKSA9PiB0KSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2ltaWxhciB0byBgZ2V0RG9jdW1lbnRzYCwgYnV0IGNyZWF0ZXMgdGhlIGxvY2FsIHZpZXcgZnJvbSB0aGUgZ2l2ZW5cbiAgICAgKiBgYmFzZURvY3NgIHdpdGhvdXQgcmV0cmlldmluZyBkb2N1bWVudHMgZnJvbSB0aGUgbG9jYWwgc3RvcmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHJhbnNhY3Rpb24gLSBUaGUgdHJhbnNhY3Rpb24gdGhpcyBvcGVyYXRpb24gaXMgc2NvcGVkIHRvLlxuICAgICAqIEBwYXJhbSBkb2NzIC0gVGhlIGRvY3VtZW50cyB0byBhcHBseSBsb2NhbCBtdXRhdGlvbnMgdG8gZ2V0IHRoZSBsb2NhbCB2aWV3cy5cbiAgICAgKiBAcGFyYW0gZXhpc3RlbmNlU3RhdGVDaGFuZ2VkIC0gVGhlIHNldCBvZiBkb2N1bWVudCBrZXlzIHdob3NlIGV4aXN0ZW5jZSBzdGF0ZVxuICAgICAqICAgaXMgY2hhbmdlZC4gVGhpcyBpcyB1c2VmdWwgdG8gZGV0ZXJtaW5lIGlmIHNvbWUgZG9jdW1lbnRzIG92ZXJsYXkgbmVlZHNcbiAgICAgKiAgIHRvIGJlIHJlY2FsY3VsYXRlZC5cbiAgICAgKi8gICAgZ2V0TG9jYWxWaWV3T2ZEb2N1bWVudHMoZSwgdCwgbiA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpKSB7XG4gICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfbmV3T3ZlcmxheU1hcCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5wb3B1bGF0ZU92ZXJsYXlzKGUsIHIsIHQpLm5leHQoKCgpID0+IHRoaXMuY29tcHV0ZVZpZXdzKGUsIHQsIHIsIG4pLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgbGV0IHQgPSBkb2N1bWVudE1hcCgpO1xuICAgICAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgoKGUsIG4pID0+IHtcbiAgICAgICAgICAgICAgICB0ID0gdC5pbnNlcnQoZSwgbi5vdmVybGF5ZWREb2N1bWVudCk7XG4gICAgICAgICAgICB9KSksIHQ7XG4gICAgICAgIH0pKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBvdmVybGF5ZWQgZG9jdW1lbnRzIGZvciB0aGUgZ2l2ZW4gZG9jdW1lbnQgbWFwLCB3aGljaCB3aWxsIGluY2x1ZGVcbiAgICAgKiB0aGUgbG9jYWwgdmlldyBvZiB0aG9zZSBkb2N1bWVudHMgYW5kIGEgYEZpZWxkTWFza2AgaW5kaWNhdGluZyB3aGljaCBmaWVsZHNcbiAgICAgKiBhcmUgbXV0YXRlZCBsb2NhbGx5LCBgbnVsbGAgaWYgb3ZlcmxheSBpcyBhIFNldCBvciBEZWxldGUgbXV0YXRpb24uXG4gICAgICovICAgIGdldE92ZXJsYXllZERvY3VtZW50cyhlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfbmV3T3ZlcmxheU1hcCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5wb3B1bGF0ZU92ZXJsYXlzKGUsIG4sIHQpLm5leHQoKCgpID0+IHRoaXMuY29tcHV0ZVZpZXdzKGUsIHQsIG4sIF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGZXRjaGVzIHRoZSBvdmVybGF5cyBmb3Ige0Bjb2RlIGRvY3N9IGFuZCBhZGRzIHRoZW0gdG8gcHJvdmlkZWQgb3ZlcmxheSBtYXBcbiAgICAgKiBpZiB0aGUgbWFwIGRvZXMgbm90IGFscmVhZHkgY29udGFpbiBhbiBlbnRyeSBmb3IgdGhlIGdpdmVuIGRvY3VtZW50IGtleS5cbiAgICAgKi8gICAgcG9wdWxhdGVPdmVybGF5cyhlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSBbXTtcbiAgICAgICAgcmV0dXJuIG4uZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICB0LmhhcyhlKSB8fCByLnB1c2goZSk7XG4gICAgICAgIH0pKSwgdGhpcy5kb2N1bWVudE92ZXJsYXlDYWNoZS5nZXRPdmVybGF5cyhlLCByKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGUuZm9yRWFjaCgoKGUsIG4pID0+IHtcbiAgICAgICAgICAgICAgICB0LnNldChlLCBuKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21wdXRlcyB0aGUgbG9jYWwgdmlldyBmb3IgdGhlIGdpdmVuIGRvY3VtZW50cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2NzIC0gVGhlIGRvY3VtZW50cyB0byBjb21wdXRlIHZpZXdzIGZvci4gSXQgYWxzbyBoYXMgdGhlIGJhc2VcbiAgICAgKiAgIHZlcnNpb24gb2YgdGhlIGRvY3VtZW50cy5cbiAgICAgKiBAcGFyYW0gb3ZlcmxheXMgLSBUaGUgb3ZlcmxheXMgdGhhdCBuZWVkIHRvIGJlIGFwcGxpZWQgdG8gdGhlIGdpdmVuIGJhc2VcbiAgICAgKiAgIHZlcnNpb24gb2YgdGhlIGRvY3VtZW50cy5cbiAgICAgKiBAcGFyYW0gZXhpc3RlbmNlU3RhdGVDaGFuZ2VkIC0gQSBzZXQgb2YgZG9jdW1lbnRzIHdob3NlIGV4aXN0ZW5jZSBzdGF0ZXNcbiAgICAgKiAgIG1pZ2h0IGhhdmUgY2hhbmdlZC4gVGhpcyBpcyB1c2VkIHRvIGRldGVybWluZSBpZiB3ZSBuZWVkIHRvIHJlLWNhbGN1bGF0ZVxuICAgICAqICAgb3ZlcmxheXMgZnJvbSBtdXRhdGlvbiBxdWV1ZXMuXG4gICAgICogQHJldHVybiBBIG1hcCByZXByZXNlbnRzIHRoZSBsb2NhbCBkb2N1bWVudHMgdmlldy5cbiAgICAgKi8gICAgY29tcHV0ZVZpZXdzKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgbGV0IGkgPSBfX1BSSVZBVEVfbXV0YWJsZURvY3VtZW50TWFwKCk7XG4gICAgICAgIGNvbnN0IHMgPSBfX1BSSVZBVEVfbmV3RG9jdW1lbnRLZXlNYXAoKSwgbyA9IGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdPdmVybGF5ZWREb2N1bWVudE1hcCgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX1BSSVZBVEVfbmV3RG9jdW1lbnRLZXlNYXAoKTtcbiAgICAgICAgfSgpO1xuICAgICAgICByZXR1cm4gdC5mb3JFYWNoKCgoZSwgdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbyA9IG4uZ2V0KHQua2V5KTtcbiAgICAgICAgICAgIC8vIFJlY2FsY3VsYXRlIGFuIG92ZXJsYXkgaWYgdGhlIGRvY3VtZW50J3MgZXhpc3RlbmNlIHN0YXRlIGNoYW5nZWQgZHVlIHRvXG4gICAgICAgICAgICAvLyBhIHJlbW90ZSBldmVudCAqYW5kKiB0aGUgb3ZlcmxheSBpcyBhIFBhdGNoTXV0YXRpb24uIFRoaXMgaXMgYmVjYXVzZVxuICAgICAgICAgICAgLy8gZG9jdW1lbnQgZXhpc3RlbmNlIHN0YXRlIGNhbiBjaGFuZ2UgaWYgc29tZSBwYXRjaCBtdXRhdGlvbidzXG4gICAgICAgICAgICAvLyBwcmVjb25kaXRpb25zIGFyZSBtZXQuXG4gICAgICAgICAgICAvLyBOT1RFOiB3ZSByZWNhbGN1bGF0ZSB3aGVuIGBvdmVybGF5YCBpcyB1bmRlZmluZWQgYXMgd2VsbCwgYmVjYXVzZSB0aGVyZVxuICAgICAgICAgICAgLy8gbWlnaHQgYmUgYSBwYXRjaCBtdXRhdGlvbiB3aG9zZSBwcmVjb25kaXRpb24gZG9lcyBub3QgbWF0Y2ggYmVmb3JlIHRoZVxuICAgICAgICAgICAgLy8gY2hhbmdlIChoZW5jZSBvdmVybGF5IGlzIHVuZGVmaW5lZCksIGJ1dCB3b3VsZCBub3cgbWF0Y2guXG4gICAgICAgICAgICAgICAgICAgICAgICByLmhhcyh0LmtleSkgJiYgKHZvaWQgMCA9PT0gbyB8fCBvLm11dGF0aW9uIGluc3RhbmNlb2YgX19QUklWQVRFX1BhdGNoTXV0YXRpb24pID8gaSA9IGkuaW5zZXJ0KHQua2V5LCB0KSA6IHZvaWQgMCAhPT0gbyA/IChzLnNldCh0LmtleSwgby5tdXRhdGlvbi5nZXRGaWVsZE1hc2soKSksIFxuICAgICAgICAgICAgX19QUklWQVRFX211dGF0aW9uQXBwbHlUb0xvY2FsVmlldyhvLm11dGF0aW9uLCB0LCBvLm11dGF0aW9uLmdldEZpZWxkTWFzaygpLCBUaW1lc3RhbXAubm93KCkpKSA6IFxuICAgICAgICAgICAgLy8gbm8gb3ZlcmxheSBleGlzdHNcbiAgICAgICAgICAgIC8vIFVzaW5nIEVNUFRZIHRvIGluZGljYXRlIHRoZXJlIGlzIG5vIG92ZXJsYXkgZm9yIHRoZSBkb2N1bWVudC5cbiAgICAgICAgICAgIHMuc2V0KHQua2V5LCBGaWVsZE1hc2suZW1wdHkoKSk7XG4gICAgICAgIH0pKSwgdGhpcy5yZWNhbGN1bGF0ZUFuZFNhdmVPdmVybGF5cyhlLCBpKS5uZXh0KChlID0+IChlLmZvckVhY2goKChlLCB0KSA9PiBzLnNldChlLCB0KSkpLCBcbiAgICAgICAgdC5mb3JFYWNoKCgoZSwgdCkgPT4gby5zZXQoZSwgbmV3IE92ZXJsYXllZERvY3VtZW50KHQsIHMuZ2V0KGUpID8/IG51bGwpKSkpLCBvKSkpO1xuICAgIH1cbiAgICByZWNhbGN1bGF0ZUFuZFNhdmVPdmVybGF5cyhlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfbmV3RG9jdW1lbnRLZXlNYXAoKTtcbiAgICAgICAgLy8gQSByZXZlcnNlIGxvb2t1cCBtYXAgZnJvbSBiYXRjaCBpZCB0byB0aGUgZG9jdW1lbnRzIHdpdGhpbiB0aGF0IGJhdGNoLlxuICAgICAgICAgICAgICAgIGxldCByID0gbmV3IFNvcnRlZE1hcCgoKGUsIHQpID0+IGUgLSB0KSksIGkgPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubXV0YXRpb25RdWV1ZS5nZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleXMoZSwgdCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGkgb2YgZSkgaS5rZXlzKCkuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IHQuZ2V0KGUpO1xuICAgICAgICAgICAgICAgIGlmIChudWxsID09PSBzKSByZXR1cm47XG4gICAgICAgICAgICAgICAgbGV0IG8gPSBuLmdldChlKSB8fCBGaWVsZE1hc2suZW1wdHkoKTtcbiAgICAgICAgICAgICAgICBvID0gaS5hcHBseVRvTG9jYWxWaWV3KHMsIG8pLCBuLnNldChlLCBvKTtcbiAgICAgICAgICAgICAgICBjb25zdCBfID0gKHIuZ2V0KGkuYmF0Y2hJZCkgfHwgX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCkpLmFkZChlKTtcbiAgICAgICAgICAgICAgICByID0gci5pbnNlcnQoaS5iYXRjaElkLCBfKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBbXSwgbyA9IHIuZ2V0UmV2ZXJzZUl0ZXJhdG9yKCk7XG4gICAgICAgICAgICAvLyBJdGVyYXRlIGluIGRlc2NlbmRpbmcgb3JkZXIgb2YgYmF0Y2ggSURzLCBhbmQgc2tpcCBkb2N1bWVudHMgdGhhdCBhcmVcbiAgICAgICAgICAgIC8vIGFscmVhZHkgc2F2ZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDtvLmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IG8uZ2V0TmV4dCgpLCBfID0gci5rZXksIGEgPSByLnZhbHVlLCB1ID0gX19QUklWQVRFX25ld011dGF0aW9uTWFwKCk7XG4gICAgICAgICAgICAgICAgYS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpLmhhcyhlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9jYWxjdWxhdGVPdmVybGF5TXV0YXRpb24odC5nZXQoZSksIG4uZ2V0KGUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgIT09IHIgJiYgdS5zZXQoZSwgciksIGkgPSBpLmFkZChlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pKSwgcy5wdXNoKHRoaXMuZG9jdW1lbnRPdmVybGF5Q2FjaGUuc2F2ZU92ZXJsYXlzKGUsIF8sIHUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihzKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVjYWxjdWxhdGVzIG92ZXJsYXlzIGJ5IHJlYWRpbmcgdGhlIGRvY3VtZW50cyBmcm9tIHJlbW90ZSBkb2N1bWVudCBjYWNoZVxuICAgICAqIGZpcnN0LCBhbmQgc2F2ZXMgdGhlbSBhZnRlciB0aGV5IGFyZSBjYWxjdWxhdGVkLlxuICAgICAqLyAgICByZWNhbGN1bGF0ZUFuZFNhdmVPdmVybGF5c0ZvckRvY3VtZW50S2V5cyhlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGUuZ2V0RW50cmllcyhlLCB0KS5uZXh0KCh0ID0+IHRoaXMucmVjYWxjdWxhdGVBbmRTYXZlT3ZlcmxheXMoZSwgdCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgYSBxdWVyeSBhZ2FpbnN0IHRoZSBsb2NhbCB2aWV3IG9mIGFsbCBkb2N1bWVudHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHJhbnNhY3Rpb24gLSBUaGUgcGVyc2lzdGVuY2UgdHJhbnNhY3Rpb24uXG4gICAgICogQHBhcmFtIHF1ZXJ5IC0gVGhlIHF1ZXJ5IHRvIG1hdGNoIGRvY3VtZW50cyBhZ2FpbnN0LlxuICAgICAqIEBwYXJhbSBvZmZzZXQgLSBSZWFkIHRpbWUgYW5kIGtleSB0byBzdGFydCBzY2FubmluZyBieSAoZXhjbHVzaXZlKS5cbiAgICAgKiBAcGFyYW0gY29udGV4dCAtIEEgb3B0aW9uYWwgdHJhY2tlciB0byBrZWVwIGEgcmVjb3JkIG9mIGltcG9ydGFudCBkZXRhaWxzXG4gICAgICogICBkdXJpbmcgZGF0YWJhc2UgbG9jYWwgcXVlcnkgZXhlY3V0aW9uLlxuICAgICAqLyAgICBnZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KGUsIHQsIG4sIHIpIHtcbiAgICAgICAgLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHF1ZXJ5IG1hdGNoZXMgYSBzaW5nbGUgZG9jdW1lbnQgYnkgcGF0aCAocmF0aGVyIHRoYW4gYVxuICogY29sbGVjdGlvbikuXG4gKi9cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9pc0RvY3VtZW50UXVlcnkkMShlKSB7XG4gICAgICAgICAgICByZXR1cm4gRG9jdW1lbnRLZXkuaXNEb2N1bWVudEtleShlLnBhdGgpICYmIG51bGwgPT09IGUuY29sbGVjdGlvbkdyb3VwICYmIDAgPT09IGUuZmlsdGVycy5sZW5ndGg7XG4gICAgICAgIH0odCkgPyB0aGlzLmdldERvY3VtZW50c01hdGNoaW5nRG9jdW1lbnRRdWVyeShlLCB0LnBhdGgpIDogX19QUklWQVRFX2lzQ29sbGVjdGlvbkdyb3VwUXVlcnkodCkgPyB0aGlzLmdldERvY3VtZW50c01hdGNoaW5nQ29sbGVjdGlvbkdyb3VwUXVlcnkoZSwgdCwgbiwgcikgOiB0aGlzLmdldERvY3VtZW50c01hdGNoaW5nQ29sbGVjdGlvblF1ZXJ5KGUsIHQsIG4sIHIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHaXZlbiBhIGNvbGxlY3Rpb24gZ3JvdXAsIHJldHVybnMgdGhlIG5leHQgZG9jdW1lbnRzIHRoYXQgZm9sbG93IHRoZSBwcm92aWRlZCBvZmZzZXQsIGFsb25nXG4gICAgICogd2l0aCBhbiB1cGRhdGVkIGJhdGNoIElELlxuICAgICAqXG4gICAgICogPHA+VGhlIGRvY3VtZW50cyByZXR1cm5lZCBieSB0aGlzIG1ldGhvZCBhcmUgb3JkZXJlZCBieSByZW1vdGUgdmVyc2lvbiBmcm9tIHRoZSBwcm92aWRlZFxuICAgICAqIG9mZnNldC4gSWYgdGhlcmUgYXJlIG5vIG1vcmUgcmVtb3RlIGRvY3VtZW50cyBhZnRlciB0aGUgcHJvdmlkZWQgb2Zmc2V0LCBkb2N1bWVudHMgd2l0aFxuICAgICAqIG11dGF0aW9ucyBpbiBvcmRlciBvZiBiYXRjaCBpZCBmcm9tIHRoZSBvZmZzZXQgYXJlIHJldHVybmVkLiBTaW5jZSBhbGwgZG9jdW1lbnRzIGluIGEgYmF0Y2ggYXJlXG4gICAgICogcmV0dXJuZWQgdG9nZXRoZXIsIHRoZSB0b3RhbCBudW1iZXIgb2YgZG9jdW1lbnRzIHJldHVybmVkIGNhbiBleGNlZWQge0Bjb2RlIGNvdW50fS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0cmFuc2FjdGlvblxuICAgICAqIEBwYXJhbSBjb2xsZWN0aW9uR3JvdXAgVGhlIGNvbGxlY3Rpb24gZ3JvdXAgZm9yIHRoZSBkb2N1bWVudHMuXG4gICAgICogQHBhcmFtIG9mZnNldCBUaGUgb2Zmc2V0IHRvIGluZGV4IGludG8uXG4gICAgICogQHBhcmFtIGNvdW50IFRoZSBudW1iZXIgb2YgZG9jdW1lbnRzIHRvIHJldHVyblxuICAgICAqIEByZXR1cm4gQSBMb2NhbFdyaXRlUmVzdWx0IHdpdGggdGhlIGRvY3VtZW50cyB0aGF0IGZvbGxvdyB0aGUgcHJvdmlkZWQgb2Zmc2V0IGFuZCB0aGUgbGFzdCBwcm9jZXNzZWQgYmF0Y2ggaWQuXG4gICAgICovICAgIGdldE5leHREb2N1bWVudHMoZSwgdCwgbiwgcikge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlLmdldEFsbEZyb21Db2xsZWN0aW9uR3JvdXAoZSwgdCwgbiwgcikubmV4dCgoaSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gciAtIGkuc2l6ZSA+IDAgPyB0aGlzLmRvY3VtZW50T3ZlcmxheUNhY2hlLmdldE92ZXJsYXlzRm9yQ29sbGVjdGlvbkdyb3VwKGUsIHQsIG4ubGFyZ2VzdEJhdGNoSWQsIHIgLSBpLnNpemUpIDogUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoX19QUklWQVRFX25ld092ZXJsYXlNYXAoKSk7XG4gICAgICAgICAgICAvLyBUaGUgY2FsbHNpdGUgd2lsbCB1c2UgdGhlIGxhcmdlc3QgYmF0Y2ggSUQgdG9nZXRoZXIgd2l0aCB0aGUgbGF0ZXN0IHJlYWQgdGltZSB0byBjcmVhdGVcbiAgICAgICAgICAgIC8vIGEgbmV3IGluZGV4IG9mZnNldC4gU2luY2Ugd2Ugb25seSBwcm9jZXNzIGJhdGNoIElEcyBpZiBhbGwgcmVtb3RlIGRvY3VtZW50cyBoYXZlIGJlZW4gcmVhZCxcbiAgICAgICAgICAgIC8vIG5vIG92ZXJsYXkgd2lsbCBpbmNyZWFzZSB0aGUgb3ZlcmFsbCByZWFkIHRpbWUuIFRoaXMgaXMgd2h5IHdlIG9ubHkgbmVlZCB0byBzcGVjaWFsIGNhc2VcbiAgICAgICAgICAgIC8vIHRoZSBiYXRjaCBpZC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvID0gVSwgXyA9IGk7XG4gICAgICAgICAgICByZXR1cm4gcy5uZXh0KCh0ID0+IFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHQsICgodCwgbikgPT4gKG8gPCBuLmxhcmdlc3RCYXRjaElkICYmIChvID0gbi5sYXJnZXN0QmF0Y2hJZCksIFxuICAgICAgICAgICAgaS5nZXQodCkgPyBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpIDogdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlLmdldEVudHJ5KGUsIHQpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgICAgIF8gPSBfLmluc2VydCh0LCBlKTtcbiAgICAgICAgICAgIH0pKSkpKS5uZXh0KCgoKSA9PiB0aGlzLnBvcHVsYXRlT3ZlcmxheXMoZSwgdCwgaSkpKS5uZXh0KCgoKSA9PiB0aGlzLmNvbXB1dGVWaWV3cyhlLCBfLCB0LCBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKSkpKS5uZXh0KChlID0+ICh7XG4gICAgICAgICAgICAgICAgYmF0Y2hJZDogbyxcbiAgICAgICAgICAgICAgICBjaGFuZ2VzOiBfX1BSSVZBVEVfY29udmVydE92ZXJsYXllZERvY3VtZW50TWFwVG9Eb2N1bWVudE1hcChlKVxuICAgICAgICAgICAgfSkpKSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldERvY3VtZW50c01hdGNoaW5nRG9jdW1lbnRRdWVyeShlLCB0KSB7XG4gICAgICAgIC8vIEp1c3QgZG8gYSBzaW1wbGUgZG9jdW1lbnQgbG9va3VwLlxuICAgICAgICByZXR1cm4gdGhpcy5nZXREb2N1bWVudChlLCBuZXcgRG9jdW1lbnRLZXkodCkpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgbGV0IHQgPSBkb2N1bWVudE1hcCgpO1xuICAgICAgICAgICAgcmV0dXJuIGUuaXNGb3VuZERvY3VtZW50KCkgJiYgKHQgPSB0Lmluc2VydChlLmtleSwgZSkpLCB0O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldERvY3VtZW50c01hdGNoaW5nQ29sbGVjdGlvbkdyb3VwUXVlcnkoZSwgdCwgbiwgcikge1xuICAgICAgICBjb25zdCBpID0gdC5jb2xsZWN0aW9uR3JvdXA7XG4gICAgICAgIGxldCBzID0gZG9jdW1lbnRNYXAoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXhNYW5hZ2VyLmdldENvbGxlY3Rpb25QYXJlbnRzKGUsIGkpLm5leHQoKG8gPT4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2gobywgKG8gPT4ge1xuICAgICAgICAgICAgY29uc3QgXyA9IGZ1bmN0aW9uIF9fUFJJVkFURV9hc0NvbGxlY3Rpb25RdWVyeUF0UGF0aChlLCB0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfUXVlcnlJbXBsKHQsIFxuICAgICAgICAgICAgICAgIC8qY29sbGVjdGlvbkdyb3VwPSovIG51bGwsIGUuZXhwbGljaXRPcmRlckJ5LnNsaWNlKCksIGUuZmlsdGVycy5zbGljZSgpLCBlLmxpbWl0LCBlLmxpbWl0VHlwZSwgZS5zdGFydEF0LCBlLmVuZEF0KTtcbiAgICAgICAgICAgIH0odCwgby5jaGlsZChpKSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXREb2N1bWVudHNNYXRjaGluZ0NvbGxlY3Rpb25RdWVyeShlLCBfLCBuLCByKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgICAgICBlLmZvckVhY2goKChlLCB0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHMgPSBzLmluc2VydChlLCB0KTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBzKSkpKTtcbiAgICB9XG4gICAgZ2V0RG9jdW1lbnRzTWF0Y2hpbmdDb2xsZWN0aW9uUXVlcnkoZSwgdCwgbiwgcikge1xuICAgICAgICAvLyBRdWVyeSB0aGUgcmVtb3RlIGRvY3VtZW50cyBhbmQgb3ZlcmxheSBtdXRhdGlvbnMuXG4gICAgICAgIGxldCBpO1xuICAgICAgICByZXR1cm4gdGhpcy5kb2N1bWVudE92ZXJsYXlDYWNoZS5nZXRPdmVybGF5c0ZvckNvbGxlY3Rpb24oZSwgdC5wYXRoLCBuLmxhcmdlc3RCYXRjaElkKS5uZXh0KChzID0+IChpID0gcywgXG4gICAgICAgIHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZS5nZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KGUsIHQsIG4sIGksIHIpKSkpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgLy8gQXMgZG9jdW1lbnRzIG1pZ2h0IG1hdGNoIHRoZSBxdWVyeSBiZWNhdXNlIG9mIHRoZWlyIG92ZXJsYXkgd2UgbmVlZCB0b1xuICAgICAgICAgICAgLy8gaW5jbHVkZSBkb2N1bWVudHMgZm9yIGFsbCBvdmVybGF5cyBpbiB0aGUgaW5pdGlhbCBkb2N1bWVudCBzZXQuXG4gICAgICAgICAgICBpLmZvckVhY2goKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IG4uZ2V0S2V5KCk7XG4gICAgICAgICAgICAgICAgbnVsbCA9PT0gZS5nZXQocikgJiYgKGUgPSBlLmluc2VydChyLCBNdXRhYmxlRG9jdW1lbnQubmV3SW52YWxpZERvY3VtZW50KHIpKSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAvLyBBcHBseSB0aGUgb3ZlcmxheXMgYW5kIG1hdGNoIGFnYWluc3QgdGhlIHF1ZXJ5LlxuICAgICAgICAgICAgbGV0IG4gPSBkb2N1bWVudE1hcCgpO1xuICAgICAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgoKGUsIHIpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gaS5nZXQoZSk7XG4gICAgICAgICAgICAgICAgdm9pZCAwICE9PSBzICYmIF9fUFJJVkFURV9tdXRhdGlvbkFwcGx5VG9Mb2NhbFZpZXcocy5tdXRhdGlvbiwgciwgRmllbGRNYXNrLmVtcHR5KCksIFRpbWVzdGFtcC5ub3coKSksIFxuICAgICAgICAgICAgICAgIC8vIEZpbmFsbHksIGluc2VydCB0aGUgZG9jdW1lbnRzIHRoYXQgc3RpbGwgbWF0Y2ggdGhlIHF1ZXJ5XG4gICAgICAgICAgICAgICAgX19QUklWQVRFX3F1ZXJ5TWF0Y2hlcyh0LCByKSAmJiAobiA9IG4uaW5zZXJ0KGUsIHIpKTtcbiAgICAgICAgICAgIH0pKSwgbjtcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgX19QUklWQVRFX01lbW9yeUJ1bmRsZUNhY2hlIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuc2VyaWFsaXplciA9IGUsIHRoaXMuTHIgPSBuZXcgTWFwLCB0aGlzLmtyID0gbmV3IE1hcDtcbiAgICB9XG4gICAgZ2V0QnVuZGxlTWV0YWRhdGEoZSwgdCkge1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5Mci5nZXQodCkpO1xuICAgIH1cbiAgICBzYXZlQnVuZGxlTWV0YWRhdGEoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5Mci5zZXQodC5pZCwgXG4gICAgICAgIC8qKiBEZWNvZGVzIGEgQnVuZGxlTWV0YWRhdGEgcHJvdG8gaW50byBhIEJ1bmRsZU1ldGFkYXRhIG9iamVjdC4gKi9cbiAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX2Zyb21CdW5kbGVNZXRhZGF0YShlKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlkOiBlLmlkLFxuICAgICAgICAgICAgICAgIHZlcnNpb246IGUudmVyc2lvbixcbiAgICAgICAgICAgICAgICBjcmVhdGVUaW1lOiBfX1BSSVZBVEVfZnJvbVZlcnNpb24oZS5jcmVhdGVUaW1lKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSh0KSksIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldE5hbWVkUXVlcnkoZSwgdCkge1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5rci5nZXQodCkpO1xuICAgIH1cbiAgICBzYXZlTmFtZWRRdWVyeShlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmtyLnNldCh0Lm5hbWUsIGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tUHJvdG9OYW1lZFF1ZXJ5KGUpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbmFtZTogZS5uYW1lLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBfX1BSSVZBVEVfZnJvbUJ1bmRsZWRRdWVyeShlLmJ1bmRsZWRRdWVyeSksXG4gICAgICAgICAgICAgICAgcmVhZFRpbWU6IF9fUFJJVkFURV9mcm9tVmVyc2lvbihlLnJlYWRUaW1lKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSh0KSksIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbi1tZW1vcnkgaW1wbGVtZW50YXRpb24gb2YgRG9jdW1lbnRPdmVybGF5Q2FjaGUuXG4gKi8gY2xhc3MgX19QUklWQVRFX01lbW9yeURvY3VtZW50T3ZlcmxheUNhY2hlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLy8gQSBtYXAgc29ydGVkIGJ5IERvY3VtZW50S2V5LCB3aG9zZSB2YWx1ZSBpcyBhIHBhaXIgb2YgdGhlIGxhcmdlc3QgYmF0Y2ggaWRcbiAgICAgICAgLy8gZm9yIHRoZSBvdmVybGF5IGFuZCB0aGUgb3ZlcmxheSBpdHNlbGYuXG4gICAgICAgIHRoaXMub3ZlcmxheXMgPSBuZXcgU29ydGVkTWFwKERvY3VtZW50S2V5LmNvbXBhcmF0b3IpLCB0aGlzLnFyID0gbmV3IE1hcDtcbiAgICB9XG4gICAgZ2V0T3ZlcmxheShlLCB0KSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLm92ZXJsYXlzLmdldCh0KSk7XG4gICAgfVxuICAgIGdldE92ZXJsYXlzKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9uZXdPdmVybGF5TWFwKCk7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaCh0LCAodCA9PiB0aGlzLmdldE92ZXJsYXkoZSwgdCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBudWxsICE9PSBlICYmIG4uc2V0KHQsIGUpO1xuICAgICAgICB9KSkpKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIHNhdmVPdmVybGF5cyhlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiBuLmZvckVhY2goKChuLCByKSA9PiB7XG4gICAgICAgICAgICB0aGlzLlN0KGUsIHQsIHIpO1xuICAgICAgICB9KSksIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJlbW92ZU92ZXJsYXlzRm9yQmF0Y2hJZChlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLnFyLmdldChuKTtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gciAmJiAoci5mb3JFYWNoKChlID0+IHRoaXMub3ZlcmxheXMgPSB0aGlzLm92ZXJsYXlzLnJlbW92ZShlKSkpLCBcbiAgICAgICAgdGhpcy5xci5kZWxldGUobikpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXRPdmVybGF5c0ZvckNvbGxlY3Rpb24oZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gX19QUklWQVRFX25ld092ZXJsYXlNYXAoKSwgaSA9IHQubGVuZ3RoICsgMSwgcyA9IG5ldyBEb2N1bWVudEtleSh0LmNoaWxkKFwiXCIpKSwgbyA9IHRoaXMub3ZlcmxheXMuZ2V0SXRlcmF0b3JGcm9tKHMpO1xuICAgICAgICBmb3IgKDtvLmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gby5nZXROZXh0KCkudmFsdWUsIHMgPSBlLmdldEtleSgpO1xuICAgICAgICAgICAgaWYgKCF0LmlzUHJlZml4T2Yocy5wYXRoKSkgYnJlYWs7XG4gICAgICAgICAgICAvLyBEb2N1bWVudHMgZnJvbSBzdWItY29sbGVjdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgICAgIHMucGF0aC5sZW5ndGggPT09IGkgJiYgKGUubGFyZ2VzdEJhdGNoSWQgPiBuICYmIHIuc2V0KGUuZ2V0S2V5KCksIGUpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUocik7XG4gICAgfVxuICAgIGdldE92ZXJsYXlzRm9yQ29sbGVjdGlvbkdyb3VwKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgbGV0IGkgPSBuZXcgU29ydGVkTWFwKCgoZSwgdCkgPT4gZSAtIHQpKTtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMub3ZlcmxheXMuZ2V0SXRlcmF0b3IoKTtcbiAgICAgICAgZm9yICg7cy5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHMuZ2V0TmV4dCgpLnZhbHVlO1xuICAgICAgICAgICAgaWYgKGUuZ2V0S2V5KCkuZ2V0Q29sbGVjdGlvbkdyb3VwKCkgPT09IHQgJiYgZS5sYXJnZXN0QmF0Y2hJZCA+IG4pIHtcbiAgICAgICAgICAgICAgICBsZXQgdCA9IGkuZ2V0KGUubGFyZ2VzdEJhdGNoSWQpO1xuICAgICAgICAgICAgICAgIG51bGwgPT09IHQgJiYgKHQgPSBfX1BSSVZBVEVfbmV3T3ZlcmxheU1hcCgpLCBpID0gaS5pbnNlcnQoZS5sYXJnZXN0QmF0Y2hJZCwgdCkpLCBcbiAgICAgICAgICAgICAgICB0LnNldChlLmdldEtleSgpLCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBvID0gX19QUklWQVRFX25ld092ZXJsYXlNYXAoKSwgXyA9IGkuZ2V0SXRlcmF0b3IoKTtcbiAgICAgICAgZm9yICg7Xy5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgaWYgKF8uZ2V0TmV4dCgpLnZhbHVlLmZvckVhY2goKChlLCB0KSA9PiBvLnNldChlLCB0KSkpLCBvLnNpemUoKSA+PSByKSBicmVhaztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUobyk7XG4gICAgfVxuICAgIFN0KGUsIHQsIG4pIHtcbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBhc3NvY2lhdGlvbiBvZiB0aGUgb3ZlcmxheSB0byBpdHMgYmF0Y2ggaWQuXG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLm92ZXJsYXlzLmdldChuLmtleSk7XG4gICAgICAgIGlmIChudWxsICE9PSByKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy5xci5nZXQoci5sYXJnZXN0QmF0Y2hJZCkuZGVsZXRlKG4ua2V5KTtcbiAgICAgICAgICAgIHRoaXMucXIuc2V0KHIubGFyZ2VzdEJhdGNoSWQsIGUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub3ZlcmxheXMgPSB0aGlzLm92ZXJsYXlzLmluc2VydChuLmtleSwgbmV3IE92ZXJsYXkodCwgbikpO1xuICAgICAgICAvLyBDcmVhdGUgdGhlIGFzc29jaWF0aW9uIG9mIHRoaXMgb3ZlcmxheSB0byB0aGUgZ2l2ZW4gbGFyZ2VzdEJhdGNoSWQuXG4gICAgICAgIGxldCBpID0gdGhpcy5xci5nZXQodCk7XG4gICAgICAgIHZvaWQgMCA9PT0gaSAmJiAoaSA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpLCB0aGlzLnFyLnNldCh0LCBpKSksIHRoaXMucXIuc2V0KHQsIGkuYWRkKG4ua2V5KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyNCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfTWVtb3J5R2xvYmFsc0NhY2hlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5zZXNzaW9uVG9rZW4gPSBCeXRlU3RyaW5nLkVNUFRZX0JZVEVfU1RSSU5HO1xuICAgIH1cbiAgICBnZXRTZXNzaW9uVG9rZW4oZSkge1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5zZXNzaW9uVG9rZW4pO1xuICAgIH1cbiAgICBzZXRTZXNzaW9uVG9rZW4oZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXNzaW9uVG9rZW4gPSB0LCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBjb2xsZWN0aW9uIG9mIHJlZmVyZW5jZXMgdG8gYSBkb2N1bWVudCBmcm9tIHNvbWUga2luZCBvZiBudW1iZXJlZCBlbnRpdHlcbiAqIChlaXRoZXIgYSB0YXJnZXQgSUQgb3IgYmF0Y2ggSUQpLiBBcyByZWZlcmVuY2VzIGFyZSBhZGRlZCB0byBvciByZW1vdmVkIGZyb21cbiAqIHRoZSBzZXQgY29ycmVzcG9uZGluZyBldmVudHMgYXJlIGVtaXR0ZWQgdG8gYSByZWdpc3RlcmVkIGdhcmJhZ2UgY29sbGVjdG9yLlxuICpcbiAqIEVhY2ggcmVmZXJlbmNlIGlzIHJlcHJlc2VudGVkIGJ5IGEgRG9jdW1lbnRSZWZlcmVuY2Ugb2JqZWN0LiBFYWNoIG9mIHRoZW1cbiAqIGNvbnRhaW5zIGVub3VnaCBpbmZvcm1hdGlvbiB0byB1bmlxdWVseSBpZGVudGlmeSB0aGUgcmVmZXJlbmNlLiBUaGV5IGFyZSBhbGxcbiAqIHN0b3JlZCBwcmltYXJpbHkgaW4gYSBzZXQgc29ydGVkIGJ5IGtleS4gQSBkb2N1bWVudCBpcyBjb25zaWRlcmVkIGdhcmJhZ2UgaWZcbiAqIHRoZXJlJ3Mgbm8gcmVmZXJlbmNlcyBpbiB0aGF0IHNldCAodGhpcyBjYW4gYmUgZWZmaWNpZW50bHkgY2hlY2tlZCB0aGFua3MgdG9cbiAqIHNvcnRpbmcgYnkga2V5KS5cbiAqXG4gKiBSZWZlcmVuY2VTZXQgYWxzbyBrZWVwcyBhIHNlY29uZGFyeSBzZXQgdGhhdCBjb250YWlucyByZWZlcmVuY2VzIHNvcnRlZCBieVxuICogSURzLiBUaGlzIG9uZSBpcyB1c2VkIHRvIGVmZmljaWVudGx5IGltcGxlbWVudCByZW1vdmFsIG9mIGFsbCByZWZlcmVuY2VzIGJ5XG4gKiBzb21lIHRhcmdldCBJRC5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfUmVmZXJlbmNlU2V0IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLy8gQSBzZXQgb2Ygb3V0c3RhbmRpbmcgcmVmZXJlbmNlcyB0byBhIGRvY3VtZW50IHNvcnRlZCBieSBrZXkuXG4gICAgICAgIHRoaXMuUXIgPSBuZXcgU29ydGVkU2V0KF9fUFJJVkFURV9Eb2NSZWZlcmVuY2UuJHIpLCBcbiAgICAgICAgLy8gQSBzZXQgb2Ygb3V0c3RhbmRpbmcgcmVmZXJlbmNlcyB0byBhIGRvY3VtZW50IHNvcnRlZCBieSB0YXJnZXQgaWQuXG4gICAgICAgIHRoaXMuVXIgPSBuZXcgU29ydGVkU2V0KF9fUFJJVkFURV9Eb2NSZWZlcmVuY2UuS3IpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0cnVlIGlmIHRoZSByZWZlcmVuY2Ugc2V0IGNvbnRhaW5zIG5vIHJlZmVyZW5jZXMuICovICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlFyLmlzRW1wdHkoKTtcbiAgICB9XG4gICAgLyoqIEFkZHMgYSByZWZlcmVuY2UgdG8gdGhlIGdpdmVuIGRvY3VtZW50IGtleSBmb3IgdGhlIGdpdmVuIElELiAqLyAgICBhZGRSZWZlcmVuY2UoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gbmV3IF9fUFJJVkFURV9Eb2NSZWZlcmVuY2UoZSwgdCk7XG4gICAgICAgIHRoaXMuUXIgPSB0aGlzLlFyLmFkZChuKSwgdGhpcy5VciA9IHRoaXMuVXIuYWRkKG4pO1xuICAgIH1cbiAgICAvKiogQWRkIHJlZmVyZW5jZXMgdG8gdGhlIGdpdmVuIGRvY3VtZW50IGtleXMgZm9yIHRoZSBnaXZlbiBJRC4gKi8gICAgV3IoZSwgdCkge1xuICAgICAgICBlLmZvckVhY2goKGUgPT4gdGhpcy5hZGRSZWZlcmVuY2UoZSwgdCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIHJlZmVyZW5jZSB0byB0aGUgZ2l2ZW4gZG9jdW1lbnQga2V5IGZvciB0aGUgZ2l2ZW5cbiAgICAgKiBJRC5cbiAgICAgKi8gICAgcmVtb3ZlUmVmZXJlbmNlKGUsIHQpIHtcbiAgICAgICAgdGhpcy5HcihuZXcgX19QUklWQVRFX0RvY1JlZmVyZW5jZShlLCB0KSk7XG4gICAgfVxuICAgIHpyKGUsIHQpIHtcbiAgICAgICAgZS5mb3JFYWNoKChlID0+IHRoaXMucmVtb3ZlUmVmZXJlbmNlKGUsIHQpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsZWFycyBhbGwgcmVmZXJlbmNlcyB3aXRoIGEgZ2l2ZW4gSUQuIENhbGxzIHJlbW92ZVJlZigpIGZvciBlYWNoIGtleVxuICAgICAqIHJlbW92ZWQuXG4gICAgICovICAgIGpyKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IG5ldyBEb2N1bWVudEtleShuZXcgUmVzb3VyY2VQYXRoKFtdKSksIG4gPSBuZXcgX19QUklWQVRFX0RvY1JlZmVyZW5jZSh0LCBlKSwgciA9IG5ldyBfX1BSSVZBVEVfRG9jUmVmZXJlbmNlKHQsIGUgKyAxKSwgaSA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5Vci5mb3JFYWNoSW5SYW5nZShbIG4sIHIgXSwgKGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5HcihlKSwgaS5wdXNoKGUua2V5KTtcbiAgICAgICAgfSkpLCBpO1xuICAgIH1cbiAgICBKcigpIHtcbiAgICAgICAgdGhpcy5Rci5mb3JFYWNoKChlID0+IHRoaXMuR3IoZSkpKTtcbiAgICB9XG4gICAgR3IoZSkge1xuICAgICAgICB0aGlzLlFyID0gdGhpcy5Rci5kZWxldGUoZSksIHRoaXMuVXIgPSB0aGlzLlVyLmRlbGV0ZShlKTtcbiAgICB9XG4gICAgSHIoZSkge1xuICAgICAgICBjb25zdCB0ID0gbmV3IERvY3VtZW50S2V5KG5ldyBSZXNvdXJjZVBhdGgoW10pKSwgbiA9IG5ldyBfX1BSSVZBVEVfRG9jUmVmZXJlbmNlKHQsIGUpLCByID0gbmV3IF9fUFJJVkFURV9Eb2NSZWZlcmVuY2UodCwgZSArIDEpO1xuICAgICAgICBsZXQgaSA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5Vci5mb3JFYWNoSW5SYW5nZShbIG4sIHIgXSwgKGUgPT4ge1xuICAgICAgICAgICAgaSA9IGkuYWRkKGUua2V5KTtcbiAgICAgICAgfSkpLCBpO1xuICAgIH1cbiAgICBjb250YWluc0tleShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBuZXcgX19QUklWQVRFX0RvY1JlZmVyZW5jZShlLCAwKSwgbiA9IHRoaXMuUXIuZmlyc3RBZnRlck9yRXF1YWwodCk7XG4gICAgICAgIHJldHVybiBudWxsICE9PSBuICYmIGUuaXNFcXVhbChuLmtleSk7XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfRG9jUmVmZXJlbmNlIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMua2V5ID0gZSwgdGhpcy5ZciA9IHQ7XG4gICAgfVxuICAgIC8qKiBDb21wYXJlIGJ5IGtleSB0aGVuIGJ5IElEICovICAgIHN0YXRpYyAkcihlLCB0KSB7XG4gICAgICAgIHJldHVybiBEb2N1bWVudEtleS5jb21wYXJhdG9yKGUua2V5LCB0LmtleSkgfHwgX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IoZS5ZciwgdC5Zcik7XG4gICAgfVxuICAgIC8qKiBDb21wYXJlIGJ5IElEIHRoZW4gYnkga2V5ICovICAgIHN0YXRpYyBLcihlLCB0KSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihlLllyLCB0LllyKSB8fCBEb2N1bWVudEtleS5jb21wYXJhdG9yKGUua2V5LCB0LmtleSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfTWVtb3J5TXV0YXRpb25RdWV1ZSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLmluZGV4TWFuYWdlciA9IGUsIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUgPSB0LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBzZXQgb2YgYWxsIG11dGF0aW9ucyB0aGF0IGhhdmUgYmVlbiBzZW50IGJ1dCBub3QgeWV0IGJlZW4gYXBwbGllZCB0b1xuICAgICAgICAgKiB0aGUgYmFja2VuZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubXV0YXRpb25RdWV1ZSA9IFtdLCBcbiAgICAgICAgLyoqIE5leHQgdmFsdWUgdG8gdXNlIHdoZW4gYXNzaWduaW5nIHNlcXVlbnRpYWwgSURzIHRvIGVhY2ggbXV0YXRpb24gYmF0Y2guICovXG4gICAgICAgIHRoaXMudHIgPSAxLCBcbiAgICAgICAgLyoqIEFuIG9yZGVyZWQgbWFwcGluZyBiZXR3ZWVuIGRvY3VtZW50cyBhbmQgdGhlIG11dGF0aW9ucyBiYXRjaCBJRHMuICovXG4gICAgICAgIHRoaXMuWnIgPSBuZXcgU29ydGVkU2V0KF9fUFJJVkFURV9Eb2NSZWZlcmVuY2UuJHIpO1xuICAgIH1cbiAgICBjaGVja0VtcHR5KGUpIHtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKDAgPT09IHRoaXMubXV0YXRpb25RdWV1ZS5sZW5ndGgpO1xuICAgIH1cbiAgICBhZGRNdXRhdGlvbkJhdGNoKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMudHI7XG4gICAgICAgIHRoaXMudHIrKywgdGhpcy5tdXRhdGlvblF1ZXVlLmxlbmd0aCA+IDAgJiYgdGhpcy5tdXRhdGlvblF1ZXVlW3RoaXMubXV0YXRpb25RdWV1ZS5sZW5ndGggLSAxXTtcbiAgICAgICAgY29uc3QgcyA9IG5ldyBNdXRhdGlvbkJhdGNoKGksIHQsIG4sIHIpO1xuICAgICAgICB0aGlzLm11dGF0aW9uUXVldWUucHVzaChzKTtcbiAgICAgICAgLy8gVHJhY2sgcmVmZXJlbmNlcyBieSBkb2N1bWVudCBrZXkgYW5kIGluZGV4IGNvbGxlY3Rpb24gcGFyZW50cy5cbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHIpIHRoaXMuWnIgPSB0aGlzLlpyLmFkZChuZXcgX19QUklWQVRFX0RvY1JlZmVyZW5jZSh0LmtleSwgaSkpLCBcbiAgICAgICAgdGhpcy5pbmRleE1hbmFnZXIuYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgoZSwgdC5rZXkucGF0aC5wb3BMYXN0KCkpO1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUocyk7XG4gICAgfVxuICAgIGxvb2t1cE11dGF0aW9uQmF0Y2goZSwgdCkge1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5Ycih0KSk7XG4gICAgfVxuICAgIGdldE5leHRNdXRhdGlvbkJhdGNoQWZ0ZXJCYXRjaElkKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHQgKyAxLCByID0gdGhpcy5laShuKSwgaSA9IHIgPCAwID8gMCA6IHI7XG4gICAgICAgIC8vIFRoZSByZXF1ZXN0ZWQgYmF0Y2hJZCBtYXkgc3RpbGwgYmUgb3V0IG9mIHJhbmdlIHNvIG5vcm1hbGl6ZSBpdCB0byB0aGVcbiAgICAgICAgLy8gc3RhcnQgb2YgdGhlIHF1ZXVlLlxuICAgICAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLm11dGF0aW9uUXVldWUubGVuZ3RoID4gaSA/IHRoaXMubXV0YXRpb25RdWV1ZVtpXSA6IG51bGwpO1xuICAgIH1cbiAgICBnZXRIaWdoZXN0VW5hY2tub3dsZWRnZWRCYXRjaElkKCkge1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoMCA9PT0gdGhpcy5tdXRhdGlvblF1ZXVlLmxlbmd0aCA/IGogOiB0aGlzLnRyIC0gMSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlcyhlKSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLm11dGF0aW9uUXVldWUuc2xpY2UoKSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5KGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBfX1BSSVZBVEVfRG9jUmVmZXJlbmNlKHQsIDApLCByID0gbmV3IF9fUFJJVkFURV9Eb2NSZWZlcmVuY2UodCwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKSwgaSA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5aci5mb3JFYWNoSW5SYW5nZShbIG4sIHIgXSwgKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuWHIoZS5Zcik7XG4gICAgICAgICAgICBpLnB1c2godCk7XG4gICAgICAgIH0pKSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoaSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5cyhlLCB0KSB7XG4gICAgICAgIGxldCBuID0gbmV3IFNvcnRlZFNldChfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcik7XG4gICAgICAgIHJldHVybiB0LmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBfX1BSSVZBVEVfRG9jUmVmZXJlbmNlKGUsIDApLCByID0gbmV3IF9fUFJJVkFURV9Eb2NSZWZlcmVuY2UoZSwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKTtcbiAgICAgICAgICAgIHRoaXMuWnIuZm9yRWFjaEluUmFuZ2UoWyB0LCByIF0sIChlID0+IHtcbiAgICAgICAgICAgICAgICBuID0gbi5hZGQoZS5Zcik7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy50aShuKSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ1F1ZXJ5KGUsIHQpIHtcbiAgICAgICAgLy8gVXNlIHRoZSBxdWVyeSBwYXRoIGFzIGEgcHJlZml4IGZvciB0ZXN0aW5nIGlmIGEgZG9jdW1lbnQgbWF0Y2hlcyB0aGVcbiAgICAgICAgLy8gcXVlcnkuXG4gICAgICAgIGNvbnN0IG4gPSB0LnBhdGgsIHIgPSBuLmxlbmd0aCArIDE7XG4gICAgICAgIC8vIENvbnN0cnVjdCBhIGRvY3VtZW50IHJlZmVyZW5jZSBmb3IgYWN0dWFsbHkgc2Nhbm5pbmcgdGhlIGluZGV4LiBVbmxpa2VcbiAgICAgICAgLy8gdGhlIHByZWZpeCB0aGUgZG9jdW1lbnQga2V5IGluIHRoaXMgcmVmZXJlbmNlIG11c3QgaGF2ZSBhbiBldmVuIG51bWJlciBvZlxuICAgICAgICAvLyBzZWdtZW50cy4gVGhlIGVtcHR5IHNlZ21lbnQgY2FuIGJlIHVzZWQgYSBzdWZmaXggb2YgdGhlIHF1ZXJ5IHBhdGhcbiAgICAgICAgLy8gYmVjYXVzZSBpdCBwcmVjZWRlcyBhbGwgb3RoZXIgc2VnbWVudHMgaW4gYW4gb3JkZXJlZCB0cmF2ZXJzYWwuXG4gICAgICAgIGxldCBpID0gbjtcbiAgICAgICAgRG9jdW1lbnRLZXkuaXNEb2N1bWVudEtleShpKSB8fCAoaSA9IGkuY2hpbGQoXCJcIikpO1xuICAgICAgICBjb25zdCBzID0gbmV3IF9fUFJJVkFURV9Eb2NSZWZlcmVuY2UobmV3IERvY3VtZW50S2V5KGkpLCAwKTtcbiAgICAgICAgLy8gRmluZCB1bmlxdWUgYmF0Y2hJRHMgcmVmZXJlbmNlZCBieSBhbGwgZG9jdW1lbnRzIHBvdGVudGlhbGx5IG1hdGNoaW5nIHRoZVxuICAgICAgICAvLyBxdWVyeS5cbiAgICAgICAgICAgICAgICBsZXQgbyA9IG5ldyBTb3J0ZWRTZXQoX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IpO1xuICAgICAgICByZXR1cm4gdGhpcy5aci5mb3JFYWNoV2hpbGUoKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgdCA9IGUua2V5LnBhdGg7XG4gICAgICAgICAgICByZXR1cm4gISFuLmlzUHJlZml4T2YodCkgJiYgKFxuICAgICAgICAgICAgLy8gUm93cyB3aXRoIGRvY3VtZW50IGtleXMgbW9yZSB0aGFuIG9uZSBzZWdtZW50IGxvbmdlciB0aGFuIHRoZSBxdWVyeVxuICAgICAgICAgICAgLy8gcGF0aCBjYW4ndCBiZSBtYXRjaGVzLiBGb3IgZXhhbXBsZSwgYSBxdWVyeSBvbiAncm9vbXMnIGNhbid0IG1hdGNoXG4gICAgICAgICAgICAvLyB0aGUgZG9jdW1lbnQgL3Jvb21zL2FiYy9tZXNzYWdlcy94eXguXG4gICAgICAgICAgICAvLyBUT0RPKG1jZyk6IHdlJ2xsIG5lZWQgYSBkaWZmZXJlbnQgc2Nhbm5lciB3aGVuIHdlIGltcGxlbWVudFxuICAgICAgICAgICAgLy8gYW5jZXN0b3IgcXVlcmllcy5cbiAgICAgICAgICAgIHQubGVuZ3RoID09PSByICYmIChvID0gby5hZGQoZS5ZcikpLCAhMCk7XG4gICAgICAgIH0pLCBzKSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy50aShvKSk7XG4gICAgfVxuICAgIHRpKGUpIHtcbiAgICAgICAgLy8gQ29uc3RydWN0IGFuIGFycmF5IG9mIG1hdGNoaW5nIGJhdGNoZXMsIHNvcnRlZCBieSBiYXRjaElEIHRvIGVuc3VyZSB0aGF0XG4gICAgICAgIC8vIG11bHRpcGxlIG11dGF0aW9ucyBhZmZlY3RpbmcgdGhlIHNhbWUgZG9jdW1lbnQga2V5IGFyZSBhcHBsaWVkIGluIG9yZGVyLlxuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIHJldHVybiBlLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuWHIoZSk7XG4gICAgICAgICAgICBudWxsICE9PSBuICYmIHQucHVzaChuKTtcbiAgICAgICAgfSkpLCB0O1xuICAgIH1cbiAgICByZW1vdmVNdXRhdGlvbkJhdGNoKGUsIHQpIHtcbiAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQoMCA9PT0gdGhpcy5uaSh0LmJhdGNoSWQsIFwicmVtb3ZlZFwiKSwgNTUwMDMpLCB0aGlzLm11dGF0aW9uUXVldWUuc2hpZnQoKTtcbiAgICAgICAgbGV0IG4gPSB0aGlzLlpyO1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2godC5tdXRhdGlvbnMsIChyID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBuZXcgX19QUklWQVRFX0RvY1JlZmVyZW5jZShyLmtleSwgdC5iYXRjaElkKTtcbiAgICAgICAgICAgIHJldHVybiBuID0gbi5kZWxldGUoaSksIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUubWFya1BvdGVudGlhbGx5T3JwaGFuZWQoZSwgci5rZXkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5aciA9IG47XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgaXIoZSkge1xuICAgICAgICAvLyBOby1vcCBzaW5jZSB0aGUgbWVtb3J5IG11dGF0aW9uIHF1ZXVlIGRvZXMgbm90IG1haW50YWluIGEgc2VwYXJhdGUgY2FjaGUuXG4gICAgfVxuICAgIGNvbnRhaW5zS2V5KGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBfX1BSSVZBVEVfRG9jUmVmZXJlbmNlKHQsIDApLCByID0gdGhpcy5aci5maXJzdEFmdGVyT3JFcXVhbChuKTtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHQuaXNFcXVhbChyICYmIHIua2V5KSk7XG4gICAgfVxuICAgIHBlcmZvcm1Db25zaXN0ZW5jeUNoZWNrKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubXV0YXRpb25RdWV1ZS5sZW5ndGgsIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZpbmRzIHRoZSBpbmRleCBvZiB0aGUgZ2l2ZW4gYmF0Y2hJZCBpbiB0aGUgbXV0YXRpb24gcXVldWUgYW5kIGFzc2VydHMgdGhhdFxuICAgICAqIHRoZSByZXN1bHRpbmcgaW5kZXggaXMgd2l0aGluIHRoZSBib3VuZHMgb2YgdGhlIHF1ZXVlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGJhdGNoSWQgLSBUaGUgYmF0Y2hJZCB0byBzZWFyY2ggZm9yXG4gICAgICogQHBhcmFtIGFjdGlvbiAtIEEgZGVzY3JpcHRpb24gb2Ygd2hhdCB0aGUgY2FsbGVyIGlzIGRvaW5nLCBwaHJhc2VkIGluIHBhc3NpdmVcbiAgICAgKiBmb3JtIChlLmcuIFwiYWNrbm93bGVkZ2VkXCIgaW4gYSByb3V0aW5lIHRoYXQgYWNrbm93bGVkZ2VzIGJhdGNoZXMpLlxuICAgICAqLyAgICBuaShlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVpKGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaW5kcyB0aGUgaW5kZXggb2YgdGhlIGdpdmVuIGJhdGNoSWQgaW4gdGhlIG11dGF0aW9uIHF1ZXVlLiBUaGlzIG9wZXJhdGlvblxuICAgICAqIGlzIE8oMSkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgY29tcHV0ZWQgaW5kZXggb2YgdGhlIGJhdGNoIHdpdGggdGhlIGdpdmVuIGJhdGNoSWQsIGJhc2VkIG9uXG4gICAgICogdGhlIHN0YXRlIG9mIHRoZSBxdWV1ZS4gTm90ZSB0aGlzIGluZGV4IGNhbiBiZSBuZWdhdGl2ZSBpZiB0aGUgcmVxdWVzdGVkXG4gICAgICogYmF0Y2hJZCBoYXMgYWxyZWFkeSBiZWVuIHJlbW92ZWQgZnJvbSB0aGUgcXVldWUgb3IgcGFzdCB0aGUgZW5kIG9mIHRoZVxuICAgICAqIHF1ZXVlIGlmIHRoZSBiYXRjaElkIGlzIGxhcmdlciB0aGFuIHRoZSBsYXN0IGFkZGVkIGJhdGNoLlxuICAgICAqLyAgICBlaShlKSB7XG4gICAgICAgIGlmICgwID09PSB0aGlzLm11dGF0aW9uUXVldWUubGVuZ3RoKSBcbiAgICAgICAgLy8gQXMgYW4gaW5kZXggdGhpcyBpcyBwYXN0IHRoZSBlbmQgb2YgdGhlIHF1ZXVlXG4gICAgICAgIHJldHVybiAwO1xuICAgICAgICAvLyBFeGFtaW5lIHRoZSBmcm9udCBvZiB0aGUgcXVldWUgdG8gZmlndXJlIG91dCB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuIHRoZVxuICAgICAgICAvLyBiYXRjaElkIGFuZCBpbmRleGVzIGluIHRoZSBhcnJheS4gTm90ZSB0aGF0IHNpbmNlIHRoZSBxdWV1ZSBpcyBvcmRlcmVkXG4gICAgICAgIC8vIGJ5IGJhdGNoSWQsIGlmIHRoZSBmaXJzdCBiYXRjaCBoYXMgYSBsYXJnZXIgYmF0Y2hJZCB0aGVuIHRoZSByZXF1ZXN0ZWRcbiAgICAgICAgLy8gYmF0Y2hJZCBkb2Vzbid0IGV4aXN0IGluIHRoZSBxdWV1ZS5cbiAgICAgICAgICAgICAgICByZXR1cm4gZSAtIHRoaXMubXV0YXRpb25RdWV1ZVswXS5iYXRjaElkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIHZlcnNpb24gb2YgbG9va3VwTXV0YXRpb25CYXRjaCB0aGF0IGRvZXNuJ3QgcmV0dXJuIGEgcHJvbWlzZSwgdGhpcyBtYWtlc1xuICAgICAqIG90aGVyIGZ1bmN0aW9ucyB0aGF0IHVzZXMgdGhpcyBjb2RlIGVhc2llciB0byByZWFkIGFuZCBtb3JlIGVmZmljaWVudC5cbiAgICAgKi8gICAgWHIoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5laShlKTtcbiAgICAgICAgaWYgKHQgPCAwIHx8IHQgPj0gdGhpcy5tdXRhdGlvblF1ZXVlLmxlbmd0aCkgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiB0aGlzLm11dGF0aW9uUXVldWVbdF07XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGUgc21hbGxlc3QgdmFsdWUgcmVwcmVzZW50YWJsZSBieSBhIDY0LWJpdCBzaWduZWQgaW50ZWdlciAobG9uZykuXG4gKi9cbi8qKlxuICogVGhlIG1lbW9yeS1vbmx5IFJlbW90ZURvY3VtZW50Q2FjaGUgZm9yIEluZGV4ZWREYi4gVG8gY29uc3RydWN0LCBpbnZva2VcbiAqIGBuZXdNZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlKClgLlxuICovXG5jbGFzcyBfX1BSSVZBVEVfTWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZUltcGwge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBzaXplciAtIFVzZWQgdG8gYXNzZXNzIHRoZSBzaXplIG9mIGEgZG9jdW1lbnQuIEZvciBlYWdlciBHQywgdGhpcyBpc1xuICAgICAqIGV4cGVjdGVkIHRvIGp1c3QgcmV0dXJuIDAgdG8gYXZvaWQgdW5uZWNlc3NhcmlseSBkb2luZyB0aGUgd29yayBvZlxuICAgICAqIGNhbGN1bGF0aW5nIHRoZSBzaXplLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5yaSA9IGUsIFxuICAgICAgICAvKiogVW5kZXJseWluZyBjYWNoZSBvZiBkb2N1bWVudHMgYW5kIHRoZWlyIHJlYWQgdGltZXMuICovXG4gICAgICAgIHRoaXMuZG9jcyA9IGZ1bmN0aW9uIF9fUFJJVkFURV9kb2N1bWVudEVudHJ5TWFwKCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBTb3J0ZWRNYXAoRG9jdW1lbnRLZXkuY29tcGFyYXRvcik7XG4gICAgICAgIH0oKSwgXG4gICAgICAgIC8qKiBTaXplIG9mIGFsbCBjYWNoZWQgZG9jdW1lbnRzLiAqL1xuICAgICAgICB0aGlzLnNpemUgPSAwO1xuICAgIH1cbiAgICBzZXRJbmRleE1hbmFnZXIoZSkge1xuICAgICAgICB0aGlzLmluZGV4TWFuYWdlciA9IGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgdGhlIHN1cHBsaWVkIGVudHJ5IHRvIHRoZSBjYWNoZSBhbmQgdXBkYXRlcyB0aGUgY2FjaGUgc2l6ZSBhcyBhcHByb3ByaWF0ZS5cbiAgICAgKlxuICAgICAqIEFsbCBjYWxscyBvZiBgYWRkRW50cnlgICBhcmUgcmVxdWlyZWQgdG8gZ28gdGhyb3VnaCB0aGUgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXJcbiAgICAgKiByZXR1cm5lZCBieSBgbmV3Q2hhbmdlQnVmZmVyKClgLlxuICAgICAqLyAgICBhZGRFbnRyeShlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0LmtleSwgciA9IHRoaXMuZG9jcy5nZXQobiksIGkgPSByID8gci5zaXplIDogMCwgcyA9IHRoaXMucmkodCk7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY3MgPSB0aGlzLmRvY3MuaW5zZXJ0KG4sIHtcbiAgICAgICAgICAgIGRvY3VtZW50OiB0Lm11dGFibGVDb3B5KCksXG4gICAgICAgICAgICBzaXplOiBzXG4gICAgICAgIH0pLCB0aGlzLnNpemUgKz0gcyAtIGksIHRoaXMuaW5kZXhNYW5hZ2VyLmFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4KGUsIG4ucGF0aC5wb3BMYXN0KCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBzcGVjaWZpZWQgZW50cnkgZnJvbSB0aGUgY2FjaGUgYW5kIHVwZGF0ZXMgdGhlIGNhY2hlIHNpemUgYXMgYXBwcm9wcmlhdGUuXG4gICAgICpcbiAgICAgKiBBbGwgY2FsbHMgb2YgYHJlbW92ZUVudHJ5YCBhcmUgcmVxdWlyZWQgdG8gZ28gdGhyb3VnaCB0aGUgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXJcbiAgICAgKiByZXR1cm5lZCBieSBgbmV3Q2hhbmdlQnVmZmVyKClgLlxuICAgICAqLyAgICByZW1vdmVFbnRyeShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmRvY3MuZ2V0KGUpO1xuICAgICAgICB0ICYmICh0aGlzLmRvY3MgPSB0aGlzLmRvY3MucmVtb3ZlKGUpLCB0aGlzLnNpemUgLT0gdC5zaXplKTtcbiAgICB9XG4gICAgZ2V0RW50cnkoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5kb2NzLmdldCh0KTtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKG4gPyBuLmRvY3VtZW50Lm11dGFibGVDb3B5KCkgOiBNdXRhYmxlRG9jdW1lbnQubmV3SW52YWxpZERvY3VtZW50KHQpKTtcbiAgICB9XG4gICAgZ2V0RW50cmllcyhlLCB0KSB7XG4gICAgICAgIGxldCBuID0gX19QUklWQVRFX211dGFibGVEb2N1bWVudE1hcCgpO1xuICAgICAgICByZXR1cm4gdC5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmRvY3MuZ2V0KGUpO1xuICAgICAgICAgICAgbiA9IG4uaW5zZXJ0KGUsIHQgPyB0LmRvY3VtZW50Lm11dGFibGVDb3B5KCkgOiBNdXRhYmxlRG9jdW1lbnQubmV3SW52YWxpZERvY3VtZW50KGUpKTtcbiAgICAgICAgfSkpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShuKTtcbiAgICB9XG4gICAgZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeShlLCB0LCBuLCByKSB7XG4gICAgICAgIGxldCBpID0gX19QUklWQVRFX211dGFibGVEb2N1bWVudE1hcCgpO1xuICAgICAgICAvLyBEb2N1bWVudHMgYXJlIG9yZGVyZWQgYnkga2V5LCBzbyB3ZSBjYW4gdXNlIGEgcHJlZml4IHNjYW4gdG8gbmFycm93IGRvd25cbiAgICAgICAgLy8gdGhlIGRvY3VtZW50cyB3ZSBuZWVkIHRvIG1hdGNoIHRoZSBxdWVyeSBhZ2FpbnN0LlxuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSB0LnBhdGgsIG8gPSBuZXcgRG9jdW1lbnRLZXkocy5jaGlsZChcIl9faWQtOTIyMzM3MjAzNjg1NDc3NTgwOF9fXCIpKSwgXyA9IHRoaXMuZG9jcy5nZXRJdGVyYXRvckZyb20obyk7XG4gICAgICAgIC8vIERvY3VtZW50IGtleXMgYXJlIG9yZGVyZWQgZmlyc3QgYnkgbnVtZXJpYyB2YWx1ZSAoXCJfX2lkPExvbmc+X19cIiksXG4gICAgICAgIC8vIHRoZW4gbGV4aWNvZ3JhcGhpY2FsbHkgYnkgc3RyaW5nIHZhbHVlLiBTdGFydCB0aGUgaXRlcmF0b3IgYXQgdGhlIG1pbmltdW1cbiAgICAgICAgLy8gcG9zc2libGUgRG9jdW1lbnQga2V5IHZhbHVlLlxuICAgICAgICAgICAgICAgIGZvciAoO18uaGFzTmV4dCgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IHtrZXk6IGUsIHZhbHVlOiB7ZG9jdW1lbnQ6IG99fSA9IF8uZ2V0TmV4dCgpO1xuICAgICAgICAgICAgaWYgKCFzLmlzUHJlZml4T2YoZS5wYXRoKSkgYnJlYWs7XG4gICAgICAgICAgICBlLnBhdGgubGVuZ3RoID4gcy5sZW5ndGggKyAxIHx8IChfX1BSSVZBVEVfaW5kZXhPZmZzZXRDb21wYXJhdG9yKF9fUFJJVkFURV9uZXdJbmRleE9mZnNldEZyb21Eb2N1bWVudChvKSwgbikgPD0gMCB8fCAoci5oYXMoby5rZXkpIHx8IF9fUFJJVkFURV9xdWVyeU1hdGNoZXModCwgbykpICYmIChpID0gaS5pbnNlcnQoby5rZXksIG8ubXV0YWJsZUNvcHkoKSkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoaSk7XG4gICAgfVxuICAgIGdldEFsbEZyb21Db2xsZWN0aW9uR3JvdXAoZSwgdCwgbiwgcikge1xuICAgICAgICAvLyBUaGlzIG1ldGhvZCBzaG91bGQgb25seSBiZSBjYWxsZWQgZnJvbSB0aGUgSW5kZXhCYWNrZmlsbGVyIGlmIHBlcnNpc3RlbmNlXG4gICAgICAgIC8vIGlzIGVuYWJsZWQuXG4gICAgICAgIGZhaWwoOTUwMCk7XG4gICAgfVxuICAgIGlpKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHRoaXMuZG9jcywgKGUgPT4gdChlKSkpO1xuICAgIH1cbiAgICBuZXdDaGFuZ2VCdWZmZXIoZSkge1xuICAgICAgICAvLyBgdHJhY2tSZW1vdmFsc2AgaXMgaWdub3JlcyBzaW5jZSB0aGUgTWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZSBrZWVwc1xuICAgICAgICAvLyBhIHNlcGFyYXRlIGNoYW5nZWxvZyBhbmQgZG9lcyBub3QgbmVlZCBzcGVjaWFsIGhhbmRsaW5nIGZvciByZW1vdmFscy5cbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfTWVtb3J5UmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIodGhpcyk7XG4gICAgfVxuICAgIGdldFNpemUoZSkge1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5zaXplKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBtZW1vcnktb25seSBSZW1vdGVEb2N1bWVudENhY2hlLlxuICpcbiAqIEBwYXJhbSBzaXplciAtIFVzZWQgdG8gYXNzZXNzIHRoZSBzaXplIG9mIGEgZG9jdW1lbnQuIEZvciBlYWdlciBHQywgdGhpcyBpc1xuICogZXhwZWN0ZWQgdG8ganVzdCByZXR1cm4gMCB0byBhdm9pZCB1bm5lY2Vzc2FyaWx5IGRvaW5nIHRoZSB3b3JrIG9mXG4gKiBjYWxjdWxhdGluZyB0aGUgc2l6ZS5cbiAqL1xuLyoqXG4gKiBIYW5kbGVzIHRoZSBkZXRhaWxzIG9mIGFkZGluZyBhbmQgdXBkYXRpbmcgZG9jdW1lbnRzIGluIHRoZSBNZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlLlxuICovXG5jbGFzcyBfX1BSSVZBVEVfTWVtb3J5UmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIgZXh0ZW5kcyBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlciB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLk5yID0gZTtcbiAgICB9XG4gICAgYXBwbHlDaGFuZ2VzKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5jaGFuZ2VzLmZvckVhY2goKChuLCByKSA9PiB7XG4gICAgICAgICAgICByLmlzVmFsaWREb2N1bWVudCgpID8gdC5wdXNoKHRoaXMuTnIuYWRkRW50cnkoZSwgcikpIDogdGhpcy5Oci5yZW1vdmVFbnRyeShuKTtcbiAgICAgICAgfSkpLCBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcih0KTtcbiAgICB9XG4gICAgZ2V0RnJvbUNhY2hlKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuTnIuZ2V0RW50cnkoZSwgdCk7XG4gICAgfVxuICAgIGdldEFsbEZyb21DYWNoZShlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLk5yLmdldEVudHJpZXMoZSwgdCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfTWVtb3J5VGFyZ2V0Q2FjaGUge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZSA9IGUsIFxuICAgICAgICAvKipcbiAgICAgICAgICogTWFwcyBhIHRhcmdldCB0byB0aGUgZGF0YSBhYm91dCB0aGF0IHRhcmdldFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zaSA9IG5ldyBPYmplY3RNYXAoKGUgPT4gX19QUklWQVRFX2Nhbm9uaWZ5VGFyZ2V0KGUpKSwgX19QUklWQVRFX3RhcmdldEVxdWFscyksIFxuICAgICAgICAvKiogVGhlIGxhc3QgcmVjZWl2ZWQgc25hcHNob3QgdmVyc2lvbi4gKi9cbiAgICAgICAgdGhpcy5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uID0gU25hcHNob3RWZXJzaW9uLm1pbigpLCBcbiAgICAgICAgLyoqIFRoZSBoaWdoZXN0IG51bWJlcmVkIHRhcmdldCBJRCBlbmNvdW50ZXJlZC4gKi9cbiAgICAgICAgdGhpcy5oaWdoZXN0VGFyZ2V0SWQgPSAwLCBcbiAgICAgICAgLyoqIFRoZSBoaWdoZXN0IHNlcXVlbmNlIG51bWJlciBlbmNvdW50ZXJlZC4gKi9cbiAgICAgICAgdGhpcy5vaSA9IDAsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBvcmRlcmVkIGJpZGlyZWN0aW9uYWwgbWFwcGluZyBiZXR3ZWVuIGRvY3VtZW50cyBhbmQgdGhlIHJlbW90ZSB0YXJnZXRcbiAgICAgICAgICogSURzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5faSA9IG5ldyBfX1BSSVZBVEVfUmVmZXJlbmNlU2V0LCB0aGlzLnRhcmdldENvdW50ID0gMCwgdGhpcy5haSA9IF9fUFJJVkFURV9UYXJnZXRJZEdlbmVyYXRvci51cigpO1xuICAgIH1cbiAgICBmb3JFYWNoVGFyZ2V0KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2kuZm9yRWFjaCgoKGUsIG4pID0+IHQobikpKSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbihlKSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24pO1xuICAgIH1cbiAgICBnZXRIaWdoZXN0U2VxdWVuY2VOdW1iZXIoZSkge1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5vaSk7XG4gICAgfVxuICAgIGFsbG9jYXRlVGFyZ2V0SWQoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5oaWdoZXN0VGFyZ2V0SWQgPSB0aGlzLmFpLm5leHQoKSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5oaWdoZXN0VGFyZ2V0SWQpO1xuICAgIH1cbiAgICBzZXRUYXJnZXRzTWV0YWRhdGEoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gbiAmJiAodGhpcy5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uID0gbiksIHQgPiB0aGlzLm9pICYmICh0aGlzLm9pID0gdCksIFxuICAgICAgICBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBQcihlKSB7XG4gICAgICAgIHRoaXMuc2kuc2V0KGUudGFyZ2V0LCBlKTtcbiAgICAgICAgY29uc3QgdCA9IGUudGFyZ2V0SWQ7XG4gICAgICAgIHQgPiB0aGlzLmhpZ2hlc3RUYXJnZXRJZCAmJiAodGhpcy5haSA9IG5ldyBfX1BSSVZBVEVfVGFyZ2V0SWRHZW5lcmF0b3IodCksIHRoaXMuaGlnaGVzdFRhcmdldElkID0gdCksIFxuICAgICAgICBlLnNlcXVlbmNlTnVtYmVyID4gdGhpcy5vaSAmJiAodGhpcy5vaSA9IGUuc2VxdWVuY2VOdW1iZXIpO1xuICAgIH1cbiAgICBhZGRUYXJnZXREYXRhKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuUHIodCksIHRoaXMudGFyZ2V0Q291bnQgKz0gMSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgdXBkYXRlVGFyZ2V0RGF0YShlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLlByKHQpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXREYXRhKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2kuZGVsZXRlKHQudGFyZ2V0KSwgdGhpcy5faS5qcih0LnRhcmdldElkKSwgdGhpcy50YXJnZXRDb3VudCAtPSAxLCBcbiAgICAgICAgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0cyhlLCB0LCBuKSB7XG4gICAgICAgIGxldCByID0gMDtcbiAgICAgICAgY29uc3QgaSA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5zaS5mb3JFYWNoKCgocywgbykgPT4ge1xuICAgICAgICAgICAgby5zZXF1ZW5jZU51bWJlciA8PSB0ICYmIG51bGwgPT09IG4uZ2V0KG8udGFyZ2V0SWQpICYmICh0aGlzLnNpLmRlbGV0ZShzKSwgaS5wdXNoKHRoaXMucmVtb3ZlTWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQoZSwgby50YXJnZXRJZCkpLCBcbiAgICAgICAgICAgIHIrKyk7XG4gICAgICAgIH0pKSwgUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IoaSkubmV4dCgoKCkgPT4gcikpO1xuICAgIH1cbiAgICBnZXRUYXJnZXRDb3VudChlKSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLnRhcmdldENvdW50KTtcbiAgICB9XG4gICAgZ2V0VGFyZ2V0RGF0YShlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnNpLmdldCh0KSB8fCBudWxsO1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUobik7XG4gICAgfVxuICAgIGFkZE1hdGNoaW5nS2V5cyhlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pLldyKHQsIG4pLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZW1vdmVNYXRjaGluZ0tleXMoZSwgdCwgbikge1xuICAgICAgICB0aGlzLl9pLnpyKHQsIG4pO1xuICAgICAgICBjb25zdCByID0gdGhpcy5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZSwgaSA9IFtdO1xuICAgICAgICByZXR1cm4gciAmJiB0LmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgaS5wdXNoKHIubWFya1BvdGVudGlhbGx5T3JwaGFuZWQoZSwgdCkpO1xuICAgICAgICB9KSksIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKGkpO1xuICAgIH1cbiAgICByZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZChlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pLmpyKHQpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXRNYXRjaGluZ0tleXNGb3JUYXJnZXRJZChlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLl9pLkhyKHQpO1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUobik7XG4gICAgfVxuICAgIGNvbnRhaW5zS2V5KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMuX2kuY29udGFpbnNLZXkodCkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBtZW1vcnktYmFja2VkIGluc3RhbmNlIG9mIFBlcnNpc3RlbmNlLiBEYXRhIGlzIHN0b3JlZCBvbmx5IGluIFJBTSBhbmRcbiAqIG5vdCBwZXJzaXN0ZWQgYWNyb3NzIHNlc3Npb25zLlxuICovXG5jbGFzcyBfX1BSSVZBVEVfTWVtb3J5UGVyc2lzdGVuY2Uge1xuICAgIC8qKlxuICAgICAqIFRoZSBjb25zdHJ1Y3RvciBhY2NlcHRzIGEgZmFjdG9yeSBmb3IgY3JlYXRpbmcgYSByZWZlcmVuY2UgZGVsZWdhdGUuIFRoaXNcbiAgICAgKiBhbGxvd3MgYm90aCB0aGUgZGVsZWdhdGUgYW5kIHRoaXMgaW5zdGFuY2UgdG8gaGF2ZSBzdHJvbmcgcmVmZXJlbmNlcyB0b1xuICAgICAqIGVhY2ggb3RoZXIgd2l0aG91dCBoYXZpbmcgbnVsbGFibGUgZmllbGRzIHRoYXQgd291bGQgdGhlbiBuZWVkIHRvIGJlXG4gICAgICogY2hlY2tlZCBvciBhc3NlcnRlZCBvbiBldmVyeSBhY2Nlc3MuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLnVpID0ge30sIHRoaXMub3ZlcmxheXMgPSB7fSwgdGhpcy5jaSA9IG5ldyBfX1BSSVZBVEVfTGlzdGVuU2VxdWVuY2UoMCksIHRoaXMubGkgPSAhMSwgXG4gICAgICAgIHRoaXMubGkgPSAhMCwgdGhpcy5oaSA9IG5ldyBfX1BSSVZBVEVfTWVtb3J5R2xvYmFsc0NhY2hlLCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlID0gZSh0aGlzKSwgXG4gICAgICAgIHRoaXMuUGkgPSBuZXcgX19QUklWQVRFX01lbW9yeVRhcmdldENhY2hlKHRoaXMpO1xuICAgICAgICB0aGlzLmluZGV4TWFuYWdlciA9IG5ldyBfX1BSSVZBVEVfTWVtb3J5SW5kZXhNYW5hZ2VyLCB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGUgPSBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3TWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZShlKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9NZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlSW1wbChlKTtcbiAgICAgICAgfSgoZSA9PiB0aGlzLnJlZmVyZW5jZURlbGVnYXRlLlRpKGUpKSksIHRoaXMuc2VyaWFsaXplciA9IG5ldyBfX1BSSVZBVEVfTG9jYWxTZXJpYWxpemVyKHQpLCBcbiAgICAgICAgdGhpcy5JaSA9IG5ldyBfX1BSSVZBVEVfTWVtb3J5QnVuZGxlQ2FjaGUodGhpcy5zZXJpYWxpemVyKTtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7XG4gICAgICAgIC8vIE5vIGR1cmFibGUgc3RhdGUgdG8gZW5zdXJlIGlzIGNsb3NlZCBvbiBzaHV0ZG93bi5cbiAgICAgICAgcmV0dXJuIHRoaXMubGkgPSAhMSwgUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldCBzdGFydGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5saTtcbiAgICB9XG4gICAgc2V0RGF0YWJhc2VEZWxldGVkTGlzdGVuZXIoKSB7XG4gICAgICAgIC8vIE5vIG9wLlxuICAgIH1cbiAgICBzZXROZXR3b3JrRW5hYmxlZCgpIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxuICAgIGdldEluZGV4TWFuYWdlcihlKSB7XG4gICAgICAgIC8vIFdlIGRvIG5vdCBjdXJyZW50bHkgc3VwcG9ydCBpbmRpY2VzIGZvciBtZW1vcnkgcGVyc2lzdGVuY2UsIHNvIHdlIGNhblxuICAgICAgICAvLyByZXR1cm4gdGhlIHNhbWUgc2hhcmVkIGluc3RhbmNlIG9mIHRoZSBtZW1vcnkgaW5kZXggbWFuYWdlci5cbiAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXhNYW5hZ2VyO1xuICAgIH1cbiAgICBnZXREb2N1bWVudE92ZXJsYXlDYWNoZShlKSB7XG4gICAgICAgIGxldCB0ID0gdGhpcy5vdmVybGF5c1tlLnRvS2V5KCldO1xuICAgICAgICByZXR1cm4gdCB8fCAodCA9IG5ldyBfX1BSSVZBVEVfTWVtb3J5RG9jdW1lbnRPdmVybGF5Q2FjaGUsIHRoaXMub3ZlcmxheXNbZS50b0tleSgpXSA9IHQpLCBcbiAgICAgICAgdDtcbiAgICB9XG4gICAgZ2V0TXV0YXRpb25RdWV1ZShlLCB0KSB7XG4gICAgICAgIGxldCBuID0gdGhpcy51aVtlLnRvS2V5KCldO1xuICAgICAgICByZXR1cm4gbiB8fCAobiA9IG5ldyBfX1BSSVZBVEVfTWVtb3J5TXV0YXRpb25RdWV1ZSh0LCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlKSwgdGhpcy51aVtlLnRvS2V5KCldID0gbiksIFxuICAgICAgICBuO1xuICAgIH1cbiAgICBnZXRHbG9iYWxzQ2FjaGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhpO1xuICAgIH1cbiAgICBnZXRUYXJnZXRDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuUGk7XG4gICAgfVxuICAgIGdldFJlbW90ZURvY3VtZW50Q2FjaGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGU7XG4gICAgfVxuICAgIGdldEJ1bmRsZUNhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5JaTtcbiAgICB9XG4gICAgcnVuVHJhbnNhY3Rpb24oZSwgdCwgbikge1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJNZW1vcnlQZXJzaXN0ZW5jZVwiLCBcIlN0YXJ0aW5nIHRyYW5zYWN0aW9uOlwiLCBlKTtcbiAgICAgICAgY29uc3QgciA9IG5ldyBfX1BSSVZBVEVfTWVtb3J5VHJhbnNhY3Rpb24odGhpcy5jaS5uZXh0KCkpO1xuICAgICAgICByZXR1cm4gdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5FaSgpLCBuKHIpLm5leHQoKGUgPT4gdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5kaShyKS5uZXh0KCgoKSA9PiBlKSkpKS50b1Byb21pc2UoKS50aGVuKChlID0+IChyLnJhaXNlT25Db21taXR0ZWRFdmVudCgpLCBcbiAgICAgICAgZSkpKTtcbiAgICB9XG4gICAgQWkoZSwgdCkge1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLm9yKE9iamVjdC52YWx1ZXModGhpcy51aSkubWFwKChuID0+ICgpID0+IG4uY29udGFpbnNLZXkoZSwgdCkpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIE1lbW9yeSBwZXJzaXN0ZW5jZSBpcyBub3QgYWN0dWFsbHkgdHJhbnNhY3Rpb25hbCwgYnV0IGZ1dHVyZSBpbXBsZW1lbnRhdGlvbnNcbiAqIG1heSBoYXZlIHRyYW5zYWN0aW9uLXNjb3BlZCBzdGF0ZS5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfTWVtb3J5VHJhbnNhY3Rpb24gZXh0ZW5kcyBQZXJzaXN0ZW5jZVRyYW5zYWN0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuY3VycmVudFNlcXVlbmNlTnVtYmVyID0gZTtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9NZW1vcnlFYWdlckRlbGVnYXRlIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSBlLCBcbiAgICAgICAgLyoqIFRyYWNrcyBhbGwgZG9jdW1lbnRzIHRoYXQgYXJlIGFjdGl2ZSBpbiBRdWVyeSB2aWV3cy4gKi9cbiAgICAgICAgdGhpcy5SaSA9IG5ldyBfX1BSSVZBVEVfUmVmZXJlbmNlU2V0LCBcbiAgICAgICAgLyoqIFRoZSBsaXN0IG9mIGRvY3VtZW50cyB0aGF0IGFyZSBwb3RlbnRpYWxseSBHQ2VkIGFmdGVyIGVhY2ggdHJhbnNhY3Rpb24uICovXG4gICAgICAgIHRoaXMuVmkgPSBudWxsO1xuICAgIH1cbiAgICBzdGF0aWMgbWkoZSkge1xuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9NZW1vcnlFYWdlckRlbGVnYXRlKGUpO1xuICAgIH1cbiAgICBnZXQgZmkoKSB7XG4gICAgICAgIGlmICh0aGlzLlZpKSByZXR1cm4gdGhpcy5WaTtcbiAgICAgICAgdGhyb3cgZmFpbCg2MDk5Nik7XG4gICAgfVxuICAgIGFkZFJlZmVyZW5jZShlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlJpLmFkZFJlZmVyZW5jZShuLCB0KSwgdGhpcy5maS5kZWxldGUobi50b1N0cmluZygpKSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmVtb3ZlUmVmZXJlbmNlKGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuUmkucmVtb3ZlUmVmZXJlbmNlKG4sIHQpLCB0aGlzLmZpLmFkZChuLnRvU3RyaW5nKCkpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBtYXJrUG90ZW50aWFsbHlPcnBoYW5lZChlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpLmFkZCh0LnRvU3RyaW5nKCkpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXQoZSwgdCkge1xuICAgICAgICB0aGlzLlJpLmpyKHQudGFyZ2V0SWQpLmZvckVhY2goKGUgPT4gdGhpcy5maS5hZGQoZS50b1N0cmluZygpKSkpO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5wZXJzaXN0ZW5jZS5nZXRUYXJnZXRDYWNoZSgpO1xuICAgICAgICByZXR1cm4gbi5nZXRNYXRjaGluZ0tleXNGb3JUYXJnZXRJZChlLCB0LnRhcmdldElkKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGUuZm9yRWFjaCgoZSA9PiB0aGlzLmZpLmFkZChlLnRvU3RyaW5nKCkpKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBuLnJlbW92ZVRhcmdldERhdGEoZSwgdCkpKTtcbiAgICB9XG4gICAgRWkoKSB7XG4gICAgICAgIHRoaXMuVmkgPSBuZXcgU2V0O1xuICAgIH1cbiAgICBkaShlKSB7XG4gICAgICAgIC8vIFJlbW92ZSBuZXdseSBvcnBoYW5lZCBkb2N1bWVudHMuXG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnBlcnNpc3RlbmNlLmdldFJlbW90ZURvY3VtZW50Q2FjaGUoKS5uZXdDaGFuZ2VCdWZmZXIoKTtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHRoaXMuZmksIChuID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBEb2N1bWVudEtleS5mcm9tUGF0aChuKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdpKGUsIHIpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgICAgIGUgfHwgdC5yZW1vdmVFbnRyeShyLCBTbmFwc2hvdFZlcnNpb24ubWluKCkpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gKHRoaXMuVmkgPSBudWxsLCB0LmFwcGx5KGUpKSkpO1xuICAgIH1cbiAgICB1cGRhdGVMaW1ib0RvY3VtZW50KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2koZSwgdCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBlID8gdGhpcy5maS5kZWxldGUodC50b1N0cmluZygpKSA6IHRoaXMuZmkuYWRkKHQudG9TdHJpbmcoKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgVGkoZSkge1xuICAgICAgICAvLyBGb3IgZWFnZXIgR0MsIHdlIGRvbid0IGNhcmUgYWJvdXQgdGhlIGRvY3VtZW50IHNpemUsIHRoZXJlIGFyZSBubyBzaXplIHRocmVzaG9sZHMuXG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBnaShlLCB0KSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2Uub3IoWyAoKSA9PiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLlJpLmNvbnRhaW5zS2V5KHQpKSwgKCkgPT4gdGhpcy5wZXJzaXN0ZW5jZS5nZXRUYXJnZXRDYWNoZSgpLmNvbnRhaW5zS2V5KGUsIHQpLCAoKSA9PiB0aGlzLnBlcnNpc3RlbmNlLkFpKGUsIHQpIF0pO1xuICAgIH1cbn1cblxuY2xhc3MgX19QUklWQVRFX01lbW9yeUxydURlbGVnYXRlIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSBlLCB0aGlzLnBpID0gbmV3IE9iamVjdE1hcCgoZSA9PiBfX1BSSVZBVEVfZW5jb2RlUmVzb3VyY2VQYXRoKGUucGF0aCkpLCAoKGUsIHQpID0+IGUuaXNFcXVhbCh0KSkpLCBcbiAgICAgICAgdGhpcy5nYXJiYWdlQ29sbGVjdG9yID0gX19QUklWQVRFX25ld0xydUdhcmJhZ2VDb2xsZWN0b3IodGhpcywgdCk7XG4gICAgfVxuICAgIHN0YXRpYyBtaShlLCB0KSB7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX01lbW9yeUxydURlbGVnYXRlKGUsIHQpO1xuICAgIH1cbiAgICAvLyBOby1vcHMsIHByZXNlbnQgc28gbWVtb3J5IHBlcnNpc3RlbmNlIGRvZXNuJ3QgaGF2ZSB0byBjYXJlIHdoaWNoIGRlbGVnYXRlXG4gICAgLy8gaXQgaGFzLlxuICAgIEVpKCkge31cbiAgICBkaShlKSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBmb3JFYWNoVGFyZ2V0KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UuZ2V0VGFyZ2V0Q2FjaGUoKS5mb3JFYWNoVGFyZ2V0KGUsIHQpO1xuICAgIH1cbiAgICBncihlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLndyKGUpO1xuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5nZXRUYXJnZXRDYWNoZSgpLmdldFRhcmdldENvdW50KGUpLm5leHQoKGUgPT4gdC5uZXh0KCh0ID0+IGUgKyB0KSkpKTtcbiAgICB9XG4gICAgd3IoZSkge1xuICAgICAgICBsZXQgdCA9IDA7XG4gICAgICAgIHJldHVybiB0aGlzLnByKGUsIChlID0+IHtcbiAgICAgICAgICAgIHQrKztcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHQpKTtcbiAgICB9XG4gICAgcHIoZSwgdCkge1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2godGhpcy5waSwgKChuLCByKSA9PiB0aGlzLmJyKGUsIG4sIHIpLm5leHQoKGUgPT4gZSA/IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCkgOiB0KHIpKSkpKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0cyhlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLmdldFRhcmdldENhY2hlKCkucmVtb3ZlVGFyZ2V0cyhlLCB0LCBuKTtcbiAgICB9XG4gICAgcmVtb3ZlT3JwaGFuZWREb2N1bWVudHMoZSwgdCkge1xuICAgICAgICBsZXQgbiA9IDA7XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLnBlcnNpc3RlbmNlLmdldFJlbW90ZURvY3VtZW50Q2FjaGUoKSwgaSA9IHIubmV3Q2hhbmdlQnVmZmVyKCk7XG4gICAgICAgIHJldHVybiByLmlpKGUsIChyID0+IHRoaXMuYnIoZSwgciwgdCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBlIHx8IChuKyssIGkucmVtb3ZlRW50cnkociwgU25hcHNob3RWZXJzaW9uLm1pbigpKSk7XG4gICAgICAgIH0pKSkpLm5leHQoKCgpID0+IGkuYXBwbHkoZSkpKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIG1hcmtQb3RlbnRpYWxseU9ycGhhbmVkKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGkuc2V0KHQsIGUuY3VycmVudFNlcXVlbmNlTnVtYmVyKSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0KGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHQud2l0aFNlcXVlbmNlTnVtYmVyKGUuY3VycmVudFNlcXVlbmNlTnVtYmVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UuZ2V0VGFyZ2V0Q2FjaGUoKS51cGRhdGVUYXJnZXREYXRhKGUsIG4pO1xuICAgIH1cbiAgICBhZGRSZWZlcmVuY2UoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5waS5zZXQobiwgZS5jdXJyZW50U2VxdWVuY2VOdW1iZXIpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZW1vdmVSZWZlcmVuY2UoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5waS5zZXQobiwgZS5jdXJyZW50U2VxdWVuY2VOdW1iZXIpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICB1cGRhdGVMaW1ib0RvY3VtZW50KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGkuc2V0KHQsIGUuY3VycmVudFNlcXVlbmNlTnVtYmVyKSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgVGkoZSkge1xuICAgICAgICBsZXQgdCA9IGUua2V5LnRvU3RyaW5nKCkubGVuZ3RoO1xuICAgICAgICByZXR1cm4gZS5pc0ZvdW5kRG9jdW1lbnQoKSAmJiAodCArPSBfX1BSSVZBVEVfZXN0aW1hdGVCeXRlU2l6ZShlLmRhdGEudmFsdWUpKSwgdDtcbiAgICB9XG4gICAgYnIoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLm9yKFsgKCkgPT4gdGhpcy5wZXJzaXN0ZW5jZS5BaShlLCB0KSwgKCkgPT4gdGhpcy5wZXJzaXN0ZW5jZS5nZXRUYXJnZXRDYWNoZSgpLmNvbnRhaW5zS2V5KGUsIHQpLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy5waS5nZXQodCk7XG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodm9pZCAwICE9PSBlICYmIGUgPiBuKTtcbiAgICAgICAgfSBdKTtcbiAgICB9XG4gICAgZ2V0Q2FjaGVTaXplKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpLmdldFNpemUoZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFBlcmZvcm1zIGRhdGFiYXNlIGNyZWF0aW9uIGFuZCBzY2hlbWEgdXBncmFkZXMuICovIGNsYXNzIF9fUFJJVkFURV9TY2hlbWFDb252ZXJ0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5zZXJpYWxpemVyID0gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgZGF0YWJhc2UgY3JlYXRpb24gYW5kIHNjaGVtYSB1cGdyYWRlcy5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCBpbiBwcm9kdWN0aW9uLCB0aGlzIG1ldGhvZCBpcyBvbmx5IGV2ZXIgdXNlZCB0byB1cGdyYWRlIHRoZSBzY2hlbWFcbiAgICAgKiB0byBTQ0hFTUFfVkVSU0lPTi4gRGlmZmVyZW50IHZhbHVlcyBvZiB0b1ZlcnNpb24gYXJlIG9ubHkgdXNlZCBmb3IgdGVzdGluZ1xuICAgICAqIGFuZCBsb2NhbCBmZWF0dXJlIGRldmVsb3BtZW50LlxuICAgICAqLyAgICBrKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgY29uc3QgaSA9IG5ldyBfX1BSSVZBVEVfU2ltcGxlRGJUcmFuc2FjdGlvbihcImNyZWF0ZU9yVXBncmFkZVwiLCB0KTtcbiAgICAgICAgbiA8IDEgJiYgciA+PSAxICYmICghZnVuY3Rpb24gX19QUklWQVRFX2NyZWF0ZVByaW1hcnlDbGllbnRTdG9yZShlKSB7XG4gICAgICAgICAgICBlLmNyZWF0ZU9iamVjdFN0b3JlKFkpO1xuICAgICAgICB9KGUpLCBmdW5jdGlvbiBfX1BSSVZBVEVfY3JlYXRlTXV0YXRpb25RdWV1ZShlKSB7XG4gICAgICAgICAgICBlLmNyZWF0ZU9iamVjdFN0b3JlKFgsIHtcbiAgICAgICAgICAgICAgICBrZXlQYXRoOiBlZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS5jcmVhdGVPYmplY3RTdG9yZSh0ZSwge1xuICAgICAgICAgICAgICAgIGtleVBhdGg6IG5lLFxuICAgICAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6ICEwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHQuY3JlYXRlSW5kZXgocmUsIGllLCB7XG4gICAgICAgICAgICAgICAgdW5pcXVlOiAhMFxuICAgICAgICAgICAgfSksIGUuY3JlYXRlT2JqZWN0U3RvcmUob2UpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogVXBncmFkZSBmdW5jdGlvbiB0byBtaWdyYXRlIHRoZSAnbXV0YXRpb25zJyBzdG9yZSBmcm9tIFYxIHRvIFYzLiBMb2Fkc1xuICogYW5kIHJld3JpdGVzIGFsbCBkYXRhLlxuICovIChlKSwgX19QUklWQVRFX2NyZWF0ZVF1ZXJ5Q2FjaGUoZSksIGZ1bmN0aW9uIF9fUFJJVkFURV9jcmVhdGVMZWdhY3lSZW1vdGVEb2N1bWVudENhY2hlKGUpIHtcbiAgICAgICAgICAgIGUuY3JlYXRlT2JqZWN0U3RvcmUoSCk7XG4gICAgICAgIH0oZSkpO1xuICAgICAgICAvLyBNaWdyYXRpb24gMiB0byBwb3B1bGF0ZSB0aGUgdGFyZ2V0R2xvYmFsIG9iamVjdCBubyBsb25nZXIgbmVlZGVkIHNpbmNlXG4gICAgICAgIC8vIG1pZ3JhdGlvbiAzIHVuY29uZGl0aW9uYWxseSBjbGVhcnMgaXQuXG4gICAgICAgICAgICAgICAgbGV0IHMgPSBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICByZXR1cm4gbiA8IDMgJiYgciA+PSAzICYmIChcbiAgICAgICAgLy8gQnJhbmQgbmV3IGNsaWVudHMgZG9uJ3QgbmVlZCB0byBkcm9wIGFuZCByZWNyZWF0ZS0tb25seSBjbGllbnRzIHRoYXRcbiAgICAgICAgLy8gcG90ZW50aWFsbHkgaGF2ZSBjb3JydXB0IGRhdGEuXG4gICAgICAgIDAgIT09IG4gJiYgKCFmdW5jdGlvbiBfX1BSSVZBVEVfZHJvcFF1ZXJ5Q2FjaGUoZSkge1xuICAgICAgICAgICAgZS5kZWxldGVPYmplY3RTdG9yZShBZSksIGUuZGVsZXRlT2JqZWN0U3RvcmUoSWUpLCBlLmRlbGV0ZU9iamVjdFN0b3JlKGdlKTtcbiAgICAgICAgfShlKSwgX19QUklWQVRFX2NyZWF0ZVF1ZXJ5Q2FjaGUoZSkpLCBzID0gcy5uZXh0KCgoKSA9PiBcbiAgICAgICAgLyoqXG4gKiBDcmVhdGVzIHRoZSB0YXJnZXQgZ2xvYmFsIHNpbmdsZXRvbiByb3cuXG4gKlxuICogQHBhcmFtIHR4biAtIFRoZSB2ZXJzaW9uIHVwZ3JhZGUgdHJhbnNhY3Rpb24gZm9yIGluZGV4ZWRkYlxuICovXG4gICAgICAgIGZ1bmN0aW9uIF9fUFJJVkFURV93cml0ZUVtcHR5VGFyZ2V0R2xvYmFsRW50cnkoZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGUuc3RvcmUoZ2UpLCBuID0ge1xuICAgICAgICAgICAgICAgIGhpZ2hlc3RUYXJnZXRJZDogMCxcbiAgICAgICAgICAgICAgICBoaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXI6IDAsXG4gICAgICAgICAgICAgICAgbGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbjogU25hcHNob3RWZXJzaW9uLm1pbigpLnRvVGltZXN0YW1wKCksXG4gICAgICAgICAgICAgICAgdGFyZ2V0Q291bnQ6IDBcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gdC5wdXQoZmUsIG4pO1xuICAgICAgICB9KGkpKSkpLCBuIDwgNCAmJiByID49IDQgJiYgKDAgIT09IG4gJiYgKFxuICAgICAgICAvLyBTY2hlbWEgdmVyc2lvbiAzIHVzZXMgYXV0by1nZW5lcmF0ZWQga2V5cyB0byBnZW5lcmF0ZSBnbG9iYWxseSB1bmlxdWVcbiAgICAgICAgLy8gbXV0YXRpb24gYmF0Y2ggSURzICh0aGlzIHdhcyBwcmV2aW91c2x5IGVuc3VyZWQgaW50ZXJuYWxseSBieSB0aGVcbiAgICAgICAgLy8gY2xpZW50KS4gVG8gbWlncmF0ZSB0byB0aGUgbmV3IHNjaGVtYSwgd2UgaGF2ZSB0byByZWFkIGFsbCBtdXRhdGlvbnNcbiAgICAgICAgLy8gYW5kIHdyaXRlIHRoZW0gYmFjayBvdXQuIFdlIHByZXNlcnZlIHRoZSBleGlzdGluZyBiYXRjaCBJRHMgdG8gZ3VhcmFudGVlXG4gICAgICAgIC8vIGNvbnNpc3RlbmN5IHdpdGggb3RoZXIgb2JqZWN0IHN0b3Jlcy4gQW55IGZ1cnRoZXIgbXV0YXRpb24gYmF0Y2ggSURzIHdpbGxcbiAgICAgICAgLy8gYmUgYXV0by1nZW5lcmF0ZWQuXG4gICAgICAgIHMgPSBzLm5leHQoKCgpID0+IGZ1bmN0aW9uIF9fUFJJVkFURV91cGdyYWRlTXV0YXRpb25CYXRjaFNjaGVtYUFuZE1pZ3JhdGVEYXRhKGUsIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LnN0b3JlKHRlKTtcbiAgICAgICAgICAgIHJldHVybiBuLkooKS5uZXh0KChuID0+IHtcbiAgICAgICAgICAgICAgICBlLmRlbGV0ZU9iamVjdFN0b3JlKHRlKTtcbiAgICAgICAgICAgICAgICBlLmNyZWF0ZU9iamVjdFN0b3JlKHRlLCB7XG4gICAgICAgICAgICAgICAgICAgIGtleVBhdGg6IG5lLFxuICAgICAgICAgICAgICAgICAgICBhdXRvSW5jcmVtZW50OiAhMFxuICAgICAgICAgICAgICAgIH0pLmNyZWF0ZUluZGV4KHJlLCBpZSwge1xuICAgICAgICAgICAgICAgICAgICB1bmlxdWU6ICEwXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IHQuc3RvcmUodGUpLCBpID0gbi5tYXAoKGUgPT4gci5wdXQoZSkpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IoaSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0oZSwgaSkpKSksIHMgPSBzLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgICFmdW5jdGlvbiBfX1BSSVZBVEVfY3JlYXRlQ2xpZW50TWV0YWRhdGFTdG9yZShlKSB7XG4gICAgICAgICAgICAgICAgZS5jcmVhdGVPYmplY3RTdG9yZSh3ZSwge1xuICAgICAgICAgICAgICAgICAgICBrZXlQYXRoOiBTZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfShlKTtcbiAgICAgICAgfSkpKSwgbiA8IDUgJiYgciA+PSA1ICYmIChzID0gcy5uZXh0KCgoKSA9PiB0aGlzLnlpKGkpKSkpLCBuIDwgNiAmJiByID49IDYgJiYgKHMgPSBzLm5leHQoKCgpID0+IChmdW5jdGlvbiBfX1BSSVZBVEVfY3JlYXRlRG9jdW1lbnRHbG9iYWxTdG9yZShlKSB7XG4gICAgICAgICAgICBlLmNyZWF0ZU9iamVjdFN0b3JlKFBlKTtcbiAgICAgICAgfShlKSwgdGhpcy53aShpKSkpKSksIG4gPCA3ICYmIHIgPj0gNyAmJiAocyA9IHMubmV4dCgoKCkgPT4gdGhpcy5TaShpKSkpKSwgbiA8IDggJiYgciA+PSA4ICYmIChzID0gcy5uZXh0KCgoKSA9PiB0aGlzLmJpKGUsIGkpKSkpLCBcbiAgICAgICAgbiA8IDkgJiYgciA+PSA5ICYmIChzID0gcy5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBNdWx0aS1UYWIgdXNlZCB0byBtYW5hZ2UgaXRzIG93biBjaGFuZ2Vsb2csIGJ1dCB0aGlzIGhhcyBiZWVuIG1vdmVkXG4gICAgICAgICAgICAvLyB0byB0aGUgRGJSZW1vdGVEb2N1bWVudCBvYmplY3Qgc3RvcmUgaXRzZWxmLiBTaW5jZSB0aGUgcHJldmlvdXMgY2hhbmdlXG4gICAgICAgICAgICAvLyBsb2cgb25seSBjb250YWluZWQgdHJhbnNpZW50IGRhdGEsIHdlIGNhbiBkcm9wIGl0cyBvYmplY3Qgc3RvcmUuXG4gICAgICAgICAgICAhZnVuY3Rpb24gX19QUklWQVRFX2Ryb3BSZW1vdGVEb2N1bWVudENoYW5nZXNTdG9yZShlKSB7XG4gICAgICAgICAgICAgICAgZS5vYmplY3RTdG9yZU5hbWVzLmNvbnRhaW5zKFwicmVtb3RlRG9jdW1lbnRDaGFuZ2VzXCIpICYmIGUuZGVsZXRlT2JqZWN0U3RvcmUoXCJyZW1vdGVEb2N1bWVudENoYW5nZXNcIik7XG4gICAgICAgICAgICB9KGUpO1xuICAgICAgICAgICAgLy8gTm90ZTogU2NoZW1hIHZlcnNpb24gOSB1c2VkIHRvIGNyZWF0ZSBhIHJlYWQgdGltZSBpbmRleCBmb3IgdGhlXG4gICAgICAgICAgICAvLyBSZW1vdGVEb2N1bWVudENhY2hlLiBUaGlzIGlzIG5vdyBkb25lIHdpdGggc2NoZW1hIHZlcnNpb24gMTMuXG4gICAgICAgICAgICAgICAgfSkpKSwgbiA8IDEwICYmIHIgPj0gMTAgJiYgKHMgPSBzLm5leHQoKCgpID0+IHRoaXMuRGkoaSkpKSksIG4gPCAxMSAmJiByID49IDExICYmIChzID0gcy5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAhZnVuY3Rpb24gX19QUklWQVRFX2NyZWF0ZUJ1bmRsZXNTdG9yZShlKSB7XG4gICAgICAgICAgICAgICAgZS5jcmVhdGVPYmplY3RTdG9yZShiZSwge1xuICAgICAgICAgICAgICAgICAgICBrZXlQYXRoOiBEZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfShlKSwgZnVuY3Rpb24gX19QUklWQVRFX2NyZWF0ZU5hbWVkUXVlcmllc1N0b3JlKGUpIHtcbiAgICAgICAgICAgICAgICBlLmNyZWF0ZU9iamVjdFN0b3JlKENlLCB7XG4gICAgICAgICAgICAgICAgICAgIGtleVBhdGg6IHZlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KGUpO1xuICAgICAgICB9KSkpLCBuIDwgMTIgJiYgciA+PSAxMiAmJiAocyA9IHMubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgIWZ1bmN0aW9uIF9fUFJJVkFURV9jcmVhdGVEb2N1bWVudE92ZXJsYXlTdG9yZShlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IGUuY3JlYXRlT2JqZWN0U3RvcmUoS2UsIHtcbiAgICAgICAgICAgICAgICAgICAga2V5UGF0aDogV2VcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0LmNyZWF0ZUluZGV4KEdlLCB6ZSwge1xuICAgICAgICAgICAgICAgICAgICB1bmlxdWU6ICExXG4gICAgICAgICAgICAgICAgfSksIHQuY3JlYXRlSW5kZXgoamUsIEplLCB7XG4gICAgICAgICAgICAgICAgICAgIHVuaXF1ZTogITFcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0oZSk7XG4gICAgICAgIH0pKSksIG4gPCAxMyAmJiByID49IDEzICYmIChzID0gcy5uZXh0KCgoKSA9PiBmdW5jdGlvbiBfX1BSSVZBVEVfY3JlYXRlUmVtb3RlRG9jdW1lbnRDYWNoZShlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS5jcmVhdGVPYmplY3RTdG9yZShfZSwge1xuICAgICAgICAgICAgICAgIGtleVBhdGg6IGFlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHQuY3JlYXRlSW5kZXgodWUsIGNlKSwgdC5jcmVhdGVJbmRleChsZSwgaGUpO1xuICAgICAgICB9KGUpKSkubmV4dCgoKCkgPT4gdGhpcy5DaShlLCBpKSkpLm5leHQoKCgpID0+IGUuZGVsZXRlT2JqZWN0U3RvcmUoSCkpKSksIG4gPCAxNCAmJiByID49IDE0ICYmIChzID0gcy5uZXh0KCgoKSA9PiB0aGlzLkZpKGUsIGkpKSkpLCBcbiAgICAgICAgbiA8IDE1ICYmIHIgPj0gMTUgJiYgKHMgPSBzLm5leHQoKCgpID0+IGZ1bmN0aW9uIF9fUFJJVkFURV9jcmVhdGVGaWVsZEluZGV4KGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlLmNyZWF0ZU9iamVjdFN0b3JlKEZlLCB7XG4gICAgICAgICAgICAgICAga2V5UGF0aDogTWUsXG4gICAgICAgICAgICAgICAgYXV0b0luY3JlbWVudDogITBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdC5jcmVhdGVJbmRleCh4ZSwgT2UsIHtcbiAgICAgICAgICAgICAgICB1bmlxdWU6ICExXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLmNyZWF0ZU9iamVjdFN0b3JlKE5lLCB7XG4gICAgICAgICAgICAgICAga2V5UGF0aDogQmVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbi5jcmVhdGVJbmRleChMZSwga2UsIHtcbiAgICAgICAgICAgICAgICB1bmlxdWU6ICExXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBlLmNyZWF0ZU9iamVjdFN0b3JlKHFlLCB7XG4gICAgICAgICAgICAgICAga2V5UGF0aDogUWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgci5jcmVhdGVJbmRleCgkZSwgVWUsIHtcbiAgICAgICAgICAgICAgICB1bmlxdWU6ICExXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfShlKSkpKSwgbiA8IDE2ICYmIHIgPj0gMTYgJiYgKFxuICAgICAgICAvLyBDbGVhciB0aGUgb2JqZWN0IHN0b3JlcyB0byByZW1vdmUgcG9zc2libHkgY29ycnVwdGVkIGluZGV4IGVudHJpZXNcbiAgICAgICAgcyA9IHMubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgdC5vYmplY3RTdG9yZShOZSkuY2xlYXIoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIHQub2JqZWN0U3RvcmUocWUpLmNsZWFyKCk7XG4gICAgICAgIH0pKSksIG4gPCAxNyAmJiByID49IDE3ICYmIChzID0gcy5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAhZnVuY3Rpb24gX19QUklWQVRFX2NyZWF0ZUdsb2JhbHNTdG9yZShlKSB7XG4gICAgICAgICAgICAgICAgZS5jcmVhdGVPYmplY3RTdG9yZShIZSwge1xuICAgICAgICAgICAgICAgICAgICBrZXlQYXRoOiBZZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfShlKTtcbiAgICAgICAgfSkpKSwgbiA8IDE4ICYmIHIgPj0gMTggJiYgaXNTYWZhcmlPcldlYmtpdCgpICYmIChzID0gcy5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICB0Lm9iamVjdFN0b3JlKE5lKS5jbGVhcigpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgdC5vYmplY3RTdG9yZShxZSkuY2xlYXIoKTtcbiAgICAgICAgfSkpKSwgcztcbiAgICB9XG4gICAgd2koZSkge1xuICAgICAgICBsZXQgdCA9IDA7XG4gICAgICAgIHJldHVybiBlLnN0b3JlKEgpLmVlKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgdCArPSBfX1BSSVZBVEVfZGJEb2N1bWVudFNpemUobik7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0ge1xuICAgICAgICAgICAgICAgIGJ5dGVTaXplOiB0XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIGUuc3RvcmUoUGUpLnB1dChUZSwgbik7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgeWkoZSkge1xuICAgICAgICBjb25zdCB0ID0gZS5zdG9yZShYKSwgbiA9IGUuc3RvcmUodGUpO1xuICAgICAgICByZXR1cm4gdC5KKCkubmV4dCgodCA9PiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaCh0LCAodCA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gSURCS2V5UmFuZ2UuYm91bmQoWyB0LnVzZXJJZCwgaiBdLCBbIHQudXNlcklkLCB0Lmxhc3RBY2tub3dsZWRnZWRCYXRjaElkIF0pO1xuICAgICAgICAgICAgcmV0dXJuIG4uSihyZSwgcikubmV4dCgobiA9PiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaChuLCAobiA9PiB7XG4gICAgICAgICAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQobi51c2VySWQgPT09IHQudXNlcklkLCAxODY1MCwgXCJDYW5ub3QgcHJvY2VzcyBiYXRjaCBmcm9tIHVuZXhwZWN0ZWQgdXNlclwiLCB7XG4gICAgICAgICAgICAgICAgICAgIGJhdGNoSWQ6IG4uYmF0Y2hJZFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfZnJvbURiTXV0YXRpb25CYXRjaCh0aGlzLnNlcmlhbGl6ZXIsIG4pO1xuICAgICAgICAgICAgICAgIHJldHVybiByZW1vdmVNdXRhdGlvbkJhdGNoKGUsIHQudXNlcklkLCByKS5uZXh0KCgoKSA9PiB7fSkpO1xuICAgICAgICAgICAgfSkpKSk7XG4gICAgICAgIH0pKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbnN1cmVzIHRoYXQgZXZlcnkgZG9jdW1lbnQgaW4gdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZSBoYXMgYSBjb3JyZXNwb25kaW5nIHNlbnRpbmVsIHJvd1xuICAgICAqIHdpdGggYSBzZXF1ZW5jZSBudW1iZXIuIE1pc3Npbmcgcm93cyBhcmUgZ2l2ZW4gdGhlIG1vc3QgcmVjZW50bHkgdXNlZCBzZXF1ZW5jZSBudW1iZXIuXG4gICAgICovICAgIFNpKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGUuc3RvcmUoQWUpLCBuID0gZS5zdG9yZShIKTtcbiAgICAgICAgcmV0dXJuIGUuc3RvcmUoZ2UpLmdldChmZSkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gW107XG4gICAgICAgICAgICByZXR1cm4gbi5lZSgoKG4sIGkpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gbmV3IFJlc291cmNlUGF0aChuKSwgbyA9IGZ1bmN0aW9uIF9fUFJJVkFURV9zZW50aW5lbEtleShlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbIDAsIF9fUFJJVkFURV9lbmNvZGVSZXNvdXJjZVBhdGgoZSkgXTtcbiAgICAgICAgICAgICAgICB9KHMpO1xuICAgICAgICAgICAgICAgIHIucHVzaCh0LmdldChvKS5uZXh0KChuID0+IG4gPyBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpIDogKG4gPT4gdC5wdXQoe1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXRJZDogMCxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogX19QUklWQVRFX2VuY29kZVJlc291cmNlUGF0aChuKSxcbiAgICAgICAgICAgICAgICAgICAgc2VxdWVuY2VOdW1iZXI6IGUuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyXG4gICAgICAgICAgICAgICAgfSkpKHMpKSkpO1xuICAgICAgICAgICAgfSkpLm5leHQoKCgpID0+IFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHIpKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgYmkoZSwgdCkge1xuICAgICAgICAvLyBDcmVhdGUgdGhlIGluZGV4LlxuICAgICAgICBlLmNyZWF0ZU9iamVjdFN0b3JlKHBlLCB7XG4gICAgICAgICAgICBrZXlQYXRoOiB5ZVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgbiA9IHQuc3RvcmUocGUpLCByID0gbmV3IF9fUFJJVkFURV9NZW1vcnlDb2xsZWN0aW9uUGFyZW50SW5kZXgsIGFkZEVudHJ5ID0gZSA9PiB7XG4gICAgICAgICAgICBpZiAoci5hZGQoZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZS5sYXN0U2VnbWVudCgpLCByID0gZS5wb3BMYXN0KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4ucHV0KHtcbiAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbklkOiB0LFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IF9fUFJJVkFURV9lbmNvZGVSZXNvdXJjZVBhdGgocilcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLy8gSGVscGVyIHRvIGFkZCBhbiBpbmRleCBlbnRyeSBpZmYgd2UgaGF2ZW4ndCBhbHJlYWR5IHdyaXR0ZW4gaXQuXG4gICAgICAgICAgICAgICAgLy8gSW5kZXggZXhpc3RpbmcgcmVtb3RlIGRvY3VtZW50cy5cbiAgICAgICAgcmV0dXJuIHQuc3RvcmUoSCkuZWUoe1xuICAgICAgICAgICAgWDogITBcbiAgICAgICAgfSwgKChlLCB0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gbmV3IFJlc291cmNlUGF0aChlKTtcbiAgICAgICAgICAgIHJldHVybiBhZGRFbnRyeShuLnBvcExhc3QoKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB0LnN0b3JlKG9lKS5lZSh7XG4gICAgICAgICAgICBYOiAhMFxuICAgICAgICB9LCAoKFtlLCB0LCBuXSwgcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IF9fUFJJVkFURV9kZWNvZGVSZXNvdXJjZVBhdGgodCk7XG4gICAgICAgICAgICByZXR1cm4gYWRkRW50cnkoaS5wb3BMYXN0KCkpO1xuICAgICAgICB9KSkpKTtcbiAgICB9XG4gICAgRGkoZSkge1xuICAgICAgICBjb25zdCB0ID0gZS5zdG9yZShJZSk7XG4gICAgICAgIHJldHVybiB0LmVlKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9mcm9tRGJUYXJnZXQobiksIGkgPSBfX1BSSVZBVEVfdG9EYlRhcmdldCh0aGlzLnNlcmlhbGl6ZXIsIHIpO1xuICAgICAgICAgICAgcmV0dXJuIHQucHV0KGkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIENpKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHQuc3RvcmUoSCksIHIgPSBbXTtcbiAgICAgICAgcmV0dXJuIG4uZWUoKChlLCBuKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gdC5zdG9yZShfZSksIHMgPSBmdW5jdGlvbiBfX1BSSVZBVEVfZXh0cmFjdEtleShlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUuZG9jdW1lbnQgPyBuZXcgRG9jdW1lbnRLZXkoUmVzb3VyY2VQYXRoLmZyb21TdHJpbmcoZS5kb2N1bWVudC5uYW1lKS5wb3BGaXJzdCg1KSkgOiBlLm5vRG9jdW1lbnQgPyBEb2N1bWVudEtleS5mcm9tU2VnbWVudHMoZS5ub0RvY3VtZW50LnBhdGgpIDogZS51bmtub3duRG9jdW1lbnQgPyBEb2N1bWVudEtleS5mcm9tU2VnbWVudHMoZS51bmtub3duRG9jdW1lbnQucGF0aCkgOiBmYWlsKDM2NzgzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIChuKS5wYXRoLnRvQXJyYXkoKSwgbyA9IHtcbiAgICAgICAgICAgICAgICBwcmVmaXhQYXRoOiBzLnNsaWNlKDAsIHMubGVuZ3RoIC0gMiksXG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbkdyb3VwOiBzW3MubGVuZ3RoIC0gMl0sXG4gICAgICAgICAgICAgICAgZG9jdW1lbnRJZDogc1tzLmxlbmd0aCAtIDFdLFxuICAgICAgICAgICAgICAgIHJlYWRUaW1lOiBuLnJlYWRUaW1lIHx8IFsgMCwgMCBdLFxuICAgICAgICAgICAgICAgIHVua25vd25Eb2N1bWVudDogbi51bmtub3duRG9jdW1lbnQsXG4gICAgICAgICAgICAgICAgbm9Eb2N1bWVudDogbi5ub0RvY3VtZW50LFxuICAgICAgICAgICAgICAgIGRvY3VtZW50OiBuLmRvY3VtZW50LFxuICAgICAgICAgICAgICAgIGhhc0NvbW1pdHRlZE11dGF0aW9uczogISFuLmhhc0NvbW1pdHRlZE11dGF0aW9uc1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHIucHVzaChpLnB1dChvKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihyKSkpO1xuICAgIH1cbiAgICBGaShlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0LnN0b3JlKHRlKSwgciA9IF9fUFJJVkFURV9uZXdJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlKHRoaXMuc2VyaWFsaXplciksIGkgPSBuZXcgX19QUklWQVRFX01lbW9yeVBlcnNpc3RlbmNlKF9fUFJJVkFURV9NZW1vcnlFYWdlckRlbGVnYXRlLm1pLCB0aGlzLnNlcmlhbGl6ZXIueXQpO1xuICAgICAgICByZXR1cm4gbi5KKCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gbmV3IE1hcDtcbiAgICAgICAgICAgIHJldHVybiBlLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgICAgIGxldCB0ID0gbi5nZXQoZS51c2VySWQpID8/IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpO1xuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9mcm9tRGJNdXRhdGlvbkJhdGNoKHRoaXMuc2VyaWFsaXplciwgZSkua2V5cygpLmZvckVhY2goKGUgPT4gdCA9IHQuYWRkKGUpKSksIFxuICAgICAgICAgICAgICAgIG4uc2V0KGUudXNlcklkLCB0KTtcbiAgICAgICAgICAgIH0pKSwgUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2gobiwgKChlLCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IG5ldyBVc2VyKG4pLCBvID0gX19QUklWQVRFX0luZGV4ZWREYkRvY3VtZW50T3ZlcmxheUNhY2hlLnd0KHRoaXMuc2VyaWFsaXplciwgcyksIF8gPSBpLmdldEluZGV4TWFuYWdlcihzKSwgYSA9IF9fUFJJVkFURV9JbmRleGVkRGJNdXRhdGlvblF1ZXVlLnd0KHMsIHRoaXMuc2VyaWFsaXplciwgXywgaS5yZWZlcmVuY2VEZWxlZ2F0ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBMb2NhbERvY3VtZW50c1ZpZXcociwgYSwgbywgXykucmVjYWxjdWxhdGVBbmRTYXZlT3ZlcmxheXNGb3JEb2N1bWVudEtleXMobmV3IF9fUFJJVkFURV9JbmRleGVkRGJUcmFuc2FjdGlvbih0LCBfX1BSSVZBVEVfTGlzdGVuU2VxdWVuY2UuY2UpLCBlKS5uZXh0KCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9jcmVhdGVRdWVyeUNhY2hlKGUpIHtcbiAgICBlLmNyZWF0ZU9iamVjdFN0b3JlKEFlLCB7XG4gICAgICAgIGtleVBhdGg6IFJlXG4gICAgfSkuY3JlYXRlSW5kZXgoVmUsIG1lLCB7XG4gICAgICAgIHVuaXF1ZTogITBcbiAgICB9KTtcbiAgICAvLyBOT1RFOiBUaGlzIGlzIHVuaXF1ZSBvbmx5IGJlY2F1c2UgdGhlIFRhcmdldElkIGlzIHRoZSBzdWZmaXguXG4gICAgZS5jcmVhdGVPYmplY3RTdG9yZShJZSwge1xuICAgICAgICBrZXlQYXRoOiBcInRhcmdldElkXCJcbiAgICB9KS5jcmVhdGVJbmRleChFZSwgZGUsIHtcbiAgICAgICAgdW5pcXVlOiAhMFxuICAgIH0pLCBlLmNyZWF0ZU9iamVjdFN0b3JlKGdlKTtcbn1cblxuY29uc3QgTHQgPSBcIkluZGV4ZWREYlBlcnNpc3RlbmNlXCIsIGt0ID0gMThlNSwgcXQgPSA1ZTMsIFF0ID0gXCJGYWlsZWQgdG8gb2J0YWluIGV4Y2x1c2l2ZSBhY2Nlc3MgdG8gdGhlIHBlcnNpc3RlbmNlIGxheWVyLiBUbyBhbGxvdyBzaGFyZWQgYWNjZXNzLCBtdWx0aS10YWIgc3luY2hyb25pemF0aW9uIGhhcyB0byBiZSBlbmFibGVkIGluIGFsbCB0YWJzLiBJZiB5b3UgYXJlIHVzaW5nIGBleHBlcmltZW50YWxGb3JjZU93bmluZ1RhYjp0cnVlYCwgbWFrZSBzdXJlIHRoYXQgb25seSBvbmUgdGFiIGhhcyBwZXJzaXN0ZW5jZSBlbmFibGVkIGF0IGFueSBnaXZlbiB0aW1lLlwiLCAkdCA9IFwibWFpblwiO1xuXG4vKipcbiAqIE9sZGVzdCBhY2NlcHRhYmxlIGFnZSBpbiBtaWxsaXNlY29uZHMgZm9yIGNsaWVudCBtZXRhZGF0YSBiZWZvcmUgdGhlIGNsaWVudFxuICogaXMgY29uc2lkZXJlZCBpbmFjdGl2ZSBhbmQgaXRzIGFzc29jaWF0ZWQgZGF0YSBpcyBnYXJiYWdlIGNvbGxlY3RlZC5cbiAqL1xuLyoqXG4gKiBBbiBJbmRleGVkREItYmFja2VkIGluc3RhbmNlIG9mIFBlcnNpc3RlbmNlLiBEYXRhIGlzIHN0b3JlZCBwZXJzaXN0ZW50bHlcbiAqIGFjcm9zcyBzZXNzaW9ucy5cbiAqXG4gKiBPbiBXZWIgb25seSwgdGhlIEZpcmVzdG9yZSBTREtzIHN1cHBvcnQgc2hhcmVkIGFjY2VzcyB0byBpdHMgcGVyc2lzdGVuY2VcbiAqIGxheWVyLiBUaGlzIGFsbG93cyBtdWx0aXBsZSBicm93c2VyIHRhYnMgdG8gcmVhZCBhbmQgd3JpdGUgdG8gSW5kZXhlZERiIGFuZFxuICogdG8gc3luY2hyb25pemUgc3RhdGUgZXZlbiB3aXRob3V0IG5ldHdvcmsgY29ubmVjdGl2aXR5LiBTaGFyZWQgYWNjZXNzIGlzXG4gKiBjdXJyZW50bHkgb3B0aW9uYWwgYW5kIG5vdCBlbmFibGVkIHVubGVzcyBhbGwgY2xpZW50cyBpbnZva2VcbiAqIGBlbmFibGVQZXJzaXN0ZW5jZSgpYCB3aXRoIGB7c3luY2hyb25pemVUYWJzOnRydWV9YC5cbiAqXG4gKiBJbiBtdWx0aS10YWIgbW9kZSwgaWYgbXVsdGlwbGUgY2xpZW50cyBhcmUgYWN0aXZlIGF0IHRoZSBzYW1lIHRpbWUsIHRoZSBTREtcbiAqIHdpbGwgZGVzaWduYXRlIG9uZSBjbGllbnQgYXMgdGhlIFwicHJpbWFyeSBjbGllbnRcIi4gQW4gZWZmb3J0IGlzIG1hZGUgdG8gcGlja1xuICogYSB2aXNpYmxlLCBuZXR3b3JrLWNvbm5lY3RlZCBhbmQgYWN0aXZlIGNsaWVudCwgYW5kIHRoaXMgY2xpZW50IGlzXG4gKiByZXNwb25zaWJsZSBmb3IgbGV0dGluZyBvdGhlciBjbGllbnRzIGtub3cgYWJvdXQgaXRzIHByZXNlbmNlLiBUaGUgcHJpbWFyeVxuICogY2xpZW50IHdyaXRlcyBhIHVuaXF1ZSBjbGllbnQtZ2VuZXJhdGVkIGlkZW50aWZpZXIgKHRoZSBjbGllbnQgSUQpIHRvXG4gKiBJbmRleGVkRGLigJlzIFwib3duZXJcIiBzdG9yZSBldmVyeSA0IHNlY29uZHMuIElmIHRoZSBwcmltYXJ5IGNsaWVudCBmYWlscyB0b1xuICogdXBkYXRlIHRoaXMgZW50cnksIGFub3RoZXIgY2xpZW50IGNhbiBhY3F1aXJlIHRoZSBsZWFzZSBhbmQgdGFrZSBvdmVyIGFzXG4gKiBwcmltYXJ5LlxuICpcbiAqIFNvbWUgcGVyc2lzdGVuY2Ugb3BlcmF0aW9ucyBpbiB0aGUgU0RLIGFyZSBkZXNpZ25hdGVkIGFzIHByaW1hcnktY2xpZW50IG9ubHlcbiAqIG9wZXJhdGlvbnMuIFRoaXMgaW5jbHVkZXMgdGhlIGFja25vd2xlZGdtZW50IG9mIG11dGF0aW9ucyBhbmQgYWxsIHVwZGF0ZXMgb2ZcbiAqIHJlbW90ZSBkb2N1bWVudHMuIFRoZSBlZmZlY3RzIG9mIHRoZXNlIG9wZXJhdGlvbnMgYXJlIHdyaXR0ZW4gdG8gcGVyc2lzdGVuY2VcbiAqIGFuZCB0aGVuIGJyb2FkY2FzdCB0byBvdGhlciB0YWJzIHZpYSBMb2NhbFN0b3JhZ2UgKHNlZVxuICogYFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZWApLCB3aGljaCB0aGVuIHJlZnJlc2ggdGhlaXIgc3RhdGUgZnJvbVxuICogcGVyc2lzdGVuY2UuXG4gKlxuICogU2ltaWxhcmx5LCB0aGUgcHJpbWFyeSBjbGllbnQgbGlzdGVucyB0byBub3RpZmljYXRpb25zIHNlbnQgYnkgc2Vjb25kYXJ5XG4gKiBjbGllbnRzIHRvIGRpc2NvdmVyIHBlcnNpc3RlbmNlIGNoYW5nZXMgd3JpdHRlbiBieSBzZWNvbmRhcnkgY2xpZW50cywgc3VjaCBhc1xuICogdGhlIGFkZGl0aW9uIG9mIG5ldyBtdXRhdGlvbnMgYW5kIHF1ZXJ5IHRhcmdldHMuXG4gKlxuICogSWYgbXVsdGktdGFiIGlzIG5vdCBlbmFibGVkIGFuZCBhbm90aGVyIHRhYiBhbHJlYWR5IG9idGFpbmVkIHRoZSBwcmltYXJ5XG4gKiBsZWFzZSwgSW5kZXhlZERiUGVyc2lzdGVuY2UgZW50ZXJzIGEgZmFpbGVkIHN0YXRlIGFuZCBhbGwgc3Vic2VxdWVudFxuICogb3BlcmF0aW9ucyB3aWxsIGF1dG9tYXRpY2FsbHkgZmFpbC5cbiAqXG4gKiBBZGRpdGlvbmFsbHksIHRoZXJlIGlzIGFuIG9wdGltaXphdGlvbiBzbyB0aGF0IHdoZW4gYSB0YWIgaXMgY2xvc2VkLCB0aGVcbiAqIHByaW1hcnkgbGVhc2UgaXMgcmVsZWFzZWQgaW1tZWRpYXRlbHkgKHRoaXMgaXMgZXNwZWNpYWxseSBpbXBvcnRhbnQgdG8gbWFrZVxuICogc3VyZSB0aGF0IGEgcmVmcmVzaGVkIHRhYiBpcyBhYmxlIHRvIGltbWVkaWF0ZWx5IHJlLWFjcXVpcmUgdGhlIHByaW1hcnlcbiAqIGxlYXNlKS4gVW5mb3J0dW5hdGVseSwgSW5kZXhlZERCIGNhbm5vdCBiZSByZWxpYWJseSB1c2VkIGluIHdpbmRvdy51bmxvYWRcbiAqIHNpbmNlIGl0IGlzIGFuIGFzeW5jaHJvbm91cyBBUEkuIFNvIGluIGFkZGl0aW9uIHRvIGF0dGVtcHRpbmcgdG8gZ2l2ZSB1cCB0aGVcbiAqIGxlYXNlLCB0aGUgbGVhc2Vob2xkZXIgd3JpdGVzIGl0cyBjbGllbnQgSUQgdG8gYSBcInpvbWJpZWRDbGllbnRcIiBlbnRyeSBpblxuICogTG9jYWxTdG9yYWdlIHdoaWNoIGFjdHMgYXMgYW4gaW5kaWNhdG9yIHRoYXQgYW5vdGhlciB0YWIgc2hvdWxkIGdvIGFoZWFkIGFuZFxuICogdGFrZSB0aGUgcHJpbWFyeSBsZWFzZSBpbW1lZGlhdGVseSByZWdhcmRsZXNzIG9mIHRoZSBjdXJyZW50IGxlYXNlIHRpbWVzdGFtcC5cbiAqXG4gKiBUT0RPKGIvMTE0MjI2MjM0KTogUmVtb3ZlIGBzeW5jaHJvbml6ZVRhYnNgIHNlY3Rpb24gd2hlbiBtdWx0aS10YWIgaXMgbm9cbiAqIGxvbmdlciBvcHRpb25hbC5cbiAqL1xuY2xhc3MgX19QUklWQVRFX0luZGV4ZWREYlBlcnNpc3RlbmNlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRvIHN5bmNocm9uaXplIHRoZSBpbi1tZW1vcnkgc3RhdGUgb2YgbXVsdGlwbGUgdGFicyBhbmQgc2hhcmVcbiAgICAgKiBhY2Nlc3MgdG8gbG9jYWwgcGVyc2lzdGVuY2UuXG4gICAgICovXG4gICAgZSwgdCwgbiwgciwgaSwgcywgbywgXywgYSwgXG4gICAgLyoqXG4gICAgICogSWYgc2V0IHRvIHRydWUsIGZvcmNlZnVsbHkgb2J0YWlucyBkYXRhYmFzZSBhY2Nlc3MuIEV4aXN0aW5nIHRhYnMgd2lsbFxuICAgICAqIG5vIGxvbmdlciBiZSBhYmxlIHRvIGFjY2VzcyBJbmRleGVkREIuXG4gICAgICovXG4gICAgdSwgYyA9IDE4KSB7XG4gICAgICAgIGlmICh0aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uID0gZSwgdGhpcy5wZXJzaXN0ZW5jZUtleSA9IHQsIHRoaXMuY2xpZW50SWQgPSBuLCBcbiAgICAgICAgdGhpcy5NaSA9IGksIHRoaXMud2luZG93ID0gcywgdGhpcy5kb2N1bWVudCA9IG8sIHRoaXMueGkgPSBhLCB0aGlzLk9pID0gdSwgdGhpcy5OaSA9IGMsIFxuICAgICAgICB0aGlzLmNpID0gbnVsbCwgdGhpcy5saSA9ICExLCB0aGlzLmlzUHJpbWFyeSA9ICExLCB0aGlzLm5ldHdvcmtFbmFibGVkID0gITAsIFxuICAgICAgICAvKiogT3VyIHdpbmRvdy51bmxvYWQgaGFuZGxlciwgaWYgcmVnaXN0ZXJlZC4gKi9cbiAgICAgICAgdGhpcy5CaSA9IG51bGwsIHRoaXMuaW5Gb3JlZ3JvdW5kID0gITEsIFxuICAgICAgICAvKiogT3VyICd2aXNpYmlsaXR5Y2hhbmdlJyBsaXN0ZW5lciBpZiByZWdpc3RlcmVkLiAqL1xuICAgICAgICB0aGlzLkxpID0gbnVsbCwgXG4gICAgICAgIC8qKiBUaGUgY2xpZW50IG1ldGFkYXRhIHJlZnJlc2ggdGFzay4gKi9cbiAgICAgICAgdGhpcy5raSA9IG51bGwsIFxuICAgICAgICAvKiogVGhlIGxhc3QgdGltZSB3ZSBnYXJiYWdlIGNvbGxlY3RlZCB0aGUgY2xpZW50IG1ldGFkYXRhIG9iamVjdCBzdG9yZS4gKi9cbiAgICAgICAgdGhpcy5xaSA9IE51bWJlci5ORUdBVElWRV9JTkZJTklUWSwgXG4gICAgICAgIC8qKiBBIGxpc3RlbmVyIHRvIG5vdGlmeSBvbiBwcmltYXJ5IHN0YXRlIGNoYW5nZXMuICovXG4gICAgICAgIHRoaXMuUWkgPSBlID0+IFByb21pc2UucmVzb2x2ZSgpLCAhX19QUklWQVRFX0luZGV4ZWREYlBlcnNpc3RlbmNlLnYoKSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKE4uVU5JTVBMRU1FTlRFRCwgXCJUaGlzIHBsYXRmb3JtIGlzIGVpdGhlciBtaXNzaW5nIEluZGV4ZWREQiBvciBpcyBrbm93biB0byBoYXZlIGFuIGluY29tcGxldGUgaW1wbGVtZW50YXRpb24uIE9mZmxpbmUgcGVyc2lzdGVuY2UgaGFzIGJlZW4gZGlzYWJsZWQuXCIpO1xuICAgICAgICB0aGlzLnJlZmVyZW5jZURlbGVnYXRlID0gbmV3IF9fUFJJVkFURV9JbmRleGVkRGJMcnVEZWxlZ2F0ZUltcGwodGhpcywgciksIHRoaXMuJGkgPSB0ICsgJHQsIFxuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIgPSBuZXcgX19QUklWQVRFX0xvY2FsU2VyaWFsaXplcihfKSwgdGhpcy5VaSA9IG5ldyBfX1BSSVZBVEVfU2ltcGxlRGIodGhpcy4kaSwgdGhpcy5OaSwgbmV3IF9fUFJJVkFURV9TY2hlbWFDb252ZXJ0ZXIodGhpcy5zZXJpYWxpemVyKSksIFxuICAgICAgICB0aGlzLmhpID0gbmV3IF9fUFJJVkFURV9JbmRleGVkRGJHbG9iYWxzQ2FjaGUsIHRoaXMuUGkgPSBuZXcgX19QUklWQVRFX0luZGV4ZWREYlRhcmdldENhY2hlKHRoaXMucmVmZXJlbmNlRGVsZWdhdGUsIHRoaXMuc2VyaWFsaXplciksIFxuICAgICAgICB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGUgPSBfX1BSSVZBVEVfbmV3SW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZSh0aGlzLnNlcmlhbGl6ZXIpLCBcbiAgICAgICAgdGhpcy5JaSA9IG5ldyBfX1BSSVZBVEVfSW5kZXhlZERiQnVuZGxlQ2FjaGUsIHRoaXMud2luZG93ICYmIHRoaXMud2luZG93LmxvY2FsU3RvcmFnZSA/IHRoaXMuS2kgPSB0aGlzLndpbmRvdy5sb2NhbFN0b3JhZ2UgOiAodGhpcy5LaSA9IG51bGwsIFxuICAgICAgICAhMSA9PT0gdSAmJiBfX1BSSVZBVEVfbG9nRXJyb3IoTHQsIFwiTG9jYWxTdG9yYWdlIGlzIHVuYXZhaWxhYmxlLiBBcyBhIHJlc3VsdCwgcGVyc2lzdGVuY2UgbWF5IG5vdCB3b3JrIHJlbGlhYmx5LiBJbiBwYXJ0aWN1bGFyIGVuYWJsZVBlcnNpc3RlbmNlKCkgY291bGQgZmFpbCBpbW1lZGlhdGVseSBhZnRlciByZWZyZXNoaW5nIHRoZSBwYWdlLlwiKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEF0dGVtcHQgdG8gc3RhcnQgSW5kZXhlZERiIHBlcnNpc3RlbmNlLlxuICAgICAqXG4gICAgICogQHJldHVybnMgV2hldGhlciBwZXJzaXN0ZW5jZSB3YXMgZW5hYmxlZC5cbiAgICAgKi8gICAgc3RhcnQoKSB7XG4gICAgICAgIC8vIE5PVEU6IFRoaXMgaXMgZXhwZWN0ZWQgdG8gZmFpbCBzb21ldGltZXMgKGluIHRoZSBjYXNlIG9mIGFub3RoZXIgdGFiXG4gICAgICAgIC8vIGFscmVhZHkgaGF2aW5nIHRoZSBwZXJzaXN0ZW5jZSBsb2NrKSwgc28gaXQncyB0aGUgZmlyc3QgdGhpbmcgd2Ugc2hvdWxkXG4gICAgICAgIC8vIGRvLlxuICAgICAgICByZXR1cm4gdGhpcy5XaSgpLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc1ByaW1hcnkgJiYgIXRoaXMuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24pIFxuICAgICAgICAgICAgLy8gRmFpbCBgc3RhcnQoKWAgaWYgYHN5bmNocm9uaXplVGFic2AgaXMgZGlzYWJsZWQgYW5kIHdlIGNhbm5vdFxuICAgICAgICAgICAgLy8gb2J0YWluIHRoZSBwcmltYXJ5IGxlYXNlLlxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKE4uRkFJTEVEX1BSRUNPTkRJVElPTiwgUXQpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuR2koKSwgdGhpcy56aSgpLCB0aGlzLmppKCksIHRoaXMucnVuVHJhbnNhY3Rpb24oXCJnZXRIaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXJcIiwgXCJyZWFkb25seVwiLCAoZSA9PiB0aGlzLlBpLmdldEhpZ2hlc3RTZXF1ZW5jZU51bWJlcihlKSkpO1xuICAgICAgICB9KSkudGhlbigoZSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNpID0gbmV3IF9fUFJJVkFURV9MaXN0ZW5TZXF1ZW5jZShlLCB0aGlzLnhpKTtcbiAgICAgICAgfSkpLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMubGkgPSAhMDtcbiAgICAgICAgfSkpLmNhdGNoKChlID0+ICh0aGlzLlVpICYmIHRoaXMuVWkuY2xvc2UoKSwgUHJvbWlzZS5yZWplY3QoZSkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBhIGxpc3RlbmVyIHRoYXQgZ2V0cyBjYWxsZWQgd2hlbiB0aGUgcHJpbWFyeSBzdGF0ZSBvZiB0aGVcbiAgICAgKiBpbnN0YW5jZSBjaGFuZ2VzLiBVcG9uIHJlZ2lzdGVyaW5nLCB0aGlzIGxpc3RlbmVyIGlzIGludm9rZWQgaW1tZWRpYXRlbHlcbiAgICAgKiB3aXRoIHRoZSBjdXJyZW50IHByaW1hcnkgc3RhdGUuXG4gICAgICpcbiAgICAgKiBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGZvciBXZWIgbXVsdGktdGFiLlxuICAgICAqLyAgICBKaShlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlFpID0gYXN5bmMgdCA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGFydGVkKSByZXR1cm4gZSh0KTtcbiAgICAgICAgfSwgZSh0aGlzLmlzUHJpbWFyeSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBhIGxpc3RlbmVyIHRoYXQgZ2V0cyBjYWxsZWQgd2hlbiB0aGUgZGF0YWJhc2UgcmVjZWl2ZXMgYVxuICAgICAqIHZlcnNpb24gY2hhbmdlIGV2ZW50IGluZGljYXRpbmcgdGhhdCBpdCBoYXMgZGVsZXRlZC5cbiAgICAgKlxuICAgICAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIFdlYiBtdWx0aS10YWIuXG4gICAgICovICAgIHNldERhdGFiYXNlRGVsZXRlZExpc3RlbmVyKGUpIHtcbiAgICAgICAgdGhpcy5VaS4kKChhc3luYyB0ID0+IHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIGFuIGF0dGVtcHQgaXMgbWFkZSB0byBkZWxldGUgSW5kZXhlZERCLlxuICAgICAgICAgICAgbnVsbCA9PT0gdC5uZXdWZXJzaW9uICYmIGF3YWl0IGUoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGp1c3RzIHRoZSBjdXJyZW50IG5ldHdvcmsgc3RhdGUgaW4gdGhlIGNsaWVudCdzIG1ldGFkYXRhLCBwb3RlbnRpYWxseVxuICAgICAqIGFmZmVjdGluZyB0aGUgcHJpbWFyeSBsZWFzZS5cbiAgICAgKlxuICAgICAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIFdlYiBtdWx0aS10YWIuXG4gICAgICovICAgIHNldE5ldHdvcmtFbmFibGVkKGUpIHtcbiAgICAgICAgdGhpcy5uZXR3b3JrRW5hYmxlZCAhPT0gZSAmJiAodGhpcy5uZXR3b3JrRW5hYmxlZCA9IGUsIFxuICAgICAgICAvLyBTY2hlZHVsZSBhIHByaW1hcnkgbGVhc2UgcmVmcmVzaCBmb3IgaW1tZWRpYXRlIGV4ZWN1dGlvbi4gVGhlIGV2ZW50dWFsXG4gICAgICAgIC8vIGxlYXNlIHVwZGF0ZSB3aWxsIGJlIHByb3BhZ2F0ZWQgdmlhIGBwcmltYXJ5U3RhdGVMaXN0ZW5lcmAuXG4gICAgICAgIHRoaXMuTWkuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zdGFydGVkICYmIGF3YWl0IHRoaXMuV2koKTtcbiAgICAgICAgfSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgY2xpZW50IG1ldGFkYXRhIGluIEluZGV4ZWREYiBhbmQgYXR0ZW1wdHMgdG8gZWl0aGVyIG9idGFpbiBvclxuICAgICAqIGV4dGVuZCB0aGUgcHJpbWFyeSBsZWFzZSBmb3IgdGhlIGxvY2FsIGNsaWVudC4gQXN5bmNocm9ub3VzbHkgbm90aWZpZXMgdGhlXG4gICAgICogcHJpbWFyeSBzdGF0ZSBsaXN0ZW5lciBpZiB0aGUgY2xpZW50IGVpdGhlciBuZXdseSBvYnRhaW5lZCBvciByZWxlYXNlZCBpdHNcbiAgICAgKiBwcmltYXJ5IGxlYXNlLlxuICAgICAqLyAgICBXaSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucnVuVHJhbnNhY3Rpb24oXCJ1cGRhdGVDbGllbnRNZXRhZGF0YUFuZFRyeUJlY29tZVByaW1hcnlcIiwgXCJyZWFkd3JpdGVcIiwgKGUgPT4gX19QUklWQVRFX2NsaWVudE1ldGFkYXRhU3RvcmUoZSkucHV0KHtcbiAgICAgICAgICAgIGNsaWVudElkOiB0aGlzLmNsaWVudElkLFxuICAgICAgICAgICAgdXBkYXRlVGltZU1zOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgbmV0d29ya0VuYWJsZWQ6IHRoaXMubmV0d29ya0VuYWJsZWQsXG4gICAgICAgICAgICBpbkZvcmVncm91bmQ6IHRoaXMuaW5Gb3JlZ3JvdW5kXG4gICAgICAgIH0pLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzUHJpbWFyeSkgcmV0dXJuIHRoaXMuSGkoZSkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgZSB8fCAodGhpcy5pc1ByaW1hcnkgPSAhMSwgdGhpcy5NaS5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiB0aGlzLlFpKCExKSkpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHRoaXMuWWkoZSkpKS5uZXh0KCh0ID0+IHRoaXMuaXNQcmltYXJ5ICYmICF0ID8gdGhpcy5aaShlKS5uZXh0KCgoKSA9PiAhMSkpIDogISF0ICYmIHRoaXMuWGkoZSkubmV4dCgoKCkgPT4gITApKSkpKSkuY2F0Y2goKGUgPT4ge1xuICAgICAgICAgICAgaWYgKF9fUFJJVkFURV9pc0luZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IoZSkpIFxuICAgICAgICAgICAgLy8gUHJvY2VlZCB3aXRoIHRoZSBleGlzdGluZyBzdGF0ZS4gQW55IHN1YnNlcXVlbnQgYWNjZXNzIHRvXG4gICAgICAgICAgICAvLyBJbmRleGVkREIgd2lsbCB2ZXJpZnkgdGhlIGxlYXNlLlxuICAgICAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9sb2dEZWJ1ZyhMdCwgXCJGYWlsZWQgdG8gZXh0ZW5kIG93bmVyIGxlYXNlOiBcIiwgZSksIHRoaXMuaXNQcmltYXJ5O1xuICAgICAgICAgICAgaWYgKCF0aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uKSB0aHJvdyBlO1xuICAgICAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9sb2dEZWJ1ZyhMdCwgXCJSZWxlYXNpbmcgb3duZXIgbGVhc2UgYWZ0ZXIgZXJyb3IgZHVyaW5nIGxlYXNlIHJlZnJlc2hcIiwgZSksIFxuICAgICAgICAgICAgLyogaXNQcmltYXJ5PSAqLyAhMTtcbiAgICAgICAgfSkpLnRoZW4oKGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5pc1ByaW1hcnkgIT09IGUgJiYgdGhpcy5NaS5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiB0aGlzLlFpKGUpKSksIHRoaXMuaXNQcmltYXJ5ID0gZTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBIaShlKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfcHJpbWFyeUNsaWVudFN0b3JlKGUpLmdldChaKS5uZXh0KChlID0+IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMuZXMoZSkpKSk7XG4gICAgfVxuICAgIHRzKGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9jbGllbnRNZXRhZGF0YVN0b3JlKGUpLmRlbGV0ZSh0aGlzLmNsaWVudElkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSWYgdGhlIGdhcmJhZ2UgY29sbGVjdGlvbiB0aHJlc2hvbGQgaGFzIHBhc3NlZCwgcHJ1bmVzIHRoZVxuICAgICAqIFJlbW90ZURvY3VtZW50Q2hhbmdlcyBhbmQgdGhlIENsaWVudE1ldGFkYXRhIHN0b3JlIGJhc2VkIG9uIHRoZSBsYXN0IHVwZGF0ZVxuICAgICAqIHRpbWUgb2YgYWxsIGNsaWVudHMuXG4gICAgICovICAgIGFzeW5jIG5zKCkge1xuICAgICAgICBpZiAodGhpcy5pc1ByaW1hcnkgJiYgIXRoaXMucnModGhpcy5xaSwga3QpKSB7XG4gICAgICAgICAgICB0aGlzLnFpID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBhd2FpdCB0aGlzLnJ1blRyYW5zYWN0aW9uKFwibWF5YmVHYXJiYWdlQ29sbGVjdE11bHRpQ2xpZW50U3RhdGVcIiwgXCJyZWFkd3JpdGUtcHJpbWFyeVwiLCAoZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9nZXRTdG9yZShlLCB3ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHQuSigpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gdGhpcy5zcyhlLCBrdCksIHIgPSBlLmZpbHRlcigoZSA9PiAtMSA9PT0gbi5pbmRleE9mKGUpKSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIERlbGV0ZSBtZXRhZGF0YSBmb3IgY2xpZW50cyB0aGF0IGFyZSBubyBsb25nZXIgY29uc2lkZXJlZCBhY3RpdmUuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaChyLCAoZSA9PiB0LmRlbGV0ZShlLmNsaWVudElkKSkpLm5leHQoKCgpID0+IHIpKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KSkuY2F0Y2goKCgpID0+IFtdKSk7XG4gICAgICAgICAgICAvLyBEZWxldGUgcG90ZW50aWFsIGxlZnRvdmVyIGVudHJpZXMgdGhhdCBtYXkgY29udGludWUgdG8gbWFyayB0aGVcbiAgICAgICAgICAgIC8vIGluYWN0aXZlIGNsaWVudHMgYXMgem9tYmllZCBpbiBMb2NhbFN0b3JhZ2UuXG4gICAgICAgICAgICAvLyBJZGVhbGx5IHdlJ2QgZGVsZXRlIHRoZSBJbmRleGVkRGIgYW5kIExvY2FsU3RvcmFnZSB6b21iaWUgZW50cmllcyBmb3JcbiAgICAgICAgICAgIC8vIHRoZSBjbGllbnQgYXRvbWljYWxseSwgYnV0IHdlIGNhbid0LiBTbyB3ZSBvcHQgdG8gZGVsZXRlIHRoZSBJbmRleGVkRGJcbiAgICAgICAgICAgIC8vIGVudHJpZXMgZmlyc3QgdG8gYXZvaWQgcG90ZW50aWFsbHkgcmV2aXZpbmcgYSB6b21iaWVkIGNsaWVudC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLktpKSBmb3IgKGNvbnN0IHQgb2YgZSkgdGhpcy5LaS5yZW1vdmVJdGVtKHRoaXMuX3ModC5jbGllbnRJZCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNjaGVkdWxlcyBhIHJlY3VycmluZyB0aW1lciB0byB1cGRhdGUgdGhlIGNsaWVudCBtZXRhZGF0YSBhbmQgdG8gZWl0aGVyXG4gICAgICogZXh0ZW5kIG9yIGFjcXVpcmUgdGhlIHByaW1hcnkgbGVhc2UgaWYgdGhlIGNsaWVudCBpcyBlbGlnaWJsZS5cbiAgICAgKi8gICAgamkoKSB7XG4gICAgICAgIHRoaXMua2kgPSB0aGlzLk1pLmVucXVldWVBZnRlckRlbGF5KFwiY2xpZW50X21ldGFkYXRhX3JlZnJlc2hcIiAvKiBUaW1lcklkLkNsaWVudE1ldGFkYXRhUmVmcmVzaCAqLyAsIDRlMywgKCgpID0+IHRoaXMuV2koKS50aGVuKCgoKSA9PiB0aGlzLm5zKCkpKS50aGVuKCgoKSA9PiB0aGlzLmppKCkpKSkpO1xuICAgIH1cbiAgICAvKiogQ2hlY2tzIHdoZXRoZXIgYGNsaWVudGAgaXMgdGhlIGxvY2FsIGNsaWVudC4gKi8gICAgZXMoZSkge1xuICAgICAgICByZXR1cm4gISFlICYmIGUub3duZXJJZCA9PT0gdGhpcy5jbGllbnRJZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXZhbHVhdGUgdGhlIHN0YXRlIG9mIGFsbCBhY3RpdmUgY2xpZW50cyBhbmQgZGV0ZXJtaW5lIHdoZXRoZXIgdGhlIGxvY2FsXG4gICAgICogY2xpZW50IGlzIG9yIGNhbiBhY3QgYXMgdGhlIGhvbGRlciBvZiB0aGUgcHJpbWFyeSBsZWFzZS4gUmV0dXJucyB3aGV0aGVyXG4gICAgICogdGhlIGNsaWVudCBpcyBlbGlnaWJsZSBmb3IgdGhlIGxlYXNlLCBidXQgZG9lcyBub3QgYWN0dWFsbHkgYWNxdWlyZSBpdC5cbiAgICAgKiBNYXkgcmV0dXJuICdmYWxzZScgZXZlbiBpZiB0aGVyZSBpcyBubyBhY3RpdmUgbGVhc2Vob2xkZXIgYW5kIGFub3RoZXJcbiAgICAgKiAoZm9yZWdyb3VuZCkgY2xpZW50IHNob3VsZCBiZWNvbWUgbGVhc2Vob2xkZXIgaW5zdGVhZC5cbiAgICAgKi8gICAgWWkoZSkge1xuICAgICAgICBpZiAodGhpcy5PaSkgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCEwKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9wcmltYXJ5Q2xpZW50U3RvcmUoZSkuZ2V0KFopLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgLy8gQSBjbGllbnQgaXMgZWxpZ2libGUgZm9yIHRoZSBwcmltYXJ5IGxlYXNlIGlmOlxuICAgICAgICAgICAgLy8gLSBpdHMgbmV0d29yayBpcyBlbmFibGVkIGFuZCB0aGUgY2xpZW50J3MgdGFiIGlzIGluIHRoZSBmb3JlZ3JvdW5kLlxuICAgICAgICAgICAgLy8gLSBpdHMgbmV0d29yayBpcyBlbmFibGVkIGFuZCBubyBvdGhlciBjbGllbnQncyB0YWIgaXMgaW4gdGhlXG4gICAgICAgICAgICAvLyAgIGZvcmVncm91bmQuXG4gICAgICAgICAgICAvLyAtIGV2ZXJ5IGNsaWVudHMgbmV0d29yayBpcyBkaXNhYmxlZCBhbmQgdGhlIGNsaWVudCdzIHRhYiBpcyBpbiB0aGVcbiAgICAgICAgICAgIC8vICAgZm9yZWdyb3VuZC5cbiAgICAgICAgICAgIC8vIC0gZXZlcnkgY2xpZW50cyBuZXR3b3JrIGlzIGRpc2FibGVkIGFuZCBubyBvdGhlciBjbGllbnQncyB0YWIgaXMgaW5cbiAgICAgICAgICAgIC8vICAgdGhlIGZvcmVncm91bmQuXG4gICAgICAgICAgICAvLyAtIHRoZSBgZm9yY2VPd25pbmdUYWJgIHNldHRpbmcgd2FzIHBhc3NlZCBpbi5cbiAgICAgICAgICAgIGlmIChudWxsICE9PSB0ICYmIHRoaXMucnModC5sZWFzZVRpbWVzdGFtcE1zLCBxdCkgJiYgIXRoaXMudXModC5vd25lcklkKSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmVzKHQpICYmIHRoaXMubmV0d29ya0VuYWJsZWQpIHJldHVybiAhMDtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZXModCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0LmFsbG93VGFiU3luY2hyb25pemF0aW9uKSBcbiAgICAgICAgICAgICAgICAgICAgLy8gRmFpbCB0aGUgYGNhbkFjdEFzUHJpbWFyeWAgY2hlY2sgaWYgdGhlIGN1cnJlbnQgbGVhc2Vob2xkZXIgaGFzXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vdCBvcHRlZCBpbnRvIG11bHRpLXRhYiBzeW5jaHJvbml6YXRpb24uIElmIHRoaXMgaGFwcGVucyBhdFxuICAgICAgICAgICAgICAgICAgICAvLyBjbGllbnQgc3RhcnR1cCwgd2UgcmVqZWN0IHRoZSBQcm9taXNlIHJldHVybmVkIGJ5XG4gICAgICAgICAgICAgICAgICAgIC8vIGBlbmFibGVQZXJzaXN0ZW5jZSgpYCBhbmQgdGhlIHVzZXIgY2FuIGNvbnRpbnVlIHRvIHVzZSBGaXJlc3RvcmVcbiAgICAgICAgICAgICAgICAgICAgLy8gd2l0aCBpbi1tZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoaXMgZmFpbHMgZHVyaW5nIGEgbGVhc2UgcmVmcmVzaCwgd2Ugd2lsbCBpbnN0ZWFkIGJsb2NrIHRoZVxuICAgICAgICAgICAgICAgICAgICAvLyBBc3luY1F1ZXVlIGZyb20gZXhlY3V0aW5nIGZ1cnRoZXIgb3BlcmF0aW9ucy4gTm90ZSB0aGF0IHRoaXMgaXNcbiAgICAgICAgICAgICAgICAgICAgLy8gYWNjZXB0YWJsZSBzaW5jZSBtaXhpbmcgJiBtYXRjaGluZyBkaWZmZXJlbnQgYHN5bmNocm9uaXplVGFic2BcbiAgICAgICAgICAgICAgICAgICAgLy8gc2V0dGluZ3MgaXMgbm90IHN1cHBvcnRlZC5cbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyhiLzExNDIyNjIzNCk6IFJlbW92ZSB0aGlzIGNoZWNrIHdoZW4gYHN5bmNocm9uaXplVGFic2AgY2FuXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vIGxvbmdlciBiZSB0dXJuZWQgb2ZmLlxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoTi5GQUlMRURfUFJFQ09ORElUSU9OLCBRdCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gISghdGhpcy5uZXR3b3JrRW5hYmxlZCB8fCAhdGhpcy5pbkZvcmVncm91bmQpIHx8IF9fUFJJVkFURV9jbGllbnRNZXRhZGF0YVN0b3JlKGUpLkooKS5uZXh0KChlID0+IHZvaWQgMCA9PT0gdGhpcy5zcyhlLCBxdCkuZmluZCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2xpZW50SWQgIT09IGUuY2xpZW50SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9ICF0aGlzLm5ldHdvcmtFbmFibGVkICYmIGUubmV0d29ya0VuYWJsZWQsIG4gPSAhdGhpcy5pbkZvcmVncm91bmQgJiYgZS5pbkZvcmVncm91bmQsIHIgPSB0aGlzLm5ldHdvcmtFbmFibGVkID09PSBlLm5ldHdvcmtFbmFibGVkO1xuICAgICAgICAgICAgICAgICAgICBpZiAodCB8fCBuICYmIHIpIHJldHVybiAhMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuICExO1xuICAgICAgICAgICAgfSkpKSk7XG4gICAgICAgIH0pKS5uZXh0KChlID0+ICh0aGlzLmlzUHJpbWFyeSAhPT0gZSAmJiBfX1BSSVZBVEVfbG9nRGVidWcoTHQsIGBDbGllbnQgJHtlID8gXCJpc1wiIDogXCJpcyBub3RcIn0gZWxpZ2libGUgZm9yIGEgcHJpbWFyeSBsZWFzZS5gKSwgXG4gICAgICAgIGUpKSk7XG4gICAgfVxuICAgIGFzeW5jIHNodXRkb3duKCkge1xuICAgICAgICAvLyBUaGUgc2h1dGRvd24oKSBvcGVyYXRpb25zIGFyZSBpZGVtcG90ZW50IGFuZCBjYW4gYmUgY2FsbGVkIGV2ZW4gd2hlblxuICAgICAgICAvLyBzdGFydCgpIGFib3J0ZWQgKGUuZy4gYmVjYXVzZSBpdCBjb3VsZG4ndCBhY3F1aXJlIHRoZSBwZXJzaXN0ZW5jZSBsZWFzZSkuXG4gICAgICAgIHRoaXMubGkgPSAhMSwgdGhpcy5jcygpLCB0aGlzLmtpICYmICh0aGlzLmtpLmNhbmNlbCgpLCB0aGlzLmtpID0gbnVsbCksIHRoaXMubHMoKSwgXG4gICAgICAgIHRoaXMuaHMoKSwgXG4gICAgICAgIC8vIFVzZSBgU2ltcGxlRGIucnVuVHJhbnNhY3Rpb25gIGRpcmVjdGx5IHRvIGF2b2lkIGZhaWxpbmcgaWYgYW5vdGhlciB0YWJcbiAgICAgICAgLy8gaGFzIG9idGFpbmVkIHRoZSBwcmltYXJ5IGxlYXNlLlxuICAgICAgICBhd2FpdCB0aGlzLlVpLnJ1blRyYW5zYWN0aW9uKFwic2h1dGRvd25cIiwgXCJyZWFkd3JpdGVcIiwgWyBZLCB3ZSBdLCAoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ID0gbmV3IF9fUFJJVkFURV9JbmRleGVkRGJUcmFuc2FjdGlvbihlLCBfX1BSSVZBVEVfTGlzdGVuU2VxdWVuY2UuY2UpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuWmkodCkubmV4dCgoKCkgPT4gdGhpcy50cyh0KSkpO1xuICAgICAgICB9KSksIHRoaXMuVWkuY2xvc2UoKSwgXG4gICAgICAgIC8vIFJlbW92ZSB0aGUgZW50cnkgbWFya2luZyB0aGUgY2xpZW50IGFzIHpvbWJpZWQgZnJvbSBMb2NhbFN0b3JhZ2Ugc2luY2VcbiAgICAgICAgLy8gd2Ugc3VjY2Vzc2Z1bGx5IGRlbGV0ZWQgaXRzIG1ldGFkYXRhIGZyb20gSW5kZXhlZERiLlxuICAgICAgICB0aGlzLlBzKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgY2xpZW50cyB0aGF0IGFyZSBub3Qgem9tYmllZCBhbmQgaGF2ZSBhbiB1cGRhdGVUaW1lIHdpdGhpbiB0aGVcbiAgICAgKiBwcm92aWRlZCB0aHJlc2hvbGQuXG4gICAgICovICAgIHNzKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIGUuZmlsdGVyKChlID0+IHRoaXMucnMoZS51cGRhdGVUaW1lTXMsIHQpICYmICF0aGlzLnVzKGUuY2xpZW50SWQpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIElEcyBvZiB0aGUgY2xpZW50cyB0aGF0IGFyZSBjdXJyZW50bHkgYWN0aXZlLiBJZiBtdWx0aS10YWJcbiAgICAgKiBpcyBub3Qgc3VwcG9ydGVkLCByZXR1cm5zIGFuIGFycmF5IHRoYXQgb25seSBjb250YWlucyB0aGUgbG9jYWwgY2xpZW50J3NcbiAgICAgKiBJRC5cbiAgICAgKlxuICAgICAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIFdlYiBtdWx0aS10YWIuXG4gICAgICovICAgIFRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ydW5UcmFuc2FjdGlvbihcImdldEFjdGl2ZUNsaWVudHNcIiwgXCJyZWFkb25seVwiLCAoZSA9PiBfX1BSSVZBVEVfY2xpZW50TWV0YWRhdGFTdG9yZShlKS5KKCkubmV4dCgoZSA9PiB0aGlzLnNzKGUsIGt0KS5tYXAoKGUgPT4gZS5jbGllbnRJZCkpKSkpKTtcbiAgICB9XG4gICAgZ2V0IHN0YXJ0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxpO1xuICAgIH1cbiAgICBnZXRHbG9iYWxzQ2FjaGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhpO1xuICAgIH1cbiAgICBnZXRNdXRhdGlvblF1ZXVlKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9JbmRleGVkRGJNdXRhdGlvblF1ZXVlLnd0KGUsIHRoaXMuc2VyaWFsaXplciwgdCwgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSk7XG4gICAgfVxuICAgIGdldFRhcmdldENhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5QaTtcbiAgICB9XG4gICAgZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZTtcbiAgICB9XG4gICAgZ2V0SW5kZXhNYW5hZ2VyKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfSW5kZXhlZERiSW5kZXhNYW5hZ2VyKGUsIHRoaXMuc2VyaWFsaXplci55dC5kYXRhYmFzZUlkKTtcbiAgICB9XG4gICAgZ2V0RG9jdW1lbnRPdmVybGF5Q2FjaGUoZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX0luZGV4ZWREYkRvY3VtZW50T3ZlcmxheUNhY2hlLnd0KHRoaXMuc2VyaWFsaXplciwgZSk7XG4gICAgfVxuICAgIGdldEJ1bmRsZUNhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5JaTtcbiAgICB9XG4gICAgcnVuVHJhbnNhY3Rpb24oZSwgdCwgbikge1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoTHQsIFwiU3RhcnRpbmcgdHJhbnNhY3Rpb246XCIsIGUpO1xuICAgICAgICBjb25zdCByID0gXCJyZWFkb25seVwiID09PSB0ID8gXCJyZWFkb25seVwiIDogXCJyZWFkd3JpdGVcIiwgaSA9IFxuICAgICAgICAvKiogUmV0dXJucyB0aGUgb2JqZWN0IHN0b3JlcyBmb3IgdGhlIHByb3ZpZGVkIHNjaGVtYS4gKi9cbiAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX2dldE9iamVjdFN0b3JlcyhlKSB7XG4gICAgICAgICAgICByZXR1cm4gMTggPT09IGUgPyBzdCA6IDE3ID09PSBlID8gaXQgOiAxNiA9PT0gZSA/IHJ0IDogMTUgPT09IGUgPyBudCA6IDE0ID09PSBlID8gdHQgOiAxMyA9PT0gZSA/IGV0IDogMTIgPT09IGUgPyBYZSA6IDExID09PSBlID8gWmUgOiB2b2lkIGZhaWwoNjAyNDUpO1xuICAgICAgICB9KHRoaXMuTmkpO1xuICAgICAgICBsZXQgcztcbiAgICAgICAgLy8gRG8gYWxsIHRyYW5zYWN0aW9ucyBhcyByZWFkd3JpdGUgYWdhaW5zdCBhbGwgb2JqZWN0IHN0b3Jlcywgc2luY2Ugd2VcbiAgICAgICAgLy8gYXJlIHRoZSBvbmx5IHJlYWRlci93cml0ZXIuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuVWkucnVuVHJhbnNhY3Rpb24oZSwgciwgaSwgKHIgPT4gKHMgPSBuZXcgX19QUklWQVRFX0luZGV4ZWREYlRyYW5zYWN0aW9uKHIsIHRoaXMuY2kgPyB0aGlzLmNpLm5leHQoKSA6IF9fUFJJVkFURV9MaXN0ZW5TZXF1ZW5jZS5jZSksIFxuICAgICAgICBcInJlYWR3cml0ZS1wcmltYXJ5XCIgPT09IHQgPyB0aGlzLkhpKHMpLm5leHQoKGUgPT4gISFlIHx8IHRoaXMuWWkocykpKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGlmICghdCkgdGhyb3cgX19QUklWQVRFX2xvZ0Vycm9yKGBGYWlsZWQgdG8gb2J0YWluIHByaW1hcnkgbGVhc2UgZm9yIGFjdGlvbiAnJHtlfScuYCksIFxuICAgICAgICAgICAgdGhpcy5pc1ByaW1hcnkgPSAhMSwgdGhpcy5NaS5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiB0aGlzLlFpKCExKSkpLCBuZXcgRmlyZXN0b3JlRXJyb3IoTi5GQUlMRURfUFJFQ09ORElUSU9OLCBLKTtcbiAgICAgICAgICAgIHJldHVybiBuKHMpO1xuICAgICAgICB9KSkubmV4dCgoZSA9PiB0aGlzLlhpKHMpLm5leHQoKCgpID0+IGUpKSkpIDogdGhpcy5JcyhzKS5uZXh0KCgoKSA9PiBuKHMpKSkpKSkudGhlbigoZSA9PiAocy5yYWlzZU9uQ29tbWl0dGVkRXZlbnQoKSwgXG4gICAgICAgIGUpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFZlcmlmaWVzIHRoYXQgdGhlIGN1cnJlbnQgdGFiIGlzIHRoZSBwcmltYXJ5IGxlYXNlaG9sZGVyIG9yIGFsdGVybmF0aXZlbHlcbiAgICAgKiB0aGF0IHRoZSBsZWFzZWhvbGRlciBoYXMgb3B0ZWQgaW50byBtdWx0aS10YWIgc3luY2hyb25pemF0aW9uLlxuICAgICAqL1xuICAgIC8vIFRPRE8oYi8xMTQyMjYyMzQpOiBSZW1vdmUgdGhpcyBjaGVjayB3aGVuIGBzeW5jaHJvbml6ZVRhYnNgIGNhbiBubyBsb25nZXJcbiAgICAvLyBiZSB0dXJuZWQgb2ZmLlxuICAgIElzKGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9wcmltYXJ5Q2xpZW50U3RvcmUoZSkuZ2V0KFopLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IGUgJiYgdGhpcy5ycyhlLmxlYXNlVGltZXN0YW1wTXMsIHF0KSAmJiAhdGhpcy51cyhlLm93bmVySWQpICYmICF0aGlzLmVzKGUpICYmICEodGhpcy5PaSB8fCB0aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uICYmIGUuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24pKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoTi5GQUlMRURfUFJFQ09ORElUSU9OLCBRdCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogT2J0YWlucyBvciBleHRlbmRzIHRoZSBuZXcgcHJpbWFyeSBsZWFzZSBmb3IgdGhlIGxvY2FsIGNsaWVudC4gVGhpc1xuICAgICAqIG1ldGhvZCBkb2VzIG5vdCB2ZXJpZnkgdGhhdCB0aGUgY2xpZW50IGlzIGVsaWdpYmxlIGZvciB0aGlzIGxlYXNlLlxuICAgICAqLyAgICBYaShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB7XG4gICAgICAgICAgICBvd25lcklkOiB0aGlzLmNsaWVudElkLFxuICAgICAgICAgICAgYWxsb3dUYWJTeW5jaHJvbml6YXRpb246IHRoaXMuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24sXG4gICAgICAgICAgICBsZWFzZVRpbWVzdGFtcE1zOiBEYXRlLm5vdygpXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfcHJpbWFyeUNsaWVudFN0b3JlKGUpLnB1dChaLCB0KTtcbiAgICB9XG4gICAgc3RhdGljIHYoKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfU2ltcGxlRGIudigpO1xuICAgIH1cbiAgICAvKiogQ2hlY2tzIHRoZSBwcmltYXJ5IGxlYXNlIGFuZCByZW1vdmVzIGl0IGlmIHdlIGFyZSB0aGUgY3VycmVudCBwcmltYXJ5LiAqLyAgICBaaShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfcHJpbWFyeUNsaWVudFN0b3JlKGUpO1xuICAgICAgICByZXR1cm4gdC5nZXQoWikubmV4dCgoZSA9PiB0aGlzLmVzKGUpID8gKF9fUFJJVkFURV9sb2dEZWJ1ZyhMdCwgXCJSZWxlYXNpbmcgcHJpbWFyeSBsZWFzZS5cIiksIFxuICAgICAgICB0LmRlbGV0ZShaKSkgOiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpKSk7XG4gICAgfVxuICAgIC8qKiBWZXJpZmllcyB0aGF0IGB1cGRhdGVUaW1lTXNgIGlzIHdpdGhpbiBgbWF4QWdlTXNgLiAqLyAgICBycyhlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBEYXRlLm5vdygpO1xuICAgICAgICByZXR1cm4gIShlIDwgbiAtIHQpICYmICghKGUgPiBuKSB8fCAoX19QUklWQVRFX2xvZ0Vycm9yKGBEZXRlY3RlZCBhbiB1cGRhdGUgdGltZSB0aGF0IGlzIGluIHRoZSBmdXR1cmU6ICR7ZX0gPiAke259YCksIFxuICAgICAgICAhMSkpO1xuICAgIH1cbiAgICBHaSgpIHtcbiAgICAgICAgbnVsbCAhPT0gdGhpcy5kb2N1bWVudCAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIHRoaXMuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciAmJiAodGhpcy5MaSA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuTWkuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gKHRoaXMuaW5Gb3JlZ3JvdW5kID0gXCJ2aXNpYmxlXCIgPT09IHRoaXMuZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlLCBcbiAgICAgICAgICAgIHRoaXMuV2koKSkpKTtcbiAgICAgICAgfSwgdGhpcy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCB0aGlzLkxpKSwgdGhpcy5pbkZvcmVncm91bmQgPSBcInZpc2libGVcIiA9PT0gdGhpcy5kb2N1bWVudC52aXNpYmlsaXR5U3RhdGUpO1xuICAgIH1cbiAgICBscygpIHtcbiAgICAgICAgdGhpcy5MaSAmJiAodGhpcy5kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCB0aGlzLkxpKSwgdGhpcy5MaSA9IG51bGwpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBdHRhY2hlcyBhIHdpbmRvdy51bmxvYWQgaGFuZGxlciB0aGF0IHdpbGwgc3luY2hyb25vdXNseSB3cml0ZSBvdXJcbiAgICAgKiBjbGllbnRJZCB0byBhIFwiem9tYmllIGNsaWVudCBpZFwiIGxvY2F0aW9uIGluIExvY2FsU3RvcmFnZS4gVGhpcyBjYW4gYmUgdXNlZFxuICAgICAqIGJ5IHRhYnMgdHJ5aW5nIHRvIGFjcXVpcmUgdGhlIHByaW1hcnkgbGVhc2UgdG8gZGV0ZXJtaW5lIHRoYXQgdGhlIGxlYXNlXG4gICAgICogaXMgbm8gbG9uZ2VyIHZhbGlkIGV2ZW4gaWYgdGhlIHRpbWVzdGFtcCBpcyByZWNlbnQuIFRoaXMgaXMgcGFydGljdWxhcmx5XG4gICAgICogaW1wb3J0YW50IGZvciB0aGUgcmVmcmVzaCBjYXNlIChzbyB0aGUgdGFiIGNvcnJlY3RseSByZS1hY3F1aXJlcyB0aGVcbiAgICAgKiBwcmltYXJ5IGxlYXNlKS4gTG9jYWxTdG9yYWdlIGlzIHVzZWQgZm9yIHRoaXMgcmF0aGVyIHRoYW4gSW5kZXhlZERiIGJlY2F1c2VcbiAgICAgKiBpdCBpcyBhIHN5bmNocm9ub3VzIEFQSSBhbmQgc28gY2FuIGJlIHVzZWQgcmVsaWFibHkgZnJvbSAgYW4gdW5sb2FkXG4gICAgICogaGFuZGxlci5cbiAgICAgKi8gICAgemkoKSB7XG4gICAgICAgIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgdGhpcy53aW5kb3c/LmFkZEV2ZW50TGlzdGVuZXIgJiYgKHRoaXMuQmkgPSAoKSA9PiB7XG4gICAgICAgICAgICAvLyBOb3RlOiBJbiB0aGVvcnksIHRoaXMgc2hvdWxkIGJlIHNjaGVkdWxlZCBvbiB0aGUgQXN5bmNRdWV1ZSBzaW5jZSBpdFxuICAgICAgICAgICAgLy8gYWNjZXNzZXMgaW50ZXJuYWwgc3RhdGUuIFdlIGV4ZWN1dGUgdGhpcyBjb2RlIGRpcmVjdGx5IGR1cmluZyBzaHV0ZG93blxuICAgICAgICAgICAgLy8gdG8gbWFrZSBzdXJlIGl0IGdldHMgYSBjaGFuY2UgdG8gcnVuLlxuICAgICAgICAgICAgdGhpcy5jcygpO1xuICAgICAgICAgICAgY29uc3QgZSA9IC8oPzpWZXJzaW9ufE1vYmlsZSlcXC8xWzQ1Nl0vO1xuICAgICAgICAgICAgaXNTYWZhcmkoKSAmJiAobmF2aWdhdG9yLmFwcFZlcnNpb24ubWF0Y2goZSkgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaChlKSkgJiYgXG4gICAgICAgICAgICAvLyBPbiBTYWZhcmkgMTQsIDE1LCBhbmQgMTYsIHdlIGRvIG5vdCBydW4gYW55IGNsZWFudXAgYWN0aW9ucyBhcyBpdCBtaWdodFxuICAgICAgICAgICAgLy8gdHJpZ2dlciBhIGJ1ZyB0aGF0IHByZXZlbnRzIFNhZmFyaSBmcm9tIHJlLW9wZW5pbmcgSW5kZXhlZERCIGR1cmluZ1xuICAgICAgICAgICAgLy8gdGhlIG5leHQgcGFnZSBsb2FkLlxuICAgICAgICAgICAgLy8gU2VlIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0yMjY1NDdcbiAgICAgICAgICAgIHRoaXMuTWkuZW50ZXJSZXN0cmljdGVkTW9kZSgvKiBwdXJnZUV4aXN0aW5nVGFza3M9ICovICEwKSwgdGhpcy5NaS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiB0aGlzLnNodXRkb3duKCkpKTtcbiAgICAgICAgfSwgdGhpcy53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBhZ2VoaWRlXCIsIHRoaXMuQmkpKTtcbiAgICB9XG4gICAgaHMoKSB7XG4gICAgICAgIHRoaXMuQmkgJiYgKHRoaXMud2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwYWdlaGlkZVwiLCB0aGlzLkJpKSwgdGhpcy5CaSA9IG51bGwpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgYSBjbGllbnQgaXMgXCJ6b21iaWVkXCIgYmFzZWQgb24gaXRzIExvY2FsU3RvcmFnZSBlbnRyeS5cbiAgICAgKiBDbGllbnRzIGJlY29tZSB6b21iaWVkIHdoZW4gdGhlaXIgdGFiIGNsb3NlcyB3aXRob3V0IHJ1bm5pbmcgYWxsIG9mIHRoZVxuICAgICAqIGNsZWFudXAgbG9naWMgaW4gYHNodXRkb3duKClgLlxuICAgICAqLyAgICB1cyhlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gbnVsbCAhPT0gdGhpcy5LaT8uZ2V0SXRlbSh0aGlzLl9zKGUpKTtcbiAgICAgICAgICAgIHJldHVybiBfX1BSSVZBVEVfbG9nRGVidWcoTHQsIGBDbGllbnQgJyR7ZX0nICR7dCA/IFwiaXNcIiA6IFwiaXMgbm90XCJ9IHpvbWJpZWQgaW4gTG9jYWxTdG9yYWdlYCksIFxuICAgICAgICAgICAgdDtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgLy8gR3JhY2VmdWxseSBoYW5kbGUgaWYgTG9jYWxTdG9yYWdlIGlzbid0IHdvcmtpbmcuXG4gICAgICAgICAgICByZXR1cm4gX19QUklWQVRFX2xvZ0Vycm9yKEx0LCBcIkZhaWxlZCB0byBnZXQgem9tYmllZCBjbGllbnQgaWQuXCIsIGUpLCAhMTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWNvcmQgY2xpZW50IGFzIHpvbWJpZWQgKGEgY2xpZW50IHRoYXQgaGFkIGl0cyB0YWIgY2xvc2VkKS4gWm9tYmllZFxuICAgICAqIGNsaWVudHMgYXJlIGlnbm9yZWQgZHVyaW5nIHByaW1hcnkgdGFiIHNlbGVjdGlvbi5cbiAgICAgKi8gICAgY3MoKSB7XG4gICAgICAgIGlmICh0aGlzLktpKSB0cnkge1xuICAgICAgICAgICAgdGhpcy5LaS5zZXRJdGVtKHRoaXMuX3ModGhpcy5jbGllbnRJZCksIFN0cmluZyhEYXRlLm5vdygpKSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vIEdyYWNlZnVsbHkgaGFuZGxlIGlmIExvY2FsU3RvcmFnZSBpc24ndCBhdmFpbGFibGUgLyB3b3JraW5nLlxuICAgICAgICAgICAgX19QUklWQVRFX2xvZ0Vycm9yKFwiRmFpbGVkIHRvIHNldCB6b21iaWUgY2xpZW50IGlkLlwiLCBlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogUmVtb3ZlcyB0aGUgem9tYmllZCBjbGllbnQgZW50cnkgaWYgaXQgZXhpc3RzLiAqLyAgICBQcygpIHtcbiAgICAgICAgaWYgKHRoaXMuS2kpIHRyeSB7XG4gICAgICAgICAgICB0aGlzLktpLnJlbW92ZUl0ZW0odGhpcy5fcyh0aGlzLmNsaWVudElkKSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vIElnbm9yZVxuICAgICAgICB9XG4gICAgfVxuICAgIF9zKGUpIHtcbiAgICAgICAgcmV0dXJuIGBmaXJlc3RvcmVfem9tYmllXyR7dGhpcy5wZXJzaXN0ZW5jZUtleX1fJHtlfWA7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgcHJpbWFyeSBjbGllbnQgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9wcmltYXJ5Q2xpZW50U3RvcmUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZ2V0U3RvcmUoZSwgWSk7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBjbGllbnQgbWV0YWRhdGEgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9jbGllbnRNZXRhZGF0YVN0b3JlKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2dldFN0b3JlKGUsIHdlKTtcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZXMgYSBzdHJpbmcgdXNlZCBhcyBhIHByZWZpeCB3aGVuIHN0b3JpbmcgZGF0YSBpbiBJbmRleGVkREIgYW5kXG4gKiBMb2NhbFN0b3JhZ2UuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2luZGV4ZWREYlN0b3JhZ2VQcmVmaXgoZSwgdCkge1xuICAgIC8vIFVzZSB0d28gZGlmZmVyZW50IHByZWZpeCBmb3JtYXRzOlxuICAgIC8vICAgKiBmaXJlc3RvcmUgLyBwZXJzaXN0ZW5jZUtleSAvIHByb2plY3RJRCAuIGRhdGFiYXNlSUQgLyAuLi5cbiAgICAvLyAgICogZmlyZXN0b3JlIC8gcGVyc2lzdGVuY2VLZXkgLyBwcm9qZWN0SUQgLyAuLi5cbiAgICAvLyBwcm9qZWN0SURzIGFyZSBETlMtY29tcGF0aWJsZSBuYW1lcyBhbmQgY2Fubm90IGNvbnRhaW4gZG90c1xuICAgIC8vIHNvIHRoZXJlJ3Mgbm8gZGFuZ2VyIG9mIGNvbGxpc2lvbnMuXG4gICAgbGV0IG4gPSBlLnByb2plY3RJZDtcbiAgICByZXR1cm4gZS5pc0RlZmF1bHREYXRhYmFzZSB8fCAobiArPSBcIi5cIiArIGUuZGF0YWJhc2UpLCBcImZpcmVzdG9yZS9cIiArIHQgKyBcIi9cIiArIG4gKyBcIi9cIjtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBzZXQgb2YgY2hhbmdlcyB0byB3aGF0IGRvY3VtZW50cyBhcmUgY3VycmVudGx5IGluIHZpZXcgYW5kIG91dCBvZiB2aWV3IGZvclxuICogYSBnaXZlbiBxdWVyeS4gVGhlc2UgY2hhbmdlcyBhcmUgc2VudCB0byB0aGUgTG9jYWxTdG9yZSBieSB0aGUgVmlldyAodmlhXG4gKiB0aGUgU3luY0VuZ2luZSkgYW5kIGFyZSB1c2VkIHRvIHBpbiAvIHVucGluIGRvY3VtZW50cyBhcyBhcHByb3ByaWF0ZS5cbiAqL1xuY2xhc3MgX19QUklWQVRFX0xvY2FsVmlld0NoYW5nZXMge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgdGhpcy50YXJnZXRJZCA9IGUsIHRoaXMuZnJvbUNhY2hlID0gdCwgdGhpcy5FcyA9IG4sIHRoaXMuZHMgPSByO1xuICAgIH1cbiAgICBzdGF0aWMgQXMoZSwgdCkge1xuICAgICAgICBsZXQgbiA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpLCByID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCk7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0LmRvY0NoYW5nZXMpIHN3aXRjaCAoZS50eXBlKSB7XG4gICAgICAgICAgY2FzZSAwIC8qIENoYW5nZVR5cGUuQWRkZWQgKi8gOlxuICAgICAgICAgICAgbiA9IG4uYWRkKGUuZG9jLmtleSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8gOlxuICAgICAgICAgICAgciA9IHIuYWRkKGUuZG9jLmtleSk7XG4gLy8gZG8gbm90aGluZ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfTG9jYWxWaWV3Q2hhbmdlcyhlLCB0LmZyb21DYWNoZSwgbiwgcik7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIHRyYWNrZXIgdG8ga2VlcCBhIHJlY29yZCBvZiBpbXBvcnRhbnQgZGV0YWlscyBkdXJpbmcgZGF0YWJhc2UgbG9jYWwgcXVlcnlcbiAqIGV4ZWN1dGlvbi5cbiAqLyBjbGFzcyBRdWVyeUNvbnRleHQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogQ291bnRzIHRoZSBudW1iZXIgb2YgZG9jdW1lbnRzIHBhc3NlZCB0aHJvdWdoIGR1cmluZyBsb2NhbCBxdWVyeSBleGVjdXRpb24uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9kb2N1bWVudFJlYWRDb3VudCA9IDA7XG4gICAgfVxuICAgIGdldCBkb2N1bWVudFJlYWRDb3VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RvY3VtZW50UmVhZENvdW50O1xuICAgIH1cbiAgICBpbmNyZW1lbnREb2N1bWVudFJlYWRDb3VudChlKSB7XG4gICAgICAgIHRoaXMuX2RvY3VtZW50UmVhZENvdW50ICs9IGU7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGUgRmlyZXN0b3JlIHF1ZXJ5IGVuZ2luZS5cbiAqXG4gKiBGaXJlc3RvcmUgcXVlcmllcyBjYW4gYmUgZXhlY3V0ZWQgaW4gdGhyZWUgbW9kZXMuIFRoZSBRdWVyeSBFbmdpbmUgZGV0ZXJtaW5lc1xuICogd2hhdCBtb2RlIHRvIHVzZSBiYXNlZCBvbiB3aGF0IGRhdGEgaXMgcGVyc2lzdGVkLiBUaGUgbW9kZSBvbmx5IGRldGVybWluZXNcbiAqIHRoZSBydW50aW1lIGNvbXBsZXhpdHkgb2YgdGhlIHF1ZXJ5IC0gdGhlIHJlc3VsdCBzZXQgaXMgZXF1aXZhbGVudCBhY3Jvc3MgYWxsXG4gKiBpbXBsZW1lbnRhdGlvbnMuXG4gKlxuICogVGhlIFF1ZXJ5IGVuZ2luZSB3aWxsIHVzZSBpbmRleGVkLWJhc2VkIGV4ZWN1dGlvbiBpZiBhIHVzZXIgaGFzIGNvbmZpZ3VyZWRcbiAqIGFueSBpbmRleCB0aGF0IGNhbiBiZSB1c2VkIHRvIGV4ZWN1dGUgcXVlcnkgKHZpYSBgc2V0SW5kZXhDb25maWd1cmF0aW9uKClgKS5cbiAqIE90aGVyd2lzZSwgdGhlIGVuZ2luZSB3aWxsIHRyeSB0byBvcHRpbWl6ZSB0aGUgcXVlcnkgYnkgcmUtdXNpbmcgYSBwcmV2aW91c2x5XG4gKiBwZXJzaXN0ZWQgcXVlcnkgcmVzdWx0LiBJZiB0aGF0IGlzIG5vdCBwb3NzaWJsZSwgdGhlIHF1ZXJ5IHdpbGwgYmUgZXhlY3V0ZWRcbiAqIHZpYSBhIGZ1bGwgY29sbGVjdGlvbiBzY2FuLlxuICpcbiAqIEluZGV4LWJhc2VkIGV4ZWN1dGlvbiBpcyB0aGUgZGVmYXVsdCB3aGVuIGF2YWlsYWJsZS4gVGhlIHF1ZXJ5IGVuZ2luZVxuICogc3VwcG9ydHMgcGFydGlhbCBpbmRleGVkIGV4ZWN1dGlvbiBhbmQgbWVyZ2VzIHRoZSByZXN1bHQgZnJvbSB0aGUgaW5kZXhcbiAqIGxvb2t1cCB3aXRoIGRvY3VtZW50cyB0aGF0IGhhdmUgbm90IHlldCBiZWVuIGluZGV4ZWQuIFRoZSBpbmRleCBldmFsdWF0aW9uXG4gKiBtYXRjaGVzIHRoZSBiYWNrZW5kJ3MgZm9ybWF0IGFuZCBhcyBzdWNoLCB0aGUgU0RLIGNhbiB1c2UgaW5kZXhpbmcgZm9yIGFsbFxuICogcXVlcmllcyB0aGF0IHRoZSBiYWNrZW5kIHN1cHBvcnRzLlxuICpcbiAqIElmIG5vIGluZGV4IGV4aXN0cywgdGhlIHF1ZXJ5IGVuZ2luZSB0cmllcyB0byB0YWtlIGFkdmFudGFnZSBvZiB0aGUgdGFyZ2V0XG4gKiBkb2N1bWVudCBtYXBwaW5nIGluIHRoZSBUYXJnZXRDYWNoZS4gVGhlc2UgbWFwcGluZ3MgZXhpc3RzIGZvciBhbGwgcXVlcmllc1xuICogdGhhdCBoYXZlIGJlZW4gc3luY2VkIHdpdGggdGhlIGJhY2tlbmQgYXQgbGVhc3Qgb25jZSBhbmQgYWxsb3cgdGhlIHF1ZXJ5XG4gKiBlbmdpbmUgdG8gb25seSByZWFkIGRvY3VtZW50cyB0aGF0IHByZXZpb3VzbHkgbWF0Y2hlZCBhIHF1ZXJ5IHBsdXMgYW55XG4gKiBkb2N1bWVudHMgdGhhdCB3ZXJlIGVkaXRlZCBhZnRlciB0aGUgcXVlcnkgd2FzIGxhc3QgbGlzdGVuZWQgdG8uXG4gKlxuICogVGhlcmUgYXJlIHNvbWUgY2FzZXMgd2hlbiB0aGlzIG9wdGltaXphdGlvbiBpcyBub3QgZ3VhcmFudGVlZCB0byBwcm9kdWNlXG4gKiB0aGUgc2FtZSByZXN1bHRzIGFzIGZ1bGwgY29sbGVjdGlvbiBzY2Fucy4gSW4gdGhlc2UgY2FzZXMsIHF1ZXJ5XG4gKiBwcm9jZXNzaW5nIGZhbGxzIGJhY2sgdG8gZnVsbCBzY2Fucy4gVGhlc2UgY2FzZXMgYXJlOlxuICpcbiAqIC0gTGltaXQgcXVlcmllcyB3aGVyZSBhIGRvY3VtZW50IHRoYXQgbWF0Y2hlZCB0aGUgcXVlcnkgcHJldmlvdXNseSBubyBsb25nZXJcbiAqICAgbWF0Y2hlcyB0aGUgcXVlcnkuXG4gKlxuICogLSBMaW1pdCBxdWVyaWVzIHdoZXJlIGEgZG9jdW1lbnQgZWRpdCBtYXkgY2F1c2UgdGhlIGRvY3VtZW50IHRvIHNvcnQgYmVsb3dcbiAqICAgYW5vdGhlciBkb2N1bWVudCB0aGF0IGlzIGluIHRoZSBsb2NhbCBjYWNoZS5cbiAqXG4gKiAtIFF1ZXJpZXMgdGhhdCBoYXZlIG5ldmVyIGJlZW4gQ1VSUkVOVCBvciBmcmVlIG9mIGxpbWJvIGRvY3VtZW50cy5cbiAqL1xuY2xhc3MgX19QUklWQVRFX1F1ZXJ5RW5naW5lIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5ScyA9ICExLCB0aGlzLlZzID0gITEsIFxuICAgICAgICAvKipcbiAgICAgICAgICogU0RLIG9ubHkgZGVjaWRlcyB3aGV0aGVyIGl0IHNob3VsZCBjcmVhdGUgaW5kZXggd2hlbiBjb2xsZWN0aW9uIHNpemUgaXNcbiAgICAgICAgICogbGFyZ2VyIHRoYW4gdGhpcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZnMgPSAxMDAsIHRoaXMuZ3MgPSBcbiAgICAgICAgLyoqXG4gKiBUaGlzIGNvc3QgcmVwcmVzZW50cyB0aGUgZXZhbHVhdGlvbiByZXN1bHQgb2ZcbiAqICgoW2luZGV4LCBkb2NLZXldICsgW2RvY0tleSwgZG9jQ29udGVudF0pIHBlciBkb2N1bWVudCBpbiB0aGUgcmVzdWx0IHNldClcbiAqIC8gKFtkb2NLZXksIGRvY0NvbnRlbnRdIHBlciBkb2N1bWVudHMgaW4gZnVsbCBjb2xsZWN0aW9uIHNjYW4pIGNvbWluZyBmcm9tXG4gKiBleHBlcmltZW50IFtlbnRlciBQUiBleHBlcmltZW50IFVSTCBoZXJlXS5cbiAqL1xuICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfZ2V0RGVmYXVsdFJlbGF0aXZlSW5kZXhSZWFkQ29zdFBlckRvY3VtZW50KCkge1xuICAgICAgICAgICAgLy8gVGhlc2UgdmFsdWVzIHdlcmUgZGVyaXZlZCBmcm9tIGFuIGV4cGVyaW1lbnQgd2hlcmUgc2V2ZXJhbCBtZW1iZXJzIG9mIHRoZVxuICAgICAgICAgICAgLy8gRmlyZXN0b3JlIFNESyB0ZWFtIHJhbiBhIHBlcmZvcm1hbmNlIHRlc3QgaW4gdmFyaW91cyBlbnZpcm9ubWVudHMuXG4gICAgICAgICAgICAvLyBHb29nbGVycyBjYW4gc2VlIGIvMjk5Mjg0Mjg3IGZvciBkZXRhaWxzLlxuICAgICAgICAgICAgcmV0dXJuIGlzU2FmYXJpKCkgPyA4IDogX19QUklWQVRFX2dldEFuZHJvaWRWZXJzaW9uKGdldFVBKCkpID4gMCA/IDYgOiA0O1xuICAgICAgICB9KCk7XG4gICAgfVxuICAgIC8qKiBTZXRzIHRoZSBkb2N1bWVudCB2aWV3IHRvIHF1ZXJ5IGFnYWluc3QuICovICAgIGluaXRpYWxpemUoZSwgdCkge1xuICAgICAgICB0aGlzLnBzID0gZSwgdGhpcy5pbmRleE1hbmFnZXIgPSB0LCB0aGlzLlJzID0gITA7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGFsbCBsb2NhbCBkb2N1bWVudHMgbWF0Y2hpbmcgdGhlIHNwZWNpZmllZCBxdWVyeS4gKi8gICAgZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeShlLCB0LCBuLCByKSB7XG4gICAgICAgIC8vIFN0b3JlcyB0aGUgcmVzdWx0IGZyb20gZXhlY3V0aW5nIHRoZSBxdWVyeTsgdXNpbmcgdGhpcyBvYmplY3QgaXMgbW9yZVxuICAgICAgICAvLyBjb252ZW5pZW50IHRoYW4gcGFzc2luZyB0aGUgcmVzdWx0IGJldHdlZW4gc3RlcHMgb2YgdGhlIHBlcnNpc3RlbmNlXG4gICAgICAgIC8vIHRyYW5zYWN0aW9uIGFuZCBpbXByb3ZlcyByZWFkYWJpbGl0eSBjb21wYXJhdGl2ZWx5LlxuICAgICAgICBjb25zdCBpID0ge1xuICAgICAgICAgICAgcmVzdWx0OiBudWxsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0aGlzLnlzKGUsIHQpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgaS5yZXN1bHQgPSBlO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFpLnJlc3VsdCkgcmV0dXJuIHRoaXMud3MoZSwgdCwgciwgbikubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgaS5yZXN1bHQgPSBlO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGkucmVzdWx0KSByZXR1cm47XG4gICAgICAgICAgICBjb25zdCBuID0gbmV3IFF1ZXJ5Q29udGV4dDtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLlNzKGUsIHQsIG4pLm5leHQoKHIgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChpLnJlc3VsdCA9IHIsIHRoaXMuVnMpIHJldHVybiB0aGlzLmJzKGUsIHQsIG4sIHIuc2l6ZSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpLnJlc3VsdCkpO1xuICAgIH1cbiAgICBicyhlLCB0LCBuLCByKSB7XG4gICAgICAgIHJldHVybiBuLmRvY3VtZW50UmVhZENvdW50IDwgdGhpcy5mcyA/IChfX1BSSVZBVEVfZ2V0TG9nTGV2ZWwoKSA8PSBMb2dMZXZlbC5ERUJVRyAmJiBfX1BSSVZBVEVfbG9nRGVidWcoXCJRdWVyeUVuZ2luZVwiLCBcIlNESyB3aWxsIG5vdCBjcmVhdGUgY2FjaGUgaW5kZXhlcyBmb3IgcXVlcnk6XCIsIF9fUFJJVkFURV9zdHJpbmdpZnlRdWVyeSh0KSwgXCJzaW5jZSBpdCBvbmx5IGNyZWF0ZXMgY2FjaGUgaW5kZXhlcyBmb3IgY29sbGVjdGlvbiBjb250YWluc1wiLCBcIm1vcmUgdGhhbiBvciBlcXVhbCB0b1wiLCB0aGlzLmZzLCBcImRvY3VtZW50c1wiKSwgXG4gICAgICAgIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCkpIDogKF9fUFJJVkFURV9nZXRMb2dMZXZlbCgpIDw9IExvZ0xldmVsLkRFQlVHICYmIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlF1ZXJ5RW5naW5lXCIsIFwiUXVlcnk6XCIsIF9fUFJJVkFURV9zdHJpbmdpZnlRdWVyeSh0KSwgXCJzY2Fuc1wiLCBuLmRvY3VtZW50UmVhZENvdW50LCBcImxvY2FsIGRvY3VtZW50cyBhbmQgcmV0dXJuc1wiLCByLCBcImRvY3VtZW50cyBhcyByZXN1bHRzLlwiKSwgXG4gICAgICAgIG4uZG9jdW1lbnRSZWFkQ291bnQgPiB0aGlzLmdzICogciA/IChfX1BSSVZBVEVfZ2V0TG9nTGV2ZWwoKSA8PSBMb2dMZXZlbC5ERUJVRyAmJiBfX1BSSVZBVEVfbG9nRGVidWcoXCJRdWVyeUVuZ2luZVwiLCBcIlRoZSBTREsgZGVjaWRlcyB0byBjcmVhdGUgY2FjaGUgaW5kZXhlcyBmb3IgcXVlcnk6XCIsIF9fUFJJVkFURV9zdHJpbmdpZnlRdWVyeSh0KSwgXCJhcyB1c2luZyBjYWNoZSBpbmRleGVzIG1heSBoZWxwIGltcHJvdmUgcGVyZm9ybWFuY2UuXCIpLCBcbiAgICAgICAgdGhpcy5pbmRleE1hbmFnZXIuY3JlYXRlVGFyZ2V0SW5kZXhlcyhlLCBfX1BSSVZBVEVfcXVlcnlUb1RhcmdldCh0KSkpIDogUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIGFuIGluZGV4ZWQgcXVlcnkgdGhhdCBldmFsdWF0ZXMgdGhlIHF1ZXJ5IGJhc2VkIG9uIGEgY29sbGVjdGlvbidzXG4gICAgICogcGVyc2lzdGVkIGluZGV4IHZhbHVlcy4gUmV0dXJucyBgbnVsbGAgaWYgYW4gaW5kZXggaXMgbm90IGF2YWlsYWJsZS5cbiAgICAgKi8gICAgeXMoZSwgdCkge1xuICAgICAgICBpZiAoX19QUklWQVRFX3F1ZXJ5TWF0Y2hlc0FsbERvY3VtZW50cyh0KSkgXG4gICAgICAgIC8vIFF1ZXJpZXMgdGhhdCBtYXRjaCBhbGwgZG9jdW1lbnRzIGRvbid0IGJlbmVmaXQgZnJvbSB1c2luZ1xuICAgICAgICAvLyBrZXktYmFzZWQgbG9va3Vwcy4gSXQgaXMgbW9yZSBlZmZpY2llbnQgdG8gc2NhbiBhbGwgZG9jdW1lbnRzIGluIGFcbiAgICAgICAgLy8gY29sbGVjdGlvbiwgcmF0aGVyIHRoYW4gdG8gcGVyZm9ybSBpbmRpdmlkdWFsIGxvb2t1cHMuXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShudWxsKTtcbiAgICAgICAgbGV0IG4gPSBfX1BSSVZBVEVfcXVlcnlUb1RhcmdldCh0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXhNYW5hZ2VyLmdldEluZGV4VHlwZShlLCBuKS5uZXh0KChyID0+IDAgLyogSW5kZXhUeXBlLk5PTkUgKi8gPT09IHIgPyBudWxsIDogKG51bGwgIT09IHQubGltaXQgJiYgMSAvKiBJbmRleFR5cGUuUEFSVElBTCAqLyA9PT0gciAmJiAoXG4gICAgICAgIC8vIFdlIGNhbm5vdCBhcHBseSBhIGxpbWl0IGZvciB0YXJnZXRzIHRoYXQgYXJlIHNlcnZlZCB1c2luZyBhIHBhcnRpYWxcbiAgICAgICAgLy8gaW5kZXguIElmIGEgcGFydGlhbCBpbmRleCB3aWxsIGJlIHVzZWQgdG8gc2VydmUgdGhlIHRhcmdldCwgdGhlXG4gICAgICAgIC8vIHF1ZXJ5IG1heSByZXR1cm4gYSBzdXBlcnNldCBvZiBkb2N1bWVudHMgdGhhdCBtYXRjaCB0aGUgdGFyZ2V0XG4gICAgICAgIC8vIChlLmcuIGlmIHRoZSBpbmRleCBkb2Vzbid0IGluY2x1ZGUgYWxsIHRoZSB0YXJnZXQncyBmaWx0ZXJzKSwgb3JcbiAgICAgICAgLy8gbWF5IHJldHVybiB0aGUgY29ycmVjdCBzZXQgb2YgZG9jdW1lbnRzIGluIHRoZSB3cm9uZyBvcmRlciAoZS5nLiBpZlxuICAgICAgICAvLyB0aGUgaW5kZXggZG9lc24ndCBpbmNsdWRlIGEgc2VnbWVudCBmb3Igb25lIG9mIHRoZSBvcmRlckJ5cykuXG4gICAgICAgIC8vIFRoZXJlZm9yZSwgYSBsaW1pdCBzaG91bGQgbm90IGJlIGFwcGxpZWQgaW4gc3VjaCBjYXNlcy5cbiAgICAgICAgdCA9IF9fUFJJVkFURV9xdWVyeVdpdGhMaW1pdCh0LCBudWxsLCBcIkZcIiAvKiBMaW1pdFR5cGUuRmlyc3QgKi8pLCBuID0gX19QUklWQVRFX3F1ZXJ5VG9UYXJnZXQodCkpLCBcbiAgICAgICAgdGhpcy5pbmRleE1hbmFnZXIuZ2V0RG9jdW1lbnRzTWF0Y2hpbmdUYXJnZXQoZSwgbikubmV4dCgociA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KC4uLnIpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHMuZ2V0RG9jdW1lbnRzKGUsIGkpLm5leHQoKHIgPT4gdGhpcy5pbmRleE1hbmFnZXIuZ2V0TWluT2Zmc2V0KGUsIG4pLm5leHQoKG4gPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSB0aGlzLkRzKHQsIHIpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLkNzKHQsIHMsIGksIG4ucmVhZFRpbWUpID8gdGhpcy55cyhlLCBfX1BSSVZBVEVfcXVlcnlXaXRoTGltaXQodCwgbnVsbCwgXCJGXCIgLyogTGltaXRUeXBlLkZpcnN0ICovKSkgOiB0aGlzLnZzKGUsIHMsIHQsIG4pO1xuICAgICAgICAgICAgfSkpKSk7XG4gICAgICAgIH0pKSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgYSBxdWVyeSBiYXNlZCBvbiB0aGUgdGFyZ2V0J3MgcGVyc2lzdGVkIHF1ZXJ5IG1hcHBpbmcuIFJldHVybnNcbiAgICAgKiBgbnVsbGAgaWYgdGhlIG1hcHBpbmcgaXMgbm90IGF2YWlsYWJsZSBvciBjYW5ub3QgYmUgdXNlZC5cbiAgICAgKi8gICAgd3MoZSwgdCwgbiwgcikge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3F1ZXJ5TWF0Y2hlc0FsbERvY3VtZW50cyh0KSB8fCByLmlzRXF1YWwoU25hcHNob3RWZXJzaW9uLm1pbigpKSA/IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKG51bGwpIDogdGhpcy5wcy5nZXREb2N1bWVudHMoZSwgbikubmV4dCgoaSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gdGhpcy5Ecyh0LCBpKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLkNzKHQsIHMsIG4sIHIpID8gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUobnVsbCkgOiAoX19QUklWQVRFX2dldExvZ0xldmVsKCkgPD0gTG9nTGV2ZWwuREVCVUcgJiYgX19QUklWQVRFX2xvZ0RlYnVnKFwiUXVlcnlFbmdpbmVcIiwgXCJSZS11c2luZyBwcmV2aW91cyByZXN1bHQgZnJvbSAlcyB0byBleGVjdXRlIHF1ZXJ5OiAlc1wiLCByLnRvU3RyaW5nKCksIF9fUFJJVkFURV9zdHJpbmdpZnlRdWVyeSh0KSksIFxuICAgICAgICAgICAgdGhpcy52cyhlLCBzLCB0LCBfX1BSSVZBVEVfbmV3SW5kZXhPZmZzZXRTdWNjZXNzb3JGcm9tUmVhZFRpbWUociwgVSkpLm5leHQoKGUgPT4gZSkpKTtcbiAgICAgICAgfSkpO1xuICAgICAgICAvLyBRdWVyaWVzIHRoYXQgaGF2ZSBuZXZlciBzZWVuIGEgc25hcHNob3Qgd2l0aG91dCBsaW1ibyBmcmVlIGRvY3VtZW50c1xuICAgICAgICAvLyBzaG91bGQgYWxzbyBiZSBydW4gYXMgYSBmdWxsIGNvbGxlY3Rpb24gc2Nhbi5cbiAgICAgICAgfVxuICAgIC8qKiBBcHBsaWVzIHRoZSBxdWVyeSBmaWx0ZXIgYW5kIHNvcnRpbmcgdG8gdGhlIHByb3ZpZGVkIGRvY3VtZW50cy4gICovICAgIERzKGUsIHQpIHtcbiAgICAgICAgLy8gU29ydCB0aGUgZG9jdW1lbnRzIGFuZCByZS1hcHBseSB0aGUgcXVlcnkgZmlsdGVyIHNpbmNlIHByZXZpb3VzbHlcbiAgICAgICAgLy8gbWF0Y2hpbmcgZG9jdW1lbnRzIGRvIG5vdCBuZWNlc3NhcmlseSBzdGlsbCBtYXRjaCB0aGUgcXVlcnkuXG4gICAgICAgIGxldCBuID0gbmV3IFNvcnRlZFNldChfX1BSSVZBVEVfbmV3UXVlcnlDb21wYXJhdG9yKGUpKTtcbiAgICAgICAgcmV0dXJuIHQuZm9yRWFjaCgoKHQsIHIpID0+IHtcbiAgICAgICAgICAgIF9fUFJJVkFURV9xdWVyeU1hdGNoZXMoZSwgcikgJiYgKG4gPSBuLmFkZChyKSk7XG4gICAgICAgIH0pKSwgbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyBpZiBhIGxpbWl0IHF1ZXJ5IG5lZWRzIHRvIGJlIHJlZmlsbGVkIGZyb20gY2FjaGUsIG1ha2luZyBpdFxuICAgICAqIGluZWxpZ2libGUgZm9yIGluZGV4LWZyZWUgZXhlY3V0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHF1ZXJ5IC0gVGhlIHF1ZXJ5LlxuICAgICAqIEBwYXJhbSBzb3J0ZWRQcmV2aW91c1Jlc3VsdHMgLSBUaGUgZG9jdW1lbnRzIHRoYXQgbWF0Y2hlZCB0aGUgcXVlcnkgd2hlbiBpdFxuICAgICAqIHdhcyBsYXN0IHN5bmNocm9uaXplZCwgc29ydGVkIGJ5IHRoZSBxdWVyeSdzIGNvbXBhcmF0b3IuXG4gICAgICogQHBhcmFtIHJlbW90ZUtleXMgLSBUaGUgZG9jdW1lbnQga2V5cyB0aGF0IG1hdGNoZWQgdGhlIHF1ZXJ5IGF0IHRoZSBsYXN0XG4gICAgICogc25hcHNob3QuXG4gICAgICogQHBhcmFtIGxpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiAtIFRoZSB2ZXJzaW9uIG9mIHRoZSBzbmFwc2hvdCB3aGVuIHRoZVxuICAgICAqIHF1ZXJ5IHdhcyBsYXN0IHN5bmNocm9uaXplZC5cbiAgICAgKi8gICAgQ3MoZSwgdCwgbiwgcikge1xuICAgICAgICBpZiAobnVsbCA9PT0gZS5saW1pdCkgXG4gICAgICAgIC8vIFF1ZXJpZXMgd2l0aG91dCBsaW1pdHMgZG8gbm90IG5lZWQgdG8gYmUgcmVmaWxsZWQuXG4gICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgaWYgKG4uc2l6ZSAhPT0gdC5zaXplKSBcbiAgICAgICAgLy8gVGhlIHF1ZXJ5IG5lZWRzIHRvIGJlIHJlZmlsbGVkIGlmIGEgcHJldmlvdXNseSBtYXRjaGluZyBkb2N1bWVudCBub1xuICAgICAgICAvLyBsb25nZXIgbWF0Y2hlcy5cbiAgICAgICAgcmV0dXJuICEwO1xuICAgICAgICAvLyBMaW1pdCBxdWVyaWVzIGFyZSBub3QgZWxpZ2libGUgZm9yIGluZGV4LWZyZWUgcXVlcnkgZXhlY3V0aW9uIGlmIHRoZXJlIGlzXG4gICAgICAgIC8vIGEgcG90ZW50aWFsIHRoYXQgYW4gb2xkZXIgZG9jdW1lbnQgZnJvbSBjYWNoZSBub3cgc29ydHMgYmVmb3JlIGEgZG9jdW1lbnRcbiAgICAgICAgLy8gdGhhdCB3YXMgcHJldmlvdXNseSBwYXJ0IG9mIHRoZSBsaW1pdC4gVGhpcywgaG93ZXZlciwgY2FuIG9ubHkgaGFwcGVuIGlmXG4gICAgICAgIC8vIHRoZSBkb2N1bWVudCBhdCB0aGUgZWRnZSBvZiB0aGUgbGltaXQgZ29lcyBvdXQgb2YgbGltaXQuXG4gICAgICAgIC8vIElmIGEgZG9jdW1lbnQgdGhhdCBpcyBub3QgdGhlIGxpbWl0IGJvdW5kYXJ5IHNvcnRzIGRpZmZlcmVudGx5LFxuICAgICAgICAvLyB0aGUgYm91bmRhcnkgb2YgdGhlIGxpbWl0IGl0c2VsZiBkaWQgbm90IGNoYW5nZSBhbmQgZG9jdW1lbnRzIGZyb20gY2FjaGVcbiAgICAgICAgLy8gd2lsbCBjb250aW51ZSB0byBiZSBcInJlamVjdGVkXCIgYnkgdGhpcyBib3VuZGFyeS4gVGhlcmVmb3JlLCB3ZSBjYW4gaWdub3JlXG4gICAgICAgIC8vIGFueSBtb2RpZmljYXRpb25zIHRoYXQgZG9uJ3QgYWZmZWN0IHRoZSBsYXN0IGRvY3VtZW50LlxuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBcIkZcIiAvKiBMaW1pdFR5cGUuRmlyc3QgKi8gPT09IGUubGltaXRUeXBlID8gdC5sYXN0KCkgOiB0LmZpcnN0KCk7XG4gICAgICAgIHJldHVybiAhIWkgJiYgKGkuaGFzUGVuZGluZ1dyaXRlcyB8fCBpLnZlcnNpb24uY29tcGFyZVRvKHIpID4gMCk7XG4gICAgfVxuICAgIFNzKGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9nZXRMb2dMZXZlbCgpIDw9IExvZ0xldmVsLkRFQlVHICYmIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlF1ZXJ5RW5naW5lXCIsIFwiVXNpbmcgZnVsbCBjb2xsZWN0aW9uIHNjYW4gdG8gZXhlY3V0ZSBxdWVyeTpcIiwgX19QUklWQVRFX3N0cmluZ2lmeVF1ZXJ5KHQpKSwgXG4gICAgICAgIHRoaXMucHMuZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeShlLCB0LCBJbmRleE9mZnNldC5taW4oKSwgbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbWJpbmVzIHRoZSByZXN1bHRzIGZyb20gYW4gaW5kZXhlZCBleGVjdXRpb24gd2l0aCB0aGUgcmVtYWluaW5nIGRvY3VtZW50c1xuICAgICAqIHRoYXQgaGF2ZSBub3QgeWV0IGJlZW4gaW5kZXhlZC5cbiAgICAgKi8gICAgdnMoZSwgdCwgbiwgcikge1xuICAgICAgICAvLyBSZXRyaWV2ZSBhbGwgcmVzdWx0cyBmb3IgZG9jdW1lbnRzIHRoYXQgd2VyZSB1cGRhdGVkIHNpbmNlIHRoZSBvZmZzZXQuXG4gICAgICAgIHJldHVybiB0aGlzLnBzLmdldERvY3VtZW50c01hdGNoaW5nUXVlcnkoZSwgbiwgcikubmV4dCgoZSA9PiAoXG4gICAgICAgIC8vIE1lcmdlIHdpdGggZXhpc3RpbmcgcmVzdWx0c1xuICAgICAgICB0LmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgZSA9IGUuaW5zZXJ0KHQua2V5LCB0KTtcbiAgICAgICAgfSkpLCBlKSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgVXQgPSBcIkxvY2FsU3RvcmVcIiwgS3QgPSAzZTg7XG5cbi8qKlxuICogVGhlIG1heGltdW0gdGltZSB0byBsZWF2ZSBhIHJlc3VtZSB0b2tlbiBidWZmZXJlZCB3aXRob3V0IHdyaXRpbmcgaXQgb3V0LlxuICogVGhpcyB2YWx1ZSBpcyBhcmJpdHJhcnk6IGl0J3MgbG9uZyBlbm91Z2ggdG8gYXZvaWQgc2V2ZXJhbCB3cml0ZXNcbiAqIChwb3NzaWJseSBpbmRlZmluaXRlbHkgaWYgdXBkYXRlcyBjb21lIG1vcmUgZnJlcXVlbnRseSB0aGFuIHRoaXMpIGJ1dFxuICogc2hvcnQgZW5vdWdoIHRoYXQgcmVzdGFydGluZyBhZnRlciBjcmFzaGluZyB3aWxsIHN0aWxsIGhhdmUgYSBwcmV0dHlcbiAqIHJlY2VudCByZXN1bWUgdG9rZW4uXG4gKi9cbi8qKlxuICogSW1wbGVtZW50cyBgTG9jYWxTdG9yZWAgaW50ZXJmYWNlLlxuICpcbiAqIE5vdGU6IHNvbWUgZmllbGQgZGVmaW5lZCBpbiB0aGlzIGNsYXNzIG1pZ2h0IGhhdmUgcHVibGljIGFjY2VzcyBsZXZlbCwgYnV0XG4gKiB0aGUgY2xhc3MgaXMgbm90IGV4cG9ydGVkIHNvIHRoZXkgYXJlIG9ubHkgYWNjZXNzaWJsZSBmcm9tIHRoaXMgbW9kdWxlLlxuICogVGhpcyBpcyB1c2VmdWwgdG8gaW1wbGVtZW50IG9wdGlvbmFsIGZlYXR1cmVzIChsaWtlIGJ1bmRsZXMpIGluIGZyZWVcbiAqIGZ1bmN0aW9ucywgc3VjaCB0aGF0IHRoZXkgYXJlIHRyZWUtc2hha2VhYmxlLlxuICovXG5jbGFzcyBfX1BSSVZBVEVfTG9jYWxTdG9yZUltcGwge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBNYW5hZ2VzIG91ciBpbi1tZW1vcnkgb3IgZHVyYWJsZSBwZXJzaXN0ZW5jZS4gKi9cbiAgICBlLCB0LCBuLCByKSB7XG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSBlLCB0aGlzLkZzID0gdCwgdGhpcy5zZXJpYWxpemVyID0gciwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNYXBzIGEgdGFyZ2V0SUQgdG8gZGF0YSBhYm91dCBpdHMgdGFyZ2V0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBQT1JUSU5HIE5PVEU6IFdlIGFyZSB1c2luZyBhbiBpbW11dGFibGUgZGF0YSBzdHJ1Y3R1cmUgb24gV2ViIHRvIG1ha2UgcmUtcnVuc1xuICAgICAgICAgKiBvZiBgYXBwbHlSZW1vdGVFdmVudCgpYCBpZGVtcG90ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5NcyA9IG5ldyBTb3J0ZWRNYXAoX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IpLCBcbiAgICAgICAgLyoqIE1hcHMgYSB0YXJnZXQgdG8gaXRzIHRhcmdldElELiAqL1xuICAgICAgICAvLyBUT0RPKHd1YW5keSk6IEV2YWx1YXRlIGlmIFRhcmdldElkIGNhbiBiZSBwYXJ0IG9mIFRhcmdldC5cbiAgICAgICAgdGhpcy54cyA9IG5ldyBPYmplY3RNYXAoKGUgPT4gX19QUklWQVRFX2Nhbm9uaWZ5VGFyZ2V0KGUpKSwgX19QUklWQVRFX3RhcmdldEVxdWFscyksIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBwZXIgY29sbGVjdGlvbiBncm91cCBpbmRleCBvZiB0aGUgbGFzdCByZWFkIHRpbWUgcHJvY2Vzc2VkIGJ5XG4gICAgICAgICAqIGBnZXROZXdEb2N1bWVudENoYW5nZXMoKWAuXG4gICAgICAgICAqXG4gICAgICAgICAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIG11bHRpLXRhYiBzeW5jaHJvbml6YXRpb24uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLk9zID0gbmV3IE1hcCwgdGhpcy5OcyA9IGUuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpLCB0aGlzLlBpID0gZS5nZXRUYXJnZXRDYWNoZSgpLCBcbiAgICAgICAgdGhpcy5JaSA9IGUuZ2V0QnVuZGxlQ2FjaGUoKSwgdGhpcy5CcyhuKTtcbiAgICB9XG4gICAgQnMoZSkge1xuICAgICAgICAvLyBUT0RPKGluZGV4aW5nKTogQWRkIHNwZWMgdGVzdHMgdGhhdCB0ZXN0IHRoZXNlIGNvbXBvbmVudHMgY2hhbmdlIGFmdGVyIGFcbiAgICAgICAgLy8gdXNlciBjaGFuZ2VcbiAgICAgICAgdGhpcy5kb2N1bWVudE92ZXJsYXlDYWNoZSA9IHRoaXMucGVyc2lzdGVuY2UuZ2V0RG9jdW1lbnRPdmVybGF5Q2FjaGUoZSksIHRoaXMuaW5kZXhNYW5hZ2VyID0gdGhpcy5wZXJzaXN0ZW5jZS5nZXRJbmRleE1hbmFnZXIoZSksIFxuICAgICAgICB0aGlzLm11dGF0aW9uUXVldWUgPSB0aGlzLnBlcnNpc3RlbmNlLmdldE11dGF0aW9uUXVldWUoZSwgdGhpcy5pbmRleE1hbmFnZXIpLCB0aGlzLmxvY2FsRG9jdW1lbnRzID0gbmV3IExvY2FsRG9jdW1lbnRzVmlldyh0aGlzLk5zLCB0aGlzLm11dGF0aW9uUXVldWUsIHRoaXMuZG9jdW1lbnRPdmVybGF5Q2FjaGUsIHRoaXMuaW5kZXhNYW5hZ2VyKSwgXG4gICAgICAgIHRoaXMuTnMuc2V0SW5kZXhNYW5hZ2VyKHRoaXMuaW5kZXhNYW5hZ2VyKSwgdGhpcy5Gcy5pbml0aWFsaXplKHRoaXMubG9jYWxEb2N1bWVudHMsIHRoaXMuaW5kZXhNYW5hZ2VyKTtcbiAgICB9XG4gICAgY29sbGVjdEdhcmJhZ2UoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkNvbGxlY3QgZ2FyYmFnZVwiLCBcInJlYWR3cml0ZS1wcmltYXJ5XCIsICh0ID0+IGUuY29sbGVjdCh0LCB0aGlzLk1zKSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX25ld0xvY2FsU3RvcmUoXG4vKiogTWFuYWdlcyBvdXIgaW4tbWVtb3J5IG9yIGR1cmFibGUgcGVyc2lzdGVuY2UuICovXG5lLCB0LCBuLCByKSB7XG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfTG9jYWxTdG9yZUltcGwoZSwgdCwgbiwgcik7XG59XG5cbi8qKlxuICogVGVsbHMgdGhlIExvY2FsU3RvcmUgdGhhdCB0aGUgY3VycmVudGx5IGF1dGhlbnRpY2F0ZWQgdXNlciBoYXMgY2hhbmdlZC5cbiAqXG4gKiBJbiByZXNwb25zZSB0aGUgbG9jYWwgc3RvcmUgc3dpdGNoZXMgdGhlIG11dGF0aW9uIHF1ZXVlIHRvIHRoZSBuZXcgdXNlciBhbmRcbiAqIHJldHVybnMgYW55IHJlc3VsdGluZyBkb2N1bWVudCBjaGFuZ2VzLlxuICovXG4vLyBQT1JUSU5HIE5PVEU6IEFuZHJvaWQgYW5kIGlPUyBvbmx5IHJldHVybiB0aGUgZG9jdW1lbnRzIGFmZmVjdGVkIGJ5IHRoZVxuLy8gY2hhbmdlLlxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVIYW5kbGVVc2VyQ2hhbmdlKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICByZXR1cm4gYXdhaXQgbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkhhbmRsZSB1c2VyIGNoYW5nZVwiLCBcInJlYWRvbmx5XCIsIChlID0+IHtcbiAgICAgICAgLy8gU3dhcCBvdXQgdGhlIG11dGF0aW9uIHF1ZXVlLCBncmFiYmluZyB0aGUgcGVuZGluZyBtdXRhdGlvbiBiYXRjaGVzXG4gICAgICAgIC8vIGJlZm9yZSBhbmQgYWZ0ZXIuXG4gICAgICAgIGxldCByO1xuICAgICAgICByZXR1cm4gbi5tdXRhdGlvblF1ZXVlLmdldEFsbE11dGF0aW9uQmF0Y2hlcyhlKS5uZXh0KChpID0+IChyID0gaSwgbi5Ccyh0KSwgbi5tdXRhdGlvblF1ZXVlLmdldEFsbE11dGF0aW9uQmF0Y2hlcyhlKSkpKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBbXSwgcyA9IFtdO1xuICAgICAgICAgICAgLy8gVW5pb24gdGhlIG9sZC9uZXcgY2hhbmdlZCBrZXlzLlxuICAgICAgICAgICAgbGV0IG8gPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiByKSB7XG4gICAgICAgICAgICAgICAgaS5wdXNoKGUuYmF0Y2hJZCk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIGUubXV0YXRpb25zKSBvID0gby5hZGQodC5rZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIHQpIHtcbiAgICAgICAgICAgICAgICBzLnB1c2goZS5iYXRjaElkKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZS5tdXRhdGlvbnMpIG8gPSBvLmFkZCh0LmtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBSZXR1cm4gdGhlIHNldCBvZiBhbGwgKHBvdGVudGlhbGx5KSBjaGFuZ2VkIGRvY3VtZW50cyBhbmQgdGhlIGxpc3RcbiAgICAgICAgICAgIC8vIG9mIG11dGF0aW9uIGJhdGNoIElEcyB0aGF0IHdlcmUgYWZmZWN0ZWQgYnkgY2hhbmdlLlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4ubG9jYWxEb2N1bWVudHMuZ2V0RG9jdW1lbnRzKGUsIG8pLm5leHQoKGUgPT4gKHtcbiAgICAgICAgICAgICAgICBMczogZSxcbiAgICAgICAgICAgICAgICByZW1vdmVkQmF0Y2hJZHM6IGksXG4gICAgICAgICAgICAgICAgYWRkZWRCYXRjaElkczogc1xuICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgfSkpO1xuICAgIH0pKTtcbn1cblxuLyogQWNjZXB0cyBsb2NhbGx5IGdlbmVyYXRlZCBNdXRhdGlvbnMgYW5kIGNvbW1pdCB0aGVtIHRvIHN0b3JhZ2UuICovXG4vKipcbiAqIEFja25vd2xlZGdlcyB0aGUgZ2l2ZW4gYmF0Y2guXG4gKlxuICogT24gdGhlIGhhcHB5IHBhdGggd2hlbiBhIGJhdGNoIGlzIGFja25vd2xlZGdlZCwgdGhlIGxvY2FsIHN0b3JlIHdpbGxcbiAqXG4gKiAgKyByZW1vdmUgdGhlIGJhdGNoIGZyb20gdGhlIG11dGF0aW9uIHF1ZXVlO1xuICogICsgYXBwbHkgdGhlIGNoYW5nZXMgdG8gdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZTtcbiAqICArIHJlY2FsY3VsYXRlIHRoZSBsYXRlbmN5IGNvbXBlbnNhdGVkIHZpZXcgaW1wbGllZCBieSB0aG9zZSBjaGFuZ2VzICh0aGVyZVxuICogICAgbWF5IGJlIG11dGF0aW9ucyBpbiB0aGUgcXVldWUgdGhhdCBhZmZlY3QgdGhlIGRvY3VtZW50cyBidXQgaGF2ZW4ndCBiZWVuXG4gKiAgICBhY2tub3dsZWRnZWQgeWV0KTsgYW5kXG4gKiAgKyBnaXZlIHRoZSBjaGFuZ2VkIGRvY3VtZW50cyBiYWNrIHRoZSBzeW5jIGVuZ2luZVxuICpcbiAqIEByZXR1cm5zIFRoZSByZXN1bHRpbmcgKG1vZGlmaWVkKSBkb2N1bWVudHMuXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlQWNrbm93bGVkZ2VCYXRjaChlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJBY2tub3dsZWRnZSBiYXRjaFwiLCBcInJlYWR3cml0ZS1wcmltYXJ5XCIsIChlID0+IHtcbiAgICAgICAgY29uc3QgciA9IHQuYmF0Y2gua2V5cygpLCBpID0gbi5Ocy5uZXdDaGFuZ2VCdWZmZXIoe1xuICAgICAgICAgICAgdHJhY2tSZW1vdmFsczogITBcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfYXBwbHlXcml0ZVRvUmVtb3RlRG9jdW1lbnRzKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBuLmJhdGNoLCBzID0gaS5rZXlzKCk7XG4gICAgICAgICAgICBsZXQgbyA9IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICByZXR1cm4gcy5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgICAgICBvID0gby5uZXh0KCgoKSA9PiByLmdldEVudHJ5KHQsIGUpKSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBuLmRvY1ZlcnNpb25zLmdldChlKTtcbiAgICAgICAgICAgICAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQobnVsbCAhPT0gcywgNDg1NDEpLCB0LnZlcnNpb24uY29tcGFyZVRvKHMpIDwgMCAmJiAoaS5hcHBseVRvUmVtb3RlRG9jdW1lbnQodCwgbiksIFxuICAgICAgICAgICAgICAgICAgICB0LmlzVmFsaWREb2N1bWVudCgpICYmIChcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgdXNlIHRoZSBjb21taXRWZXJzaW9uIGFzIHRoZSByZWFkVGltZSByYXRoZXIgdGhhbiB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy8gZG9jdW1lbnQncyB1cGRhdGVUaW1lIHNpbmNlIHRoZSB1cGRhdGVUaW1lIGlzIG5vdCBhZHZhbmNlZFxuICAgICAgICAgICAgICAgICAgICAvLyBmb3IgdXBkYXRlcyB0aGF0IGRvIG5vdCBtb2RpZnkgdGhlIHVuZGVybHlpbmcgZG9jdW1lbnQuXG4gICAgICAgICAgICAgICAgICAgIHQuc2V0UmVhZFRpbWUobi5jb21taXRWZXJzaW9uKSwgci5hZGRFbnRyeSh0KSkpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pKSwgby5uZXh0KCgoKSA9PiBlLm11dGF0aW9uUXVldWUucmVtb3ZlTXV0YXRpb25CYXRjaCh0LCBpKSkpO1xuICAgICAgICB9XG4gICAgICAgIC8qKiBSZXR1cm5zIHRoZSBsb2NhbCB2aWV3IG9mIHRoZSBkb2N1bWVudHMgYWZmZWN0ZWQgYnkgYSBtdXRhdGlvbiBiYXRjaC4gKi9cbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbiAgICAgICAgKG4sIGUsIHQsIGkpLm5leHQoKCgpID0+IGkuYXBwbHkoZSkpKS5uZXh0KCgoKSA9PiBuLm11dGF0aW9uUXVldWUucGVyZm9ybUNvbnNpc3RlbmN5Q2hlY2soZSkpKS5uZXh0KCgoKSA9PiBuLmRvY3VtZW50T3ZlcmxheUNhY2hlLnJlbW92ZU92ZXJsYXlzRm9yQmF0Y2hJZChlLCByLCB0LmJhdGNoLmJhdGNoSWQpKSkubmV4dCgoKCkgPT4gbi5sb2NhbERvY3VtZW50cy5yZWNhbGN1bGF0ZUFuZFNhdmVPdmVybGF5c0ZvckRvY3VtZW50S2V5cyhlLCBmdW5jdGlvbiBfX1BSSVZBVEVfZ2V0S2V5c1dpdGhUcmFuc2Zvcm1SZXN1bHRzKGUpIHtcbiAgICAgICAgICAgIGxldCB0ID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCk7XG4gICAgICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IGUubXV0YXRpb25SZXN1bHRzLmxlbmd0aDsgKytuKSB7XG4gICAgICAgICAgICAgICAgZS5tdXRhdGlvblJlc3VsdHNbbl0udHJhbnNmb3JtUmVzdWx0cy5sZW5ndGggPiAwICYmICh0ID0gdC5hZGQoZS5iYXRjaC5tdXRhdGlvbnNbbl0ua2V5KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIFJlbW92ZXMgbXV0YXRpb25zIGZyb20gdGhlIE11dGF0aW9uUXVldWUgZm9yIHRoZSBzcGVjaWZpZWQgYmF0Y2g7XG4gKiBMb2NhbERvY3VtZW50cyB3aWxsIGJlIHJlY2FsY3VsYXRlZC5cbiAqXG4gKiBAcmV0dXJucyBUaGUgcmVzdWx0aW5nIG1vZGlmaWVkIGRvY3VtZW50cy5cbiAqLyAodCkpKSkubmV4dCgoKCkgPT4gbi5sb2NhbERvY3VtZW50cy5nZXREb2N1bWVudHMoZSwgcikpKTtcbiAgICB9KSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgbGFzdCBjb25zaXN0ZW50IHNuYXBzaG90IHByb2Nlc3NlZCAodXNlZCBieSB0aGUgUmVtb3RlU3RvcmUgdG9cbiAqIGRldGVybWluZSB3aGV0aGVyIHRvIGJ1ZmZlciBpbmNvbWluZyBzbmFwc2hvdHMgZnJvbSB0aGUgYmFja2VuZCkuXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlR2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbihlKSB7XG4gICAgY29uc3QgdCA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgcmV0dXJuIHQucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgbGFzdCByZW1vdGUgc25hcHNob3QgdmVyc2lvblwiLCBcInJlYWRvbmx5XCIsIChlID0+IHQuUGkuZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbihlKSkpO1xufVxuXG4vKipcbiAqIFVwZGF0ZXMgdGhlIFwiZ3JvdW5kLXN0YXRlXCIgKHJlbW90ZSkgZG9jdW1lbnRzLiBXZSBhc3N1bWUgdGhhdCB0aGUgcmVtb3RlXG4gKiBldmVudCByZWZsZWN0cyBhbnkgd3JpdGUgYmF0Y2hlcyB0aGF0IGhhdmUgYmVlbiBhY2tub3dsZWRnZWQgb3IgcmVqZWN0ZWRcbiAqIChpLmUuIHdlIGRvIG5vdCByZS1hcHBseSBsb2NhbCBtdXRhdGlvbnMgdG8gdXBkYXRlcyBmcm9tIHRoaXMgZXZlbnQpLlxuICpcbiAqIExvY2FsRG9jdW1lbnRzIGFyZSByZS1jYWxjdWxhdGVkIGlmIHRoZXJlIGFyZSByZW1haW5pbmcgbXV0YXRpb25zIGluIHRoZVxuICogcXVldWUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVBcHBseVJlbW90ZUV2ZW50VG9Mb2NhbENhY2hlKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgciA9IHQuc25hcHNob3RWZXJzaW9uO1xuICAgIGxldCBpID0gbi5NcztcbiAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkFwcGx5IHJlbW90ZSBldmVudFwiLCBcInJlYWR3cml0ZS1wcmltYXJ5XCIsIChlID0+IHtcbiAgICAgICAgY29uc3QgcyA9IG4uTnMubmV3Q2hhbmdlQnVmZmVyKHtcbiAgICAgICAgICAgIHRyYWNrUmVtb3ZhbHM6ICEwXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBSZXNldCBuZXdUYXJnZXREYXRhQnlUYXJnZXRNYXAgaW4gY2FzZSB0aGlzIHRyYW5zYWN0aW9uIGdldHMgcmUtcnVuLlxuICAgICAgICAgICAgICAgIGkgPSBuLk1zO1xuICAgICAgICBjb25zdCBvID0gW107XG4gICAgICAgIHQudGFyZ2V0Q2hhbmdlcy5mb3JFYWNoKCgocywgXykgPT4ge1xuICAgICAgICAgICAgY29uc3QgYSA9IGkuZ2V0KF8pO1xuICAgICAgICAgICAgaWYgKCFhKSByZXR1cm47XG4gICAgICAgICAgICAvLyBPbmx5IHVwZGF0ZSB0aGUgcmVtb3RlIGtleXMgaWYgdGhlIHRhcmdldCBpcyBzdGlsbCBhY3RpdmUuIFRoaXNcbiAgICAgICAgICAgIC8vIGVuc3VyZXMgdGhhdCB3ZSBjYW4gcGVyc2lzdCB0aGUgdXBkYXRlZCB0YXJnZXQgZGF0YSBhbG9uZyB3aXRoXG4gICAgICAgICAgICAvLyB0aGUgdXBkYXRlZCBhc3NpZ25tZW50LlxuICAgICAgICAgICAgICAgICAgICAgICAgby5wdXNoKG4uUGkucmVtb3ZlTWF0Y2hpbmdLZXlzKGUsIHMucmVtb3ZlZERvY3VtZW50cywgXykubmV4dCgoKCkgPT4gbi5QaS5hZGRNYXRjaGluZ0tleXMoZSwgcy5hZGRlZERvY3VtZW50cywgXykpKSk7XG4gICAgICAgICAgICBsZXQgdSA9IGEud2l0aFNlcXVlbmNlTnVtYmVyKGUuY3VycmVudFNlcXVlbmNlTnVtYmVyKTtcbiAgICAgICAgICAgIG51bGwgIT09IHQudGFyZ2V0TWlzbWF0Y2hlcy5nZXQoXykgPyB1ID0gdS53aXRoUmVzdW1lVG9rZW4oQnl0ZVN0cmluZy5FTVBUWV9CWVRFX1NUUklORywgU25hcHNob3RWZXJzaW9uLm1pbigpKS53aXRoTGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbihTbmFwc2hvdFZlcnNpb24ubWluKCkpIDogcy5yZXN1bWVUb2tlbi5hcHByb3hpbWF0ZUJ5dGVTaXplKCkgPiAwICYmICh1ID0gdS53aXRoUmVzdW1lVG9rZW4ocy5yZXN1bWVUb2tlbiwgcikpLCBcbiAgICAgICAgICAgIGkgPSBpLmluc2VydChfLCB1KSwgXG4gICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHRhcmdldCBkYXRhIGlmIHRoZXJlIGFyZSB0YXJnZXQgY2hhbmdlcyAob3IgaWZcbiAgICAgICAgICAgIC8vIHN1ZmZpY2llbnQgdGltZSBoYXMgcGFzc2VkIHNpbmNlIHRoZSBsYXN0IHVwZGF0ZSkuXG4gICAgICAgICAgICAvKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgbmV3VGFyZ2V0RGF0YSBzaG91bGQgYmUgcGVyc2lzdGVkIGR1cmluZyBhbiB1cGRhdGUgb2ZcbiAqIGFuIGFjdGl2ZSB0YXJnZXQuIFRhcmdldERhdGEgc2hvdWxkIGFsd2F5cyBiZSBwZXJzaXN0ZWQgd2hlbiBhIHRhcmdldCBpc1xuICogYmVpbmcgcmVsZWFzZWQgYW5kIHNob3VsZCBub3QgY2FsbCB0aGlzIGZ1bmN0aW9uLlxuICpcbiAqIFdoaWxlIHRoZSB0YXJnZXQgaXMgYWN0aXZlLCBUYXJnZXREYXRhIHVwZGF0ZXMgY2FuIGJlIG9taXR0ZWQgd2hlbiBub3RoaW5nXG4gKiBhYm91dCB0aGUgdGFyZ2V0IGhhcyBjaGFuZ2VkIGV4Y2VwdCBtZXRhZGF0YSBsaWtlIHRoZSByZXN1bWUgdG9rZW4gb3JcbiAqIHNuYXBzaG90IHZlcnNpb24uIE9jY2FzaW9uYWxseSBpdCdzIHdvcnRoIHRoZSBleHRyYSB3cml0ZSB0byBwcmV2ZW50IHRoZXNlXG4gKiB2YWx1ZXMgZnJvbSBnZXR0aW5nIHRvbyBzdGFsZSBhZnRlciBhIGNyYXNoLCBidXQgdGhpcyBkb2Vzbid0IGhhdmUgdG8gYmVcbiAqIHRvbyBmcmVxdWVudC5cbiAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX3Nob3VsZFBlcnNpc3RUYXJnZXREYXRhKGUsIHQsIG4pIHtcbiAgICAgICAgICAgICAgICAvLyBBbHdheXMgcGVyc2lzdCB0YXJnZXQgZGF0YSBpZiB3ZSBkb24ndCBhbHJlYWR5IGhhdmUgYSByZXN1bWUgdG9rZW4uXG4gICAgICAgICAgICAgICAgaWYgKDAgPT09IGUucmVzdW1lVG9rZW4uYXBwcm94aW1hdGVCeXRlU2l6ZSgpKSByZXR1cm4gITA7XG4gICAgICAgICAgICAgICAgLy8gRG9uJ3QgYWxsb3cgcmVzdW1lIHRva2VuIGNoYW5nZXMgdG8gYmUgYnVmZmVyZWQgaW5kZWZpbml0ZWx5LiBUaGlzXG4gICAgICAgICAgICAgICAgLy8gYWxsb3dzIHVzIHRvIGJlIHJlYXNvbmFibHkgdXAtdG8tZGF0ZSBhZnRlciBhIGNyYXNoIGFuZCBhdm9pZHMgbmVlZGluZ1xuICAgICAgICAgICAgICAgIC8vIHRvIGxvb3Agb3ZlciBhbGwgYWN0aXZlIHF1ZXJpZXMgb24gc2h1dGRvd24uIEVzcGVjaWFsbHkgaW4gdGhlIGJyb3dzZXJcbiAgICAgICAgICAgICAgICAvLyB3ZSBtYXkgbm90IGdldCB0aW1lIHRvIGRvIGFueXRoaW5nIGludGVyZXN0aW5nIHdoaWxlIHRoZSBjdXJyZW50IHRhYiBpc1xuICAgICAgICAgICAgICAgIC8vIGNsb3NpbmcuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHIgPSB0LnNuYXBzaG90VmVyc2lvbi50b01pY3Jvc2Vjb25kcygpIC0gZS5zbmFwc2hvdFZlcnNpb24udG9NaWNyb3NlY29uZHMoKTtcbiAgICAgICAgICAgICAgICBpZiAociA+PSBLdCkgcmV0dXJuICEwO1xuICAgICAgICAgICAgICAgIC8vIE90aGVyd2lzZSBpZiB0aGUgb25seSB0aGluZyB0aGF0IGhhcyBjaGFuZ2VkIGFib3V0IGEgdGFyZ2V0IGlzIGl0cyByZXN1bWVcbiAgICAgICAgICAgICAgICAvLyB0b2tlbiBpdCdzIG5vdCB3b3J0aCBwZXJzaXN0aW5nLiBOb3RlIHRoYXQgdGhlIFJlbW90ZVN0b3JlIGtlZXBzIGFuXG4gICAgICAgICAgICAgICAgLy8gaW4tbWVtb3J5IHZpZXcgb2YgdGhlIGN1cnJlbnRseSBhY3RpdmUgdGFyZ2V0cyB3aGljaCBpbmNsdWRlcyB0aGUgY3VycmVudFxuICAgICAgICAgICAgICAgIC8vIHJlc3VtZSB0b2tlbiwgc28gc3RyZWFtIGZhaWx1cmUgb3IgdXNlciBjaGFuZ2VzIHdpbGwgc3RpbGwgdXNlIGFuXG4gICAgICAgICAgICAgICAgLy8gdXAtdG8tZGF0ZSByZXN1bWUgdG9rZW4gcmVnYXJkbGVzcyBvZiB3aGF0IHdlIGRvIGhlcmUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBuLmFkZGVkRG9jdW1lbnRzLnNpemUgKyBuLm1vZGlmaWVkRG9jdW1lbnRzLnNpemUgKyBuLnJlbW92ZWREb2N1bWVudHMuc2l6ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gaSA+IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIE5vdGlmaWVzIGxvY2FsIHN0b3JlIG9mIHRoZSBjaGFuZ2VkIHZpZXdzIHRvIGxvY2FsbHkgcGluIGRvY3VtZW50cy5cbiAqLyAoYSwgdSwgcykgJiYgby5wdXNoKG4uUGkudXBkYXRlVGFyZ2V0RGF0YShlLCB1KSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgbGV0IF8gPSBfX1BSSVZBVEVfbXV0YWJsZURvY3VtZW50TWFwKCksIGEgPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKTtcbiAgICAgICAgLy8gSEFDSzogVGhlIG9ubHkgcmVhc29uIHdlIGFsbG93IGEgbnVsbCBzbmFwc2hvdCB2ZXJzaW9uIGlzIHNvIHRoYXQgd2VcbiAgICAgICAgLy8gY2FuIHN5bnRoZXNpemUgcmVtb3RlIGV2ZW50cyB3aGVuIHdlIGdldCBwZXJtaXNzaW9uIGRlbmllZCBlcnJvcnMgd2hpbGVcbiAgICAgICAgLy8gdHJ5aW5nIHRvIHJlc29sdmUgdGhlIHN0YXRlIG9mIGEgbG9jYWxseSBjYWNoZWQgZG9jdW1lbnQgdGhhdCBpcyBpblxuICAgICAgICAvLyBsaW1iby5cbiAgICAgICAgaWYgKHQuZG9jdW1lbnRVcGRhdGVzLmZvckVhY2goKHIgPT4ge1xuICAgICAgICAgICAgdC5yZXNvbHZlZExpbWJvRG9jdW1lbnRzLmhhcyhyKSAmJiBvLnB1c2gobi5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS51cGRhdGVMaW1ib0RvY3VtZW50KGUsIHIpKTtcbiAgICAgICAgfSkpLCBcbiAgICAgICAgLy8gRWFjaCBsb29wIGl0ZXJhdGlvbiBvbmx5IGFmZmVjdHMgaXRzIFwib3duXCIgZG9jLCBzbyBpdCdzIHNhZmUgdG8gZ2V0IGFsbFxuICAgICAgICAvLyB0aGUgcmVtb3RlIGRvY3VtZW50cyBpbiBhZHZhbmNlIGluIGEgc2luZ2xlIGNhbGwuXG4gICAgICAgIG8ucHVzaChfX1BSSVZBVEVfcG9wdWxhdGVEb2N1bWVudENoYW5nZUJ1ZmZlcihlLCBzLCB0LmRvY3VtZW50VXBkYXRlcykubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBfID0gZS5rcywgYSA9IGUucXM7XG4gICAgICAgIH0pKSksICFyLmlzRXF1YWwoU25hcHNob3RWZXJzaW9uLm1pbigpKSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IG4uUGkuZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbihlKS5uZXh0KCh0ID0+IG4uUGkuc2V0VGFyZ2V0c01ldGFkYXRhKGUsIGUuY3VycmVudFNlcXVlbmNlTnVtYmVyLCByKSkpO1xuICAgICAgICAgICAgby5wdXNoKHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihvKS5uZXh0KCgoKSA9PiBzLmFwcGx5KGUpKSkubmV4dCgoKCkgPT4gbi5sb2NhbERvY3VtZW50cy5nZXRMb2NhbFZpZXdPZkRvY3VtZW50cyhlLCBfLCBhKSkpLm5leHQoKCgpID0+IF8pKTtcbiAgICB9KSkudGhlbigoZSA9PiAobi5NcyA9IGksIGUpKSk7XG59XG5cbi8qKlxuICogUG9wdWxhdGVzIGRvY3VtZW50IGNoYW5nZSBidWZmZXIgd2l0aCBkb2N1bWVudHMgZnJvbSBiYWNrZW5kIG9yIGEgYnVuZGxlLlxuICogUmV0dXJucyB0aGUgZG9jdW1lbnQgY2hhbmdlcyByZXN1bHRpbmcgZnJvbSBhcHBseWluZyB0aG9zZSBkb2N1bWVudHMsIGFuZFxuICogYWxzbyBhIHNldCBvZiBkb2N1bWVudHMgd2hvc2UgZXhpc3RlbmNlIHN0YXRlIGFyZSBjaGFuZ2VkIGFzIGEgcmVzdWx0LlxuICpcbiAqIEBwYXJhbSB0eG4gLSBUcmFuc2FjdGlvbiB0byB1c2UgdG8gcmVhZCBleGlzdGluZyBkb2N1bWVudHMgZnJvbSBzdG9yYWdlLlxuICogQHBhcmFtIGRvY3VtZW50QnVmZmVyIC0gRG9jdW1lbnQgYnVmZmVyIHRvIGNvbGxlY3QgdGhlIHJlc3VsdGVkIGNoYW5nZXMgdG8gYmVcbiAqICAgICAgICBhcHBsaWVkIHRvIHN0b3JhZ2UuXG4gKiBAcGFyYW0gZG9jdW1lbnRzIC0gRG9jdW1lbnRzIHRvIGJlIGFwcGxpZWQuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3BvcHVsYXRlRG9jdW1lbnRDaGFuZ2VCdWZmZXIoZSwgdCwgbikge1xuICAgIGxldCByID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCksIGkgPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKTtcbiAgICByZXR1cm4gbi5mb3JFYWNoKChlID0+IHIgPSByLmFkZChlKSkpLCB0LmdldEVudHJpZXMoZSwgcikubmV4dCgoZSA9PiB7XG4gICAgICAgIGxldCByID0gX19QUklWQVRFX211dGFibGVEb2N1bWVudE1hcCgpO1xuICAgICAgICByZXR1cm4gbi5mb3JFYWNoKCgobiwgcykgPT4ge1xuICAgICAgICAgICAgY29uc3QgbyA9IGUuZ2V0KG4pO1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgc2VlIGlmIHRoZXJlIGlzIGEgZXhpc3RlbmNlIHN0YXRlIGNoYW5nZSBmb3IgdGhpcyBkb2N1bWVudC5cbiAgICAgICAgICAgICAgICAgICAgICAgIHMuaXNGb3VuZERvY3VtZW50KCkgIT09IG8uaXNGb3VuZERvY3VtZW50KCkgJiYgKGkgPSBpLmFkZChuKSksIFxuICAgICAgICAgICAgLy8gTm90ZTogVGhlIG9yZGVyIG9mIHRoZSBzdGVwcyBiZWxvdyBpcyBpbXBvcnRhbnQsIHNpbmNlIHdlIHdhbnRcbiAgICAgICAgICAgIC8vIHRvIGVuc3VyZSB0aGF0IHJlamVjdGVkIGxpbWJvIHJlc29sdXRpb25zICh3aGljaCBmYWJyaWNhdGVcbiAgICAgICAgICAgIC8vIE5vRG9jdW1lbnRzIHdpdGggU25hcHNob3RWZXJzaW9uLm1pbigpKSBuZXZlciBhZGQgZG9jdW1lbnRzIHRvXG4gICAgICAgICAgICAvLyBjYWNoZS5cbiAgICAgICAgICAgIHMuaXNOb0RvY3VtZW50KCkgJiYgcy52ZXJzaW9uLmlzRXF1YWwoU25hcHNob3RWZXJzaW9uLm1pbigpKSA/IChcbiAgICAgICAgICAgIC8vIE5vRG9jdW1lbnRzIHdpdGggU25hcHNob3RWZXJzaW9uLm1pbigpIGFyZSB1c2VkIGluIG1hbnVmYWN0dXJlZFxuICAgICAgICAgICAgLy8gZXZlbnRzLiBXZSByZW1vdmUgdGhlc2UgZG9jdW1lbnRzIGZyb20gY2FjaGUgc2luY2Ugd2UgbG9zdFxuICAgICAgICAgICAgLy8gYWNjZXNzLlxuICAgICAgICAgICAgdC5yZW1vdmVFbnRyeShuLCBzLnJlYWRUaW1lKSwgciA9IHIuaW5zZXJ0KG4sIHMpKSA6ICFvLmlzVmFsaWREb2N1bWVudCgpIHx8IHMudmVyc2lvbi5jb21wYXJlVG8oby52ZXJzaW9uKSA+IDAgfHwgMCA9PT0gcy52ZXJzaW9uLmNvbXBhcmVUbyhvLnZlcnNpb24pICYmIG8uaGFzUGVuZGluZ1dyaXRlcyA/ICh0LmFkZEVudHJ5KHMpLCBcbiAgICAgICAgICAgIHIgPSByLmluc2VydChuLCBzKSkgOiBfX1BSSVZBVEVfbG9nRGVidWcoVXQsIFwiSWdub3Jpbmcgb3V0ZGF0ZWQgd2F0Y2ggdXBkYXRlIGZvciBcIiwgbiwgXCIuIEN1cnJlbnQgdmVyc2lvbjpcIiwgby52ZXJzaW9uLCBcIiBXYXRjaCB2ZXJzaW9uOlwiLCBzLnZlcnNpb24pO1xuICAgICAgICB9KSksIHtcbiAgICAgICAgICAgIGtzOiByLFxuICAgICAgICAgICAgcXM6IGlcbiAgICAgICAgfTtcbiAgICB9KSk7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgbXV0YXRpb24gYmF0Y2ggYWZ0ZXIgdGhlIHBhc3NlZCBpbiBiYXRjaElkIGluIHRoZSBtdXRhdGlvbiBxdWV1ZVxuICogb3IgbnVsbCBpZiBlbXB0eS5cbiAqIEBwYXJhbSBhZnRlckJhdGNoSWQgLSBJZiBwcm92aWRlZCwgdGhlIGJhdGNoIHRvIHNlYXJjaCBhZnRlci5cbiAqIEByZXR1cm5zIFRoZSBuZXh0IG11dGF0aW9uIG9yIG51bGwgaWYgdGhlcmUgd2Fzbid0IG9uZS5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVHZXROZXh0TXV0YXRpb25CYXRjaChlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgbmV4dCBtdXRhdGlvbiBiYXRjaFwiLCBcInJlYWRvbmx5XCIsIChlID0+ICh2b2lkIDAgPT09IHQgJiYgKHQgPSBqKSwgXG4gICAgbi5tdXRhdGlvblF1ZXVlLmdldE5leHRNdXRhdGlvbkJhdGNoQWZ0ZXJCYXRjaElkKGUsIHQpKSkpO1xufVxuXG4vKipcbiAqIFJlYWRzIHRoZSBjdXJyZW50IHZhbHVlIG9mIGEgRG9jdW1lbnQgd2l0aCBhIGdpdmVuIGtleSBvciBudWxsIGlmIG5vdFxuICogZm91bmQgLSB1c2VkIGZvciB0ZXN0aW5nLlxuICovXG4vKipcbiAqIEFzc2lnbnMgdGhlIGdpdmVuIHRhcmdldCBhbiBpbnRlcm5hbCBJRCBzbyB0aGF0IGl0cyByZXN1bHRzIGNhbiBiZSBwaW5uZWQgc29cbiAqIHRoZXkgZG9uJ3QgZ2V0IEdDJ2QuIEEgdGFyZ2V0IG11c3QgYmUgYWxsb2NhdGVkIGluIHRoZSBsb2NhbCBzdG9yZSBiZWZvcmVcbiAqIHRoZSBzdG9yZSBjYW4gYmUgdXNlZCB0byBtYW5hZ2UgaXRzIHZpZXcuXG4gKlxuICogQWxsb2NhdGluZyBhbiBhbHJlYWR5IGFsbG9jYXRlZCBgVGFyZ2V0YCB3aWxsIHJldHVybiB0aGUgZXhpc3RpbmcgYFRhcmdldERhdGFgXG4gKiBmb3IgdGhhdCBgVGFyZ2V0YC5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVBbGxvY2F0ZVRhcmdldChlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJBbGxvY2F0ZSB0YXJnZXRcIiwgXCJyZWFkd3JpdGVcIiwgKGUgPT4ge1xuICAgICAgICBsZXQgcjtcbiAgICAgICAgcmV0dXJuIG4uUGkuZ2V0VGFyZ2V0RGF0YShlLCB0KS5uZXh0KChpID0+IGkgPyAoXG4gICAgICAgIC8vIFRoaXMgdGFyZ2V0IGhhcyBiZWVuIGxpc3RlbmVkIHRvIHByZXZpb3VzbHksIHNvIHJldXNlIHRoZVxuICAgICAgICAvLyBwcmV2aW91cyB0YXJnZXRJRC5cbiAgICAgICAgLy8gVE9ETyhtY2cpOiBmcmVzaGVuIGxhc3QgYWNjZXNzZWQgZGF0ZT9cbiAgICAgICAgciA9IGksIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHIpKSA6IG4uUGkuYWxsb2NhdGVUYXJnZXRJZChlKS5uZXh0KChpID0+IChyID0gbmV3IFRhcmdldERhdGEodCwgaSwgXCJUYXJnZXRQdXJwb3NlTGlzdGVuXCIgLyogVGFyZ2V0UHVycG9zZS5MaXN0ZW4gKi8gLCBlLmN1cnJlbnRTZXF1ZW5jZU51bWJlciksIFxuICAgICAgICBuLlBpLmFkZFRhcmdldERhdGEoZSwgcikubmV4dCgoKCkgPT4gcikpKSkpKSk7XG4gICAgfSkpLnRoZW4oKGUgPT4ge1xuICAgICAgICAvLyBJZiBNdWx0aS1UYWIgaXMgZW5hYmxlZCwgdGhlIGV4aXN0aW5nIHRhcmdldCBkYXRhIG1heSBiZSBuZXdlciB0aGFuXG4gICAgICAgIC8vIHRoZSBpbi1tZW1vcnkgZGF0YVxuICAgICAgICBjb25zdCByID0gbi5Ncy5nZXQoZS50YXJnZXRJZCk7XG4gICAgICAgIHJldHVybiAobnVsbCA9PT0gciB8fCBlLnNuYXBzaG90VmVyc2lvbi5jb21wYXJlVG8oci5zbmFwc2hvdFZlcnNpb24pID4gMCkgJiYgKG4uTXMgPSBuLk1zLmluc2VydChlLnRhcmdldElkLCBlKSwgXG4gICAgICAgIG4ueHMuc2V0KHQsIGUudGFyZ2V0SWQpKSwgZTtcbiAgICB9KSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgVGFyZ2V0RGF0YSBhcyBzZWVuIGJ5IHRoZSBMb2NhbFN0b3JlLCBpbmNsdWRpbmcgdXBkYXRlcyB0aGF0IG1heVxuICogaGF2ZSBub3QgeWV0IGJlZW4gcGVyc2lzdGVkIHRvIHRoZSBUYXJnZXRDYWNoZS5cbiAqL1xuLy8gVmlzaWJsZSBmb3IgdGVzdGluZy5cbi8qKlxuICogVW5waW5zIGFsbCB0aGUgZG9jdW1lbnRzIGFzc29jaWF0ZWQgd2l0aCB0aGUgZ2l2ZW4gdGFyZ2V0LiBJZlxuICogYGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhYCBpcyBzZXQgdG8gZmFsc2UgYW5kIEVhZ2VyIEdDIGVuYWJsZWQsIHRoZSBtZXRob2RcbiAqIGRpcmVjdGx5IHJlbW92ZXMgdGhlIGFzc29jaWF0ZWQgdGFyZ2V0IGRhdGEgZnJvbSB0aGUgdGFyZ2V0IGNhY2hlLlxuICpcbiAqIFJlbGVhc2luZyBhIG5vbi1leGlzdGluZyBgVGFyZ2V0YCBpcyBhIG5vLW9wLlxuICovXG4vLyBQT1JUSU5HIE5PVEU6IGBrZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YWAgaXMgbXVsdGktdGFiIG9ubHkuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZVJlbGVhc2VUYXJnZXQoZSwgdCwgbikge1xuICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCBpID0gci5Ncy5nZXQodCksIHMgPSBuID8gXCJyZWFkd3JpdGVcIiA6IFwicmVhZHdyaXRlLXByaW1hcnlcIjtcbiAgICB0cnkge1xuICAgICAgICBuIHx8IGF3YWl0IHIucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJSZWxlYXNlIHRhcmdldFwiLCBzLCAoZSA9PiByLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLnJlbW92ZVRhcmdldChlLCBpKSkpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgaWYgKCFfX1BSSVZBVEVfaXNJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yKGUpKSB0aHJvdyBlO1xuICAgICAgICAvLyBBbGwgYHJlbGVhc2VUYXJnZXRgIGRvZXMgaXMgcmVjb3JkIHRoZSBmaW5hbCBtZXRhZGF0YSBzdGF0ZSBmb3IgdGhlXG4gICAgICAgIC8vIHRhcmdldCwgYnV0IHdlJ3ZlIGJlZW4gcmVjb3JkaW5nIHRoaXMgcGVyaW9kaWNhbGx5IGR1cmluZyB0YXJnZXRcbiAgICAgICAgLy8gYWN0aXZpdHkuIElmIHdlIGxvc2UgdGhpcyB3cml0ZSB0aGlzIGNvdWxkIGNhdXNlIGEgdmVyeSBzbGlnaHRcbiAgICAgICAgLy8gZGlmZmVyZW5jZSBpbiB0aGUgb3JkZXIgb2YgdGFyZ2V0IGRlbGV0aW9uIGR1cmluZyBHQywgYnV0IHdlXG4gICAgICAgIC8vIGRvbid0IGRlZmluZSBleGFjdCBMUlUgc2VtYW50aWNzIHNvIHRoaXMgaXMgYWNjZXB0YWJsZS5cbiAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFV0LCBgRmFpbGVkIHRvIHVwZGF0ZSBzZXF1ZW5jZSBudW1iZXJzIGZvciB0YXJnZXQgJHt0fTogJHtlfWApO1xuICAgIH1cbiAgICByLk1zID0gci5Ncy5yZW1vdmUodCksIHIueHMuZGVsZXRlKGkudGFyZ2V0KTtcbn1cblxuLyoqXG4gKiBSdW5zIHRoZSBzcGVjaWZpZWQgcXVlcnkgYWdhaW5zdCB0aGUgbG9jYWwgc3RvcmUgYW5kIHJldHVybnMgdGhlIHJlc3VsdHMsXG4gKiBwb3RlbnRpYWxseSB0YWtpbmcgYWR2YW50YWdlIG9mIHF1ZXJ5IGRhdGEgZnJvbSBwcmV2aW91cyBleGVjdXRpb25zIChzdWNoXG4gKiBhcyB0aGUgc2V0IG9mIHJlbW90ZSBrZXlzKS5cbiAqXG4gKiBAcGFyYW0gdXNlUHJldmlvdXNSZXN1bHRzIC0gV2hldGhlciByZXN1bHRzIGZyb20gcHJldmlvdXMgZXhlY3V0aW9ucyBjYW5cbiAqIGJlIHVzZWQgdG8gb3B0aW1pemUgdGhpcyBxdWVyeSBleGVjdXRpb24uXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVFeGVjdXRlUXVlcnkoZSwgdCwgbikge1xuICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIGxldCBpID0gU25hcHNob3RWZXJzaW9uLm1pbigpLCBzID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCk7XG4gICAgcmV0dXJuIHIucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJFeGVjdXRlIHF1ZXJ5XCIsIFwicmVhZHdyaXRlXCIsICgvLyBVc2UgcmVhZHdyaXRlIGluc3RlYWQgb2YgcmVhZG9ubHkgc28gaW5kZXhlcyBjYW4gYmUgY3JlYXRlZFxuICAgIC8vIFVzZSByZWFkd3JpdGUgaW5zdGVhZCBvZiByZWFkb25seSBzbyBpbmRleGVzIGNhbiBiZSBjcmVhdGVkXG4gICAgZSA9PiBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZUdldFRhcmdldERhdGEoZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgaSA9IHIueHMuZ2V0KG4pO1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSBpID8gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoci5Ncy5nZXQoaSkpIDogci5QaS5nZXRUYXJnZXREYXRhKHQsIG4pO1xuICAgIH0ociwgZSwgX19QUklWQVRFX3F1ZXJ5VG9UYXJnZXQodCkpLm5leHQoKHQgPT4ge1xuICAgICAgICBpZiAodCkgcmV0dXJuIGkgPSB0Lmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24sIHIuUGkuZ2V0TWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQoZSwgdC50YXJnZXRJZCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBzID0gZTtcbiAgICAgICAgfSkpO1xuICAgIH0pKS5uZXh0KCgoKSA9PiByLkZzLmdldERvY3VtZW50c01hdGNoaW5nUXVlcnkoZSwgdCwgbiA/IGkgOiBTbmFwc2hvdFZlcnNpb24ubWluKCksIG4gPyBzIDogX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCkpKSkubmV4dCgoZSA9PiAoX19QUklWQVRFX3NldE1heFJlYWRUaW1lKHIsIF9fUFJJVkFURV9xdWVyeUNvbGxlY3Rpb25Hcm91cCh0KSwgZSksIFxuICAgIHtcbiAgICAgICAgZG9jdW1lbnRzOiBlLFxuICAgICAgICBRczogc1xuICAgIH0pKSkpKTtcbn1cblxuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlR2V0Q2FjaGVkVGFyZ2V0KGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgciA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3Qobi5QaSksIGkgPSBuLk1zLmdldCh0KTtcbiAgICByZXR1cm4gaSA/IFByb21pc2UucmVzb2x2ZShpLnRhcmdldCkgOiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiR2V0IHRhcmdldCBkYXRhXCIsIFwicmVhZG9ubHlcIiwgKGUgPT4gci5BdChlLCB0KS5uZXh0KChlID0+IGUgPyBlLnRhcmdldCA6IG51bGwpKSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHNldCBvZiBkb2N1bWVudHMgdGhhdCBoYXZlIGJlZW4gdXBkYXRlZCBzaW5jZSB0aGUgbGFzdCBjYWxsLlxuICogSWYgdGhpcyBpcyB0aGUgZmlyc3QgY2FsbCwgcmV0dXJucyB0aGUgc2V0IG9mIGNoYW5nZXMgc2luY2UgY2xpZW50XG4gKiBpbml0aWFsaXphdGlvbi4gRnVydGhlciBpbnZvY2F0aW9ucyB3aWxsIHJldHVybiBkb2N1bWVudCB0aGF0IGhhdmUgY2hhbmdlZFxuICogc2luY2UgdGhlIHByaW9yIGNhbGwuXG4gKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5mdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZUdldE5ld0RvY3VtZW50Q2hhbmdlcyhlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIHIgPSBuLk9zLmdldCh0KSB8fCBTbmFwc2hvdFZlcnNpb24ubWluKCk7XG4gICAgLy8gR2V0IHRoZSBjdXJyZW50IG1heGltdW0gcmVhZCB0aW1lIGZvciB0aGUgY29sbGVjdGlvbi4gVGhpcyBzaG91bGQgYWx3YXlzXG4gICAgLy8gZXhpc3QsIGJ1dCB0byByZWR1Y2UgdGhlIGNoYW5jZSBmb3IgcmVncmVzc2lvbnMgd2UgZGVmYXVsdCB0b1xuICAgIC8vIFNuYXBzaG90VmVyc2lvbi5NaW4oKVxuICAgIC8vIFRPRE8oaW5kZXhpbmcpOiBDb25zaWRlciByZW1vdmluZyB0aGUgZGVmYXVsdCB2YWx1ZS5cbiAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgbmV3IGRvY3VtZW50IGNoYW5nZXNcIiwgXCJyZWFkb25seVwiLCAoZSA9PiBuLk5zLmdldEFsbEZyb21Db2xsZWN0aW9uR3JvdXAoZSwgdCwgX19QUklWQVRFX25ld0luZGV4T2Zmc2V0U3VjY2Vzc29yRnJvbVJlYWRUaW1lKHIsIFUpLCBcbiAgICAvKiBsaW1pdD0gKi8gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpKSkudGhlbigoZSA9PiAoX19QUklWQVRFX3NldE1heFJlYWRUaW1lKG4sIHQsIGUpLCBcbiAgICBlKSkpO1xufVxuXG4vKiogU2V0cyB0aGUgY29sbGVjdGlvbiBncm91cCdzIG1heGltdW0gcmVhZCB0aW1lIGZyb20gdGhlIGdpdmVuIGRvY3VtZW50cy4gKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5mdW5jdGlvbiBfX1BSSVZBVEVfc2V0TWF4UmVhZFRpbWUoZSwgdCwgbikge1xuICAgIGxldCByID0gZS5Pcy5nZXQodCkgfHwgU25hcHNob3RWZXJzaW9uLm1pbigpO1xuICAgIG4uZm9yRWFjaCgoKGUsIHQpID0+IHtcbiAgICAgICAgdC5yZWFkVGltZS5jb21wYXJlVG8ocikgPiAwICYmIChyID0gdC5yZWFkVGltZSk7XG4gICAgfSkpLCBlLk9zLnNldCh0LCByKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHRhcmdldCB1c2luZyB0aGUgZ2l2ZW4gYnVuZGxlIG5hbWUsIHdoaWNoIHdpbGwgYmUgdXNlZCB0b1xuICogaG9sZCB0aGUga2V5cyBvZiBhbGwgZG9jdW1lbnRzIGZyb20gdGhlIGJ1bmRsZSBpbiBxdWVyeS1kb2N1bWVudCBtYXBwaW5ncy5cbiAqIFRoaXMgZW5zdXJlcyB0aGF0IHRoZSBsb2FkZWQgZG9jdW1lbnRzIGRvIG5vdCBnZXQgZ2FyYmFnZSBjb2xsZWN0ZWRcbiAqIHJpZ2h0IGF3YXkuXG4gKi9cbi8qKlxuICogQXBwbGllcyB0aGUgZG9jdW1lbnRzIGZyb20gYSBidW5kbGUgdG8gdGhlIFwiZ3JvdW5kLXN0YXRlXCIgKHJlbW90ZSlcbiAqIGRvY3VtZW50cy5cbiAqXG4gKiBMb2NhbERvY3VtZW50cyBhcmUgcmUtY2FsY3VsYXRlZCBpZiB0aGVyZSBhcmUgcmVtYWluaW5nIG11dGF0aW9ucyBpbiB0aGVcbiAqIHF1ZXVlLlxuICovXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZUFwcGx5QnVuZGxlZERvY3VtZW50cyhlLCB0LCBuLCByKSB7XG4gICAgY29uc3QgaSA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgbGV0IHMgPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKSwgbyA9IF9fUFJJVkFURV9tdXRhYmxlRG9jdW1lbnRNYXAoKTtcbiAgICBmb3IgKGNvbnN0IGUgb2Ygbikge1xuICAgICAgICBjb25zdCBuID0gdC4kcyhlLm1ldGFkYXRhLm5hbWUpO1xuICAgICAgICBlLmRvY3VtZW50ICYmIChzID0gcy5hZGQobikpO1xuICAgICAgICBjb25zdCByID0gdC5VcyhlKTtcbiAgICAgICAgci5zZXRSZWFkVGltZSh0LktzKGUubWV0YWRhdGEucmVhZFRpbWUpKSwgbyA9IG8uaW5zZXJ0KG4sIHIpO1xuICAgIH1cbiAgICBjb25zdCBfID0gaS5Ocy5uZXdDaGFuZ2VCdWZmZXIoe1xuICAgICAgICB0cmFja1JlbW92YWxzOiAhMFxuICAgIH0pLCBhID0gYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVBbGxvY2F0ZVRhcmdldChpLCBmdW5jdGlvbiBfX1BSSVZBVEVfdW1icmVsbGFUYXJnZXQoZSkge1xuICAgICAgICAvLyBJdCBpcyBPSyB0aGF0IHRoZSBwYXRoIHVzZWQgZm9yIHRoZSBxdWVyeSBpcyBub3QgdmFsaWQsIGJlY2F1c2UgdGhpcyB3aWxsXG4gICAgICAgIC8vIG5vdCBiZSByZWFkIGFuZCBxdWVyaWVkLlxuICAgICAgICByZXR1cm4gX19QUklWQVRFX3F1ZXJ5VG9UYXJnZXQoX19QUklWQVRFX25ld1F1ZXJ5Rm9yUGF0aChSZXNvdXJjZVBhdGguZnJvbVN0cmluZyhgX19idW5kbGVfXy9kb2NzLyR7ZX1gKSkpO1xuICAgIH0ocikpO1xuICAgIC8vIEFsbG9jYXRlcyBhIHRhcmdldCB0byBob2xkIGFsbCBkb2N1bWVudCBrZXlzIGZyb20gdGhlIGJ1bmRsZSwgc3VjaCB0aGF0XG4gICAgLy8gdGhleSB3aWxsIG5vdCBnZXQgZ2FyYmFnZSBjb2xsZWN0ZWQgcmlnaHQgYXdheS5cbiAgICAgICAgcmV0dXJuIGkucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJBcHBseSBidW5kbGUgZG9jdW1lbnRzXCIsIFwicmVhZHdyaXRlXCIsIChlID0+IF9fUFJJVkFURV9wb3B1bGF0ZURvY3VtZW50Q2hhbmdlQnVmZmVyKGUsIF8sIG8pLm5leHQoKHQgPT4gKF8uYXBwbHkoZSksIFxuICAgIHQpKSkubmV4dCgodCA9PiBpLlBpLnJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKGUsIGEudGFyZ2V0SWQpLm5leHQoKCgpID0+IGkuUGkuYWRkTWF0Y2hpbmdLZXlzKGUsIHMsIGEudGFyZ2V0SWQpKSkubmV4dCgoKCkgPT4gaS5sb2NhbERvY3VtZW50cy5nZXRMb2NhbFZpZXdPZkRvY3VtZW50cyhlLCB0LmtzLCB0LnFzKSkpLm5leHQoKCgpID0+IHQua3MpKSkpKSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHByb21pc2Ugb2YgYSBib29sZWFuIHRvIGluZGljYXRlIGlmIHRoZSBnaXZlbiBidW5kbGUgaGFzIGFscmVhZHlcbiAqIGJlZW4gbG9hZGVkIGFuZCB0aGUgY3JlYXRlIHRpbWUgaXMgbmV3ZXIgdGhhbiB0aGUgY3VycmVudCBsb2FkaW5nIGJ1bmRsZS5cbiAqL1xuLyoqXG4gKiBTYXZlcyB0aGUgZ2l2ZW4gYE5hbWVkUXVlcnlgIHRvIGxvY2FsIHBlcnNpc3RlbmNlLlxuICovXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZVNhdmVOYW1lZFF1ZXJ5KGUsIHQsIG4gPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKSkge1xuICAgIC8vIEFsbG9jYXRlIGEgdGFyZ2V0IGZvciB0aGUgbmFtZWQgcXVlcnkgc3VjaCB0aGF0IGl0IGNhbiBiZSByZXN1bWVkXG4gICAgLy8gZnJvbSBhc3NvY2lhdGVkIHJlYWQgdGltZSBpZiB1c2VycyB1c2UgaXQgdG8gbGlzdGVuLlxuICAgIC8vIE5PVEU6IHRoaXMgYWxzbyBtZWFucyBpZiBubyBjb3JyZXNwb25kaW5nIHRhcmdldCBleGlzdHMsIHRoZSBuZXcgdGFyZ2V0XG4gICAgLy8gd2lsbCByZW1haW4gYWN0aXZlIGFuZCB3aWxsIG5vdCBnZXQgY29sbGVjdGVkLCB1bmxlc3MgdXNlcnMgaGFwcGVuIHRvXG4gICAgLy8gdW5saXN0ZW4gdGhlIHF1ZXJ5IHNvbWVob3cuXG4gICAgY29uc3QgciA9IGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlQWxsb2NhdGVUYXJnZXQoZSwgX19QUklWQVRFX3F1ZXJ5VG9UYXJnZXQoX19QUklWQVRFX2Zyb21CdW5kbGVkUXVlcnkodC5idW5kbGVkUXVlcnkpKSksIGkgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIHJldHVybiBpLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiU2F2ZSBuYW1lZCBxdWVyeVwiLCBcInJlYWR3cml0ZVwiLCAoZSA9PiB7XG4gICAgICAgIGNvbnN0IHMgPSBfX1BSSVZBVEVfZnJvbVZlcnNpb24odC5yZWFkVGltZSk7XG4gICAgICAgIC8vIFNpbXBseSBzYXZlIHRoZSBxdWVyeSBpdHNlbGYgaWYgaXQgaXMgb2xkZXIgdGhhbiB3aGF0IHRoZSBTREsgYWxyZWFkeVxuICAgICAgICAvLyBoYXMuXG4gICAgICAgICAgICAgICAgaWYgKHIuc25hcHNob3RWZXJzaW9uLmNvbXBhcmVUbyhzKSA+PSAwKSByZXR1cm4gaS5JaS5zYXZlTmFtZWRRdWVyeShlLCB0KTtcbiAgICAgICAgLy8gVXBkYXRlIGV4aXN0aW5nIHRhcmdldCBkYXRhIGJlY2F1c2UgdGhlIHF1ZXJ5IGZyb20gdGhlIGJ1bmRsZSBpcyBuZXdlci5cbiAgICAgICAgICAgICAgICBjb25zdCBvID0gci53aXRoUmVzdW1lVG9rZW4oQnl0ZVN0cmluZy5FTVBUWV9CWVRFX1NUUklORywgcyk7XG4gICAgICAgIHJldHVybiBpLk1zID0gaS5Ncy5pbnNlcnQoby50YXJnZXRJZCwgbyksIGkuUGkudXBkYXRlVGFyZ2V0RGF0YShlLCBvKS5uZXh0KCgoKSA9PiBpLlBpLnJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKGUsIHIudGFyZ2V0SWQpKSkubmV4dCgoKCkgPT4gaS5QaS5hZGRNYXRjaGluZ0tleXMoZSwgbiwgci50YXJnZXRJZCkpKS5uZXh0KCgoKSA9PiBpLklpLnNhdmVOYW1lZFF1ZXJ5KGUsIHQpKSk7XG4gICAgfSkpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gVGhlIGZvcm1hdCBvZiB0aGUgTG9jYWxTdG9yYWdlIGtleSB0aGF0IHN0b3JlcyB0aGUgY2xpZW50IHN0YXRlIGlzOlxuLy8gICAgIGZpcmVzdG9yZV9jbGllbnRzXzxwZXJzaXN0ZW5jZV9wcmVmaXg+XzxpbnN0YW5jZV9rZXk+XG5jb25zdCBXdCA9IFwiZmlyZXN0b3JlX2NsaWVudHNcIjtcblxuLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciBhIGNsaWVudCBzdGF0ZSBpbiBXZWJTdG9yYWdlICovIGZ1bmN0aW9uIGNyZWF0ZVdlYlN0b3JhZ2VDbGllbnRTdGF0ZUtleShlLCB0KSB7XG4gICAgcmV0dXJuIGAke1d0fV8ke2V9XyR7dH1gO1xufVxuXG4vLyBUaGUgZm9ybWF0IG9mIHRoZSBXZWJTdG9yYWdlIGtleSB0aGF0IHN0b3JlcyB0aGUgbXV0YXRpb24gc3RhdGUgaXM6XG4vLyAgICAgZmlyZXN0b3JlX211dGF0aW9uc188cGVyc2lzdGVuY2VfcHJlZml4Pl88YmF0Y2hfaWQ+XG4vLyAgICAgKGZvciB1bmF1dGhlbnRpY2F0ZWQgdXNlcnMpXG4vLyBvcjogZmlyZXN0b3JlX211dGF0aW9uc188cGVyc2lzdGVuY2VfcHJlZml4Pl88YmF0Y2hfaWQ+Xzx1c2VyX3VpZD5cblxuLy8gJ3VzZXJfdWlkJyBpcyBsYXN0IHRvIGF2b2lkIG5lZWRpbmcgdG8gZXNjYXBlICdfJyBjaGFyYWN0ZXJzIHRoYXQgaXQgbWlnaHRcbi8vIGNvbnRhaW4uXG5jb25zdCBHdCA9IFwiZmlyZXN0b3JlX211dGF0aW9uc1wiO1xuXG4vKiogQXNzZW1ibGVzIHRoZSBrZXkgZm9yIGEgbXV0YXRpb24gYmF0Y2ggaW4gV2ViU3RvcmFnZSAqLyBmdW5jdGlvbiBjcmVhdGVXZWJTdG9yYWdlTXV0YXRpb25CYXRjaEtleShlLCB0LCBuKSB7XG4gICAgbGV0IHIgPSBgJHtHdH1fJHtlfV8ke259YDtcbiAgICByZXR1cm4gdC5pc0F1dGhlbnRpY2F0ZWQoKSAmJiAociArPSBgXyR7dC51aWR9YCksIHI7XG59XG5cbi8vIFRoZSBmb3JtYXQgb2YgdGhlIFdlYlN0b3JhZ2Uga2V5IHRoYXQgc3RvcmVzIGEgcXVlcnkgdGFyZ2V0J3MgbWV0YWRhdGEgaXM6XG4vLyAgICAgZmlyZXN0b3JlX3RhcmdldHNfPHBlcnNpc3RlbmNlX3ByZWZpeD5fPHRhcmdldF9pZD5cbmNvbnN0IHp0ID0gXCJmaXJlc3RvcmVfdGFyZ2V0c1wiO1xuXG4vKiogQXNzZW1ibGVzIHRoZSBrZXkgZm9yIGEgcXVlcnkgc3RhdGUgaW4gV2ViU3RvcmFnZSAqLyBmdW5jdGlvbiBjcmVhdGVXZWJTdG9yYWdlUXVlcnlUYXJnZXRNZXRhZGF0YUtleShlLCB0KSB7XG4gICAgcmV0dXJuIGAke3p0fV8ke2V9XyR7dH1gO1xufVxuXG4vLyBUaGUgV2ViU3RvcmFnZSBwcmVmaXggdGhhdCBzdG9yZXMgdGhlIHByaW1hcnkgdGFiJ3Mgb25saW5lIHN0YXRlLiBUaGVcbi8vIGZvcm1hdCBvZiB0aGUga2V5IGlzOlxuLy8gICAgIGZpcmVzdG9yZV9vbmxpbmVfc3RhdGVfPHBlcnNpc3RlbmNlX3ByZWZpeD5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jb25zdCBqdCA9IFwiU2hhcmVkQ2xpZW50U3RhdGVcIjtcblxuLyoqXG4gKiBIb2xkcyB0aGUgc3RhdGUgb2YgYSBtdXRhdGlvbiBiYXRjaCwgaW5jbHVkaW5nIGl0cyB1c2VyIElELCBiYXRjaCBJRCBhbmRcbiAqIHdoZXRoZXIgdGhlIGJhdGNoIGlzICdwZW5kaW5nJywgJ2Fja25vd2xlZGdlZCcgb3IgJ3JlamVjdGVkJy5cbiAqL1xuLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xuY2xhc3MgX19QUklWQVRFX011dGF0aW9uTWV0YWRhdGEge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgdGhpcy51c2VyID0gZSwgdGhpcy5iYXRjaElkID0gdCwgdGhpcy5zdGF0ZSA9IG4sIHRoaXMuZXJyb3IgPSByO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBNdXRhdGlvbk1ldGFkYXRhIGZyb20gaXRzIEpTT04gcmVwcmVzZW50YXRpb24gaW4gV2ViU3RvcmFnZS5cbiAgICAgKiBMb2dzIGEgd2FybmluZyBhbmQgcmV0dXJucyBudWxsIGlmIHRoZSBmb3JtYXQgb2YgdGhlIGRhdGEgaXMgbm90IHZhbGlkLlxuICAgICAqLyAgICBzdGF0aWMgV3MoZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gSlNPTi5wYXJzZShuKTtcbiAgICAgICAgbGV0IGksIHMgPSBcIm9iamVjdFwiID09IHR5cGVvZiByICYmIC0xICE9PSBbIFwicGVuZGluZ1wiLCBcImFja25vd2xlZGdlZFwiLCBcInJlamVjdGVkXCIgXS5pbmRleE9mKHIuc3RhdGUpICYmICh2b2lkIDAgPT09IHIuZXJyb3IgfHwgXCJvYmplY3RcIiA9PSB0eXBlb2Ygci5lcnJvcik7XG4gICAgICAgIHJldHVybiBzICYmIHIuZXJyb3IgJiYgKHMgPSBcInN0cmluZ1wiID09IHR5cGVvZiByLmVycm9yLm1lc3NhZ2UgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2Ygci5lcnJvci5jb2RlLCBcbiAgICAgICAgcyAmJiAoaSA9IG5ldyBGaXJlc3RvcmVFcnJvcihyLmVycm9yLmNvZGUsIHIuZXJyb3IubWVzc2FnZSkpKSwgcyA/IG5ldyBfX1BSSVZBVEVfTXV0YXRpb25NZXRhZGF0YShlLCB0LCByLnN0YXRlLCBpKSA6IChfX1BSSVZBVEVfbG9nRXJyb3IoanQsIGBGYWlsZWQgdG8gcGFyc2UgbXV0YXRpb24gc3RhdGUgZm9yIElEICcke3R9JzogJHtufWApLCBcbiAgICAgICAgbnVsbCk7XG4gICAgfVxuICAgIEdzKCkge1xuICAgICAgICBjb25zdCBlID0ge1xuICAgICAgICAgICAgc3RhdGU6IHRoaXMuc3RhdGUsXG4gICAgICAgICAgICB1cGRhdGVUaW1lTXM6IERhdGUubm93KClcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3IgJiYgKGUuZXJyb3IgPSB7XG4gICAgICAgICAgICBjb2RlOiB0aGlzLmVycm9yLmNvZGUsXG4gICAgICAgICAgICBtZXNzYWdlOiB0aGlzLmVycm9yLm1lc3NhZ2VcbiAgICAgICAgfSksIEpTT04uc3RyaW5naWZ5KGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIb2xkcyB0aGUgc3RhdGUgb2YgYSBxdWVyeSB0YXJnZXQsIGluY2x1ZGluZyBpdHMgdGFyZ2V0IElEIGFuZCB3aGV0aGVyIHRoZVxuICogdGFyZ2V0IGlzICdub3QtY3VycmVudCcsICdjdXJyZW50JyBvciAncmVqZWN0ZWQnLlxuICovXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nXG5jbGFzcyBfX1BSSVZBVEVfUXVlcnlUYXJnZXRNZXRhZGF0YSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbikge1xuICAgICAgICB0aGlzLnRhcmdldElkID0gZSwgdGhpcy5zdGF0ZSA9IHQsIHRoaXMuZXJyb3IgPSBuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBRdWVyeVRhcmdldE1ldGFkYXRhIGZyb20gaXRzIEpTT04gcmVwcmVzZW50YXRpb24gaW4gV2ViU3RvcmFnZS5cbiAgICAgKiBMb2dzIGEgd2FybmluZyBhbmQgcmV0dXJucyBudWxsIGlmIHRoZSBmb3JtYXQgb2YgdGhlIGRhdGEgaXMgbm90IHZhbGlkLlxuICAgICAqLyAgICBzdGF0aWMgV3MoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gSlNPTi5wYXJzZSh0KTtcbiAgICAgICAgbGV0IHIsIGkgPSBcIm9iamVjdFwiID09IHR5cGVvZiBuICYmIC0xICE9PSBbIFwibm90LWN1cnJlbnRcIiwgXCJjdXJyZW50XCIsIFwicmVqZWN0ZWRcIiBdLmluZGV4T2Yobi5zdGF0ZSkgJiYgKHZvaWQgMCA9PT0gbi5lcnJvciB8fCBcIm9iamVjdFwiID09IHR5cGVvZiBuLmVycm9yKTtcbiAgICAgICAgcmV0dXJuIGkgJiYgbi5lcnJvciAmJiAoaSA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIG4uZXJyb3IubWVzc2FnZSAmJiBcInN0cmluZ1wiID09IHR5cGVvZiBuLmVycm9yLmNvZGUsIFxuICAgICAgICBpICYmIChyID0gbmV3IEZpcmVzdG9yZUVycm9yKG4uZXJyb3IuY29kZSwgbi5lcnJvci5tZXNzYWdlKSkpLCBpID8gbmV3IF9fUFJJVkFURV9RdWVyeVRhcmdldE1ldGFkYXRhKGUsIG4uc3RhdGUsIHIpIDogKF9fUFJJVkFURV9sb2dFcnJvcihqdCwgYEZhaWxlZCB0byBwYXJzZSB0YXJnZXQgc3RhdGUgZm9yIElEICcke2V9JzogJHt0fWApLCBcbiAgICAgICAgbnVsbCk7XG4gICAgfVxuICAgIEdzKCkge1xuICAgICAgICBjb25zdCBlID0ge1xuICAgICAgICAgICAgc3RhdGU6IHRoaXMuc3RhdGUsXG4gICAgICAgICAgICB1cGRhdGVUaW1lTXM6IERhdGUubm93KClcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3IgJiYgKGUuZXJyb3IgPSB7XG4gICAgICAgICAgICBjb2RlOiB0aGlzLmVycm9yLmNvZGUsXG4gICAgICAgICAgICBtZXNzYWdlOiB0aGlzLmVycm9yLm1lc3NhZ2VcbiAgICAgICAgfSksIEpTT04uc3RyaW5naWZ5KGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBUaGlzIGNsYXNzIHJlcHJlc2VudHMgdGhlIGltbXV0YWJsZSBDbGllbnRTdGF0ZSBmb3IgYSBjbGllbnQgcmVhZCBmcm9tXG4gKiBXZWJTdG9yYWdlLCBjb250YWluaW5nIHRoZSBsaXN0IG9mIGFjdGl2ZSBxdWVyeSB0YXJnZXRzLlxuICovIGNsYXNzIF9fUFJJVkFURV9SZW1vdGVDbGllbnRTdGF0ZSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLmNsaWVudElkID0gZSwgdGhpcy5hY3RpdmVUYXJnZXRJZHMgPSB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBSZW1vdGVDbGllbnRTdGF0ZSBmcm9tIHRoZSBKU09OIHJlcHJlc2VudGF0aW9uIGluIFdlYlN0b3JhZ2UuXG4gICAgICogTG9ncyBhIHdhcm5pbmcgYW5kIHJldHVybnMgbnVsbCBpZiB0aGUgZm9ybWF0IG9mIHRoZSBkYXRhIGlzIG5vdCB2YWxpZC5cbiAgICAgKi8gICAgc3RhdGljIFdzKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IEpTT04ucGFyc2UodCk7XG4gICAgICAgIGxldCByID0gXCJvYmplY3RcIiA9PSB0eXBlb2YgbiAmJiBuLmFjdGl2ZVRhcmdldElkcyBpbnN0YW5jZW9mIEFycmF5LCBpID0gX19QUklWQVRFX3RhcmdldElkU2V0KCk7XG4gICAgICAgIGZvciAobGV0IGUgPSAwOyByICYmIGUgPCBuLmFjdGl2ZVRhcmdldElkcy5sZW5ndGg7ICsrZSkgciA9IGlzU2FmZUludGVnZXIobi5hY3RpdmVUYXJnZXRJZHNbZV0pLCBcbiAgICAgICAgaSA9IGkuYWRkKG4uYWN0aXZlVGFyZ2V0SWRzW2VdKTtcbiAgICAgICAgcmV0dXJuIHIgPyBuZXcgX19QUklWQVRFX1JlbW90ZUNsaWVudFN0YXRlKGUsIGkpIDogKF9fUFJJVkFURV9sb2dFcnJvcihqdCwgYEZhaWxlZCB0byBwYXJzZSBjbGllbnQgZGF0YSBmb3IgaW5zdGFuY2UgJyR7ZX0nOiAke3R9YCksIFxuICAgICAgICBudWxsKTtcbiAgICB9XG59XG5cbi8qKlxuICogVGhpcyBjbGFzcyByZXByZXNlbnRzIHRoZSBvbmxpbmUgc3RhdGUgZm9yIGFsbCBjbGllbnRzIHBhcnRpY2lwYXRpbmcgaW5cbiAqIG11bHRpLXRhYi4gVGhlIG9ubGluZSBzdGF0ZSBpcyBvbmx5IHdyaXR0ZW4gdG8gYnkgdGhlIHByaW1hcnkgY2xpZW50LCBhbmRcbiAqIHVzZWQgaW4gc2Vjb25kYXJ5IGNsaWVudHMgdG8gdXBkYXRlIHRoZWlyIHF1ZXJ5IHZpZXdzLlxuICovIGNsYXNzIF9fUFJJVkFURV9TaGFyZWRPbmxpbmVTdGF0ZSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLmNsaWVudElkID0gZSwgdGhpcy5vbmxpbmVTdGF0ZSA9IHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIFNoYXJlZE9ubGluZVN0YXRlIGZyb20gaXRzIEpTT04gcmVwcmVzZW50YXRpb24gaW4gV2ViU3RvcmFnZS5cbiAgICAgKiBMb2dzIGEgd2FybmluZyBhbmQgcmV0dXJucyBudWxsIGlmIHRoZSBmb3JtYXQgb2YgdGhlIGRhdGEgaXMgbm90IHZhbGlkLlxuICAgICAqLyAgICBzdGF0aWMgV3MoZSkge1xuICAgICAgICBjb25zdCB0ID0gSlNPTi5wYXJzZShlKTtcbiAgICAgICAgcmV0dXJuIFwib2JqZWN0XCIgPT0gdHlwZW9mIHQgJiYgLTEgIT09IFsgXCJVbmtub3duXCIsIFwiT25saW5lXCIsIFwiT2ZmbGluZVwiIF0uaW5kZXhPZih0Lm9ubGluZVN0YXRlKSAmJiBcInN0cmluZ1wiID09IHR5cGVvZiB0LmNsaWVudElkID8gbmV3IF9fUFJJVkFURV9TaGFyZWRPbmxpbmVTdGF0ZSh0LmNsaWVudElkLCB0Lm9ubGluZVN0YXRlKSA6IChfX1BSSVZBVEVfbG9nRXJyb3IoanQsIGBGYWlsZWQgdG8gcGFyc2Ugb25saW5lIHN0YXRlOiAke2V9YCksIFxuICAgICAgICBudWxsKTtcbiAgICB9XG59XG5cbi8qKlxuICogTWV0YWRhdGEgc3RhdGUgb2YgdGhlIGxvY2FsIGNsaWVudC4gVW5saWtlIGBSZW1vdGVDbGllbnRTdGF0ZWAsIHRoaXMgY2xhc3MgaXNcbiAqIG11dGFibGUgYW5kIGtlZXBzIHRyYWNrIG9mIGFsbCBwZW5kaW5nIG11dGF0aW9ucywgd2hpY2ggYWxsb3dzIHVzIHRvXG4gKiB1cGRhdGUgdGhlIHJhbmdlIG9mIHBlbmRpbmcgbXV0YXRpb24gYmF0Y2ggSURzIGFzIG5ldyBtdXRhdGlvbnMgYXJlIGFkZGVkIG9yXG4gKiByZW1vdmVkLlxuICpcbiAqIFRoZSBkYXRhIGluIGBMb2NhbENsaWVudFN0YXRlYCBpcyBub3QgcmVhZCBmcm9tIFdlYlN0b3JhZ2UgYW5kIGluc3RlYWRcbiAqIHVwZGF0ZWQgdmlhIGl0cyBpbnN0YW5jZSBtZXRob2RzLiBUaGUgdXBkYXRlZCBzdGF0ZSBjYW4gYmUgc2VyaWFsaXplZCB2aWFcbiAqIGB0b1dlYlN0b3JhZ2VKU09OKClgLlxuICovXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuY2xhc3MgX19QUklWQVRFX0xvY2FsQ2xpZW50U3RhdGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmFjdGl2ZVRhcmdldElkcyA9IF9fUFJJVkFURV90YXJnZXRJZFNldCgpO1xuICAgIH1cbiAgICB6cyhlKSB7XG4gICAgICAgIHRoaXMuYWN0aXZlVGFyZ2V0SWRzID0gdGhpcy5hY3RpdmVUYXJnZXRJZHMuYWRkKGUpO1xuICAgIH1cbiAgICBqcyhlKSB7XG4gICAgICAgIHRoaXMuYWN0aXZlVGFyZ2V0SWRzID0gdGhpcy5hY3RpdmVUYXJnZXRJZHMuZGVsZXRlKGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyB0aGlzIGVudHJ5IGludG8gYSBKU09OLWVuY29kZWQgZm9ybWF0IHdlIGNhbiB1c2UgZm9yIFdlYlN0b3JhZ2UuXG4gICAgICogRG9lcyBub3QgZW5jb2RlIGBjbGllbnRJZGAgYXMgaXQgaXMgcGFydCBvZiB0aGUga2V5IGluIFdlYlN0b3JhZ2UuXG4gICAgICovICAgIEdzKCkge1xuICAgICAgICBjb25zdCBlID0ge1xuICAgICAgICAgICAgYWN0aXZlVGFyZ2V0SWRzOiB0aGlzLmFjdGl2ZVRhcmdldElkcy50b0FycmF5KCksXG4gICAgICAgICAgICB1cGRhdGVUaW1lTXM6IERhdGUubm93KClcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlYCB1c2VzIFdlYlN0b3JhZ2UgKHdpbmRvdy5sb2NhbFN0b3JhZ2UpIGFzIHRoZVxuICogYmFja2luZyBzdG9yZSBmb3IgdGhlIFNoYXJlZENsaWVudFN0YXRlLiBJdCBrZWVwcyB0cmFjayBvZiBhbGwgYWN0aXZlXG4gKiBjbGllbnRzIGFuZCBzdXBwb3J0cyBtb2RpZmljYXRpb25zIG9mIHRoZSBsb2NhbCBjbGllbnQncyBkYXRhLlxuICovIGNsYXNzIF9fUFJJVkFURV9XZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIHIsIGkpIHtcbiAgICAgICAgdGhpcy53aW5kb3cgPSBlLCB0aGlzLk1pID0gdCwgdGhpcy5wZXJzaXN0ZW5jZUtleSA9IG4sIHRoaXMuSnMgPSByLCB0aGlzLnN5bmNFbmdpbmUgPSBudWxsLCBcbiAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZUhhbmRsZXIgPSBudWxsLCB0aGlzLnNlcXVlbmNlTnVtYmVySGFuZGxlciA9IG51bGwsIHRoaXMuSHMgPSB0aGlzLllzLmJpbmQodGhpcyksIFxuICAgICAgICB0aGlzLlpzID0gbmV3IFNvcnRlZE1hcChfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvciksIHRoaXMuc3RhcnRlZCA9ICExLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhcHR1cmVzIFdlYlN0b3JhZ2UgZXZlbnRzIHRoYXQgb2NjdXIgYmVmb3JlIGBzdGFydCgpYCBpcyBjYWxsZWQuIFRoZXNlXG4gICAgICAgICAqIGV2ZW50cyBhcmUgcmVwbGF5ZWQgb25jZSBgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlYCBpcyBzdGFydGVkLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5YcyA9IFtdO1xuICAgICAgICAvLyBFc2NhcGUgdGhlIHNwZWNpYWwgY2hhcmFjdGVycyBtZW50aW9uZWQgaGVyZTpcbiAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9HdWlkZS9SZWd1bGFyX0V4cHJlc3Npb25zXG4gICAgICAgIGNvbnN0IHMgPSBuLnJlcGxhY2UoL1suKis/XiR7fSgpfFtcXF1cXFxcXS9nLCBcIlxcXFwkJlwiKTtcbiAgICAgICAgdGhpcy5zdG9yYWdlID0gdGhpcy53aW5kb3cubG9jYWxTdG9yYWdlLCB0aGlzLmN1cnJlbnRVc2VyID0gaSwgdGhpcy5lbyA9IGNyZWF0ZVdlYlN0b3JhZ2VDbGllbnRTdGF0ZUtleSh0aGlzLnBlcnNpc3RlbmNlS2V5LCB0aGlzLkpzKSwgXG4gICAgICAgIHRoaXMubm8gPSBcbiAgICAgICAgLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciB0aGUgY3VycmVudCBzZXF1ZW5jZSBudW1iZXIuICovXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVdlYlN0b3JhZ2VTZXF1ZW5jZU51bWJlcktleShlKSB7XG4gICAgICAgICAgICByZXR1cm4gYGZpcmVzdG9yZV9zZXF1ZW5jZV9udW1iZXJfJHtlfWA7XG4gICAgICAgIH0odGhpcy5wZXJzaXN0ZW5jZUtleSksIHRoaXMuWnMgPSB0aGlzLlpzLmluc2VydCh0aGlzLkpzLCBuZXcgX19QUklWQVRFX0xvY2FsQ2xpZW50U3RhdGUpLCBcbiAgICAgICAgdGhpcy5ybyA9IG5ldyBSZWdFeHAoYF4ke1d0fV8ke3N9XyhbXl9dKikkYCksIHRoaXMuaW8gPSBuZXcgUmVnRXhwKGBeJHtHdH1fJHtzfV8oXFxcXGQrKSg/Ol8oLiopKT8kYCksIFxuICAgICAgICB0aGlzLnNvID0gbmV3IFJlZ0V4cChgXiR7enR9XyR7c31fKFxcXFxkKykkYCksIHRoaXMub28gPSBcbiAgICAgICAgLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciB0aGUgb25saW5lIHN0YXRlIG9mIHRoZSBwcmltYXJ5IHRhYi4gKi9cbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlV2ViU3RvcmFnZU9ubGluZVN0YXRlS2V5KGUpIHtcbiAgICAgICAgICAgIHJldHVybiBgZmlyZXN0b3JlX29ubGluZV9zdGF0ZV8ke2V9YDtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGUgV2ViU3RvcmFnZSBwcmVmaXggdGhhdCBwbGF5cyBhcyBhIGV2ZW50IHRvIGluZGljYXRlIHRoZSByZW1vdGUgZG9jdW1lbnRzXG4gICAgICAgIC8vIG1pZ2h0IGhhdmUgY2hhbmdlZCBkdWUgdG8gc29tZSBzZWNvbmRhcnkgdGFicyBsb2FkaW5nIGEgYnVuZGxlLlxuICAgICAgICAvLyBmb3JtYXQgb2YgdGhlIGtleSBpczpcbiAgICAgICAgLy8gICAgIGZpcmVzdG9yZV9idW5kbGVfbG9hZGVkX3YyXzxwZXJzaXN0ZW5jZUtleT5cbiAgICAgICAgLy8gVGhlIHZlcnNpb24gZW5kaW5nIHdpdGggXCJ2MlwiIHN0b3JlcyB0aGUgbGlzdCBvZiBtb2RpZmllZCBjb2xsZWN0aW9uIGdyb3Vwcy5cbiAgICAgICAgKHRoaXMucGVyc2lzdGVuY2VLZXkpLCB0aGlzLl9vID0gZnVuY3Rpb24gY3JlYXRlQnVuZGxlTG9hZGVkS2V5KGUpIHtcbiAgICAgICAgICAgIHJldHVybiBgZmlyZXN0b3JlX2J1bmRsZV9sb2FkZWRfdjJfJHtlfWA7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhlIFdlYlN0b3JhZ2Uga2V5IHByZWZpeCBmb3IgdGhlIGtleSB0aGF0IHN0b3JlcyB0aGUgbGFzdCBzZXF1ZW5jZSBudW1iZXIgYWxsb2NhdGVkLiBUaGUga2V5XG4gICAgICAgIC8vIGxvb2tzIGxpa2UgJ2ZpcmVzdG9yZV9zZXF1ZW5jZV9udW1iZXJfPHBlcnNpc3RlbmNlX3ByZWZpeD4nLlxuICAgICAgICAodGhpcy5wZXJzaXN0ZW5jZUtleSksIFxuICAgICAgICAvLyBSYXRoZXIgdGhhbiBhZGRpbmcgdGhlIHN0b3JhZ2Ugb2JzZXJ2ZXIgZHVyaW5nIHN0YXJ0KCksIHdlIGFkZCB0aGVcbiAgICAgICAgLy8gc3RvcmFnZSBvYnNlcnZlciBkdXJpbmcgaW5pdGlhbGl6YXRpb24uIFRoaXMgZW5zdXJlcyB0aGF0IHdlIGNvbGxlY3RcbiAgICAgICAgLy8gZXZlbnRzIGJlZm9yZSBvdGhlciBjb21wb25lbnRzIHBvcHVsYXRlIHRoZWlyIGluaXRpYWwgc3RhdGUgKGR1cmluZyB0aGVpclxuICAgICAgICAvLyByZXNwZWN0aXZlIHN0YXJ0KCkgY2FsbHMpLiBPdGhlcndpc2UsIHdlIG1pZ2h0IGZvciBleGFtcGxlIG1pc3MgYVxuICAgICAgICAvLyBtdXRhdGlvbiB0aGF0IGlzIGFkZGVkIGFmdGVyIExvY2FsU3RvcmUncyBzdGFydCgpIHByb2Nlc3NlZCB0aGUgZXhpc3RpbmdcbiAgICAgICAgLy8gbXV0YXRpb25zIGJ1dCBiZWZvcmUgd2Ugb2JzZXJ2ZSBXZWJTdG9yYWdlIGV2ZW50cy5cbiAgICAgICAgdGhpcy53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInN0b3JhZ2VcIiwgdGhpcy5Icyk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zICd0cnVlJyBpZiBXZWJTdG9yYWdlIGlzIGF2YWlsYWJsZSBpbiB0aGUgY3VycmVudCBlbnZpcm9ubWVudC4gKi8gICAgc3RhdGljIHYoZSkge1xuICAgICAgICByZXR1cm4gISghZSB8fCAhZS5sb2NhbFN0b3JhZ2UpO1xuICAgIH1cbiAgICBhc3luYyBzdGFydCgpIHtcbiAgICAgICAgLy8gUmV0cmlldmUgdGhlIGxpc3Qgb2YgZXhpc3RpbmcgY2xpZW50cyB0byBiYWNrZmlsbCB0aGUgZGF0YSBpblxuICAgICAgICAvLyBTaGFyZWRDbGllbnRTdGF0ZS5cbiAgICAgICAgY29uc3QgZSA9IGF3YWl0IHRoaXMuc3luY0VuZ2luZS5UcygpO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkge1xuICAgICAgICAgICAgaWYgKHQgPT09IHRoaXMuSnMpIGNvbnRpbnVlO1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuZ2V0SXRlbShjcmVhdGVXZWJTdG9yYWdlQ2xpZW50U3RhdGVLZXkodGhpcy5wZXJzaXN0ZW5jZUtleSwgdCkpO1xuICAgICAgICAgICAgaWYgKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX1JlbW90ZUNsaWVudFN0YXRlLldzKHQsIGUpO1xuICAgICAgICAgICAgICAgIG4gJiYgKHRoaXMuWnMgPSB0aGlzLlpzLmluc2VydChuLmNsaWVudElkLCBuKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hbygpO1xuICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBhbiBleGlzdGluZyBvbmxpbmUgc3RhdGUgYW5kIGNhbGwgdGhlIGNhbGxiYWNrIGhhbmRsZXJcbiAgICAgICAgLy8gaWYgYXBwbGljYWJsZS5cbiAgICAgICAgY29uc3QgdCA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKHRoaXMub28pO1xuICAgICAgICBpZiAodCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMudW8odCk7XG4gICAgICAgICAgICBlICYmIHRoaXMuY28oZSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHRoaXMuWHMpIHRoaXMuWXMoZSk7XG4gICAgICAgIHRoaXMuWHMgPSBbXSwgXG4gICAgICAgIC8vIFJlZ2lzdGVyIGEgd2luZG93IHVubG9hZCBob29rIHRvIHJlbW92ZSB0aGUgY2xpZW50IG1ldGFkYXRhIGVudHJ5IGZyb21cbiAgICAgICAgLy8gV2ViU3RvcmFnZSBldmVuIGlmIGBzaHV0ZG93bigpYCB3YXMgbm90IGNhbGxlZC5cbiAgICAgICAgdGhpcy53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBhZ2VoaWRlXCIsICgoKSA9PiB0aGlzLnNodXRkb3duKCkpKSwgdGhpcy5zdGFydGVkID0gITA7XG4gICAgfVxuICAgIHdyaXRlU2VxdWVuY2VOdW1iZXIoZSkge1xuICAgICAgICB0aGlzLnNldEl0ZW0odGhpcy5ubywgSlNPTi5zdHJpbmdpZnkoZSkpO1xuICAgIH1cbiAgICBnZXRBbGxBY3RpdmVRdWVyeVRhcmdldHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvKHRoaXMuWnMpO1xuICAgIH1cbiAgICBpc0FjdGl2ZVF1ZXJ5VGFyZ2V0KGUpIHtcbiAgICAgICAgbGV0IHQgPSAhMTtcbiAgICAgICAgcmV0dXJuIHRoaXMuWnMuZm9yRWFjaCgoKG4sIHIpID0+IHtcbiAgICAgICAgICAgIHIuYWN0aXZlVGFyZ2V0SWRzLmhhcyhlKSAmJiAodCA9ICEwKTtcbiAgICAgICAgfSkpLCB0O1xuICAgIH1cbiAgICBhZGRQZW5kaW5nTXV0YXRpb24oZSkge1xuICAgICAgICB0aGlzLmhvKGUsIFwicGVuZGluZ1wiKTtcbiAgICB9XG4gICAgdXBkYXRlTXV0YXRpb25TdGF0ZShlLCB0LCBuKSB7XG4gICAgICAgIHRoaXMuaG8oZSwgdCwgbiksIFxuICAgICAgICAvLyBPbmNlIGEgZmluYWwgbXV0YXRpb24gcmVzdWx0IGlzIG9ic2VydmVkIGJ5IG90aGVyIGNsaWVudHMsIHRoZXkgbm8gbG9uZ2VyXG4gICAgICAgIC8vIGFjY2VzcyB0aGUgbXV0YXRpb24ncyBtZXRhZGF0YSBlbnRyeS4gU2luY2UgV2ViU3RvcmFnZSByZXBsYXlzIGV2ZW50c1xuICAgICAgICAvLyBpbiBvcmRlciwgaXQgaXMgc2FmZSB0byBkZWxldGUgdGhlIGVudHJ5IHJpZ2h0IGFmdGVyIHVwZGF0aW5nIGl0LlxuICAgICAgICB0aGlzLlBvKGUpO1xuICAgIH1cbiAgICBhZGRMb2NhbFF1ZXJ5VGFyZ2V0KGUsIHQgPSAhMCkge1xuICAgICAgICBsZXQgbiA9IFwibm90LWN1cnJlbnRcIjtcbiAgICAgICAgLy8gTG9va3VwIGFuIGV4aXN0aW5nIHF1ZXJ5IHN0YXRlIGlmIHRoZSB0YXJnZXQgSUQgd2FzIGFscmVhZHkgcmVnaXN0ZXJlZFxuICAgICAgICAvLyBieSBhbm90aGVyIHRhYlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzQWN0aXZlUXVlcnlUYXJnZXQoZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShjcmVhdGVXZWJTdG9yYWdlUXVlcnlUYXJnZXRNZXRhZGF0YUtleSh0aGlzLnBlcnNpc3RlbmNlS2V5LCBlKSk7XG4gICAgICAgICAgICBpZiAodCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfUXVlcnlUYXJnZXRNZXRhZGF0YS5XcyhlLCB0KTtcbiAgICAgICAgICAgICAgICByICYmIChuID0gci5zdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgdGhlIHF1ZXJ5IGlzIGxpc3RlbmluZyB0byBjYWNoZSBvbmx5LCB0aGUgdGFyZ2V0IElEIHNob3VsZCBub3QgYmUgcmVnaXN0ZXJlZCB3aXRoIHRoZVxuICAgICAgICAvLyBsb2NhbCBGaXJlc3RvcmUgY2xpZW50IGFzIGFuIGFjdGl2ZSB3YXRjaCB0YXJnZXQuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHQgJiYgdGhpcy5Uby56cyhlKSwgdGhpcy5hbygpLCBuO1xuICAgIH1cbiAgICByZW1vdmVMb2NhbFF1ZXJ5VGFyZ2V0KGUpIHtcbiAgICAgICAgdGhpcy5Uby5qcyhlKSwgdGhpcy5hbygpO1xuICAgIH1cbiAgICBpc0xvY2FsUXVlcnlUYXJnZXQoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5Uby5hY3RpdmVUYXJnZXRJZHMuaGFzKGUpO1xuICAgIH1cbiAgICBjbGVhclF1ZXJ5U3RhdGUoZSkge1xuICAgICAgICB0aGlzLnJlbW92ZUl0ZW0oY3JlYXRlV2ViU3RvcmFnZVF1ZXJ5VGFyZ2V0TWV0YWRhdGFLZXkodGhpcy5wZXJzaXN0ZW5jZUtleSwgZSkpO1xuICAgIH1cbiAgICB1cGRhdGVRdWVyeVN0YXRlKGUsIHQsIG4pIHtcbiAgICAgICAgdGhpcy5JbyhlLCB0LCBuKTtcbiAgICB9XG4gICAgaGFuZGxlVXNlckNoYW5nZShlLCB0LCBuKSB7XG4gICAgICAgIHQuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICB0aGlzLlBvKGUpO1xuICAgICAgICB9KSksIHRoaXMuY3VycmVudFVzZXIgPSBlLCBuLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5hZGRQZW5kaW5nTXV0YXRpb24oZSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc2V0T25saW5lU3RhdGUoZSkge1xuICAgICAgICB0aGlzLkVvKGUpO1xuICAgIH1cbiAgICBub3RpZnlCdW5kbGVMb2FkZWQoZSkge1xuICAgICAgICB0aGlzLkFvKGUpO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgdGhpcy5zdGFydGVkICYmICh0aGlzLndpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwic3RvcmFnZVwiLCB0aGlzLkhzKSwgdGhpcy5yZW1vdmVJdGVtKHRoaXMuZW8pLCBcbiAgICAgICAgdGhpcy5zdGFydGVkID0gITEpO1xuICAgIH1cbiAgICBnZXRJdGVtKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKGUpO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2xvZ0RlYnVnKGp0LCBcIlJFQURcIiwgZSwgdCksIHQ7XG4gICAgfVxuICAgIHNldEl0ZW0oZSwgdCkge1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoanQsIFwiU0VUXCIsIGUsIHQpLCB0aGlzLnN0b3JhZ2Uuc2V0SXRlbShlLCB0KTtcbiAgICB9XG4gICAgcmVtb3ZlSXRlbShlKSB7XG4gICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhqdCwgXCJSRU1PVkVcIiwgZSksIHRoaXMuc3RvcmFnZS5yZW1vdmVJdGVtKGUpO1xuICAgIH1cbiAgICBZcyhlKSB7XG4gICAgICAgIC8vIE5vdGU6IFRoZSBmdW5jdGlvbiBpcyB0eXBlZCB0byB0YWtlIEV2ZW50IHRvIGJlIGludGVyZmFjZS1jb21wYXRpYmxlIHdpdGhcbiAgICAgICAgLy8gYFdpbmRvdy5hZGRFdmVudExpc3RlbmVyYC5cbiAgICAgICAgY29uc3QgdCA9IGU7XG4gICAgICAgIGlmICh0LnN0b3JhZ2VBcmVhID09PSB0aGlzLnN0b3JhZ2UpIHtcbiAgICAgICAgICAgIGlmIChfX1BSSVZBVEVfbG9nRGVidWcoanQsIFwiRVZFTlRcIiwgdC5rZXksIHQubmV3VmFsdWUpLCB0LmtleSA9PT0gdGhpcy5lbykgcmV0dXJuIHZvaWQgX19QUklWQVRFX2xvZ0Vycm9yKFwiUmVjZWl2ZWQgV2ViU3RvcmFnZSBub3RpZmljYXRpb24gZm9yIGxvY2FsIGNoYW5nZS4gQW5vdGhlciBjbGllbnQgbWlnaHQgaGF2ZSBnYXJiYWdlLWNvbGxlY3RlZCBvdXIgc3RhdGVcIik7XG4gICAgICAgICAgICB0aGlzLk1pLmVucXVldWVSZXRyeWFibGUoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGFydGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSB0LmtleSkgaWYgKHRoaXMucm8udGVzdCh0LmtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09IHQubmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gdGhpcy5Sbyh0LmtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuVm8oZSwgbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMubW8odC5rZXksIHQubmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlKSByZXR1cm4gdGhpcy5WbyhlLmNsaWVudElkLCBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlvLnRlc3QodC5rZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gdC5uZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLmZvKHQua2V5LCB0Lm5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSkgcmV0dXJuIHRoaXMucG8oZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zby50ZXN0KHQua2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IHQubmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gdGhpcy55byh0LmtleSwgdC5uZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUpIHJldHVybiB0aGlzLndvKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHQua2V5ID09PSB0aGlzLm9vKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gdC5uZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLnVvKHQubmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlKSByZXR1cm4gdGhpcy5jbyhlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0LmtleSA9PT0gdGhpcy5ubykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tV2ViU3RvcmFnZVNlcXVlbmNlTnVtYmVyKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdCA9IF9fUFJJVkFURV9MaXN0ZW5TZXF1ZW5jZS5jZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSBlKSB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gSlNPTi5wYXJzZShlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQoXCJudW1iZXJcIiA9PSB0eXBlb2YgbiwgMzA2MzYsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNvOiBlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB0ID0gbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9fUFJJVkFURV9sb2dFcnJvcihqdCwgXCJGYWlsZWQgdG8gcmVhZCBzZXF1ZW5jZSBudW1iZXIgZnJvbSBXZWJTdG9yYWdlXCIsIGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICogYE1lbW9yeVNoYXJlZENsaWVudFN0YXRlYCBpcyBhIHNpbXBsZSBpbXBsZW1lbnRhdGlvbiBvZiBTaGFyZWRDbGllbnRTdGF0ZSBmb3JcbiAqIGNsaWVudHMgdXNpbmcgbWVtb3J5IHBlcnNpc3RlbmNlLiBUaGUgc3RhdGUgaW4gdGhpcyBjbGFzcyByZW1haW5zIGZ1bGx5XG4gKiBpc29sYXRlZCBhbmQgbm8gc3luY2hyb25pemF0aW9uIGlzIHBlcmZvcm1lZC5cbiAqLyAodC5uZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlICE9PSBfX1BSSVZBVEVfTGlzdGVuU2VxdWVuY2UuY2UgJiYgdGhpcy5zZXF1ZW5jZU51bWJlckhhbmRsZXIoZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodC5rZXkgPT09IHRoaXMuX28pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLmJvKHQubmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoZS5tYXAoKGUgPT4gdGhpcy5zeW5jRW5naW5lLkRvKGUpKSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHRoaXMuWHMucHVzaCh0KTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgVG8oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlpzLmdldCh0aGlzLkpzKTtcbiAgICB9XG4gICAgYW8oKSB7XG4gICAgICAgIHRoaXMuc2V0SXRlbSh0aGlzLmVvLCB0aGlzLlRvLkdzKCkpO1xuICAgIH1cbiAgICBobyhlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgX19QUklWQVRFX011dGF0aW9uTWV0YWRhdGEodGhpcy5jdXJyZW50VXNlciwgZSwgdCwgbiksIGkgPSBjcmVhdGVXZWJTdG9yYWdlTXV0YXRpb25CYXRjaEtleSh0aGlzLnBlcnNpc3RlbmNlS2V5LCB0aGlzLmN1cnJlbnRVc2VyLCBlKTtcbiAgICAgICAgdGhpcy5zZXRJdGVtKGksIHIuR3MoKSk7XG4gICAgfVxuICAgIFBvKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGNyZWF0ZVdlYlN0b3JhZ2VNdXRhdGlvbkJhdGNoS2V5KHRoaXMucGVyc2lzdGVuY2VLZXksIHRoaXMuY3VycmVudFVzZXIsIGUpO1xuICAgICAgICB0aGlzLnJlbW92ZUl0ZW0odCk7XG4gICAgfVxuICAgIEVvKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHtcbiAgICAgICAgICAgIGNsaWVudElkOiB0aGlzLkpzLFxuICAgICAgICAgICAgb25saW5lU3RhdGU6IGVcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zdG9yYWdlLnNldEl0ZW0odGhpcy5vbywgSlNPTi5zdHJpbmdpZnkodCkpO1xuICAgIH1cbiAgICBJbyhlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSBjcmVhdGVXZWJTdG9yYWdlUXVlcnlUYXJnZXRNZXRhZGF0YUtleSh0aGlzLnBlcnNpc3RlbmNlS2V5LCBlKSwgaSA9IG5ldyBfX1BSSVZBVEVfUXVlcnlUYXJnZXRNZXRhZGF0YShlLCB0LCBuKTtcbiAgICAgICAgdGhpcy5zZXRJdGVtKHIsIGkuR3MoKSk7XG4gICAgfVxuICAgIEFvKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IEpTT04uc3RyaW5naWZ5KEFycmF5LmZyb20oZSkpO1xuICAgICAgICB0aGlzLnNldEl0ZW0odGhpcy5fbywgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIGNsaWVudCBzdGF0ZSBrZXkgaW4gV2ViU3RvcmFnZS4gUmV0dXJucyBudWxsIGlmIHRoZSBrZXkgZG9lcyBub3RcbiAgICAgKiBtYXRjaCB0aGUgZXhwZWN0ZWQga2V5IGZvcm1hdC5cbiAgICAgKi8gICAgUm8oZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5yby5leGVjKGUpO1xuICAgICAgICByZXR1cm4gdCA/IHRbMV0gOiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBjbGllbnQgc3RhdGUgaW4gV2ViU3RvcmFnZS4gUmV0dXJucyAnbnVsbCcgaWYgdGhlIHZhbHVlIGNvdWxkIG5vdFxuICAgICAqIGJlIHBhcnNlZC5cbiAgICAgKi8gICAgbW8oZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5SbyhlKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9SZW1vdGVDbGllbnRTdGF0ZS5XcyhuLCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgbXV0YXRpb24gYmF0Y2ggc3RhdGUgaW4gV2ViU3RvcmFnZS4gUmV0dXJucyAnbnVsbCcgaWYgdGhlIHZhbHVlXG4gICAgICogY291bGQgbm90IGJlIHBhcnNlZC5cbiAgICAgKi8gICAgZm8oZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5pby5leGVjKGUpLCByID0gTnVtYmVyKG5bMV0pLCBpID0gdm9pZCAwICE9PSBuWzJdID8gblsyXSA6IG51bGw7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfTXV0YXRpb25NZXRhZGF0YS5XcyhuZXcgVXNlcihpKSwgciwgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIHF1ZXJ5IHRhcmdldCBzdGF0ZSBmcm9tIFdlYlN0b3JhZ2UuIFJldHVybnMgJ251bGwnIGlmIHRoZSB2YWx1ZVxuICAgICAqIGNvdWxkIG5vdCBiZSBwYXJzZWQuXG4gICAgICovICAgIHlvKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuc28uZXhlYyhlKSwgciA9IE51bWJlcihuWzFdKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9RdWVyeVRhcmdldE1ldGFkYXRhLldzKHIsIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYW4gb25saW5lIHN0YXRlIGZyb20gV2ViU3RvcmFnZS4gUmV0dXJucyAnbnVsbCcgaWYgdGhlIHZhbHVlXG4gICAgICogY291bGQgbm90IGJlIHBhcnNlZC5cbiAgICAgKi8gICAgdW8oZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX1NoYXJlZE9ubGluZVN0YXRlLldzKGUpO1xuICAgIH1cbiAgICBibyhlKSB7XG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKGUpO1xuICAgIH1cbiAgICBhc3luYyBwbyhlKSB7XG4gICAgICAgIGlmIChlLnVzZXIudWlkID09PSB0aGlzLmN1cnJlbnRVc2VyLnVpZCkgcmV0dXJuIHRoaXMuc3luY0VuZ2luZS5DbyhlLmJhdGNoSWQsIGUuc3RhdGUsIGUuZXJyb3IpO1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoanQsIGBJZ25vcmluZyBtdXRhdGlvbiBmb3Igbm9uLWFjdGl2ZSB1c2VyICR7ZS51c2VyLnVpZH1gKTtcbiAgICB9XG4gICAgd28oZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zeW5jRW5naW5lLnZvKGUudGFyZ2V0SWQsIGUuc3RhdGUsIGUuZXJyb3IpO1xuICAgIH1cbiAgICBWbyhlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0ID8gdGhpcy5acy5pbnNlcnQoZSwgdCkgOiB0aGlzLlpzLnJlbW92ZShlKSwgciA9IHRoaXMubG8odGhpcy5acyksIGkgPSB0aGlzLmxvKG4pLCBzID0gW10sIG8gPSBbXTtcbiAgICAgICAgcmV0dXJuIGkuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICByLmhhcyhlKSB8fCBzLnB1c2goZSk7XG4gICAgICAgIH0pKSwgci5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIGkuaGFzKGUpIHx8IG8ucHVzaChlKTtcbiAgICAgICAgfSkpLCB0aGlzLnN5bmNFbmdpbmUuRm8ocywgbykudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5acyA9IG47XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgY28oZSkge1xuICAgICAgICAvLyBXZSBjaGVjayB3aGV0aGVyIHRoZSBjbGllbnQgdGhhdCB3cm90ZSB0aGlzIG9ubGluZSBzdGF0ZSBpcyBzdGlsbCBhY3RpdmVcbiAgICAgICAgLy8gYnkgY29tcGFyaW5nIGl0cyBjbGllbnQgSUQgdG8gdGhlIGxpc3Qgb2YgY2xpZW50cyBrZXB0IGFjdGl2ZSBpblxuICAgICAgICAvLyBJbmRleGVkRGIuIElmIGEgY2xpZW50IGRvZXMgbm90IHVwZGF0ZSB0aGVpciBJbmRleGVkRGIgY2xpZW50IHN0YXRlXG4gICAgICAgIC8vIHdpdGhpbiA1IHNlY29uZHMsIGl0IGlzIGNvbnNpZGVyZWQgaW5hY3RpdmUgYW5kIHdlIGRvbid0IGVtaXQgYW4gb25saW5lXG4gICAgICAgIC8vIHN0YXRlIGV2ZW50LlxuICAgICAgICB0aGlzLlpzLmdldChlLmNsaWVudElkKSAmJiB0aGlzLm9ubGluZVN0YXRlSGFuZGxlcihlLm9ubGluZVN0YXRlKTtcbiAgICB9XG4gICAgbG8oZSkge1xuICAgICAgICBsZXQgdCA9IF9fUFJJVkFURV90YXJnZXRJZFNldCgpO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgdCA9IHQudW5pb25XaXRoKG4uYWN0aXZlVGFyZ2V0SWRzKTtcbiAgICAgICAgfSkpLCB0O1xuICAgIH1cbn1cblxuY2xhc3MgX19QUklWQVRFX01lbW9yeVNoYXJlZENsaWVudFN0YXRlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5NbyA9IG5ldyBfX1BSSVZBVEVfTG9jYWxDbGllbnRTdGF0ZSwgdGhpcy54byA9IHt9LCB0aGlzLm9ubGluZVN0YXRlSGFuZGxlciA9IG51bGwsIFxuICAgICAgICB0aGlzLnNlcXVlbmNlTnVtYmVySGFuZGxlciA9IG51bGw7XG4gICAgfVxuICAgIGFkZFBlbmRpbmdNdXRhdGlvbihlKSB7XG4gICAgICAgIC8vIE5vIG9wLlxuICAgIH1cbiAgICB1cGRhdGVNdXRhdGlvblN0YXRlKGUsIHQsIG4pIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxuICAgIGFkZExvY2FsUXVlcnlUYXJnZXQoZSwgdCA9ICEwKSB7XG4gICAgICAgIHJldHVybiB0ICYmIHRoaXMuTW8uenMoZSksIHRoaXMueG9bZV0gfHwgXCJub3QtY3VycmVudFwiO1xuICAgIH1cbiAgICB1cGRhdGVRdWVyeVN0YXRlKGUsIHQsIG4pIHtcbiAgICAgICAgdGhpcy54b1tlXSA9IHQ7XG4gICAgfVxuICAgIHJlbW92ZUxvY2FsUXVlcnlUYXJnZXQoZSkge1xuICAgICAgICB0aGlzLk1vLmpzKGUpO1xuICAgIH1cbiAgICBpc0xvY2FsUXVlcnlUYXJnZXQoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5Nby5hY3RpdmVUYXJnZXRJZHMuaGFzKGUpO1xuICAgIH1cbiAgICBjbGVhclF1ZXJ5U3RhdGUoZSkge1xuICAgICAgICBkZWxldGUgdGhpcy54b1tlXTtcbiAgICB9XG4gICAgZ2V0QWxsQWN0aXZlUXVlcnlUYXJnZXRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5Nby5hY3RpdmVUYXJnZXRJZHM7XG4gICAgfVxuICAgIGlzQWN0aXZlUXVlcnlUYXJnZXQoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5Nby5hY3RpdmVUYXJnZXRJZHMuaGFzKGUpO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuTW8gPSBuZXcgX19QUklWQVRFX0xvY2FsQ2xpZW50U3RhdGUsIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBoYW5kbGVVc2VyQ2hhbmdlKGUsIHQsIG4pIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxuICAgIHNldE9ubGluZVN0YXRlKGUpIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxuICAgIHNodXRkb3duKCkge31cbiAgICB3cml0ZVNlcXVlbmNlTnVtYmVyKGUpIHt9XG4gICAgbm90aWZ5QnVuZGxlTG9hZGVkKGUpIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfTm9vcENvbm5lY3Rpdml0eU1vbml0b3Ige1xuICAgIE9vKGUpIHtcbiAgICAgICAgLy8gTm8tb3AuXG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICAvLyBOby1vcC5cbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBSZWZlcmVuY2VzIHRvIGB3aW5kb3dgIGFyZSBndWFyZGVkIGJ5IEJyb3dzZXJDb25uZWN0aXZpdHlNb25pdG9yLmlzQXZhaWxhYmxlKClcbi8qIGVzbGludC1kaXNhYmxlIG5vLXJlc3RyaWN0ZWQtZ2xvYmFscyAqLyBjb25zdCBKdCA9IFwiQ29ubmVjdGl2aXR5TW9uaXRvclwiO1xuXG4vKipcbiAqIEJyb3dzZXIgaW1wbGVtZW50YXRpb24gb2YgQ29ubmVjdGl2aXR5TW9uaXRvci5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfQnJvd3NlckNvbm5lY3Rpdml0eU1vbml0b3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLk5vID0gKCkgPT4gdGhpcy5CbygpLCB0aGlzLkxvID0gKCkgPT4gdGhpcy5rbygpLCB0aGlzLnFvID0gW10sIHRoaXMuUW8oKTtcbiAgICB9XG4gICAgT28oZSkge1xuICAgICAgICB0aGlzLnFvLnB1c2goZSk7XG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm9ubGluZVwiLCB0aGlzLk5vKSwgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJvZmZsaW5lXCIsIHRoaXMuTG8pO1xuICAgIH1cbiAgICBRbygpIHtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvbmxpbmVcIiwgdGhpcy5ObyksIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwib2ZmbGluZVwiLCB0aGlzLkxvKTtcbiAgICB9XG4gICAgQm8oKSB7XG4gICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhKdCwgXCJOZXR3b3JrIGNvbm5lY3Rpdml0eSBjaGFuZ2VkOiBBVkFJTEFCTEVcIik7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0aGlzLnFvKSBlKDAgLyogTmV0d29ya1N0YXR1cy5BVkFJTEFCTEUgKi8pO1xuICAgIH1cbiAgICBrbygpIHtcbiAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKEp0LCBcIk5ldHdvcmsgY29ubmVjdGl2aXR5IGNoYW5nZWQ6IFVOQVZBSUxBQkxFXCIpO1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdGhpcy5xbykgZSgxIC8qIE5ldHdvcmtTdGF0dXMuVU5BVkFJTEFCTEUgKi8pO1xuICAgIH1cbiAgICAvLyBUT0RPKGNoZW5icmlhbik6IENvbnNpZGVyIHBhc3NpbmcgaW4gd2luZG93IGVpdGhlciBpbnRvIHRoaXMgY29tcG9uZW50IG9yXG4gICAgLy8gaGVyZSBmb3IgdGVzdGluZyB2aWEgRmFrZVdpbmRvdy5cbiAgICAvKiogQ2hlY2tzIHRoYXQgYWxsIHVzZWQgYXR0cmlidXRlcyBvZiB3aW5kb3cgYXJlIGF2YWlsYWJsZS4gKi9cbiAgICBzdGF0aWMgdigpIHtcbiAgICAgICAgcmV0dXJuIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIHdpbmRvdyAmJiB2b2lkIDAgIT09IHdpbmRvdy5hZGRFdmVudExpc3RlbmVyICYmIHZvaWQgMCAhPT0gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXI7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGUgdmFsdWUgcmV0dXJuZWQgZnJvbSB0aGUgbW9zdCByZWNlbnQgaW52b2NhdGlvbiBvZlxuICogYGdlbmVyYXRlVW5pcXVlRGVidWdJZCgpYCwgb3IgbnVsbCBpZiBpdCBoYXMgbmV2ZXIgYmVlbiBpbnZva2VkLlxuICovIGxldCBIdCA9IG51bGw7XG5cbi8qKlxuICogR2VuZXJhdGVzIGFuZCByZXR1cm5zIGFuIGluaXRpYWwgdmFsdWUgZm9yIGBsYXN0VW5pcXVlRGVidWdJZGAuXG4gKlxuICogVGhlIHJldHVybmVkIHZhbHVlIGlzIHJhbmRvbWx5IHNlbGVjdGVkIGZyb20gYSByYW5nZSBvZiBpbnRlZ2VycyB0aGF0IGFyZVxuICogcmVwcmVzZW50ZWQgYXMgOCBoZXhhZGVjaW1hbCBkaWdpdHMuIFRoaXMgbWVhbnMgdGhhdCAod2l0aGluIHJlYXNvbikgYW55XG4gKiBudW1iZXJzIGdlbmVyYXRlZCBieSBpbmNyZW1lbnRpbmcgdGhlIHJldHVybmVkIG51bWJlciBieSAxIHdpbGwgYWxzbyBiZVxuICogcmVwcmVzZW50ZWQgYnkgOCBoZXhhZGVjaW1hbCBkaWdpdHMuIFRoaXMgbGVhZHMgdG8gYWxsIFwiSURzXCIgaGF2aW5nIHRoZSBzYW1lXG4gKiBsZW5ndGggd2hlbiBjb252ZXJ0ZWQgdG8gYSBoZXhhZGVjaW1hbCBzdHJpbmcsIG1ha2luZyByZWFkaW5nIGxvZ3MgY29udGFpbmluZ1xuICogdGhlc2UgSURzIGVhc2llciB0byBmb2xsb3cuIEFuZCBzaW5jZSB0aGUgcmV0dXJuIHZhbHVlIGlzIHJhbmRvbWx5IHNlbGVjdGVkXG4gKiBpdCB3aWxsIGhlbHAgdG8gZGlmZmVyZW50aWF0ZSBiZXR3ZWVuIGxvZ3MgZnJvbSBkaWZmZXJlbnQgZXhlY3V0aW9ucy5cbiAqL1xuLyoqXG4gKiBHZW5lcmF0ZXMgYW5kIHJldHVybnMgYSB1bmlxdWUgSUQgYXMgYSBoZXhhZGVjaW1hbCBzdHJpbmcuXG4gKlxuICogVGhlIHJldHVybmVkIElEIGlzIGludGVuZGVkIHRvIGJlIHVzZWQgaW4gZGVidWcgbG9nZ2luZyBtZXNzYWdlcyB0byBoZWxwXG4gKiBjb3JyZWxhdGUgbG9nIG1lc3NhZ2VzIHRoYXQgbWF5IGJlIHNwYXRpYWxseSBzZXBhcmF0ZWQgaW4gdGhlIGxvZ3MsIGJ1dFxuICogbG9naWNhbGx5IHJlbGF0ZWQuIEZvciBleGFtcGxlLCBhIG5ldHdvcmsgY29ubmVjdGlvbiBjb3VsZCBpbmNsdWRlIHRoZSBzYW1lXG4gKiBcImRlYnVnIElEXCIgc3RyaW5nIGluIGFsbCBvZiBpdHMgbG9nIG1lc3NhZ2VzIHRvIGhlbHAgdHJhY2UgYSBzcGVjaWZpY1xuICogY29ubmVjdGlvbiBvdmVyIHRpbWUuXG4gKlxuICogQHJldHVybiB0aGUgMTAtY2hhcmFjdGVyIGdlbmVyYXRlZCBJRCAoZS5nLiBcIjB4YTFiMmMzZDRcIikuXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9nZW5lcmF0ZVVuaXF1ZURlYnVnSWQoKSB7XG4gICAgcmV0dXJuIG51bGwgPT09IEh0ID8gSHQgPSBmdW5jdGlvbiBfX1BSSVZBVEVfZ2VuZXJhdGVJbml0aWFsVW5pcXVlRGVidWdJZCgpIHtcbiAgICAgICAgcmV0dXJuIDI2ODQzNTQ1NiArIE1hdGgucm91bmQoMjE0NzQ4MzY0OCAqIE1hdGgucmFuZG9tKCkpO1xuICAgIH0oKSA6IEh0KyssIFwiMHhcIiArIEh0LnRvU3RyaW5nKDE2KTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgWXQgPSBcIlJlc3RDb25uZWN0aW9uXCIsIFp0ID0ge1xuICAgIEJhdGNoR2V0RG9jdW1lbnRzOiBcImJhdGNoR2V0XCIsXG4gICAgQ29tbWl0OiBcImNvbW1pdFwiLFxuICAgIFJ1blF1ZXJ5OiBcInJ1blF1ZXJ5XCIsXG4gICAgUnVuQWdncmVnYXRpb25RdWVyeTogXCJydW5BZ2dyZWdhdGlvblF1ZXJ5XCJcbn07XG5cbi8qKlxuICogTWFwcyBSUEMgbmFtZXMgdG8gdGhlIGNvcnJlc3BvbmRpbmcgUkVTVCBlbmRwb2ludCBuYW1lLlxuICpcbiAqIFdlIHVzZSBhcnJheSBub3RhdGlvbiB0byBhdm9pZCBtYW5nbGluZy5cbiAqL1xuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBhbGwgUmVzdC1iYXNlZCBjb25uZWN0aW9ucyB0byB0aGUgYmFja2VuZCAoV2ViQ2hhbm5lbCBhbmRcbiAqIEhUVFApLlxuICovXG5jbGFzcyBfX1BSSVZBVEVfUmVzdENvbm5lY3Rpb24ge1xuICAgIGdldCAkbygpIHtcbiAgICAgICAgLy8gQm90aCBgaW52b2tlUlBDKClgIGFuZCBgaW52b2tlU3RyZWFtaW5nUlBDKClgIHVzZSB0aGVpciBgcGF0aGAgYXJndW1lbnRzIHRvIGRldGVybWluZVxuICAgICAgICAvLyB3aGVyZSB0byBydW4gdGhlIHF1ZXJ5LCBhbmQgZXhwZWN0IHRoZSBgcmVxdWVzdGAgdG8gTk9UIHNwZWNpZnkgdGhlIFwicGF0aFwiLlxuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5kYXRhYmFzZUluZm8gPSBlLCB0aGlzLmRhdGFiYXNlSWQgPSBlLmRhdGFiYXNlSWQ7XG4gICAgICAgIGNvbnN0IHQgPSBlLnNzbCA/IFwiaHR0cHNcIiA6IFwiaHR0cFwiLCBuID0gZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMuZGF0YWJhc2VJZC5wcm9qZWN0SWQpLCByID0gZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMuZGF0YWJhc2VJZC5kYXRhYmFzZSk7XG4gICAgICAgIHRoaXMuVW8gPSB0ICsgXCI6Ly9cIiArIGUuaG9zdCwgdGhpcy5LbyA9IGBwcm9qZWN0cy8ke259L2RhdGFiYXNlcy8ke3J9YCwgdGhpcy5XbyA9IHRoaXMuZGF0YWJhc2VJZC5kYXRhYmFzZSA9PT0gbHQgPyBgcHJvamVjdF9pZD0ke259YCA6IGBwcm9qZWN0X2lkPSR7bn0mZGF0YWJhc2VfaWQ9JHtyfWA7XG4gICAgfVxuICAgIEdvKGUsIHQsIG4sIHIsIGkpIHtcbiAgICAgICAgY29uc3QgcyA9IF9fUFJJVkFURV9nZW5lcmF0ZVVuaXF1ZURlYnVnSWQoKSwgbyA9IHRoaXMuem8oZSwgdC50b1VyaUVuY29kZWRTdHJpbmcoKSk7XG4gICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhZdCwgYFNlbmRpbmcgUlBDICcke2V9JyAke3N9OmAsIG8sIG4pO1xuICAgICAgICBjb25zdCBfID0ge1xuICAgICAgICAgICAgXCJnb29nbGUtY2xvdWQtcmVzb3VyY2UtcHJlZml4XCI6IHRoaXMuS28sXG4gICAgICAgICAgICBcIngtZ29vZy1yZXF1ZXN0LXBhcmFtc1wiOiB0aGlzLldvXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuam8oXywgciwgaSk7XG4gICAgICAgIGNvbnN0IHtob3N0OiBhfSA9IG5ldyBVUkwobyksIHUgPSBpc0Nsb3VkV29ya3N0YXRpb24oYSk7XG4gICAgICAgIHJldHVybiB0aGlzLkpvKGUsIG8sIF8sIG4sIHUpLnRoZW4oKHQgPT4gKF9fUFJJVkFURV9sb2dEZWJ1ZyhZdCwgYFJlY2VpdmVkIFJQQyAnJHtlfScgJHtzfTogYCwgdCksIFxuICAgICAgICB0KSksICh0ID0+IHtcbiAgICAgICAgICAgIHRocm93IF9fUFJJVkFURV9sb2dXYXJuKFl0LCBgUlBDICcke2V9JyAke3N9IGZhaWxlZCB3aXRoIGVycm9yOiBgLCB0LCBcInVybDogXCIsIG8sIFwicmVxdWVzdDpcIiwgbiksIFxuICAgICAgICAgICAgdDtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBIbyhlLCB0LCBuLCByLCBpLCBzKSB7XG4gICAgICAgIC8vIFRoZSBSRVNUIEFQSSBhdXRvbWF0aWNhbGx5IGFnZ3JlZ2F0ZXMgYWxsIG9mIHRoZSBzdHJlYW1lZCByZXN1bHRzLCBzbyB3ZVxuICAgICAgICAvLyBjYW4ganVzdCB1c2UgdGhlIG5vcm1hbCBpbnZva2UoKSBtZXRob2QuXG4gICAgICAgIHJldHVybiB0aGlzLkdvKGUsIHQsIG4sIHIsIGkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNb2RpZmllcyB0aGUgaGVhZGVycyBmb3IgYSByZXF1ZXN0LCBhZGRpbmcgYW55IGF1dGhvcml6YXRpb24gdG9rZW4gaWZcbiAgICAgKiBwcmVzZW50IGFuZCBhbnkgYWRkaXRpb25hbCBoZWFkZXJzIGZvciB0aGUgcmVxdWVzdC5cbiAgICAgKi8gICAgam8oZSwgdCwgbikge1xuICAgICAgICBlW1wiWC1Hb29nLUFwaS1DbGllbnRcIl0gPSBcbiAgICAgICAgLy8gU0RLX1ZFUlNJT04gaXMgdXBkYXRlZCB0byBkaWZmZXJlbnQgdmFsdWUgYXQgcnVudGltZSBkZXBlbmRpbmcgb24gdGhlIGVudHJ5IHBvaW50LFxuICAgICAgICAvLyBzbyB3ZSBuZWVkIHRvIGdldCBpdHMgdmFsdWUgd2hlbiB3ZSBuZWVkIGl0IGluIGEgZnVuY3Rpb24uXG4gICAgICAgIGZ1bmN0aW9uIF9fUFJJVkFURV9nZXRHb29nQXBpQ2xpZW50VmFsdWUoKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJnbC1qcy8gZmlyZS9cIiArIHg7XG4gICAgICAgIH0oKSwgXG4gICAgICAgIC8vIENvbnRlbnQtVHlwZTogdGV4dC9wbGFpbiB3aWxsIGF2b2lkIHByZWZsaWdodCByZXF1ZXN0cyB3aGljaCBtaWdodFxuICAgICAgICAvLyBtZXNzIHdpdGggQ09SUyBhbmQgcmVkaXJlY3RzIGJ5IHByb3hpZXMuIElmIHdlIGFkZCBjdXN0b20gaGVhZGVyc1xuICAgICAgICAvLyB3ZSB3aWxsIG5lZWQgdG8gY2hhbmdlIHRoaXMgY29kZSB0byBwb3RlbnRpYWxseSB1c2UgdGhlICRodHRwT3ZlcndyaXRlXG4gICAgICAgIC8vIHBhcmFtZXRlciBzdXBwb3J0ZWQgYnkgRVNGIHRvIGF2b2lkIHRyaWdnZXJpbmcgcHJlZmxpZ2h0IHJlcXVlc3RzLlxuICAgICAgICBlW1wiQ29udGVudC1UeXBlXCJdID0gXCJ0ZXh0L3BsYWluXCIsIHRoaXMuZGF0YWJhc2VJbmZvLmFwcElkICYmIChlW1wiWC1GaXJlYmFzZS1HTVBJRFwiXSA9IHRoaXMuZGF0YWJhc2VJbmZvLmFwcElkKSwgXG4gICAgICAgIHQgJiYgdC5oZWFkZXJzLmZvckVhY2goKCh0LCBuKSA9PiBlW25dID0gdCkpLCBuICYmIG4uaGVhZGVycy5mb3JFYWNoKCgodCwgbikgPT4gZVtuXSA9IHQpKTtcbiAgICB9XG4gICAgem8oZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gWnRbZV07XG4gICAgICAgIHJldHVybiBgJHt0aGlzLlVvfS92MS8ke3R9OiR7bn1gO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbG9zZXMgYW5kIGNsZWFucyB1cCBhbnkgcmVzb3VyY2VzIGFzc29jaWF0ZWQgd2l0aCB0aGUgY29ubmVjdGlvbi4gVGhpc1xuICAgICAqIGltcGxlbWVudGF0aW9uIGlzIGEgbm8tb3AgYmVjYXVzZSB0aGVyZSBhcmUgbm8gcmVzb3VyY2VzIGFzc29jaWF0ZWRcbiAgICAgKiB3aXRoIHRoZSBSZXN0Q29ubmVjdGlvbiB0aGF0IG5lZWQgdG8gYmUgY2xlYW5lZCB1cC5cbiAgICAgKi8gICAgdGVybWluYXRlKCkge1xuICAgICAgICAvLyBOby1vcFxuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUHJvdmlkZXMgYSBzaW1wbGUgaGVscGVyIGNsYXNzIHRoYXQgaW1wbGVtZW50cyB0aGUgU3RyZWFtIGludGVyZmFjZSB0b1xuICogYnJpZGdlIHRvIG90aGVyIGltcGxlbWVudGF0aW9ucyB0aGF0IGFyZSBzdHJlYW1zIGJ1dCBkbyBub3QgaW1wbGVtZW50IHRoZVxuICogaW50ZXJmYWNlLiBUaGUgc3RyZWFtIGNhbGxiYWNrcyBhcmUgaW52b2tlZCB3aXRoIHRoZSBjYWxsT24uLi4gbWV0aG9kcy5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfU3RyZWFtQnJpZGdlIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuWW8gPSBlLllvLCB0aGlzLlpvID0gZS5abztcbiAgICB9XG4gICAgWG8oZSkge1xuICAgICAgICB0aGlzLmVfID0gZTtcbiAgICB9XG4gICAgdF8oZSkge1xuICAgICAgICB0aGlzLm5fID0gZTtcbiAgICB9XG4gICAgcl8oZSkge1xuICAgICAgICB0aGlzLmlfID0gZTtcbiAgICB9XG4gICAgb25NZXNzYWdlKGUpIHtcbiAgICAgICAgdGhpcy5zXyA9IGU7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLlpvKCk7XG4gICAgfVxuICAgIHNlbmQoZSkge1xuICAgICAgICB0aGlzLllvKGUpO1xuICAgIH1cbiAgICBvXygpIHtcbiAgICAgICAgdGhpcy5lXygpO1xuICAgIH1cbiAgICBfXygpIHtcbiAgICAgICAgdGhpcy5uXygpO1xuICAgIH1cbiAgICBhXyhlKSB7XG4gICAgICAgIHRoaXMuaV8oZSk7XG4gICAgfVxuICAgIHVfKGUpIHtcbiAgICAgICAgdGhpcy5zXyhlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IFh0ID0gXCJXZWJDaGFubmVsQ29ubmVjdGlvblwiO1xuXG5jbGFzcyBfX1BSSVZBVEVfV2ViQ2hhbm5lbENvbm5lY3Rpb24gZXh0ZW5kcyBfX1BSSVZBVEVfUmVzdENvbm5lY3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgc3VwZXIoZSksIFxuICAgICAgICAvKiogQSBjb2xsZWN0aW9uIG9mIG9wZW4gV2ViQ2hhbm5lbCBpbnN0YW5jZXMgKi9cbiAgICAgICAgdGhpcy5jXyA9IFtdLCB0aGlzLmZvcmNlTG9uZ1BvbGxpbmcgPSBlLmZvcmNlTG9uZ1BvbGxpbmcsIHRoaXMuYXV0b0RldGVjdExvbmdQb2xsaW5nID0gZS5hdXRvRGV0ZWN0TG9uZ1BvbGxpbmcsIFxuICAgICAgICB0aGlzLnVzZUZldGNoU3RyZWFtcyA9IGUudXNlRmV0Y2hTdHJlYW1zLCB0aGlzLmxvbmdQb2xsaW5nT3B0aW9ucyA9IGUubG9uZ1BvbGxpbmdPcHRpb25zO1xuICAgIH1cbiAgICBKbyhlLCB0LCBuLCByLCBpKSB7XG4gICAgICAgIGNvbnN0IHMgPSBfX1BSSVZBVEVfZ2VuZXJhdGVVbmlxdWVEZWJ1Z0lkKCk7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgoKGksIG8pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IF8gPSBuZXcgWGhySW87XG4gICAgICAgICAgICBfLnNldFdpdGhDcmVkZW50aWFscyghMCksIF8ubGlzdGVuT25jZShFdmVudFR5cGUuQ09NUExFVEUsICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfLmdldExhc3RFcnJvckNvZGUoKSkge1xuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRXJyb3JDb2RlLk5PX0VSUk9SOlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IF8uZ2V0UmVzcG9uc2VKc29uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoWHQsIGBYSFIgZm9yIFJQQyAnJHtlfScgJHtzfSByZWNlaXZlZDpgLCBKU09OLnN0cmluZ2lmeSh0KSksIFxuICAgICAgICAgICAgICAgICAgICAgICAgaSh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSBFcnJvckNvZGUuVElNRU9VVDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhYdCwgYFJQQyAnJHtlfScgJHtzfSB0aW1lZCBvdXRgKSwgbyhuZXcgRmlyZXN0b3JlRXJyb3IoTi5ERUFETElORV9FWENFRURFRCwgXCJSZXF1ZXN0IHRpbWUgb3V0XCIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSBFcnJvckNvZGUuSFRUUF9FUlJPUjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBfLmdldFN0YXR1cygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9fUFJJVkFURV9sb2dEZWJ1ZyhYdCwgYFJQQyAnJHtlfScgJHtzfSBmYWlsZWQgd2l0aCBzdGF0dXM6YCwgbiwgXCJyZXNwb25zZSB0ZXh0OlwiLCBfLmdldFJlc3BvbnNlVGV4dCgpKSwgXG4gICAgICAgICAgICAgICAgICAgICAgICBuID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlID0gXy5nZXRSZXNwb25zZUpzb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBcnJheS5pc0FycmF5KGUpICYmIChlID0gZVswXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IGU/LmVycm9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIHQuc3RhdHVzICYmIHQubWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gZnVuY3Rpb24gX19QUklWQVRFX21hcENvZGVGcm9tSHR0cFJlc3BvbnNlRXJyb3JTdGF0dXMoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IGUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9fL2csIFwiLVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QudmFsdWVzKE4pLmluZGV4T2YodCkgPj0gMCA/IHQgOiBOLlVOS05PV047XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0odC5zdGF0dXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvKG5ldyBGaXJlc3RvcmVFcnJvcihlLCB0Lm1lc3NhZ2UpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgbyhuZXcgRmlyZXN0b3JlRXJyb3IoTi5VTktOT1dOLCBcIlNlcnZlciByZXNwb25kZWQgd2l0aCBzdGF0dXMgXCIgKyBfLmdldFN0YXR1cygpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSByZWNlaXZlZCBhbiBIVFRQX0VSUk9SIGJ1dCB0aGVyZSdzIG5vIHN0YXR1cyBjb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaXQncyBtb3N0IHByb2JhYmx5IGEgY29ubmVjdGlvbiBpc3N1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgbyhuZXcgRmlyZXN0b3JlRXJyb3IoTi5VTkFWQUlMQUJMRSwgXCJDb25uZWN0aW9uIGZhaWxlZC5cIikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgZmFpbCg5MDU1LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbF86IGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtSWQ6IHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaF86IF8uZ2V0TGFzdEVycm9yQ29kZSgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBfOiBfLmdldExhc3RFcnJvcigpXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhYdCwgYFJQQyAnJHtlfScgJHtzfSBjb21wbGV0ZWQuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgY29uc3QgYSA9IEpTT04uc3RyaW5naWZ5KHIpO1xuICAgICAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFh0LCBgUlBDICcke2V9JyAke3N9IHNlbmRpbmcgcmVxdWVzdDpgLCByKSwgXy5zZW5kKHQsIFwiUE9TVFwiLCBhLCBuLCAxNSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgVF8oZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gX19QUklWQVRFX2dlbmVyYXRlVW5pcXVlRGVidWdJZCgpLCBpID0gWyB0aGlzLlVvLCBcIi9cIiwgXCJnb29nbGUuZmlyZXN0b3JlLnYxLkZpcmVzdG9yZVwiLCBcIi9cIiwgZSwgXCIvY2hhbm5lbFwiIF0sIHMgPSBjcmVhdGVXZWJDaGFubmVsVHJhbnNwb3J0KCksIG8gPSBnZXRTdGF0RXZlbnRUYXJnZXQoKSwgXyA9IHtcbiAgICAgICAgICAgIC8vIFJlcXVpcmVkIGZvciBiYWNrZW5kIHN0aWNraW5lc3MsIHJvdXRpbmcgYmVoYXZpb3IgaXMgYmFzZWQgb24gdGhpc1xuICAgICAgICAgICAgLy8gcGFyYW1ldGVyLlxuICAgICAgICAgICAgaHR0cFNlc3Npb25JZFBhcmFtOiBcImdzZXNzaW9uaWRcIixcbiAgICAgICAgICAgIGluaXRNZXNzYWdlSGVhZGVyczoge30sXG4gICAgICAgICAgICBtZXNzYWdlVXJsUGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBwYXJhbSBpcyB1c2VkIHRvIGltcHJvdmUgcm91dGluZyBhbmQgcHJvamVjdCBpc29sYXRpb24gYnkgdGhlXG4gICAgICAgICAgICAgICAgLy8gYmFja2VuZCBhbmQgbXVzdCBiZSBpbmNsdWRlZCBpbiBldmVyeSByZXF1ZXN0LlxuICAgICAgICAgICAgICAgIGRhdGFiYXNlOiBgcHJvamVjdHMvJHt0aGlzLmRhdGFiYXNlSWQucHJvamVjdElkfS9kYXRhYmFzZXMvJHt0aGlzLmRhdGFiYXNlSWQuZGF0YWJhc2V9YFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNlbmRSYXdKc29uOiAhMCxcbiAgICAgICAgICAgIHN1cHBvcnRzQ3Jvc3NEb21haW5YaHI6ICEwLFxuICAgICAgICAgICAgaW50ZXJuYWxDaGFubmVsUGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgLy8gT3ZlcnJpZGUgdGhlIGRlZmF1bHQgdGltZW91dCAocmFuZG9taXplZCBiZXR3ZWVuIDEwLTIwIHNlY29uZHMpIHNpbmNlXG4gICAgICAgICAgICAgICAgLy8gYSBsYXJnZSB3cml0ZSBiYXRjaCBvbiBhIHNsb3cgaW50ZXJuZXQgY29ubmVjdGlvbiBtYXkgdGFrZSBhIGxvbmdcbiAgICAgICAgICAgICAgICAvLyB0aW1lIHRvIHNlbmQgdG8gdGhlIGJhY2tlbmQuIFJhdGhlciB0aGFuIGhhdmUgV2ViQ2hhbm5lbCBpbXBvc2UgYVxuICAgICAgICAgICAgICAgIC8vIHRpZ2h0IHRpbWVvdXQgd2hpY2ggY291bGQgbGVhZCB0byBpbmZpbml0ZSB0aW1lb3V0cyBhbmQgcmV0cmllcywgd2VcbiAgICAgICAgICAgICAgICAvLyBzZXQgaXQgdmVyeSBsYXJnZSAoNS0xMCBtaW51dGVzKSBhbmQgcmVseSBvbiB0aGUgYnJvd3NlcidzIGJ1aWx0aW5cbiAgICAgICAgICAgICAgICAvLyB0aW1lb3V0cyB0byBraWNrIGluIGlmIHRoZSByZXF1ZXN0IGlzbid0IHdvcmtpbmcuXG4gICAgICAgICAgICAgICAgZm9yd2FyZENoYW5uZWxSZXF1ZXN0VGltZW91dE1zOiA2ZTVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmb3JjZUxvbmdQb2xsaW5nOiB0aGlzLmZvcmNlTG9uZ1BvbGxpbmcsXG4gICAgICAgICAgICBkZXRlY3RCdWZmZXJpbmdQcm94eTogdGhpcy5hdXRvRGV0ZWN0TG9uZ1BvbGxpbmdcbiAgICAgICAgfSwgYSA9IHRoaXMubG9uZ1BvbGxpbmdPcHRpb25zLnRpbWVvdXRTZWNvbmRzO1xuICAgICAgICB2b2lkIDAgIT09IGEgJiYgKF8ubG9uZ1BvbGxpbmdUaW1lb3V0ID0gTWF0aC5yb3VuZCgxZTMgKiBhKSksIHRoaXMudXNlRmV0Y2hTdHJlYW1zICYmIChfLnVzZUZldGNoU3RyZWFtcyA9ICEwKSwgXG4gICAgICAgIHRoaXMuam8oXy5pbml0TWVzc2FnZUhlYWRlcnMsIHQsIG4pLCBcbiAgICAgICAgLy8gU2VuZGluZyB0aGUgY3VzdG9tIGhlYWRlcnMgd2UganVzdCBhZGRlZCB0byByZXF1ZXN0LmluaXRNZXNzYWdlSGVhZGVyc1xuICAgICAgICAvLyAoQXV0aG9yaXphdGlvbiwgZXRjLikgd2lsbCB0cmlnZ2VyIHRoZSBicm93c2VyIHRvIG1ha2UgYSBDT1JTIHByZWZsaWdodFxuICAgICAgICAvLyByZXF1ZXN0IGJlY2F1c2UgdGhlIFhIUiB3aWxsIG5vIGxvbmdlciBtZWV0IHRoZSBjcml0ZXJpYSBmb3IgYSBcInNpbXBsZVwiXG4gICAgICAgIC8vIENPUlMgcmVxdWVzdDpcbiAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRUUC9DT1JTI1NpbXBsZV9yZXF1ZXN0c1xuICAgICAgICAvLyBUaGVyZWZvcmUgdG8gYXZvaWQgdGhlIENPUlMgcHJlZmxpZ2h0IHJlcXVlc3QgKGFuIGV4dHJhIG5ldHdvcmtcbiAgICAgICAgLy8gcm91bmR0cmlwKSwgd2UgdXNlIHRoZSBlbmNvZGVJbml0TWVzc2FnZUhlYWRlcnMgb3B0aW9uIHRvIHNwZWNpZnkgdGhhdFxuICAgICAgICAvLyB0aGUgaGVhZGVycyBzaG91bGQgaW5zdGVhZCBiZSBlbmNvZGVkIGluIHRoZSByZXF1ZXN0J3MgUE9TVCBwYXlsb2FkLFxuICAgICAgICAvLyB3aGljaCBpcyByZWNvZ25pemVkIGJ5IHRoZSB3ZWJjaGFubmVsIGJhY2tlbmQuXG4gICAgICAgIF8uZW5jb2RlSW5pdE1lc3NhZ2VIZWFkZXJzID0gITA7XG4gICAgICAgIGNvbnN0IHUgPSBpLmpvaW4oXCJcIik7XG4gICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhYdCwgYENyZWF0aW5nIFJQQyAnJHtlfScgc3RyZWFtICR7cn06ICR7dX1gLCBfKTtcbiAgICAgICAgY29uc3QgYyA9IHMuY3JlYXRlV2ViQ2hhbm5lbCh1LCBfKTtcbiAgICAgICAgdGhpcy5JXyhjKTtcbiAgICAgICAgLy8gV2ViQ2hhbm5lbCBzdXBwb3J0cyBzZW5kaW5nIHRoZSBmaXJzdCBtZXNzYWdlIHdpdGggdGhlIGhhbmRzaGFrZSAtIHNhdmluZ1xuICAgICAgICAvLyBhIG5ldHdvcmsgcm91bmQgdHJpcC4gSG93ZXZlciwgaXQgd2lsbCBoYXZlIHRvIGNhbGwgc2VuZCBpbiB0aGUgc2FtZVxuICAgICAgICAvLyBKUyBldmVudCBsb29wIGFzIG9wZW4uIEluIG9yZGVyIHRvIGVuZm9yY2UgdGhpcywgd2UgZGVsYXkgYWN0dWFsbHlcbiAgICAgICAgLy8gb3BlbmluZyB0aGUgV2ViQ2hhbm5lbCB1bnRpbCBzZW5kIGlzIGNhbGxlZC4gV2hldGhlciB3ZSBoYXZlIGNhbGxlZFxuICAgICAgICAvLyBvcGVuIGlzIHRyYWNrZWQgd2l0aCB0aGlzIHZhcmlhYmxlLlxuICAgICAgICBsZXQgbCA9ICExLCBoID0gITE7XG4gICAgICAgIC8vIEEgZmxhZyB0byBkZXRlcm1pbmUgd2hldGhlciB0aGUgc3RyZWFtIHdhcyBjbG9zZWQgKGJ5IHVzIG9yIHRocm91Z2ggYW5cbiAgICAgICAgLy8gZXJyb3IvY2xvc2UgZXZlbnQpIHRvIGF2b2lkIGRlbGl2ZXJpbmcgbXVsdGlwbGUgY2xvc2UgZXZlbnRzIG9yIHNlbmRpbmdcbiAgICAgICAgLy8gb24gYSBjbG9zZWQgc3RyZWFtXG4gICAgICAgICAgICAgICAgY29uc3QgUCA9IG5ldyBfX1BSSVZBVEVfU3RyZWFtQnJpZGdlKHtcbiAgICAgICAgICAgIFlvOiB0ID0+IHtcbiAgICAgICAgICAgICAgICBoID8gX19QUklWQVRFX2xvZ0RlYnVnKFh0LCBgTm90IHNlbmRpbmcgYmVjYXVzZSBSUEMgJyR7ZX0nIHN0cmVhbSAke3J9IGlzIGNsb3NlZDpgLCB0KSA6IChsIHx8IChfX1BSSVZBVEVfbG9nRGVidWcoWHQsIGBPcGVuaW5nIFJQQyAnJHtlfScgc3RyZWFtICR7cn0gdHJhbnNwb3J0LmApLCBcbiAgICAgICAgICAgICAgICBjLm9wZW4oKSwgbCA9ICEwKSwgX19QUklWQVRFX2xvZ0RlYnVnKFh0LCBgUlBDICcke2V9JyBzdHJlYW0gJHtyfSBzZW5kaW5nOmAsIHQpLCBcbiAgICAgICAgICAgICAgICBjLnNlbmQodCkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFpvOiAoKSA9PiBjLmNsb3NlKClcbiAgICAgICAgfSksIF9fUFJJVkFURV91bmd1YXJkZWRFdmVudExpc3RlbiA9IChlLCB0LCBuKSA9PiB7XG4gICAgICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IGNsb3N1cmUgdHlwaW5nIHNlZW1zIGJyb2tlbiBiZWNhdXNlIFdlYkNoYW5uZWwgZG9lc1xuICAgICAgICAgICAgLy8gbm90IGltcGxlbWVudCBnb29nLmV2ZW50cy5MaXN0ZW5hYmxlXG4gICAgICAgICAgICBlLmxpc3Rlbih0LCAoZSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgbihlKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICAgICAgICAgIH0pLCAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH07XG4gICAgICAgIC8vIENsb3N1cmUgZXZlbnRzIGFyZSBndWFyZGVkIGFuZCBleGNlcHRpb25zIGFyZSBzd2FsbG93ZWQsIHNvIGNhdGNoIGFueVxuICAgICAgICAvLyBleGNlcHRpb24gYW5kIHJldGhyb3cgdXNpbmcgYSBzZXRUaW1lb3V0IHNvIHRoZXkgYmVjb21lIHZpc2libGUgYWdhaW4uXG4gICAgICAgIC8vIE5vdGUgdGhhdCBldmVudHVhbGx5IHRoaXMgZnVuY3Rpb24gY291bGQgZ28gYXdheSBpZiB3ZSBhcmUgY29uZmlkZW50XG4gICAgICAgIC8vIGVub3VnaCB0aGUgY29kZSBpcyBleGNlcHRpb24gZnJlZS5cbiAgICAgICAgICAgICAgICByZXR1cm4gX19QUklWQVRFX3VuZ3VhcmRlZEV2ZW50TGlzdGVuKGMsIFdlYkNoYW5uZWwuRXZlbnRUeXBlLk9QRU4sICgoKSA9PiB7XG4gICAgICAgICAgICBoIHx8IChfX1BSSVZBVEVfbG9nRGVidWcoWHQsIGBSUEMgJyR7ZX0nIHN0cmVhbSAke3J9IHRyYW5zcG9ydCBvcGVuZWQuYCksIFAub18oKSk7XG4gICAgICAgIH0pKSwgX19QUklWQVRFX3VuZ3VhcmRlZEV2ZW50TGlzdGVuKGMsIFdlYkNoYW5uZWwuRXZlbnRUeXBlLkNMT1NFLCAoKCkgPT4ge1xuICAgICAgICAgICAgaCB8fCAoaCA9ICEwLCBfX1BSSVZBVEVfbG9nRGVidWcoWHQsIGBSUEMgJyR7ZX0nIHN0cmVhbSAke3J9IHRyYW5zcG9ydCBjbG9zZWRgKSwgXG4gICAgICAgICAgICBQLmFfKCksIHRoaXMuRV8oYykpO1xuICAgICAgICB9KSksIF9fUFJJVkFURV91bmd1YXJkZWRFdmVudExpc3RlbihjLCBXZWJDaGFubmVsLkV2ZW50VHlwZS5FUlJPUiwgKHQgPT4ge1xuICAgICAgICAgICAgaCB8fCAoaCA9ICEwLCBfX1BSSVZBVEVfbG9nV2FybihYdCwgYFJQQyAnJHtlfScgc3RyZWFtICR7cn0gdHJhbnNwb3J0IGVycm9yZWQuIE5hbWU6YCwgdC5uYW1lLCBcIk1lc3NhZ2U6XCIsIHQubWVzc2FnZSksIFxuICAgICAgICAgICAgUC5hXyhuZXcgRmlyZXN0b3JlRXJyb3IoTi5VTkFWQUlMQUJMRSwgXCJUaGUgb3BlcmF0aW9uIGNvdWxkIG5vdCBiZSBjb21wbGV0ZWRcIikpKTtcbiAgICAgICAgfSkpLCBfX1BSSVZBVEVfdW5ndWFyZGVkRXZlbnRMaXN0ZW4oYywgV2ViQ2hhbm5lbC5FdmVudFR5cGUuTUVTU0FHRSwgKHQgPT4ge1xuICAgICAgICAgICAgaWYgKCFoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IHQuZGF0YVswXTtcbiAgICAgICAgICAgICAgICBfX1BSSVZBVEVfaGFyZEFzc2VydCghIW4sIDE2MzQ5KTtcbiAgICAgICAgICAgICAgICAvLyBUT0RPKGIvMzUxNDM4OTEpOiBUaGVyZSBpcyBhIGJ1ZyBpbiBPbmUgUGxhdGZvcm0gdGhhdCBjYXVzZWQgZXJyb3JzXG4gICAgICAgICAgICAgICAgLy8gKGFuZCBvbmx5IGVycm9ycykgdG8gYmUgd3JhcHBlZCBpbiBhbiBleHRyYSBhcnJheS4gVG8gYmUgZm9yd2FyZFxuICAgICAgICAgICAgICAgIC8vIGNvbXBhdGlibGUgd2l0aCB0aGUgYnVnIHdlIG5lZWQgdG8gY2hlY2sgZWl0aGVyIGNvbmRpdGlvbi4gVGhlIGxhdHRlclxuICAgICAgICAgICAgICAgIC8vIGNhbiBiZSByZW1vdmVkIG9uY2UgdGhlIGZpeCBoYXMgYmVlbiByb2xsZWQgb3V0LlxuICAgICAgICAgICAgICAgIC8vIFVzZSBhbnkgYmVjYXVzZSBtc2dEYXRhLmVycm9yIGlzIG5vdCB0eXBlZC5cbiAgICAgICAgICAgICAgICBjb25zdCBpID0gbiwgcyA9IGk/LmVycm9yIHx8IGlbMF0/LmVycm9yO1xuICAgICAgICAgICAgICAgIGlmIChzKSB7XG4gICAgICAgICAgICAgICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhYdCwgYFJQQyAnJHtlfScgc3RyZWFtICR7cn0gcmVjZWl2ZWQgZXJyb3I6YCwgcyk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVycm9yLnN0YXR1cyB3aWxsIGJlIGEgc3RyaW5nIGxpa2UgJ09LJyBvciAnTk9UX0ZPVU5EJy5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IHMuc3RhdHVzO1xuICAgICAgICAgICAgICAgICAgICBsZXQgbiA9IFxuICAgICAgICAgICAgICAgICAgICAvKipcbiAqIE1hcHMgYW4gZXJyb3IgQ29kZSBmcm9tIGEgR1JQQyBzdGF0dXMgaWRlbnRpZmllciBsaWtlICdOT1RfRk9VTkQnLlxuICpcbiAqIEByZXR1cm5zIFRoZSBDb2RlIGVxdWl2YWxlbnQgdG8gdGhlIGdpdmVuIHN0YXR1cyBzdHJpbmcgb3IgdW5kZWZpbmVkIGlmXG4gKiAgICAgdGhlcmUgaXMgbm8gbWF0Y2guXG4gKi9cbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX21hcENvZGVGcm9tUnBjU3RhdHVzKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxvb2t1cCBieSBzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gcHRbZV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwICE9PSB0KSByZXR1cm4gX19QUklWQVRFX21hcENvZGVGcm9tUnBjQ29kZSh0KTtcbiAgICAgICAgICAgICAgICAgICAgfSh0KSwgaSA9IHMubWVzc2FnZTtcbiAgICAgICAgICAgICAgICAgICAgdm9pZCAwID09PSBuICYmIChuID0gTi5JTlRFUk5BTCwgaSA9IFwiVW5rbm93biBlcnJvciBzdGF0dXM6IFwiICsgdCArIFwiIHdpdGggbWVzc2FnZSBcIiArIHMubWVzc2FnZSksIFxuICAgICAgICAgICAgICAgICAgICAvLyBNYXJrIGNsb3NlZCBzbyBubyBmdXJ0aGVyIGV2ZW50cyBhcmUgcHJvcGFnYXRlZFxuICAgICAgICAgICAgICAgICAgICBoID0gITAsIFAuYV8obmV3IEZpcmVzdG9yZUVycm9yKG4sIGkpKSwgYy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBfX1BSSVZBVEVfbG9nRGVidWcoWHQsIGBSUEMgJyR7ZX0nIHN0cmVhbSAke3J9IHJlY2VpdmVkOmAsIG4pLCBQLnVfKG4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSksIF9fUFJJVkFURV91bmd1YXJkZWRFdmVudExpc3RlbihvLCBFdmVudC5TVEFUX0VWRU5ULCAodCA9PiB7XG4gICAgICAgICAgICB0LnN0YXQgPT09IFN0YXQuUFJPWFkgPyBfX1BSSVZBVEVfbG9nRGVidWcoWHQsIGBSUEMgJyR7ZX0nIHN0cmVhbSAke3J9IGRldGVjdGVkIGJ1ZmZlcmluZyBwcm94eWApIDogdC5zdGF0ID09PSBTdGF0Lk5PUFJPWFkgJiYgX19QUklWQVRFX2xvZ0RlYnVnKFh0LCBgUlBDICcke2V9JyBzdHJlYW0gJHtyfSBkZXRlY3RlZCBubyBidWZmZXJpbmcgcHJveHlgKTtcbiAgICAgICAgfSkpLCBzZXRUaW1lb3V0KCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBUZWNobmljYWxseSB3ZSBjb3VsZC9zaG91bGQgd2FpdCBmb3IgdGhlIFdlYkNoYW5uZWwgb3BlbmVkIGV2ZW50LFxuICAgICAgICAgICAgLy8gYnV0IGJlY2F1c2Ugd2Ugd2FudCB0byBzZW5kIHRoZSBmaXJzdCBtZXNzYWdlIHdpdGggdGhlIFdlYkNoYW5uZWxcbiAgICAgICAgICAgIC8vIGhhbmRzaGFrZSB3ZSBwcmV0ZW5kIHRoZSBjaGFubmVsIG9wZW5lZCBoZXJlIChhc3luY2hyb25vdXNseSksIGFuZFxuICAgICAgICAgICAgLy8gdGhlbiBkZWxheSB0aGUgYWN0dWFsIG9wZW4gdW50aWwgdGhlIGZpcnN0IG1lc3NhZ2UgaXMgc2VudC5cbiAgICAgICAgICAgIFAuX18oKTtcbiAgICAgICAgfSksIDApLCBQO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbG9zZXMgYW5kIGNsZWFucyB1cCBhbnkgcmVzb3VyY2VzIGFzc29jaWF0ZWQgd2l0aCB0aGUgY29ubmVjdGlvbi5cbiAgICAgKi8gICAgdGVybWluYXRlKCkge1xuICAgICAgICAvLyBJZiB0aGUgRmlyZXN0b3JlIGluc3RhbmNlIGlzIHRlcm1pbmF0ZWQsIHdlIHdpbGwgZXhwbGljaXRseVxuICAgICAgICAvLyBjbG9zZSBhbnkgcmVtYWluaW5nIG9wZW4gV2ViQ2hhbm5lbCBpbnN0YW5jZXMuXG4gICAgICAgIHRoaXMuY18uZm9yRWFjaCgoZSA9PiBlLmNsb3NlKCkpKSwgdGhpcy5jXyA9IFtdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGQgYSBXZWJDaGFubmVsIGluc3RhbmNlIHRvIHRoZSBjb2xsZWN0aW9uIG9mIG9wZW4gaW5zdGFuY2VzLlxuICAgICAqIEBwYXJhbSB3ZWJDaGFubmVsXG4gICAgICovICAgIElfKGUpIHtcbiAgICAgICAgdGhpcy5jXy5wdXNoKGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYSBXZWJDaGFubmVsIGluc3RhbmNlIGZyb20gdGhlIGNvbGxlY3Rpb24gb2Ygb3BlbiBpbnN0YW5jZXMuXG4gICAgICogQHBhcmFtIHdlYkNoYW5uZWxcbiAgICAgKi8gICAgRV8oZSkge1xuICAgICAgICB0aGlzLmNfID0gdGhpcy5jXy5maWx0ZXIoKHQgPT4gdCA9PT0gZSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBJbml0aWFsaXplcyB0aGUgV2ViQ2hhbm5lbENvbm5lY3Rpb24gZm9yIHRoZSBicm93c2VyLiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBUaGUgUGxhdGZvcm0ncyAnd2luZG93JyBpbXBsZW1lbnRhdGlvbiBvciBudWxsIGlmIG5vdCBhdmFpbGFibGUuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfZ2V0V2luZG93KCkge1xuICAgIC8vIGB3aW5kb3dgIGlzIG5vdCBhbHdheXMgYXZhaWxhYmxlLCBlLmcuIGluIFJlYWN0TmF0aXZlIGFuZCBXZWJXb3JrZXJzLlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWdsb2JhbHNcbiAgICByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2Ygd2luZG93ID8gd2luZG93IDogbnVsbDtcbn1cblxuLyoqIFRoZSBQbGF0Zm9ybSdzICdkb2N1bWVudCcgaW1wbGVtZW50YXRpb24gb3IgbnVsbCBpZiBub3QgYXZhaWxhYmxlLiAqLyBmdW5jdGlvbiBnZXREb2N1bWVudCgpIHtcbiAgICAvLyBgZG9jdW1lbnRgIGlzIG5vdCBhbHdheXMgYXZhaWxhYmxlLCBlLmcuIGluIFJlYWN0TmF0aXZlIGFuZCBXZWJXb3JrZXJzLlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWdsb2JhbHNcbiAgICByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgZG9jdW1lbnQgPyBkb2N1bWVudCA6IG51bGw7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdTZXJpYWxpemVyKGUpIHtcbiAgICByZXR1cm4gbmV3IEpzb25Qcm90b1NlcmlhbGl6ZXIoZSwgLyogdXNlUHJvdG8zSnNvbj0gKi8gITApO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGhlbHBlciBmb3IgcnVubmluZyBkZWxheWVkIHRhc2tzIGZvbGxvd2luZyBhbiBleHBvbmVudGlhbCBiYWNrb2ZmIGN1cnZlXG4gKiBiZXR3ZWVuIGF0dGVtcHRzLlxuICpcbiAqIEVhY2ggZGVsYXkgaXMgbWFkZSB1cCBvZiBhIFwiYmFzZVwiIGRlbGF5IHdoaWNoIGZvbGxvd3MgdGhlIGV4cG9uZW50aWFsXG4gKiBiYWNrb2ZmIGN1cnZlLCBhbmQgYSArLy0gNTAlIFwiaml0dGVyXCIgdGhhdCBpcyBjYWxjdWxhdGVkIGFuZCBhZGRlZCB0byB0aGVcbiAqIGJhc2UgZGVsYXkuIFRoaXMgcHJldmVudHMgY2xpZW50cyBmcm9tIGFjY2lkZW50YWxseSBzeW5jaHJvbml6aW5nIHRoZWlyXG4gKiBkZWxheXMgY2F1c2luZyBzcGlrZXMgb2YgbG9hZCB0byB0aGUgYmFja2VuZC5cbiAqL1xuY2xhc3MgX19QUklWQVRFX0V4cG9uZW50aWFsQmFja29mZiB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIEFzeW5jUXVldWUgdG8gcnVuIGJhY2tvZmYgb3BlcmF0aW9ucyBvbi5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKipcbiAgICAgKiBUaGUgSUQgdG8gdXNlIHdoZW4gc2NoZWR1bGluZyBiYWNrb2ZmIG9wZXJhdGlvbnMgb24gdGhlIEFzeW5jUXVldWUuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIGluaXRpYWwgZGVsYXkgKHVzZWQgYXMgdGhlIGJhc2UgZGVsYXkgb24gdGhlIGZpcnN0IHJldHJ5IGF0dGVtcHQpLlxuICAgICAqIE5vdGUgdGhhdCBqaXR0ZXIgd2lsbCBzdGlsbCBiZSBhcHBsaWVkLCBzbyB0aGUgYWN0dWFsIGRlbGF5IGNvdWxkIGJlIGFzXG4gICAgICogbGl0dGxlIGFzIDAuNSppbml0aWFsRGVsYXlNcy5cbiAgICAgKi9cbiAgICBuID0gMWUzXG4gICAgLyoqXG4gICAgICogVGhlIG11bHRpcGxpZXIgdG8gdXNlIHRvIGRldGVybWluZSB0aGUgZXh0ZW5kZWQgYmFzZSBkZWxheSBhZnRlciBlYWNoXG4gICAgICogYXR0ZW1wdC5cbiAgICAgKi8gLCByID0gMS41XG4gICAgLyoqXG4gICAgICogVGhlIG1heGltdW0gYmFzZSBkZWxheSBhZnRlciB3aGljaCBubyBmdXJ0aGVyIGJhY2tvZmYgaXMgcGVyZm9ybWVkLlxuICAgICAqIE5vdGUgdGhhdCBqaXR0ZXIgd2lsbCBzdGlsbCBiZSBhcHBsaWVkLCBzbyB0aGUgYWN0dWFsIGRlbGF5IGNvdWxkIGJlIGFzXG4gICAgICogbXVjaCBhcyAxLjUqbWF4RGVsYXlNcy5cbiAgICAgKi8gLCBpID0gNmU0KSB7XG4gICAgICAgIHRoaXMuTWkgPSBlLCB0aGlzLnRpbWVySWQgPSB0LCB0aGlzLmRfID0gbiwgdGhpcy5BXyA9IHIsIHRoaXMuUl8gPSBpLCB0aGlzLlZfID0gMCwgXG4gICAgICAgIHRoaXMubV8gPSBudWxsLCBcbiAgICAgICAgLyoqIFRoZSBsYXN0IGJhY2tvZmYgYXR0ZW1wdCwgYXMgZXBvY2ggbWlsbGlzZWNvbmRzLiAqL1xuICAgICAgICB0aGlzLmZfID0gRGF0ZS5ub3coKSwgdGhpcy5yZXNldCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhlIGJhY2tvZmYgZGVsYXkuXG4gICAgICpcbiAgICAgKiBUaGUgdmVyeSBuZXh0IGJhY2tvZmZBbmRXYWl0KCkgd2lsbCBoYXZlIG5vIGRlbGF5LiBJZiBpdCBpcyBjYWxsZWQgYWdhaW5cbiAgICAgKiAoaS5lLiBkdWUgdG8gYW4gZXJyb3IpLCBpbml0aWFsRGVsYXlNcyAocGx1cyBqaXR0ZXIpIHdpbGwgYmUgdXNlZCwgYW5kXG4gICAgICogc3Vic2VxdWVudCBvbmVzIHdpbGwgaW5jcmVhc2UgYWNjb3JkaW5nIHRvIHRoZSBiYWNrb2ZmRmFjdG9yLlxuICAgICAqLyAgICByZXNldCgpIHtcbiAgICAgICAgdGhpcy5WXyA9IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0cyB0aGUgYmFja29mZiBkZWxheSB0byB0aGUgbWF4aW11bSBkZWxheSAoZS5nLiBmb3IgdXNlIGFmdGVyIGFcbiAgICAgKiBSRVNPVVJDRV9FWEhBVVNURUQgZXJyb3IpLlxuICAgICAqLyAgICBnXygpIHtcbiAgICAgICAgdGhpcy5WXyA9IHRoaXMuUl87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgYWZ0ZXIgY3VycmVudERlbGF5TXMsIGFuZCBpbmNyZWFzZXMgdGhlXG4gICAgICogZGVsYXkgZm9yIGFueSBzdWJzZXF1ZW50IGF0dGVtcHRzLiBJZiB0aGVyZSB3YXMgYSBwZW5kaW5nIGJhY2tvZmYgb3BlcmF0aW9uXG4gICAgICogYWxyZWFkeSwgaXQgd2lsbCBiZSBjYW5jZWxlZC5cbiAgICAgKi8gICAgcF8oZSkge1xuICAgICAgICAvLyBDYW5jZWwgYW55IHBlbmRpbmcgYmFja29mZiBvcGVyYXRpb24uXG4gICAgICAgIHRoaXMuY2FuY2VsKCk7XG4gICAgICAgIC8vIEZpcnN0IHNjaGVkdWxlIHVzaW5nIHRoZSBjdXJyZW50IGJhc2UgKHdoaWNoIG1heSBiZSAwIGFuZCBzaG91bGQgYmVcbiAgICAgICAgLy8gaG9ub3JlZCBhcyBzdWNoKS5cbiAgICAgICAgY29uc3QgdCA9IE1hdGguZmxvb3IodGhpcy5WXyArIHRoaXMueV8oKSksIG4gPSBNYXRoLm1heCgwLCBEYXRlLm5vdygpIC0gdGhpcy5mXyksIHIgPSBNYXRoLm1heCgwLCB0IC0gbik7XG4gICAgICAgIC8vIEd1YXJkIGFnYWluc3QgbGFzdEF0dGVtcHRUaW1lIGJlaW5nIGluIHRoZSBmdXR1cmUgZHVlIHRvIGEgY2xvY2sgY2hhbmdlLlxuICAgICAgICAgICAgICAgIHIgPiAwICYmIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkV4cG9uZW50aWFsQmFja29mZlwiLCBgQmFja2luZyBvZmYgZm9yICR7cn0gbXMgKGJhc2UgZGVsYXk6ICR7dGhpcy5WX30gbXMsIGRlbGF5IHdpdGggaml0dGVyOiAke3R9IG1zLCBsYXN0IGF0dGVtcHQ6ICR7bn0gbXMgYWdvKWApLCBcbiAgICAgICAgdGhpcy5tXyA9IHRoaXMuTWkuZW5xdWV1ZUFmdGVyRGVsYXkodGhpcy50aW1lcklkLCByLCAoKCkgPT4gKHRoaXMuZl8gPSBEYXRlLm5vdygpLCBcbiAgICAgICAgZSgpKSkpLCBcbiAgICAgICAgLy8gQXBwbHkgYmFja29mZiBmYWN0b3IgdG8gZGV0ZXJtaW5lIG5leHQgZGVsYXkgYW5kIGVuc3VyZSBpdCBpcyB3aXRoaW5cbiAgICAgICAgLy8gYm91bmRzLlxuICAgICAgICB0aGlzLlZfICo9IHRoaXMuQV8sIHRoaXMuVl8gPCB0aGlzLmRfICYmICh0aGlzLlZfID0gdGhpcy5kXyksIHRoaXMuVl8gPiB0aGlzLlJfICYmICh0aGlzLlZfID0gdGhpcy5SXyk7XG4gICAgfVxuICAgIHdfKCkge1xuICAgICAgICBudWxsICE9PSB0aGlzLm1fICYmICh0aGlzLm1fLnNraXBEZWxheSgpLCB0aGlzLm1fID0gbnVsbCk7XG4gICAgfVxuICAgIGNhbmNlbCgpIHtcbiAgICAgICAgbnVsbCAhPT0gdGhpcy5tXyAmJiAodGhpcy5tXy5jYW5jZWwoKSwgdGhpcy5tXyA9IG51bGwpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIHJhbmRvbSB2YWx1ZSBpbiB0aGUgcmFuZ2UgWy1jdXJyZW50QmFzZU1zLzIsIGN1cnJlbnRCYXNlTXMvMl0gKi8gICAgeV8oKSB7XG4gICAgICAgIHJldHVybiAoTWF0aC5yYW5kb20oKSAtIC41KSAqIHRoaXMuVl87XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBlbiA9IFwiUGVyc2lzdGVudFN0cmVhbVwiO1xuXG4vKiogVGhlIHRpbWUgYSBzdHJlYW0gc3RheXMgb3BlbiBhZnRlciBpdCBpcyBtYXJrZWQgaWRsZS4gKi9cbi8qKlxuICogQSBQZXJzaXN0ZW50U3RyZWFtIGlzIGFuIGFic3RyYWN0IGJhc2UgY2xhc3MgdGhhdCByZXByZXNlbnRzIGEgc3RyZWFtaW5nIFJQQ1xuICogdG8gdGhlIEZpcmVzdG9yZSBiYWNrZW5kLiBJdCdzIGJ1aWx0IG9uIHRvcCBvZiB0aGUgY29ubmVjdGlvbnMgb3duIHN1cHBvcnRcbiAqIGZvciBzdHJlYW1pbmcgUlBDcywgYW5kIGFkZHMgc2V2ZXJhbCBjcml0aWNhbCBmZWF0dXJlcyBmb3Igb3VyIGNsaWVudHM6XG4gKlxuICogICAtIEV4cG9uZW50aWFsIGJhY2tvZmYgb24gZmFpbHVyZVxuICogICAtIEF1dGhlbnRpY2F0aW9uIHZpYSBDcmVkZW50aWFsc1Byb3ZpZGVyXG4gKiAgIC0gRGlzcGF0Y2hpbmcgYWxsIGNhbGxiYWNrcyBpbnRvIHRoZSBzaGFyZWQgd29ya2VyIHF1ZXVlXG4gKiAgIC0gQ2xvc2luZyBpZGxlIHN0cmVhbXMgYWZ0ZXIgNjAgc2Vjb25kcyBvZiBpbmFjdGl2aXR5XG4gKlxuICogU3ViY2xhc3NlcyBvZiBQZXJzaXN0ZW50U3RyZWFtIGltcGxlbWVudCBzZXJpYWxpemF0aW9uIG9mIG1vZGVscyB0byBhbmRcbiAqIGZyb20gdGhlIEpTT04gcmVwcmVzZW50YXRpb24gb2YgdGhlIHByb3RvY29sIGJ1ZmZlcnMgZm9yIGEgc3BlY2lmaWNcbiAqIHN0cmVhbWluZyBSUEMuXG4gKlxuICogIyMgU3RhcnRpbmcgYW5kIFN0b3BwaW5nXG4gKlxuICogU3RyZWFtaW5nIFJQQ3MgYXJlIHN0YXRlZnVsIGFuZCBuZWVkIHRvIGJlIHN0YXJ0KCllZCBiZWZvcmUgbWVzc2FnZXMgY2FuXG4gKiBiZSBzZW50IGFuZCByZWNlaXZlZC4gVGhlIFBlcnNpc3RlbnRTdHJlYW0gd2lsbCBjYWxsIHRoZSBvbk9wZW4oKSBmdW5jdGlvblxuICogb2YgdGhlIGxpc3RlbmVyIG9uY2UgdGhlIHN0cmVhbSBpcyByZWFkeSB0byBhY2NlcHQgcmVxdWVzdHMuXG4gKlxuICogU2hvdWxkIGEgc3RhcnQoKSBmYWlsLCBQZXJzaXN0ZW50U3RyZWFtIHdpbGwgY2FsbCB0aGUgcmVnaXN0ZXJlZCBvbkNsb3NlKClcbiAqIGxpc3RlbmVyIHdpdGggYSBGaXJlc3RvcmVFcnJvciBpbmRpY2F0aW5nIHdoYXQgd2VudCB3cm9uZy5cbiAqXG4gKiBBIFBlcnNpc3RlbnRTdHJlYW0gY2FuIGJlIHN0YXJ0ZWQgYW5kIHN0b3BwZWQgcmVwZWF0ZWRseS5cbiAqXG4gKiBHZW5lcmljIHR5cGVzOlxuICogIFNlbmRUeXBlOiBUaGUgdHlwZSBvZiB0aGUgb3V0Z29pbmcgbWVzc2FnZSBvZiB0aGUgdW5kZXJseWluZ1xuICogICAgY29ubmVjdGlvbiBzdHJlYW1cbiAqICBSZWNlaXZlVHlwZTogVGhlIHR5cGUgb2YgdGhlIGluY29taW5nIG1lc3NhZ2Ugb2YgdGhlIHVuZGVybHlpbmdcbiAqICAgIGNvbm5lY3Rpb24gc3RyZWFtXG4gKiAgTGlzdGVuZXJUeXBlOiBUaGUgdHlwZSBvZiB0aGUgbGlzdGVuZXIgdGhhdCB3aWxsIGJlIHVzZWQgZm9yIGNhbGxiYWNrc1xuICovXG5jbGFzcyBfX1BSSVZBVEVfUGVyc2lzdGVudFN0cmVhbSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgciwgaSwgcywgbywgXykge1xuICAgICAgICB0aGlzLk1pID0gZSwgdGhpcy5TXyA9IG4sIHRoaXMuYl8gPSByLCB0aGlzLmNvbm5lY3Rpb24gPSBpLCB0aGlzLmF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyID0gcywgXG4gICAgICAgIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFsc1Byb3ZpZGVyID0gbywgdGhpcy5saXN0ZW5lciA9IF8sIHRoaXMuc3RhdGUgPSAwIC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5Jbml0aWFsICovICwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGNsb3NlIGNvdW50IHRoYXQncyBpbmNyZW1lbnRlZCBldmVyeSB0aW1lIHRoZSBzdHJlYW0gaXMgY2xvc2VkOyB1c2VkIGJ5XG4gICAgICAgICAqIGdldENsb3NlR3VhcmRlZERpc3BhdGNoZXIoKSB0byBpbnZhbGlkYXRlIGNhbGxiYWNrcyB0aGF0IGhhcHBlbiBhZnRlclxuICAgICAgICAgKiBjbG9zZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuRF8gPSAwLCB0aGlzLkNfID0gbnVsbCwgdGhpcy52XyA9IG51bGwsIHRoaXMuc3RyZWFtID0gbnVsbCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb3VudCBvZiByZXNwb25zZSBtZXNzYWdlcyByZWNlaXZlZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuRl8gPSAwLCB0aGlzLk1fID0gbmV3IF9fUFJJVkFURV9FeHBvbmVudGlhbEJhY2tvZmYoZSwgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiBzdGFydCgpIGhhcyBiZWVuIGNhbGxlZCBhbmQgbm8gZXJyb3IgaGFzIG9jY3VycmVkLiBUcnVlXG4gICAgICogaW5kaWNhdGVzIHRoZSBzdHJlYW0gaXMgb3BlbiBvciBpbiB0aGUgcHJvY2VzcyBvZiBvcGVuaW5nICh3aGljaFxuICAgICAqIGVuY29tcGFzc2VzIHJlc3BlY3RpbmcgYmFja29mZiwgZ2V0dGluZyBhdXRoIHRva2VucywgYW5kIHN0YXJ0aW5nIHRoZVxuICAgICAqIGFjdHVhbCBSUEMpLiBVc2UgaXNPcGVuKCkgdG8gZGV0ZXJtaW5lIGlmIHRoZSBzdHJlYW0gaXMgb3BlbiBhbmQgcmVhZHkgZm9yXG4gICAgICogb3V0Ym91bmQgcmVxdWVzdHMuXG4gICAgICovICAgIHhfKCkge1xuICAgICAgICByZXR1cm4gMSAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuU3RhcnRpbmcgKi8gPT09IHRoaXMuc3RhdGUgfHwgNSAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuQmFja29mZiAqLyA9PT0gdGhpcy5zdGF0ZSB8fCB0aGlzLk9fKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgdW5kZXJseWluZyBSUEMgaXMgb3BlbiAodGhlIG9uT3BlbigpIGxpc3RlbmVyIGhhcyBiZWVuXG4gICAgICogY2FsbGVkKSBhbmQgdGhlIHN0cmVhbSBpcyByZWFkeSBmb3Igb3V0Ym91bmQgcmVxdWVzdHMuXG4gICAgICovICAgIE9fKCkge1xuICAgICAgICByZXR1cm4gMiAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuT3BlbiAqLyA9PT0gdGhpcy5zdGF0ZSB8fCAzIC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5IZWFsdGh5ICovID09PSB0aGlzLnN0YXRlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdGFydHMgdGhlIFJQQy4gT25seSBhbGxvd2VkIGlmIGlzU3RhcnRlZCgpIHJldHVybnMgZmFsc2UuIFRoZSBzdHJlYW0gaXNcbiAgICAgKiBub3QgaW1tZWRpYXRlbHkgcmVhZHkgZm9yIHVzZTogb25PcGVuKCkgd2lsbCBiZSBpbnZva2VkIHdoZW4gdGhlIFJQQyBpc1xuICAgICAqIHJlYWR5IGZvciBvdXRib3VuZCByZXF1ZXN0cywgYXQgd2hpY2ggcG9pbnQgaXNPcGVuKCkgd2lsbCByZXR1cm4gdHJ1ZS5cbiAgICAgKlxuICAgICAqIFdoZW4gc3RhcnQgcmV0dXJucywgaXNTdGFydGVkKCkgd2lsbCByZXR1cm4gdHJ1ZS5cbiAgICAgKi8gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMuRl8gPSAwLCA0IC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5FcnJvciAqLyAhPT0gdGhpcy5zdGF0ZSA/IHRoaXMuYXV0aCgpIDogdGhpcy5OXygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdG9wcyB0aGUgUlBDLiBUaGlzIGNhbGwgaXMgaWRlbXBvdGVudCBhbmQgYWxsb3dlZCByZWdhcmRsZXNzIG9mIHRoZVxuICAgICAqIGN1cnJlbnQgaXNTdGFydGVkKCkgc3RhdGUuXG4gICAgICpcbiAgICAgKiBXaGVuIHN0b3AgcmV0dXJucywgaXNTdGFydGVkKCkgYW5kIGlzT3BlbigpIHdpbGwgYm90aCByZXR1cm4gZmFsc2UuXG4gICAgICovICAgIGFzeW5jIHN0b3AoKSB7XG4gICAgICAgIHRoaXMueF8oKSAmJiBhd2FpdCB0aGlzLmNsb3NlKDAgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLkluaXRpYWwgKi8pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZnRlciBhbiBlcnJvciB0aGUgc3RyZWFtIHdpbGwgdXN1YWxseSBiYWNrIG9mZiBvbiB0aGUgbmV4dCBhdHRlbXB0IHRvXG4gICAgICogc3RhcnQgaXQuIElmIHRoZSBlcnJvciB3YXJyYW50cyBhbiBpbW1lZGlhdGUgcmVzdGFydCBvZiB0aGUgc3RyZWFtLCB0aGVcbiAgICAgKiBzZW5kZXIgY2FuIHVzZSB0aGlzIHRvIGluZGljYXRlIHRoYXQgdGhlIHJlY2VpdmVyIHNob3VsZCBub3QgYmFjayBvZmYuXG4gICAgICpcbiAgICAgKiBFYWNoIGVycm9yIHdpbGwgY2FsbCB0aGUgb25DbG9zZSgpIGxpc3RlbmVyLiBUaGF0IGZ1bmN0aW9uIGNhbiBkZWNpZGUgdG9cbiAgICAgKiBpbmhpYml0IGJhY2tvZmYgaWYgcmVxdWlyZWQuXG4gICAgICovICAgIEJfKCkge1xuICAgICAgICB0aGlzLnN0YXRlID0gMCAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuSW5pdGlhbCAqLyAsIHRoaXMuTV8ucmVzZXQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWFya3MgdGhpcyBzdHJlYW0gYXMgaWRsZS4gSWYgbm8gZnVydGhlciBhY3Rpb25zIGFyZSBwZXJmb3JtZWQgb24gdGhlXG4gICAgICogc3RyZWFtIGZvciBvbmUgbWludXRlLCB0aGUgc3RyZWFtIHdpbGwgYXV0b21hdGljYWxseSBjbG9zZSBpdHNlbGYgYW5kXG4gICAgICogbm90aWZ5IHRoZSBzdHJlYW0ncyBvbkNsb3NlKCkgaGFuZGxlciB3aXRoIFN0YXR1cy5PSy4gVGhlIHN0cmVhbSB3aWxsIHRoZW5cbiAgICAgKiBiZSBpbiBhICFpc1N0YXJ0ZWQoKSBzdGF0ZSwgcmVxdWlyaW5nIHRoZSBjYWxsZXIgdG8gc3RhcnQgdGhlIHN0cmVhbSBhZ2FpblxuICAgICAqIGJlZm9yZSBmdXJ0aGVyIHVzZS5cbiAgICAgKlxuICAgICAqIE9ubHkgc3RyZWFtcyB0aGF0IGFyZSBpbiBzdGF0ZSAnT3BlbicgY2FuIGJlIG1hcmtlZCBpZGxlLCBhcyBhbGwgb3RoZXJcbiAgICAgKiBzdGF0ZXMgaW1wbHkgcGVuZGluZyBuZXR3b3JrIG9wZXJhdGlvbnMuXG4gICAgICovICAgIExfKCkge1xuICAgICAgICAvLyBTdGFydHMgdGhlIGlkbGUgdGltZSBpZiB3ZSBhcmUgaW4gc3RhdGUgJ09wZW4nIGFuZCBhcmUgbm90IHlldCBhbHJlYWR5XG4gICAgICAgIC8vIHJ1bm5pbmcgYSB0aW1lciAoaW4gd2hpY2ggY2FzZSB0aGUgcHJldmlvdXMgaWRsZSB0aW1lb3V0IHN0aWxsIGFwcGxpZXMpLlxuICAgICAgICB0aGlzLk9fKCkgJiYgbnVsbCA9PT0gdGhpcy5DXyAmJiAodGhpcy5DXyA9IHRoaXMuTWkuZW5xdWV1ZUFmdGVyRGVsYXkodGhpcy5TXywgNmU0LCAoKCkgPT4gdGhpcy5rXygpKSkpO1xuICAgIH1cbiAgICAvKiogU2VuZHMgYSBtZXNzYWdlIHRvIHRoZSB1bmRlcmx5aW5nIHN0cmVhbS4gKi8gICAgcV8oZSkge1xuICAgICAgICB0aGlzLlFfKCksIHRoaXMuc3RyZWFtLnNlbmQoZSk7XG4gICAgfVxuICAgIC8qKiBDYWxsZWQgYnkgdGhlIGlkbGUgdGltZXIgd2hlbiB0aGUgc3RyZWFtIHNob3VsZCBjbG9zZSBkdWUgdG8gaW5hY3Rpdml0eS4gKi8gICAgYXN5bmMga18oKSB7XG4gICAgICAgIGlmICh0aGlzLk9fKCkpIFxuICAgICAgICAvLyBXaGVuIHRpbWluZyBvdXQgYW4gaWRsZSBzdHJlYW0gdGhlcmUncyBubyByZWFzb24gdG8gZm9yY2UgdGhlIHN0cmVhbSBpbnRvIGJhY2tvZmYgd2hlblxuICAgICAgICAvLyBpdCByZXN0YXJ0cyBzbyBzZXQgdGhlIHN0cmVhbSBzdGF0ZSB0byBJbml0aWFsIGluc3RlYWQgb2YgRXJyb3IuXG4gICAgICAgIHJldHVybiB0aGlzLmNsb3NlKDAgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLkluaXRpYWwgKi8pO1xuICAgIH1cbiAgICAvKiogTWFya3MgdGhlIHN0cmVhbSBhcyBhY3RpdmUgYWdhaW4uICovICAgIFFfKCkge1xuICAgICAgICB0aGlzLkNfICYmICh0aGlzLkNfLmNhbmNlbCgpLCB0aGlzLkNfID0gbnVsbCk7XG4gICAgfVxuICAgIC8qKiBDYW5jZWxzIHRoZSBoZWFsdGggY2hlY2sgZGVsYXllZCBvcGVyYXRpb24uICovICAgIFVfKCkge1xuICAgICAgICB0aGlzLnZfICYmICh0aGlzLnZfLmNhbmNlbCgpLCB0aGlzLnZfID0gbnVsbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb3NlcyB0aGUgc3RyZWFtIGFuZCBjbGVhbnMgdXAgYXMgbmVjZXNzYXJ5OlxuICAgICAqXG4gICAgICogKiBjbG9zZXMgdGhlIHVuZGVybHlpbmcgR1JQQyBzdHJlYW07XG4gICAgICogKiBjYWxscyB0aGUgb25DbG9zZSBoYW5kbGVyIHdpdGggdGhlIGdpdmVuICdlcnJvcic7XG4gICAgICogKiBzZXRzIGludGVybmFsIHN0cmVhbSBzdGF0ZSB0byAnZmluYWxTdGF0ZSc7XG4gICAgICogKiBhZGp1c3RzIHRoZSBiYWNrb2ZmIHRpbWVyIGJhc2VkIG9uIHRoZSBlcnJvclxuICAgICAqXG4gICAgICogQSBuZXcgc3RyZWFtIGNhbiBiZSBvcGVuZWQgYnkgY2FsbGluZyBzdGFydCgpLlxuICAgICAqXG4gICAgICogQHBhcmFtIGZpbmFsU3RhdGUgLSB0aGUgaW50ZW5kZWQgc3RhdGUgb2YgdGhlIHN0cmVhbSBhZnRlciBjbG9zaW5nLlxuICAgICAqIEBwYXJhbSBlcnJvciAtIHRoZSBlcnJvciB0aGUgY29ubmVjdGlvbiB3YXMgY2xvc2VkIHdpdGguXG4gICAgICovICAgIGFzeW5jIGNsb3NlKGUsIHQpIHtcbiAgICAgICAgLy8gQ2FuY2VsIGFueSBvdXRzdGFuZGluZyB0aW1lcnMgKHRoZXkncmUgZ3VhcmFudGVlZCBub3QgdG8gZXhlY3V0ZSkuXG4gICAgICAgIHRoaXMuUV8oKSwgdGhpcy5VXygpLCB0aGlzLk1fLmNhbmNlbCgpLCBcbiAgICAgICAgLy8gSW52YWxpZGF0ZXMgYW55IHN0cmVhbS1yZWxhdGVkIGNhbGxiYWNrcyAoZS5nLiBmcm9tIGF1dGggb3IgdGhlXG4gICAgICAgIC8vIHVuZGVybHlpbmcgc3RyZWFtKSwgZ3VhcmFudGVlaW5nIHRoZXkgd29uJ3QgZXhlY3V0ZS5cbiAgICAgICAgdGhpcy5EXysrLCA0IC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5FcnJvciAqLyAhPT0gZSA/IFxuICAgICAgICAvLyBJZiB0aGlzIGlzIGFuIGludGVudGlvbmFsIGNsb3NlIGVuc3VyZSB3ZSBkb24ndCBkZWxheSBvdXIgbmV4dCBjb25uZWN0aW9uIGF0dGVtcHQuXG4gICAgICAgIHRoaXMuTV8ucmVzZXQoKSA6IHQgJiYgdC5jb2RlID09PSBOLlJFU09VUkNFX0VYSEFVU1RFRCA/IChcbiAgICAgICAgLy8gTG9nIHRoZSBlcnJvci4gKFByb2JhYmx5IGVpdGhlciAncXVvdGEgZXhjZWVkZWQnIG9yICdtYXggcXVldWUgbGVuZ3RoIHJlYWNoZWQnLilcbiAgICAgICAgX19QUklWQVRFX2xvZ0Vycm9yKHQudG9TdHJpbmcoKSksIF9fUFJJVkFURV9sb2dFcnJvcihcIlVzaW5nIG1heGltdW0gYmFja29mZiBkZWxheSB0byBwcmV2ZW50IG92ZXJsb2FkaW5nIHRoZSBiYWNrZW5kLlwiKSwgXG4gICAgICAgIHRoaXMuTV8uZ18oKSkgOiB0ICYmIHQuY29kZSA9PT0gTi5VTkFVVEhFTlRJQ0FURUQgJiYgMyAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuSGVhbHRoeSAqLyAhPT0gdGhpcy5zdGF0ZSAmJiAoXG4gICAgICAgIC8vIFwidW5hdXRoZW50aWNhdGVkXCIgZXJyb3IgbWVhbnMgdGhlIHRva2VuIHdhcyByZWplY3RlZC4gVGhpcyBzaG91bGQgcmFyZWx5XG4gICAgICAgIC8vIGhhcHBlbiBzaW5jZSBib3RoIEF1dGggYW5kIEFwcENoZWNrIGVuc3VyZSBhIHN1ZmZpY2llbnQgVFRMIHdoZW4gd2VcbiAgICAgICAgLy8gcmVxdWVzdCBhIHRva2VuLiBJZiBhIHVzZXIgbWFudWFsbHkgcmVzZXRzIHRoZWlyIHN5c3RlbSBjbG9jayB0aGlzIGNhblxuICAgICAgICAvLyBmYWlsLCBob3dldmVyLiBJbiB0aGlzIGNhc2UsIHdlIHNob3VsZCBnZXQgYSBDb2RlLlVOQVVUSEVOVElDQVRFRCBlcnJvclxuICAgICAgICAvLyBiZWZvcmUgd2UgcmVjZWl2ZWQgdGhlIGZpcnN0IG1lc3NhZ2UgYW5kIHdlIG5lZWQgdG8gaW52YWxpZGF0ZSB0aGUgdG9rZW5cbiAgICAgICAgLy8gdG8gZW5zdXJlIHRoYXQgd2UgZmV0Y2ggYSBuZXcgdG9rZW4uXG4gICAgICAgIHRoaXMuYXV0aENyZWRlbnRpYWxzUHJvdmlkZXIuaW52YWxpZGF0ZVRva2VuKCksIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFsc1Byb3ZpZGVyLmludmFsaWRhdGVUb2tlbigpKSwgXG4gICAgICAgIC8vIENsZWFuIHVwIHRoZSB1bmRlcmx5aW5nIHN0cmVhbSBiZWNhdXNlIHdlIGFyZSBubyBsb25nZXIgaW50ZXJlc3RlZCBpbiBldmVudHMuXG4gICAgICAgIG51bGwgIT09IHRoaXMuc3RyZWFtICYmICh0aGlzLktfKCksIHRoaXMuc3RyZWFtLmNsb3NlKCksIHRoaXMuc3RyZWFtID0gbnVsbCksIFxuICAgICAgICAvLyBUaGlzIHN0YXRlIG11c3QgYmUgYXNzaWduZWQgYmVmb3JlIGNhbGxpbmcgb25DbG9zZSgpIHRvIGFsbG93IHRoZSBjYWxsYmFjayB0b1xuICAgICAgICAvLyBpbmhpYml0IGJhY2tvZmYgb3Igb3RoZXJ3aXNlIG1hbmlwdWxhdGUgdGhlIHN0YXRlIGluIGl0cyBub24tc3RhcnRlZCBzdGF0ZS5cbiAgICAgICAgdGhpcy5zdGF0ZSA9IGUsIFxuICAgICAgICAvLyBOb3RpZnkgdGhlIGxpc3RlbmVyIHRoYXQgdGhlIHN0cmVhbSBjbG9zZWQuXG4gICAgICAgIGF3YWl0IHRoaXMubGlzdGVuZXIucl8odCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbiBiZSBvdmVycmlkZGVuIHRvIHBlcmZvcm0gYWRkaXRpb25hbCBjbGVhbnVwIGJlZm9yZSB0aGUgc3RyZWFtIGlzIGNsb3NlZC5cbiAgICAgKiBDYWxsaW5nIHN1cGVyLnRlYXJEb3duKCkgaXMgbm90IHJlcXVpcmVkLlxuICAgICAqLyAgICBLXygpIHt9XG4gICAgYXV0aCgpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IDEgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLlN0YXJ0aW5nICovO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5XXyh0aGlzLkRfKSwgdCA9IHRoaXMuRF87XG4gICAgICAgIC8vIFRPRE8obWlrZWxlaGVuKTogSnVzdCB1c2UgZGlzcGF0Y2hJZk5vdENsb3NlZCwgYnV0IHNlZSBUT0RPIGJlbG93LlxuICAgICAgICAgICAgICAgIFByb21pc2UuYWxsKFsgdGhpcy5hdXRoQ3JlZGVudGlhbHNQcm92aWRlci5nZXRUb2tlbigpLCB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHNQcm92aWRlci5nZXRUb2tlbigpIF0pLnRoZW4oKChbZSwgbl0pID0+IHtcbiAgICAgICAgICAgIC8vIFN0cmVhbSBjYW4gYmUgc3RvcHBlZCB3aGlsZSB3YWl0aW5nIGZvciBhdXRoZW50aWNhdGlvbi5cbiAgICAgICAgICAgIC8vIFRPRE8obWlrZWxlaGVuKTogV2UgcmVhbGx5IHNob3VsZCBqdXN0IHVzZSBkaXNwYXRjaElmTm90Q2xvc2VkXG4gICAgICAgICAgICAvLyBhbmQgbGV0IHRoaXMgZGlzcGF0Y2ggb250byB0aGUgcXVldWUsIGJ1dCB0aGF0IG9wZW5lZCBhIHNwZWMgdGVzdCBjYW5cbiAgICAgICAgICAgIC8vIG9mIHdvcm1zIHRoYXQgSSBkb24ndCB3YW50IHRvIGRlYWwgd2l0aCBpbiB0aGlzIFBSLlxuICAgICAgICAgICAgdGhpcy5EXyA9PT0gdCAmJiBcbiAgICAgICAgICAgIC8vIE5vcm1hbGx5IHdlJ2QgaGF2ZSB0byBzY2hlZHVsZSB0aGUgY2FsbGJhY2sgb24gdGhlIEFzeW5jUXVldWUuXG4gICAgICAgICAgICAvLyBIb3dldmVyLCB0aGUgZm9sbG93aW5nIGNhbGxzIGFyZSBzYWZlIHRvIGJlIGNhbGxlZCBvdXRzaWRlIHRoZVxuICAgICAgICAgICAgLy8gQXN5bmNRdWV1ZSBzaW5jZSB0aGV5IGRvbid0IGNoYWluIGFzeW5jaHJvbm91cyBjYWxsc1xuICAgICAgICAgICAgdGhpcy5HXyhlLCBuKTtcbiAgICAgICAgfSksICh0ID0+IHtcbiAgICAgICAgICAgIGUoKCgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gbmV3IEZpcmVzdG9yZUVycm9yKE4uVU5LTk9XTiwgXCJGZXRjaGluZyBhdXRoIHRva2VuIGZhaWxlZDogXCIgKyB0Lm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnpfKGUpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIEdfKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuV18odGhpcy5EXyk7XG4gICAgICAgIHRoaXMuc3RyZWFtID0gdGhpcy5qXyhlLCB0KSwgdGhpcy5zdHJlYW0uWG8oKCgpID0+IHtcbiAgICAgICAgICAgIG4oKCgpID0+IHRoaXMubGlzdGVuZXIuWG8oKSkpO1xuICAgICAgICB9KSksIHRoaXMuc3RyZWFtLnRfKCgoKSA9PiB7XG4gICAgICAgICAgICBuKCgoKSA9PiAodGhpcy5zdGF0ZSA9IDIgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLk9wZW4gKi8gLCB0aGlzLnZfID0gdGhpcy5NaS5lbnF1ZXVlQWZ0ZXJEZWxheSh0aGlzLmJfLCAxZTQsICgoKSA9PiAodGhpcy5PXygpICYmICh0aGlzLnN0YXRlID0gMyAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuSGVhbHRoeSAqLyksIFxuICAgICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkpKSksIHRoaXMubGlzdGVuZXIudF8oKSkpKTtcbiAgICAgICAgfSkpLCB0aGlzLnN0cmVhbS5yXygoZSA9PiB7XG4gICAgICAgICAgICBuKCgoKSA9PiB0aGlzLnpfKGUpKSk7XG4gICAgICAgIH0pKSwgdGhpcy5zdHJlYW0ub25NZXNzYWdlKChlID0+IHtcbiAgICAgICAgICAgIG4oKCgpID0+IDEgPT0gKyt0aGlzLkZfID8gdGhpcy5KXyhlKSA6IHRoaXMub25OZXh0KGUpKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgTl8oKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSA1IC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5CYWNrb2ZmICovICwgdGhpcy5NXy5wXygoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IDAgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLkluaXRpYWwgKi8gLCB0aGlzLnN0YXJ0KCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdHNcbiAgICB6XyhlKSB7XG4gICAgICAgIC8vIEluIHRoZW9yeSB0aGUgc3RyZWFtIGNvdWxkIGNsb3NlIGNsZWFubHksIGhvd2V2ZXIsIGluIG91ciBjdXJyZW50IG1vZGVsXG4gICAgICAgIC8vIHdlIG5ldmVyIGV4cGVjdCB0aGlzIHRvIGhhcHBlbiBiZWNhdXNlIGlmIHdlIHN0b3AgYSBzdHJlYW0gb3Vyc2VsdmVzLFxuICAgICAgICAvLyB0aGlzIGNhbGxiYWNrIHdpbGwgbmV2ZXIgYmUgY2FsbGVkLiBUbyBwcmV2ZW50IGNhc2VzIHdoZXJlIHdlIHJldHJ5XG4gICAgICAgIC8vIHdpdGhvdXQgYSBiYWNrb2ZmIGFjY2lkZW50YWxseSwgd2Ugc2V0IHRoZSBzdHJlYW0gdG8gZXJyb3IgaW4gYWxsIGNhc2VzLlxuICAgICAgICByZXR1cm4gX19QUklWQVRFX2xvZ0RlYnVnKGVuLCBgY2xvc2Ugd2l0aCBlcnJvcjogJHtlfWApLCB0aGlzLnN0cmVhbSA9IG51bGwsIHRoaXMuY2xvc2UoNCAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuRXJyb3IgKi8gLCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIFwiZGlzcGF0Y2hlclwiIGZ1bmN0aW9uIHRoYXQgZGlzcGF0Y2hlcyBvcGVyYXRpb25zIG9udG8gdGhlXG4gICAgICogQXN5bmNRdWV1ZSBidXQgb25seSBydW5zIHRoZW0gaWYgY2xvc2VDb3VudCByZW1haW5zIHVuY2hhbmdlZC4gVGhpcyBhbGxvd3NcbiAgICAgKiB1cyB0byB0dXJuIGF1dGggLyBzdHJlYW0gY2FsbGJhY2tzIGludG8gbm8tb3BzIGlmIHRoZSBzdHJlYW0gaXMgY2xvc2VkIC9cbiAgICAgKiByZS1vcGVuZWQsIGV0Yy5cbiAgICAgKi8gICAgV18oZSkge1xuICAgICAgICByZXR1cm4gdCA9PiB7XG4gICAgICAgICAgICB0aGlzLk1pLmVucXVldWVBbmRGb3JnZXQoKCgpID0+IHRoaXMuRF8gPT09IGUgPyB0KCkgOiAoX19QUklWQVRFX2xvZ0RlYnVnKGVuLCBcInN0cmVhbSBjYWxsYmFjayBza2lwcGVkIGJ5IGdldENsb3NlR3VhcmRlZERpc3BhdGNoZXIuXCIpLCBcbiAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZSgpKSkpO1xuICAgICAgICB9O1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIFBlcnNpc3RlbnRTdHJlYW0gdGhhdCBpbXBsZW1lbnRzIHRoZSBMaXN0ZW4gUlBDLlxuICpcbiAqIE9uY2UgdGhlIExpc3RlbiBzdHJlYW0gaGFzIGNhbGxlZCB0aGUgb25PcGVuKCkgbGlzdGVuZXIsIGFueSBudW1iZXIgb2ZcbiAqIGxpc3RlbigpIGFuZCB1bmxpc3RlbigpIGNhbGxzIGNhbiBiZSBtYWRlIHRvIGNvbnRyb2wgd2hhdCBjaGFuZ2VzIHdpbGwgYmVcbiAqIHNlbnQgZnJvbSB0aGUgc2VydmVyIGZvciBMaXN0ZW5SZXNwb25zZXMuXG4gKi8gY2xhc3MgX19QUklWQVRFX1BlcnNpc3RlbnRMaXN0ZW5TdHJlYW0gZXh0ZW5kcyBfX1BSSVZBVEVfUGVyc2lzdGVudFN0cmVhbSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgciwgaSwgcykge1xuICAgICAgICBzdXBlcihlLCBcImxpc3Rlbl9zdHJlYW1fY29ubmVjdGlvbl9iYWNrb2ZmXCIgLyogVGltZXJJZC5MaXN0ZW5TdHJlYW1Db25uZWN0aW9uQmFja29mZiAqLyAsIFwibGlzdGVuX3N0cmVhbV9pZGxlXCIgLyogVGltZXJJZC5MaXN0ZW5TdHJlYW1JZGxlICovICwgXCJoZWFsdGhfY2hlY2tfdGltZW91dFwiIC8qIFRpbWVySWQuSGVhbHRoQ2hlY2tUaW1lb3V0ICovICwgdCwgbiwgciwgcyksIFxuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIgPSBpO1xuICAgIH1cbiAgICBqXyhlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24uVF8oXCJMaXN0ZW5cIiwgZSwgdCk7XG4gICAgfVxuICAgIEpfKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub25OZXh0KGUpO1xuICAgIH1cbiAgICBvbk5leHQoZSkge1xuICAgICAgICAvLyBBIHN1Y2Nlc3NmdWwgcmVzcG9uc2UgbWVhbnMgdGhlIHN0cmVhbSBpcyBoZWFsdGh5XG4gICAgICAgIHRoaXMuTV8ucmVzZXQoKTtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9mcm9tV2F0Y2hDaGFuZ2UodGhpcy5zZXJpYWxpemVyLCBlKSwgbiA9IGZ1bmN0aW9uIF9fUFJJVkFURV92ZXJzaW9uRnJvbUxpc3RlblJlc3BvbnNlKGUpIHtcbiAgICAgICAgICAgIC8vIFdlIGhhdmUgb25seSByZWFjaGVkIGEgY29uc2lzdGVudCBzbmFwc2hvdCBmb3IgdGhlIGVudGlyZSBzdHJlYW0gaWYgdGhlcmVcbiAgICAgICAgICAgIC8vIGlzIGEgcmVhZF90aW1lIHNldCBhbmQgaXQgYXBwbGllcyB0byBhbGwgdGFyZ2V0cyAoaS5lLiB0aGUgbGlzdCBvZlxuICAgICAgICAgICAgLy8gdGFyZ2V0cyBpcyBlbXB0eSkuIFRoZSBiYWNrZW5kIGlzIGd1YXJhbnRlZWQgdG8gc2VuZCBzdWNoIHJlc3BvbnNlcy5cbiAgICAgICAgICAgIGlmICghKFwidGFyZ2V0Q2hhbmdlXCIgaW4gZSkpIHJldHVybiBTbmFwc2hvdFZlcnNpb24ubWluKCk7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS50YXJnZXRDaGFuZ2U7XG4gICAgICAgICAgICByZXR1cm4gdC50YXJnZXRJZHMgJiYgdC50YXJnZXRJZHMubGVuZ3RoID8gU25hcHNob3RWZXJzaW9uLm1pbigpIDogdC5yZWFkVGltZSA/IF9fUFJJVkFURV9mcm9tVmVyc2lvbih0LnJlYWRUaW1lKSA6IFNuYXBzaG90VmVyc2lvbi5taW4oKTtcbiAgICAgICAgfShlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubGlzdGVuZXIuSF8odCwgbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBpbnRlcmVzdCBpbiB0aGUgcmVzdWx0cyBvZiB0aGUgZ2l2ZW4gdGFyZ2V0LiBJZiB0aGUgdGFyZ2V0XG4gICAgICogaW5jbHVkZXMgYSByZXN1bWVUb2tlbiBpdCB3aWxsIGJlIGluY2x1ZGVkIGluIHRoZSByZXF1ZXN0LiBSZXN1bHRzIHRoYXRcbiAgICAgKiBhZmZlY3QgdGhlIHRhcmdldCB3aWxsIGJlIHN0cmVhbWVkIGJhY2sgYXMgV2F0Y2hDaGFuZ2UgbWVzc2FnZXMgdGhhdFxuICAgICAqIHJlZmVyZW5jZSB0aGUgdGFyZ2V0SWQuXG4gICAgICovICAgIFlfKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHt9O1xuICAgICAgICB0LmRhdGFiYXNlID0gX19QUklWQVRFX2dldEVuY29kZWREYXRhYmFzZUlkKHRoaXMuc2VyaWFsaXplciksIHQuYWRkVGFyZ2V0ID0gZnVuY3Rpb24gX19QUklWQVRFX3RvVGFyZ2V0KGUsIHQpIHtcbiAgICAgICAgICAgIGxldCBuO1xuICAgICAgICAgICAgY29uc3QgciA9IHQudGFyZ2V0O1xuICAgICAgICAgICAgaWYgKG4gPSBfX1BSSVZBVEVfdGFyZ2V0SXNEb2N1bWVudFRhcmdldChyKSA/IHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudHM6IF9fUFJJVkFURV90b0RvY3VtZW50c1RhcmdldChlLCByKVxuICAgICAgICAgICAgfSA6IHtcbiAgICAgICAgICAgICAgICBxdWVyeTogX19QUklWQVRFX3RvUXVlcnlUYXJnZXQoZSwgcikuZnRcbiAgICAgICAgICAgIH0sIG4udGFyZ2V0SWQgPSB0LnRhcmdldElkLCB0LnJlc3VtZVRva2VuLmFwcHJveGltYXRlQnl0ZVNpemUoKSA+IDApIHtcbiAgICAgICAgICAgICAgICBuLnJlc3VtZVRva2VuID0gX19QUklWQVRFX3RvQnl0ZXMoZSwgdC5yZXN1bWVUb2tlbik7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV90b0ludDMyUHJvdG8oZSwgdC5leHBlY3RlZENvdW50KTtcbiAgICAgICAgICAgICAgICBudWxsICE9PSByICYmIChuLmV4cGVjdGVkQ291bnQgPSByKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodC5zbmFwc2hvdFZlcnNpb24uY29tcGFyZVRvKFNuYXBzaG90VmVyc2lvbi5taW4oKSkgPiAwKSB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETyh3dWFuZHkpOiBDb25zaWRlciByZW1vdmluZyBhYm92ZSBjaGVjayBiZWNhdXNlIGl0IGlzIG1vc3QgbGlrZWx5IHRydWUuXG4gICAgICAgICAgICAgICAgLy8gUmlnaHQgbm93LCBtYW55IHRlc3RzIGRlcGVuZCBvbiB0aGlzIGJlaGF2aW91ciB0aG91Z2ggKGxlYXZpbmcgbWluKCkgb3V0XG4gICAgICAgICAgICAgICAgLy8gb2Ygc2VyaWFsaXphdGlvbikuXG4gICAgICAgICAgICAgICAgbi5yZWFkVGltZSA9IHRvVGltZXN0YW1wKGUsIHQuc25hcHNob3RWZXJzaW9uLnRvVGltZXN0YW1wKCkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfdG9JbnQzMlByb3RvKGUsIHQuZXhwZWN0ZWRDb3VudCk7XG4gICAgICAgICAgICAgICAgbnVsbCAhPT0gciAmJiAobi5leHBlY3RlZENvdW50ID0gcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbjtcbiAgICAgICAgfSh0aGlzLnNlcmlhbGl6ZXIsIGUpO1xuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX3RvTGlzdGVuUmVxdWVzdExhYmVscyh0aGlzLnNlcmlhbGl6ZXIsIGUpO1xuICAgICAgICBuICYmICh0LmxhYmVscyA9IG4pLCB0aGlzLnFfKHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVbnJlZ2lzdGVycyBpbnRlcmVzdCBpbiB0aGUgcmVzdWx0cyBvZiB0aGUgdGFyZ2V0IGFzc29jaWF0ZWQgd2l0aCB0aGVcbiAgICAgKiBnaXZlbiB0YXJnZXRJZC5cbiAgICAgKi8gICAgWl8oZSkge1xuICAgICAgICBjb25zdCB0ID0ge307XG4gICAgICAgIHQuZGF0YWJhc2UgPSBfX1BSSVZBVEVfZ2V0RW5jb2RlZERhdGFiYXNlSWQodGhpcy5zZXJpYWxpemVyKSwgdC5yZW1vdmVUYXJnZXQgPSBlLCBcbiAgICAgICAgdGhpcy5xXyh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBTdHJlYW0gdGhhdCBpbXBsZW1lbnRzIHRoZSBXcml0ZSBSUEMuXG4gKlxuICogVGhlIFdyaXRlIFJQQyByZXF1aXJlcyB0aGUgY2FsbGVyIHRvIG1haW50YWluIHNwZWNpYWwgc3RyZWFtVG9rZW5cbiAqIHN0YXRlIGluIGJldHdlZW4gY2FsbHMsIHRvIGhlbHAgdGhlIHNlcnZlciB1bmRlcnN0YW5kIHdoaWNoIHJlc3BvbnNlcyB0aGVcbiAqIGNsaWVudCBoYXMgcHJvY2Vzc2VkIGJ5IHRoZSB0aW1lIHRoZSBuZXh0IHJlcXVlc3QgaXMgbWFkZS4gRXZlcnkgcmVzcG9uc2VcbiAqIHdpbGwgY29udGFpbiBhIHN0cmVhbVRva2VuOyB0aGlzIHZhbHVlIG11c3QgYmUgcGFzc2VkIHRvIHRoZSBuZXh0XG4gKiByZXF1ZXN0LlxuICpcbiAqIEFmdGVyIGNhbGxpbmcgc3RhcnQoKSBvbiB0aGlzIHN0cmVhbSwgdGhlIG5leHQgcmVxdWVzdCBtdXN0IGJlIGEgaGFuZHNoYWtlLFxuICogY29udGFpbmluZyB3aGF0ZXZlciBzdHJlYW1Ub2tlbiBpcyBvbiBoYW5kLiBPbmNlIGEgcmVzcG9uc2UgdG8gdGhpc1xuICogcmVxdWVzdCBpcyByZWNlaXZlZCwgYWxsIHBlbmRpbmcgbXV0YXRpb25zIG1heSBiZSBzdWJtaXR0ZWQuIFdoZW5cbiAqIHN1Ym1pdHRpbmcgbXVsdGlwbGUgYmF0Y2hlcyBvZiBtdXRhdGlvbnMgYXQgdGhlIHNhbWUgdGltZSwgaXQnc1xuICogb2theSB0byB1c2UgdGhlIHNhbWUgc3RyZWFtVG9rZW4gZm9yIHRoZSBjYWxscyB0byB3cml0ZU11dGF0aW9ucy5cbiAqXG4gKiBUT0RPKGIvMzMyNzEyMzUpOiBVc2UgcHJvdG8gdHlwZXNcbiAqLyBjbGFzcyBfX1BSSVZBVEVfUGVyc2lzdGVudFdyaXRlU3RyZWFtIGV4dGVuZHMgX19QUklWQVRFX1BlcnNpc3RlbnRTdHJlYW0ge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIHIsIGksIHMpIHtcbiAgICAgICAgc3VwZXIoZSwgXCJ3cml0ZV9zdHJlYW1fY29ubmVjdGlvbl9iYWNrb2ZmXCIgLyogVGltZXJJZC5Xcml0ZVN0cmVhbUNvbm5lY3Rpb25CYWNrb2ZmICovICwgXCJ3cml0ZV9zdHJlYW1faWRsZVwiIC8qIFRpbWVySWQuV3JpdGVTdHJlYW1JZGxlICovICwgXCJoZWFsdGhfY2hlY2tfdGltZW91dFwiIC8qIFRpbWVySWQuSGVhbHRoQ2hlY2tUaW1lb3V0ICovICwgdCwgbiwgciwgcyksIFxuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIgPSBpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmFja3Mgd2hldGhlciBvciBub3QgYSBoYW5kc2hha2UgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IGV4Y2hhbmdlZCBhbmRcbiAgICAgKiB0aGUgc3RyZWFtIGlzIHJlYWR5IHRvIGFjY2VwdCBtdXRhdGlvbnMuXG4gICAgICovICAgIGdldCBYXygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuRl8gPiAwO1xuICAgIH1cbiAgICAvLyBPdmVycmlkZSBvZiBQZXJzaXN0ZW50U3RyZWFtLnN0YXJ0XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMubGFzdFN0cmVhbVRva2VuID0gdm9pZCAwLCBzdXBlci5zdGFydCgpO1xuICAgIH1cbiAgICBLXygpIHtcbiAgICAgICAgdGhpcy5YXyAmJiB0aGlzLmVhKFtdKTtcbiAgICB9XG4gICAgal8oZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLlRfKFwiV3JpdGVcIiwgZSwgdCk7XG4gICAgfVxuICAgIEpfKGUpIHtcbiAgICAgICAgLy8gQWx3YXlzIGNhcHR1cmUgdGhlIGxhc3Qgc3RyZWFtIHRva2VuLlxuICAgICAgICByZXR1cm4gX19QUklWQVRFX2hhcmRBc3NlcnQoISFlLnN0cmVhbVRva2VuLCAzMTMyMiksIHRoaXMubGFzdFN0cmVhbVRva2VuID0gZS5zdHJlYW1Ub2tlbiwgXG4gICAgICAgIC8vIFRoZSBmaXJzdCByZXNwb25zZSBpcyBhbHdheXMgdGhlIGhhbmRzaGFrZSByZXNwb25zZVxuICAgICAgICBfX1BSSVZBVEVfaGFyZEFzc2VydCghZS53cml0ZVJlc3VsdHMgfHwgMCA9PT0gZS53cml0ZVJlc3VsdHMubGVuZ3RoLCA1NTgxNiksIHRoaXMubGlzdGVuZXIudGEoKTtcbiAgICB9XG4gICAgb25OZXh0KGUpIHtcbiAgICAgICAgLy8gQWx3YXlzIGNhcHR1cmUgdGhlIGxhc3Qgc3RyZWFtIHRva2VuLlxuICAgICAgICBfX1BSSVZBVEVfaGFyZEFzc2VydCghIWUuc3RyZWFtVG9rZW4sIDEyNjc4KSwgdGhpcy5sYXN0U3RyZWFtVG9rZW4gPSBlLnN0cmVhbVRva2VuLCBcbiAgICAgICAgLy8gQSBzdWNjZXNzZnVsIGZpcnN0IHdyaXRlIHJlc3BvbnNlIG1lYW5zIHRoZSBzdHJlYW0gaXMgaGVhbHRoeSxcbiAgICAgICAgLy8gTm90ZSwgdGhhdCB3ZSBjb3VsZCBjb25zaWRlciBhIHN1Y2Nlc3NmdWwgaGFuZHNoYWtlIGhlYWx0aHksIGhvd2V2ZXIsXG4gICAgICAgIC8vIHRoZSB3cml0ZSBpdHNlbGYgbWlnaHQgYmUgY2F1c2luZyBhbiBlcnJvciB3ZSB3YW50IHRvIGJhY2sgb2ZmIGZyb20uXG4gICAgICAgIHRoaXMuTV8ucmVzZXQoKTtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9mcm9tV3JpdGVSZXN1bHRzKGUud3JpdGVSZXN1bHRzLCBlLmNvbW1pdFRpbWUpLCBuID0gX19QUklWQVRFX2Zyb21WZXJzaW9uKGUuY29tbWl0VGltZSk7XG4gICAgICAgIHJldHVybiB0aGlzLmxpc3RlbmVyLm5hKG4sIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kcyBhbiBpbml0aWFsIHN0cmVhbVRva2VuIHRvIHRoZSBzZXJ2ZXIsIHBlcmZvcm1pbmcgdGhlIGhhbmRzaGFrZVxuICAgICAqIHJlcXVpcmVkIHRvIG1ha2UgdGhlIFN0cmVhbWluZ1dyaXRlIFJQQyB3b3JrLiBTdWJzZXF1ZW50XG4gICAgICogY2FsbHMgc2hvdWxkIHdhaXQgdW50aWwgb25IYW5kc2hha2VDb21wbGV0ZSB3YXMgY2FsbGVkLlxuICAgICAqLyAgICByYSgpIHtcbiAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiBTdXBwb3J0IHN0cmVhbSByZXN1bXB0aW9uLiBXZSBpbnRlbnRpb25hbGx5IGRvIG5vdCBzZXQgdGhlXG4gICAgICAgIC8vIHN0cmVhbSB0b2tlbiBvbiB0aGUgaGFuZHNoYWtlLCBpZ25vcmluZyBhbnkgc3RyZWFtIHRva2VuIHdlIG1pZ2h0IGhhdmUuXG4gICAgICAgIGNvbnN0IGUgPSB7fTtcbiAgICAgICAgZS5kYXRhYmFzZSA9IF9fUFJJVkFURV9nZXRFbmNvZGVkRGF0YWJhc2VJZCh0aGlzLnNlcmlhbGl6ZXIpLCB0aGlzLnFfKGUpO1xuICAgIH1cbiAgICAvKiogU2VuZHMgYSBncm91cCBvZiBtdXRhdGlvbnMgdG8gdGhlIEZpcmVzdG9yZSBiYWNrZW5kIHRvIGFwcGx5LiAqLyAgICBlYShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB7XG4gICAgICAgICAgICBzdHJlYW1Ub2tlbjogdGhpcy5sYXN0U3RyZWFtVG9rZW4sXG4gICAgICAgICAgICB3cml0ZXM6IGUubWFwKChlID0+IHRvTXV0YXRpb24odGhpcy5zZXJpYWxpemVyLCBlKSkpXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucV8odCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBEYXRhc3RvcmUgYW5kIGl0cyByZWxhdGVkIG1ldGhvZHMgYXJlIGEgd3JhcHBlciBhcm91bmQgdGhlIGV4dGVybmFsIEdvb2dsZVxuICogQ2xvdWQgRGF0YXN0b3JlIGdycGMgQVBJLCB3aGljaCBwcm92aWRlcyBhbiBpbnRlcmZhY2UgdGhhdCBpcyBtb3JlIGNvbnZlbmllbnRcbiAqIGZvciB0aGUgcmVzdCBvZiB0aGUgY2xpZW50IFNESyBhcmNoaXRlY3R1cmUgdG8gY29uc3VtZS5cbiAqLyBjbGFzcyBEYXRhc3RvcmUge31cblxuLyoqXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiBEYXRhc3RvcmUgdGhhdCBleHBvc2VzIGFkZGl0aW9uYWwgc3RhdGUgZm9yIGludGVybmFsXG4gKiBjb25zdW1wdGlvbi5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfRGF0YXN0b3JlSW1wbCBleHRlbmRzIERhdGFzdG9yZSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgcikge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmF1dGhDcmVkZW50aWFscyA9IGUsIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscyA9IHQsIHRoaXMuY29ubmVjdGlvbiA9IG4sIFxuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIgPSByLCB0aGlzLmlhID0gITE7XG4gICAgfVxuICAgIHNhKCkge1xuICAgICAgICBpZiAodGhpcy5pYSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKE4uRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJUaGUgY2xpZW50IGhhcyBhbHJlYWR5IGJlZW4gdGVybWluYXRlZC5cIik7XG4gICAgfVxuICAgIC8qKiBJbnZva2VzIHRoZSBwcm92aWRlZCBSUEMgd2l0aCBhdXRoIGFuZCBBcHBDaGVjayB0b2tlbnMuICovICAgIEdvKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2EoKSwgUHJvbWlzZS5hbGwoWyB0aGlzLmF1dGhDcmVkZW50aWFscy5nZXRUb2tlbigpLCB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMuZ2V0VG9rZW4oKSBdKS50aGVuKCgoW2ksIHNdKSA9PiB0aGlzLmNvbm5lY3Rpb24uR28oZSwgX19QUklWQVRFX3RvUmVzb3VyY2VQYXRoKHQsIG4pLCByLCBpLCBzKSkpLmNhdGNoKChlID0+IHtcbiAgICAgICAgICAgIHRocm93IFwiRmlyZWJhc2VFcnJvclwiID09PSBlLm5hbWUgPyAoZS5jb2RlID09PSBOLlVOQVVUSEVOVElDQVRFRCAmJiAodGhpcy5hdXRoQ3JlZGVudGlhbHMuaW52YWxpZGF0ZVRva2VuKCksIFxuICAgICAgICAgICAgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzLmludmFsaWRhdGVUb2tlbigpKSwgZSkgOiBuZXcgRmlyZXN0b3JlRXJyb3IoTi5VTktOT1dOLCBlLnRvU3RyaW5nKCkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKiBJbnZva2VzIHRoZSBwcm92aWRlZCBSUEMgd2l0aCBzdHJlYW1lZCByZXN1bHRzIHdpdGggYXV0aCBhbmQgQXBwQ2hlY2sgdG9rZW5zLiAqLyAgICBIbyhlLCB0LCBuLCByLCBpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNhKCksIFByb21pc2UuYWxsKFsgdGhpcy5hdXRoQ3JlZGVudGlhbHMuZ2V0VG9rZW4oKSwgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzLmdldFRva2VuKCkgXSkudGhlbigoKFtzLCBvXSkgPT4gdGhpcy5jb25uZWN0aW9uLkhvKGUsIF9fUFJJVkFURV90b1Jlc291cmNlUGF0aCh0LCBuKSwgciwgcywgbywgaSkpKS5jYXRjaCgoZSA9PiB7XG4gICAgICAgICAgICB0aHJvdyBcIkZpcmViYXNlRXJyb3JcIiA9PT0gZS5uYW1lID8gKGUuY29kZSA9PT0gTi5VTkFVVEhFTlRJQ0FURUQgJiYgKHRoaXMuYXV0aENyZWRlbnRpYWxzLmludmFsaWRhdGVUb2tlbigpLCBcbiAgICAgICAgICAgIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscy5pbnZhbGlkYXRlVG9rZW4oKSksIGUpIDogbmV3IEZpcmVzdG9yZUVycm9yKE4uVU5LTk9XTiwgZS50b1N0cmluZygpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0ZXJtaW5hdGUoKSB7XG4gICAgICAgIHRoaXMuaWEgPSAhMCwgdGhpcy5jb25uZWN0aW9uLnRlcm1pbmF0ZSgpO1xuICAgIH1cbn1cblxuLy8gVE9ETyhmaXJlc3RvcmV4cCk6IE1ha2Ugc3VyZSB0aGVyZSBpcyBvbmx5IG9uZSBEYXRhc3RvcmUgaW5zdGFuY2UgcGVyXG4vLyBmaXJlc3RvcmUtZXhwIGNsaWVudC5cbi8qKlxuICogQSBjb21wb25lbnQgdXNlZCBieSB0aGUgUmVtb3RlU3RvcmUgdG8gdHJhY2sgdGhlIE9ubGluZVN0YXRlICh0aGF0IGlzLFxuICogd2hldGhlciBvciBub3QgdGhlIGNsaWVudCBhcyBhIHdob2xlIHNob3VsZCBiZSBjb25zaWRlcmVkIHRvIGJlIG9ubGluZSBvclxuICogb2ZmbGluZSksIGltcGxlbWVudGluZyB0aGUgYXBwcm9wcmlhdGUgaGV1cmlzdGljcy5cbiAqXG4gKiBJbiBwYXJ0aWN1bGFyLCB3aGVuIHRoZSBjbGllbnQgaXMgdHJ5aW5nIHRvIGNvbm5lY3QgdG8gdGhlIGJhY2tlbmQsIHdlXG4gKiBhbGxvdyB1cCB0byBNQVhfV0FUQ0hfU1RSRUFNX0ZBSUxVUkVTIHdpdGhpbiBPTkxJTkVfU1RBVEVfVElNRU9VVF9NUyBmb3JcbiAqIGEgY29ubmVjdGlvbiB0byBzdWNjZWVkLiBJZiB3ZSBoYXZlIHRvbyBtYW55IGZhaWx1cmVzIG9yIHRoZSB0aW1lb3V0IGVsYXBzZXMsXG4gKiB0aGVuIHdlIHNldCB0aGUgT25saW5lU3RhdGUgdG8gT2ZmbGluZSwgYW5kIHRoZSBjbGllbnQgd2lsbCBiZWhhdmUgYXMgaWZcbiAqIGl0IGlzIG9mZmxpbmUgKGdldCgpcyB3aWxsIHJldHVybiBjYWNoZWQgZGF0YSwgZXRjLikuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9PbmxpbmVTdGF0ZVRyYWNrZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlID0gZSwgdGhpcy5vbmxpbmVTdGF0ZUhhbmRsZXIgPSB0LCBcbiAgICAgICAgLyoqIFRoZSBjdXJyZW50IE9ubGluZVN0YXRlLiAqL1xuICAgICAgICB0aGlzLnN0YXRlID0gXCJVbmtub3duXCIgLyogT25saW5lU3RhdGUuVW5rbm93biAqLyAsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBjb3VudCBvZiBjb25zZWN1dGl2ZSBmYWlsdXJlcyB0byBvcGVuIHRoZSBzdHJlYW0uIElmIGl0IHJlYWNoZXMgdGhlXG4gICAgICAgICAqIG1heGltdW0gZGVmaW5lZCBieSBNQVhfV0FUQ0hfU1RSRUFNX0ZBSUxVUkVTLCB3ZSdsbCBzZXQgdGhlIE9ubGluZVN0YXRlIHRvXG4gICAgICAgICAqIE9mZmxpbmUuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9hID0gMCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIHRpbWVyIHRoYXQgZWxhcHNlcyBhZnRlciBPTkxJTkVfU1RBVEVfVElNRU9VVF9NUywgYXQgd2hpY2ggcG9pbnQgd2VcbiAgICAgICAgICogdHJhbnNpdGlvbiBmcm9tIE9ubGluZVN0YXRlLlVua25vd24gdG8gT25saW5lU3RhdGUuT2ZmbGluZSB3aXRob3V0IHdhaXRpbmdcbiAgICAgICAgICogZm9yIHRoZSBzdHJlYW0gdG8gYWN0dWFsbHkgZmFpbCAoTUFYX1dBVENIX1NUUkVBTV9GQUlMVVJFUyB0aW1lcykuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9hID0gbnVsbCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIHRoZSBjbGllbnQgc2hvdWxkIGxvZyBhIHdhcm5pbmcgbWVzc2FnZSBpZiBpdCBmYWlscyB0byBjb25uZWN0IHRvXG4gICAgICAgICAqIHRoZSBiYWNrZW5kIChpbml0aWFsbHkgdHJ1ZSwgY2xlYXJlZCBhZnRlciBhIHN1Y2Nlc3NmdWwgc3RyZWFtLCBvciBpZiB3ZSd2ZVxuICAgICAgICAgKiBsb2dnZWQgdGhlIG1lc3NhZ2UgYWxyZWFkeSkuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmFhID0gITA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxlZCBieSBSZW1vdGVTdG9yZSB3aGVuIGEgd2F0Y2ggc3RyZWFtIGlzIHN0YXJ0ZWQgKGluY2x1ZGluZyBvbiBlYWNoXG4gICAgICogYmFja29mZiBhdHRlbXB0KS5cbiAgICAgKlxuICAgICAqIElmIHRoaXMgaXMgdGhlIGZpcnN0IGF0dGVtcHQsIGl0IHNldHMgdGhlIE9ubGluZVN0YXRlIHRvIFVua25vd24gYW5kIHN0YXJ0c1xuICAgICAqIHRoZSBvbmxpbmVTdGF0ZVRpbWVyLlxuICAgICAqLyAgICB1YSgpIHtcbiAgICAgICAgMCA9PT0gdGhpcy5vYSAmJiAodGhpcy5jYShcIlVua25vd25cIiAvKiBPbmxpbmVTdGF0ZS5Vbmtub3duICovKSwgdGhpcy5fYSA9IHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQWZ0ZXJEZWxheShcIm9ubGluZV9zdGF0ZV90aW1lb3V0XCIgLyogVGltZXJJZC5PbmxpbmVTdGF0ZVRpbWVvdXQgKi8gLCAxZTQsICgoKSA9PiAodGhpcy5fYSA9IG51bGwsIFxuICAgICAgICB0aGlzLmxhKFwiQmFja2VuZCBkaWRuJ3QgcmVzcG9uZCB3aXRoaW4gMTAgc2Vjb25kcy5cIiksIHRoaXMuY2EoXCJPZmZsaW5lXCIgLyogT25saW5lU3RhdGUuT2ZmbGluZSAqLyksIFxuICAgICAgICBQcm9taXNlLnJlc29sdmUoKSkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgb3VyIE9ubGluZVN0YXRlIGFzIGFwcHJvcHJpYXRlIGFmdGVyIHRoZSB3YXRjaCBzdHJlYW0gcmVwb3J0cyBhXG4gICAgICogZmFpbHVyZS4gVGhlIGZpcnN0IGZhaWx1cmUgbW92ZXMgdXMgdG8gdGhlICdVbmtub3duJyBzdGF0ZS4gV2UgdGhlbiBtYXlcbiAgICAgKiBhbGxvdyBtdWx0aXBsZSBmYWlsdXJlcyAoYmFzZWQgb24gTUFYX1dBVENIX1NUUkVBTV9GQUlMVVJFUykgYmVmb3JlIHdlXG4gICAgICogYWN0dWFsbHkgdHJhbnNpdGlvbiB0byB0aGUgJ09mZmxpbmUnIHN0YXRlLlxuICAgICAqLyAgICBoYShlKSB7XG4gICAgICAgIFwiT25saW5lXCIgLyogT25saW5lU3RhdGUuT25saW5lICovID09PSB0aGlzLnN0YXRlID8gdGhpcy5jYShcIlVua25vd25cIiAvKiBPbmxpbmVTdGF0ZS5Vbmtub3duICovKSA6ICh0aGlzLm9hKyssIFxuICAgICAgICB0aGlzLm9hID49IDEgJiYgKHRoaXMuUGEoKSwgdGhpcy5sYShgQ29ubmVjdGlvbiBmYWlsZWQgMSB0aW1lcy4gTW9zdCByZWNlbnQgZXJyb3I6ICR7ZS50b1N0cmluZygpfWApLCBcbiAgICAgICAgdGhpcy5jYShcIk9mZmxpbmVcIiAvKiBPbmxpbmVTdGF0ZS5PZmZsaW5lICovKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFeHBsaWNpdGx5IHNldHMgdGhlIE9ubGluZVN0YXRlIHRvIHRoZSBzcGVjaWZpZWQgc3RhdGUuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgdGhpcyByZXNldHMgb3VyIHRpbWVycyAvIGZhaWx1cmUgY291bnRlcnMsIGV0Yy4gdXNlZCBieSBvdXJcbiAgICAgKiBPZmZsaW5lIGhldXJpc3RpY3MsIHNvIG11c3Qgbm90IGJlIHVzZWQgaW4gcGxhY2Ugb2ZcbiAgICAgKiBoYW5kbGVXYXRjaFN0cmVhbVN0YXJ0KCkgYW5kIGhhbmRsZVdhdGNoU3RyZWFtRmFpbHVyZSgpLlxuICAgICAqLyAgICBzZXQoZSkge1xuICAgICAgICB0aGlzLlBhKCksIHRoaXMub2EgPSAwLCBcIk9ubGluZVwiIC8qIE9ubGluZVN0YXRlLk9ubGluZSAqLyA9PT0gZSAmJiAoXG4gICAgICAgIC8vIFdlJ3ZlIGNvbm5lY3RlZCB0byB3YXRjaCBhdCBsZWFzdCBvbmNlLiBEb24ndCB3YXJuIHRoZSBkZXZlbG9wZXJcbiAgICAgICAgLy8gYWJvdXQgYmVpbmcgb2ZmbGluZSBnb2luZyBmb3J3YXJkLlxuICAgICAgICB0aGlzLmFhID0gITEpLCB0aGlzLmNhKGUpO1xuICAgIH1cbiAgICBjYShlKSB7XG4gICAgICAgIGUgIT09IHRoaXMuc3RhdGUgJiYgKHRoaXMuc3RhdGUgPSBlLCB0aGlzLm9ubGluZVN0YXRlSGFuZGxlcihlKSk7XG4gICAgfVxuICAgIGxhKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGBDb3VsZCBub3QgcmVhY2ggQ2xvdWQgRmlyZXN0b3JlIGJhY2tlbmQuICR7ZX1cXG5UaGlzIHR5cGljYWxseSBpbmRpY2F0ZXMgdGhhdCB5b3VyIGRldmljZSBkb2VzIG5vdCBoYXZlIGEgaGVhbHRoeSBJbnRlcm5ldCBjb25uZWN0aW9uIGF0IHRoZSBtb21lbnQuIFRoZSBjbGllbnQgd2lsbCBvcGVyYXRlIGluIG9mZmxpbmUgbW9kZSB1bnRpbCBpdCBpcyBhYmxlIHRvIHN1Y2Nlc3NmdWxseSBjb25uZWN0IHRvIHRoZSBiYWNrZW5kLmA7XG4gICAgICAgIHRoaXMuYWEgPyAoX19QUklWQVRFX2xvZ0Vycm9yKHQpLCB0aGlzLmFhID0gITEpIDogX19QUklWQVRFX2xvZ0RlYnVnKFwiT25saW5lU3RhdGVUcmFja2VyXCIsIHQpO1xuICAgIH1cbiAgICBQYSgpIHtcbiAgICAgICAgbnVsbCAhPT0gdGhpcy5fYSAmJiAodGhpcy5fYS5jYW5jZWwoKSwgdGhpcy5fYSA9IG51bGwpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgdG4gPSBcIlJlbW90ZVN0b3JlXCI7XG5cbi8vIFRPRE8oYi8zNTg1MzQwMik6IE5lZ290aWF0ZSB0aGlzIHdpdGggdGhlIHN0cmVhbS5cbmNsYXNzIF9fUFJJVkFURV9SZW1vdGVTdG9yZUltcGwge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBsb2NhbCBzdG9yZSwgdXNlZCB0byBmaWxsIHRoZSB3cml0ZSBwaXBlbGluZSB3aXRoIG91dGJvdW5kIG11dGF0aW9ucy5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKiogVGhlIGNsaWVudC1zaWRlIHByb3h5IGZvciBpbnRlcmFjdGluZyB3aXRoIHRoZSBiYWNrZW5kLiAqL1xuICAgIHQsIG4sIHIsIGkpIHtcbiAgICAgICAgdGhpcy5sb2NhbFN0b3JlID0gZSwgdGhpcy5kYXRhc3RvcmUgPSB0LCB0aGlzLmFzeW5jUXVldWUgPSBuLCB0aGlzLnJlbW90ZVN5bmNlciA9IHt9LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgbGlzdCBvZiB1cCB0byBNQVhfUEVORElOR19XUklURVMgd3JpdGVzIHRoYXQgd2UgaGF2ZSBmZXRjaGVkIGZyb20gdGhlXG4gICAgICAgICAqIExvY2FsU3RvcmUgdmlhIGZpbGxXcml0ZVBpcGVsaW5lKCkgYW5kIGhhdmUgb3Igd2lsbCBzZW5kIHRvIHRoZSB3cml0ZVxuICAgICAgICAgKiBzdHJlYW0uXG4gICAgICAgICAqXG4gICAgICAgICAqIFdoZW5ldmVyIHdyaXRlUGlwZWxpbmUubGVuZ3RoID4gMCB0aGUgUmVtb3RlU3RvcmUgd2lsbCBhdHRlbXB0IHRvIHN0YXJ0IG9yXG4gICAgICAgICAqIHJlc3RhcnQgdGhlIHdyaXRlIHN0cmVhbS4gV2hlbiB0aGUgc3RyZWFtIGlzIGVzdGFibGlzaGVkIHRoZSB3cml0ZXMgaW4gdGhlXG4gICAgICAgICAqIHBpcGVsaW5lIHdpbGwgYmUgc2VudCBpbiBvcmRlci5cbiAgICAgICAgICpcbiAgICAgICAgICogV3JpdGVzIHJlbWFpbiBpbiB3cml0ZVBpcGVsaW5lIHVudGlsIHRoZXkgYXJlIGFja25vd2xlZGdlZCBieSB0aGUgYmFja2VuZFxuICAgICAgICAgKiBhbmQgdGh1cyB3aWxsIGF1dG9tYXRpY2FsbHkgYmUgcmUtc2VudCBpZiB0aGUgc3RyZWFtIGlzIGludGVycnVwdGVkIC9cbiAgICAgICAgICogcmVzdGFydGVkIGJlZm9yZSB0aGV5J3JlIGFja25vd2xlZGdlZC5cbiAgICAgICAgICpcbiAgICAgICAgICogV3JpdGUgcmVzcG9uc2VzIGZyb20gdGhlIGJhY2tlbmQgYXJlIGxpbmtlZCB0byB0aGVpciBvcmlnaW5hdGluZyByZXF1ZXN0XG4gICAgICAgICAqIHB1cmVseSBiYXNlZCBvbiBvcmRlciwgYW5kIHNvIHdlIGNhbiBqdXN0IHNoaWZ0KCkgd3JpdGVzIGZyb20gdGhlIGZyb250IG9mXG4gICAgICAgICAqIHRoZSB3cml0ZVBpcGVsaW5lIGFzIHdlIHJlY2VpdmUgcmVzcG9uc2VzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5UYSA9IFtdLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgbWFwcGluZyBvZiB3YXRjaGVkIHRhcmdldHMgdGhhdCB0aGUgY2xpZW50IGNhcmVzIGFib3V0IHRyYWNraW5nIGFuZCB0aGVcbiAgICAgICAgICogdXNlciBoYXMgZXhwbGljaXRseSBjYWxsZWQgYSAnbGlzdGVuJyBmb3IgdGhpcyB0YXJnZXQuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZXNlIHRhcmdldHMgbWF5IG9yIG1heSBub3QgaGF2ZSBiZWVuIHNlbnQgdG8gb3IgYWNrbm93bGVkZ2VkIGJ5IHRoZVxuICAgICAgICAgKiBzZXJ2ZXIuIE9uIHJlLWVzdGFibGlzaGluZyB0aGUgbGlzdGVuIHN0cmVhbSwgdGhlc2UgdGFyZ2V0cyBzaG91bGQgYmUgc2VudFxuICAgICAgICAgKiB0byB0aGUgc2VydmVyLiBUaGUgdGFyZ2V0cyByZW1vdmVkIHdpdGggdW5saXN0ZW5zIGFyZSByZW1vdmVkIGVhZ2VybHlcbiAgICAgICAgICogd2l0aG91dCB3YWl0aW5nIGZvciBjb25maXJtYXRpb24gZnJvbSB0aGUgbGlzdGVuIHN0cmVhbS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuSWEgPSBuZXcgTWFwLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgc2V0IG9mIHJlYXNvbnMgZm9yIHdoeSB0aGUgUmVtb3RlU3RvcmUgbWF5IGJlIG9mZmxpbmUuIElmIGVtcHR5LCB0aGVcbiAgICAgICAgICogUmVtb3RlU3RvcmUgbWF5IHN0YXJ0IGl0cyBuZXR3b3JrIGNvbm5lY3Rpb25zLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5FYSA9IG5ldyBTZXQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogRXZlbnQgaGFuZGxlcnMgdGhhdCBnZXQgY2FsbGVkIHdoZW4gdGhlIG5ldHdvcmsgaXMgZGlzYWJsZWQgb3IgZW5hYmxlZC5cbiAgICAgICAgICpcbiAgICAgICAgICogUE9SVElORyBOT1RFOiBUaGVzZSBmdW5jdGlvbnMgYXJlIHVzZWQgb24gdGhlIFdlYiBjbGllbnQgdG8gY3JlYXRlIHRoZVxuICAgICAgICAgKiB1bmRlcmx5aW5nIHN0cmVhbXMgKHRvIHN1cHBvcnQgdHJlZS1zaGFrZWFibGUgc3RyZWFtcykuIE9uIEFuZHJvaWQgYW5kIGlPUyxcbiAgICAgICAgICogdGhlIHN0cmVhbXMgYXJlIGNyZWF0ZWQgZHVyaW5nIGNvbnN0cnVjdGlvbiBvZiBSZW1vdGVTdG9yZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGEgPSBbXSwgdGhpcy5BYSA9IGksIHRoaXMuQWEuT28oKGUgPT4ge1xuICAgICAgICAgICAgbi5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gUG9ydGluZyBOb3RlOiBVbmxpa2UgaU9TLCBgcmVzdGFydE5ldHdvcmsoKWAgaXMgY2FsbGVkIGV2ZW4gd2hlbiB0aGVcbiAgICAgICAgICAgICAgICAvLyBuZXR3b3JrIGJlY29tZXMgdW5yZWFjaGFibGUgYXMgd2UgZG9uJ3QgaGF2ZSBhbnkgb3RoZXIgd2F5IHRvIHRlYXJcbiAgICAgICAgICAgICAgICAvLyBkb3duIG91ciBzdHJlYW1zLlxuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9jYW5Vc2VOZXR3b3JrKHRoaXMpICYmIChfX1BSSVZBVEVfbG9nRGVidWcodG4sIFwiUmVzdGFydGluZyBzdHJlYW1zIGZvciBuZXR3b3JrIHJlYWNoYWJpbGl0eSBjaGFuZ2UuXCIpLCBcbiAgICAgICAgICAgICAgICBhd2FpdCBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfcmVzdGFydE5ldHdvcmsoZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICAgICAgICAgICAgICAgICAgdC5FYS5hZGQoNCAvKiBPZmZsaW5lQ2F1c2UuQ29ubmVjdGl2aXR5Q2hhbmdlICovKSwgYXdhaXQgX19QUklWQVRFX2Rpc2FibGVOZXR3b3JrSW50ZXJuYWwodCksIFxuICAgICAgICAgICAgICAgICAgICB0LlJhLnNldChcIlVua25vd25cIiAvKiBPbmxpbmVTdGF0ZS5Vbmtub3duICovKSwgdC5FYS5kZWxldGUoNCAvKiBPZmZsaW5lQ2F1c2UuQ29ubmVjdGl2aXR5Q2hhbmdlICovKSwgXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IF9fUFJJVkFURV9lbmFibGVOZXR3b3JrSW50ZXJuYWwodCk7XG4gICAgICAgICAgICAgICAgfSh0aGlzKSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKSwgdGhpcy5SYSA9IG5ldyBfX1BSSVZBVEVfT25saW5lU3RhdGVUcmFja2VyKG4sIHIpO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2VuYWJsZU5ldHdvcmtJbnRlcm5hbChlKSB7XG4gICAgaWYgKF9fUFJJVkFURV9jYW5Vc2VOZXR3b3JrKGUpKSBmb3IgKGNvbnN0IHQgb2YgZS5kYSkgYXdhaXQgdCgvKiBlbmFibGVkPSAqLyAhMCk7XG59XG5cbi8qKlxuICogVGVtcG9yYXJpbHkgZGlzYWJsZXMgdGhlIG5ldHdvcmsuIFRoZSBuZXR3b3JrIGNhbiBiZSByZS1lbmFibGVkIHVzaW5nXG4gKiBlbmFibGVOZXR3b3JrKCkuXG4gKi8gYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2Rpc2FibGVOZXR3b3JrSW50ZXJuYWwoZSkge1xuICAgIGZvciAoY29uc3QgdCBvZiBlLmRhKSBhd2FpdCB0KC8qIGVuYWJsZWQ9ICovICExKTtcbn1cblxuLyoqXG4gKiBTdGFydHMgbmV3IGxpc3RlbiBmb3IgdGhlIGdpdmVuIHRhcmdldC4gVXNlcyByZXN1bWUgdG9rZW4gaWYgcHJvdmlkZWQuIEl0XG4gKiBpcyBhIG5vLW9wIGlmIHRoZSB0YXJnZXQgb2YgZ2l2ZW4gYFRhcmdldERhdGFgIGlzIGFscmVhZHkgYmVpbmcgbGlzdGVuZWQgdG8uXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9yZW1vdGVTdG9yZUxpc3RlbihlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgbi5JYS5oYXModC50YXJnZXRJZCkgfHwgKFxuICAgIC8vIE1hcmsgdGhpcyBhcyBzb21ldGhpbmcgdGhlIGNsaWVudCBpcyBjdXJyZW50bHkgbGlzdGVuaW5nIGZvci5cbiAgICBuLklhLnNldCh0LnRhcmdldElkLCB0KSwgX19QUklWQVRFX3Nob3VsZFN0YXJ0V2F0Y2hTdHJlYW0obikgPyBcbiAgICAvLyBUaGUgbGlzdGVuIHdpbGwgYmUgc2VudCBpbiBvbldhdGNoU3RyZWFtT3BlblxuICAgIF9fUFJJVkFURV9zdGFydFdhdGNoU3RyZWFtKG4pIDogX19QUklWQVRFX2Vuc3VyZVdhdGNoU3RyZWFtKG4pLk9fKCkgJiYgX19QUklWQVRFX3NlbmRXYXRjaFJlcXVlc3QobiwgdCkpO1xufVxuXG4vKipcbiAqIFJlbW92ZXMgdGhlIGxpc3RlbiBmcm9tIHNlcnZlci4gSXQgaXMgYSBuby1vcCBpZiB0aGUgZ2l2ZW4gdGFyZ2V0IGlkIGlzXG4gKiBub3QgYmVpbmcgbGlzdGVuZWQgdG8uXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3JlbW90ZVN0b3JlVW5saXN0ZW4oZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCByID0gX19QUklWQVRFX2Vuc3VyZVdhdGNoU3RyZWFtKG4pO1xuICAgIG4uSWEuZGVsZXRlKHQpLCByLk9fKCkgJiYgX19QUklWQVRFX3NlbmRVbndhdGNoUmVxdWVzdChuLCB0KSwgMCA9PT0gbi5JYS5zaXplICYmIChyLk9fKCkgPyByLkxfKCkgOiBfX1BSSVZBVEVfY2FuVXNlTmV0d29yayhuKSAmJiBcbiAgICAvLyBSZXZlcnQgdG8gT25saW5lU3RhdGUuVW5rbm93biBpZiB0aGUgd2F0Y2ggc3RyZWFtIGlzIG5vdCBvcGVuIGFuZCB3ZVxuICAgIC8vIGhhdmUgbm8gbGlzdGVuZXJzLCBzaW5jZSB3aXRob3V0IGFueSBsaXN0ZW5zIHRvIHNlbmQgd2UgY2Fubm90XG4gICAgLy8gY29uZmlybSBpZiB0aGUgc3RyZWFtIGlzIGhlYWx0aHkgYW5kIHVwZ3JhZGUgdG8gT25saW5lU3RhdGUuT25saW5lLlxuICAgIG4uUmEuc2V0KFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8pKTtcbn1cblxuLyoqXG4gKiBXZSBuZWVkIHRvIGluY3JlbWVudCB0aGUgZXhwZWN0ZWQgbnVtYmVyIG9mIHBlbmRpbmcgcmVzcG9uc2VzIHdlJ3JlIGR1ZVxuICogZnJvbSB3YXRjaCBzbyB3ZSB3YWl0IGZvciB0aGUgYWNrIHRvIHByb2Nlc3MgYW55IG1lc3NhZ2VzIGZyb20gdGhpcyB0YXJnZXQuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3NlbmRXYXRjaFJlcXVlc3QoZSwgdCkge1xuICAgIGlmIChlLlZhLlVlKHQudGFyZ2V0SWQpLCB0LnJlc3VtZVRva2VuLmFwcHJveGltYXRlQnl0ZVNpemUoKSA+IDAgfHwgdC5zbmFwc2hvdFZlcnNpb24uY29tcGFyZVRvKFNuYXBzaG90VmVyc2lvbi5taW4oKSkgPiAwKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLnJlbW90ZVN5bmNlci5nZXRSZW1vdGVLZXlzRm9yVGFyZ2V0KHQudGFyZ2V0SWQpLnNpemU7XG4gICAgICAgIHQgPSB0LndpdGhFeHBlY3RlZENvdW50KG4pO1xuICAgIH1cbiAgICBfX1BSSVZBVEVfZW5zdXJlV2F0Y2hTdHJlYW0oZSkuWV8odCk7XG59XG5cbi8qKlxuICogV2UgbmVlZCB0byBpbmNyZW1lbnQgdGhlIGV4cGVjdGVkIG51bWJlciBvZiBwZW5kaW5nIHJlc3BvbnNlcyB3ZSdyZSBkdWVcbiAqIGZyb20gd2F0Y2ggc28gd2Ugd2FpdCBmb3IgdGhlIHJlbW92YWwgb24gdGhlIHNlcnZlciBiZWZvcmUgd2UgcHJvY2VzcyBhbnlcbiAqIG1lc3NhZ2VzIGZyb20gdGhpcyB0YXJnZXQuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3NlbmRVbndhdGNoUmVxdWVzdChlLCB0KSB7XG4gICAgZS5WYS5VZSh0KSwgX19QUklWQVRFX2Vuc3VyZVdhdGNoU3RyZWFtKGUpLlpfKHQpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfc3RhcnRXYXRjaFN0cmVhbShlKSB7XG4gICAgZS5WYSA9IG5ldyBfX1BSSVZBVEVfV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yKHtcbiAgICAgICAgZ2V0UmVtb3RlS2V5c0ZvclRhcmdldDogdCA9PiBlLnJlbW90ZVN5bmNlci5nZXRSZW1vdGVLZXlzRm9yVGFyZ2V0KHQpLFxuICAgICAgICBBdDogdCA9PiBlLklhLmdldCh0KSB8fCBudWxsLFxuICAgICAgICBodDogKCkgPT4gZS5kYXRhc3RvcmUuc2VyaWFsaXplci5kYXRhYmFzZUlkXG4gICAgfSksIF9fUFJJVkFURV9lbnN1cmVXYXRjaFN0cmVhbShlKS5zdGFydCgpLCBlLlJhLnVhKCk7XG59XG5cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIHRoZSB3YXRjaCBzdHJlYW0gc2hvdWxkIGJlIHN0YXJ0ZWQgYmVjYXVzZSBpdCdzIG5lY2Vzc2FyeVxuICogYW5kIGhhcyBub3QgeWV0IGJlZW4gc3RhcnRlZC5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfc2hvdWxkU3RhcnRXYXRjaFN0cmVhbShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9jYW5Vc2VOZXR3b3JrKGUpICYmICFfX1BSSVZBVEVfZW5zdXJlV2F0Y2hTdHJlYW0oZSkueF8oKSAmJiBlLklhLnNpemUgPiAwO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfY2FuVXNlTmV0d29yayhlKSB7XG4gICAgcmV0dXJuIDAgPT09IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSkuRWEuc2l6ZTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2NsZWFuVXBXYXRjaFN0cmVhbVN0YXRlKGUpIHtcbiAgICBlLlZhID0gdm9pZCAwO1xufVxuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfb25XYXRjaFN0cmVhbUNvbm5lY3RlZChlKSB7XG4gICAgLy8gTWFyayB0aGUgY2xpZW50IGFzIG9ubGluZSBzaW5jZSB3ZSBnb3QgYSBcImNvbm5lY3RlZFwiIG5vdGlmaWNhdGlvbi5cbiAgICBlLlJhLnNldChcIk9ubGluZVwiIC8qIE9ubGluZVN0YXRlLk9ubGluZSAqLyk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9vbldhdGNoU3RyZWFtT3BlbihlKSB7XG4gICAgZS5JYS5mb3JFYWNoKCgodCwgbikgPT4ge1xuICAgICAgICBfX1BSSVZBVEVfc2VuZFdhdGNoUmVxdWVzdChlLCB0KTtcbiAgICB9KSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9vbldhdGNoU3RyZWFtQ2xvc2UoZSwgdCkge1xuICAgIF9fUFJJVkFURV9jbGVhblVwV2F0Y2hTdHJlYW1TdGF0ZShlKSwgXG4gICAgLy8gSWYgd2Ugc3RpbGwgbmVlZCB0aGUgd2F0Y2ggc3RyZWFtLCByZXRyeSB0aGUgY29ubmVjdGlvbi5cbiAgICBfX1BSSVZBVEVfc2hvdWxkU3RhcnRXYXRjaFN0cmVhbShlKSA/IChlLlJhLmhhKHQpLCBfX1BSSVZBVEVfc3RhcnRXYXRjaFN0cmVhbShlKSkgOiBcbiAgICAvLyBObyBuZWVkIHRvIHJlc3RhcnQgd2F0Y2ggc3RyZWFtIGJlY2F1c2UgdGhlcmUgYXJlIG5vIGFjdGl2ZSB0YXJnZXRzLlxuICAgIC8vIFRoZSBvbmxpbmUgc3RhdGUgaXMgc2V0IHRvIHVua25vd24gYmVjYXVzZSB0aGVyZSBpcyBubyBhY3RpdmUgYXR0ZW1wdFxuICAgIC8vIGF0IGVzdGFibGlzaGluZyBhIGNvbm5lY3Rpb25cbiAgICBlLlJhLnNldChcIlVua25vd25cIiAvKiBPbmxpbmVTdGF0ZS5Vbmtub3duICovKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX29uV2F0Y2hTdHJlYW1DaGFuZ2UoZSwgdCwgbikge1xuICAgIGlmIChcbiAgICAvLyBNYXJrIHRoZSBjbGllbnQgYXMgb25saW5lIHNpbmNlIHdlIGdvdCBhIG1lc3NhZ2UgZnJvbSB0aGUgc2VydmVyXG4gICAgZS5SYS5zZXQoXCJPbmxpbmVcIiAvKiBPbmxpbmVTdGF0ZS5PbmxpbmUgKi8pLCB0IGluc3RhbmNlb2YgX19QUklWQVRFX1dhdGNoVGFyZ2V0Q2hhbmdlICYmIDIgLyogV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5SZW1vdmVkICovID09PSB0LnN0YXRlICYmIHQuY2F1c2UpIFxuICAgIC8vIFRoZXJlIHdhcyBhbiBlcnJvciBvbiBhIHRhcmdldCwgZG9uJ3Qgd2FpdCBmb3IgYSBjb25zaXN0ZW50IHNuYXBzaG90XG4gICAgLy8gdG8gcmFpc2UgZXZlbnRzXG4gICAgdHJ5IHtcbiAgICAgICAgLyoqIEhhbmRsZXMgYW4gZXJyb3Igb24gYSB0YXJnZXQgKi9cbiAgICAgICAgYXdhaXQgYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2hhbmRsZVRhcmdldEVycm9yKGUsIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LmNhdXNlO1xuICAgICAgICAgICAgZm9yIChjb25zdCByIG9mIHQudGFyZ2V0SWRzKSBcbiAgICAgICAgICAgIC8vIEEgd2F0Y2hlZCB0YXJnZXQgbWlnaHQgaGF2ZSBiZWVuIHJlbW92ZWQgYWxyZWFkeS5cbiAgICAgICAgICAgIGUuSWEuaGFzKHIpICYmIChhd2FpdCBlLnJlbW90ZVN5bmNlci5yZWplY3RMaXN0ZW4ociwgbiksIGUuSWEuZGVsZXRlKHIpLCBlLlZhLnJlbW92ZVRhcmdldChyKSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBBdHRlbXB0cyB0byBmaWxsIG91ciB3cml0ZSBwaXBlbGluZSB3aXRoIHdyaXRlcyBmcm9tIHRoZSBMb2NhbFN0b3JlLlxuICpcbiAqIENhbGxlZCBpbnRlcm5hbGx5IHRvIGJvb3RzdHJhcCBvciByZWZpbGwgdGhlIHdyaXRlIHBpcGVsaW5lIGFuZCBieVxuICogU3luY0VuZ2luZSB3aGVuZXZlciB0aGVyZSBhcmUgbmV3IG11dGF0aW9ucyB0byBwcm9jZXNzLlxuICpcbiAqIFN0YXJ0cyB0aGUgd3JpdGUgc3RyZWFtIGlmIG5lY2Vzc2FyeS5cbiAqLyAoZSwgdCk7XG4gICAgfSBjYXRjaCAobikge1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcodG4sIFwiRmFpbGVkIHRvIHJlbW92ZSB0YXJnZXRzICVzOiAlcyBcIiwgdC50YXJnZXRJZHMuam9pbihcIixcIiksIG4pLCBcbiAgICAgICAgYXdhaXQgX19QUklWQVRFX2Rpc2FibGVOZXR3b3JrVW50aWxSZWNvdmVyeShlLCBuKTtcbiAgICB9IGVsc2UgaWYgKHQgaW5zdGFuY2VvZiBfX1BSSVZBVEVfRG9jdW1lbnRXYXRjaENoYW5nZSA/IGUuVmEuWmUodCkgOiB0IGluc3RhbmNlb2YgX19QUklWQVRFX0V4aXN0ZW5jZUZpbHRlckNoYW5nZSA/IGUuVmEuc3QodCkgOiBlLlZhLnR0KHQpLCBcbiAgICAhbi5pc0VxdWFsKFNuYXBzaG90VmVyc2lvbi5taW4oKSkpIHRyeSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZUdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24oZS5sb2NhbFN0b3JlKTtcbiAgICAgICAgbi5jb21wYXJlVG8odCkgPj0gMCAmJiBcbiAgICAgICAgLy8gV2UgaGF2ZSByZWNlaXZlZCBhIHRhcmdldCBjaGFuZ2Ugd2l0aCBhIGdsb2JhbCBzbmFwc2hvdCBpZiB0aGUgc25hcHNob3RcbiAgICAgICAgLy8gdmVyc2lvbiBpcyBub3QgZXF1YWwgdG8gU25hcHNob3RWZXJzaW9uLm1pbigpLlxuICAgICAgICAvKipcbiAqIFRha2VzIGEgYmF0Y2ggb2YgY2hhbmdlcyBmcm9tIHRoZSBEYXRhc3RvcmUsIHJlcGFja2FnZXMgdGhlbSBhcyBhXG4gKiBSZW1vdGVFdmVudCwgYW5kIHBhc3NlcyB0aGF0IG9uIHRvIHRoZSBsaXN0ZW5lciwgd2hpY2ggaXMgdHlwaWNhbGx5IHRoZVxuICogU3luY0VuZ2luZS5cbiAqL1xuICAgICAgICBhd2FpdCBmdW5jdGlvbiBfX1BSSVZBVEVfcmFpc2VXYXRjaFNuYXBzaG90KGUsIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLlZhLlR0KHQpO1xuICAgICAgICAgICAgLy8gVXBkYXRlIGluLW1lbW9yeSByZXN1bWUgdG9rZW5zLiBMb2NhbFN0b3JlIHdpbGwgdXBkYXRlIHRoZVxuICAgICAgICAgICAgLy8gcGVyc2lzdGVudCB2aWV3IG9mIHRoZXNlIHdoZW4gYXBwbHlpbmcgdGhlIGNvbXBsZXRlZCBSZW1vdGVFdmVudC5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLnRhcmdldENoYW5nZXMuZm9yRWFjaCgoKG4sIHIpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobi5yZXN1bWVUb2tlbi5hcHByb3hpbWF0ZUJ5dGVTaXplKCkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBlLklhLmdldChyKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gQSB3YXRjaGVkIHRhcmdldCBtaWdodCBoYXZlIGJlZW4gcmVtb3ZlZCBhbHJlYWR5LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgJiYgZS5JYS5zZXQociwgaS53aXRoUmVzdW1lVG9rZW4obi5yZXN1bWVUb2tlbiwgdCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKSwgXG4gICAgICAgICAgICAvLyBSZS1lc3RhYmxpc2ggbGlzdGVucyBmb3IgdGhlIHRhcmdldHMgdGhhdCBoYXZlIGJlZW4gaW52YWxpZGF0ZWQgYnlcbiAgICAgICAgICAgIC8vIGV4aXN0ZW5jZSBmaWx0ZXIgbWlzbWF0Y2hlcy5cbiAgICAgICAgICAgIG4udGFyZ2V0TWlzbWF0Y2hlcy5mb3JFYWNoKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBlLklhLmdldCh0KTtcbiAgICAgICAgICAgICAgICBpZiAoIXIpIFxuICAgICAgICAgICAgICAgIC8vIEEgd2F0Y2hlZCB0YXJnZXQgbWlnaHQgaGF2ZSBiZWVuIHJlbW92ZWQgYWxyZWFkeS5cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgLy8gQ2xlYXIgdGhlIHJlc3VtZSB0b2tlbiBmb3IgdGhlIHRhcmdldCwgc2luY2Ugd2UncmUgaW4gYSBrbm93biBtaXNtYXRjaFxuICAgICAgICAgICAgICAgIC8vIHN0YXRlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLklhLnNldCh0LCByLndpdGhSZXN1bWVUb2tlbihCeXRlU3RyaW5nLkVNUFRZX0JZVEVfU1RSSU5HLCByLnNuYXBzaG90VmVyc2lvbikpLCBcbiAgICAgICAgICAgICAgICAvLyBDYXVzZSBhIGhhcmQgcmVzZXQgYnkgdW53YXRjaGluZyBhbmQgcmV3YXRjaGluZyBpbW1lZGlhdGVseSwgYnV0XG4gICAgICAgICAgICAgICAgLy8gZGVsaWJlcmF0ZWx5IGRvbid0IHNlbmQgYSByZXN1bWUgdG9rZW4gc28gdGhhdCB3ZSBnZXQgYSBmdWxsIHVwZGF0ZS5cbiAgICAgICAgICAgICAgICBfX1BSSVZBVEVfc2VuZFVud2F0Y2hSZXF1ZXN0KGUsIHQpO1xuICAgICAgICAgICAgICAgIC8vIE1hcmsgdGhlIHRhcmdldCB3ZSBzZW5kIGFzIGJlaW5nIG9uIGJlaGFsZiBvZiBhbiBleGlzdGVuY2UgZmlsdGVyXG4gICAgICAgICAgICAgICAgLy8gbWlzbWF0Y2gsIGJ1dCBkb24ndCBhY3R1YWxseSByZXRhaW4gdGhhdCBpbiBsaXN0ZW5UYXJnZXRzLiBUaGlzIGVuc3VyZXNcbiAgICAgICAgICAgICAgICAvLyB0aGF0IHdlIGZsYWcgdGhlIGZpcnN0IHJlLWxpc3RlbiB0aGlzIHdheSB3aXRob3V0IGltcGFjdGluZyBmdXR1cmVcbiAgICAgICAgICAgICAgICAvLyBsaXN0ZW5zIG9mIHRoaXMgdGFyZ2V0ICh0aGF0IG1pZ2h0IGhhcHBlbiBlLmcuIG9uIHJlY29ubmVjdCkuXG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IG5ldyBUYXJnZXREYXRhKHIudGFyZ2V0LCB0LCBuLCByLnNlcXVlbmNlTnVtYmVyKTtcbiAgICAgICAgICAgICAgICBfX1BSSVZBVEVfc2VuZFdhdGNoUmVxdWVzdChlLCBpKTtcbiAgICAgICAgICAgIH0pKSwgZS5yZW1vdGVTeW5jZXIuYXBwbHlSZW1vdGVFdmVudChuKTtcbiAgICAgICAgfShlLCBuKTtcbiAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1Zyh0biwgXCJGYWlsZWQgdG8gcmFpc2Ugc25hcHNob3Q6XCIsIHQpLCBhd2FpdCBfX1BSSVZBVEVfZGlzYWJsZU5ldHdvcmtVbnRpbFJlY292ZXJ5KGUsIHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZWNvdmVyeSBsb2dpYyBmb3IgSW5kZXhlZERCIGVycm9ycyB0aGF0IHRha2VzIHRoZSBuZXR3b3JrIG9mZmxpbmUgdW50aWxcbiAqIGBvcGAgc3VjY2VlZHMuIFJldHJpZXMgYXJlIHNjaGVkdWxlZCB3aXRoIGJhY2tvZmYgdXNpbmdcbiAqIGBlbnF1ZXVlUmV0cnlhYmxlKClgLiBJZiBgb3AoKWAgaXMgbm90IHByb3ZpZGVkLCBJbmRleGVkREIgYWNjZXNzIGlzXG4gKiB2YWxpZGF0ZWQgdmlhIGEgZ2VuZXJpYyBvcGVyYXRpb24uXG4gKlxuICogVGhlIHJldHVybmVkIFByb21pc2UgaXMgcmVzb2x2ZWQgb25jZSB0aGUgbmV0d29yayBpcyBkaXNhYmxlZCBhbmQgYmVmb3JlXG4gKiBhbnkgcmV0cnkgYXR0ZW1wdC5cbiAqLyBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfZGlzYWJsZU5ldHdvcmtVbnRpbFJlY292ZXJ5KGUsIHQsIG4pIHtcbiAgICBpZiAoIV9fUFJJVkFURV9pc0luZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IodCkpIHRocm93IHQ7XG4gICAgZS5FYS5hZGQoMSAvKiBPZmZsaW5lQ2F1c2UuSW5kZXhlZERiRmFpbGVkICovKSwgXG4gICAgLy8gRGlzYWJsZSBuZXR3b3JrIGFuZCByYWlzZSBvZmZsaW5lIHNuYXBzaG90c1xuICAgIGF3YWl0IF9fUFJJVkFURV9kaXNhYmxlTmV0d29ya0ludGVybmFsKGUpLCBlLlJhLnNldChcIk9mZmxpbmVcIiAvKiBPbmxpbmVTdGF0ZS5PZmZsaW5lICovKSwgXG4gICAgbiB8fCAoXG4gICAgLy8gVXNlIGEgc2ltcGxlIHJlYWQgb3BlcmF0aW9uIHRvIGRldGVybWluZSBpZiBJbmRleGVkREIgcmVjb3ZlcmVkLlxuICAgIC8vIElkZWFsbHksIHdlIHdvdWxkIGV4cG9zZSBhIGhlYWx0aCBjaGVjayBkaXJlY3RseSBvbiBTaW1wbGVEYiwgYnV0XG4gICAgLy8gUmVtb3RlU3RvcmUgb25seSBoYXMgYWNjZXNzIHRvIHBlcnNpc3RlbmNlIHRocm91Z2ggTG9jYWxTdG9yZS5cbiAgICBuID0gKCkgPT4gX19QUklWQVRFX2xvY2FsU3RvcmVHZXRMYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKGUubG9jYWxTdG9yZSkpLCBcbiAgICAvLyBQcm9iZSBJbmRleGVkREIgcGVyaW9kaWNhbGx5IGFuZCByZS1lbmFibGUgbmV0d29ya1xuICAgIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlUmV0cnlhYmxlKChhc3luYyAoKSA9PiB7XG4gICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1Zyh0biwgXCJSZXRyeWluZyBJbmRleGVkREIgYWNjZXNzXCIpLCBhd2FpdCBuKCksIGUuRWEuZGVsZXRlKDEgLyogT2ZmbGluZUNhdXNlLkluZGV4ZWREYkZhaWxlZCAqLyksIFxuICAgICAgICBhd2FpdCBfX1BSSVZBVEVfZW5hYmxlTmV0d29ya0ludGVybmFsKGUpO1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBFeGVjdXRlcyBgb3BgLiBJZiBgb3BgIGZhaWxzLCB0YWtlcyB0aGUgbmV0d29yayBvZmZsaW5lIHVudGlsIGBvcGBcbiAqIHN1Y2NlZWRzLiBSZXR1cm5zIGFmdGVyIHRoZSBmaXJzdCBhdHRlbXB0LlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9leGVjdXRlV2l0aFJlY292ZXJ5KGUsIHQpIHtcbiAgICByZXR1cm4gdCgpLmNhdGNoKChuID0+IF9fUFJJVkFURV9kaXNhYmxlTmV0d29ya1VudGlsUmVjb3ZlcnkoZSwgbiwgdCkpKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2ZpbGxXcml0ZVBpcGVsaW5lKGUpIHtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgbiA9IF9fUFJJVkFURV9lbnN1cmVXcml0ZVN0cmVhbSh0KTtcbiAgICBsZXQgciA9IHQuVGEubGVuZ3RoID4gMCA/IHQuVGFbdC5UYS5sZW5ndGggLSAxXS5iYXRjaElkIDogajtcbiAgICBmb3IgKDtfX1BSSVZBVEVfY2FuQWRkVG9Xcml0ZVBpcGVsaW5lKHQpOyApIHRyeSB7XG4gICAgICAgIGNvbnN0IGUgPSBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZUdldE5leHRNdXRhdGlvbkJhdGNoKHQubG9jYWxTdG9yZSwgcik7XG4gICAgICAgIGlmIChudWxsID09PSBlKSB7XG4gICAgICAgICAgICAwID09PSB0LlRhLmxlbmd0aCAmJiBuLkxfKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICByID0gZS5iYXRjaElkLCBfX1BSSVZBVEVfYWRkVG9Xcml0ZVBpcGVsaW5lKHQsIGUpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgYXdhaXQgX19QUklWQVRFX2Rpc2FibGVOZXR3b3JrVW50aWxSZWNvdmVyeSh0LCBlKTtcbiAgICB9XG4gICAgX19QUklWQVRFX3Nob3VsZFN0YXJ0V3JpdGVTdHJlYW0odCkgJiYgX19QUklWQVRFX3N0YXJ0V3JpdGVTdHJlYW0odCk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHdlIGNhbiBhZGQgdG8gdGhlIHdyaXRlIHBpcGVsaW5lIChpLmUuIHRoZSBuZXR3b3JrIGlzXG4gKiBlbmFibGVkIGFuZCB0aGUgd3JpdGUgcGlwZWxpbmUgaXMgbm90IGZ1bGwpLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9jYW5BZGRUb1dyaXRlUGlwZWxpbmUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfY2FuVXNlTmV0d29yayhlKSAmJiBlLlRhLmxlbmd0aCA8IDEwO1xufVxuXG4vKipcbiAqIFF1ZXVlcyBhZGRpdGlvbmFsIHdyaXRlcyB0byBiZSBzZW50IHRvIHRoZSB3cml0ZSBzdHJlYW0sIHNlbmRpbmcgdGhlbVxuICogaW1tZWRpYXRlbHkgaWYgdGhlIHdyaXRlIHN0cmVhbSBpcyBlc3RhYmxpc2hlZC5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfYWRkVG9Xcml0ZVBpcGVsaW5lKGUsIHQpIHtcbiAgICBlLlRhLnB1c2godCk7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9lbnN1cmVXcml0ZVN0cmVhbShlKTtcbiAgICBuLk9fKCkgJiYgbi5YXyAmJiBuLmVhKHQubXV0YXRpb25zKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3Nob3VsZFN0YXJ0V3JpdGVTdHJlYW0oZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfY2FuVXNlTmV0d29yayhlKSAmJiAhX19QUklWQVRFX2Vuc3VyZVdyaXRlU3RyZWFtKGUpLnhfKCkgJiYgZS5UYS5sZW5ndGggPiAwO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfc3RhcnRXcml0ZVN0cmVhbShlKSB7XG4gICAgX19QUklWQVRFX2Vuc3VyZVdyaXRlU3RyZWFtKGUpLnN0YXJ0KCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9vbldyaXRlU3RyZWFtT3BlbihlKSB7XG4gICAgX19QUklWQVRFX2Vuc3VyZVdyaXRlU3RyZWFtKGUpLnJhKCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9vbldyaXRlSGFuZHNoYWtlQ29tcGxldGUoZSkge1xuICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZW5zdXJlV3JpdGVTdHJlYW0oZSk7XG4gICAgLy8gU2VuZCB0aGUgd3JpdGUgcGlwZWxpbmUgbm93IHRoYXQgdGhlIHN0cmVhbSBpcyBlc3RhYmxpc2hlZC5cbiAgICAgICAgZm9yIChjb25zdCBuIG9mIGUuVGEpIHQuZWEobi5tdXRhdGlvbnMpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfb25NdXRhdGlvblJlc3VsdChlLCB0LCBuKSB7XG4gICAgY29uc3QgciA9IGUuVGEuc2hpZnQoKSwgaSA9IE11dGF0aW9uQmF0Y2hSZXN1bHQuZnJvbShyLCB0LCBuKTtcbiAgICBhd2FpdCBfX1BSSVZBVEVfZXhlY3V0ZVdpdGhSZWNvdmVyeShlLCAoKCkgPT4gZS5yZW1vdGVTeW5jZXIuYXBwbHlTdWNjZXNzZnVsV3JpdGUoaSkpKSwgXG4gICAgLy8gSXQncyBwb3NzaWJsZSB0aGF0IHdpdGggdGhlIGNvbXBsZXRpb24gb2YgdGhpcyBtdXRhdGlvbiBhbm90aGVyXG4gICAgLy8gc2xvdCBoYXMgZnJlZWQgdXAuXG4gICAgYXdhaXQgX19QUklWQVRFX2ZpbGxXcml0ZVBpcGVsaW5lKGUpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfb25Xcml0ZVN0cmVhbUNsb3NlKGUsIHQpIHtcbiAgICAvLyBJZiB0aGUgd3JpdGUgc3RyZWFtIGNsb3NlZCBhZnRlciB0aGUgd3JpdGUgaGFuZHNoYWtlIGNvbXBsZXRlcywgYSB3cml0ZVxuICAgIC8vIG9wZXJhdGlvbiBmYWlsZWQgYW5kIHdlIGZhaWwgdGhlIHBlbmRpbmcgb3BlcmF0aW9uLlxuICAgIHQgJiYgX19QUklWQVRFX2Vuc3VyZVdyaXRlU3RyZWFtKGUpLlhfICYmIFxuICAgIC8vIFRoaXMgZXJyb3IgYWZmZWN0cyB0aGUgYWN0dWFsIHdyaXRlLlxuICAgIGF3YWl0IGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9oYW5kbGVXcml0ZUVycm9yKGUsIHQpIHtcbiAgICAgICAgLy8gT25seSBoYW5kbGUgcGVybWFuZW50IGVycm9ycyBoZXJlLiBJZiBpdCdzIHRyYW5zaWVudCwganVzdCBsZXQgdGhlIHJldHJ5XG4gICAgICAgIC8vIGxvZ2ljIGtpY2sgaW4uXG4gICAgICAgIGlmIChmdW5jdGlvbiBfX1BSSVZBVEVfaXNQZXJtYW5lbnRXcml0ZUVycm9yKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBfX1BSSVZBVEVfaXNQZXJtYW5lbnRFcnJvcihlKSAmJiBlICE9PSBOLkFCT1JURUQ7XG4gICAgICAgIH0odC5jb2RlKSkge1xuICAgICAgICAgICAgLy8gVGhpcyB3YXMgYSBwZXJtYW5lbnQgZXJyb3IsIHRoZSByZXF1ZXN0IGl0c2VsZiB3YXMgdGhlIHByb2JsZW1cbiAgICAgICAgICAgIC8vIHNvIGl0J3Mgbm90IGdvaW5nIHRvIHN1Y2NlZWQgaWYgd2UgcmVzZW5kIGl0LlxuICAgICAgICAgICAgY29uc3QgbiA9IGUuVGEuc2hpZnQoKTtcbiAgICAgICAgICAgIC8vIEluIHRoaXMgY2FzZSBpdCdzIGFsc28gdW5saWtlbHkgdGhhdCB0aGUgc2VydmVyIGl0c2VsZiBpcyBtZWx0aW5nXG4gICAgICAgICAgICAvLyBkb3duIC0tIHRoaXMgd2FzIGp1c3QgYSBiYWQgcmVxdWVzdCBzbyBpbmhpYml0IGJhY2tvZmYgb24gdGhlIG5leHRcbiAgICAgICAgICAgIC8vIHJlc3RhcnQuXG4gICAgICAgICAgICAgICAgICAgICAgICBfX1BSSVZBVEVfZW5zdXJlV3JpdGVTdHJlYW0oZSkuQl8oKSwgYXdhaXQgX19QUklWQVRFX2V4ZWN1dGVXaXRoUmVjb3ZlcnkoZSwgKCgpID0+IGUucmVtb3RlU3luY2VyLnJlamVjdEZhaWxlZFdyaXRlKG4uYmF0Y2hJZCwgdCkpKSwgXG4gICAgICAgICAgICAvLyBJdCdzIHBvc3NpYmxlIHRoYXQgd2l0aCB0aGUgY29tcGxldGlvbiBvZiB0aGlzIG11dGF0aW9uXG4gICAgICAgICAgICAvLyBhbm90aGVyIHNsb3QgaGFzIGZyZWVkIHVwLlxuICAgICAgICAgICAgYXdhaXQgX19QUklWQVRFX2ZpbGxXcml0ZVBpcGVsaW5lKGUpO1xuICAgICAgICB9XG4gICAgfShlLCB0KSwgXG4gICAgLy8gVGhlIHdyaXRlIHN0cmVhbSBtaWdodCBoYXZlIGJlZW4gc3RhcnRlZCBieSByZWZpbGxpbmcgdGhlIHdyaXRlXG4gICAgLy8gcGlwZWxpbmUgZm9yIGZhaWxlZCB3cml0ZXNcbiAgICBfX1BSSVZBVEVfc2hvdWxkU3RhcnRXcml0ZVN0cmVhbShlKSAmJiBfX1BSSVZBVEVfc3RhcnRXcml0ZVN0cmVhbShlKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3JlbW90ZVN0b3JlSGFuZGxlQ3JlZGVudGlhbENoYW5nZShlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgbi5hc3luY1F1ZXVlLnZlcmlmeU9wZXJhdGlvbkluUHJvZ3Jlc3MoKSwgX19QUklWQVRFX2xvZ0RlYnVnKHRuLCBcIlJlbW90ZVN0b3JlIHJlY2VpdmVkIG5ldyBjcmVkZW50aWFsc1wiKTtcbiAgICBjb25zdCByID0gX19QUklWQVRFX2NhblVzZU5ldHdvcmsobik7XG4gICAgLy8gVGVhciBkb3duIGFuZCByZS1jcmVhdGUgb3VyIG5ldHdvcmsgc3RyZWFtcy4gVGhpcyB3aWxsIGVuc3VyZSB3ZSBnZXQgYVxuICAgIC8vIGZyZXNoIGF1dGggdG9rZW4gZm9yIHRoZSBuZXcgdXNlciBhbmQgcmUtZmlsbCB0aGUgd3JpdGUgcGlwZWxpbmUgd2l0aFxuICAgIC8vIG5ldyBtdXRhdGlvbnMgZnJvbSB0aGUgTG9jYWxTdG9yZSAoc2luY2UgbXV0YXRpb25zIGFyZSBwZXItdXNlcikuXG4gICAgICAgIG4uRWEuYWRkKDMgLyogT2ZmbGluZUNhdXNlLkNyZWRlbnRpYWxDaGFuZ2UgKi8pLCBhd2FpdCBfX1BSSVZBVEVfZGlzYWJsZU5ldHdvcmtJbnRlcm5hbChuKSwgXG4gICAgciAmJiBcbiAgICAvLyBEb24ndCBzZXQgdGhlIG5ldHdvcmsgc3RhdHVzIHRvIFVua25vd24gaWYgd2UgYXJlIG9mZmxpbmUuXG4gICAgbi5SYS5zZXQoXCJVbmtub3duXCIgLyogT25saW5lU3RhdGUuVW5rbm93biAqLyksIGF3YWl0IG4ucmVtb3RlU3luY2VyLmhhbmRsZUNyZWRlbnRpYWxDaGFuZ2UodCksIFxuICAgIG4uRWEuZGVsZXRlKDMgLyogT2ZmbGluZUNhdXNlLkNyZWRlbnRpYWxDaGFuZ2UgKi8pLCBhd2FpdCBfX1BSSVZBVEVfZW5hYmxlTmV0d29ya0ludGVybmFsKG4pO1xufVxuXG4vKipcbiAqIFRvZ2dsZXMgdGhlIG5ldHdvcmsgc3RhdGUgd2hlbiB0aGUgY2xpZW50IGdhaW5zIG9yIGxvc2VzIGl0cyBwcmltYXJ5IGxlYXNlLlxuICovIGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9yZW1vdGVTdG9yZUFwcGx5UHJpbWFyeVN0YXRlKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICB0ID8gKG4uRWEuZGVsZXRlKDIgLyogT2ZmbGluZUNhdXNlLklzU2Vjb25kYXJ5ICovKSwgYXdhaXQgX19QUklWQVRFX2VuYWJsZU5ldHdvcmtJbnRlcm5hbChuKSkgOiB0IHx8IChuLkVhLmFkZCgyIC8qIE9mZmxpbmVDYXVzZS5Jc1NlY29uZGFyeSAqLyksIFxuICAgIGF3YWl0IF9fUFJJVkFURV9kaXNhYmxlTmV0d29ya0ludGVybmFsKG4pLCBuLlJhLnNldChcIlVua25vd25cIiAvKiBPbmxpbmVTdGF0ZS5Vbmtub3duICovKSk7XG59XG5cbi8qKlxuICogSWYgbm90IHlldCBpbml0aWFsaXplZCwgcmVnaXN0ZXJzIHRoZSBXYXRjaFN0cmVhbSBhbmQgaXRzIG5ldHdvcmsgc3RhdGVcbiAqIGNhbGxiYWNrIHdpdGggYHJlbW90ZVN0b3JlSW1wbGAuIFJldHVybnMgdGhlIGV4aXN0aW5nIHN0cmVhbSBpZiBvbmUgaXNcbiAqIGFscmVhZHkgYXZhaWxhYmxlLlxuICpcbiAqIFBPUlRJTkcgTk9URTogT24gaU9TIGFuZCBBbmRyb2lkLCB0aGUgV2F0Y2hTdHJlYW0gZ2V0cyByZWdpc3RlcmVkIG9uIHN0YXJ0dXAuXG4gKiBUaGlzIGlzIG5vdCBkb25lIG9uIFdlYiB0byBhbGxvdyBpdCB0byBiZSB0cmVlLXNoYWtlbi5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZW5zdXJlV2F0Y2hTdHJlYW0oZSkge1xuICAgIHJldHVybiBlLm1hIHx8IChcbiAgICAvLyBDcmVhdGUgc3RyZWFtIChidXQgbm90ZSB0aGF0IGl0IGlzIG5vdCBzdGFydGVkIHlldCkuXG4gICAgZS5tYSA9IGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdQZXJzaXN0ZW50V2F0Y2hTdHJlYW0oZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICAgICAgcmV0dXJuIHIuc2EoKSwgbmV3IF9fUFJJVkFURV9QZXJzaXN0ZW50TGlzdGVuU3RyZWFtKHQsIHIuY29ubmVjdGlvbiwgci5hdXRoQ3JlZGVudGlhbHMsIHIuYXBwQ2hlY2tDcmVkZW50aWFscywgci5zZXJpYWxpemVyLCBuKTtcbiAgICB9XG4gICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKGUuZGF0YXN0b3JlLCBlLmFzeW5jUXVldWUsIHtcbiAgICAgICAgWG86IF9fUFJJVkFURV9vbldhdGNoU3RyZWFtQ29ubmVjdGVkLmJpbmQobnVsbCwgZSksXG4gICAgICAgIHRfOiBfX1BSSVZBVEVfb25XYXRjaFN0cmVhbU9wZW4uYmluZChudWxsLCBlKSxcbiAgICAgICAgcl86IF9fUFJJVkFURV9vbldhdGNoU3RyZWFtQ2xvc2UuYmluZChudWxsLCBlKSxcbiAgICAgICAgSF86IF9fUFJJVkFURV9vbldhdGNoU3RyZWFtQ2hhbmdlLmJpbmQobnVsbCwgZSlcbiAgICB9KSwgZS5kYS5wdXNoKChhc3luYyB0ID0+IHtcbiAgICAgICAgdCA/IChlLm1hLkJfKCksIF9fUFJJVkFURV9zaG91bGRTdGFydFdhdGNoU3RyZWFtKGUpID8gX19QUklWQVRFX3N0YXJ0V2F0Y2hTdHJlYW0oZSkgOiBlLlJhLnNldChcIlVua25vd25cIiAvKiBPbmxpbmVTdGF0ZS5Vbmtub3duICovKSkgOiAoYXdhaXQgZS5tYS5zdG9wKCksIFxuICAgICAgICBfX1BSSVZBVEVfY2xlYW5VcFdhdGNoU3RyZWFtU3RhdGUoZSkpO1xuICAgIH0pKSksIGUubWE7XG59XG5cbi8qKlxuICogSWYgbm90IHlldCBpbml0aWFsaXplZCwgcmVnaXN0ZXJzIHRoZSBXcml0ZVN0cmVhbSBhbmQgaXRzIG5ldHdvcmsgc3RhdGVcbiAqIGNhbGxiYWNrIHdpdGggYHJlbW90ZVN0b3JlSW1wbGAuIFJldHVybnMgdGhlIGV4aXN0aW5nIHN0cmVhbSBpZiBvbmUgaXNcbiAqIGFscmVhZHkgYXZhaWxhYmxlLlxuICpcbiAqIFBPUlRJTkcgTk9URTogT24gaU9TIGFuZCBBbmRyb2lkLCB0aGUgV3JpdGVTdHJlYW0gZ2V0cyByZWdpc3RlcmVkIG9uIHN0YXJ0dXAuXG4gKiBUaGlzIGlzIG5vdCBkb25lIG9uIFdlYiB0byBhbGxvdyBpdCB0byBiZSB0cmVlLXNoYWtlbi5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZW5zdXJlV3JpdGVTdHJlYW0oZSkge1xuICAgIHJldHVybiBlLmZhIHx8IChcbiAgICAvLyBDcmVhdGUgc3RyZWFtIChidXQgbm90ZSB0aGF0IGl0IGlzIG5vdCBzdGFydGVkIHlldCkuXG4gICAgZS5mYSA9IGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdQZXJzaXN0ZW50V3JpdGVTdHJlYW0oZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICAgICAgcmV0dXJuIHIuc2EoKSwgbmV3IF9fUFJJVkFURV9QZXJzaXN0ZW50V3JpdGVTdHJlYW0odCwgci5jb25uZWN0aW9uLCByLmF1dGhDcmVkZW50aWFscywgci5hcHBDaGVja0NyZWRlbnRpYWxzLCByLnNlcmlhbGl6ZXIsIG4pO1xuICAgIH0oZS5kYXRhc3RvcmUsIGUuYXN5bmNRdWV1ZSwge1xuICAgICAgICBYbzogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKCksXG4gICAgICAgIHRfOiBfX1BSSVZBVEVfb25Xcml0ZVN0cmVhbU9wZW4uYmluZChudWxsLCBlKSxcbiAgICAgICAgcl86IF9fUFJJVkFURV9vbldyaXRlU3RyZWFtQ2xvc2UuYmluZChudWxsLCBlKSxcbiAgICAgICAgdGE6IF9fUFJJVkFURV9vbldyaXRlSGFuZHNoYWtlQ29tcGxldGUuYmluZChudWxsLCBlKSxcbiAgICAgICAgbmE6IF9fUFJJVkFURV9vbk11dGF0aW9uUmVzdWx0LmJpbmQobnVsbCwgZSlcbiAgICB9KSwgZS5kYS5wdXNoKChhc3luYyB0ID0+IHtcbiAgICAgICAgdCA/IChlLmZhLkJfKCksIFxuICAgICAgICAvLyBUaGlzIHdpbGwgc3RhcnQgdGhlIHdyaXRlIHN0cmVhbSBpZiBuZWNlc3NhcnkuXG4gICAgICAgIGF3YWl0IF9fUFJJVkFURV9maWxsV3JpdGVQaXBlbGluZShlKSkgOiAoYXdhaXQgZS5mYS5zdG9wKCksIGUuVGEubGVuZ3RoID4gMCAmJiAoX19QUklWQVRFX2xvZ0RlYnVnKHRuLCBgU3RvcHBpbmcgd3JpdGUgc3RyZWFtIHdpdGggJHtlLlRhLmxlbmd0aH0gcGVuZGluZyB3cml0ZXNgKSwgXG4gICAgICAgIGUuVGEgPSBbXSkpO1xuICAgIH0pKSksIGUuZmE7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlcHJlc2VudHMgYW4gb3BlcmF0aW9uIHNjaGVkdWxlZCB0byBiZSBydW4gaW4gdGhlIGZ1dHVyZSBvbiBhbiBBc3luY1F1ZXVlLlxuICpcbiAqIEl0IGlzIGNyZWF0ZWQgdmlhIERlbGF5ZWRPcGVyYXRpb24uY3JlYXRlQW5kU2NoZWR1bGUoKS5cbiAqXG4gKiBTdXBwb3J0cyBjYW5jZWxsYXRpb24gKHZpYSBjYW5jZWwoKSkgYW5kIGVhcmx5IGV4ZWN1dGlvbiAodmlhIHNraXBEZWxheSgpKS5cbiAqXG4gKiBOb3RlOiBXZSBpbXBsZW1lbnQgYFByb21pc2VMaWtlYCBpbnN0ZWFkIG9mIGBQcm9taXNlYCwgYXMgdGhlIGBQcm9taXNlYCB0eXBlXG4gKiBpbiBuZXdlciB2ZXJzaW9ucyBvZiBUeXBlU2NyaXB0IGRlZmluZXMgYGZpbmFsbHlgLCB3aGljaCBpcyBub3QgYXZhaWxhYmxlIGluXG4gKiBJRS5cbiAqL1xuY2xhc3MgRGVsYXllZE9wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgciwgaSkge1xuICAgICAgICB0aGlzLmFzeW5jUXVldWUgPSBlLCB0aGlzLnRpbWVySWQgPSB0LCB0aGlzLnRhcmdldFRpbWVNcyA9IG4sIHRoaXMub3AgPSByLCB0aGlzLnJlbW92YWxDYWxsYmFjayA9IGksIFxuICAgICAgICB0aGlzLmRlZmVycmVkID0gbmV3IF9fUFJJVkFURV9EZWZlcnJlZCwgdGhpcy50aGVuID0gdGhpcy5kZWZlcnJlZC5wcm9taXNlLnRoZW4uYmluZCh0aGlzLmRlZmVycmVkLnByb21pc2UpLCBcbiAgICAgICAgLy8gSXQncyBub3JtYWwgZm9yIHRoZSBkZWZlcnJlZCBwcm9taXNlIHRvIGJlIGNhbmNlbGVkIChkdWUgdG8gY2FuY2VsbGF0aW9uKVxuICAgICAgICAvLyBhbmQgc28gd2UgYXR0YWNoIGEgZHVtbXkgY2F0Y2ggY2FsbGJhY2sgdG8gYXZvaWRcbiAgICAgICAgLy8gJ1VuaGFuZGxlZFByb21pc2VSZWplY3Rpb25XYXJuaW5nJyBsb2cgc3BhbS5cbiAgICAgICAgdGhpcy5kZWZlcnJlZC5wcm9taXNlLmNhdGNoKChlID0+IHt9KSk7XG4gICAgfVxuICAgIGdldCBwcm9taXNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kZWZlcnJlZC5wcm9taXNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgRGVsYXllZE9wZXJhdGlvbiB0aGF0IGhhcyBiZWVuIHNjaGVkdWxlZCB0byBiZVxuICAgICAqIGV4ZWN1dGVkIG9uIHRoZSBwcm92aWRlZCBhc3luY1F1ZXVlIGFmdGVyIHRoZSBwcm92aWRlZCBkZWxheU1zLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFzeW5jUXVldWUgLSBUaGUgcXVldWUgdG8gc2NoZWR1bGUgdGhlIG9wZXJhdGlvbiBvbi5cbiAgICAgKiBAcGFyYW0gaWQgLSBBIFRpbWVyIElEIGlkZW50aWZ5aW5nIHRoZSB0eXBlIG9mIG9wZXJhdGlvbiB0aGlzIGlzLlxuICAgICAqIEBwYXJhbSBkZWxheU1zIC0gVGhlIGRlbGF5IChtcykgYmVmb3JlIHRoZSBvcGVyYXRpb24gc2hvdWxkIGJlIHNjaGVkdWxlZC5cbiAgICAgKiBAcGFyYW0gb3AgLSBUaGUgb3BlcmF0aW9uIHRvIHJ1bi5cbiAgICAgKiBAcGFyYW0gcmVtb3ZhbENhbGxiYWNrIC0gQSBjYWxsYmFjayB0byBiZSBjYWxsZWQgc3luY2hyb25vdXNseSBvbmNlIHRoZVxuICAgICAqICAgb3BlcmF0aW9uIGlzIGV4ZWN1dGVkIG9yIGNhbmNlbGVkLCBub3RpZnlpbmcgdGhlIEFzeW5jUXVldWUgdG8gcmVtb3ZlIGl0XG4gICAgICogICBmcm9tIGl0cyBkZWxheWVkT3BlcmF0aW9ucyBsaXN0LlxuICAgICAqICAgUE9SVElORyBOT1RFOiBUaGlzIGV4aXN0cyB0byBwcmV2ZW50IG1ha2luZyByZW1vdmVEZWxheWVkT3BlcmF0aW9uKCkgYW5kXG4gICAgICogICB0aGUgRGVsYXllZE9wZXJhdGlvbiBjbGFzcyBwdWJsaWMuXG4gICAgICovICAgIHN0YXRpYyBjcmVhdGVBbmRTY2hlZHVsZShlLCB0LCBuLCByLCBpKSB7XG4gICAgICAgIGNvbnN0IHMgPSBEYXRlLm5vdygpICsgbiwgbyA9IG5ldyBEZWxheWVkT3BlcmF0aW9uKGUsIHQsIHMsIHIsIGkpO1xuICAgICAgICByZXR1cm4gby5zdGFydChuKSwgbztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhcnRzIHRoZSB0aW1lci4gVGhpcyBpcyBjYWxsZWQgaW1tZWRpYXRlbHkgYWZ0ZXIgY29uc3RydWN0aW9uIGJ5XG4gICAgICogY3JlYXRlQW5kU2NoZWR1bGUoKS5cbiAgICAgKi8gICAgc3RhcnQoZSkge1xuICAgICAgICB0aGlzLnRpbWVySGFuZGxlID0gc2V0VGltZW91dCgoKCkgPT4gdGhpcy5oYW5kbGVEZWxheUVsYXBzZWQoKSksIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBRdWV1ZXMgdGhlIG9wZXJhdGlvbiB0byBydW4gaW1tZWRpYXRlbHkgKGlmIGl0IGhhc24ndCBhbHJlYWR5IGJlZW4gcnVuIG9yXG4gICAgICogY2FuY2VsZWQpLlxuICAgICAqLyAgICBza2lwRGVsYXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhhbmRsZURlbGF5RWxhcHNlZCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYW5jZWxzIHRoZSBvcGVyYXRpb24gaWYgaXQgaGFzbid0IGFscmVhZHkgYmVlbiBleGVjdXRlZCBvciBjYW5jZWxlZC4gVGhlXG4gICAgICogcHJvbWlzZSB3aWxsIGJlIHJlamVjdGVkLlxuICAgICAqXG4gICAgICogQXMgbG9uZyBhcyB0aGUgb3BlcmF0aW9uIGhhcyBub3QgeWV0IGJlZW4gcnVuLCBjYWxsaW5nIGNhbmNlbCgpIHByb3ZpZGVzIGFcbiAgICAgKiBndWFyYW50ZWUgdGhhdCB0aGUgb3BlcmF0aW9uIHdpbGwgbm90IGJlIHJ1bi5cbiAgICAgKi8gICAgY2FuY2VsKGUpIHtcbiAgICAgICAgbnVsbCAhPT0gdGhpcy50aW1lckhhbmRsZSAmJiAodGhpcy5jbGVhclRpbWVvdXQoKSwgdGhpcy5kZWZlcnJlZC5yZWplY3QobmV3IEZpcmVzdG9yZUVycm9yKE4uQ0FOQ0VMTEVELCBcIk9wZXJhdGlvbiBjYW5jZWxsZWRcIiArIChlID8gXCI6IFwiICsgZSA6IFwiXCIpKSkpO1xuICAgIH1cbiAgICBoYW5kbGVEZWxheUVsYXBzZWQoKSB7XG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiBudWxsICE9PSB0aGlzLnRpbWVySGFuZGxlID8gKHRoaXMuY2xlYXJUaW1lb3V0KCksIFxuICAgICAgICB0aGlzLm9wKCkudGhlbigoZSA9PiB0aGlzLmRlZmVycmVkLnJlc29sdmUoZSkpKSkgOiBQcm9taXNlLnJlc29sdmUoKSkpO1xuICAgIH1cbiAgICBjbGVhclRpbWVvdXQoKSB7XG4gICAgICAgIG51bGwgIT09IHRoaXMudGltZXJIYW5kbGUgJiYgKHRoaXMucmVtb3ZhbENhbGxiYWNrKHRoaXMpLCBjbGVhclRpbWVvdXQodGhpcy50aW1lckhhbmRsZSksIFxuICAgICAgICB0aGlzLnRpbWVySGFuZGxlID0gbnVsbCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgYSBGaXJlc3RvcmVFcnJvciB0aGF0IGNhbiBiZSBzdXJmYWNlZCB0byB0aGUgdXNlciBpZiB0aGUgcHJvdmlkZWRcbiAqIGVycm9yIGlzIGFuIEluZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IuIFJlLXRocm93cyB0aGUgZXJyb3Igb3RoZXJ3aXNlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV93cmFwSW5Vc2VyRXJyb3JJZlJlY292ZXJhYmxlKGUsIHQpIHtcbiAgICBpZiAoX19QUklWQVRFX2xvZ0Vycm9yKFwiQXN5bmNRdWV1ZVwiLCBgJHt0fTogJHtlfWApLCBfX1BSSVZBVEVfaXNJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yKGUpKSByZXR1cm4gbmV3IEZpcmVzdG9yZUVycm9yKE4uVU5BVkFJTEFCTEUsIGAke3R9OiAke2V9YCk7XG4gICAgdGhyb3cgZTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRG9jdW1lbnRTZXQgaXMgYW4gaW1tdXRhYmxlIChjb3B5LW9uLXdyaXRlKSBjb2xsZWN0aW9uIHRoYXQgaG9sZHMgZG9jdW1lbnRzXG4gKiBpbiBvcmRlciBzcGVjaWZpZWQgYnkgdGhlIHByb3ZpZGVkIGNvbXBhcmF0b3IuIFdlIGFsd2F5cyBhZGQgYSBkb2N1bWVudCBrZXlcbiAqIGNvbXBhcmF0b3Igb24gdG9wIG9mIHdoYXQgaXMgcHJvdmlkZWQgdG8gZ3VhcmFudGVlIGRvY3VtZW50IGVxdWFsaXR5IGJhc2VkIG9uXG4gKiB0aGUga2V5LlxuICovIGNsYXNzIERvY3VtZW50U2V0IHtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGVtcHR5IGNvcHkgb2YgdGhlIGV4aXN0aW5nIERvY3VtZW50U2V0LCB1c2luZyB0aGUgc2FtZVxuICAgICAqIGNvbXBhcmF0b3IuXG4gICAgICovXG4gICAgc3RhdGljIGVtcHR5U2V0KGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudFNldChlLmNvbXBhcmF0b3IpO1xuICAgIH1cbiAgICAvKiogVGhlIGRlZmF1bHQgb3JkZXJpbmcgaXMgYnkga2V5IGlmIHRoZSBjb21wYXJhdG9yIGlzIG9taXR0ZWQgKi8gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICAvLyBXZSBhcmUgYWRkaW5nIGRvY3VtZW50IGtleSBjb21wYXJhdG9yIHRvIHRoZSBlbmQgYXMgaXQncyB0aGUgb25seVxuICAgICAgICAvLyBndWFyYW50ZWVkIHVuaXF1ZSBwcm9wZXJ0eSBvZiBhIGRvY3VtZW50LlxuICAgICAgICB0aGlzLmNvbXBhcmF0b3IgPSBlID8gKHQsIG4pID0+IGUodCwgbikgfHwgRG9jdW1lbnRLZXkuY29tcGFyYXRvcih0LmtleSwgbi5rZXkpIDogKGUsIHQpID0+IERvY3VtZW50S2V5LmNvbXBhcmF0b3IoZS5rZXksIHQua2V5KSwgXG4gICAgICAgIHRoaXMua2V5ZWRNYXAgPSBkb2N1bWVudE1hcCgpLCB0aGlzLnNvcnRlZFNldCA9IG5ldyBTb3J0ZWRNYXAodGhpcy5jb21wYXJhdG9yKTtcbiAgICB9XG4gICAgaGFzKGUpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT0gdGhpcy5rZXllZE1hcC5nZXQoZSk7XG4gICAgfVxuICAgIGdldChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmtleWVkTWFwLmdldChlKTtcbiAgICB9XG4gICAgZmlyc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNvcnRlZFNldC5taW5LZXkoKTtcbiAgICB9XG4gICAgbGFzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc29ydGVkU2V0Lm1heEtleSgpO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zb3J0ZWRTZXQuaXNFbXB0eSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgcHJvdmlkZWQga2V5IGluIHRoZSBkb2N1bWVudCBzZXQsIG9yIC0xIGlmIHRoZVxuICAgICAqIGRvY3VtZW50IGtleSBpcyBub3QgcHJlc2VudCBpbiB0aGUgc2V0O1xuICAgICAqLyAgICBpbmRleE9mKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMua2V5ZWRNYXAuZ2V0KGUpO1xuICAgICAgICByZXR1cm4gdCA/IHRoaXMuc29ydGVkU2V0LmluZGV4T2YodCkgOiAtMTtcbiAgICB9XG4gICAgZ2V0IHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNvcnRlZFNldC5zaXplO1xuICAgIH1cbiAgICAvKiogSXRlcmF0ZXMgZG9jdW1lbnRzIGluIG9yZGVyIGRlZmluZWQgYnkgXCJjb21wYXJhdG9yXCIgKi8gICAgZm9yRWFjaChlKSB7XG4gICAgICAgIHRoaXMuc29ydGVkU2V0Lmlub3JkZXJUcmF2ZXJzYWwoKCh0LCBuKSA9PiAoZSh0KSwgITEpKSk7XG4gICAgfVxuICAgIC8qKiBJbnNlcnRzIG9yIHVwZGF0ZXMgYSBkb2N1bWVudCB3aXRoIHRoZSBzYW1lIGtleSAqLyAgICBhZGQoZSkge1xuICAgICAgICAvLyBGaXJzdCByZW1vdmUgdGhlIGVsZW1lbnQgaWYgd2UgaGF2ZSBpdC5cbiAgICAgICAgY29uc3QgdCA9IHRoaXMuZGVsZXRlKGUua2V5KTtcbiAgICAgICAgcmV0dXJuIHQuY29weSh0LmtleWVkTWFwLmluc2VydChlLmtleSwgZSksIHQuc29ydGVkU2V0Lmluc2VydChlLCBudWxsKSk7XG4gICAgfVxuICAgIC8qKiBEZWxldGVzIGEgZG9jdW1lbnQgd2l0aCBhIGdpdmVuIGtleSAqLyAgICBkZWxldGUoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5nZXQoZSk7XG4gICAgICAgIHJldHVybiB0ID8gdGhpcy5jb3B5KHRoaXMua2V5ZWRNYXAucmVtb3ZlKGUpLCB0aGlzLnNvcnRlZFNldC5yZW1vdmUodCkpIDogdGhpcztcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIGlmICghKGUgaW5zdGFuY2VvZiBEb2N1bWVudFNldCkpIHJldHVybiAhMTtcbiAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gZS5zaXplKSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnNvcnRlZFNldC5nZXRJdGVyYXRvcigpLCBuID0gZS5zb3J0ZWRTZXQuZ2V0SXRlcmF0b3IoKTtcbiAgICAgICAgZm9yICg7dC5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQuZ2V0TmV4dCgpLmtleSwgciA9IG4uZ2V0TmV4dCgpLmtleTtcbiAgICAgICAgICAgIGlmICghZS5pc0VxdWFsKHIpKSByZXR1cm4gITE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGUucHVzaCh0LnRvU3RyaW5nKCkpO1xuICAgICAgICB9KSksIDAgPT09IGUubGVuZ3RoID8gXCJEb2N1bWVudFNldCAoKVwiIDogXCJEb2N1bWVudFNldCAoXFxuICBcIiArIGUuam9pbihcIiAgXFxuXCIpICsgXCJcXG4pXCI7XG4gICAgfVxuICAgIGNvcHkoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gbmV3IERvY3VtZW50U2V0O1xuICAgICAgICByZXR1cm4gbi5jb21wYXJhdG9yID0gdGhpcy5jb21wYXJhdG9yLCBuLmtleWVkTWFwID0gZSwgbi5zb3J0ZWRTZXQgPSB0LCBuO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRG9jdW1lbnRDaGFuZ2VTZXQga2VlcHMgdHJhY2sgb2YgYSBzZXQgb2YgY2hhbmdlcyB0byBkb2NzIGluIGEgcXVlcnksIG1lcmdpbmdcbiAqIGR1cGxpY2F0ZSBldmVudHMgZm9yIHRoZSBzYW1lIGRvYy5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfRG9jdW1lbnRDaGFuZ2VTZXQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmdhID0gbmV3IFNvcnRlZE1hcChEb2N1bWVudEtleS5jb21wYXJhdG9yKTtcbiAgICB9XG4gICAgdHJhY2soZSkge1xuICAgICAgICBjb25zdCB0ID0gZS5kb2Mua2V5LCBuID0gdGhpcy5nYS5nZXQodCk7XG4gICAgICAgIG4gPyBcbiAgICAgICAgLy8gTWVyZ2UgdGhlIG5ldyBjaGFuZ2Ugd2l0aCB0aGUgZXhpc3RpbmcgY2hhbmdlLlxuICAgICAgICAwIC8qIENoYW5nZVR5cGUuQWRkZWQgKi8gIT09IGUudHlwZSAmJiAzIC8qIENoYW5nZVR5cGUuTWV0YWRhdGEgKi8gPT09IG4udHlwZSA/IHRoaXMuZ2EgPSB0aGlzLmdhLmluc2VydCh0LCBlKSA6IDMgLyogQ2hhbmdlVHlwZS5NZXRhZGF0YSAqLyA9PT0gZS50eXBlICYmIDEgLyogQ2hhbmdlVHlwZS5SZW1vdmVkICovICE9PSBuLnR5cGUgPyB0aGlzLmdhID0gdGhpcy5nYS5pbnNlcnQodCwge1xuICAgICAgICAgICAgdHlwZTogbi50eXBlLFxuICAgICAgICAgICAgZG9jOiBlLmRvY1xuICAgICAgICB9KSA6IDIgLyogQ2hhbmdlVHlwZS5Nb2RpZmllZCAqLyA9PT0gZS50eXBlICYmIDIgLyogQ2hhbmdlVHlwZS5Nb2RpZmllZCAqLyA9PT0gbi50eXBlID8gdGhpcy5nYSA9IHRoaXMuZ2EuaW5zZXJ0KHQsIHtcbiAgICAgICAgICAgIHR5cGU6IDIgLyogQ2hhbmdlVHlwZS5Nb2RpZmllZCAqLyAsXG4gICAgICAgICAgICBkb2M6IGUuZG9jXG4gICAgICAgIH0pIDogMiAvKiBDaGFuZ2VUeXBlLk1vZGlmaWVkICovID09PSBlLnR5cGUgJiYgMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovID09PSBuLnR5cGUgPyB0aGlzLmdhID0gdGhpcy5nYS5pbnNlcnQodCwge1xuICAgICAgICAgICAgdHlwZTogMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovICxcbiAgICAgICAgICAgIGRvYzogZS5kb2NcbiAgICAgICAgfSkgOiAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLyA9PT0gZS50eXBlICYmIDAgLyogQ2hhbmdlVHlwZS5BZGRlZCAqLyA9PT0gbi50eXBlID8gdGhpcy5nYSA9IHRoaXMuZ2EucmVtb3ZlKHQpIDogMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8gPT09IGUudHlwZSAmJiAyIC8qIENoYW5nZVR5cGUuTW9kaWZpZWQgKi8gPT09IG4udHlwZSA/IHRoaXMuZ2EgPSB0aGlzLmdhLmluc2VydCh0LCB7XG4gICAgICAgICAgICB0eXBlOiAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLyAsXG4gICAgICAgICAgICBkb2M6IG4uZG9jXG4gICAgICAgIH0pIDogMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovID09PSBlLnR5cGUgJiYgMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8gPT09IG4udHlwZSA/IHRoaXMuZ2EgPSB0aGlzLmdhLmluc2VydCh0LCB7XG4gICAgICAgICAgICB0eXBlOiAyIC8qIENoYW5nZVR5cGUuTW9kaWZpZWQgKi8gLFxuICAgICAgICAgICAgZG9jOiBlLmRvY1xuICAgICAgICB9KSA6IFxuICAgICAgICAvLyBUaGlzIGluY2x1ZGVzIHRoZXNlIGNhc2VzLCB3aGljaCBkb24ndCBtYWtlIHNlbnNlOlxuICAgICAgICAvLyBBZGRlZC0+QWRkZWRcbiAgICAgICAgLy8gUmVtb3ZlZC0+UmVtb3ZlZFxuICAgICAgICAvLyBNb2RpZmllZC0+QWRkZWRcbiAgICAgICAgLy8gUmVtb3ZlZC0+TW9kaWZpZWRcbiAgICAgICAgLy8gTWV0YWRhdGEtPkFkZGVkXG4gICAgICAgIC8vIFJlbW92ZWQtPk1ldGFkYXRhXG4gICAgICAgIGZhaWwoNjMzNDEsIHtcbiAgICAgICAgICAgIFJ0OiBlLFxuICAgICAgICAgICAgcGE6IG5cbiAgICAgICAgfSkgOiB0aGlzLmdhID0gdGhpcy5nYS5pbnNlcnQodCwgZSk7XG4gICAgfVxuICAgIHlhKCkge1xuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLmdhLmlub3JkZXJUcmF2ZXJzYWwoKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICBlLnB1c2gobik7XG4gICAgICAgIH0pKSwgZTtcbiAgICB9XG59XG5cbmNsYXNzIFZpZXdTbmFwc2hvdCB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgciwgaSwgcywgbywgXywgYSkge1xuICAgICAgICB0aGlzLnF1ZXJ5ID0gZSwgdGhpcy5kb2NzID0gdCwgdGhpcy5vbGREb2NzID0gbiwgdGhpcy5kb2NDaGFuZ2VzID0gciwgdGhpcy5tdXRhdGVkS2V5cyA9IGksIFxuICAgICAgICB0aGlzLmZyb21DYWNoZSA9IHMsIHRoaXMuc3luY1N0YXRlQ2hhbmdlZCA9IG8sIHRoaXMuZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXMgPSBfLCBcbiAgICAgICAgdGhpcy5oYXNDYWNoZWRSZXN1bHRzID0gYTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSB2aWV3IHNuYXBzaG90IGFzIGlmIGFsbCBkb2N1bWVudHMgaW4gdGhlIHNuYXBzaG90IHdlcmUgYWRkZWQuICovICAgIHN0YXRpYyBmcm9tSW5pdGlhbERvY3VtZW50cyhlLCB0LCBuLCByLCBpKSB7XG4gICAgICAgIGNvbnN0IHMgPSBbXTtcbiAgICAgICAgcmV0dXJuIHQuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICBzLnB1c2goe1xuICAgICAgICAgICAgICAgIHR5cGU6IDAgLyogQ2hhbmdlVHlwZS5BZGRlZCAqLyAsXG4gICAgICAgICAgICAgICAgZG9jOiBlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkpLCBuZXcgVmlld1NuYXBzaG90KGUsIHQsIERvY3VtZW50U2V0LmVtcHR5U2V0KHQpLCBzLCBuLCByLCBcbiAgICAgICAgLyogc3luY1N0YXRlQ2hhbmdlZD0gKi8gITAsIFxuICAgICAgICAvKiBleGNsdWRlc01ldGFkYXRhQ2hhbmdlcz0gKi8gITEsIGkpO1xuICAgIH1cbiAgICBnZXQgaGFzUGVuZGluZ1dyaXRlcygpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLm11dGF0ZWRLZXlzLmlzRW1wdHkoKTtcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIGlmICghKHRoaXMuZnJvbUNhY2hlID09PSBlLmZyb21DYWNoZSAmJiB0aGlzLmhhc0NhY2hlZFJlc3VsdHMgPT09IGUuaGFzQ2FjaGVkUmVzdWx0cyAmJiB0aGlzLnN5bmNTdGF0ZUNoYW5nZWQgPT09IGUuc3luY1N0YXRlQ2hhbmdlZCAmJiB0aGlzLm11dGF0ZWRLZXlzLmlzRXF1YWwoZS5tdXRhdGVkS2V5cykgJiYgX19QUklWQVRFX3F1ZXJ5RXF1YWxzKHRoaXMucXVlcnksIGUucXVlcnkpICYmIHRoaXMuZG9jcy5pc0VxdWFsKGUuZG9jcykgJiYgdGhpcy5vbGREb2NzLmlzRXF1YWwoZS5vbGREb2NzKSkpIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuZG9jQ2hhbmdlcywgbiA9IGUuZG9jQ2hhbmdlcztcbiAgICAgICAgaWYgKHQubGVuZ3RoICE9PSBuLmxlbmd0aCkgcmV0dXJuICExO1xuICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IHQubGVuZ3RoOyBlKyspIGlmICh0W2VdLnR5cGUgIT09IG5bZV0udHlwZSB8fCAhdFtlXS5kb2MuaXNFcXVhbChuW2VdLmRvYykpIHJldHVybiAhMTtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSG9sZHMgdGhlIGxpc3RlbmVycyBhbmQgdGhlIGxhc3QgcmVjZWl2ZWQgVmlld1NuYXBzaG90IGZvciBhIHF1ZXJ5IGJlaW5nXG4gKiB0cmFja2VkIGJ5IEV2ZW50TWFuYWdlci5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfUXVlcnlMaXN0ZW5lcnNJbmZvIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy53YSA9IHZvaWQgMCwgdGhpcy5TYSA9IFtdO1xuICAgIH1cbiAgICAvLyBIZWxwZXIgbWV0aG9kcyB0aGF0IGNoZWNrcyBpZiB0aGUgcXVlcnkgaGFzIGxpc3RlbmVycyB0aGF0IGxpc3RlbmluZyB0byByZW1vdGUgc3RvcmVcbiAgICBiYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuU2Euc29tZSgoZSA9PiBlLkRhKCkpKTtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9FdmVudE1hbmFnZXJJbXBsIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5xdWVyaWVzID0gX19QUklWQVRFX25ld1F1ZXJpZXNPYmplY3RNYXAoKSwgdGhpcy5vbmxpbmVTdGF0ZSA9IFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8gLCBcbiAgICAgICAgdGhpcy5DYSA9IG5ldyBTZXQ7XG4gICAgfVxuICAgIHRlcm1pbmF0ZSgpIHtcbiAgICAgICAgIWZ1bmN0aW9uIF9fUFJJVkFURV9lcnJvckFsbFRhcmdldHMoZSwgdCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIHIgPSBuLnF1ZXJpZXM7XG4gICAgICAgICAgICAvLyBQcmV2ZW50IGZ1cnRoZXIgYWNjZXNzIGJ5IGNsZWFyaW5nIE9iamVjdE1hcC5cbiAgICAgICAgICAgIG4ucXVlcmllcyA9IF9fUFJJVkFURV9uZXdRdWVyaWVzT2JqZWN0TWFwKCksIHIuZm9yRWFjaCgoKGUsIG4pID0+IHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2Ygbi5TYSkgZS5vbkVycm9yKHQpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIENhbGwgYWxsIGdsb2JhbCBzbmFwc2hvdCBsaXN0ZW5lcnMgdGhhdCBoYXZlIGJlZW4gc2V0LlxuICAgICAgICAodGhpcywgbmV3IEZpcmVzdG9yZUVycm9yKE4uQUJPUlRFRCwgXCJGaXJlc3RvcmUgc2h1dHRpbmcgZG93blwiKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfbmV3UXVlcmllc09iamVjdE1hcCgpIHtcbiAgICByZXR1cm4gbmV3IE9iamVjdE1hcCgoZSA9PiBfX1BSSVZBVEVfY2Fub25pZnlRdWVyeShlKSksIF9fUFJJVkFURV9xdWVyeUVxdWFscyk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9ldmVudE1hbmFnZXJMaXN0ZW4oZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIGxldCByID0gMyAvKiBMaXN0ZW5lclNldHVwQWN0aW9uLk5vQWN0aW9uUmVxdWlyZWQgKi87XG4gICAgY29uc3QgaSA9IHQucXVlcnk7XG4gICAgbGV0IHMgPSBuLnF1ZXJpZXMuZ2V0KGkpO1xuICAgIHMgPyAhcy5iYSgpICYmIHQuRGEoKSAmJiAoXG4gICAgLy8gUXVlcnkgaGFzIGJlZW4gbGlzdGVuaW5nIHRvIGxvY2FsIGNhY2hlLCBhbmQgdHJpZXMgdG8gYWRkIGEgbmV3IGxpc3RlbmVyIHNvdXJjZWQgZnJvbSB3YXRjaC5cbiAgICByID0gMiAvKiBMaXN0ZW5lclNldHVwQWN0aW9uLlJlcXVpcmVXYXRjaENvbm5lY3Rpb25Pbmx5ICovKSA6IChzID0gbmV3IF9fUFJJVkFURV9RdWVyeUxpc3RlbmVyc0luZm8sIFxuICAgIHIgPSB0LkRhKCkgPyAwIC8qIExpc3RlbmVyU2V0dXBBY3Rpb24uSW5pdGlhbGl6ZUxvY2FsTGlzdGVuQW5kUmVxdWlyZVdhdGNoQ29ubmVjdGlvbiAqLyA6IDEgLyogTGlzdGVuZXJTZXR1cEFjdGlvbi5Jbml0aWFsaXplTG9jYWxMaXN0ZW5Pbmx5ICovKTtcbiAgICB0cnkge1xuICAgICAgICBzd2l0Y2ggKHIpIHtcbiAgICAgICAgICBjYXNlIDAgLyogTGlzdGVuZXJTZXR1cEFjdGlvbi5Jbml0aWFsaXplTG9jYWxMaXN0ZW5BbmRSZXF1aXJlV2F0Y2hDb25uZWN0aW9uICovIDpcbiAgICAgICAgICAgIHMud2EgPSBhd2FpdCBuLm9uTGlzdGVuKGksIFxuICAgICAgICAgICAgLyoqIGVuYWJsZVJlbW90ZUxpc3Rlbj0gKi8gITApO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDEgLyogTGlzdGVuZXJTZXR1cEFjdGlvbi5Jbml0aWFsaXplTG9jYWxMaXN0ZW5Pbmx5ICovIDpcbiAgICAgICAgICAgIHMud2EgPSBhd2FpdCBuLm9uTGlzdGVuKGksIFxuICAgICAgICAgICAgLyoqIGVuYWJsZVJlbW90ZUxpc3Rlbj0gKi8gITEpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDIgLyogTGlzdGVuZXJTZXR1cEFjdGlvbi5SZXF1aXJlV2F0Y2hDb25uZWN0aW9uT25seSAqLyA6XG4gICAgICAgICAgICBhd2FpdCBuLm9uRmlyc3RSZW1vdGVTdG9yZUxpc3RlbihpKTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV93cmFwSW5Vc2VyRXJyb3JJZlJlY292ZXJhYmxlKGUsIGBJbml0aWFsaXphdGlvbiBvZiBxdWVyeSAnJHtfX1BSSVZBVEVfc3RyaW5naWZ5UXVlcnkodC5xdWVyeSl9JyBmYWlsZWRgKTtcbiAgICAgICAgcmV0dXJuIHZvaWQgdC5vbkVycm9yKG4pO1xuICAgIH1cbiAgICBpZiAobi5xdWVyaWVzLnNldChpLCBzKSwgcy5TYS5wdXNoKHQpLCBcbiAgICAvLyBSdW4gZ2xvYmFsIHNuYXBzaG90IGxpc3RlbmVycyBpZiBhIGNvbnNpc3RlbnQgc25hcHNob3QgaGFzIGJlZW4gZW1pdHRlZC5cbiAgICB0LnZhKG4ub25saW5lU3RhdGUpLCBzLndhKSB7XG4gICAgICAgIHQuRmEocy53YSkgJiYgX19QUklWQVRFX3JhaXNlU25hcHNob3RzSW5TeW5jRXZlbnQobik7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyVW5saXN0ZW4oZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCByID0gdC5xdWVyeTtcbiAgICBsZXQgaSA9IDMgLyogTGlzdGVuZXJSZW1vdmFsQWN0aW9uLk5vQWN0aW9uUmVxdWlyZWQgKi87XG4gICAgY29uc3QgcyA9IG4ucXVlcmllcy5nZXQocik7XG4gICAgaWYgKHMpIHtcbiAgICAgICAgY29uc3QgZSA9IHMuU2EuaW5kZXhPZih0KTtcbiAgICAgICAgZSA+PSAwICYmIChzLlNhLnNwbGljZShlLCAxKSwgMCA9PT0gcy5TYS5sZW5ndGggPyBpID0gdC5EYSgpID8gMCAvKiBMaXN0ZW5lclJlbW92YWxBY3Rpb24uVGVybWluYXRlTG9jYWxMaXN0ZW5BbmRSZXF1aXJlV2F0Y2hEaXNjb25uZWN0aW9uICovIDogMSAvKiBMaXN0ZW5lclJlbW92YWxBY3Rpb24uVGVybWluYXRlTG9jYWxMaXN0ZW5Pbmx5ICovIDogIXMuYmEoKSAmJiB0LkRhKCkgJiYgKFxuICAgICAgICAvLyBUaGUgcmVtb3ZlZCBsaXN0ZW5lciBpcyB0aGUgbGFzdCBvbmUgdGhhdCBzb3VyY2VkIGZyb20gd2F0Y2guXG4gICAgICAgIGkgPSAyIC8qIExpc3RlbmVyUmVtb3ZhbEFjdGlvbi5SZXF1aXJlV2F0Y2hEaXNjb25uZWN0aW9uT25seSAqLykpO1xuICAgIH1cbiAgICBzd2l0Y2ggKGkpIHtcbiAgICAgIGNhc2UgMCAvKiBMaXN0ZW5lclJlbW92YWxBY3Rpb24uVGVybWluYXRlTG9jYWxMaXN0ZW5BbmRSZXF1aXJlV2F0Y2hEaXNjb25uZWN0aW9uICovIDpcbiAgICAgICAgcmV0dXJuIG4ucXVlcmllcy5kZWxldGUociksIG4ub25Vbmxpc3RlbihyLCBcbiAgICAgICAgLyoqIGRpc2FibGVSZW1vdGVMaXN0ZW49ICovICEwKTtcblxuICAgICAgY2FzZSAxIC8qIExpc3RlbmVyUmVtb3ZhbEFjdGlvbi5UZXJtaW5hdGVMb2NhbExpc3Rlbk9ubHkgKi8gOlxuICAgICAgICByZXR1cm4gbi5xdWVyaWVzLmRlbGV0ZShyKSwgbi5vblVubGlzdGVuKHIsIFxuICAgICAgICAvKiogZGlzYWJsZVJlbW90ZUxpc3Rlbj0gKi8gITEpO1xuXG4gICAgICBjYXNlIDIgLyogTGlzdGVuZXJSZW1vdmFsQWN0aW9uLlJlcXVpcmVXYXRjaERpc2Nvbm5lY3Rpb25Pbmx5ICovIDpcbiAgICAgICAgcmV0dXJuIG4ub25MYXN0UmVtb3RlU3RvcmVVbmxpc3RlbihyKTtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2V2ZW50TWFuYWdlck9uV2F0Y2hDaGFuZ2UoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIGxldCByID0gITE7XG4gICAgZm9yIChjb25zdCBlIG9mIHQpIHtcbiAgICAgICAgY29uc3QgdCA9IGUucXVlcnksIGkgPSBuLnF1ZXJpZXMuZ2V0KHQpO1xuICAgICAgICBpZiAoaSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIGkuU2EpIHQuRmEoZSkgJiYgKHIgPSAhMCk7XG4gICAgICAgICAgICBpLndhID0gZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByICYmIF9fUFJJVkFURV9yYWlzZVNuYXBzaG90c0luU3luY0V2ZW50KG4pO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyT25XYXRjaEVycm9yKGUsIHQsIG4pIHtcbiAgICBjb25zdCByID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgaSA9IHIucXVlcmllcy5nZXQodCk7XG4gICAgaWYgKGkpIGZvciAoY29uc3QgZSBvZiBpLlNhKSBlLm9uRXJyb3Iobik7XG4gICAgLy8gUmVtb3ZlIGFsbCBsaXN0ZW5lcnMuIE5PVEU6IFdlIGRvbid0IG5lZWQgdG8gY2FsbCBzeW5jRW5naW5lLnVubGlzdGVuKClcbiAgICAvLyBhZnRlciBhbiBlcnJvci5cbiAgICAgICAgci5xdWVyaWVzLmRlbGV0ZSh0KTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3JhaXNlU25hcHNob3RzSW5TeW5jRXZlbnQoZSkge1xuICAgIGUuQ2EuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgIGUubmV4dCgpO1xuICAgIH0pKTtcbn1cblxudmFyIG5uLCBybjtcblxuLyoqIExpc3RlbiB0byBib3RoIGNhY2hlIGFuZCBzZXJ2ZXIgY2hhbmdlcyAqL1xuKHJuID0gbm4gfHwgKG5uID0ge30pKS5NYSA9IFwiZGVmYXVsdFwiLCBcbi8qKiBMaXN0ZW4gdG8gY2hhbmdlcyBpbiBjYWNoZSBvbmx5ICovXG5ybi5DYWNoZSA9IFwiY2FjaGVcIjtcblxuLyoqXG4gKiBRdWVyeUxpc3RlbmVyIHRha2VzIGEgc2VyaWVzIG9mIGludGVybmFsIHZpZXcgc25hcHNob3RzIGFuZCBkZXRlcm1pbmVzXG4gKiB3aGVuIHRvIHJhaXNlIHRoZSBldmVudC5cbiAqXG4gKiBJdCB1c2VzIGFuIE9ic2VydmVyIHRvIGRpc3BhdGNoIGV2ZW50cy5cbiAqL1xuY2xhc3MgX19QUklWQVRFX1F1ZXJ5TGlzdGVuZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4pIHtcbiAgICAgICAgdGhpcy5xdWVyeSA9IGUsIHRoaXMueGEgPSB0LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluaXRpYWwgc25hcHNob3RzIChlLmcuIGZyb20gY2FjaGUpIG1heSBub3QgYmUgcHJvcGFnYXRlZCB0byB0aGUgd3JhcHBlZFxuICAgICAgICAgKiBvYnNlcnZlci4gVGhpcyBmbGFnIGlzIHNldCB0byB0cnVlIG9uY2Ugd2UndmUgYWN0dWFsbHkgcmFpc2VkIGFuIGV2ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5PYSA9ICExLCB0aGlzLk5hID0gbnVsbCwgdGhpcy5vbmxpbmVTdGF0ZSA9IFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8gLCBcbiAgICAgICAgdGhpcy5vcHRpb25zID0gbiB8fCB7fTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyB0aGUgbmV3IFZpZXdTbmFwc2hvdCB0byB0aGlzIGxpc3RlbmVyLCByYWlzaW5nIGEgdXNlci1mYWNpbmcgZXZlbnRcbiAgICAgKiBpZiBhcHBsaWNhYmxlIChkZXBlbmRpbmcgb24gd2hhdCBjaGFuZ2VkLCB3aGV0aGVyIHRoZSB1c2VyIGhhcyBvcHRlZCBpbnRvXG4gICAgICogbWV0YWRhdGEtb25seSBjaGFuZ2VzLCBldGMuKS4gUmV0dXJucyB0cnVlIGlmIGEgdXNlci1mYWNpbmcgZXZlbnQgd2FzXG4gICAgICogaW5kZWVkIHJhaXNlZC5cbiAgICAgKi8gICAgRmEoZSkge1xuICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5pbmNsdWRlTWV0YWRhdGFDaGFuZ2VzKSB7XG4gICAgICAgICAgICAvLyBSZW1vdmUgdGhlIG1ldGFkYXRhIG9ubHkgY2hhbmdlcy5cbiAgICAgICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiBlLmRvY0NoYW5nZXMpIDMgLyogQ2hhbmdlVHlwZS5NZXRhZGF0YSAqLyAhPT0gbi50eXBlICYmIHQucHVzaChuKTtcbiAgICAgICAgICAgIGUgPSBuZXcgVmlld1NuYXBzaG90KGUucXVlcnksIGUuZG9jcywgZS5vbGREb2NzLCB0LCBlLm11dGF0ZWRLZXlzLCBlLmZyb21DYWNoZSwgZS5zeW5jU3RhdGVDaGFuZ2VkLCBcbiAgICAgICAgICAgIC8qIGV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzPSAqLyAhMCwgZS5oYXNDYWNoZWRSZXN1bHRzKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgdCA9ICExO1xuICAgICAgICByZXR1cm4gdGhpcy5PYSA/IHRoaXMuQmEoZSkgJiYgKHRoaXMueGEubmV4dChlKSwgdCA9ICEwKSA6IHRoaXMuTGEoZSwgdGhpcy5vbmxpbmVTdGF0ZSkgJiYgKHRoaXMua2EoZSksIFxuICAgICAgICB0ID0gITApLCB0aGlzLk5hID0gZSwgdDtcbiAgICB9XG4gICAgb25FcnJvcihlKSB7XG4gICAgICAgIHRoaXMueGEuZXJyb3IoZSk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHdoZXRoZXIgYSBzbmFwc2hvdCB3YXMgcmFpc2VkLiAqLyAgICB2YShlKSB7XG4gICAgICAgIHRoaXMub25saW5lU3RhdGUgPSBlO1xuICAgICAgICBsZXQgdCA9ICExO1xuICAgICAgICByZXR1cm4gdGhpcy5OYSAmJiAhdGhpcy5PYSAmJiB0aGlzLkxhKHRoaXMuTmEsIGUpICYmICh0aGlzLmthKHRoaXMuTmEpLCB0ID0gITApLCBcbiAgICAgICAgdDtcbiAgICB9XG4gICAgTGEoZSwgdCkge1xuICAgICAgICAvLyBBbHdheXMgcmFpc2UgdGhlIGZpcnN0IGV2ZW50IHdoZW4gd2UncmUgc3luY2VkXG4gICAgICAgIGlmICghZS5mcm9tQ2FjaGUpIHJldHVybiAhMDtcbiAgICAgICAgLy8gQWx3YXlzIHJhaXNlIGV2ZW50IGlmIGxpc3RlbmluZyB0byBjYWNoZVxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5EYSgpKSByZXR1cm4gITA7XG4gICAgICAgIC8vIE5PVEU6IFdlIGNvbnNpZGVyIE9ubGluZVN0YXRlLlVua25vd24gYXMgb25saW5lIChpdCBzaG91bGQgYmVjb21lIE9mZmxpbmVcbiAgICAgICAgLy8gb3IgT25saW5lIGlmIHdlIHdhaXQgbG9uZyBlbm91Z2gpLlxuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBcIk9mZmxpbmVcIiAvKiBPbmxpbmVTdGF0ZS5PZmZsaW5lICovICE9PSB0O1xuICAgICAgICAvLyBEb24ndCByYWlzZSB0aGUgZXZlbnQgaWYgd2UncmUgb25saW5lLCBhcmVuJ3Qgc3luY2VkIHlldCAoY2hlY2tlZFxuICAgICAgICAvLyBhYm92ZSkgYW5kIGFyZSB3YWl0aW5nIGZvciBhIHN5bmMuXG4gICAgICAgICAgICAgICAgcmV0dXJuICghdGhpcy5vcHRpb25zLnFhIHx8ICFuKSAmJiAoIWUuZG9jcy5pc0VtcHR5KCkgfHwgZS5oYXNDYWNoZWRSZXN1bHRzIHx8IFwiT2ZmbGluZVwiIC8qIE9ubGluZVN0YXRlLk9mZmxpbmUgKi8gPT09IHQpO1xuICAgICAgICAvLyBSYWlzZSBkYXRhIGZyb20gY2FjaGUgaWYgd2UgaGF2ZSBhbnkgZG9jdW1lbnRzLCBoYXZlIGNhY2hlZCByZXN1bHRzIGJlZm9yZSxcbiAgICAgICAgLy8gb3Igd2UgYXJlIG9mZmxpbmUuXG4gICAgICAgIH1cbiAgICBCYShlKSB7XG4gICAgICAgIC8vIFdlIGRvbid0IG5lZWQgdG8gaGFuZGxlIGluY2x1ZGVEb2N1bWVudE1ldGFkYXRhQ2hhbmdlcyBoZXJlIGJlY2F1c2VcbiAgICAgICAgLy8gdGhlIE1ldGFkYXRhIG9ubHkgY2hhbmdlcyBoYXZlIGFscmVhZHkgYmVlbiBzdHJpcHBlZCBvdXQgaWYgbmVlZGVkLlxuICAgICAgICAvLyBBdCB0aGlzIHBvaW50IHRoZSBvbmx5IGNoYW5nZXMgd2Ugd2lsbCBzZWUgYXJlIHRoZSBvbmVzIHdlIHNob3VsZFxuICAgICAgICAvLyBwcm9wYWdhdGUuXG4gICAgICAgIGlmIChlLmRvY0NoYW5nZXMubGVuZ3RoID4gMCkgcmV0dXJuICEwO1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5OYSAmJiB0aGlzLk5hLmhhc1BlbmRpbmdXcml0ZXMgIT09IGUuaGFzUGVuZGluZ1dyaXRlcztcbiAgICAgICAgcmV0dXJuICEoIWUuc3luY1N0YXRlQ2hhbmdlZCAmJiAhdCkgJiYgITAgPT09IHRoaXMub3B0aW9ucy5pbmNsdWRlTWV0YWRhdGFDaGFuZ2VzO1xuICAgICAgICAvLyBHZW5lcmFsbHkgd2Ugc2hvdWxkIGhhdmUgaGl0IG9uZSBvZiB0aGUgY2FzZXMgYWJvdmUsIGJ1dCBpdCdzIHBvc3NpYmxlXG4gICAgICAgIC8vIHRvIGdldCBoZXJlIGlmIHRoZXJlIHdlcmUgb25seSBtZXRhZGF0YSBkb2NDaGFuZ2VzIGFuZCB0aGV5IGdvdFxuICAgICAgICAvLyBzdHJpcHBlZCBvdXQuXG4gICAgICAgIH1cbiAgICBrYShlKSB7XG4gICAgICAgIGUgPSBWaWV3U25hcHNob3QuZnJvbUluaXRpYWxEb2N1bWVudHMoZS5xdWVyeSwgZS5kb2NzLCBlLm11dGF0ZWRLZXlzLCBlLmZyb21DYWNoZSwgZS5oYXNDYWNoZWRSZXN1bHRzKSwgXG4gICAgICAgIHRoaXMuT2EgPSAhMCwgdGhpcy54YS5uZXh0KGUpO1xuICAgIH1cbiAgICBEYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5zb3VyY2UgIT09IG5uLkNhY2hlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBjb21wbGV0ZSBlbGVtZW50IGluIHRoZSBidW5kbGUgc3RyZWFtLCB0b2dldGhlciB3aXRoIHRoZSBieXRlIGxlbmd0aCBpdFxuICogb2NjdXBpZXMgaW4gdGhlIHN0cmVhbS5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfU2l6ZWRCdW5kbGVFbGVtZW50IHtcbiAgICBjb25zdHJ1Y3RvcihlLCBcbiAgICAvLyBIb3cgbWFueSBieXRlcyB0aGlzIGVsZW1lbnQgdGFrZXMgdG8gc3RvcmUgaW4gdGhlIGJ1bmRsZS5cbiAgICB0KSB7XG4gICAgICAgIHRoaXMuUWEgPSBlLCB0aGlzLmJ5dGVMZW5ndGggPSB0O1xuICAgIH1cbiAgICAkYSgpIHtcbiAgICAgICAgcmV0dXJuIFwibWV0YWRhdGFcIiBpbiB0aGlzLlFhO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSGVscGVyIHRvIGNvbnZlcnQgb2JqZWN0cyBmcm9tIGJ1bmRsZXMgdG8gbW9kZWwgb2JqZWN0cyBpbiB0aGUgU0RLLlxuICovIGNsYXNzIF9fUFJJVkFURV9CdW5kbGVDb252ZXJ0ZXJJbXBsIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuc2VyaWFsaXplciA9IGU7XG4gICAgfVxuICAgICRzKGUpIHtcbiAgICAgICAgcmV0dXJuIGZyb21OYW1lKHRoaXMuc2VyaWFsaXplciwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGEgQnVuZGxlRG9jdW1lbnQgdG8gYSBNdXRhYmxlRG9jdW1lbnQuXG4gICAgICovICAgIFVzKGUpIHtcbiAgICAgICAgcmV0dXJuIGUubWV0YWRhdGEuZXhpc3RzID8gX19QUklWQVRFX2Zyb21Eb2N1bWVudCh0aGlzLnNlcmlhbGl6ZXIsIGUuZG9jdW1lbnQsICExKSA6IE11dGFibGVEb2N1bWVudC5uZXdOb0RvY3VtZW50KHRoaXMuJHMoZS5tZXRhZGF0YS5uYW1lKSwgdGhpcy5LcyhlLm1ldGFkYXRhLnJlYWRUaW1lKSk7XG4gICAgfVxuICAgIEtzKGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9mcm9tVmVyc2lvbihlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBjbGFzcyB0byBwcm9jZXNzIHRoZSBlbGVtZW50cyBmcm9tIGEgYnVuZGxlLCBhbmQgb3B0aW9uYWxseSBsb2FkIHRoZW0gaW50byBsb2NhbFxuICogc3RvcmFnZSBhbmQgcHJvdmlkZSBwcm9ncmVzcyB1cGRhdGUgd2hpbGUgbG9hZGluZy5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfQnVuZGxlTG9hZGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMuVWEgPSBlLCB0aGlzLnNlcmlhbGl6ZXIgPSB0LCBcbiAgICAgICAgLyoqIEJhdGNoZWQgcXVlcmllcyB0byBiZSBzYXZlZCBpbnRvIHN0b3JhZ2UgKi9cbiAgICAgICAgdGhpcy5LYSA9IFtdLCBcbiAgICAgICAgLyoqIEJhdGNoZWQgZG9jdW1lbnRzIHRvIGJlIHNhdmVkIGludG8gc3RvcmFnZSAqL1xuICAgICAgICB0aGlzLldhID0gW10sIFxuICAgICAgICAvKiogVGhlIGNvbGxlY3Rpb24gZ3JvdXBzIGFmZmVjdGVkIGJ5IHRoaXMgYnVuZGxlLiAqL1xuICAgICAgICB0aGlzLmNvbGxlY3Rpb25Hcm91cHMgPSBuZXcgU2V0LCB0aGlzLnByb2dyZXNzID0gX19QUklWQVRFX2J1bmRsZUluaXRpYWxQcm9ncmVzcyhlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbmFtZWQgcXVlcmllcyB0aGF0IGhhdmUgYmVlbiBwYXJzZWQgZnJvbSB0aGUgU2l6ZUJ1bmRsZUVsZW1lbnRzIGFkZGVkIGJ5XG4gICAgICogY2FsbGluZyB7QGxpbmsgYWRTaXplZEVsZW1lbnR9LlxuICAgICAqLyAgICBnZXQgcXVlcmllcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuS2E7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIEJ1bmRsZWREb2N1bWVudHMgdGhhdCBoYXZlIGJlZW4gcGFyc2VkIGZyb20gdGhlIFNpemVCdW5kbGVFbGVtZW50cyBhZGRlZCBieVxuICAgICAqIGNhbGxpbmcge0BsaW5rIGFkZFNpemVkRWxlbWVudH0uXG4gICAgICovICAgIGdldCBkb2N1bWVudHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLldhO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGFuIGVsZW1lbnQgZnJvbSB0aGUgYnVuZGxlIHRvIHRoZSBsb2FkZXIuXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIGEgbmV3IHByb2dyZXNzIGlmIGFkZGluZyB0aGUgZWxlbWVudCBsZWFkcyB0byBhIG5ldyBwcm9ncmVzcyxcbiAgICAgKiBvdGhlcndpc2UgcmV0dXJucyBudWxsLlxuICAgICAqLyAgICBHYShlKSB7XG4gICAgICAgIHRoaXMucHJvZ3Jlc3MuYnl0ZXNMb2FkZWQgKz0gZS5ieXRlTGVuZ3RoO1xuICAgICAgICBsZXQgdCA9IHRoaXMucHJvZ3Jlc3MuZG9jdW1lbnRzTG9hZGVkO1xuICAgICAgICBpZiAoZS5RYS5uYW1lZFF1ZXJ5KSB0aGlzLkthLnB1c2goZS5RYS5uYW1lZFF1ZXJ5KTsgZWxzZSBpZiAoZS5RYS5kb2N1bWVudE1ldGFkYXRhKSB7XG4gICAgICAgICAgICB0aGlzLldhLnB1c2goe1xuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiBlLlFhLmRvY3VtZW50TWV0YWRhdGFcbiAgICAgICAgICAgIH0pLCBlLlFhLmRvY3VtZW50TWV0YWRhdGEuZXhpc3RzIHx8ICsrdDtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBSZXNvdXJjZVBhdGguZnJvbVN0cmluZyhlLlFhLmRvY3VtZW50TWV0YWRhdGEubmFtZSk7XG4gICAgICAgICAgICB0aGlzLmNvbGxlY3Rpb25Hcm91cHMuYWRkKG4uZ2V0KG4ubGVuZ3RoIC0gMikpO1xuICAgICAgICB9IGVsc2UgZS5RYS5kb2N1bWVudCAmJiAodGhpcy5XYVt0aGlzLldhLmxlbmd0aCAtIDFdLmRvY3VtZW50ID0gZS5RYS5kb2N1bWVudCwgKyt0KTtcbiAgICAgICAgcmV0dXJuIHQgIT09IHRoaXMucHJvZ3Jlc3MuZG9jdW1lbnRzTG9hZGVkID8gKHRoaXMucHJvZ3Jlc3MuZG9jdW1lbnRzTG9hZGVkID0gdCwgXG4gICAgICAgIHtcbiAgICAgICAgICAgIC4uLnRoaXMucHJvZ3Jlc3NcbiAgICAgICAgfSkgOiBudWxsO1xuICAgIH1cbiAgICB6YShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBuZXcgTWFwLCBuID0gbmV3IF9fUFJJVkFURV9CdW5kbGVDb252ZXJ0ZXJJbXBsKHRoaXMuc2VyaWFsaXplcik7XG4gICAgICAgIGZvciAoY29uc3QgciBvZiBlKSBpZiAoci5tZXRhZGF0YS5xdWVyaWVzKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gbi4kcyhyLm1ldGFkYXRhLm5hbWUpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIHIubWV0YWRhdGEucXVlcmllcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSAodC5nZXQobikgfHwgX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCkpLmFkZChlKTtcbiAgICAgICAgICAgICAgICB0LnNldChuLCByKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBwcm9ncmVzcyB0byAnU3VjY2VzcycgYW5kIHJldHVybiB0aGUgdXBkYXRlZCBwcm9ncmVzcy5cbiAgICAgKi8gICAgYXN5bmMgamEoZSkge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVBcHBseUJ1bmRsZWREb2N1bWVudHMoZSwgbmV3IF9fUFJJVkFURV9CdW5kbGVDb252ZXJ0ZXJJbXBsKHRoaXMuc2VyaWFsaXplciksIHRoaXMuV2EsIHRoaXMuVWEuaWQpLCBuID0gdGhpcy56YSh0aGlzLmRvY3VtZW50cyk7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiB0aGlzLkthKSBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZVNhdmVOYW1lZFF1ZXJ5KGUsIHQsIG4uZ2V0KHQubmFtZSkpO1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9ncmVzcy50YXNrU3RhdGUgPSBcIlN1Y2Nlc3NcIiwge1xuICAgICAgICAgICAgcHJvZ3Jlc3M6IHRoaXMucHJvZ3Jlc3MsXG4gICAgICAgICAgICBKYTogdGhpcy5jb2xsZWN0aW9uR3JvdXBzLFxuICAgICAgICAgICAgSGE6IHRcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGBMb2FkQnVuZGxlVGFza1Byb2dyZXNzYCByZXByZXNlbnRpbmcgdGhlIGluaXRpYWwgcHJvZ3Jlc3Mgb2ZcbiAqIGxvYWRpbmcgYSBidW5kbGUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2J1bmRsZUluaXRpYWxQcm9ncmVzcyhlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdGFza1N0YXRlOiBcIlJ1bm5pbmdcIixcbiAgICAgICAgZG9jdW1lbnRzTG9hZGVkOiAwLFxuICAgICAgICBieXRlc0xvYWRlZDogMCxcbiAgICAgICAgdG90YWxEb2N1bWVudHM6IGUudG90YWxEb2N1bWVudHMsXG4gICAgICAgIHRvdGFsQnl0ZXM6IGUudG90YWxCeXRlc1xuICAgIH07XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGBMb2FkQnVuZGxlVGFza1Byb2dyZXNzYCByZXByZXNlbnRpbmcgdGhlIHByb2dyZXNzIHRoYXQgdGhlIGxvYWRpbmdcbiAqIGhhcyBzdWNjZWVkZWQuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jbGFzcyBfX1BSSVZBVEVfQWRkZWRMaW1ib0RvY3VtZW50IHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMua2V5ID0gZTtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9SZW1vdmVkTGltYm9Eb2N1bWVudCB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLmtleSA9IGU7XG4gICAgfVxufVxuXG4vKipcbiAqIFZpZXcgaXMgcmVzcG9uc2libGUgZm9yIGNvbXB1dGluZyB0aGUgZmluYWwgbWVyZ2VkIHRydXRoIG9mIHdoYXQgZG9jcyBhcmUgaW5cbiAqIGEgcXVlcnkuIEl0IGdldHMgbm90aWZpZWQgb2YgbG9jYWwgYW5kIHJlbW90ZSBjaGFuZ2VzIHRvIGRvY3MsIGFuZCBhcHBsaWVzXG4gKiB0aGUgcXVlcnkgZmlsdGVycyBhbmQgbGltaXRzIHRvIGRldGVybWluZSB0aGUgbW9zdCBjb3JyZWN0IHBvc3NpYmxlIHJlc3VsdHMuXG4gKi8gY2xhc3MgX19QUklWQVRFX1ZpZXcge1xuICAgIGNvbnN0cnVjdG9yKGUsIFxuICAgIC8qKiBEb2N1bWVudHMgaW5jbHVkZWQgaW4gdGhlIHJlbW90ZSB0YXJnZXQgKi9cbiAgICB0KSB7XG4gICAgICAgIHRoaXMucXVlcnkgPSBlLCB0aGlzLllhID0gdCwgdGhpcy5aYSA9IG51bGwsIHRoaXMuaGFzQ2FjaGVkUmVzdWx0cyA9ICExLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgZmxhZyB3aGV0aGVyIHRoZSB2aWV3IGlzIGN1cnJlbnQgd2l0aCB0aGUgYmFja2VuZC4gQSB2aWV3IGlzIGNvbnNpZGVyZWRcbiAgICAgICAgICogY3VycmVudCBhZnRlciBpdCBoYXMgc2VlbiB0aGUgY3VycmVudCBmbGFnIGZyb20gdGhlIGJhY2tlbmQgYW5kIGRpZCBub3RcbiAgICAgICAgICogbG9zZSBjb25zaXN0ZW5jeSB3aXRoaW4gdGhlIHdhdGNoIHN0cmVhbSAoZS5nLiBiZWNhdXNlIG9mIGFuIGV4aXN0ZW5jZVxuICAgICAgICAgKiBmaWx0ZXIgbWlzbWF0Y2gpLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jdXJyZW50ID0gITEsIFxuICAgICAgICAvKiogRG9jdW1lbnRzIGluIHRoZSB2aWV3IGJ1dCBub3QgaW4gdGhlIHJlbW90ZSB0YXJnZXQgKi9cbiAgICAgICAgdGhpcy5YYSA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpLCBcbiAgICAgICAgLyoqIERvY3VtZW50IEtleXMgdGhhdCBoYXZlIGxvY2FsIGNoYW5nZXMgKi9cbiAgICAgICAgdGhpcy5tdXRhdGVkS2V5cyA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpLCB0aGlzLmV1ID0gX19QUklWQVRFX25ld1F1ZXJ5Q29tcGFyYXRvcihlKSwgXG4gICAgICAgIHRoaXMudHUgPSBuZXcgRG9jdW1lbnRTZXQodGhpcy5ldSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBzZXQgb2YgcmVtb3RlIGRvY3VtZW50cyB0aGF0IHRoZSBzZXJ2ZXIgaGFzIHRvbGQgdXMgYmVsb25ncyB0byB0aGUgdGFyZ2V0IGFzc29jaWF0ZWQgd2l0aFxuICAgICAqIHRoaXMgdmlldy5cbiAgICAgKi8gICAgZ2V0IG51KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ZYTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBhIHNldCBvZiBkb2MgY2hhbmdlcywgYXBwbGllcyB0aGUgcXVlcnkgbGltaXQsIGFuZCBjb21wdXRlc1xuICAgICAqIHdoYXQgdGhlIG5ldyByZXN1bHRzIHNob3VsZCBiZSwgd2hhdCB0aGUgY2hhbmdlcyB3ZXJlLCBhbmQgd2hldGhlciB3ZSBtYXlcbiAgICAgKiBuZWVkIHRvIGdvIGJhY2sgdG8gdGhlIGxvY2FsIGNhY2hlIGZvciBtb3JlIHJlc3VsdHMuIERvZXMgbm90IG1ha2UgYW55XG4gICAgICogY2hhbmdlcyB0byB0aGUgdmlldy5cbiAgICAgKiBAcGFyYW0gZG9jQ2hhbmdlcyAtIFRoZSBkb2MgY2hhbmdlcyB0byBhcHBseSB0byB0aGlzIHZpZXcuXG4gICAgICogQHBhcmFtIHByZXZpb3VzQ2hhbmdlcyAtIElmIHRoaXMgaXMgYmVpbmcgY2FsbGVkIHdpdGggYSByZWZpbGwsIHRoZW4gc3RhcnRcbiAgICAgKiAgICAgICAgd2l0aCB0aGlzIHNldCBvZiBkb2NzIGFuZCBjaGFuZ2VzIGluc3RlYWQgb2YgdGhlIGN1cnJlbnQgdmlldy5cbiAgICAgKiBAcmV0dXJucyBhIG5ldyBzZXQgb2YgZG9jcywgY2hhbmdlcywgYW5kIHJlZmlsbCBmbGFnLlxuICAgICAqLyAgICBydShlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0ID8gdC5pdSA6IG5ldyBfX1BSSVZBVEVfRG9jdW1lbnRDaGFuZ2VTZXQsIHIgPSB0ID8gdC50dSA6IHRoaXMudHU7XG4gICAgICAgIGxldCBpID0gdCA/IHQubXV0YXRlZEtleXMgOiB0aGlzLm11dGF0ZWRLZXlzLCBzID0gciwgbyA9ICExO1xuICAgICAgICAvLyBUcmFjayB0aGUgbGFzdCBkb2MgaW4gYSAoZnVsbCkgbGltaXQuIFRoaXMgaXMgbmVjZXNzYXJ5LCBiZWNhdXNlIHNvbWVcbiAgICAgICAgLy8gdXBkYXRlIChhIGRlbGV0ZSwgb3IgYW4gdXBkYXRlIG1vdmluZyBhIGRvYyBwYXN0IHRoZSBvbGQgbGltaXQpIG1pZ2h0XG4gICAgICAgIC8vIG1lYW4gdGhlcmUgaXMgc29tZSBvdGhlciBkb2N1bWVudCBpbiB0aGUgbG9jYWwgY2FjaGUgdGhhdCBlaXRoZXIgc2hvdWxkXG4gICAgICAgIC8vIGNvbWUgKDEpIGJldHdlZW4gdGhlIG9sZCBsYXN0IGxpbWl0IGRvYyBhbmQgdGhlIG5ldyBsYXN0IGRvY3VtZW50LCBpbiB0aGVcbiAgICAgICAgLy8gY2FzZSBvZiB1cGRhdGVzLCBvciAoMikgYWZ0ZXIgdGhlIG5ldyBsYXN0IGRvY3VtZW50LCBpbiB0aGUgY2FzZSBvZlxuICAgICAgICAvLyBkZWxldGVzLiBTbyB3ZSBrZWVwIHRoaXMgZG9jIGF0IHRoZSBvbGQgbGltaXQgdG8gY29tcGFyZSB0aGUgdXBkYXRlcyB0by5cbiAgICAgICAgLy8gTm90ZSB0aGF0IHRoaXMgc2hvdWxkIG5ldmVyIGdldCB1c2VkIGluIGEgcmVmaWxsICh3aGVuIHByZXZpb3VzQ2hhbmdlcyBpc1xuICAgICAgICAvLyBzZXQpLCBiZWNhdXNlIHRoZXJlIHdpbGwgb25seSBiZSBhZGRzIC0tIG5vIGRlbGV0ZXMgb3IgdXBkYXRlcy5cbiAgICAgICAgY29uc3QgXyA9IFwiRlwiIC8qIExpbWl0VHlwZS5GaXJzdCAqLyA9PT0gdGhpcy5xdWVyeS5saW1pdFR5cGUgJiYgci5zaXplID09PSB0aGlzLnF1ZXJ5LmxpbWl0ID8gci5sYXN0KCkgOiBudWxsLCBhID0gXCJMXCIgLyogTGltaXRUeXBlLkxhc3QgKi8gPT09IHRoaXMucXVlcnkubGltaXRUeXBlICYmIHIuc2l6ZSA9PT0gdGhpcy5xdWVyeS5saW1pdCA/IHIuZmlyc3QoKSA6IG51bGw7XG4gICAgICAgIC8vIERyb3AgZG9jdW1lbnRzIG91dCB0byBtZWV0IGxpbWl0L2xpbWl0VG9MYXN0IHJlcXVpcmVtZW50LlxuICAgICAgICBpZiAoZS5pbm9yZGVyVHJhdmVyc2FsKCgoZSwgdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdSA9IHIuZ2V0KGUpLCBjID0gX19QUklWQVRFX3F1ZXJ5TWF0Y2hlcyh0aGlzLnF1ZXJ5LCB0KSA/IHQgOiBudWxsLCBsID0gISF1ICYmIHRoaXMubXV0YXRlZEtleXMuaGFzKHUua2V5KSwgaCA9ICEhYyAmJiAoYy5oYXNMb2NhbE11dGF0aW9ucyB8fCBcbiAgICAgICAgICAgIC8vIFdlIG9ubHkgY29uc2lkZXIgY29tbWl0dGVkIG11dGF0aW9ucyBmb3IgZG9jdW1lbnRzIHRoYXQgd2VyZVxuICAgICAgICAgICAgLy8gbXV0YXRlZCBkdXJpbmcgdGhlIGxpZmV0aW1lIG9mIHRoZSB2aWV3LlxuICAgICAgICAgICAgdGhpcy5tdXRhdGVkS2V5cy5oYXMoYy5rZXkpICYmIGMuaGFzQ29tbWl0dGVkTXV0YXRpb25zKTtcbiAgICAgICAgICAgIGxldCBQID0gITE7XG4gICAgICAgICAgICAvLyBDYWxjdWxhdGUgY2hhbmdlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodSAmJiBjKSB7XG4gICAgICAgICAgICAgICAgdS5kYXRhLmlzRXF1YWwoYy5kYXRhKSA/IGwgIT09IGggJiYgKG4udHJhY2soe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAzIC8qIENoYW5nZVR5cGUuTWV0YWRhdGEgKi8gLFxuICAgICAgICAgICAgICAgICAgICBkb2M6IGNcbiAgICAgICAgICAgICAgICB9KSwgUCA9ICEwKSA6IHRoaXMuc3UodSwgYykgfHwgKG4udHJhY2soe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAyIC8qIENoYW5nZVR5cGUuTW9kaWZpZWQgKi8gLFxuICAgICAgICAgICAgICAgICAgICBkb2M6IGNcbiAgICAgICAgICAgICAgICB9KSwgUCA9ICEwLCAoXyAmJiB0aGlzLmV1KGMsIF8pID4gMCB8fCBhICYmIHRoaXMuZXUoYywgYSkgPCAwKSAmJiAoXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBkb2MgbW92ZWQgZnJvbSBpbnNpZGUgdGhlIGxpbWl0IHRvIG91dHNpZGUgdGhlIGxpbWl0LlxuICAgICAgICAgICAgICAgIC8vIFRoYXQgbWVhbnMgdGhlcmUgbWF5IGJlIHNvbWUgb3RoZXIgZG9jIGluIHRoZSBsb2NhbCBjYWNoZVxuICAgICAgICAgICAgICAgIC8vIHRoYXQgc2hvdWxkIGJlIGluY2x1ZGVkIGluc3RlYWQuXG4gICAgICAgICAgICAgICAgbyA9ICEwKSk7XG4gICAgICAgICAgICB9IGVsc2UgIXUgJiYgYyA/IChuLnRyYWNrKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAwIC8qIENoYW5nZVR5cGUuQWRkZWQgKi8gLFxuICAgICAgICAgICAgICAgIGRvYzogY1xuICAgICAgICAgICAgfSksIFAgPSAhMCkgOiB1ICYmICFjICYmIChuLnRyYWNrKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLyAsXG4gICAgICAgICAgICAgICAgZG9jOiB1XG4gICAgICAgICAgICB9KSwgUCA9ICEwLCAoXyB8fCBhKSAmJiAoXG4gICAgICAgICAgICAvLyBBIGRvYyB3YXMgcmVtb3ZlZCBmcm9tIGEgZnVsbCBsaW1pdCBxdWVyeS4gV2UnbGwgbmVlZCB0b1xuICAgICAgICAgICAgLy8gcmVxdWVyeSBmcm9tIHRoZSBsb2NhbCBjYWNoZSB0byBzZWUgaWYgd2Uga25vdyBhYm91dCBzb21lIG90aGVyXG4gICAgICAgICAgICAvLyBkb2MgdGhhdCBzaG91bGQgYmUgaW4gdGhlIHJlc3VsdHMuXG4gICAgICAgICAgICBvID0gITApKTtcbiAgICAgICAgICAgIFAgJiYgKGMgPyAocyA9IHMuYWRkKGMpLCBpID0gaCA/IGkuYWRkKGUpIDogaS5kZWxldGUoZSkpIDogKHMgPSBzLmRlbGV0ZShlKSwgaSA9IGkuZGVsZXRlKGUpKSk7XG4gICAgICAgIH0pKSwgbnVsbCAhPT0gdGhpcy5xdWVyeS5saW1pdCkgZm9yICg7cy5zaXplID4gdGhpcy5xdWVyeS5saW1pdDsgKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gXCJGXCIgLyogTGltaXRUeXBlLkZpcnN0ICovID09PSB0aGlzLnF1ZXJ5LmxpbWl0VHlwZSA/IHMubGFzdCgpIDogcy5maXJzdCgpO1xuICAgICAgICAgICAgcyA9IHMuZGVsZXRlKGUua2V5KSwgaSA9IGkuZGVsZXRlKGUua2V5KSwgbi50cmFjayh7XG4gICAgICAgICAgICAgICAgdHlwZTogMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8gLFxuICAgICAgICAgICAgICAgIGRvYzogZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR1OiBzLFxuICAgICAgICAgICAgaXU6IG4sXG4gICAgICAgICAgICBDczogbyxcbiAgICAgICAgICAgIG11dGF0ZWRLZXlzOiBpXG4gICAgICAgIH07XG4gICAgfVxuICAgIHN1KGUsIHQpIHtcbiAgICAgICAgLy8gV2Ugc3VwcHJlc3MgdGhlIGluaXRpYWwgY2hhbmdlIGV2ZW50IGZvciBkb2N1bWVudHMgdGhhdCB3ZXJlIG1vZGlmaWVkIGFzXG4gICAgICAgIC8vIHBhcnQgb2YgYSB3cml0ZSBhY2tub3dsZWRnbWVudCAoZS5nLiB3aGVuIHRoZSB2YWx1ZSBvZiBhIHNlcnZlciB0cmFuc2Zvcm1cbiAgICAgICAgLy8gaXMgYXBwbGllZCkgYXMgV2F0Y2ggd2lsbCBzZW5kIHVzIHRoZSBzYW1lIGRvY3VtZW50IGFnYWluLlxuICAgICAgICAvLyBCeSBzdXBwcmVzc2luZyB0aGUgZXZlbnQsIHdlIG9ubHkgcmFpc2UgdHdvIHVzZXIgdmlzaWJsZSBldmVudHMgKG9uZSB3aXRoXG4gICAgICAgIC8vIGBoYXNQZW5kaW5nV3JpdGVzYCBhbmQgdGhlIGZpbmFsIHN0YXRlIG9mIHRoZSBkb2N1bWVudCkgaW5zdGVhZCBvZiB0aHJlZVxuICAgICAgICAvLyAob25lIHdpdGggYGhhc1BlbmRpbmdXcml0ZXNgLCB0aGUgbW9kaWZpZWQgZG9jdW1lbnQgd2l0aFxuICAgICAgICAvLyBgaGFzUGVuZGluZ1dyaXRlc2AgYW5kIHRoZSBmaW5hbCBzdGF0ZSBvZiB0aGUgZG9jdW1lbnQpLlxuICAgICAgICByZXR1cm4gZS5oYXNMb2NhbE11dGF0aW9ucyAmJiB0Lmhhc0NvbW1pdHRlZE11dGF0aW9ucyAmJiAhdC5oYXNMb2NhbE11dGF0aW9ucztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgdmlldyB3aXRoIHRoZSBnaXZlbiBWaWV3RG9jdW1lbnRDaGFuZ2VzIGFuZCBvcHRpb25hbGx5IHVwZGF0ZXNcbiAgICAgKiBsaW1ibyBkb2NzIGFuZCBzeW5jIHN0YXRlIGZyb20gdGhlIHByb3ZpZGVkIHRhcmdldCBjaGFuZ2UuXG4gICAgICogQHBhcmFtIGRvY0NoYW5nZXMgLSBUaGUgc2V0IG9mIGNoYW5nZXMgdG8gbWFrZSB0byB0aGUgdmlldydzIGRvY3MuXG4gICAgICogQHBhcmFtIGxpbWJvUmVzb2x1dGlvbkVuYWJsZWQgLSBXaGV0aGVyIHRvIHVwZGF0ZSBsaW1ibyBkb2N1bWVudHMgYmFzZWQgb25cbiAgICAgKiAgICAgICAgdGhpcyBjaGFuZ2UuXG4gICAgICogQHBhcmFtIHRhcmdldENoYW5nZSAtIEEgdGFyZ2V0IGNoYW5nZSB0byBhcHBseSBmb3IgY29tcHV0aW5nIGxpbWJvIGRvY3MgYW5kXG4gICAgICogICAgICAgIHN5bmMgc3RhdGUuXG4gICAgICogQHBhcmFtIHRhcmdldElzUGVuZGluZ1Jlc2V0IC0gV2hldGhlciB0aGUgdGFyZ2V0IGlzIHBlbmRpbmcgdG8gcmVzZXQgZHVlIHRvXG4gICAgICogICAgICAgIGV4aXN0ZW5jZSBmaWx0ZXIgbWlzbWF0Y2guIElmIG5vdCBleHBsaWNpdGx5IHNwZWNpZmllZCwgaXQgaXMgdHJlYXRlZFxuICAgICAqICAgICAgICBlcXVpdmFsZW50bHkgdG8gYGZhbHNlYC5cbiAgICAgKiBAcmV0dXJucyBBIG5ldyBWaWV3Q2hhbmdlIHdpdGggdGhlIGdpdmVuIGRvY3MsIGNoYW5nZXMsIGFuZCBzeW5jIHN0YXRlLlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogVGhlIGlPUy9BbmRyb2lkIGNsaWVudHMgYWx3YXlzIGNvbXB1dGUgbGltYm8gZG9jdW1lbnQgY2hhbmdlcy5cbiAgICBhcHBseUNoYW5nZXMoZSwgdCwgbiwgcikge1xuICAgICAgICBjb25zdCBpID0gdGhpcy50dTtcbiAgICAgICAgdGhpcy50dSA9IGUudHUsIHRoaXMubXV0YXRlZEtleXMgPSBlLm11dGF0ZWRLZXlzO1xuICAgICAgICAvLyBTb3J0IGNoYW5nZXMgYmFzZWQgb24gdHlwZSBhbmQgcXVlcnkgY29tcGFyYXRvclxuICAgICAgICBjb25zdCBzID0gZS5pdS55YSgpO1xuICAgICAgICBzLnNvcnQoKChlLCB0KSA9PiBmdW5jdGlvbiBfX1BSSVZBVEVfY29tcGFyZUNoYW5nZVR5cGUoZSwgdCkge1xuICAgICAgICAgICAgY29uc3Qgb3JkZXIgPSBlID0+IHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgIGNhc2UgMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovIDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XG5cbiAgICAgICAgICAgICAgICAgIGNhc2UgMiAvKiBDaGFuZ2VUeXBlLk1vZGlmaWVkICovIDpcbiAgICAgICAgICAgICAgICAgIGNhc2UgMyAvKiBDaGFuZ2VUeXBlLk1ldGFkYXRhICovIDpcbiAgICAgICAgICAgICAgICAgICAgLy8gQSBtZXRhZGF0YSBjaGFuZ2UgaXMgY29udmVydGVkIHRvIGEgbW9kaWZpZWQgY2hhbmdlIGF0IHRoZSBwdWJsaWNcbiAgICAgICAgICAgICAgICAgICAgLy8gYXBpIGxheWVyLiAgU2luY2Ugd2Ugc29ydCBieSBkb2N1bWVudCBrZXkgYW5kIHRoZW4gY2hhbmdlIHR5cGUsXG4gICAgICAgICAgICAgICAgICAgIC8vIG1ldGFkYXRhIGFuZCBtb2RpZmllZCBjaGFuZ2VzIG11c3QgYmUgc29ydGVkIGVxdWl2YWxlbnRseS5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDI7XG5cbiAgICAgICAgICAgICAgICAgIGNhc2UgMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8gOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcblxuICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwoMjAyNzcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFJ0OiBlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gb3JkZXIoZSkgLSBvcmRlcih0KTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyAoZS50eXBlLCB0LnR5cGUpIHx8IHRoaXMuZXUoZS5kb2MsIHQuZG9jKSkpLCB0aGlzLm91KG4pLCByID0gciA/PyAhMTtcbiAgICAgICAgY29uc3QgbyA9IHQgJiYgIXIgPyB0aGlzLl91KCkgOiBbXSwgXyA9IDAgPT09IHRoaXMuWGEuc2l6ZSAmJiB0aGlzLmN1cnJlbnQgJiYgIXIgPyAxIC8qIFN5bmNTdGF0ZS5TeW5jZWQgKi8gOiAwIC8qIFN5bmNTdGF0ZS5Mb2NhbCAqLyAsIGEgPSBfICE9PSB0aGlzLlphO1xuICAgICAgICAvLyBXZSBhcmUgYXQgc3luY2VkIHN0YXRlIGlmIHRoZXJlIGlzIG5vIGxpbWJvIGRvY3MgYXJlIHdhaXRpbmcgdG8gYmUgcmVzb2x2ZWQsIHZpZXcgaXMgY3VycmVudFxuICAgICAgICAvLyB3aXRoIHRoZSBiYWNrZW5kLCBhbmQgdGhlIHF1ZXJ5IGlzIG5vdCBwZW5kaW5nIHRvIHJlc2V0IGR1ZSB0byBleGlzdGVuY2UgZmlsdGVyIG1pc21hdGNoLlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLlphID0gXywgMCAhPT0gcy5sZW5ndGggfHwgYSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzbmFwc2hvdDogbmV3IFZpZXdTbmFwc2hvdCh0aGlzLnF1ZXJ5LCBlLnR1LCBpLCBzLCBlLm11dGF0ZWRLZXlzLCAwIC8qIFN5bmNTdGF0ZS5Mb2NhbCAqLyA9PT0gXywgYSwgXG4gICAgICAgICAgICAgICAgLyogZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXM9ICovICExLCAhIW4gJiYgbi5yZXN1bWVUb2tlbi5hcHByb3hpbWF0ZUJ5dGVTaXplKCkgPiAwKSxcbiAgICAgICAgICAgICAgICBhdTogb1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICAvLyBubyBjaGFuZ2VzXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhdTogb1xuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIGFuIE9ubGluZVN0YXRlIGNoYW5nZSB0byB0aGUgdmlldywgcG90ZW50aWFsbHkgZ2VuZXJhdGluZyBhXG4gICAgICogVmlld0NoYW5nZSBpZiB0aGUgdmlldydzIHN5bmNTdGF0ZSBjaGFuZ2VzIGFzIGEgcmVzdWx0LlxuICAgICAqLyAgICB2YShlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnQgJiYgXCJPZmZsaW5lXCIgLyogT25saW5lU3RhdGUuT2ZmbGluZSAqLyA9PT0gZSA/IChcbiAgICAgICAgLy8gSWYgd2UncmUgb2ZmbGluZSwgc2V0IGBjdXJyZW50YCB0byBmYWxzZSBhbmQgdGhlbiBjYWxsIGFwcGx5Q2hhbmdlcygpXG4gICAgICAgIC8vIHRvIHJlZnJlc2ggb3VyIHN5bmNTdGF0ZSBhbmQgZ2VuZXJhdGUgYSBWaWV3Q2hhbmdlIGFzIGFwcHJvcHJpYXRlLiBXZVxuICAgICAgICAvLyBhcmUgZ3VhcmFudGVlZCB0byBnZXQgYSBuZXcgVGFyZ2V0Q2hhbmdlIHRoYXQgc2V0cyBgY3VycmVudGAgYmFjayB0b1xuICAgICAgICAvLyB0cnVlIG9uY2UgdGhlIGNsaWVudCBpcyBiYWNrIG9ubGluZS5cbiAgICAgICAgdGhpcy5jdXJyZW50ID0gITEsIHRoaXMuYXBwbHlDaGFuZ2VzKHtcbiAgICAgICAgICAgIHR1OiB0aGlzLnR1LFxuICAgICAgICAgICAgaXU6IG5ldyBfX1BSSVZBVEVfRG9jdW1lbnRDaGFuZ2VTZXQsXG4gICAgICAgICAgICBtdXRhdGVkS2V5czogdGhpcy5tdXRhdGVkS2V5cyxcbiAgICAgICAgICAgIENzOiAhMVxuICAgICAgICB9LCBcbiAgICAgICAgLyogbGltYm9SZXNvbHV0aW9uRW5hYmxlZD0gKi8gITEpKSA6IHtcbiAgICAgICAgICAgIGF1OiBbXVxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIGRvYyBmb3IgdGhlIGdpdmVuIGtleSBzaG91bGQgYmUgaW4gbGltYm8uXG4gICAgICovICAgIHV1KGUpIHtcbiAgICAgICAgLy8gSWYgdGhlIHJlbW90ZSBlbmQgc2F5cyBpdCdzIHBhcnQgb2YgdGhpcyBxdWVyeSwgaXQncyBub3QgaW4gbGltYm8uXG4gICAgICAgIHJldHVybiAhdGhpcy5ZYS5oYXMoZSkgJiYgKFxuICAgICAgICAvLyBUaGUgbG9jYWwgc3RvcmUgZG9lc24ndCB0aGluayBpdCdzIGEgcmVzdWx0LCBzbyBpdCBzaG91bGRuJ3QgYmUgaW4gbGltYm8uXG4gICAgICAgICEhdGhpcy50dS5oYXMoZSkgJiYgIXRoaXMudHUuZ2V0KGUpLmhhc0xvY2FsTXV0YXRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyBzeW5jZWREb2N1bWVudHMsIGN1cnJlbnQsIGFuZCBsaW1ibyBkb2NzIGJhc2VkIG9uIHRoZSBnaXZlbiBjaGFuZ2UuXG4gICAgICogUmV0dXJucyB0aGUgbGlzdCBvZiBjaGFuZ2VzIHRvIHdoaWNoIGRvY3MgYXJlIGluIGxpbWJvLlxuICAgICAqLyAgICBvdShlKSB7XG4gICAgICAgIGUgJiYgKGUuYWRkZWREb2N1bWVudHMuZm9yRWFjaCgoZSA9PiB0aGlzLllhID0gdGhpcy5ZYS5hZGQoZSkpKSwgZS5tb2RpZmllZERvY3VtZW50cy5mb3JFYWNoKChlID0+IHt9KSksIFxuICAgICAgICBlLnJlbW92ZWREb2N1bWVudHMuZm9yRWFjaCgoZSA9PiB0aGlzLllhID0gdGhpcy5ZYS5kZWxldGUoZSkpKSwgdGhpcy5jdXJyZW50ID0gZS5jdXJyZW50KTtcbiAgICB9XG4gICAgX3UoKSB7XG4gICAgICAgIC8vIFdlIGNhbiBvbmx5IGRldGVybWluZSBsaW1ibyBkb2N1bWVudHMgd2hlbiB3ZSdyZSBpbi1zeW5jIHdpdGggdGhlIHNlcnZlci5cbiAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnQpIHJldHVybiBbXTtcbiAgICAgICAgLy8gVE9ETyhrbGltdCk6IERvIHRoaXMgaW5jcmVtZW50YWxseSBzbyB0aGF0IGl0J3Mgbm90IHF1YWRyYXRpYyB3aGVuXG4gICAgICAgIC8vIHVwZGF0aW5nIG1hbnkgZG9jdW1lbnRzLlxuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLlhhO1xuICAgICAgICB0aGlzLlhhID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCksIHRoaXMudHUuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnV1KGUua2V5KSAmJiAodGhpcy5YYSA9IHRoaXMuWGEuYWRkKGUua2V5KSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgLy8gRGlmZiB0aGUgbmV3IGxpbWJvIGRvY3Mgd2l0aCB0aGUgb2xkIGxpbWJvIGRvY3MuXG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICB0aGlzLlhhLmhhcyhlKSB8fCB0LnB1c2gobmV3IF9fUFJJVkFURV9SZW1vdmVkTGltYm9Eb2N1bWVudChlKSk7XG4gICAgICAgIH0pKSwgdGhpcy5YYS5mb3JFYWNoKChuID0+IHtcbiAgICAgICAgICAgIGUuaGFzKG4pIHx8IHQucHVzaChuZXcgX19QUklWQVRFX0FkZGVkTGltYm9Eb2N1bWVudChuKSk7XG4gICAgICAgIH0pKSwgdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBpbi1tZW1vcnkgc3RhdGUgb2YgdGhlIGN1cnJlbnQgdmlldyB3aXRoIHRoZSBzdGF0ZSByZWFkIGZyb21cbiAgICAgKiBwZXJzaXN0ZW5jZS5cbiAgICAgKlxuICAgICAqIFdlIHVwZGF0ZSB0aGUgcXVlcnkgdmlldyB3aGVuZXZlciBhIGNsaWVudCdzIHByaW1hcnkgc3RhdHVzIGNoYW5nZXM6XG4gICAgICogLSBXaGVuIGEgY2xpZW50IHRyYW5zaXRpb25zIGZyb20gcHJpbWFyeSB0byBzZWNvbmRhcnksIGl0IGNhbiBtaXNzXG4gICAgICogICBMb2NhbFN0b3JhZ2UgdXBkYXRlcyBhbmQgaXRzIHF1ZXJ5IHZpZXdzIG1heSB0ZW1wb3JhcmlseSBub3QgYmVcbiAgICAgKiAgIHN5bmNocm9uaXplZCB3aXRoIHRoZSBzdGF0ZSBvbiBkaXNrLlxuICAgICAqIC0gRm9yIHNlY29uZGFyeSB0byBwcmltYXJ5IHRyYW5zaXRpb25zLCB0aGUgY2xpZW50IG5lZWRzIHRvIHVwZGF0ZSB0aGUgbGlzdFxuICAgICAqICAgb2YgYHN5bmNlZERvY3VtZW50c2Agc2luY2Ugc2Vjb25kYXJ5IGNsaWVudHMgdXBkYXRlIHRoZWlyIHF1ZXJ5IHZpZXdzXG4gICAgICogICBiYXNlZCBwdXJlbHkgb24gc3ludGhlc2l6ZWQgUmVtb3RlRXZlbnRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHF1ZXJ5UmVzdWx0LmRvY3VtZW50cyAtIFRoZSBkb2N1bWVudHMgdGhhdCBtYXRjaCB0aGUgcXVlcnkgYWNjb3JkaW5nXG4gICAgICogdG8gdGhlIExvY2FsU3RvcmUuXG4gICAgICogQHBhcmFtIHF1ZXJ5UmVzdWx0LnJlbW90ZUtleXMgLSBUaGUga2V5cyBvZiB0aGUgZG9jdW1lbnRzIHRoYXQgbWF0Y2ggdGhlXG4gICAgICogcXVlcnkgYWNjb3JkaW5nIHRvIHRoZSBiYWNrZW5kLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIFZpZXdDaGFuZ2UgdGhhdCByZXN1bHRlZCBmcm9tIHRoaXMgc3luY2hyb25pemF0aW9uLlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXG4gICAgY3UoZSkge1xuICAgICAgICB0aGlzLllhID0gZS5RcywgdGhpcy5YYSA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpO1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5ydShlLmRvY3VtZW50cyk7XG4gICAgICAgIHJldHVybiB0aGlzLmFwcGx5Q2hhbmdlcyh0LCAvKiBsaW1ib1Jlc29sdXRpb25FbmFibGVkPSAqLyAhMCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSB2aWV3IHNuYXBzaG90IGFzIGlmIHRoaXMgcXVlcnkgd2FzIGp1c3QgbGlzdGVuZWQgdG8uIENvbnRhaW5zXG4gICAgICogYSBkb2N1bWVudCBhZGQgZm9yIGV2ZXJ5IGV4aXN0aW5nIGRvY3VtZW50IGFuZCB0aGUgYGZyb21DYWNoZWAgYW5kXG4gICAgICogYGhhc1BlbmRpbmdXcml0ZXNgIHN0YXR1cyBvZiB0aGUgYWxyZWFkeSBlc3RhYmxpc2hlZCB2aWV3LlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXG4gICAgbHUoKSB7XG4gICAgICAgIHJldHVybiBWaWV3U25hcHNob3QuZnJvbUluaXRpYWxEb2N1bWVudHModGhpcy5xdWVyeSwgdGhpcy50dSwgdGhpcy5tdXRhdGVkS2V5cywgMCAvKiBTeW5jU3RhdGUuTG9jYWwgKi8gPT09IHRoaXMuWmEsIHRoaXMuaGFzQ2FjaGVkUmVzdWx0cyk7XG4gICAgfVxufVxuXG5jb25zdCBzbiA9IFwiU3luY0VuZ2luZVwiO1xuXG4vKipcbiAqIFF1ZXJ5VmlldyBjb250YWlucyBhbGwgb2YgdGhlIGRhdGEgdGhhdCBTeW5jRW5naW5lIG5lZWRzIHRvIGtlZXAgdHJhY2sgb2YgZm9yXG4gKiBhIHBhcnRpY3VsYXIgcXVlcnkuXG4gKi8gY2xhc3MgX19QUklWQVRFX1F1ZXJ5VmlldyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIHF1ZXJ5IGl0c2VsZi5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKipcbiAgICAgKiBUaGUgdGFyZ2V0IG51bWJlciBjcmVhdGVkIGJ5IHRoZSBjbGllbnQgdGhhdCBpcyB1c2VkIGluIHRoZSB3YXRjaFxuICAgICAqIHN0cmVhbSB0byBpZGVudGlmeSB0aGlzIHF1ZXJ5LlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSB2aWV3IGlzIHJlc3BvbnNpYmxlIGZvciBjb21wdXRpbmcgdGhlIGZpbmFsIG1lcmdlZCB0cnV0aCBvZiB3aGF0XG4gICAgICogZG9jcyBhcmUgaW4gdGhlIHF1ZXJ5LiBJdCBnZXRzIG5vdGlmaWVkIG9mIGxvY2FsIGFuZCByZW1vdGUgY2hhbmdlcyxcbiAgICAgKiBhbmQgYXBwbGllcyB0aGUgcXVlcnkgZmlsdGVycyBhbmQgbGltaXRzIHRvIGRldGVybWluZSB0aGUgbW9zdCBjb3JyZWN0XG4gICAgICogcG9zc2libGUgcmVzdWx0cy5cbiAgICAgKi9cbiAgICBuKSB7XG4gICAgICAgIHRoaXMucXVlcnkgPSBlLCB0aGlzLnRhcmdldElkID0gdCwgdGhpcy52aWV3ID0gbjtcbiAgICB9XG59XG5cbi8qKiBUcmFja3MgYSBsaW1ibyByZXNvbHV0aW9uLiAqLyBjbGFzcyBMaW1ib1Jlc29sdXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5rZXkgPSBlLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCB0byB0cnVlIG9uY2Ugd2UndmUgcmVjZWl2ZWQgYSBkb2N1bWVudC4gVGhpcyBpcyB1c2VkIGluXG4gICAgICAgICAqIGdldFJlbW90ZUtleXNGb3JUYXJnZXQoKSBhbmQgdWx0aW1hdGVseSB1c2VkIGJ5IFdhdGNoQ2hhbmdlQWdncmVnYXRvciB0b1xuICAgICAgICAgKiBkZWNpZGUgd2hldGhlciBpdCBuZWVkcyB0byBtYW51ZmFjdHVyZSBhIGRlbGV0ZSBldmVudCBmb3IgdGhlIHRhcmdldCBvbmNlXG4gICAgICAgICAqIHRoZSB0YXJnZXQgaXMgQ1VSUkVOVC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaHUgPSAhMTtcbiAgICB9XG59XG5cbi8qKlxuICogQW4gaW1wbGVtZW50YXRpb24gb2YgYFN5bmNFbmdpbmVgIGNvb3JkaW5hdGluZyB3aXRoIG90aGVyIHBhcnRzIG9mIFNESy5cbiAqXG4gKiBUaGUgcGFydHMgb2YgU3luY0VuZ2luZSB0aGF0IGFjdCBhcyBhIGNhbGxiYWNrIHRvIFJlbW90ZVN0b3JlIG5lZWQgdG8gYmVcbiAqIHJlZ2lzdGVyZWQgaW5kaXZpZHVhbGx5LiBUaGlzIGlzIGRvbmUgaW4gYHN5bmNFbmdpbmVXcml0ZSgpYCBhbmRcbiAqIGBzeW5jRW5naW5lTGlzdGVuKClgIChhcyB3ZWxsIGFzIGBhcHBseVByaW1hcnlTdGF0ZSgpYCkgYXMgdGhlc2UgbWV0aG9kc1xuICogc2VydmUgYXMgZW50cnkgcG9pbnRzIHRvIFJlbW90ZVN0b3JlJ3MgZnVuY3Rpb25hbGl0eS5cbiAqXG4gKiBOb3RlOiBzb21lIGZpZWxkIGRlZmluZWQgaW4gdGhpcyBjbGFzcyBtaWdodCBoYXZlIHB1YmxpYyBhY2Nlc3MgbGV2ZWwsIGJ1dFxuICogdGhlIGNsYXNzIGlzIG5vdCBleHBvcnRlZCBzbyB0aGV5IGFyZSBvbmx5IGFjY2Vzc2libGUgZnJvbSB0aGlzIG1vZHVsZS5cbiAqIFRoaXMgaXMgdXNlZnVsIHRvIGltcGxlbWVudCBvcHRpb25hbCBmZWF0dXJlcyAobGlrZSBidW5kbGVzKSBpbiBmcmVlXG4gKiBmdW5jdGlvbnMsIHN1Y2ggdGhhdCB0aGV5IGFyZSB0cmVlLXNoYWtlYWJsZS5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfU3luY0VuZ2luZUltcGwge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIFxuICAgIC8vIFBPUlRJTkcgTk9URTogTWFuYWdlcyBzdGF0ZSBzeW5jaHJvbml6YXRpb24gaW4gbXVsdGktdGFiIGVudmlyb25tZW50cy5cbiAgICByLCBpLCBzKSB7XG4gICAgICAgIHRoaXMubG9jYWxTdG9yZSA9IGUsIHRoaXMucmVtb3RlU3RvcmUgPSB0LCB0aGlzLmV2ZW50TWFuYWdlciA9IG4sIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUgPSByLCBcbiAgICAgICAgdGhpcy5jdXJyZW50VXNlciA9IGksIHRoaXMubWF4Q29uY3VycmVudExpbWJvUmVzb2x1dGlvbnMgPSBzLCB0aGlzLlB1ID0ge30sIHRoaXMuVHUgPSBuZXcgT2JqZWN0TWFwKChlID0+IF9fUFJJVkFURV9jYW5vbmlmeVF1ZXJ5KGUpKSwgX19QUklWQVRFX3F1ZXJ5RXF1YWxzKSwgXG4gICAgICAgIHRoaXMuSXUgPSBuZXcgTWFwLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBrZXlzIG9mIGRvY3VtZW50cyB0aGF0IGFyZSBpbiBsaW1ibyBmb3Igd2hpY2ggd2UgaGF2ZW4ndCB5ZXQgc3RhcnRlZCBhXG4gICAgICAgICAqIGxpbWJvIHJlc29sdXRpb24gcXVlcnkuIFRoZSBzdHJpbmdzIGluIHRoaXMgc2V0IGFyZSB0aGUgcmVzdWx0IG9mIGNhbGxpbmdcbiAgICAgICAgICogYGtleS5wYXRoLmNhbm9uaWNhbFN0cmluZygpYCB3aGVyZSBga2V5YCBpcyBhIGBEb2N1bWVudEtleWAgb2JqZWN0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGUgYFNldGAgdHlwZSB3YXMgY2hvc2VuIGJlY2F1c2UgaXQgcHJvdmlkZXMgZWZmaWNpZW50IGxvb2t1cCBhbmQgcmVtb3ZhbFxuICAgICAgICAgKiBvZiBhcmJpdHJhcnkgZWxlbWVudHMgYW5kIGl0IGFsc28gbWFpbnRhaW5zIGluc2VydGlvbiBvcmRlciwgcHJvdmlkaW5nIHRoZVxuICAgICAgICAgKiBkZXNpcmVkIHF1ZXVlLWxpa2UgRklGTyBzZW1hbnRpY3MuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLkV1ID0gbmV3IFNldCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBLZWVwcyB0cmFjayBvZiB0aGUgdGFyZ2V0IElEIGZvciBlYWNoIGRvY3VtZW50IHRoYXQgaXMgaW4gbGltYm8gd2l0aCBhblxuICAgICAgICAgKiBhY3RpdmUgdGFyZ2V0LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kdSA9IG5ldyBTb3J0ZWRNYXAoRG9jdW1lbnRLZXkuY29tcGFyYXRvciksIFxuICAgICAgICAvKipcbiAgICAgICAgICogS2VlcHMgdHJhY2sgb2YgdGhlIGluZm9ybWF0aW9uIGFib3V0IGFuIGFjdGl2ZSBsaW1ibyByZXNvbHV0aW9uIGZvciBlYWNoXG4gICAgICAgICAqIGFjdGl2ZSB0YXJnZXQgSUQgdGhhdCB3YXMgc3RhcnRlZCBmb3IgdGhlIHB1cnBvc2Ugb2YgbGltYm8gcmVzb2x1dGlvbi5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuQXUgPSBuZXcgTWFwLCB0aGlzLlJ1ID0gbmV3IF9fUFJJVkFURV9SZWZlcmVuY2VTZXQsIFxuICAgICAgICAvKiogU3RvcmVzIHVzZXIgY29tcGxldGlvbiBoYW5kbGVycywgaW5kZXhlZCBieSBVc2VyIGFuZCBCYXRjaElkLiAqL1xuICAgICAgICB0aGlzLlZ1ID0ge30sIFxuICAgICAgICAvKiogU3RvcmVzIHVzZXIgY2FsbGJhY2tzIHdhaXRpbmcgZm9yIGFsbCBwZW5kaW5nIHdyaXRlcyB0byBiZSBhY2tub3dsZWRnZWQuICovXG4gICAgICAgIHRoaXMubXUgPSBuZXcgTWFwLCB0aGlzLmZ1ID0gX19QUklWQVRFX1RhcmdldElkR2VuZXJhdG9yLmNyKCksIHRoaXMub25saW5lU3RhdGUgPSBcIlVua25vd25cIiAvKiBPbmxpbmVTdGF0ZS5Vbmtub3duICovICwgXG4gICAgICAgIC8vIFRoZSBwcmltYXJ5IHN0YXRlIGlzIHNldCB0byBgdHJ1ZWAgb3IgYGZhbHNlYCBpbW1lZGlhdGVseSBhZnRlciBGaXJlc3RvcmVcbiAgICAgICAgLy8gc3RhcnR1cC4gSW4gdGhlIGludGVyaW0sIGEgY2xpZW50IHNob3VsZCBvbmx5IGJlIGNvbnNpZGVyZWQgcHJpbWFyeSBpZlxuICAgICAgICAvLyBgaXNQcmltYXJ5YCBpcyB0cnVlLlxuICAgICAgICB0aGlzLmd1ID0gdm9pZCAwO1xuICAgIH1cbiAgICBnZXQgaXNQcmltYXJ5Q2xpZW50KCkge1xuICAgICAgICByZXR1cm4gITAgPT09IHRoaXMuZ3U7XG4gICAgfVxufVxuXG4vKipcbiAqIEluaXRpYXRlcyB0aGUgbmV3IGxpc3RlbiwgcmVzb2x2ZXMgcHJvbWlzZSB3aGVuIGxpc3RlbiBlbnF1ZXVlZCB0byB0aGVcbiAqIHNlcnZlci4gQWxsIHRoZSBzdWJzZXF1ZW50IHZpZXcgc25hcHNob3RzIG9yIGVycm9ycyBhcmUgc2VudCB0byB0aGVcbiAqIHN1YnNjcmliZWQgaGFuZGxlcnMuIFJldHVybnMgdGhlIGluaXRpYWwgc25hcHNob3QuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jRW5naW5lTGlzdGVuKGUsIHQsIG4gPSAhMCkge1xuICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfZW5zdXJlV2F0Y2hDYWxsYmFja3MoZSk7XG4gICAgbGV0IGk7XG4gICAgY29uc3QgcyA9IHIuVHUuZ2V0KHQpO1xuICAgIHJldHVybiBzID8gKFxuICAgIC8vIFBPUlRJTkcgTk9URTogV2l0aCBNdWx0aS1UYWIgV2ViLCBpdCBpcyBwb3NzaWJsZSB0aGF0IGEgcXVlcnkgdmlld1xuICAgIC8vIGFscmVhZHkgZXhpc3RzIHdoZW4gRXZlbnRNYW5hZ2VyIGNhbGxzIHVzIGZvciB0aGUgZmlyc3QgdGltZS4gVGhpc1xuICAgIC8vIGhhcHBlbnMgd2hlbiB0aGUgcHJpbWFyeSB0YWIgaXMgYWxyZWFkeSBsaXN0ZW5pbmcgdG8gdGhpcyBxdWVyeSBvblxuICAgIC8vIGJlaGFsZiBvZiBhbm90aGVyIHRhYiBhbmQgdGhlIHVzZXIgb2YgdGhlIHByaW1hcnkgYWxzbyBzdGFydHMgbGlzdGVuaW5nXG4gICAgLy8gdG8gdGhlIHF1ZXJ5LiBFdmVudE1hbmFnZXIgd2lsbCBub3QgaGF2ZSBhbiBhc3NpZ25lZCB0YXJnZXQgSUQgaW4gdGhpc1xuICAgIC8vIGNhc2UgYW5kIGNhbGxzIGBsaXN0ZW5gIHRvIG9idGFpbiB0aGlzIElELlxuICAgIHIuc2hhcmVkQ2xpZW50U3RhdGUuYWRkTG9jYWxRdWVyeVRhcmdldChzLnRhcmdldElkKSwgaSA9IHMudmlldy5sdSgpKSA6IGkgPSBhd2FpdCBfX1BSSVZBVEVfYWxsb2NhdGVUYXJnZXRBbmRNYXliZUxpc3RlbihyLCB0LCBuLCBcbiAgICAvKiogc2hvdWxkSW5pdGlhbGl6ZVZpZXc9ICovICEwKSwgaTtcbn1cblxuLyoqIFF1ZXJ5IGhhcyBiZWVuIGxpc3RlbmluZyB0byB0aGUgY2FjaGUsIGFuZCB0cmllcyB0byBpbml0aWF0ZSB0aGUgcmVtb3RlIHN0b3JlIGxpc3RlbiAqLyBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfdHJpZ2dlclJlbW90ZVN0b3JlTGlzdGVuKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2Vuc3VyZVdhdGNoQ2FsbGJhY2tzKGUpO1xuICAgIGF3YWl0IF9fUFJJVkFURV9hbGxvY2F0ZVRhcmdldEFuZE1heWJlTGlzdGVuKG4sIHQsIFxuICAgIC8qKiBzaG91bGRMaXN0ZW5Ub1JlbW90ZT0gKi8gITAsIFxuICAgIC8qKiBzaG91bGRJbml0aWFsaXplVmlldz0gKi8gITEpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfYWxsb2NhdGVUYXJnZXRBbmRNYXliZUxpc3RlbihlLCB0LCBuLCByKSB7XG4gICAgY29uc3QgaSA9IGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlQWxsb2NhdGVUYXJnZXQoZS5sb2NhbFN0b3JlLCBfX1BSSVZBVEVfcXVlcnlUb1RhcmdldCh0KSksIHMgPSBpLnRhcmdldElkLCBvID0gZS5zaGFyZWRDbGllbnRTdGF0ZS5hZGRMb2NhbFF1ZXJ5VGFyZ2V0KHMsIG4pO1xuICAgIGxldCBfO1xuICAgIHJldHVybiByICYmIChfID0gYXdhaXQgX19QUklWQVRFX2luaXRpYWxpemVWaWV3QW5kQ29tcHV0ZVNuYXBzaG90KGUsIHQsIHMsIFwiY3VycmVudFwiID09PSBvLCBpLnJlc3VtZVRva2VuKSksIFxuICAgIGUuaXNQcmltYXJ5Q2xpZW50ICYmIG4gJiYgX19QUklWQVRFX3JlbW90ZVN0b3JlTGlzdGVuKGUucmVtb3RlU3RvcmUsIGkpLCBfO1xufVxuXG4vKipcbiAqIFJlZ2lzdGVycyBhIHZpZXcgZm9yIGEgcHJldmlvdXNseSB1bmtub3duIHF1ZXJ5IGFuZCBjb21wdXRlcyBpdHMgaW5pdGlhbFxuICogc25hcHNob3QuXG4gKi8gYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2luaXRpYWxpemVWaWV3QW5kQ29tcHV0ZVNuYXBzaG90KGUsIHQsIG4sIHIsIGkpIHtcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE9uIFdlYiBvbmx5LCB3ZSBpbmplY3QgdGhlIGNvZGUgdGhhdCByZWdpc3RlcnMgbmV3IExpbWJvXG4gICAgLy8gdGFyZ2V0cyBiYXNlZCBvbiB2aWV3IGNoYW5nZXMuIFRoaXMgYWxsb3dzIHVzIHRvIG9ubHkgZGVwZW5kIG9uIExpbWJvXG4gICAgLy8gY2hhbmdlcyB3aGVuIHVzZXIgY29kZSBpbmNsdWRlcyBxdWVyaWVzLlxuICAgIGUucHUgPSAodCwgbiwgcikgPT4gYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2FwcGx5RG9jQ2hhbmdlcyhlLCB0LCBuLCByKSB7XG4gICAgICAgIGxldCBpID0gdC52aWV3LnJ1KG4pO1xuICAgICAgICBpLkNzICYmIChcbiAgICAgICAgLy8gVGhlIHF1ZXJ5IGhhcyBhIGxpbWl0IGFuZCBzb21lIGRvY3Mgd2VyZSByZW1vdmVkLCBzbyB3ZSBuZWVkXG4gICAgICAgIC8vIHRvIHJlLXJ1biB0aGUgcXVlcnkgYWdhaW5zdCB0aGUgbG9jYWwgc3RvcmUgdG8gbWFrZSBzdXJlIHdlXG4gICAgICAgIC8vIGRpZG4ndCBsb3NlIGFueSBnb29kIGRvY3MgdGhhdCBoYWQgYmVlbiBwYXN0IHRoZSBsaW1pdC5cbiAgICAgICAgaSA9IGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlRXhlY3V0ZVF1ZXJ5KGUubG9jYWxTdG9yZSwgdC5xdWVyeSwgXG4gICAgICAgIC8qIHVzZVByZXZpb3VzUmVzdWx0cz0gKi8gITEpLnRoZW4oKCh7ZG9jdW1lbnRzOiBlfSkgPT4gdC52aWV3LnJ1KGUsIGkpKSkpO1xuICAgICAgICBjb25zdCBzID0gciAmJiByLnRhcmdldENoYW5nZXMuZ2V0KHQudGFyZ2V0SWQpLCBvID0gciAmJiBudWxsICE9IHIudGFyZ2V0TWlzbWF0Y2hlcy5nZXQodC50YXJnZXRJZCksIF8gPSB0LnZpZXcuYXBwbHlDaGFuZ2VzKGksIFxuICAgICAgICAvKiBsaW1ib1Jlc29sdXRpb25FbmFibGVkPSAqLyBlLmlzUHJpbWFyeUNsaWVudCwgcywgbyk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfdXBkYXRlVHJhY2tlZExpbWJvcyhlLCB0LnRhcmdldElkLCBfLmF1KSwgXy5zbmFwc2hvdDtcbiAgICB9KGUsIHQsIG4sIHIpO1xuICAgIGNvbnN0IHMgPSBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZUV4ZWN1dGVRdWVyeShlLmxvY2FsU3RvcmUsIHQsIFxuICAgIC8qIHVzZVByZXZpb3VzUmVzdWx0cz0gKi8gITApLCBvID0gbmV3IF9fUFJJVkFURV9WaWV3KHQsIHMuUXMpLCBfID0gby5ydShzLmRvY3VtZW50cyksIGEgPSBUYXJnZXRDaGFuZ2UuY3JlYXRlU3ludGhlc2l6ZWRUYXJnZXRDaGFuZ2VGb3JDdXJyZW50Q2hhbmdlKG4sIHIgJiYgXCJPZmZsaW5lXCIgLyogT25saW5lU3RhdGUuT2ZmbGluZSAqLyAhPT0gZS5vbmxpbmVTdGF0ZSwgaSksIHUgPSBvLmFwcGx5Q2hhbmdlcyhfLCBcbiAgICAvKiBsaW1ib1Jlc29sdXRpb25FbmFibGVkPSAqLyBlLmlzUHJpbWFyeUNsaWVudCwgYSk7XG4gICAgX19QUklWQVRFX3VwZGF0ZVRyYWNrZWRMaW1ib3MoZSwgbiwgdS5hdSk7XG4gICAgY29uc3QgYyA9IG5ldyBfX1BSSVZBVEVfUXVlcnlWaWV3KHQsIG4sIG8pO1xuICAgIHJldHVybiBlLlR1LnNldCh0LCBjKSwgZS5JdS5oYXMobikgPyBlLkl1LmdldChuKS5wdXNoKHQpIDogZS5JdS5zZXQobiwgWyB0IF0pLCB1LnNuYXBzaG90O1xufVxuXG4vKiogU3RvcHMgbGlzdGVuaW5nIHRvIHRoZSBxdWVyeS4gKi8gYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3N5bmNFbmdpbmVVbmxpc3RlbihlLCB0LCBuKSB7XG4gICAgY29uc3QgciA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIGkgPSByLlR1LmdldCh0KSwgcyA9IHIuSXUuZ2V0KGkudGFyZ2V0SWQpO1xuICAgIGlmIChzLmxlbmd0aCA+IDEpIHJldHVybiByLkl1LnNldChpLnRhcmdldElkLCBzLmZpbHRlcigoZSA9PiAhX19QUklWQVRFX3F1ZXJ5RXF1YWxzKGUsIHQpKSkpLCBcbiAgICB2b2lkIHIuVHUuZGVsZXRlKHQpO1xuICAgIC8vIE5vIG90aGVyIHF1ZXJpZXMgYXJlIG1hcHBlZCB0byB0aGUgdGFyZ2V0LCBjbGVhbiB1cCB0aGUgcXVlcnkgYW5kIHRoZSB0YXJnZXQuXG4gICAgICAgIGlmIChyLmlzUHJpbWFyeUNsaWVudCkge1xuICAgICAgICAvLyBXZSBuZWVkIHRvIHJlbW92ZSB0aGUgbG9jYWwgcXVlcnkgdGFyZ2V0IGZpcnN0IHRvIGFsbG93IHVzIHRvIHZlcmlmeVxuICAgICAgICAvLyB3aGV0aGVyIGFueSBvdGhlciBjbGllbnQgaXMgc3RpbGwgaW50ZXJlc3RlZCBpbiB0aGlzIHRhcmdldC5cbiAgICAgICAgci5zaGFyZWRDbGllbnRTdGF0ZS5yZW1vdmVMb2NhbFF1ZXJ5VGFyZ2V0KGkudGFyZ2V0SWQpO1xuICAgICAgICByLnNoYXJlZENsaWVudFN0YXRlLmlzQWN0aXZlUXVlcnlUYXJnZXQoaS50YXJnZXRJZCkgfHwgYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVSZWxlYXNlVGFyZ2V0KHIubG9jYWxTdG9yZSwgaS50YXJnZXRJZCwgXG4gICAgICAgIC8qa2VlcFBlcnNpc3RlZFRhcmdldERhdGE9Ki8gITEpLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgIHIuc2hhcmVkQ2xpZW50U3RhdGUuY2xlYXJRdWVyeVN0YXRlKGkudGFyZ2V0SWQpLCBuICYmIF9fUFJJVkFURV9yZW1vdGVTdG9yZVVubGlzdGVuKHIucmVtb3RlU3RvcmUsIGkudGFyZ2V0SWQpLCBcbiAgICAgICAgICAgIF9fUFJJVkFURV9yZW1vdmVBbmRDbGVhbnVwVGFyZ2V0KHIsIGkudGFyZ2V0SWQpO1xuICAgICAgICB9KSkuY2F0Y2goX19QUklWQVRFX2lnbm9yZUlmUHJpbWFyeUxlYXNlTG9zcyk7XG4gICAgfSBlbHNlIF9fUFJJVkFURV9yZW1vdmVBbmRDbGVhbnVwVGFyZ2V0KHIsIGkudGFyZ2V0SWQpLCBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZVJlbGVhc2VUYXJnZXQoci5sb2NhbFN0b3JlLCBpLnRhcmdldElkLCBcbiAgICAvKmtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhPSovICEwKTtcbn1cblxuLyoqIFVubGlzdGVucyB0byB0aGUgcmVtb3RlIHN0b3JlIHdoaWxlIHN0aWxsIGxpc3RlbmluZyB0byB0aGUgY2FjaGUuICovIGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV90cmlnZ2VyUmVtb3RlU3RvcmVVbmxpc3RlbihlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIHIgPSBuLlR1LmdldCh0KSwgaSA9IG4uSXUuZ2V0KHIudGFyZ2V0SWQpO1xuICAgIG4uaXNQcmltYXJ5Q2xpZW50ICYmIDEgPT09IGkubGVuZ3RoICYmIChcbiAgICAvLyBQT1JUSU5HIE5PVEU6IFVucmVnaXN0ZXIgdGhlIHRhcmdldCBJRCB3aXRoIGxvY2FsIEZpcmVzdG9yZSBjbGllbnQgYXNcbiAgICAvLyB3YXRjaCB0YXJnZXQuXG4gICAgbi5zaGFyZWRDbGllbnRTdGF0ZS5yZW1vdmVMb2NhbFF1ZXJ5VGFyZ2V0KHIudGFyZ2V0SWQpLCBfX1BSSVZBVEVfcmVtb3RlU3RvcmVVbmxpc3RlbihuLnJlbW90ZVN0b3JlLCByLnRhcmdldElkKSk7XG59XG5cbi8qKlxuICogSW5pdGlhdGVzIHRoZSB3cml0ZSBvZiBsb2NhbCBtdXRhdGlvbiBiYXRjaCB3aGljaCBpbnZvbHZlcyBhZGRpbmcgdGhlXG4gKiB3cml0ZXMgdG8gdGhlIG11dGF0aW9uIHF1ZXVlLCBub3RpZnlpbmcgdGhlIHJlbW90ZSBzdG9yZSBhYm91dCBuZXdcbiAqIG11dGF0aW9ucyBhbmQgcmFpc2luZyBldmVudHMgZm9yIGFueSBjaGFuZ2VzIHRoaXMgd3JpdGUgY2F1c2VkLlxuICpcbiAqIFRoZSBwcm9taXNlIHJldHVybmVkIGJ5IHRoaXMgY2FsbCBpcyByZXNvbHZlZCB3aGVuIHRoZSBhYm92ZSBzdGVwc1xuICogaGF2ZSBjb21wbGV0ZWQsICpub3QqIHdoZW4gdGhlIHdyaXRlIHdhcyBhY2tlZCBieSB0aGUgYmFja2VuZC4gVGhlXG4gKiB1c2VyQ2FsbGJhY2sgaXMgcmVzb2x2ZWQgb25jZSB0aGUgd3JpdGUgd2FzIGFja2VkL3JlamVjdGVkIGJ5IHRoZVxuICogYmFja2VuZCAob3IgZmFpbGVkIGxvY2FsbHkgZm9yIGFueSBvdGhlciByZWFzb24pLlxuICovIGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jRW5naW5lV3JpdGUoZSwgdCwgbikge1xuICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfc3luY0VuZ2luZUVuc3VyZVdyaXRlQ2FsbGJhY2tzKGUpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGUgPSBhd2FpdCBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZVdyaXRlTG9jYWxseShlLCB0KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgciA9IFRpbWVzdGFtcC5ub3coKSwgaSA9IHQucmVkdWNlKCgoZSwgdCkgPT4gZS5hZGQodC5rZXkpKSwgX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCkpO1xuICAgICAgICAgICAgbGV0IHMsIG87XG4gICAgICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkxvY2FsbHkgd3JpdGUgbXV0YXRpb25zXCIsIFwicmVhZHdyaXRlXCIsIChlID0+IHtcbiAgICAgICAgICAgICAgICAvLyBGaWd1cmUgb3V0IHdoaWNoIGtleXMgZG8gbm90IGhhdmUgYSByZW1vdGUgdmVyc2lvbiBpbiB0aGUgY2FjaGUsIHRoaXNcbiAgICAgICAgICAgICAgICAvLyBpcyBuZWVkZWQgdG8gY3JlYXRlIHRoZSByaWdodCBvdmVybGF5IG11dGF0aW9uOiBpZiBubyByZW1vdGUgdmVyc2lvblxuICAgICAgICAgICAgICAgIC8vIHByZXNlbnRzLCB3ZSBkbyBub3QgbmVlZCB0byBjcmVhdGUgb3ZlcmxheXMgYXMgcGF0Y2ggbXV0YXRpb25zLlxuICAgICAgICAgICAgICAgIC8vIFRPRE8oT3ZlcmxheSk6IElzIHRoZXJlIGEgYmV0dGVyIHdheSB0byBkZXRlcm1pbmUgdGhpcz8gVXNpbmcgdGhlXG4gICAgICAgICAgICAgICAgLy8gIGRvY3VtZW50IHZlcnNpb24gZG9lcyBub3Qgd29yayBiZWNhdXNlIGxvY2FsIG11dGF0aW9ucyBzZXQgdGhlbSBiYWNrXG4gICAgICAgICAgICAgICAgLy8gIHRvIDAuXG4gICAgICAgICAgICAgICAgbGV0IF8gPSBfX1BSSVZBVEVfbXV0YWJsZURvY3VtZW50TWFwKCksIGEgPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5Ocy5nZXRFbnRyaWVzKGUsIGkpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBfID0gZSwgXy5mb3JFYWNoKCgoZSwgdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdC5pc1ZhbGlkRG9jdW1lbnQoKSB8fCAoYSA9IGEuYWRkKGUpKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH0pKS5uZXh0KCgoKSA9PiBuLmxvY2FsRG9jdW1lbnRzLmdldE92ZXJsYXllZERvY3VtZW50cyhlLCBfKSkpLm5leHQoKGkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzID0gaTtcbiAgICAgICAgICAgICAgICAgICAgLy8gRm9yIG5vbi1pZGVtcG90ZW50IG11dGF0aW9ucyAoc3VjaCBhcyBgRmllbGRWYWx1ZS5pbmNyZW1lbnQoKWApLFxuICAgICAgICAgICAgICAgICAgICAvLyB3ZSByZWNvcmQgdGhlIGJhc2Ugc3RhdGUgaW4gYSBzZXBhcmF0ZSBwYXRjaCBtdXRhdGlvbi4gVGhpcyBpc1xuICAgICAgICAgICAgICAgICAgICAvLyBsYXRlciB1c2VkIHRvIGd1YXJhbnRlZSBjb25zaXN0ZW50IHZhbHVlcyBhbmQgcHJldmVudHMgZmxpY2tlclxuICAgICAgICAgICAgICAgICAgICAvLyBldmVuIGlmIHRoZSBiYWNrZW5kIHNlbmRzIHVzIGFuIHVwZGF0ZSB0aGF0IGFscmVhZHkgaW5jbHVkZXMgb3VyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRyYW5zZm9ybS5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9tdXRhdGlvbkV4dHJhY3RCYXNlVmFsdWUoZSwgcy5nZXQoZS5rZXkpLm92ZXJsYXllZERvY3VtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgIT0gdCAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5PVEU6IFRoZSBiYXNlIHN0YXRlIHNob3VsZCBvbmx5IGJlIGFwcGxpZWQgaWYgdGhlcmUncyBzb21lXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBleGlzdGluZyBkb2N1bWVudCB0byBvdmVycmlkZSwgc28gdXNlIGEgUHJlY29uZGl0aW9uIG9mXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBleGlzdHM9dHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgby5wdXNoKG5ldyBfX1BSSVZBVEVfUGF0Y2hNdXRhdGlvbihlLmtleSwgdCwgX19QUklWQVRFX2V4dHJhY3RGaWVsZE1hc2sodC52YWx1ZS5tYXBWYWx1ZSksIFByZWNvbmRpdGlvbi5leGlzdHMoITApKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4ubXV0YXRpb25RdWV1ZS5hZGRNdXRhdGlvbkJhdGNoKGUsIHIsIG8sIHQpO1xuICAgICAgICAgICAgICAgIH0pKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbyA9IHQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHIgPSB0LmFwcGx5VG9Mb2NhbERvY3VtZW50U2V0KHMsIGEpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5kb2N1bWVudE92ZXJsYXlDYWNoZS5zYXZlT3ZlcmxheXMoZSwgdC5iYXRjaElkLCByKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KSkudGhlbigoKCkgPT4gKHtcbiAgICAgICAgICAgICAgICBiYXRjaElkOiBvLmJhdGNoSWQsXG4gICAgICAgICAgICAgICAgY2hhbmdlczogX19QUklWQVRFX2NvbnZlcnRPdmVybGF5ZWREb2N1bWVudE1hcFRvRG9jdW1lbnRNYXAocylcbiAgICAgICAgICAgIH0pKSk7XG4gICAgICAgIH0oci5sb2NhbFN0b3JlLCB0KTtcbiAgICAgICAgci5zaGFyZWRDbGllbnRTdGF0ZS5hZGRQZW5kaW5nTXV0YXRpb24oZS5iYXRjaElkKSwgZnVuY3Rpb24gX19QUklWQVRFX2FkZE11dGF0aW9uQ2FsbGJhY2soZSwgdCwgbikge1xuICAgICAgICAgICAgbGV0IHIgPSBlLlZ1W2UuY3VycmVudFVzZXIudG9LZXkoKV07XG4gICAgICAgICAgICByIHx8IChyID0gbmV3IFNvcnRlZE1hcChfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcikpO1xuICAgICAgICAgICAgciA9IHIuaW5zZXJ0KHQsIG4pLCBlLlZ1W2UuY3VycmVudFVzZXIudG9LZXkoKV0gPSByO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogUmVzb2x2ZXMgb3IgcmVqZWN0cyB0aGUgdXNlciBjYWxsYmFjayBmb3IgdGhlIGdpdmVuIGJhdGNoIGFuZCB0aGVuIGRpc2NhcmRzXG4gKiBpdC5cbiAqLyAociwgZS5iYXRjaElkLCBuKSwgYXdhaXQgX19QUklWQVRFX3N5bmNFbmdpbmVFbWl0TmV3U25hcHNBbmROb3RpZnlMb2NhbFN0b3JlKHIsIGUuY2hhbmdlcyksIFxuICAgICAgICBhd2FpdCBfX1BSSVZBVEVfZmlsbFdyaXRlUGlwZWxpbmUoci5yZW1vdGVTdG9yZSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBJZiB3ZSBjYW4ndCBwZXJzaXN0IHRoZSBtdXRhdGlvbiwgd2UgcmVqZWN0IHRoZSB1c2VyIGNhbGxiYWNrIGFuZFxuICAgICAgICAvLyBkb24ndCBzZW5kIHRoZSBtdXRhdGlvbi4gVGhlIHVzZXIgY2FuIHRoZW4gcmV0cnkgdGhlIHdyaXRlLlxuICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX3dyYXBJblVzZXJFcnJvcklmUmVjb3ZlcmFibGUoZSwgXCJGYWlsZWQgdG8gcGVyc2lzdCB3cml0ZVwiKTtcbiAgICAgICAgbi5yZWplY3QodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEFwcGxpZXMgb25lIHJlbW90ZSBldmVudCB0byB0aGUgc3luYyBlbmdpbmUsIG5vdGlmeWluZyBhbnkgdmlld3Mgb2YgdGhlXG4gKiBjaGFuZ2VzLCBhbmQgcmVsZWFzaW5nIGFueSBwZW5kaW5nIG11dGF0aW9uIGJhdGNoZXMgdGhhdCB3b3VsZCBiZWNvbWVcbiAqIHZpc2libGUgYmVjYXVzZSBvZiB0aGUgc25hcHNob3QgdmVyc2lvbiB0aGUgcmVtb3RlIGV2ZW50IGNvbnRhaW5zLlxuICovIGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jRW5naW5lQXBwbHlSZW1vdGVFdmVudChlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZSA9IGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlQXBwbHlSZW1vdGVFdmVudFRvTG9jYWxDYWNoZShuLmxvY2FsU3RvcmUsIHQpO1xuICAgICAgICAvLyBVcGRhdGUgYHJlY2VpdmVkRG9jdW1lbnRgIGFzIGFwcHJvcHJpYXRlIGZvciBhbnkgbGltYm8gdGFyZ2V0cy5cbiAgICAgICAgICAgICAgICB0LnRhcmdldENoYW5nZXMuZm9yRWFjaCgoKGUsIHQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBuLkF1LmdldCh0KTtcbiAgICAgICAgICAgIHIgJiYgKFxuICAgICAgICAgICAgLy8gU2luY2UgdGhpcyBpcyBhIGxpbWJvIHJlc29sdXRpb24gbG9va3VwLCBpdCdzIGZvciBhIHNpbmdsZSBkb2N1bWVudFxuICAgICAgICAgICAgLy8gYW5kIGl0IGNvdWxkIGJlIGFkZGVkLCBtb2RpZmllZCwgb3IgcmVtb3ZlZCwgYnV0IG5vdCBhIGNvbWJpbmF0aW9uLlxuICAgICAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQoZS5hZGRlZERvY3VtZW50cy5zaXplICsgZS5tb2RpZmllZERvY3VtZW50cy5zaXplICsgZS5yZW1vdmVkRG9jdW1lbnRzLnNpemUgPD0gMSwgMjI2MTYpLCBcbiAgICAgICAgICAgIGUuYWRkZWREb2N1bWVudHMuc2l6ZSA+IDAgPyByLmh1ID0gITAgOiBlLm1vZGlmaWVkRG9jdW1lbnRzLnNpemUgPiAwID8gX19QUklWQVRFX2hhcmRBc3NlcnQoci5odSwgMTQ2MDcpIDogZS5yZW1vdmVkRG9jdW1lbnRzLnNpemUgPiAwICYmIChfX1BSSVZBVEVfaGFyZEFzc2VydChyLmh1LCA0MjIyNyksIFxuICAgICAgICAgICAgci5odSA9ICExKSk7XG4gICAgICAgIH0pKSwgYXdhaXQgX19QUklWQVRFX3N5bmNFbmdpbmVFbWl0TmV3U25hcHNBbmROb3RpZnlMb2NhbFN0b3JlKG4sIGUsIHQpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgYXdhaXQgX19QUklWQVRFX2lnbm9yZUlmUHJpbWFyeUxlYXNlTG9zcyhlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQXBwbGllcyBhbiBPbmxpbmVTdGF0ZSBjaGFuZ2UgdG8gdGhlIHN5bmMgZW5naW5lIGFuZCBub3RpZmllcyBhbnkgdmlld3Mgb2ZcbiAqIHRoZSBjaGFuZ2UuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3N5bmNFbmdpbmVBcHBseU9ubGluZVN0YXRlQ2hhbmdlKGUsIHQsIG4pIHtcbiAgICBjb25zdCByID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICAvLyBJZiB3ZSBhcmUgdGhlIHNlY29uZGFyeSBjbGllbnQsIHdlIGV4cGxpY2l0bHkgaWdub3JlIHRoZSByZW1vdGUgc3RvcmUnc1xuICAgIC8vIG9ubGluZSBzdGF0ZSAodGhlIGxvY2FsIGNsaWVudCBtYXkgZ28gb2ZmbGluZSwgZXZlbiB0aG91Z2ggdGhlIHByaW1hcnlcbiAgICAvLyB0YWIgcmVtYWlucyBvbmxpbmUpIGFuZCBvbmx5IGFwcGx5IHRoZSBwcmltYXJ5IHRhYidzIG9ubGluZSBzdGF0ZSBmcm9tXG4gICAgLy8gU2hhcmVkQ2xpZW50U3RhdGUuXG4gICAgICAgIGlmIChyLmlzUHJpbWFyeUNsaWVudCAmJiAwIC8qIE9ubGluZVN0YXRlU291cmNlLlJlbW90ZVN0b3JlICovID09PSBuIHx8ICFyLmlzUHJpbWFyeUNsaWVudCAmJiAxIC8qIE9ubGluZVN0YXRlU291cmNlLlNoYXJlZENsaWVudFN0YXRlICovID09PSBuKSB7XG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgci5UdS5mb3JFYWNoKCgobiwgcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IHIudmlldy52YSh0KTtcbiAgICAgICAgICAgIGkuc25hcHNob3QgJiYgZS5wdXNoKGkuc25hcHNob3QpO1xuICAgICAgICB9KSksIGZ1bmN0aW9uIF9fUFJJVkFURV9ldmVudE1hbmFnZXJPbk9ubGluZVN0YXRlQ2hhbmdlKGUsIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgICAgICAgICAgbi5vbmxpbmVTdGF0ZSA9IHQ7XG4gICAgICAgICAgICBsZXQgciA9ICExO1xuICAgICAgICAgICAgbi5xdWVyaWVzLmZvckVhY2goKChlLCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIG4uU2EpIFxuICAgICAgICAgICAgICAgIC8vIFJ1biBnbG9iYWwgc25hcHNob3QgbGlzdGVuZXJzIGlmIGEgY29uc2lzdGVudCBzbmFwc2hvdCBoYXMgYmVlbiBlbWl0dGVkLlxuICAgICAgICAgICAgICAgIGUudmEodCkgJiYgKHIgPSAhMCk7XG4gICAgICAgICAgICB9KSksIHIgJiYgX19QUklWQVRFX3JhaXNlU25hcHNob3RzSW5TeW5jRXZlbnQobik7XG4gICAgICAgIH0oci5ldmVudE1hbmFnZXIsIHQpLCBlLmxlbmd0aCAmJiByLlB1LkhfKGUpLCByLm9ubGluZVN0YXRlID0gdCwgci5pc1ByaW1hcnlDbGllbnQgJiYgci5zaGFyZWRDbGllbnRTdGF0ZS5zZXRPbmxpbmVTdGF0ZSh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVqZWN0cyB0aGUgbGlzdGVuIGZvciB0aGUgZ2l2ZW4gdGFyZ2V0SUQuIFRoaXMgY2FuIGJlIHRyaWdnZXJlZCBieSB0aGVcbiAqIGJhY2tlbmQgZm9yIGFueSBhY3RpdmUgdGFyZ2V0LlxuICpcbiAqIEBwYXJhbSBzeW5jRW5naW5lIC0gVGhlIHN5bmMgZW5naW5lIGltcGxlbWVudGF0aW9uLlxuICogQHBhcmFtIHRhcmdldElkIC0gVGhlIHRhcmdldElEIGNvcnJlc3BvbmRzIHRvIG9uZSBwcmV2aW91c2x5IGluaXRpYXRlZCBieSB0aGVcbiAqIHVzZXIgYXMgcGFydCBvZiBUYXJnZXREYXRhIHBhc3NlZCB0byBsaXN0ZW4oKSBvbiBSZW1vdGVTdG9yZS5cbiAqIEBwYXJhbSBlcnIgLSBBIGRlc2NyaXB0aW9uIG9mIHRoZSBjb25kaXRpb24gdGhhdCBoYXMgZm9yY2VkIHRoZSByZWplY3Rpb24uXG4gKiBOZWFybHkgYWx3YXlzIHRoaXMgd2lsbCBiZSBhbiBpbmRpY2F0aW9uIHRoYXQgdGhlIHVzZXIgaXMgbm8gbG9uZ2VyXG4gKiBhdXRob3JpemVkIHRvIHNlZSB0aGUgZGF0YSBtYXRjaGluZyB0aGUgdGFyZ2V0LlxuICovIGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jRW5naW5lUmVqZWN0TGlzdGVuKGUsIHQsIG4pIHtcbiAgICBjb25zdCByID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxuICAgICAgICByLnNoYXJlZENsaWVudFN0YXRlLnVwZGF0ZVF1ZXJ5U3RhdGUodCwgXCJyZWplY3RlZFwiLCBuKTtcbiAgICBjb25zdCBpID0gci5BdS5nZXQodCksIHMgPSBpICYmIGkua2V5O1xuICAgIGlmIChzKSB7XG4gICAgICAgIC8vIFRPRE8oa2xpbXQpOiBXZSByZWFsbHkgb25seSBzaG91bGQgZG8gdGhlIGZvbGxvd2luZyBvbiBwZXJtaXNzaW9uXG4gICAgICAgIC8vIGRlbmllZCBlcnJvcnMsIGJ1dCB3ZSBkb24ndCBoYXZlIHRoZSBjYXVzZSBjb2RlIGhlcmUuXG4gICAgICAgIC8vIEl0J3MgYSBsaW1ibyBkb2MuIENyZWF0ZSBhIHN5bnRoZXRpYyBldmVudCBzYXlpbmcgaXQgd2FzIGRlbGV0ZWQuXG4gICAgICAgIC8vIFRoaXMgaXMga2luZCBvZiBhIGhhY2suIElkZWFsbHksIHdlIHdvdWxkIGhhdmUgYSBtZXRob2QgaW4gdGhlIGxvY2FsXG4gICAgICAgIC8vIHN0b3JlIHRvIHB1cmdlIGEgZG9jdW1lbnQuIEhvd2V2ZXIsIGl0IHdvdWxkIGJlIHRyaWNreSB0byBrZWVwIGFsbCBvZlxuICAgICAgICAvLyB0aGUgbG9jYWwgc3RvcmUncyBpbnZhcmlhbnRzIHdpdGggYW5vdGhlciBtZXRob2QuXG4gICAgICAgIGxldCBlID0gbmV3IFNvcnRlZE1hcChEb2N1bWVudEtleS5jb21wYXJhdG9yKTtcbiAgICAgICAgLy8gVE9ETyhiLzIxNzE4OTIxNik6IFRoaXMgbGltYm8gZG9jdW1lbnQgc2hvdWxkIGlkZWFsbHkgaGF2ZSBhIHJlYWQgdGltZSxcbiAgICAgICAgLy8gc28gdGhhdCBpdCBpcyBwaWNrZWQgdXAgYnkgYW55IHJlYWQtdGltZSBiYXNlZCBzY2Fucy4gVGhlIGJhY2tlbmQsXG4gICAgICAgIC8vIGhvd2V2ZXIsIGRvZXMgbm90IHNlbmQgYSByZWFkIHRpbWUgZm9yIHRhcmdldCByZW1vdmFscy5cbiAgICAgICAgICAgICAgICBlID0gZS5pbnNlcnQocywgTXV0YWJsZURvY3VtZW50Lm5ld05vRG9jdW1lbnQocywgU25hcHNob3RWZXJzaW9uLm1pbigpKSk7XG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKS5hZGQocyksIGkgPSBuZXcgUmVtb3RlRXZlbnQoU25hcHNob3RWZXJzaW9uLm1pbigpLCBcbiAgICAgICAgLyogdGFyZ2V0Q2hhbmdlcz0gKi8gbmV3IE1hcCwgXG4gICAgICAgIC8qIHRhcmdldE1pc21hdGNoZXM9ICovIG5ldyBTb3J0ZWRNYXAoX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IpLCBlLCBuKTtcbiAgICAgICAgYXdhaXQgX19QUklWQVRFX3N5bmNFbmdpbmVBcHBseVJlbW90ZUV2ZW50KHIsIGkpLCBcbiAgICAgICAgLy8gU2luY2UgdGhpcyBxdWVyeSBmYWlsZWQsIHdlIHdvbid0IHdhbnQgdG8gbWFudWFsbHkgdW5saXN0ZW4gdG8gaXQuXG4gICAgICAgIC8vIFdlIG9ubHkgcmVtb3ZlIGl0IGZyb20gYm9va2tlZXBpbmcgYWZ0ZXIgd2Ugc3VjY2Vzc2Z1bGx5IGFwcGxpZWQgdGhlXG4gICAgICAgIC8vIFJlbW90ZUV2ZW50LiBJZiBgYXBwbHlSZW1vdGVFdmVudCgpYCB0aHJvd3MsIHdlIHdhbnQgdG8gcmUtbGlzdGVuIHRvXG4gICAgICAgIC8vIHRoaXMgcXVlcnkgd2hlbiB0aGUgUmVtb3RlU3RvcmUgcmVzdGFydHMgdGhlIFdhdGNoIHN0cmVhbSwgd2hpY2ggc2hvdWxkXG4gICAgICAgIC8vIHJlLXRyaWdnZXIgdGhlIHRhcmdldCBmYWlsdXJlLlxuICAgICAgICByLmR1ID0gci5kdS5yZW1vdmUocyksIHIuQXUuZGVsZXRlKHQpLCBfX1BSSVZBVEVfcHVtcEVucXVldWVkTGltYm9SZXNvbHV0aW9ucyhyKTtcbiAgICB9IGVsc2UgYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVSZWxlYXNlVGFyZ2V0KHIubG9jYWxTdG9yZSwgdCwgXG4gICAgLyoga2VlcFBlcnNpc3RlZFRhcmdldERhdGEgKi8gITEpLnRoZW4oKCgpID0+IF9fUFJJVkFURV9yZW1vdmVBbmRDbGVhbnVwVGFyZ2V0KHIsIHQsIG4pKSkuY2F0Y2goX19QUklWQVRFX2lnbm9yZUlmUHJpbWFyeUxlYXNlTG9zcyk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jRW5naW5lQXBwbHlTdWNjZXNzZnVsV3JpdGUoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCByID0gdC5iYXRjaC5iYXRjaElkO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGUgPSBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZUFja25vd2xlZGdlQmF0Y2gobi5sb2NhbFN0b3JlLCB0KTtcbiAgICAgICAgLy8gVGhlIGxvY2FsIHN0b3JlIG1heSBvciBtYXkgbm90IGJlIGFibGUgdG8gYXBwbHkgdGhlIHdyaXRlIHJlc3VsdCBhbmRcbiAgICAgICAgLy8gcmFpc2UgZXZlbnRzIGltbWVkaWF0ZWx5IChkZXBlbmRpbmcgb24gd2hldGhlciB0aGUgd2F0Y2hlciBpcyBjYXVnaHRcbiAgICAgICAgLy8gdXApLCBzbyB3ZSByYWlzZSB1c2VyIGNhbGxiYWNrcyBmaXJzdCBzbyB0aGF0IHRoZXkgY29uc2lzdGVudGx5IGhhcHBlblxuICAgICAgICAvLyBiZWZvcmUgbGlzdGVuIGV2ZW50cy5cbiAgICAgICAgICAgICAgICBfX1BSSVZBVEVfcHJvY2Vzc1VzZXJDYWxsYmFjayhuLCByLCAvKmVycm9yPSovIG51bGwpLCBfX1BSSVZBVEVfdHJpZ2dlclBlbmRpbmdXcml0ZXNDYWxsYmFja3MobiwgciksIFxuICAgICAgICBuLnNoYXJlZENsaWVudFN0YXRlLnVwZGF0ZU11dGF0aW9uU3RhdGUociwgXCJhY2tub3dsZWRnZWRcIiksIGF3YWl0IF9fUFJJVkFURV9zeW5jRW5naW5lRW1pdE5ld1NuYXBzQW5kTm90aWZ5TG9jYWxTdG9yZShuLCBlKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGF3YWl0IF9fUFJJVkFURV9pZ25vcmVJZlByaW1hcnlMZWFzZUxvc3MoZSk7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfc3luY0VuZ2luZVJlamVjdEZhaWxlZFdyaXRlKGUsIHQsIG4pIHtcbiAgICBjb25zdCByID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVSZWplY3RCYXRjaChlLCB0KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICAgICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiUmVqZWN0IGJhdGNoXCIsIFwicmVhZHdyaXRlLXByaW1hcnlcIiwgKGUgPT4ge1xuICAgICAgICAgICAgICAgIGxldCByO1xuICAgICAgICAgICAgICAgIHJldHVybiBuLm11dGF0aW9uUXVldWUubG9va3VwTXV0YXRpb25CYXRjaChlLCB0KS5uZXh0KCh0ID0+IChfX1BSSVZBVEVfaGFyZEFzc2VydChudWxsICE9PSB0LCAzNzExMyksIFxuICAgICAgICAgICAgICAgIHIgPSB0LmtleXMoKSwgbi5tdXRhdGlvblF1ZXVlLnJlbW92ZU11dGF0aW9uQmF0Y2goZSwgdCkpKSkubmV4dCgoKCkgPT4gbi5tdXRhdGlvblF1ZXVlLnBlcmZvcm1Db25zaXN0ZW5jeUNoZWNrKGUpKSkubmV4dCgoKCkgPT4gbi5kb2N1bWVudE92ZXJsYXlDYWNoZS5yZW1vdmVPdmVybGF5c0ZvckJhdGNoSWQoZSwgciwgdCkpKS5uZXh0KCgoKSA9PiBuLmxvY2FsRG9jdW1lbnRzLnJlY2FsY3VsYXRlQW5kU2F2ZU92ZXJsYXlzRm9yRG9jdW1lbnRLZXlzKGUsIHIpKSkubmV4dCgoKCkgPT4gbi5sb2NhbERvY3VtZW50cy5nZXREb2N1bWVudHMoZSwgcikpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIFJldHVybnMgdGhlIGxhcmdlc3QgKGxhdGVzdCkgYmF0Y2ggaWQgaW4gbXV0YXRpb24gcXVldWUgdGhhdCBpcyBwZW5kaW5nXG4gKiBzZXJ2ZXIgcmVzcG9uc2UuXG4gKlxuICogUmV0dXJucyBgQkFUQ0hJRF9VTktOT1dOYCBpZiB0aGUgcXVldWUgaXMgZW1wdHkuXG4gKi8gKHIubG9jYWxTdG9yZSwgdCk7XG4gICAgICAgIC8vIFRoZSBsb2NhbCBzdG9yZSBtYXkgb3IgbWF5IG5vdCBiZSBhYmxlIHRvIGFwcGx5IHRoZSB3cml0ZSByZXN1bHQgYW5kXG4gICAgICAgIC8vIHJhaXNlIGV2ZW50cyBpbW1lZGlhdGVseSAoZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIHdhdGNoZXIgaXMgY2F1Z2h0IHVwKSxcbiAgICAgICAgLy8gc28gd2UgcmFpc2UgdXNlciBjYWxsYmFja3MgZmlyc3Qgc28gdGhhdCB0aGV5IGNvbnNpc3RlbnRseSBoYXBwZW4gYmVmb3JlXG4gICAgICAgIC8vIGxpc3RlbiBldmVudHMuXG4gICAgICAgICAgICAgICAgX19QUklWQVRFX3Byb2Nlc3NVc2VyQ2FsbGJhY2sociwgdCwgbiksIF9fUFJJVkFURV90cmlnZ2VyUGVuZGluZ1dyaXRlc0NhbGxiYWNrcyhyLCB0KSwgXG4gICAgICAgIHIuc2hhcmVkQ2xpZW50U3RhdGUudXBkYXRlTXV0YXRpb25TdGF0ZSh0LCBcInJlamVjdGVkXCIsIG4pLCBhd2FpdCBfX1BSSVZBVEVfc3luY0VuZ2luZUVtaXROZXdTbmFwc0FuZE5vdGlmeUxvY2FsU3RvcmUociwgZSk7XG4gICAgfSBjYXRjaCAobikge1xuICAgICAgICBhd2FpdCBfX1BSSVZBVEVfaWdub3JlSWZQcmltYXJ5TGVhc2VMb3NzKG4pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZWdpc3RlcnMgYSB1c2VyIGNhbGxiYWNrIHRoYXQgcmVzb2x2ZXMgd2hlbiBhbGwgcGVuZGluZyBtdXRhdGlvbnMgYXQgdGhlIG1vbWVudCBvZiBjYWxsaW5nXG4gKiBhcmUgYWNrbm93bGVkZ2VkIC5cbiAqLyBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfc3luY0VuZ2luZVJlZ2lzdGVyUGVuZGluZ1dyaXRlc0NhbGxiYWNrKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICBfX1BSSVZBVEVfY2FuVXNlTmV0d29yayhuLnJlbW90ZVN0b3JlKSB8fCBfX1BSSVZBVEVfbG9nRGVidWcoc24sIFwiVGhlIG5ldHdvcmsgaXMgZGlzYWJsZWQuIFRoZSB0YXNrIHJldHVybmVkIGJ5ICdhd2FpdFBlbmRpbmdXcml0ZXMoKScgd2lsbCBub3QgY29tcGxldGUgdW50aWwgdGhlIG5ldHdvcmsgaXMgZW5hYmxlZC5cIik7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZSA9IGF3YWl0IGZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlR2V0SGlnaGVzdFVuYWNrbm93bGVkZ2VkQmF0Y2hJZChlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICAgICAgICAgIHJldHVybiB0LnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiR2V0IGhpZ2hlc3QgdW5hY2tub3dsZWRnZWQgYmF0Y2ggaWRcIiwgXCJyZWFkb25seVwiLCAoZSA9PiB0Lm11dGF0aW9uUXVldWUuZ2V0SGlnaGVzdFVuYWNrbm93bGVkZ2VkQmF0Y2hJZChlKSkpO1xuICAgICAgICB9KG4ubG9jYWxTdG9yZSk7XG4gICAgICAgIGlmIChlID09PSBqKSBcbiAgICAgICAgLy8gVHJpZ2dlciB0aGUgY2FsbGJhY2sgcmlnaHQgYXdheSBpZiB0aGVyZSBpcyBubyBwZW5kaW5nIHdyaXRlcyBhdCB0aGUgbW9tZW50LlxuICAgICAgICByZXR1cm4gdm9pZCB0LnJlc29sdmUoKTtcbiAgICAgICAgY29uc3QgciA9IG4ubXUuZ2V0KGUpIHx8IFtdO1xuICAgICAgICByLnB1c2godCksIG4ubXUuc2V0KGUsIHIpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV93cmFwSW5Vc2VyRXJyb3JJZlJlY292ZXJhYmxlKGUsIFwiSW5pdGlhbGl6YXRpb24gb2Ygd2FpdEZvclBlbmRpbmdXcml0ZXMoKSBvcGVyYXRpb24gZmFpbGVkXCIpO1xuICAgICAgICB0LnJlamVjdChuKTtcbiAgICB9XG59XG5cbi8qKlxuICogVHJpZ2dlcnMgdGhlIGNhbGxiYWNrcyB0aGF0IGFyZSB3YWl0aW5nIGZvciB0aGlzIGJhdGNoIGlkIHRvIGdldCBhY2tub3dsZWRnZWQgYnkgc2VydmVyLFxuICogaWYgdGhlcmUgYXJlIGFueS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfdHJpZ2dlclBlbmRpbmdXcml0ZXNDYWxsYmFja3MoZSwgdCkge1xuICAgIChlLm11LmdldCh0KSB8fCBbXSkuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgIGUucmVzb2x2ZSgpO1xuICAgIH0pKSwgZS5tdS5kZWxldGUodCk7XG59XG5cbi8qKiBSZWplY3QgYWxsIG91dHN0YW5kaW5nIGNhbGxiYWNrcyB3YWl0aW5nIGZvciBwZW5kaW5nIHdyaXRlcyB0byBjb21wbGV0ZS4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3Byb2Nlc3NVc2VyQ2FsbGJhY2soZSwgdCwgbikge1xuICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIGxldCBpID0gci5WdVtyLmN1cnJlbnRVc2VyLnRvS2V5KCldO1xuICAgIC8vIE5PVEU6IE11dGF0aW9ucyByZXN0b3JlZCBmcm9tIHBlcnNpc3RlbmNlIHdvbid0IGhhdmUgY2FsbGJhY2tzLCBzbyBpdCdzXG4gICAgLy8gb2theSBmb3IgdGhlcmUgdG8gYmUgbm8gY2FsbGJhY2sgZm9yIHRoaXMgSUQuXG4gICAgICAgIGlmIChpKSB7XG4gICAgICAgIGNvbnN0IGUgPSBpLmdldCh0KTtcbiAgICAgICAgZSAmJiAobiA/IGUucmVqZWN0KG4pIDogZS5yZXNvbHZlKCksIGkgPSBpLnJlbW92ZSh0KSksIHIuVnVbci5jdXJyZW50VXNlci50b0tleSgpXSA9IGk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfcmVtb3ZlQW5kQ2xlYW51cFRhcmdldChlLCB0LCBuID0gbnVsbCkge1xuICAgIGUuc2hhcmVkQ2xpZW50U3RhdGUucmVtb3ZlTG9jYWxRdWVyeVRhcmdldCh0KTtcbiAgICBmb3IgKGNvbnN0IHIgb2YgZS5JdS5nZXQodCkpIGUuVHUuZGVsZXRlKHIpLCBuICYmIGUuUHUueXUociwgbik7XG4gICAgaWYgKGUuSXUuZGVsZXRlKHQpLCBlLmlzUHJpbWFyeUNsaWVudCkge1xuICAgICAgICBlLlJ1LmpyKHQpLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgZS5SdS5jb250YWluc0tleSh0KSB8fCBcbiAgICAgICAgICAgIC8vIFdlIHJlbW92ZWQgdGhlIGxhc3QgcmVmZXJlbmNlIGZvciB0aGlzIGtleVxuICAgICAgICAgICAgX19QUklWQVRFX3JlbW92ZUxpbWJvVGFyZ2V0KGUsIHQpO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfcmVtb3ZlTGltYm9UYXJnZXQoZSwgdCkge1xuICAgIGUuRXUuZGVsZXRlKHQucGF0aC5jYW5vbmljYWxTdHJpbmcoKSk7XG4gICAgLy8gSXQncyBwb3NzaWJsZSB0aGF0IHRoZSB0YXJnZXQgYWxyZWFkeSBnb3QgcmVtb3ZlZCBiZWNhdXNlIHRoZSBxdWVyeSBmYWlsZWQuIEluIHRoYXQgY2FzZSxcbiAgICAvLyB0aGUga2V5IHdvbid0IGV4aXN0IGluIGBsaW1ib1RhcmdldHNCeUtleWAuIE9ubHkgZG8gdGhlIGNsZWFudXAgaWYgd2Ugc3RpbGwgaGF2ZSB0aGUgdGFyZ2V0LlxuICAgIGNvbnN0IG4gPSBlLmR1LmdldCh0KTtcbiAgICBudWxsICE9PSBuICYmIChfX1BSSVZBVEVfcmVtb3RlU3RvcmVVbmxpc3RlbihlLnJlbW90ZVN0b3JlLCBuKSwgZS5kdSA9IGUuZHUucmVtb3ZlKHQpLCBcbiAgICBlLkF1LmRlbGV0ZShuKSwgX19QUklWQVRFX3B1bXBFbnF1ZXVlZExpbWJvUmVzb2x1dGlvbnMoZSkpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdXBkYXRlVHJhY2tlZExpbWJvcyhlLCB0LCBuKSB7XG4gICAgZm9yIChjb25zdCByIG9mIG4pIGlmIChyIGluc3RhbmNlb2YgX19QUklWQVRFX0FkZGVkTGltYm9Eb2N1bWVudCkgZS5SdS5hZGRSZWZlcmVuY2Uoci5rZXksIHQpLCBcbiAgICBfX1BSSVZBVEVfdHJhY2tMaW1ib0NoYW5nZShlLCByKTsgZWxzZSBpZiAociBpbnN0YW5jZW9mIF9fUFJJVkFURV9SZW1vdmVkTGltYm9Eb2N1bWVudCkge1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoc24sIFwiRG9jdW1lbnQgbm8gbG9uZ2VyIGluIGxpbWJvOiBcIiArIHIua2V5KSwgZS5SdS5yZW1vdmVSZWZlcmVuY2Uoci5rZXksIHQpO1xuICAgICAgICBlLlJ1LmNvbnRhaW5zS2V5KHIua2V5KSB8fCBcbiAgICAgICAgLy8gV2UgcmVtb3ZlZCB0aGUgbGFzdCByZWZlcmVuY2UgZm9yIHRoaXMga2V5XG4gICAgICAgIF9fUFJJVkFURV9yZW1vdmVMaW1ib1RhcmdldChlLCByLmtleSk7XG4gICAgfSBlbHNlIGZhaWwoMTk3OTEsIHtcbiAgICAgICAgd3U6IHJcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3RyYWNrTGltYm9DaGFuZ2UoZSwgdCkge1xuICAgIGNvbnN0IG4gPSB0LmtleSwgciA9IG4ucGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICBlLmR1LmdldChuKSB8fCBlLkV1LmhhcyhyKSB8fCAoX19QUklWQVRFX2xvZ0RlYnVnKHNuLCBcIk5ldyBkb2N1bWVudCBpbiBsaW1ibzogXCIgKyBuKSwgXG4gICAgZS5FdS5hZGQociksIF9fUFJJVkFURV9wdW1wRW5xdWV1ZWRMaW1ib1Jlc29sdXRpb25zKGUpKTtcbn1cblxuLyoqXG4gKiBTdGFydHMgbGlzdGVucyBmb3IgZG9jdW1lbnRzIGluIGxpbWJvIHRoYXQgYXJlIGVucXVldWVkIGZvciByZXNvbHV0aW9uLFxuICogc3ViamVjdCB0byBhIG1heGltdW0gbnVtYmVyIG9mIGNvbmN1cnJlbnQgcmVzb2x1dGlvbnMuXG4gKlxuICogV2l0aG91dCBib3VuZGluZyB0aGUgbnVtYmVyIG9mIGNvbmN1cnJlbnQgcmVzb2x1dGlvbnMsIHRoZSBzZXJ2ZXIgY2FuIGZhaWxcbiAqIHdpdGggXCJyZXNvdXJjZSBleGhhdXN0ZWRcIiBlcnJvcnMgd2hpY2ggY2FuIGxlYWQgdG8gcGF0aG9sb2dpY2FsIGNsaWVudFxuICogYmVoYXZpb3IgYXMgc2VlbiBpbiBodHRwczovL2dpdGh1Yi5jb20vZmlyZWJhc2UvZmlyZWJhc2UtanMtc2RrL2lzc3Vlcy8yNjgzLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9wdW1wRW5xdWV1ZWRMaW1ib1Jlc29sdXRpb25zKGUpIHtcbiAgICBmb3IgKDtlLkV1LnNpemUgPiAwICYmIGUuZHUuc2l6ZSA8IGUubWF4Q29uY3VycmVudExpbWJvUmVzb2x1dGlvbnM7ICkge1xuICAgICAgICBjb25zdCB0ID0gZS5FdS52YWx1ZXMoKS5uZXh0KCkudmFsdWU7XG4gICAgICAgIGUuRXUuZGVsZXRlKHQpO1xuICAgICAgICBjb25zdCBuID0gbmV3IERvY3VtZW50S2V5KFJlc291cmNlUGF0aC5mcm9tU3RyaW5nKHQpKSwgciA9IGUuZnUubmV4dCgpO1xuICAgICAgICBlLkF1LnNldChyLCBuZXcgTGltYm9SZXNvbHV0aW9uKG4pKSwgZS5kdSA9IGUuZHUuaW5zZXJ0KG4sIHIpLCBfX1BSSVZBVEVfcmVtb3RlU3RvcmVMaXN0ZW4oZS5yZW1vdGVTdG9yZSwgbmV3IFRhcmdldERhdGEoX19QUklWQVRFX3F1ZXJ5VG9UYXJnZXQoX19QUklWQVRFX25ld1F1ZXJ5Rm9yUGF0aChuLnBhdGgpKSwgciwgXCJUYXJnZXRQdXJwb3NlTGltYm9SZXNvbHV0aW9uXCIgLyogVGFyZ2V0UHVycG9zZS5MaW1ib1Jlc29sdXRpb24gKi8gLCBfX1BSSVZBVEVfTGlzdGVuU2VxdWVuY2UuY2UpKTtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jRW5naW5lRW1pdE5ld1NuYXBzQW5kTm90aWZ5TG9jYWxTdG9yZShlLCB0LCBuKSB7XG4gICAgY29uc3QgciA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIGkgPSBbXSwgcyA9IFtdLCBvID0gW107XG4gICAgci5UdS5pc0VtcHR5KCkgfHwgKHIuVHUuZm9yRWFjaCgoKGUsIF8pID0+IHtcbiAgICAgICAgby5wdXNoKHIucHUoXywgdCwgbikudGhlbigoZSA9PiB7XG4gICAgICAgICAgICAvLyBJZiB0aGVyZSBhcmUgY2hhbmdlcywgb3Igd2UgYXJlIGhhbmRsaW5nIGEgZ2xvYmFsIHNuYXBzaG90LCBub3RpZnlcbiAgICAgICAgICAgIC8vIHNlY29uZGFyeSBjbGllbnRzIHRvIHVwZGF0ZSBxdWVyeSBzdGF0ZS5cbiAgICAgICAgICAgIGlmICgoZSB8fCBuKSAmJiByLmlzUHJpbWFyeUNsaWVudCkge1xuICAgICAgICAgICAgICAgIC8vIFF1ZXJ5IHN0YXRlIGlzIHNldCB0byBgY3VycmVudGAgaWY6XG4gICAgICAgICAgICAgICAgLy8gLSBUaGVyZSBpcyBhIHZpZXcgY2hhbmdlIGFuZCBpdCBpcyB1cC10by1kYXRlLCBvcixcbiAgICAgICAgICAgICAgICAvLyAtIFRoZXJlIGlzIGEgZ2xvYmFsIHNuYXBzaG90LCB0aGUgVGFyZ2V0IGlzIGN1cnJlbnQsIGFuZCBubyBjaGFuZ2VzIHRvIGJlIHJlc29sdmVkXG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IGUgPyAhZS5mcm9tQ2FjaGUgOiBuPy50YXJnZXRDaGFuZ2VzLmdldChfLnRhcmdldElkKT8uY3VycmVudDtcbiAgICAgICAgICAgICAgICByLnNoYXJlZENsaWVudFN0YXRlLnVwZGF0ZVF1ZXJ5U3RhdGUoXy50YXJnZXRJZCwgdCA/IFwiY3VycmVudFwiIDogXCJub3QtY3VycmVudFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFVwZGF0ZSB2aWV3cyBpZiB0aGVyZSBhcmUgYWN0dWFsIGNoYW5nZXMuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgICAgIGkucHVzaChlKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX0xvY2FsVmlld0NoYW5nZXMuQXMoXy50YXJnZXRJZCwgZSk7XG4gICAgICAgICAgICAgICAgcy5wdXNoKHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSkpO1xuICAgIH0pKSwgYXdhaXQgUHJvbWlzZS5hbGwobyksIHIuUHUuSF8oaSksIGF3YWl0IGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlTm90aWZ5TG9jYWxWaWV3Q2hhbmdlcyhlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIm5vdGlmeUxvY2FsVmlld0NoYW5nZXNcIiwgXCJyZWFkd3JpdGVcIiwgKGUgPT4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2godCwgKHQgPT4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2godC5FcywgKHIgPT4gbi5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS5hZGRSZWZlcmVuY2UoZSwgdC50YXJnZXRJZCwgcikpKS5uZXh0KCgoKSA9PiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaCh0LmRzLCAociA9PiBuLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLnJlbW92ZVJlZmVyZW5jZShlLCB0LnRhcmdldElkLCByKSkpKSkpKSkpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBpZiAoIV9fUFJJVkFURV9pc0luZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IoZSkpIHRocm93IGU7XG4gICAgICAgICAgICAvLyBJZiBgbm90aWZ5TG9jYWxWaWV3Q2hhbmdlc2AgZmFpbHMsIHdlIGRpZCBub3QgYWR2YW5jZSB0aGUgc2VxdWVuY2VcbiAgICAgICAgICAgIC8vIG51bWJlciBmb3IgdGhlIGRvY3VtZW50cyB0aGF0IHdlcmUgaW5jbHVkZWQgaW4gdGhpcyB0cmFuc2FjdGlvbi5cbiAgICAgICAgICAgIC8vIFRoaXMgbWlnaHQgdHJpZ2dlciB0aGVtIHRvIGJlIGRlbGV0ZWQgZWFybGllciB0aGFuIHRoZXkgb3RoZXJ3aXNlXG4gICAgICAgICAgICAvLyB3b3VsZCBoYXZlLCBidXQgaXQgc2hvdWxkIG5vdCBpbnZhbGlkYXRlIHRoZSBpbnRlZ3JpdHkgb2YgdGhlIGRhdGEuXG4gICAgICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoVXQsIFwiRmFpbGVkIHRvIHVwZGF0ZSBzZXF1ZW5jZSBudW1iZXJzOiBcIiArIGUpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0KSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS50YXJnZXRJZDtcbiAgICAgICAgICAgIGlmICghZS5mcm9tQ2FjaGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gbi5Ncy5nZXQodCksIHIgPSBlLnNuYXBzaG90VmVyc2lvbiwgaSA9IGUud2l0aExhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24ocik7XG4gICAgICAgICAgICAgICAgLy8gQWR2YW5jZSB0aGUgbGFzdCBsaW1ibyBmcmVlIHNuYXBzaG90IHZlcnNpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5NcyA9IG4uTXMuaW5zZXJ0KHQsIGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfShyLmxvY2FsU3RvcmUsIHMpKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3N5bmNFbmdpbmVIYW5kbGVDcmVkZW50aWFsQ2hhbmdlKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICBpZiAoIW4uY3VycmVudFVzZXIuaXNFcXVhbCh0KSkge1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoc24sIFwiVXNlciBjaGFuZ2UuIE5ldyB1c2VyOlwiLCB0LnRvS2V5KCkpO1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVIYW5kbGVVc2VyQ2hhbmdlKG4ubG9jYWxTdG9yZSwgdCk7XG4gICAgICAgIG4uY3VycmVudFVzZXIgPSB0LCBcbiAgICAgICAgLy8gRmFpbHMgdGFza3Mgd2FpdGluZyBmb3IgcGVuZGluZyB3cml0ZXMgcmVxdWVzdGVkIGJ5IHByZXZpb3VzIHVzZXIuXG4gICAgICAgIGZ1bmN0aW9uIF9fUFJJVkFURV9yZWplY3RPdXRzdGFuZGluZ1BlbmRpbmdXcml0ZXNDYWxsYmFja3MoZSwgdCkge1xuICAgICAgICAgICAgZS5tdS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgICAgICBlLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBlLnJlamVjdChuZXcgRmlyZXN0b3JlRXJyb3IoTi5DQU5DRUxMRUQsIHQpKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KSksIGUubXUuY2xlYXIoKTtcbiAgICAgICAgfShuLCBcIid3YWl0Rm9yUGVuZGluZ1dyaXRlcycgcHJvbWlzZSBpcyByZWplY3RlZCBkdWUgdG8gYSB1c2VyIGNoYW5nZS5cIiksIFxuICAgICAgICAvLyBUT0RPKGIvMTE0MjI2NDE3KTogQ29uc2lkZXIgY2FsbGluZyB0aGlzIG9ubHkgaW4gdGhlIHByaW1hcnkgdGFiLlxuICAgICAgICBuLnNoYXJlZENsaWVudFN0YXRlLmhhbmRsZVVzZXJDaGFuZ2UodCwgZS5yZW1vdmVkQmF0Y2hJZHMsIGUuYWRkZWRCYXRjaElkcyksIGF3YWl0IF9fUFJJVkFURV9zeW5jRW5naW5lRW1pdE5ld1NuYXBzQW5kTm90aWZ5TG9jYWxTdG9yZShuLCBlLkxzKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jRW5naW5lR2V0UmVtb3RlS2V5c0ZvclRhcmdldChlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIHIgPSBuLkF1LmdldCh0KTtcbiAgICBpZiAociAmJiByLmh1KSByZXR1cm4gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCkuYWRkKHIua2V5KTtcbiAgICB7XG4gICAgICAgIGxldCBlID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCk7XG4gICAgICAgIGNvbnN0IHIgPSBuLkl1LmdldCh0KTtcbiAgICAgICAgaWYgKCFyKSByZXR1cm4gZTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHIpIHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBuLlR1LmdldCh0KTtcbiAgICAgICAgICAgIGUgPSBlLnVuaW9uV2l0aChyLnZpZXcubnUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZWNvbmNpbGUgdGhlIGxpc3Qgb2Ygc3luY2VkIGRvY3VtZW50cyBpbiBhbiBleGlzdGluZyB2aWV3IHdpdGggdGhvc2VcbiAqIGZyb20gcGVyc2lzdGVuY2UuXG4gKi8gYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3N5bmNocm9uaXplVmlld0FuZENvbXB1dGVTbmFwc2hvdChlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIHIgPSBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZUV4ZWN1dGVRdWVyeShuLmxvY2FsU3RvcmUsIHQucXVlcnksIFxuICAgIC8qIHVzZVByZXZpb3VzUmVzdWx0cz0gKi8gITApLCBpID0gdC52aWV3LmN1KHIpO1xuICAgIHJldHVybiBuLmlzUHJpbWFyeUNsaWVudCAmJiBfX1BSSVZBVEVfdXBkYXRlVHJhY2tlZExpbWJvcyhuLCB0LnRhcmdldElkLCBpLmF1KSwgXG4gICAgaTtcbn1cblxuLyoqXG4gKiBSZXRyaWV2ZXMgbmV3bHkgY2hhbmdlZCBkb2N1bWVudHMgZnJvbSByZW1vdGUgZG9jdW1lbnQgY2FjaGUgYW5kIHJhaXNlc1xuICogc25hcHNob3RzIGlmIG5lZWRlZC5cbiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jRW5naW5lU3luY2hyb25pemVXaXRoQ2hhbmdlZERvY3VtZW50cyhlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9sb2NhbFN0b3JlR2V0TmV3RG9jdW1lbnRDaGFuZ2VzKG4ubG9jYWxTdG9yZSwgdCkudGhlbigoZSA9PiBfX1BSSVZBVEVfc3luY0VuZ2luZUVtaXROZXdTbmFwc0FuZE5vdGlmeUxvY2FsU3RvcmUobiwgZSkpKTtcbn1cblxuLyoqIEFwcGxpZXMgYSBtdXRhdGlvbiBzdGF0ZSB0byBhbiBleGlzdGluZyBiYXRjaC4gICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3N5bmNFbmdpbmVBcHBseUJhdGNoU3RhdGUoZSwgdCwgbiwgcikge1xuICAgIGNvbnN0IGkgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCBzID0gYXdhaXQgZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVMb29rdXBNdXRhdGlvbkRvY3VtZW50cyhlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCByID0gX19QUklWQVRFX2RlYnVnQ2FzdChuLm11dGF0aW9uUXVldWUpO1xuICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkxvb2t1cCBtdXRhdGlvbiBkb2N1bWVudHNcIiwgXCJyZWFkb25seVwiLCAoZSA9PiByLmVyKGUsIHQpLm5leHQoKHQgPT4gdCA/IG4ubG9jYWxEb2N1bWVudHMuZ2V0RG9jdW1lbnRzKGUsIHQpIDogUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUobnVsbCkpKSkpO1xuICAgIH1cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuICAgIChpLmxvY2FsU3RvcmUsIHQpO1xuICAgIG51bGwgIT09IHMgPyAoXCJwZW5kaW5nXCIgPT09IG4gPyBcbiAgICAvLyBJZiB3ZSBhcmUgdGhlIHByaW1hcnkgY2xpZW50LCB3ZSBuZWVkIHRvIHNlbmQgdGhpcyB3cml0ZSB0byB0aGVcbiAgICAvLyBiYWNrZW5kLiBTZWNvbmRhcnkgY2xpZW50cyB3aWxsIGlnbm9yZSB0aGVzZSB3cml0ZXMgc2luY2UgdGhlaXIgcmVtb3RlXG4gICAgLy8gY29ubmVjdGlvbiBpcyBkaXNhYmxlZC5cbiAgICBhd2FpdCBfX1BSSVZBVEVfZmlsbFdyaXRlUGlwZWxpbmUoaS5yZW1vdGVTdG9yZSkgOiBcImFja25vd2xlZGdlZFwiID09PSBuIHx8IFwicmVqZWN0ZWRcIiA9PT0gbiA/IChcbiAgICAvLyBOT1RFOiBCb3RoIHRoZXNlIG1ldGhvZHMgYXJlIG5vLW9wcyBmb3IgYmF0Y2hlcyB0aGF0IG9yaWdpbmF0ZWQgZnJvbVxuICAgIC8vIG90aGVyIGNsaWVudHMuXG4gICAgX19QUklWQVRFX3Byb2Nlc3NVc2VyQ2FsbGJhY2soaSwgdCwgciB8fCBudWxsKSwgX19QUklWQVRFX3RyaWdnZXJQZW5kaW5nV3JpdGVzQ2FsbGJhY2tzKGksIHQpLCBcbiAgICBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZVJlbW92ZUNhY2hlZE11dGF0aW9uQmF0Y2hNZXRhZGF0YShlLCB0KSB7XG4gICAgICAgIF9fUFJJVkFURV9kZWJ1Z0Nhc3QoX19QUklWQVRFX2RlYnVnQ2FzdChlKS5tdXRhdGlvblF1ZXVlKS5pcih0KTtcbiAgICB9XG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbiAgICAoaS5sb2NhbFN0b3JlLCB0KSkgOiBmYWlsKDY3MjAsIFwiVW5rbm93biBiYXRjaFN0YXRlXCIsIHtcbiAgICAgICAgU3U6IG5cbiAgICB9KSwgYXdhaXQgX19QUklWQVRFX3N5bmNFbmdpbmVFbWl0TmV3U25hcHNBbmROb3RpZnlMb2NhbFN0b3JlKGksIHMpKSA6IFxuICAgIC8vIEEgdGhyb3R0bGVkIHRhYiBtYXkgbm90IGhhdmUgc2VlbiB0aGUgbXV0YXRpb24gYmVmb3JlIGl0IHdhcyBjb21wbGV0ZWRcbiAgICAvLyBhbmQgcmVtb3ZlZCBmcm9tIHRoZSBtdXRhdGlvbiBxdWV1ZSwgaW4gd2hpY2ggY2FzZSB3ZSB3b24ndCBoYXZlIGNhY2hlZFxuICAgIC8vIHRoZSBhZmZlY3RlZCBkb2N1bWVudHMuIEluIHRoaXMgY2FzZSB3ZSBjYW4gc2FmZWx5IGlnbm9yZSB0aGUgdXBkYXRlXG4gICAgLy8gc2luY2UgdGhhdCBtZWFucyB3ZSBkaWRuJ3QgYXBwbHkgdGhlIG11dGF0aW9uIGxvY2FsbHkgYXQgYWxsIChpZiB3ZVxuICAgIC8vIGhhZCwgd2Ugd291bGQgaGF2ZSBjYWNoZWQgdGhlIGFmZmVjdGVkIGRvY3VtZW50cyksIGFuZCBzbyB3ZSB3aWxsIGp1c3RcbiAgICAvLyBzZWUgYW55IHJlc3VsdGluZyBkb2N1bWVudCBjaGFuZ2VzIHZpYSBub3JtYWwgcmVtb3RlIGRvY3VtZW50IHVwZGF0ZXNcbiAgICAvLyBhcyBhcHBsaWNhYmxlLlxuICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhzbiwgXCJDYW5ub3QgYXBwbHkgbXV0YXRpb24gYmF0Y2ggd2l0aCBpZDogXCIgKyB0KTtcbn1cblxuLyoqIEFwcGxpZXMgYSBxdWVyeSB0YXJnZXQgY2hhbmdlIGZyb20gYSBkaWZmZXJlbnQgdGFiLiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jRW5naW5lQXBwbHlQcmltYXJ5U3RhdGUoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIGlmIChfX1BSSVZBVEVfZW5zdXJlV2F0Y2hDYWxsYmFja3MobiksIF9fUFJJVkFURV9zeW5jRW5naW5lRW5zdXJlV3JpdGVDYWxsYmFja3MobiksIFxuICAgICEwID09PSB0ICYmICEwICE9PSBuLmd1KSB7XG4gICAgICAgIC8vIFNlY29uZGFyeSB0YWJzIG9ubHkgbWFpbnRhaW4gVmlld3MgZm9yIHRoZWlyIGxvY2FsIGxpc3RlbmVycyBhbmQgdGhlXG4gICAgICAgIC8vIFZpZXdzIGludGVybmFsIHN0YXRlIG1heSBub3QgYmUgMTAwJSBwb3B1bGF0ZWQgKGluIHBhcnRpY3VsYXJcbiAgICAgICAgLy8gc2Vjb25kYXJ5IHRhYnMgZG9uJ3QgdHJhY2sgc3luY2VkRG9jdW1lbnRzLCB0aGUgc2V0IG9mIGRvY3VtZW50cyB0aGVcbiAgICAgICAgLy8gc2VydmVyIGNvbnNpZGVycyB0byBiZSBpbiB0aGUgdGFyZ2V0KS4gU28gd2hlbiBhIHNlY29uZGFyeSBiZWNvbWVzXG4gICAgICAgIC8vIHByaW1hcnksIHdlIG5lZWQgdG8gbmVlZCB0byBtYWtlIHN1cmUgdGhhdCBhbGwgdmlld3MgZm9yIGFsbCB0YXJnZXRzXG4gICAgICAgIC8vIG1hdGNoIHRoZSBzdGF0ZSBvbiBkaXNrLlxuICAgICAgICBjb25zdCBlID0gbi5zaGFyZWRDbGllbnRTdGF0ZS5nZXRBbGxBY3RpdmVRdWVyeVRhcmdldHMoKSwgdCA9IGF3YWl0IF9fUFJJVkFURV9zeW5jaHJvbml6ZVF1ZXJ5Vmlld3NBbmRSYWlzZVNuYXBzaG90cyhuLCBlLnRvQXJyYXkoKSk7XG4gICAgICAgIG4uZ3UgPSAhMCwgYXdhaXQgX19QUklWQVRFX3JlbW90ZVN0b3JlQXBwbHlQcmltYXJ5U3RhdGUobi5yZW1vdGVTdG9yZSwgITApO1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdCkgX19QUklWQVRFX3JlbW90ZVN0b3JlTGlzdGVuKG4ucmVtb3RlU3RvcmUsIGUpO1xuICAgIH0gZWxzZSBpZiAoITEgPT09IHQgJiYgITEgIT09IG4uZ3UpIHtcbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICBsZXQgdCA9IFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICBuLkl1LmZvckVhY2goKChyLCBpKSA9PiB7XG4gICAgICAgICAgICBuLnNoYXJlZENsaWVudFN0YXRlLmlzTG9jYWxRdWVyeVRhcmdldChpKSA/IGUucHVzaChpKSA6IHQgPSB0LnRoZW4oKCgpID0+IChfX1BSSVZBVEVfcmVtb3ZlQW5kQ2xlYW51cFRhcmdldChuLCBpKSwgXG4gICAgICAgICAgICBfX1BSSVZBVEVfbG9jYWxTdG9yZVJlbGVhc2VUYXJnZXQobi5sb2NhbFN0b3JlLCBpLCBcbiAgICAgICAgICAgIC8qa2VlcFBlcnNpc3RlZFRhcmdldERhdGE9Ki8gITApKSkpLCBfX1BSSVZBVEVfcmVtb3RlU3RvcmVVbmxpc3RlbihuLnJlbW90ZVN0b3JlLCBpKTtcbiAgICAgICAgfSkpLCBhd2FpdCB0LCBhd2FpdCBfX1BSSVZBVEVfc3luY2hyb25pemVRdWVyeVZpZXdzQW5kUmFpc2VTbmFwc2hvdHMobiwgZSksIFxuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfcmVzZXRMaW1ib0RvY3VtZW50cyhlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICAgICAgICAgIHQuQXUuZm9yRWFjaCgoKGUsIG4pID0+IHtcbiAgICAgICAgICAgICAgICBfX1BSSVZBVEVfcmVtb3RlU3RvcmVVbmxpc3Rlbih0LnJlbW90ZVN0b3JlLCBuKTtcbiAgICAgICAgICAgIH0pKSwgdC5SdS5KcigpLCB0LkF1ID0gbmV3IE1hcCwgdC5kdSA9IG5ldyBTb3J0ZWRNYXAoRG9jdW1lbnRLZXkuY29tcGFyYXRvcik7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBSZWNvbmNpbGUgdGhlIHF1ZXJ5IHZpZXdzIG9mIHRoZSBwcm92aWRlZCBxdWVyeSB0YXJnZXRzIHdpdGggdGhlIHN0YXRlIGZyb21cbiAqIHBlcnNpc3RlbmNlLiBSYWlzZXMgc25hcHNob3RzIGZvciBhbnkgY2hhbmdlcyB0aGF0IGFmZmVjdCB0aGUgbG9jYWxcbiAqIGNsaWVudCBhbmQgcmV0dXJucyB0aGUgdXBkYXRlZCBzdGF0ZSBvZiBhbGwgdGFyZ2V0J3MgcXVlcnkgZGF0YS5cbiAqXG4gKiBAcGFyYW0gc3luY0VuZ2luZSAtIFRoZSBzeW5jIGVuZ2luZSBpbXBsZW1lbnRhdGlvblxuICogQHBhcmFtIHRhcmdldHMgLSB0aGUgbGlzdCBvZiB0YXJnZXRzIHdpdGggdmlld3MgdGhhdCBuZWVkIHRvIGJlIHJlY29tcHV0ZWRcbiAqIEBwYXJhbSB0cmFuc2l0aW9uVG9QcmltYXJ5IC0gYHRydWVgIGlmZiB0aGUgdGFiIHRyYW5zaXRpb25zIGZyb20gYSBzZWNvbmRhcnlcbiAqIHRhYiB0byBhIHByaW1hcnkgdGFiXG4gKi9cbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbiAgICAgICAgKG4pLCBuLmd1ID0gITEsIGF3YWl0IF9fUFJJVkFURV9yZW1vdGVTdG9yZUFwcGx5UHJpbWFyeVN0YXRlKG4ucmVtb3RlU3RvcmUsICExKTtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jaHJvbml6ZVF1ZXJ5Vmlld3NBbmRSYWlzZVNuYXBzaG90cyhlLCB0LCBuKSB7XG4gICAgY29uc3QgciA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIGkgPSBbXSwgcyA9IFtdO1xuICAgIGZvciAoY29uc3QgZSBvZiB0KSB7XG4gICAgICAgIGxldCB0O1xuICAgICAgICBjb25zdCBuID0gci5JdS5nZXQoZSk7XG4gICAgICAgIGlmIChuICYmIDAgIT09IG4ubGVuZ3RoKSB7XG4gICAgICAgICAgICAvLyBGb3IgcXVlcmllcyB0aGF0IGhhdmUgYSBsb2NhbCBWaWV3LCB3ZSBmZXRjaCB0aGVpciBjdXJyZW50IHN0YXRlXG4gICAgICAgICAgICAvLyBmcm9tIExvY2FsU3RvcmUgKGFzIHRoZSByZXN1bWUgdG9rZW4gYW5kIHRoZSBzbmFwc2hvdCB2ZXJzaW9uXG4gICAgICAgICAgICAvLyBtaWdodCBoYXZlIGNoYW5nZWQpIGFuZCByZWNvbmNpbGUgdGhlaXIgdmlld3Mgd2l0aCB0aGUgcGVyc2lzdGVkXG4gICAgICAgICAgICAvLyBzdGF0ZSAodGhlIGxpc3Qgb2Ygc3luY2VkRG9jdW1lbnRzIG1heSBoYXZlIGdvdHRlbiBvdXQgb2Ygc3luYykuXG4gICAgICAgICAgICB0ID0gYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVBbGxvY2F0ZVRhcmdldChyLmxvY2FsU3RvcmUsIF9fUFJJVkFURV9xdWVyeVRvVGFyZ2V0KG5bMF0pKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiBuKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IHIuVHUuZ2V0KGUpLCBuID0gYXdhaXQgX19QUklWQVRFX3N5bmNocm9uaXplVmlld0FuZENvbXB1dGVTbmFwc2hvdChyLCB0KTtcbiAgICAgICAgICAgICAgICBuLnNuYXBzaG90ICYmIHMucHVzaChuLnNuYXBzaG90KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEZvciBxdWVyaWVzIHRoYXQgbmV2ZXIgZXhlY3V0ZWQgb24gdGhpcyBjbGllbnQsIHdlIG5lZWQgdG9cbiAgICAgICAgICAgIC8vIGFsbG9jYXRlIHRoZSB0YXJnZXQgaW4gTG9jYWxTdG9yZSBhbmQgaW5pdGlhbGl6ZSBhIG5ldyBWaWV3LlxuICAgICAgICAgICAgY29uc3QgbiA9IGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlR2V0Q2FjaGVkVGFyZ2V0KHIubG9jYWxTdG9yZSwgZSk7XG4gICAgICAgICAgICB0ID0gYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVBbGxvY2F0ZVRhcmdldChyLmxvY2FsU3RvcmUsIG4pLCBhd2FpdCBfX1BSSVZBVEVfaW5pdGlhbGl6ZVZpZXdBbmRDb21wdXRlU25hcHNob3QociwgX19QUklWQVRFX3N5bnRoZXNpemVUYXJnZXRUb1F1ZXJ5KG4pLCBlLCBcbiAgICAgICAgICAgIC8qY3VycmVudD0qLyAhMSwgdC5yZXN1bWVUb2tlbik7XG4gICAgICAgIH1cbiAgICAgICAgaS5wdXNoKHQpO1xuICAgIH1cbiAgICByZXR1cm4gci5QdS5IXyhzKSwgaTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgYFF1ZXJ5YCBvYmplY3QgZnJvbSB0aGUgc3BlY2lmaWVkIGBUYXJnZXRgLiBUaGVyZSBpcyBubyB3YXkgdG9cbiAqIG9idGFpbiB0aGUgb3JpZ2luYWwgYFF1ZXJ5YCwgc28gd2Ugc3ludGhlc2l6ZSBhIGBRdWVyeWAgZnJvbSB0aGUgYFRhcmdldGBcbiAqIG9iamVjdC5cbiAqXG4gKiBUaGUgc3ludGhlc2l6ZWQgcmVzdWx0IG1pZ2h0IGJlIGRpZmZlcmVudCBmcm9tIHRoZSBvcmlnaW5hbCBgUXVlcnlgLCBidXRcbiAqIHNpbmNlIHRoZSBzeW50aGVzaXplZCBgUXVlcnlgIHNob3VsZCByZXR1cm4gdGhlIHNhbWUgcmVzdWx0cyBhcyB0aGVcbiAqIG9yaWdpbmFsIG9uZSAob25seSB0aGUgcHJlc2VudGF0aW9uIG9mIHJlc3VsdHMgbWlnaHQgZGlmZmVyKSwgdGhlIHBvdGVudGlhbFxuICogZGlmZmVyZW5jZSB3aWxsIG5vdCBjYXVzZSBpc3N1ZXMuXG4gKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5mdW5jdGlvbiBfX1BSSVZBVEVfc3ludGhlc2l6ZVRhcmdldFRvUXVlcnkoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfbmV3UXVlcnkoZS5wYXRoLCBlLmNvbGxlY3Rpb25Hcm91cCwgZS5vcmRlckJ5LCBlLmZpbHRlcnMsIGUubGltaXQsIFwiRlwiIC8qIExpbWl0VHlwZS5GaXJzdCAqLyAsIGUuc3RhcnRBdCwgZS5lbmRBdCk7XG59XG5cbi8qKiBSZXR1cm5zIHRoZSBJRHMgb2YgdGhlIGNsaWVudHMgdGhhdCBhcmUgY3VycmVudGx5IGFjdGl2ZS4gKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5mdW5jdGlvbiBfX1BSSVZBVEVfc3luY0VuZ2luZUdldEFjdGl2ZUNsaWVudHMoZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZUdldEFjdGl2ZUNsaWVudHMoZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2RlYnVnQ2FzdChfX1BSSVZBVEVfZGVidWdDYXN0KGUpLnBlcnNpc3RlbmNlKS5UcygpO1xuICAgIH0oX19QUklWQVRFX2RlYnVnQ2FzdChlKS5sb2NhbFN0b3JlKTtcbn1cblxuLyoqIEFwcGxpZXMgYSBxdWVyeSB0YXJnZXQgY2hhbmdlIGZyb20gYSBkaWZmZXJlbnQgdGFiLiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jRW5naW5lQXBwbHlUYXJnZXRTdGF0ZShlLCB0LCBuLCByKSB7XG4gICAgY29uc3QgaSA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgaWYgKGkuZ3UpIFxuICAgIC8vIElmIHdlIHJlY2VpdmUgYSB0YXJnZXQgc3RhdGUgbm90aWZpY2F0aW9uIHZpYSBXZWJTdG9yYWdlLCB3ZSBhcmVcbiAgICAvLyBlaXRoZXIgYWxyZWFkeSBzZWNvbmRhcnkgb3IgYW5vdGhlciB0YWIgaGFzIHRha2VuIHRoZSBwcmltYXJ5IGxlYXNlLlxuICAgIHJldHVybiB2b2lkIF9fUFJJVkFURV9sb2dEZWJ1ZyhzbiwgXCJJZ25vcmluZyB1bmV4cGVjdGVkIHF1ZXJ5IHN0YXRlIG5vdGlmaWNhdGlvbi5cIik7XG4gICAgY29uc3QgcyA9IGkuSXUuZ2V0KHQpO1xuICAgIGlmIChzICYmIHMubGVuZ3RoID4gMCkgc3dpdGNoIChuKSB7XG4gICAgICBjYXNlIFwiY3VycmVudFwiOlxuICAgICAgY2FzZSBcIm5vdC1jdXJyZW50XCI6XG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZUdldE5ld0RvY3VtZW50Q2hhbmdlcyhpLmxvY2FsU3RvcmUsIF9fUFJJVkFURV9xdWVyeUNvbGxlY3Rpb25Hcm91cChzWzBdKSksIHIgPSBSZW1vdGVFdmVudC5jcmVhdGVTeW50aGVzaXplZFJlbW90ZUV2ZW50Rm9yQ3VycmVudENoYW5nZSh0LCBcImN1cnJlbnRcIiA9PT0gbiwgQnl0ZVN0cmluZy5FTVBUWV9CWVRFX1NUUklORyk7XG4gICAgICAgICAgICBhd2FpdCBfX1BSSVZBVEVfc3luY0VuZ2luZUVtaXROZXdTbmFwc0FuZE5vdGlmeUxvY2FsU3RvcmUoaSwgZSwgcik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICBjYXNlIFwicmVqZWN0ZWRcIjpcbiAgICAgICAgYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVSZWxlYXNlVGFyZ2V0KGkubG9jYWxTdG9yZSwgdCwgXG4gICAgICAgIC8qIGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhICovICEwKSwgX19QUklWQVRFX3JlbW92ZUFuZENsZWFudXBUYXJnZXQoaSwgdCwgcik7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBmYWlsKDY0MTU1LCBuKTtcbiAgICB9XG59XG5cbi8qKiBBZGRzIG9yIHJlbW92ZXMgV2F0Y2ggdGFyZ2V0cyBmb3IgcXVlcmllcyBmcm9tIGRpZmZlcmVudCB0YWJzLiAqLyBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfc3luY0VuZ2luZUFwcGx5QWN0aXZlVGFyZ2V0c0NoYW5nZShlLCB0LCBuKSB7XG4gICAgY29uc3QgciA9IF9fUFJJVkFURV9lbnN1cmVXYXRjaENhbGxiYWNrcyhlKTtcbiAgICBpZiAoci5ndSkge1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdCkge1xuICAgICAgICAgICAgaWYgKHIuSXUuaGFzKGUpICYmIHIuc2hhcmVkQ2xpZW50U3RhdGUuaXNBY3RpdmVRdWVyeVRhcmdldChlKSkge1xuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhzbiwgXCJBZGRpbmcgYW4gYWxyZWFkeSBhY3RpdmUgdGFyZ2V0IFwiICsgZSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB0ID0gYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVHZXRDYWNoZWRUYXJnZXQoci5sb2NhbFN0b3JlLCBlKSwgbiA9IGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlQWxsb2NhdGVUYXJnZXQoci5sb2NhbFN0b3JlLCB0KTtcbiAgICAgICAgICAgIGF3YWl0IF9fUFJJVkFURV9pbml0aWFsaXplVmlld0FuZENvbXB1dGVTbmFwc2hvdChyLCBfX1BSSVZBVEVfc3ludGhlc2l6ZVRhcmdldFRvUXVlcnkodCksIG4udGFyZ2V0SWQsIFxuICAgICAgICAgICAgLypjdXJyZW50PSovICExLCBuLnJlc3VtZVRva2VuKSwgX19QUklWQVRFX3JlbW90ZVN0b3JlTGlzdGVuKHIucmVtb3RlU3RvcmUsIG4pO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiBuKSBcbiAgICAgICAgLy8gQ2hlY2sgdGhhdCB0aGUgdGFyZ2V0IGlzIHN0aWxsIGFjdGl2ZSBzaW5jZSB0aGUgdGFyZ2V0IG1pZ2h0IGhhdmUgYmVlblxuICAgICAgICAvLyByZW1vdmVkIGlmIGl0IGhhcyBiZWVuIHJlamVjdGVkIGJ5IHRoZSBiYWNrZW5kLlxuICAgICAgICByLkl1LmhhcyhlKSAmJiBcbiAgICAgICAgLy8gUmVsZWFzZSBxdWVyaWVzIHRoYXQgYXJlIHN0aWxsIGFjdGl2ZS5cbiAgICAgICAgYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVSZWxlYXNlVGFyZ2V0KHIubG9jYWxTdG9yZSwgZSwgXG4gICAgICAgIC8qIGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhICovICExKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICBfX1BSSVZBVEVfcmVtb3RlU3RvcmVVbmxpc3RlbihyLnJlbW90ZVN0b3JlLCBlKSwgX19QUklWQVRFX3JlbW92ZUFuZENsZWFudXBUYXJnZXQociwgZSk7XG4gICAgICAgIH0pKS5jYXRjaChfX1BSSVZBVEVfaWdub3JlSWZQcmltYXJ5TGVhc2VMb3NzKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9lbnN1cmVXYXRjaENhbGxiYWNrcyhlKSB7XG4gICAgY29uc3QgdCA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgcmV0dXJuIHQucmVtb3RlU3RvcmUucmVtb3RlU3luY2VyLmFwcGx5UmVtb3RlRXZlbnQgPSBfX1BSSVZBVEVfc3luY0VuZ2luZUFwcGx5UmVtb3RlRXZlbnQuYmluZChudWxsLCB0KSwgXG4gICAgdC5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCA9IF9fUFJJVkFURV9zeW5jRW5naW5lR2V0UmVtb3RlS2V5c0ZvclRhcmdldC5iaW5kKG51bGwsIHQpLCBcbiAgICB0LnJlbW90ZVN0b3JlLnJlbW90ZVN5bmNlci5yZWplY3RMaXN0ZW4gPSBfX1BSSVZBVEVfc3luY0VuZ2luZVJlamVjdExpc3Rlbi5iaW5kKG51bGwsIHQpLCBcbiAgICB0LlB1LkhfID0gX19QUklWQVRFX2V2ZW50TWFuYWdlck9uV2F0Y2hDaGFuZ2UuYmluZChudWxsLCB0LmV2ZW50TWFuYWdlciksIHQuUHUueXUgPSBfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyT25XYXRjaEVycm9yLmJpbmQobnVsbCwgdC5ldmVudE1hbmFnZXIpLCBcbiAgICB0O1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfc3luY0VuZ2luZUVuc3VyZVdyaXRlQ2FsbGJhY2tzKGUpIHtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICByZXR1cm4gdC5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIuYXBwbHlTdWNjZXNzZnVsV3JpdGUgPSBfX1BSSVZBVEVfc3luY0VuZ2luZUFwcGx5U3VjY2Vzc2Z1bFdyaXRlLmJpbmQobnVsbCwgdCksIFxuICAgIHQucmVtb3RlU3RvcmUucmVtb3RlU3luY2VyLnJlamVjdEZhaWxlZFdyaXRlID0gX19QUklWQVRFX3N5bmNFbmdpbmVSZWplY3RGYWlsZWRXcml0ZS5iaW5kKG51bGwsIHQpLCBcbiAgICB0O1xufVxuXG4vKipcbiAqIExvYWRzIGEgRmlyZXN0b3JlIGJ1bmRsZSBpbnRvIHRoZSBTREsuIFRoZSByZXR1cm5lZCBwcm9taXNlIHJlc29sdmVzIHdoZW5cbiAqIHRoZSBidW5kbGUgZmluaXNoZWQgbG9hZGluZy5cbiAqXG4gKiBAcGFyYW0gc3luY0VuZ2luZSAtIFN5bmNFbmdpbmUgdG8gdXNlLlxuICogQHBhcmFtIGJ1bmRsZVJlYWRlciAtIEJ1bmRsZSB0byBsb2FkIGludG8gdGhlIFNESy5cbiAqIEBwYXJhbSB0YXNrIC0gTG9hZEJ1bmRsZVRhc2sgdXNlZCB0byB1cGRhdGUgdGhlIGxvYWRpbmcgcHJvZ3Jlc3MgdG8gcHVibGljIEFQSS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfc3luY0VuZ2luZUxvYWRCdW5kbGUoZSwgdCwgbikge1xuICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcbiAgICAgICAgKFxuICAgIC8qKiBMb2FkcyBhIGJ1bmRsZSBhbmQgcmV0dXJucyB0aGUgbGlzdCBvZiBhZmZlY3RlZCBjb2xsZWN0aW9uIGdyb3Vwcy4gKi9cbiAgICBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfbG9hZEJ1bmRsZUltcGwoZSwgdCwgbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgciA9IGF3YWl0IHQuZ2V0TWV0YWRhdGEoKTtcbiAgICAgICAgICAgIGlmIChhd2FpdCBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZUhhc05ld2VyQnVuZGxlKGUsIHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgciA9IF9fUFJJVkFURV9mcm9tVmVyc2lvbih0LmNyZWF0ZVRpbWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiaGFzTmV3ZXJCdW5kbGVcIiwgXCJyZWFkb25seVwiLCAoZSA9PiBuLklpLmdldEJ1bmRsZU1ldGFkYXRhKGUsIHQuaWQpKSkudGhlbigoZSA9PiAhIWUgJiYgZS5jcmVhdGVUaW1lLmNvbXBhcmVUbyhyKSA+PSAwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIFNhdmVzIHRoZSBnaXZlbiBgQnVuZGxlTWV0YWRhdGFgIHRvIGxvY2FsIHBlcnNpc3RlbmNlLlxuICovIChlLmxvY2FsU3RvcmUsIHIpKSByZXR1cm4gYXdhaXQgdC5jbG9zZSgpLCBuLl9jb21wbGV0ZVdpdGgoZnVuY3Rpb24gX19QUklWQVRFX2J1bmRsZVN1Y2Nlc3NQcm9ncmVzcyhlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdGFza1N0YXRlOiBcIlN1Y2Nlc3NcIixcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnRzTG9hZGVkOiBlLnRvdGFsRG9jdW1lbnRzLFxuICAgICAgICAgICAgICAgICAgICBieXRlc0xvYWRlZDogZS50b3RhbEJ5dGVzLFxuICAgICAgICAgICAgICAgICAgICB0b3RhbERvY3VtZW50czogZS50b3RhbERvY3VtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgdG90YWxCeXRlczogZS50b3RhbEJ5dGVzXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0ocikpLCBQcm9taXNlLnJlc29sdmUobmV3IFNldCk7XG4gICAgICAgICAgICBuLl91cGRhdGVQcm9ncmVzcyhfX1BSSVZBVEVfYnVuZGxlSW5pdGlhbFByb2dyZXNzKHIpKTtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBuZXcgX19QUklWQVRFX0J1bmRsZUxvYWRlcihyLCB0LnNlcmlhbGl6ZXIpO1xuICAgICAgICAgICAgbGV0IHMgPSBhd2FpdCB0LmJ1KCk7XG4gICAgICAgICAgICBmb3IgKDtzOyApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gYXdhaXQgaS5HYShzKTtcbiAgICAgICAgICAgICAgICBlICYmIG4uX3VwZGF0ZVByb2dyZXNzKGUpLCBzID0gYXdhaXQgdC5idSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbyA9IGF3YWl0IGkuamEoZS5sb2NhbFN0b3JlKTtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBfX1BSSVZBVEVfc3luY0VuZ2luZUVtaXROZXdTbmFwc0FuZE5vdGlmeUxvY2FsU3RvcmUoZSwgby5IYSwgXG4gICAgICAgICAgICAvKiByZW1vdGVFdmVudCAqLyB2b2lkIDApLCBcbiAgICAgICAgICAgIC8vIFNhdmUgbWV0YWRhdGEsIHNvIGxvYWRpbmcgdGhlIHNhbWUgYnVuZGxlIHdpbGwgc2tpcC5cbiAgICAgICAgICAgIGF3YWl0IGZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlU2F2ZUJ1bmRsZShlLCB0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJTYXZlIGJ1bmRsZVwiLCBcInJlYWR3cml0ZVwiLCAoZSA9PiBuLklpLnNhdmVCdW5kbGVNZXRhZGF0YShlLCB0KSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gKiBSZXR1cm5zIGEgcHJvbWlzZSBvZiBhIGBOYW1lZFF1ZXJ5YCBhc3NvY2lhdGVkIHdpdGggZ2l2ZW4gcXVlcnkgbmFtZS4gUHJvbWlzZVxuICogcmVzb2x2ZXMgdG8gdW5kZWZpbmVkIGlmIG5vIHBlcnNpc3RlZCBkYXRhIGNhbiBiZSBmb3VuZC5cbiAqLyAoZS5sb2NhbFN0b3JlLCByKSwgbi5fY29tcGxldGVXaXRoKG8ucHJvZ3Jlc3MpLCBQcm9taXNlLnJlc29sdmUoby5KYSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBfX1BSSVZBVEVfbG9nV2FybihzbiwgYExvYWRpbmcgYnVuZGxlIGZhaWxlZCB3aXRoICR7ZX1gKSwgbi5fZmFpbFdpdGgoZSksIFxuICAgICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKG5ldyBTZXQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4gICAgLyoqXG4gKiBQcm92aWRlcyBhbGwgY29tcG9uZW50cyBuZWVkZWQgZm9yIEZpcmVzdG9yZSB3aXRoIGluLW1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAqIFVzZXMgRWFnZXJHQyBnYXJiYWdlIGNvbGxlY3Rpb24uXG4gKi8pKHIsIHQsIG4pLnRoZW4oKGUgPT4ge1xuICAgICAgICByLnNoYXJlZENsaWVudFN0YXRlLm5vdGlmeUJ1bmRsZUxvYWRlZChlKTtcbiAgICB9KSk7XG59XG5cbmNsYXNzIF9fUFJJVkFURV9NZW1vcnlPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmtpbmQgPSBcIm1lbW9yeVwiLCB0aGlzLnN5bmNocm9uaXplVGFicyA9ICExO1xuICAgIH1cbiAgICBhc3luYyBpbml0aWFsaXplKGUpIHtcbiAgICAgICAgdGhpcy5zZXJpYWxpemVyID0gX19QUklWQVRFX25ld1NlcmlhbGl6ZXIoZS5kYXRhYmFzZUluZm8uZGF0YWJhc2VJZCksIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUgPSB0aGlzLkR1KGUpLCBcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZSA9IHRoaXMuQ3UoZSksIGF3YWl0IHRoaXMucGVyc2lzdGVuY2Uuc3RhcnQoKSwgdGhpcy5sb2NhbFN0b3JlID0gdGhpcy52dShlKSwgXG4gICAgICAgIHRoaXMuZ2NTY2hlZHVsZXIgPSB0aGlzLkZ1KGUsIHRoaXMubG9jYWxTdG9yZSksIHRoaXMuaW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyID0gdGhpcy5NdShlLCB0aGlzLmxvY2FsU3RvcmUpO1xuICAgIH1cbiAgICBGdShlLCB0KSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBNdShlLCB0KSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICB2dShlKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfbmV3TG9jYWxTdG9yZSh0aGlzLnBlcnNpc3RlbmNlLCBuZXcgX19QUklWQVRFX1F1ZXJ5RW5naW5lLCBlLmluaXRpYWxVc2VyLCB0aGlzLnNlcmlhbGl6ZXIpO1xuICAgIH1cbiAgICBDdShlKSB7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX01lbW9yeVBlcnNpc3RlbmNlKF9fUFJJVkFURV9NZW1vcnlFYWdlckRlbGVnYXRlLm1pLCB0aGlzLnNlcmlhbGl6ZXIpO1xuICAgIH1cbiAgICBEdShlKSB7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX01lbW9yeVNoYXJlZENsaWVudFN0YXRlO1xuICAgIH1cbiAgICBhc3luYyB0ZXJtaW5hdGUoKSB7XG4gICAgICAgIHRoaXMuZ2NTY2hlZHVsZXI/LnN0b3AoKSwgdGhpcy5pbmRleEJhY2tmaWxsZXJTY2hlZHVsZXI/LnN0b3AoKSwgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZS5zaHV0ZG93bigpLCBcbiAgICAgICAgYXdhaXQgdGhpcy5wZXJzaXN0ZW5jZS5zaHV0ZG93bigpO1xuICAgIH1cbn1cblxuX19QUklWQVRFX01lbW9yeU9mZmxpbmVDb21wb25lbnRQcm92aWRlci5wcm92aWRlciA9IHtcbiAgICBidWlsZDogKCkgPT4gbmV3IF9fUFJJVkFURV9NZW1vcnlPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXJcbn07XG5cbmNsYXNzIF9fUFJJVkFURV9McnVHY01lbW9yeU9mZmxpbmVDb21wb25lbnRQcm92aWRlciBleHRlbmRzIF9fUFJJVkFURV9NZW1vcnlPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5jYWNoZVNpemVCeXRlcyA9IGU7XG4gICAgfVxuICAgIEZ1KGUsIHQpIHtcbiAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQodGhpcy5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZSBpbnN0YW5jZW9mIF9fUFJJVkFURV9NZW1vcnlMcnVEZWxlZ2F0ZSwgNDY5MTUpO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS5nYXJiYWdlQ29sbGVjdG9yO1xuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9McnVTY2hlZHVsZXIobiwgZS5hc3luY1F1ZXVlLCB0KTtcbiAgICB9XG4gICAgQ3UoZSkge1xuICAgICAgICBjb25zdCB0ID0gdm9pZCAwICE9PSB0aGlzLmNhY2hlU2l6ZUJ5dGVzID8gTHJ1UGFyYW1zLndpdGhDYWNoZVNpemUodGhpcy5jYWNoZVNpemVCeXRlcykgOiBMcnVQYXJhbXMuREVGQVVMVDtcbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfTWVtb3J5UGVyc2lzdGVuY2UoKGUgPT4gX19QUklWQVRFX01lbW9yeUxydURlbGVnYXRlLm1pKGUsIHQpKSwgdGhpcy5zZXJpYWxpemVyKTtcbiAgICB9XG59XG5cbi8qKlxuICogUHJvdmlkZXMgYWxsIGNvbXBvbmVudHMgbmVlZGVkIGZvciBGaXJlc3RvcmUgd2l0aCBJbmRleGVkREIgcGVyc2lzdGVuY2UuXG4gKi8gY2xhc3MgX19QUklWQVRFX0luZGV4ZWREYk9mZmxpbmVDb21wb25lbnRQcm92aWRlciBleHRlbmRzIF9fUFJJVkFURV9NZW1vcnlPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy54dSA9IGUsIHRoaXMuY2FjaGVTaXplQnl0ZXMgPSB0LCB0aGlzLmZvcmNlT3duZXJzaGlwID0gbiwgdGhpcy5raW5kID0gXCJwZXJzaXN0ZW50XCIsIFxuICAgICAgICB0aGlzLnN5bmNocm9uaXplVGFicyA9ICExO1xuICAgIH1cbiAgICBhc3luYyBpbml0aWFsaXplKGUpIHtcbiAgICAgICAgYXdhaXQgc3VwZXIuaW5pdGlhbGl6ZShlKSwgYXdhaXQgdGhpcy54dS5pbml0aWFsaXplKHRoaXMsIGUpLCBcbiAgICAgICAgLy8gRW5xdWV1ZSB3cml0ZXMgZnJvbSBhIHByZXZpb3VzIHNlc3Npb25cbiAgICAgICAgYXdhaXQgX19QUklWQVRFX3N5bmNFbmdpbmVFbnN1cmVXcml0ZUNhbGxiYWNrcyh0aGlzLnh1LnN5bmNFbmdpbmUpLCBhd2FpdCBfX1BSSVZBVEVfZmlsbFdyaXRlUGlwZWxpbmUodGhpcy54dS5yZW1vdGVTdG9yZSksIFxuICAgICAgICAvLyBOT1RFOiBUaGlzIHdpbGwgaW1tZWRpYXRlbHkgY2FsbCB0aGUgbGlzdGVuZXIsIHNvIHdlIG1ha2Ugc3VyZSB0b1xuICAgICAgICAvLyBzZXQgaXQgYWZ0ZXIgbG9jYWxTdG9yZSAvIHJlbW90ZVN0b3JlIGFyZSBzdGFydGVkLlxuICAgICAgICBhd2FpdCB0aGlzLnBlcnNpc3RlbmNlLkppKCgoKSA9PiAodGhpcy5nY1NjaGVkdWxlciAmJiAhdGhpcy5nY1NjaGVkdWxlci5zdGFydGVkICYmIHRoaXMuZ2NTY2hlZHVsZXIuc3RhcnQoKSwgXG4gICAgICAgIHRoaXMuaW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyICYmICF0aGlzLmluZGV4QmFja2ZpbGxlclNjaGVkdWxlci5zdGFydGVkICYmIHRoaXMuaW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyLnN0YXJ0KCksIFxuICAgICAgICBQcm9taXNlLnJlc29sdmUoKSkpKTtcbiAgICB9XG4gICAgdnUoZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX25ld0xvY2FsU3RvcmUodGhpcy5wZXJzaXN0ZW5jZSwgbmV3IF9fUFJJVkFURV9RdWVyeUVuZ2luZSwgZS5pbml0aWFsVXNlciwgdGhpcy5zZXJpYWxpemVyKTtcbiAgICB9XG4gICAgRnUoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS5nYXJiYWdlQ29sbGVjdG9yO1xuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9McnVTY2hlZHVsZXIobiwgZS5hc3luY1F1ZXVlLCB0KTtcbiAgICB9XG4gICAgTXUoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gbmV3IF9fUFJJVkFURV9JbmRleEJhY2tmaWxsZXIodCwgdGhpcy5wZXJzaXN0ZW5jZSk7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX0luZGV4QmFja2ZpbGxlclNjaGVkdWxlcihlLmFzeW5jUXVldWUsIG4pO1xuICAgIH1cbiAgICBDdShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfaW5kZXhlZERiU3RvcmFnZVByZWZpeChlLmRhdGFiYXNlSW5mby5kYXRhYmFzZUlkLCBlLmRhdGFiYXNlSW5mby5wZXJzaXN0ZW5jZUtleSksIG4gPSB2b2lkIDAgIT09IHRoaXMuY2FjaGVTaXplQnl0ZXMgPyBMcnVQYXJhbXMud2l0aENhY2hlU2l6ZSh0aGlzLmNhY2hlU2l6ZUJ5dGVzKSA6IExydVBhcmFtcy5ERUZBVUxUO1xuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9JbmRleGVkRGJQZXJzaXN0ZW5jZSh0aGlzLnN5bmNocm9uaXplVGFicywgdCwgZS5jbGllbnRJZCwgbiwgZS5hc3luY1F1ZXVlLCBfX1BSSVZBVEVfZ2V0V2luZG93KCksIGdldERvY3VtZW50KCksIHRoaXMuc2VyaWFsaXplciwgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZSwgISF0aGlzLmZvcmNlT3duZXJzaGlwKTtcbiAgICB9XG4gICAgRHUoZSkge1xuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9NZW1vcnlTaGFyZWRDbGllbnRTdGF0ZTtcbiAgICB9XG59XG5cbi8qKlxuICogUHJvdmlkZXMgYWxsIGNvbXBvbmVudHMgbmVlZGVkIGZvciBGaXJlc3RvcmUgd2l0aCBtdWx0aS10YWIgSW5kZXhlZERCXG4gKiBwZXJzaXN0ZW5jZS5cbiAqXG4gKiBJbiB0aGUgbGVnYWN5IGNsaWVudCwgdGhpcyBwcm92aWRlciBpcyB1c2VkIHRvIHByb3ZpZGUgYm90aCBtdWx0aS10YWIgYW5kXG4gKiBub24tbXVsdGktdGFiIHBlcnNpc3RlbmNlIHNpbmNlIHdlIGNhbm5vdCB0ZWxsIGF0IGJ1aWxkIHRpbWUgd2hldGhlclxuICogYHN5bmNocm9uaXplVGFic2Agd2lsbCBiZSBlbmFibGVkLlxuICovIGNsYXNzIF9fUFJJVkFURV9NdWx0aVRhYk9mZmxpbmVDb21wb25lbnRQcm92aWRlciBleHRlbmRzIF9fUFJJVkFURV9JbmRleGVkRGJPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgc3VwZXIoZSwgdCwgLyogZm9yY2VPd25lcnNoaXA9ICovICExKSwgdGhpcy54dSA9IGUsIHRoaXMuY2FjaGVTaXplQnl0ZXMgPSB0LCB0aGlzLnN5bmNocm9uaXplVGFicyA9ICEwO1xuICAgIH1cbiAgICBhc3luYyBpbml0aWFsaXplKGUpIHtcbiAgICAgICAgYXdhaXQgc3VwZXIuaW5pdGlhbGl6ZShlKTtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMueHUuc3luY0VuZ2luZTtcbiAgICAgICAgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZSBpbnN0YW5jZW9mIF9fUFJJVkFURV9XZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUgJiYgKHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUuc3luY0VuZ2luZSA9IHtcbiAgICAgICAgICAgIENvOiBfX1BSSVZBVEVfc3luY0VuZ2luZUFwcGx5QmF0Y2hTdGF0ZS5iaW5kKG51bGwsIHQpLFxuICAgICAgICAgICAgdm86IF9fUFJJVkFURV9zeW5jRW5naW5lQXBwbHlUYXJnZXRTdGF0ZS5iaW5kKG51bGwsIHQpLFxuICAgICAgICAgICAgRm86IF9fUFJJVkFURV9zeW5jRW5naW5lQXBwbHlBY3RpdmVUYXJnZXRzQ2hhbmdlLmJpbmQobnVsbCwgdCksXG4gICAgICAgICAgICBUczogX19QUklWQVRFX3N5bmNFbmdpbmVHZXRBY3RpdmVDbGllbnRzLmJpbmQobnVsbCwgdCksXG4gICAgICAgICAgICBEbzogX19QUklWQVRFX3N5bmNFbmdpbmVTeW5jaHJvbml6ZVdpdGhDaGFuZ2VkRG9jdW1lbnRzLmJpbmQobnVsbCwgdClcbiAgICAgICAgfSwgYXdhaXQgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZS5zdGFydCgpKSwgXG4gICAgICAgIC8vIE5PVEU6IFRoaXMgd2lsbCBpbW1lZGlhdGVseSBjYWxsIHRoZSBsaXN0ZW5lciwgc28gd2UgbWFrZSBzdXJlIHRvXG4gICAgICAgIC8vIHNldCBpdCBhZnRlciBsb2NhbFN0b3JlIC8gcmVtb3RlU3RvcmUgYXJlIHN0YXJ0ZWQuXG4gICAgICAgIGF3YWl0IHRoaXMucGVyc2lzdGVuY2UuSmkoKGFzeW5jIGUgPT4ge1xuICAgICAgICAgICAgYXdhaXQgX19QUklWQVRFX3N5bmNFbmdpbmVBcHBseVByaW1hcnlTdGF0ZSh0aGlzLnh1LnN5bmNFbmdpbmUsIGUpLCB0aGlzLmdjU2NoZWR1bGVyICYmIChlICYmICF0aGlzLmdjU2NoZWR1bGVyLnN0YXJ0ZWQgPyB0aGlzLmdjU2NoZWR1bGVyLnN0YXJ0KCkgOiBlIHx8IHRoaXMuZ2NTY2hlZHVsZXIuc3RvcCgpKSwgXG4gICAgICAgICAgICB0aGlzLmluZGV4QmFja2ZpbGxlclNjaGVkdWxlciAmJiAoZSAmJiAhdGhpcy5pbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIuc3RhcnRlZCA/IHRoaXMuaW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyLnN0YXJ0KCkgOiBlIHx8IHRoaXMuaW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyLnN0b3AoKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgRHUoZSkge1xuICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2dldFdpbmRvdygpO1xuICAgICAgICBpZiAoIV9fUFJJVkFURV9XZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUudih0KSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKE4uVU5JTVBMRU1FTlRFRCwgXCJJbmRleGVkREIgcGVyc2lzdGVuY2UgaXMgb25seSBhdmFpbGFibGUgb24gcGxhdGZvcm1zIHRoYXQgc3VwcG9ydCBMb2NhbFN0b3JhZ2UuXCIpO1xuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2luZGV4ZWREYlN0b3JhZ2VQcmVmaXgoZS5kYXRhYmFzZUluZm8uZGF0YWJhc2VJZCwgZS5kYXRhYmFzZUluZm8ucGVyc2lzdGVuY2VLZXkpO1xuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9XZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUodCwgZS5hc3luY1F1ZXVlLCBuLCBlLmNsaWVudElkLCBlLmluaXRpYWxVc2VyKTtcbiAgICB9XG59XG5cbi8qKlxuICogSW5pdGlhbGl6ZXMgYW5kIHdpcmVzIHRoZSBjb21wb25lbnRzIHRoYXQgYXJlIG5lZWRlZCB0byBpbnRlcmZhY2Ugd2l0aCB0aGVcbiAqIG5ldHdvcmsuXG4gKi8gY2xhc3MgT25saW5lQ29tcG9uZW50UHJvdmlkZXIge1xuICAgIGFzeW5jIGluaXRpYWxpemUoZSwgdCkge1xuICAgICAgICB0aGlzLmxvY2FsU3RvcmUgfHwgKHRoaXMubG9jYWxTdG9yZSA9IGUubG9jYWxTdG9yZSwgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZSA9IGUuc2hhcmVkQ2xpZW50U3RhdGUsIFxuICAgICAgICB0aGlzLmRhdGFzdG9yZSA9IHRoaXMuY3JlYXRlRGF0YXN0b3JlKHQpLCB0aGlzLnJlbW90ZVN0b3JlID0gdGhpcy5jcmVhdGVSZW1vdGVTdG9yZSh0KSwgXG4gICAgICAgIHRoaXMuZXZlbnRNYW5hZ2VyID0gdGhpcy5jcmVhdGVFdmVudE1hbmFnZXIodCksIHRoaXMuc3luY0VuZ2luZSA9IHRoaXMuY3JlYXRlU3luY0VuZ2luZSh0LCBcbiAgICAgICAgLyogc3RhcnRBc1ByaW1hcnk9Ki8gIWUuc3luY2hyb25pemVUYWJzKSwgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZS5vbmxpbmVTdGF0ZUhhbmRsZXIgPSBlID0+IF9fUFJJVkFURV9zeW5jRW5naW5lQXBwbHlPbmxpbmVTdGF0ZUNoYW5nZSh0aGlzLnN5bmNFbmdpbmUsIGUsIDEgLyogT25saW5lU3RhdGVTb3VyY2UuU2hhcmVkQ2xpZW50U3RhdGUgKi8pLCBcbiAgICAgICAgdGhpcy5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIuaGFuZGxlQ3JlZGVudGlhbENoYW5nZSA9IF9fUFJJVkFURV9zeW5jRW5naW5lSGFuZGxlQ3JlZGVudGlhbENoYW5nZS5iaW5kKG51bGwsIHRoaXMuc3luY0VuZ2luZSksIFxuICAgICAgICBhd2FpdCBfX1BSSVZBVEVfcmVtb3RlU3RvcmVBcHBseVByaW1hcnlTdGF0ZSh0aGlzLnJlbW90ZVN0b3JlLCB0aGlzLnN5bmNFbmdpbmUuaXNQcmltYXJ5Q2xpZW50KSk7XG4gICAgfVxuICAgIGNyZWF0ZUV2ZW50TWFuYWdlcihlKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3RXZlbnRNYW5hZ2VyKCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfRXZlbnRNYW5hZ2VySW1wbDtcbiAgICAgICAgfSgpO1xuICAgIH1cbiAgICBjcmVhdGVEYXRhc3RvcmUoZSkge1xuICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX25ld1NlcmlhbGl6ZXIoZS5kYXRhYmFzZUluZm8uZGF0YWJhc2VJZCksIG4gPSBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3Q29ubmVjdGlvbihlKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9XZWJDaGFubmVsQ29ubmVjdGlvbihlKTtcbiAgICAgICAgfVxuICAgICAgICAvKiogUmV0dXJuIHRoZSBQbGF0Zm9ybS1zcGVjaWZpYyBjb25uZWN0aXZpdHkgbW9uaXRvci4gKi8gKGUuZGF0YWJhc2VJbmZvKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdEYXRhc3RvcmUoZSwgdCwgbiwgcikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfRGF0YXN0b3JlSW1wbChlLCB0LCBuLCByKTtcbiAgICAgICAgfShlLmF1dGhDcmVkZW50aWFscywgZS5hcHBDaGVja0NyZWRlbnRpYWxzLCBuLCB0KTtcbiAgICB9XG4gICAgY3JlYXRlUmVtb3RlU3RvcmUoZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX25ld1JlbW90ZVN0b3JlKGUsIHQsIG4sIHIsIGkpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1JlbW90ZVN0b3JlSW1wbChlLCB0LCBuLCByLCBpKTtcbiAgICAgICAgfVxuICAgICAgICAvKiogUmUtZW5hYmxlcyB0aGUgbmV0d29yay4gSWRlbXBvdGVudC4gKi8gKHRoaXMubG9jYWxTdG9yZSwgdGhpcy5kYXRhc3RvcmUsIGUuYXN5bmNRdWV1ZSwgKGUgPT4gX19QUklWQVRFX3N5bmNFbmdpbmVBcHBseU9ubGluZVN0YXRlQ2hhbmdlKHRoaXMuc3luY0VuZ2luZSwgZSwgMCAvKiBPbmxpbmVTdGF0ZVNvdXJjZS5SZW1vdGVTdG9yZSAqLykpLCBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3Q29ubmVjdGl2aXR5TW9uaXRvcigpIHtcbiAgICAgICAgICAgIHJldHVybiBfX1BSSVZBVEVfQnJvd3NlckNvbm5lY3Rpdml0eU1vbml0b3IudigpID8gbmV3IF9fUFJJVkFURV9Ccm93c2VyQ29ubmVjdGl2aXR5TW9uaXRvciA6IG5ldyBfX1BSSVZBVEVfTm9vcENvbm5lY3Rpdml0eU1vbml0b3I7XG4gICAgICAgIH0oKSk7XG4gICAgfVxuICAgIGNyZWF0ZVN5bmNFbmdpbmUoZSwgdCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX25ld1N5bmNFbmdpbmUoZSwgdCwgbiwgXG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogTWFuYWdlcyBzdGF0ZSBzeW5jaHJvbml6YXRpb24gaW4gbXVsdGktdGFiIGVudmlyb25tZW50cy5cbiAgICAgICAgciwgaSwgcywgbykge1xuICAgICAgICAgICAgY29uc3QgXyA9IG5ldyBfX1BSSVZBVEVfU3luY0VuZ2luZUltcGwoZSwgdCwgbiwgciwgaSwgcyk7XG4gICAgICAgICAgICByZXR1cm4gbyAmJiAoXy5ndSA9ICEwKSwgXztcbiAgICAgICAgfSh0aGlzLmxvY2FsU3RvcmUsIHRoaXMucmVtb3RlU3RvcmUsIHRoaXMuZXZlbnRNYW5hZ2VyLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlLCBlLmluaXRpYWxVc2VyLCBlLm1heENvbmN1cnJlbnRMaW1ib1Jlc29sdXRpb25zLCB0KTtcbiAgICB9XG4gICAgYXN5bmMgdGVybWluYXRlKCkge1xuICAgICAgICBhd2FpdCBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfcmVtb3RlU3RvcmVTaHV0ZG93bihlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICAgICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1Zyh0biwgXCJSZW1vdGVTdG9yZSBzaHV0dGluZyBkb3duLlwiKSwgdC5FYS5hZGQoNSAvKiBPZmZsaW5lQ2F1c2UuU2h1dGRvd24gKi8pLCBcbiAgICAgICAgICAgIGF3YWl0IF9fUFJJVkFURV9kaXNhYmxlTmV0d29ya0ludGVybmFsKHQpLCB0LkFhLnNodXRkb3duKCksIFxuICAgICAgICAgICAgLy8gU2V0IHRoZSBPbmxpbmVTdGF0ZSB0byBVbmtub3duIChyYXRoZXIgdGhhbiBPZmZsaW5lKSB0byBhdm9pZCBwb3RlbnRpYWxseVxuICAgICAgICAgICAgLy8gdHJpZ2dlcmluZyBzcHVyaW91cyBsaXN0ZW5lciBldmVudHMgd2l0aCBjYWNoZWQgZGF0YSwgZXRjLlxuICAgICAgICAgICAgdC5SYS5zZXQoXCJVbmtub3duXCIgLyogT25saW5lU3RhdGUuVW5rbm93biAqLyk7XG4gICAgICAgIH0odGhpcy5yZW1vdGVTdG9yZSksIHRoaXMuZGF0YXN0b3JlPy50ZXJtaW5hdGUoKSwgdGhpcy5ldmVudE1hbmFnZXI/LnRlcm1pbmF0ZSgpO1xuICAgIH1cbn1cblxuT25saW5lQ29tcG9uZW50UHJvdmlkZXIucHJvdmlkZXIgPSB7XG4gICAgYnVpbGQ6ICgpID0+IG5ldyBPbmxpbmVDb21wb25lbnRQcm92aWRlclxufTtcblxuLyoqXG4gKiBCdWlsZHMgYSBgQnl0ZVN0cmVhbVJlYWRlcmAgZnJvbSBhIFVJbnQ4QXJyYXkuXG4gKiBAcGFyYW0gc291cmNlIC0gVGhlIGRhdGEgc291cmNlIHRvIHVzZS5cbiAqIEBwYXJhbSBieXRlc1BlclJlYWQgLSBIb3cgbWFueSBieXRlcyBlYWNoIGByZWFkKClgIGZyb20gdGhlIHJldHVybmVkIHJlYWRlclxuICogICAgICAgIHdpbGwgcmVhZC5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX3RvQnl0ZVN0cmVhbVJlYWRlckhlbHBlcihlLCB0ID0gMTAyNDApIHtcbiAgICBsZXQgbiA9IDA7XG4gICAgLy8gVGhlIFR5cGVTY3JpcHQgZGVmaW5pdGlvbiBmb3IgUmVhZGFibGVTdHJlYW1SZWFkZXIgY2hhbmdlZC4gV2UgdXNlXG4gICAgLy8gYGFueWAgaGVyZSB0byBhbGxvdyB0aGlzIGNvZGUgdG8gY29tcGlsZSB3aXRoIGRpZmZlcmVudCB2ZXJzaW9ucy5cbiAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9UeXBlU2NyaXB0L2lzc3Vlcy80Mjk3MFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGFzeW5jIHJlYWQoKSB7XG4gICAgICAgICAgICBpZiAobiA8IGUuYnl0ZUxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBlLnNsaWNlKG4sIG4gKyB0KSxcbiAgICAgICAgICAgICAgICAgICAgZG9uZTogITFcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybiBuICs9IHQsIHI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGRvbmU6ICEwXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBhc3luYyBjYW5jZWwoKSB7fSxcbiAgICAgICAgcmVsZWFzZUxvY2soKSB7fSxcbiAgICAgICAgY2xvc2VkOiBQcm9taXNlLnJlc29sdmUoKVxuICAgIH07XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIE9uIHdlYiwgYSBgUmVhZGFibGVTdHJlYW1gIGlzIHdyYXBwZWQgYXJvdW5kIGJ5IGEgYEJ5dGVTdHJlYW1SZWFkZXJgLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLypcbiAqIEEgd3JhcHBlciBpbXBsZW1lbnRhdGlvbiBvZiBPYnNlcnZlcjxUPiB0aGF0IHdpbGwgZGlzcGF0Y2ggZXZlbnRzXG4gKiBhc3luY2hyb25vdXNseS4gVG8gYWxsb3cgaW1tZWRpYXRlIHNpbGVuY2luZywgYSBtdXRlIGNhbGwgaXMgYWRkZWQgd2hpY2hcbiAqIGNhdXNlcyBldmVudHMgc2NoZWR1bGVkIHRvIG5vIGxvbmdlciBiZSByYWlzZWQuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9Bc3luY09ic2VydmVyIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIgPSBlLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZW4gc2V0IHRvIHRydWUsIHdpbGwgbm90IHJhaXNlIGZ1dHVyZSBldmVudHMuIE5lY2Vzc2FyeSB0byBkZWFsIHdpdGhcbiAgICAgICAgICogYXN5bmMgZGV0YWNobWVudCBvZiBsaXN0ZW5lci5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubXV0ZWQgPSAhMTtcbiAgICB9XG4gICAgbmV4dChlKSB7XG4gICAgICAgIHRoaXMubXV0ZWQgfHwgdGhpcy5vYnNlcnZlci5uZXh0ICYmIHRoaXMuT3UodGhpcy5vYnNlcnZlci5uZXh0LCBlKTtcbiAgICB9XG4gICAgZXJyb3IoZSkge1xuICAgICAgICB0aGlzLm11dGVkIHx8ICh0aGlzLm9ic2VydmVyLmVycm9yID8gdGhpcy5PdSh0aGlzLm9ic2VydmVyLmVycm9yLCBlKSA6IF9fUFJJVkFURV9sb2dFcnJvcihcIlVuY2F1Z2h0IEVycm9yIGluIHNuYXBzaG90IGxpc3RlbmVyOlwiLCBlLnRvU3RyaW5nKCkpKTtcbiAgICB9XG4gICAgTnUoKSB7XG4gICAgICAgIHRoaXMubXV0ZWQgPSAhMDtcbiAgICB9XG4gICAgT3UoZSwgdCkge1xuICAgICAgICBzZXRUaW1lb3V0KCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm11dGVkIHx8IGUodCk7XG4gICAgICAgIH0pLCAwKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgY2xhc3MgcmVwcmVzZW50aW5nIGEgYnVuZGxlLlxuICpcbiAqIFRha2VzIGEgYnVuZGxlIHN0cmVhbSBvciBidWZmZXIsIGFuZCBwcmVzZW50cyBhYnN0cmFjdGlvbnMgdG8gcmVhZCBidW5kbGVkXG4gKiBlbGVtZW50cyBvdXQgb2YgdGhlIHVuZGVybHlpbmcgY29udGVudC5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfQnVuZGxlUmVhZGVySW1wbCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSByZWFkZXIgdG8gcmVhZCBmcm9tIHVuZGVybHlpbmcgYmluYXJ5IGJ1bmRsZSBkYXRhIHNvdXJjZS4gKi9cbiAgICBlLCB0KSB7XG4gICAgICAgIHRoaXMuQnUgPSBlLCB0aGlzLnNlcmlhbGl6ZXIgPSB0LCBcbiAgICAgICAgLyoqIENhY2hlZCBidW5kbGUgbWV0YWRhdGEuICovXG4gICAgICAgIHRoaXMubWV0YWRhdGEgPSBuZXcgX19QUklWQVRFX0RlZmVycmVkLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEludGVybmFsIGJ1ZmZlciB0byBob2xkIGJ1bmRsZSBjb250ZW50LCBhY2N1bXVsYXRpbmcgaW5jb21wbGV0ZSBlbGVtZW50XG4gICAgICAgICAqIGNvbnRlbnQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IG5ldyBVaW50OEFycmF5LCB0aGlzLkx1ID0gZnVuY3Rpb24gX19QUklWQVRFX25ld1RleHREZWNvZGVyKCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBUZXh0RGVjb2RlcihcInV0Zi04XCIpO1xuICAgICAgICB9KCksIFxuICAgICAgICAvLyBSZWFkIHRoZSBtZXRhZGF0YSAod2hpY2ggaXMgdGhlIGZpcnN0IGVsZW1lbnQpLlxuICAgICAgICB0aGlzLmt1KCkudGhlbigoZSA9PiB7XG4gICAgICAgICAgICBlICYmIGUuJGEoKSA/IHRoaXMubWV0YWRhdGEucmVzb2x2ZShlLlFhLm1ldGFkYXRhKSA6IHRoaXMubWV0YWRhdGEucmVqZWN0KG5ldyBFcnJvcihgVGhlIGZpcnN0IGVsZW1lbnQgb2YgdGhlIGJ1bmRsZSBpcyBub3QgYSBtZXRhZGF0YSwgaXQgaXNcXG4gICAgICAgICAgICAgJHtKU09OLnN0cmluZ2lmeShlPy5RYSl9YCkpO1xuICAgICAgICB9KSwgKGUgPT4gdGhpcy5tZXRhZGF0YS5yZWplY3QoZSkpKTtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkJ1LmNhbmNlbCgpO1xuICAgIH1cbiAgICBhc3luYyBnZXRNZXRhZGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWV0YWRhdGEucHJvbWlzZTtcbiAgICB9XG4gICAgYXN5bmMgYnUoKSB7XG4gICAgICAgIC8vIE1ha2VzIHN1cmUgbWV0YWRhdGEgaXMgcmVhZCBiZWZvcmUgcHJvY2VlZGluZy5cbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0TWV0YWRhdGEoKSwgdGhpcy5rdSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWFkcyBmcm9tIHRoZSBoZWFkIG9mIGludGVybmFsIGJ1ZmZlciwgYW5kIHB1bGxpbmcgbW9yZSBkYXRhIGZyb21cbiAgICAgKiB1bmRlcmx5aW5nIHN0cmVhbSBpZiBhIGNvbXBsZXRlIGVsZW1lbnQgY2Fubm90IGJlIGZvdW5kLCB1bnRpbCBhblxuICAgICAqIGVsZW1lbnQoaW5jbHVkaW5nIHRoZSBwcmVmaXhlZCBsZW5ndGggYW5kIHRoZSBKU09OIHN0cmluZykgaXMgZm91bmQuXG4gICAgICpcbiAgICAgKiBPbmNlIGEgY29tcGxldGUgZWxlbWVudCBpcyByZWFkLCBpdCBpcyBkcm9wcGVkIGZyb20gaW50ZXJuYWwgYnVmZmVyLlxuICAgICAqXG4gICAgICogUmV0dXJucyBlaXRoZXIgdGhlIGJ1bmRsZWQgZWxlbWVudCwgb3IgbnVsbCBpZiB3ZSBoYXZlIHJlYWNoZWQgdGhlIGVuZCBvZlxuICAgICAqIHRoZSBzdHJlYW0uXG4gICAgICovICAgIGFzeW5jIGt1KCkge1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgdGhpcy5xdSgpO1xuICAgICAgICBpZiAobnVsbCA9PT0gZSkgcmV0dXJuIG51bGw7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLkx1LmRlY29kZShlKSwgbiA9IE51bWJlcih0KTtcbiAgICAgICAgaXNOYU4obikgJiYgdGhpcy5RdShgbGVuZ3RoIHN0cmluZyAoJHt0fSkgaXMgbm90IHZhbGlkIG51bWJlcmApO1xuICAgICAgICBjb25zdCByID0gYXdhaXQgdGhpcy4kdShuKTtcbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfU2l6ZWRCdW5kbGVFbGVtZW50KEpTT04ucGFyc2UociksIGUubGVuZ3RoICsgbik7XG4gICAgfVxuICAgIC8qKiBGaXJzdCBpbmRleCBvZiAneycgZnJvbSB0aGUgdW5kZXJseWluZyBidWZmZXIuICovICAgIFV1KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5idWZmZXIuZmluZEluZGV4KChlID0+IGUgPT09IFwie1wiLmNoYXJDb2RlQXQoMCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVhZHMgZnJvbSB0aGUgYmVnaW5uaW5nIG9mIHRoZSBpbnRlcm5hbCBidWZmZXIsIHVudGlsIHRoZSBmaXJzdCAneycsIGFuZFxuICAgICAqIHJldHVybiB0aGUgY29udGVudC5cbiAgICAgKlxuICAgICAqIElmIHJlYWNoZWQgZW5kIG9mIHRoZSBzdHJlYW0sIHJldHVybnMgYSBudWxsLlxuICAgICAqLyAgICBhc3luYyBxdSgpIHtcbiAgICAgICAgZm9yICg7dGhpcy5VdSgpIDwgMDsgKSB7XG4gICAgICAgICAgICBpZiAoYXdhaXQgdGhpcy5LdSgpKSBicmVhaztcbiAgICAgICAgfVxuICAgICAgICAvLyBCcm9rZSBvdXQgb2YgdGhlIGxvb3AgYmVjYXVzZSB1bmRlcmx5aW5nIHN0cmVhbSBpcyBjbG9zZWQsIGFuZCB0aGVyZVxuICAgICAgICAvLyBoYXBwZW5zIHRvIGJlIG5vIG1vcmUgZGF0YSB0byBwcm9jZXNzLlxuICAgICAgICAgICAgICAgIGlmICgwID09PSB0aGlzLmJ1ZmZlci5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5VdSgpO1xuICAgICAgICAvLyBCcm9rZSBvdXQgb2YgdGhlIGxvb3AgYmVjYXVzZSB1bmRlcmx5aW5nIHN0cmVhbSBpcyBjbG9zZWQsIGJ1dCBzdGlsbFxuICAgICAgICAvLyBjYW5ub3QgZmluZCBhbiBvcGVuIGJyYWNrZXQuXG4gICAgICAgICAgICAgICAgZSA8IDAgJiYgdGhpcy5RdShcIlJlYWNoZWQgdGhlIGVuZCBvZiBidW5kbGUgd2hlbiBhIGxlbmd0aCBzdHJpbmcgaXMgZXhwZWN0ZWQuXCIpO1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5idWZmZXIuc2xpY2UoMCwgZSk7XG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgaW50ZXJuYWwgYnVmZmVyIHRvIGRyb3AgdGhlIHJlYWQgbGVuZ3RoLlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLnNsaWNlKGUpLCB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWFkcyBmcm9tIGEgc3BlY2lmaWVkIHBvc2l0aW9uIGZyb20gdGhlIGludGVybmFsIGJ1ZmZlciwgZm9yIGEgc3BlY2lmaWVkXG4gICAgICogbnVtYmVyIG9mIGJ5dGVzLCBwdWxsaW5nIG1vcmUgZGF0YSBmcm9tIHRoZSB1bmRlcmx5aW5nIHN0cmVhbSBpZiBuZWVkZWQuXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIGEgc3RyaW5nIGRlY29kZWQgZnJvbSB0aGUgcmVhZCBieXRlcy5cbiAgICAgKi8gICAgYXN5bmMgJHUoZSkge1xuICAgICAgICBmb3IgKDt0aGlzLmJ1ZmZlci5sZW5ndGggPCBlOyApIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuS3UoKSAmJiB0aGlzLlF1KFwiUmVhY2hlZCB0aGUgZW5kIG9mIGJ1bmRsZSB3aGVuIG1vcmUgaXMgZXhwZWN0ZWQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLkx1LmRlY29kZSh0aGlzLmJ1ZmZlci5zbGljZSgwLCBlKSk7XG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgaW50ZXJuYWwgYnVmZmVyIHRvIGRyb3AgdGhlIHJlYWQganNvbiBzdHJpbmcuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyID0gdGhpcy5idWZmZXIuc2xpY2UoZSksIHQ7XG4gICAgfVxuICAgIFF1KGUpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xuICAgICAgICB0aHJvdyB0aGlzLkJ1LmNhbmNlbCgpLCBuZXcgRXJyb3IoYEludmFsaWQgYnVuZGxlIGZvcm1hdDogJHtlfWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQdWxscyBtb3JlIGRhdGEgZnJvbSB1bmRlcmx5aW5nIHN0cmVhbSB0byBpbnRlcm5hbCBidWZmZXIuXG4gICAgICogUmV0dXJucyBhIGJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyIHRoZSBzdHJlYW0gaXMgZmluaXNoZWQuXG4gICAgICovICAgIGFzeW5jIEt1KCkge1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgdGhpcy5CdS5yZWFkKCk7XG4gICAgICAgIGlmICghZS5kb25lKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5idWZmZXIubGVuZ3RoICsgZS52YWx1ZS5sZW5ndGgpO1xuICAgICAgICAgICAgdC5zZXQodGhpcy5idWZmZXIpLCB0LnNldChlLnZhbHVlLCB0aGlzLmJ1ZmZlci5sZW5ndGgpLCB0aGlzLmJ1ZmZlciA9IHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGUuZG9uZTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDI1IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgY2xhc3MgdGhhdCBjYW4gcGFyc2UgYSBidW5kbGUgZm9ybSB0aGUgc3RyaW5nIHNlcmlhbGl6YXRpb24gb2YgYSBidW5kbGUuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9CdW5kbGVSZWFkZXJTeW5jSW1wbCB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLmJ1bmRsZURhdGEgPSBlLCB0aGlzLnNlcmlhbGl6ZXIgPSB0LCB0aGlzLmN1cnNvciA9IDAsIHRoaXMuZWxlbWVudHMgPSBbXTtcbiAgICAgICAgbGV0IG4gPSB0aGlzLmJ1KCk7XG4gICAgICAgIGlmICghbiB8fCAhbi4kYSgpKSB0aHJvdyBuZXcgRXJyb3IoYFRoZSBmaXJzdCBlbGVtZW50IG9mIHRoZSBidW5kbGUgaXMgbm90IGEgbWV0YWRhdGEgb2JqZWN0LCBpdCBpc1xcbiAgICAgICAgICR7SlNPTi5zdHJpbmdpZnkobj8uUWEpfWApO1xuICAgICAgICB0aGlzLm1ldGFkYXRhID0gbjtcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgbiA9IHRoaXMuYnUoKSwgbnVsbCAhPT0gbiAmJiB0aGlzLmVsZW1lbnRzLnB1c2gobik7XG4gICAgICAgIH0gd2hpbGUgKG51bGwgIT09IG4pO1xuICAgIH1cbiAgICAvKiBSZXR1cm5zIHRoZSBwYXJzZWQgbWV0YWRhdGEgb2YgdGhlIGJ1bmRsZS4gKi8gICAgZ2V0TWV0YWRhdGEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1ldGFkYXRhO1xuICAgIH1cbiAgICAvKiBSZXR1cm5zIHRoZSBEb2N1bWVudFNuYXBzaG90IG9yIE5hbWVkUXVlcnkgZWxlbWVudHMgb2YgdGhlIGJ1bmRsZS4gKi8gICAgV3UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgdGhlIG5leHQgZWxlbWVudCBvZiB0aGUgYnVuZGxlLlxuICAgICAqXG4gICAgICogQHJldHVybnMgYSBTaXplZEJ1bmRsZUVsZW1lbnQgcmVwcmVzZW50YXRpb24gb2YgdGhlIG5leHQgZWxlbWVudCBpbiB0aGUgYnVuZGxlLCBvciBudWxsIGlmXG4gICAgICogbm8gbW9yZSBlbGVtZW50cyBleGlzdC5cbiAgICAgKi8gICAgYnUoKSB7XG4gICAgICAgIGlmICh0aGlzLmN1cnNvciA9PT0gdGhpcy5idW5kbGVEYXRhLmxlbmd0aCkgcmV0dXJuIG51bGw7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnF1KCksIHQgPSB0aGlzLiR1KGUpO1xuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9TaXplZEJ1bmRsZUVsZW1lbnQoSlNPTi5wYXJzZSh0KSwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYWRzIGZyb20gYSBzcGVjaWZpZWQgcG9zaXRpb24gZnJvbSB0aGUgYnVuZGxlRGF0YSBzdHJpbmcsIGZvciBhIHNwZWNpZmllZFxuICAgICAqIG51bWJlciBvZiBieXRlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBsZW5ndGggaG93IG1hbnkgY2hhcmFjdGVycyB0byByZWFkLlxuICAgICAqIEByZXR1cm5zIGEgc3RyaW5nIHBhcnNlZCBmcm9tIHRoZSBidW5kbGUuXG4gICAgICovICAgICR1KGUpIHtcbiAgICAgICAgaWYgKHRoaXMuY3Vyc29yICsgZSA+IHRoaXMuYnVuZGxlRGF0YS5sZW5ndGgpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihOLklOVEVSTkFMLCBcIlJlYWNoZWQgdGhlIGVuZCBvZiBidW5kbGUgd2hlbiBtb3JlIGlzIGV4cGVjdGVkLlwiKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVuZGxlRGF0YS5zbGljZSh0aGlzLmN1cnNvciwgdGhpcy5jdXJzb3IgKz0gZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYWRzIGZyb20gdGhlIGN1cnJlbnQgY3Vyc29yIHVudGlsIHRoZSBmaXJzdCAneycuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyAgQSBzdHJpbmcgdG8gaW50ZWdlciByZXByZXNlbnRpb24gb2YgdGhlIHBhcnNlZCB2YWx1ZS5cbiAgICAgKiBAdGhyb3dzIEFuIHtAbGluayBFcnJvcn0gaWYgdGhlIGN1cnNvciBoYXMgcmVhY2hlZCB0aGUgZW5kIG9mIHRoZSBzdHJlYW0sIHNpbmNlIGxlbmd0aHNcbiAgICAgKiBwcmVmaXggYnVuZGxlIG9iamVjdHMuXG4gICAgICovICAgIHF1KCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5jdXJzb3I7XG4gICAgICAgIGxldCB0ID0gdGhpcy5jdXJzb3I7XG4gICAgICAgIGZvciAoO3QgPCB0aGlzLmJ1bmRsZURhdGEubGVuZ3RoOyApIHtcbiAgICAgICAgICAgIGlmIChcIntcIiA9PT0gdGhpcy5idW5kbGVEYXRhW3RdKSB7XG4gICAgICAgICAgICAgICAgaWYgKHQgPT09IGUpIHRocm93IG5ldyBFcnJvcihcIkZpcnN0IGNoYXJhY3RlciBpcyBhIGJyYWNrZXQgYW5kIG5vdCBhIG51bWJlclwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jdXJzb3IgPSB0LCBOdW1iZXIodGhpcy5idW5kbGVEYXRhLnNsaWNlKGUsIHQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHQrKztcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJSZWFjaGVkIHRoZSBlbmQgb2YgYnVuZGxlIHdoZW4gbW9yZSBpcyBleHBlY3RlZC5cIik7XG4gICAgfVxufVxuXG4vKipcbiAqICBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIEJ1bmRsZVJlYWRlciB3aXRob3V0IGV4cG9zaW5nIHRoZSBCdW5kbGVSZWFkZXJTeW5jSW1wbCBjbGFzcyB0eXBlLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBJbnRlcm5hbCB0cmFuc2FjdGlvbiBvYmplY3QgcmVzcG9uc2libGUgZm9yIGFjY3VtdWxhdGluZyB0aGUgbXV0YXRpb25zIHRvXG4gKiBwZXJmb3JtIGFuZCB0aGUgYmFzZSB2ZXJzaW9ucyBmb3IgYW55IGRvY3VtZW50cyByZWFkLlxuICovXG5jbGFzcyBUcmFuc2FjdGlvbiQyIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuZGF0YXN0b3JlID0gZSwgXG4gICAgICAgIC8vIFRoZSB2ZXJzaW9uIG9mIGVhY2ggZG9jdW1lbnQgdGhhdCB3YXMgcmVhZCBkdXJpbmcgdGhpcyB0cmFuc2FjdGlvbi5cbiAgICAgICAgdGhpcy5yZWFkVmVyc2lvbnMgPSBuZXcgTWFwLCB0aGlzLm11dGF0aW9ucyA9IFtdLCB0aGlzLmNvbW1pdHRlZCA9ICExLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgZGVmZXJyZWQgdXNhZ2UgZXJyb3IgdGhhdCBvY2N1cnJlZCBwcmV2aW91c2x5IGluIHRoaXMgdHJhbnNhY3Rpb24gdGhhdFxuICAgICAgICAgKiB3aWxsIGNhdXNlIHRoZSB0cmFuc2FjdGlvbiB0byBmYWlsIG9uY2UgaXQgYWN0dWFsbHkgY29tbWl0cy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubGFzdFRyYW5zYWN0aW9uRXJyb3IgPSBudWxsLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCBvZiBkb2N1bWVudHMgdGhhdCBoYXZlIGJlZW4gd3JpdHRlbiBpbiB0aGUgdHJhbnNhY3Rpb24uXG4gICAgICAgICAqXG4gICAgICAgICAqIFdoZW4gdGhlcmUncyBtb3JlIHRoYW4gb25lIHdyaXRlIHRvIHRoZSBzYW1lIGtleSBpbiBhIHRyYW5zYWN0aW9uLCBhbnlcbiAgICAgICAgICogd3JpdGVzIGFmdGVyIHRoZSBmaXJzdCBhcmUgaGFuZGxlZCBkaWZmZXJlbnRseS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMud3JpdHRlbkRvY3MgPSBuZXcgU2V0O1xuICAgIH1cbiAgICBhc3luYyBsb29rdXAoZSkge1xuICAgICAgICBpZiAodGhpcy5lbnN1cmVDb21taXROb3RDYWxsZWQoKSwgdGhpcy5tdXRhdGlvbnMubGVuZ3RoID4gMCkgdGhyb3cgdGhpcy5sYXN0VHJhbnNhY3Rpb25FcnJvciA9IG5ldyBGaXJlc3RvcmVFcnJvcihOLklOVkFMSURfQVJHVU1FTlQsIFwiRmlyZXN0b3JlIHRyYW5zYWN0aW9ucyByZXF1aXJlIGFsbCByZWFkcyB0byBiZSBleGVjdXRlZCBiZWZvcmUgYWxsIHdyaXRlcy5cIiksIFxuICAgICAgICB0aGlzLmxhc3RUcmFuc2FjdGlvbkVycm9yO1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2ludm9rZUJhdGNoR2V0RG9jdW1lbnRzUnBjKGUsIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCByID0ge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50czogdC5tYXAoKGUgPT4gX19QUklWQVRFX3RvTmFtZShuLnNlcmlhbGl6ZXIsIGUpKSlcbiAgICAgICAgICAgIH0sIGkgPSBhd2FpdCBuLkhvKFwiQmF0Y2hHZXREb2N1bWVudHNcIiwgbi5zZXJpYWxpemVyLmRhdGFiYXNlSWQsIFJlc291cmNlUGF0aC5lbXB0eVBhdGgoKSwgciwgdC5sZW5ndGgpLCBzID0gbmV3IE1hcDtcbiAgICAgICAgICAgIGkuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9mcm9tQmF0Y2hHZXREb2N1bWVudHNSZXNwb25zZShuLnNlcmlhbGl6ZXIsIGUpO1xuICAgICAgICAgICAgICAgIHMuc2V0KHQua2V5LnRvU3RyaW5nKCksIHQpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgY29uc3QgbyA9IFtdO1xuICAgICAgICAgICAgcmV0dXJuIHQuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IHMuZ2V0KGUudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQoISF0LCA1NTIzNCwge1xuICAgICAgICAgICAgICAgICAgICBrZXk6IGVcbiAgICAgICAgICAgICAgICB9KSwgby5wdXNoKHQpO1xuICAgICAgICAgICAgfSkpLCBvO1xuICAgICAgICB9KHRoaXMuZGF0YXN0b3JlLCBlKTtcbiAgICAgICAgcmV0dXJuIHQuZm9yRWFjaCgoZSA9PiB0aGlzLnJlY29yZFZlcnNpb24oZSkpKSwgdDtcbiAgICB9XG4gICAgc2V0KGUsIHQpIHtcbiAgICAgICAgdGhpcy53cml0ZSh0LnRvTXV0YXRpb24oZSwgdGhpcy5wcmVjb25kaXRpb24oZSkpKSwgdGhpcy53cml0dGVuRG9jcy5hZGQoZS50b1N0cmluZygpKTtcbiAgICB9XG4gICAgdXBkYXRlKGUsIHQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMud3JpdGUodC50b011dGF0aW9uKGUsIHRoaXMucHJlY29uZGl0aW9uRm9yVXBkYXRlKGUpKSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRoaXMubGFzdFRyYW5zYWN0aW9uRXJyb3IgPSBlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMud3JpdHRlbkRvY3MuYWRkKGUudG9TdHJpbmcoKSk7XG4gICAgfVxuICAgIGRlbGV0ZShlKSB7XG4gICAgICAgIHRoaXMud3JpdGUobmV3IF9fUFJJVkFURV9EZWxldGVNdXRhdGlvbihlLCB0aGlzLnByZWNvbmRpdGlvbihlKSkpLCB0aGlzLndyaXR0ZW5Eb2NzLmFkZChlLnRvU3RyaW5nKCkpO1xuICAgIH1cbiAgICBhc3luYyBjb21taXQoKSB7XG4gICAgICAgIGlmICh0aGlzLmVuc3VyZUNvbW1pdE5vdENhbGxlZCgpLCB0aGlzLmxhc3RUcmFuc2FjdGlvbkVycm9yKSB0aHJvdyB0aGlzLmxhc3RUcmFuc2FjdGlvbkVycm9yO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5yZWFkVmVyc2lvbnM7XG4gICAgICAgIC8vIEZvciBlYWNoIG11dGF0aW9uLCBub3RlIHRoYXQgdGhlIGRvYyB3YXMgd3JpdHRlbi5cbiAgICAgICAgICAgICAgICB0aGlzLm11dGF0aW9ucy5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGUuZGVsZXRlKHQua2V5LnRvU3RyaW5nKCkpO1xuICAgICAgICB9KSksIFxuICAgICAgICAvLyBGb3IgZWFjaCBkb2N1bWVudCB0aGF0IHdhcyByZWFkIGJ1dCBub3Qgd3JpdHRlbiB0bywgd2Ugd2FudCB0byBwZXJmb3JtXG4gICAgICAgIC8vIGEgYHZlcmlmeWAgb3BlcmF0aW9uLlxuICAgICAgICBlLmZvckVhY2goKChlLCB0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gRG9jdW1lbnRLZXkuZnJvbVBhdGgodCk7XG4gICAgICAgICAgICB0aGlzLm11dGF0aW9ucy5wdXNoKG5ldyBfX1BSSVZBVEVfVmVyaWZ5TXV0YXRpb24obiwgdGhpcy5wcmVjb25kaXRpb24obikpKTtcbiAgICAgICAgfSkpLCBhd2FpdCBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfaW52b2tlQ29tbWl0UnBjKGUsIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCByID0ge1xuICAgICAgICAgICAgICAgIHdyaXRlczogdC5tYXAoKGUgPT4gdG9NdXRhdGlvbihuLnNlcmlhbGl6ZXIsIGUpKSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBhd2FpdCBuLkdvKFwiQ29tbWl0XCIsIG4uc2VyaWFsaXplci5kYXRhYmFzZUlkLCBSZXNvdXJjZVBhdGguZW1wdHlQYXRoKCksIHIpO1xuICAgICAgICB9KHRoaXMuZGF0YXN0b3JlLCB0aGlzLm11dGF0aW9ucyksIHRoaXMuY29tbWl0dGVkID0gITA7XG4gICAgfVxuICAgIHJlY29yZFZlcnNpb24oZSkge1xuICAgICAgICBsZXQgdDtcbiAgICAgICAgaWYgKGUuaXNGb3VuZERvY3VtZW50KCkpIHQgPSBlLnZlcnNpb247IGVsc2Uge1xuICAgICAgICAgICAgaWYgKCFlLmlzTm9Eb2N1bWVudCgpKSB0aHJvdyBmYWlsKDUwNDk4LCB7XG4gICAgICAgICAgICAgICAgR3U6IGUuY29uc3RydWN0b3IubmFtZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBSZXByZXNlbnQgYSBkZWxldGVkIGRvYyB1c2luZyBTbmFwc2hvdFZlcnNpb24ubWluKCkuXG4gICAgICAgICAgICB0ID0gU25hcHNob3RWZXJzaW9uLm1pbigpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnJlYWRWZXJzaW9ucy5nZXQoZS5rZXkudG9TdHJpbmcoKSk7XG4gICAgICAgIGlmIChuKSB7XG4gICAgICAgICAgICBpZiAoIXQuaXNFcXVhbChuKSkgXG4gICAgICAgICAgICAvLyBUaGlzIHRyYW5zYWN0aW9uIHdpbGwgZmFpbCBubyBtYXR0ZXIgd2hhdC5cbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihOLkFCT1JURUQsIFwiRG9jdW1lbnQgdmVyc2lvbiBjaGFuZ2VkIGJldHdlZW4gdHdvIHJlYWRzLlwiKTtcbiAgICAgICAgfSBlbHNlIHRoaXMucmVhZFZlcnNpb25zLnNldChlLmtleS50b1N0cmluZygpLCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdmVyc2lvbiBvZiB0aGlzIGRvY3VtZW50IHdoZW4gaXQgd2FzIHJlYWQgaW4gdGhpcyB0cmFuc2FjdGlvbixcbiAgICAgKiBhcyBhIHByZWNvbmRpdGlvbiwgb3Igbm8gcHJlY29uZGl0aW9uIGlmIGl0IHdhcyBub3QgcmVhZC5cbiAgICAgKi8gICAgcHJlY29uZGl0aW9uKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMucmVhZFZlcnNpb25zLmdldChlLnRvU3RyaW5nKCkpO1xuICAgICAgICByZXR1cm4gIXRoaXMud3JpdHRlbkRvY3MuaGFzKGUudG9TdHJpbmcoKSkgJiYgdCA/IHQuaXNFcXVhbChTbmFwc2hvdFZlcnNpb24ubWluKCkpID8gUHJlY29uZGl0aW9uLmV4aXN0cyghMSkgOiBQcmVjb25kaXRpb24udXBkYXRlVGltZSh0KSA6IFByZWNvbmRpdGlvbi5ub25lKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHByZWNvbmRpdGlvbiBmb3IgYSBkb2N1bWVudCBpZiB0aGUgb3BlcmF0aW9uIGlzIGFuIHVwZGF0ZS5cbiAgICAgKi8gICAgcHJlY29uZGl0aW9uRm9yVXBkYXRlKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMucmVhZFZlcnNpb25zLmdldChlLnRvU3RyaW5nKCkpO1xuICAgICAgICAvLyBUaGUgZmlyc3QgdGltZSBhIGRvY3VtZW50IGlzIHdyaXR0ZW4sIHdlIHdhbnQgdG8gdGFrZSBpbnRvIGFjY291bnQgdGhlXG4gICAgICAgIC8vIHJlYWQgdGltZSBhbmQgZXhpc3RlbmNlXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLndyaXR0ZW5Eb2NzLmhhcyhlLnRvU3RyaW5nKCkpICYmIHQpIHtcbiAgICAgICAgICAgIGlmICh0LmlzRXF1YWwoU25hcHNob3RWZXJzaW9uLm1pbigpKSkgXG4gICAgICAgICAgICAvLyBUaGUgZG9jdW1lbnQgZG9lc24ndCBleGlzdCwgc28gZmFpbCB0aGUgdHJhbnNhY3Rpb24uXG4gICAgICAgICAgICAvLyBUaGlzIGhhcyB0byBiZSB2YWxpZGF0ZWQgbG9jYWxseSBiZWNhdXNlIHlvdSBjYW4ndCBzZW5kIGFcbiAgICAgICAgICAgIC8vIHByZWNvbmRpdGlvbiB0aGF0IGEgZG9jdW1lbnQgZG9lcyBub3QgZXhpc3Qgd2l0aG91dCBjaGFuZ2luZyB0aGVcbiAgICAgICAgICAgIC8vIHNlbWFudGljcyBvZiB0aGUgYmFja2VuZCB3cml0ZSB0byBiZSBhbiBpbnNlcnQuIFRoaXMgaXMgdGhlIHJldmVyc2VcbiAgICAgICAgICAgIC8vIG9mIHdoYXQgd2Ugd2FudCwgc2luY2Ugd2Ugd2FudCB0byBhc3NlcnQgdGhhdCB0aGUgZG9jdW1lbnQgZG9lc24ndFxuICAgICAgICAgICAgLy8gZXhpc3QgYnV0IHRoZW4gc2VuZCB0aGUgdXBkYXRlIGFuZCBoYXZlIGl0IGZhaWwuIFNpbmNlIHdlIGNhbid0XG4gICAgICAgICAgICAvLyBleHByZXNzIHRoYXQgdG8gdGhlIGJhY2tlbmQsIHdlIGhhdmUgdG8gdmFsaWRhdGUgbG9jYWxseS5cbiAgICAgICAgICAgIC8vIE5vdGU6IHRoaXMgY2FuIGNoYW5nZSBvbmNlIHdlIGNhbiBzZW5kIHNlcGFyYXRlIHZlcmlmeSB3cml0ZXMgaW4gdGhlXG4gICAgICAgICAgICAvLyB0cmFuc2FjdGlvbi5cbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihOLklOVkFMSURfQVJHVU1FTlQsIFwiQ2FuJ3QgdXBkYXRlIGEgZG9jdW1lbnQgdGhhdCBkb2Vzbid0IGV4aXN0LlwiKTtcbiAgICAgICAgICAgIC8vIERvY3VtZW50IGV4aXN0cywgYmFzZSBwcmVjb25kaXRpb24gb24gZG9jdW1lbnQgdXBkYXRlIHRpbWUuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJlY29uZGl0aW9uLnVwZGF0ZVRpbWUodCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRG9jdW1lbnQgd2FzIG5vdCByZWFkLCBzbyB3ZSBqdXN0IHVzZSB0aGUgcHJlY29uZGl0aW9ucyBmb3IgYSBibGluZFxuICAgICAgICAvLyB1cGRhdGUuXG4gICAgICAgIHJldHVybiBQcmVjb25kaXRpb24uZXhpc3RzKCEwKTtcbiAgICB9XG4gICAgd3JpdGUoZSkge1xuICAgICAgICB0aGlzLmVuc3VyZUNvbW1pdE5vdENhbGxlZCgpLCB0aGlzLm11dGF0aW9ucy5wdXNoKGUpO1xuICAgIH1cbiAgICBlbnN1cmVDb21taXROb3RDYWxsZWQoKSB7fVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUcmFuc2FjdGlvblJ1bm5lciBlbmNhcHN1bGF0ZXMgdGhlIGxvZ2ljIG5lZWRlZCB0byBydW4gYW5kIHJldHJ5IHRyYW5zYWN0aW9uc1xuICogd2l0aCBiYWNrb2ZmLlxuICovIGNsYXNzIF9fUFJJVkFURV9UcmFuc2FjdGlvblJ1bm5lciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgciwgaSkge1xuICAgICAgICB0aGlzLmFzeW5jUXVldWUgPSBlLCB0aGlzLmRhdGFzdG9yZSA9IHQsIHRoaXMub3B0aW9ucyA9IG4sIHRoaXMudXBkYXRlRnVuY3Rpb24gPSByLCBcbiAgICAgICAgdGhpcy5kZWZlcnJlZCA9IGksIHRoaXMuenUgPSBuLm1heEF0dGVtcHRzLCB0aGlzLk1fID0gbmV3IF9fUFJJVkFURV9FeHBvbmVudGlhbEJhY2tvZmYodGhpcy5hc3luY1F1ZXVlLCBcInRyYW5zYWN0aW9uX3JldHJ5XCIgLyogVGltZXJJZC5UcmFuc2FjdGlvblJldHJ5ICovKTtcbiAgICB9XG4gICAgLyoqIFJ1bnMgdGhlIHRyYW5zYWN0aW9uIGFuZCBzZXRzIHRoZSByZXN1bHQgb24gZGVmZXJyZWQuICovICAgIGp1KCkge1xuICAgICAgICB0aGlzLnp1IC09IDEsIHRoaXMuSnUoKTtcbiAgICB9XG4gICAgSnUoKSB7XG4gICAgICAgIHRoaXMuTV8ucF8oKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgVHJhbnNhY3Rpb24kMih0aGlzLmRhdGFzdG9yZSksIHQgPSB0aGlzLkh1KGUpO1xuICAgICAgICAgICAgdCAmJiB0LnRoZW4oKHQgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiBlLmNvbW1pdCgpLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWZlcnJlZC5yZXNvbHZlKHQpO1xuICAgICAgICAgICAgICAgIH0pKS5jYXRjaCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuWXUoZSk7XG4gICAgICAgICAgICAgICAgfSkpKSk7XG4gICAgICAgICAgICB9KSkuY2F0Y2goKGUgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuWXUoZSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgSHUoZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMudXBkYXRlRnVuY3Rpb24oZSk7XG4gICAgICAgICAgICByZXR1cm4gIV9fUFJJVkFURV9pc051bGxPclVuZGVmaW5lZCh0KSAmJiB0LmNhdGNoICYmIHQudGhlbiA/IHQgOiAodGhpcy5kZWZlcnJlZC5yZWplY3QoRXJyb3IoXCJUcmFuc2FjdGlvbiBjYWxsYmFjayBtdXN0IHJldHVybiBhIFByb21pc2VcIikpLCBcbiAgICAgICAgICAgIG51bGwpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBEbyBub3QgcmV0cnkgZXJyb3JzIHRocm93biBieSB1c2VyIHByb3ZpZGVkIHVwZGF0ZUZ1bmN0aW9uLlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVmZXJyZWQucmVqZWN0KGUpLCBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIFl1KGUpIHtcbiAgICAgICAgdGhpcy56dSA+IDAgJiYgdGhpcy5adShlKSA/ICh0aGlzLnp1IC09IDEsIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiAodGhpcy5KdSgpLCBcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkpKSkpIDogdGhpcy5kZWZlcnJlZC5yZWplY3QoZSk7XG4gICAgfVxuICAgIFp1KGUpIHtcbiAgICAgICAgaWYgKFwiRmlyZWJhc2VFcnJvclwiID09PSBlPy5uYW1lKSB7XG4gICAgICAgICAgICAvLyBJbiB0cmFuc2FjdGlvbnMsIHRoZSBiYWNrZW5kIHdpbGwgZmFpbCBvdXRkYXRlZCByZWFkcyB3aXRoIEZBSUxFRF9QUkVDT05ESVRJT04gYW5kXG4gICAgICAgICAgICAvLyBub24tbWF0Y2hpbmcgZG9jdW1lbnQgdmVyc2lvbnMgd2l0aCBBQk9SVEVELiBUaGVzZSBlcnJvcnMgc2hvdWxkIGJlIHJldHJpZWQuXG4gICAgICAgICAgICBjb25zdCB0ID0gZS5jb2RlO1xuICAgICAgICAgICAgcmV0dXJuIFwiYWJvcnRlZFwiID09PSB0IHx8IFwiZmFpbGVkLXByZWNvbmRpdGlvblwiID09PSB0IHx8IFwiYWxyZWFkeS1leGlzdHNcIiA9PT0gdCB8fCAhX19QUklWQVRFX2lzUGVybWFuZW50RXJyb3IodCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3Qgb24gPSBcIkZpcmVzdG9yZUNsaWVudFwiO1xuXG4vKipcbiAqIEZpcmVzdG9yZUNsaWVudCBpcyBhIHRvcC1sZXZlbCBjbGFzcyB0aGF0IGNvbnN0cnVjdHMgYW5kIG93bnMgYWxsIG9mIHRoZSAvL1xuICogcGllY2VzIG9mIHRoZSBjbGllbnQgU0RLIGFyY2hpdGVjdHVyZS4gSXQgaXMgcmVzcG9uc2libGUgZm9yIGNyZWF0aW5nIHRoZSAvL1xuICogYXN5bmMgcXVldWUgdGhhdCBpcyBzaGFyZWQgYnkgYWxsIG9mIHRoZSBvdGhlciBjb21wb25lbnRzIGluIHRoZSBzeXN0ZW0uIC8vXG4gKi9cbmNsYXNzIEZpcmVzdG9yZUNsaWVudCB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgXG4gICAgLyoqXG4gICAgICogQXN5bmNocm9ub3VzIHF1ZXVlIHJlc3BvbnNpYmxlIGZvciBhbGwgb2Ygb3VyIGludGVybmFsIHByb2Nlc3NpbmcuIFdoZW5cbiAgICAgKiB3ZSBnZXQgaW5jb21pbmcgd29yayBmcm9tIHRoZSB1c2VyICh2aWEgcHVibGljIEFQSSkgb3IgdGhlIG5ldHdvcmtcbiAgICAgKiAoaW5jb21pbmcgR1JQQyBtZXNzYWdlcyksIHdlIHNob3VsZCBhbHdheXMgc2NoZWR1bGUgb250byB0aGlzIHF1ZXVlLlxuICAgICAqIFRoaXMgZW5zdXJlcyBhbGwgb2Ygb3VyIHdvcmsgaXMgcHJvcGVybHkgc2VyaWFsaXplZCAoZS5nLiB3ZSBkb24ndFxuICAgICAqIHN0YXJ0IHByb2Nlc3NpbmcgYSBuZXcgb3BlcmF0aW9uIHdoaWxlIHRoZSBwcmV2aW91cyBvbmUgaXMgd2FpdGluZyBmb3JcbiAgICAgKiBhbiBhc3luYyBJL08gdG8gY29tcGxldGUpLlxuICAgICAqL1xuICAgIG4sIHIsIGkpIHtcbiAgICAgICAgdGhpcy5hdXRoQ3JlZGVudGlhbHMgPSBlLCB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMgPSB0LCB0aGlzLmFzeW5jUXVldWUgPSBuLCB0aGlzLmRhdGFiYXNlSW5mbyA9IHIsIFxuICAgICAgICB0aGlzLnVzZXIgPSBVc2VyLlVOQVVUSEVOVElDQVRFRCwgdGhpcy5jbGllbnRJZCA9IF9fUFJJVkFURV9BdXRvSWQubmV3SWQoKSwgdGhpcy5hdXRoQ3JlZGVudGlhbExpc3RlbmVyID0gKCkgPT4gUHJvbWlzZS5yZXNvbHZlKCksIFxuICAgICAgICB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbExpc3RlbmVyID0gKCkgPT4gUHJvbWlzZS5yZXNvbHZlKCksIHRoaXMuX3VuaW5pdGlhbGl6ZWRDb21wb25lbnRzUHJvdmlkZXIgPSBpLCBcbiAgICAgICAgdGhpcy5hdXRoQ3JlZGVudGlhbHMuc3RhcnQobiwgKGFzeW5jIGUgPT4ge1xuICAgICAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKG9uLCBcIlJlY2VpdmVkIHVzZXI9XCIsIGUudWlkKSwgYXdhaXQgdGhpcy5hdXRoQ3JlZGVudGlhbExpc3RlbmVyKGUpLCBcbiAgICAgICAgICAgIHRoaXMudXNlciA9IGU7XG4gICAgICAgIH0pKSwgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzLnN0YXJ0KG4sIChlID0+IChfX1BSSVZBVEVfbG9nRGVidWcob24sIFwiUmVjZWl2ZWQgbmV3IGFwcCBjaGVjayB0b2tlbj1cIiwgZSksIFxuICAgICAgICB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbExpc3RlbmVyKGUsIHRoaXMudXNlcikpKSk7XG4gICAgfVxuICAgIGdldCBjb25maWd1cmF0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYXN5bmNRdWV1ZTogdGhpcy5hc3luY1F1ZXVlLFxuICAgICAgICAgICAgZGF0YWJhc2VJbmZvOiB0aGlzLmRhdGFiYXNlSW5mbyxcbiAgICAgICAgICAgIGNsaWVudElkOiB0aGlzLmNsaWVudElkLFxuICAgICAgICAgICAgYXV0aENyZWRlbnRpYWxzOiB0aGlzLmF1dGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgIGFwcENoZWNrQ3JlZGVudGlhbHM6IHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscyxcbiAgICAgICAgICAgIGluaXRpYWxVc2VyOiB0aGlzLnVzZXIsXG4gICAgICAgICAgICBtYXhDb25jdXJyZW50TGltYm9SZXNvbHV0aW9uczogMTAwXG4gICAgICAgIH07XG4gICAgfVxuICAgIHNldENyZWRlbnRpYWxDaGFuZ2VMaXN0ZW5lcihlKSB7XG4gICAgICAgIHRoaXMuYXV0aENyZWRlbnRpYWxMaXN0ZW5lciA9IGU7XG4gICAgfVxuICAgIHNldEFwcENoZWNrVG9rZW5DaGFuZ2VMaXN0ZW5lcihlKSB7XG4gICAgICAgIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFsTGlzdGVuZXIgPSBlO1xuICAgIH1cbiAgICB0ZXJtaW5hdGUoKSB7XG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZS5lbnRlclJlc3RyaWN0ZWRNb2RlKCk7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgX19QUklWQVRFX0RlZmVycmVkO1xuICAgICAgICByZXR1cm4gdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXRFdmVuV2hpbGVSZXN0cmljdGVkKChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMuX29ubGluZUNvbXBvbmVudHMgJiYgYXdhaXQgdGhpcy5fb25saW5lQ29tcG9uZW50cy50ZXJtaW5hdGUoKSwgdGhpcy5fb2ZmbGluZUNvbXBvbmVudHMgJiYgYXdhaXQgdGhpcy5fb2ZmbGluZUNvbXBvbmVudHMudGVybWluYXRlKCksIFxuICAgICAgICAgICAgICAgIC8vIFRoZSBjcmVkZW50aWFscyBwcm92aWRlciBtdXN0IGJlIHRlcm1pbmF0ZWQgYWZ0ZXIgc2h1dHRpbmcgZG93biB0aGVcbiAgICAgICAgICAgICAgICAvLyBSZW1vdGVTdG9yZSBhcyBpdCB3aWxsIHByZXZlbnQgdGhlIFJlbW90ZVN0b3JlIGZyb20gcmV0cmlldmluZyBhdXRoXG4gICAgICAgICAgICAgICAgLy8gdG9rZW5zLlxuICAgICAgICAgICAgICAgIHRoaXMuYXV0aENyZWRlbnRpYWxzLnNodXRkb3duKCksIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscy5zaHV0ZG93bigpLCBlLnJlc29sdmUoKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX3dyYXBJblVzZXJFcnJvcklmUmVjb3ZlcmFibGUodCwgXCJGYWlsZWQgdG8gc2h1dGRvd24gcGVyc2lzdGVuY2VcIik7XG4gICAgICAgICAgICAgICAgZS5yZWplY3Qobik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSwgZS5wcm9taXNlO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3NldE9mZmxpbmVDb21wb25lbnRQcm92aWRlcihlLCB0KSB7XG4gICAgZS5hc3luY1F1ZXVlLnZlcmlmeU9wZXJhdGlvbkluUHJvZ3Jlc3MoKSwgX19QUklWQVRFX2xvZ0RlYnVnKG9uLCBcIkluaXRpYWxpemluZyBPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXJcIik7XG4gICAgY29uc3QgbiA9IGUuY29uZmlndXJhdGlvbjtcbiAgICBhd2FpdCB0LmluaXRpYWxpemUobik7XG4gICAgbGV0IHIgPSBuLmluaXRpYWxVc2VyO1xuICAgIGUuc2V0Q3JlZGVudGlhbENoYW5nZUxpc3RlbmVyKChhc3luYyBlID0+IHtcbiAgICAgICAgci5pc0VxdWFsKGUpIHx8IChhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZUhhbmRsZVVzZXJDaGFuZ2UodC5sb2NhbFN0b3JlLCBlKSwgciA9IGUpO1xuICAgIH0pKSwgXG4gICAgLy8gV2hlbiBhIHVzZXIgY2FsbHMgY2xlYXJQZXJzaXN0ZW5jZSgpIGluIG9uZSBjbGllbnQsIGFsbCBvdGhlciBjbGllbnRzXG4gICAgLy8gbmVlZCB0byBiZSB0ZXJtaW5hdGVkIHRvIGFsbG93IHRoZSBkZWxldGUgdG8gc3VjY2VlZC5cbiAgICB0LnBlcnNpc3RlbmNlLnNldERhdGFiYXNlRGVsZXRlZExpc3RlbmVyKCgoKSA9PiBlLnRlcm1pbmF0ZSgpKSksIGUuX29mZmxpbmVDb21wb25lbnRzID0gdDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3NldE9ubGluZUNvbXBvbmVudFByb3ZpZGVyKGUsIHQpIHtcbiAgICBlLmFzeW5jUXVldWUudmVyaWZ5T3BlcmF0aW9uSW5Qcm9ncmVzcygpO1xuICAgIGNvbnN0IG4gPSBhd2FpdCBfX1BSSVZBVEVfZW5zdXJlT2ZmbGluZUNvbXBvbmVudHMoZSk7XG4gICAgX19QUklWQVRFX2xvZ0RlYnVnKG9uLCBcIkluaXRpYWxpemluZyBPbmxpbmVDb21wb25lbnRQcm92aWRlclwiKSwgYXdhaXQgdC5pbml0aWFsaXplKG4sIGUuY29uZmlndXJhdGlvbiksIFxuICAgIC8vIFRoZSBDcmVkZW50aWFsQ2hhbmdlTGlzdGVuZXIgb2YgdGhlIG9ubGluZSBjb21wb25lbnQgcHJvdmlkZXIgdGFrZXNcbiAgICAvLyBwcmVjZWRlbmNlIG92ZXIgdGhlIG9mZmxpbmUgY29tcG9uZW50IHByb3ZpZGVyLlxuICAgIGUuc2V0Q3JlZGVudGlhbENoYW5nZUxpc3RlbmVyKChlID0+IF9fUFJJVkFURV9yZW1vdGVTdG9yZUhhbmRsZUNyZWRlbnRpYWxDaGFuZ2UodC5yZW1vdGVTdG9yZSwgZSkpKSwgXG4gICAgZS5zZXRBcHBDaGVja1Rva2VuQ2hhbmdlTGlzdGVuZXIoKChlLCBuKSA9PiBfX1BSSVZBVEVfcmVtb3RlU3RvcmVIYW5kbGVDcmVkZW50aWFsQ2hhbmdlKHQucmVtb3RlU3RvcmUsIG4pKSksIFxuICAgIGUuX29ubGluZUNvbXBvbmVudHMgPSB0O1xufVxuXG4vKipcbiAqIERlY2lkZXMgd2hldGhlciB0aGUgcHJvdmlkZWQgZXJyb3IgYWxsb3dzIHVzIHRvIGdyYWNlZnVsbHkgZGlzYWJsZVxuICogcGVyc2lzdGVuY2UgKGFzIG9wcG9zZWQgdG8gY3Jhc2hpbmcgdGhlIGNsaWVudCkuXG4gKi8gYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2Vuc3VyZU9mZmxpbmVDb21wb25lbnRzKGUpIHtcbiAgICBpZiAoIWUuX29mZmxpbmVDb21wb25lbnRzKSBpZiAoZS5fdW5pbml0aWFsaXplZENvbXBvbmVudHNQcm92aWRlcikge1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcob24sIFwiVXNpbmcgdXNlciBwcm92aWRlZCBPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXJcIik7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBfX1BSSVZBVEVfc2V0T2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyKGUsIGUuX3VuaW5pdGlhbGl6ZWRDb21wb25lbnRzUHJvdmlkZXIuX29mZmxpbmUpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdDtcbiAgICAgICAgICAgIGlmICghZnVuY3Rpb24gX19QUklWQVRFX2NhbkZhbGxiYWNrRnJvbUluZGV4ZWREYkVycm9yKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJGaXJlYmFzZUVycm9yXCIgPT09IGUubmFtZSA/IGUuY29kZSA9PT0gTi5GQUlMRURfUFJFQ09ORElUSU9OIHx8IGUuY29kZSA9PT0gTi5VTklNUExFTUVOVEVEIDogIShcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBET01FeGNlcHRpb24gJiYgZSBpbnN0YW5jZW9mIERPTUV4Y2VwdGlvbikgfHwgXG4gICAgICAgICAgICAgICAgLy8gV2hlbiB0aGUgYnJvd3NlciBpcyBvdXQgb2YgcXVvdGEgd2UgY291bGQgZ2V0IGVpdGhlciBxdW90YSBleGNlZWRlZFxuICAgICAgICAgICAgICAgIC8vIG9yIGFuIGFib3J0ZWQgZXJyb3IgZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIGVycm9yIGhhcHBlbmVkIGR1cmluZ1xuICAgICAgICAgICAgICAgIC8vIHNjaGVtYSBtaWdyYXRpb24uXG4gICAgICAgICAgICAgICAgMjIgPT09IGUuY29kZSB8fCAyMCA9PT0gZS5jb2RlIHx8IFxuICAgICAgICAgICAgICAgIC8vIEZpcmVmb3ggUHJpdmF0ZSBCcm93c2luZyBtb2RlIGRpc2FibGVzIEluZGV4ZWREYiBhbmQgcmV0dXJuc1xuICAgICAgICAgICAgICAgIC8vIElOVkFMSURfU1RBVEUgZm9yIGFueSB1c2FnZS5cbiAgICAgICAgICAgICAgICAxMSA9PT0gZS5jb2RlO1xuICAgICAgICAgICAgfShuKSkgdGhyb3cgbjtcbiAgICAgICAgICAgIF9fUFJJVkFURV9sb2dXYXJuKFwiRXJyb3IgdXNpbmcgdXNlciBwcm92aWRlZCBjYWNoZS4gRmFsbGluZyBiYWNrIHRvIG1lbW9yeSBjYWNoZTogXCIgKyBuKSwgXG4gICAgICAgICAgICBhd2FpdCBfX1BSSVZBVEVfc2V0T2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyKGUsIG5ldyBfX1BSSVZBVEVfTWVtb3J5T2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSBfX1BSSVZBVEVfbG9nRGVidWcob24sIFwiVXNpbmcgZGVmYXVsdCBPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXJcIiksIGF3YWl0IF9fUFJJVkFURV9zZXRPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIoZSwgbmV3IF9fUFJJVkFURV9McnVHY01lbW9yeU9mZmxpbmVDb21wb25lbnRQcm92aWRlcih2b2lkIDApKTtcbiAgICByZXR1cm4gZS5fb2ZmbGluZUNvbXBvbmVudHM7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9lbnN1cmVPbmxpbmVDb21wb25lbnRzKGUpIHtcbiAgICByZXR1cm4gZS5fb25saW5lQ29tcG9uZW50cyB8fCAoZS5fdW5pbml0aWFsaXplZENvbXBvbmVudHNQcm92aWRlciA/IChfX1BSSVZBVEVfbG9nRGVidWcob24sIFwiVXNpbmcgdXNlciBwcm92aWRlZCBPbmxpbmVDb21wb25lbnRQcm92aWRlclwiKSwgXG4gICAgYXdhaXQgX19QUklWQVRFX3NldE9ubGluZUNvbXBvbmVudFByb3ZpZGVyKGUsIGUuX3VuaW5pdGlhbGl6ZWRDb21wb25lbnRzUHJvdmlkZXIuX29ubGluZSkpIDogKF9fUFJJVkFURV9sb2dEZWJ1ZyhvbiwgXCJVc2luZyBkZWZhdWx0IE9ubGluZUNvbXBvbmVudFByb3ZpZGVyXCIpLCBcbiAgICBhd2FpdCBfX1BSSVZBVEVfc2V0T25saW5lQ29tcG9uZW50UHJvdmlkZXIoZSwgbmV3IE9ubGluZUNvbXBvbmVudFByb3ZpZGVyKSkpLCBlLl9vbmxpbmVDb21wb25lbnRzO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZ2V0UGVyc2lzdGVuY2UoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZW5zdXJlT2ZmbGluZUNvbXBvbmVudHMoZSkudGhlbigoZSA9PiBlLnBlcnNpc3RlbmNlKSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9nZXRMb2NhbFN0b3JlKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2Vuc3VyZU9mZmxpbmVDb21wb25lbnRzKGUpLnRoZW4oKGUgPT4gZS5sb2NhbFN0b3JlKSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9nZXRSZW1vdGVTdG9yZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9lbnN1cmVPbmxpbmVDb21wb25lbnRzKGUpLnRoZW4oKGUgPT4gZS5yZW1vdGVTdG9yZSkpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZ2V0U3luY0VuZ2luZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9lbnN1cmVPbmxpbmVDb21wb25lbnRzKGUpLnRoZW4oKGUgPT4gZS5zeW5jRW5naW5lKSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9nZXREYXRhc3RvcmUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZW5zdXJlT25saW5lQ29tcG9uZW50cyhlKS50aGVuKChlID0+IGUuZGF0YXN0b3JlKSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9nZXRFdmVudE1hbmFnZXIoZSkge1xuICAgIGNvbnN0IHQgPSBhd2FpdCBfX1BSSVZBVEVfZW5zdXJlT25saW5lQ29tcG9uZW50cyhlKSwgbiA9IHQuZXZlbnRNYW5hZ2VyO1xuICAgIHJldHVybiBuLm9uTGlzdGVuID0gX19QUklWQVRFX3N5bmNFbmdpbmVMaXN0ZW4uYmluZChudWxsLCB0LnN5bmNFbmdpbmUpLCBuLm9uVW5saXN0ZW4gPSBfX1BSSVZBVEVfc3luY0VuZ2luZVVubGlzdGVuLmJpbmQobnVsbCwgdC5zeW5jRW5naW5lKSwgXG4gICAgbi5vbkZpcnN0UmVtb3RlU3RvcmVMaXN0ZW4gPSBfX1BSSVZBVEVfdHJpZ2dlclJlbW90ZVN0b3JlTGlzdGVuLmJpbmQobnVsbCwgdC5zeW5jRW5naW5lKSwgXG4gICAgbi5vbkxhc3RSZW1vdGVTdG9yZVVubGlzdGVuID0gX19QUklWQVRFX3RyaWdnZXJSZW1vdGVTdG9yZVVubGlzdGVuLmJpbmQobnVsbCwgdC5zeW5jRW5naW5lKSwgXG4gICAgbjtcbn1cblxuLyoqIEVuYWJsZXMgdGhlIG5ldHdvcmsgY29ubmVjdGlvbiBhbmQgcmUtZW5xdWV1ZXMgYWxsIHBlbmRpbmcgb3BlcmF0aW9ucy4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudEVuYWJsZU5ldHdvcmsoZSkge1xuICAgIHJldHVybiBlLmFzeW5jUXVldWUuZW5xdWV1ZSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgX19QUklWQVRFX2dldFBlcnNpc3RlbmNlKGUpLCBuID0gYXdhaXQgX19QUklWQVRFX2dldFJlbW90ZVN0b3JlKGUpO1xuICAgICAgICByZXR1cm4gdC5zZXROZXR3b3JrRW5hYmxlZCghMCksIGZ1bmN0aW9uIF9fUFJJVkFURV9yZW1vdGVTdG9yZUVuYWJsZU5ldHdvcmsoZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgICAgICAgICByZXR1cm4gdC5FYS5kZWxldGUoMCAvKiBPZmZsaW5lQ2F1c2UuVXNlckRpc2FibGVkICovKSwgX19QUklWQVRFX2VuYWJsZU5ldHdvcmtJbnRlcm5hbCh0KTtcbiAgICAgICAgfShuKTtcbiAgICB9KSk7XG59XG5cbi8qKiBEaXNhYmxlcyB0aGUgbmV0d29yayBjb25uZWN0aW9uLiBQZW5kaW5nIG9wZXJhdGlvbnMgd2lsbCBub3QgY29tcGxldGUuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnREaXNhYmxlTmV0d29yayhlKSB7XG4gICAgcmV0dXJuIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlKChhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCBfX1BSSVZBVEVfZ2V0UGVyc2lzdGVuY2UoZSksIG4gPSBhd2FpdCBfX1BSSVZBVEVfZ2V0UmVtb3RlU3RvcmUoZSk7XG4gICAgICAgIHJldHVybiB0LnNldE5ldHdvcmtFbmFibGVkKCExKSwgYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3JlbW90ZVN0b3JlRGlzYWJsZU5ldHdvcmsoZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgICAgICAgICB0LkVhLmFkZCgwIC8qIE9mZmxpbmVDYXVzZS5Vc2VyRGlzYWJsZWQgKi8pLCBhd2FpdCBfX1BSSVZBVEVfZGlzYWJsZU5ldHdvcmtJbnRlcm5hbCh0KSwgXG4gICAgICAgICAgICAvLyBTZXQgdGhlIE9ubGluZVN0YXRlIHRvIE9mZmxpbmUgc28gZ2V0KClzIHJldHVybiBmcm9tIGNhY2hlLCBldGMuXG4gICAgICAgICAgICB0LlJhLnNldChcIk9mZmxpbmVcIiAvKiBPbmxpbmVTdGF0ZS5PZmZsaW5lICovKTtcbiAgICAgICAgfShuKTtcbiAgICB9KSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIGFsbCB3cml0ZXMgdGhhdCB3ZXJlIHBlbmRpbmcgYXQgdGhlIHRpbWVcbiAqIHRoaXMgbWV0aG9kIHdhcyBjYWxsZWQgcmVjZWl2ZWQgc2VydmVyIGFja25vd2xlZGdlbWVudC4gQW4gYWNrbm93bGVkZ2VtZW50XG4gKiBjYW4gYmUgZWl0aGVyIGFjY2VwdGFuY2Ugb3IgcmVqZWN0aW9uLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRHZXREb2N1bWVudEZyb21Mb2NhbENhY2hlKGUsIHQpIHtcbiAgICBjb25zdCBuID0gbmV3IF9fUFJJVkFURV9EZWZlcnJlZDtcbiAgICByZXR1cm4gZS5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9yZWFkRG9jdW1lbnRGcm9tQ2FjaGUoZSwgdCwgbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgciA9IGF3YWl0IGZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlUmVhZERvY3VtZW50KGUsIHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcInJlYWQgZG9jdW1lbnRcIiwgXCJyZWFkb25seVwiLCAoZSA9PiBuLmxvY2FsRG9jdW1lbnRzLmdldERvY3VtZW50KGUsIHQpKSk7XG4gICAgICAgICAgICB9KGUsIHQpO1xuICAgICAgICAgICAgci5pc0ZvdW5kRG9jdW1lbnQoKSA/IG4ucmVzb2x2ZShyKSA6IHIuaXNOb0RvY3VtZW50KCkgPyBuLnJlc29sdmUobnVsbCkgOiBuLnJlamVjdChuZXcgRmlyZXN0b3JlRXJyb3IoTi5VTkFWQUlMQUJMRSwgXCJGYWlsZWQgdG8gZ2V0IGRvY3VtZW50IGZyb20gY2FjaGUuIChIb3dldmVyLCB0aGlzIGRvY3VtZW50IG1heSBleGlzdCBvbiB0aGUgc2VydmVyLiBSdW4gYWdhaW4gd2l0aG91dCBzZXR0aW5nICdzb3VyY2UnIGluIHRoZSBHZXRPcHRpb25zIHRvIGF0dGVtcHQgdG8gcmV0cmlldmUgdGhlIGRvY3VtZW50IGZyb20gdGhlIHNlcnZlci4pXCIpKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV93cmFwSW5Vc2VyRXJyb3JJZlJlY292ZXJhYmxlKGUsIGBGYWlsZWQgdG8gZ2V0IGRvY3VtZW50ICcke3R9IGZyb20gY2FjaGVgKTtcbiAgICAgICAgICAgIG4ucmVqZWN0KHIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICogUmV0cmlldmVzIGEgbGF0ZW5jeS1jb21wZW5zYXRlZCBkb2N1bWVudCBmcm9tIHRoZSBiYWNrZW5kIHZpYSBhXG4gKiBTbmFwc2hvdExpc3RlbmVyLlxuICovIChhd2FpdCBfX1BSSVZBVEVfZ2V0TG9jYWxTdG9yZShlKSwgdCwgbikpKSwgbi5wcm9taXNlO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50R2V0RG9jdW1lbnRWaWFTbmFwc2hvdExpc3RlbmVyKGUsIHQsIG4gPSB7fSkge1xuICAgIGNvbnN0IHIgPSBuZXcgX19QUklWQVRFX0RlZmVycmVkO1xuICAgIHJldHVybiBlLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gZnVuY3Rpb24gX19QUklWQVRFX3JlYWREb2N1bWVudFZpYVNuYXBzaG90TGlzdGVuZXIoZSwgdCwgbiwgciwgaSkge1xuICAgICAgICBjb25zdCBzID0gbmV3IF9fUFJJVkFURV9Bc3luY09ic2VydmVyKHtcbiAgICAgICAgICAgIG5leHQ6IF8gPT4ge1xuICAgICAgICAgICAgICAgIC8vIE11dGUgYW5kIHJlbW92ZSBxdWVyeSBmaXJzdCBiZWZvcmUgcGFzc2luZyBldmVudCB0byB1c2VyIHRvIGF2b2lkXG4gICAgICAgICAgICAgICAgLy8gdXNlciBhY3Rpb25zIGFmZmVjdGluZyB0aGUgbm93IHN0YWxlIHF1ZXJ5LlxuICAgICAgICAgICAgICAgIHMuTnUoKSwgdC5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiBfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyVW5saXN0ZW4oZSwgbykpKTtcbiAgICAgICAgICAgICAgICBjb25zdCBhID0gXy5kb2NzLmhhcyhuKTtcbiAgICAgICAgICAgICAgICAhYSAmJiBfLmZyb21DYWNoZSA/IFxuICAgICAgICAgICAgICAgIC8vIFRPRE8oZGltb25kKTogSWYgd2UncmUgb25saW5lIGFuZCB0aGUgZG9jdW1lbnQgZG9lc24ndFxuICAgICAgICAgICAgICAgIC8vIGV4aXN0IHRoZW4gd2UgcmVzb2x2ZSB3aXRoIGEgZG9jLmV4aXN0cyBzZXQgdG8gZmFsc2UuIElmXG4gICAgICAgICAgICAgICAgLy8gd2UncmUgb2ZmbGluZSBob3dldmVyLCB3ZSByZWplY3QgdGhlIFByb21pc2UgaW4gdGhpc1xuICAgICAgICAgICAgICAgIC8vIGNhc2UuIFR3byBvcHRpb25zOiAxKSBDYWNoZSB0aGUgbmVnYXRpdmUgcmVzcG9uc2UgZnJvbVxuICAgICAgICAgICAgICAgIC8vIHRoZSBzZXJ2ZXIgc28gd2UgY2FuIGRlbGl2ZXIgdGhhdCBldmVuIHdoZW4geW91J3JlXG4gICAgICAgICAgICAgICAgLy8gb2ZmbGluZSAyKSBBY3R1YWxseSByZWplY3QgdGhlIFByb21pc2UgaW4gdGhlIG9ubGluZSBjYXNlXG4gICAgICAgICAgICAgICAgLy8gaWYgdGhlIGRvY3VtZW50IGRvZXNuJ3QgZXhpc3QuXG4gICAgICAgICAgICAgICAgaS5yZWplY3QobmV3IEZpcmVzdG9yZUVycm9yKE4uVU5BVkFJTEFCTEUsIFwiRmFpbGVkIHRvIGdldCBkb2N1bWVudCBiZWNhdXNlIHRoZSBjbGllbnQgaXMgb2ZmbGluZS5cIikpIDogYSAmJiBfLmZyb21DYWNoZSAmJiByICYmIFwic2VydmVyXCIgPT09IHIuc291cmNlID8gaS5yZWplY3QobmV3IEZpcmVzdG9yZUVycm9yKE4uVU5BVkFJTEFCTEUsICdGYWlsZWQgdG8gZ2V0IGRvY3VtZW50IGZyb20gc2VydmVyLiAoSG93ZXZlciwgdGhpcyBkb2N1bWVudCBkb2VzIGV4aXN0IGluIHRoZSBsb2NhbCBjYWNoZS4gUnVuIGFnYWluIHdpdGhvdXQgc2V0dGluZyBzb3VyY2UgdG8gXCJzZXJ2ZXJcIiB0byByZXRyaWV2ZSB0aGUgY2FjaGVkIGRvY3VtZW50LiknKSkgOiBpLnJlc29sdmUoXyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGUgPT4gaS5yZWplY3QoZSlcbiAgICAgICAgfSksIG8gPSBuZXcgX19QUklWQVRFX1F1ZXJ5TGlzdGVuZXIoX19QUklWQVRFX25ld1F1ZXJ5Rm9yUGF0aChuLnBhdGgpLCBzLCB7XG4gICAgICAgICAgICBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzOiAhMCxcbiAgICAgICAgICAgIHFhOiAhMFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9ldmVudE1hbmFnZXJMaXN0ZW4oZSwgbyk7XG4gICAgfShhd2FpdCBfX1BSSVZBVEVfZ2V0RXZlbnRNYW5hZ2VyKGUpLCBlLmFzeW5jUXVldWUsIHQsIG4sIHIpKSksIHIucHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudEdldERvY3VtZW50c0Zyb21Mb2NhbENhY2hlKGUsIHQpIHtcbiAgICBjb25zdCBuID0gbmV3IF9fUFJJVkFURV9EZWZlcnJlZDtcbiAgICByZXR1cm4gZS5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9leGVjdXRlUXVlcnlGcm9tQ2FjaGUoZSwgdCwgbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgciA9IGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlRXhlY3V0ZVF1ZXJ5KGUsIHQsIFxuICAgICAgICAgICAgLyogdXNlUHJldmlvdXNSZXN1bHRzPSAqLyAhMCksIGkgPSBuZXcgX19QUklWQVRFX1ZpZXcodCwgci5RcyksIHMgPSBpLnJ1KHIuZG9jdW1lbnRzKSwgbyA9IGkuYXBwbHlDaGFuZ2VzKHMsIFxuICAgICAgICAgICAgLyogbGltYm9SZXNvbHV0aW9uRW5hYmxlZD0gKi8gITEpO1xuICAgICAgICAgICAgbi5yZXNvbHZlKG8uc25hcHNob3QpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zdCByID0gX19QUklWQVRFX3dyYXBJblVzZXJFcnJvcklmUmVjb3ZlcmFibGUoZSwgYEZhaWxlZCB0byBleGVjdXRlIHF1ZXJ5ICcke3R9IGFnYWluc3QgY2FjaGVgKTtcbiAgICAgICAgICAgIG4ucmVqZWN0KHIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICogUmV0cmlldmVzIGEgbGF0ZW5jeS1jb21wZW5zYXRlZCBxdWVyeSBzbmFwc2hvdCBmcm9tIHRoZSBiYWNrZW5kIHZpYSBhXG4gKiBTbmFwc2hvdExpc3RlbmVyLlxuICovIChhd2FpdCBfX1BSSVZBVEVfZ2V0TG9jYWxTdG9yZShlKSwgdCwgbikpKSwgbi5wcm9taXNlO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50R2V0RG9jdW1lbnRzVmlhU25hcHNob3RMaXN0ZW5lcihlLCB0LCBuID0ge30pIHtcbiAgICBjb25zdCByID0gbmV3IF9fUFJJVkFURV9EZWZlcnJlZDtcbiAgICByZXR1cm4gZS5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGZ1bmN0aW9uIF9fUFJJVkFURV9leGVjdXRlUXVlcnlWaWFTbmFwc2hvdExpc3RlbmVyKGUsIHQsIG4sIHIsIGkpIHtcbiAgICAgICAgY29uc3QgcyA9IG5ldyBfX1BSSVZBVEVfQXN5bmNPYnNlcnZlcih7XG4gICAgICAgICAgICBuZXh0OiBuID0+IHtcbiAgICAgICAgICAgICAgICAvLyBNdXRlIGFuZCByZW1vdmUgcXVlcnkgZmlyc3QgYmVmb3JlIHBhc3NpbmcgZXZlbnQgdG8gdXNlciB0byBhdm9pZFxuICAgICAgICAgICAgICAgIC8vIHVzZXIgYWN0aW9ucyBhZmZlY3RpbmcgdGhlIG5vdyBzdGFsZSBxdWVyeS5cbiAgICAgICAgICAgICAgICBzLk51KCksIHQuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gX19QUklWQVRFX2V2ZW50TWFuYWdlclVubGlzdGVuKGUsIG8pKSksIG4uZnJvbUNhY2hlICYmIFwic2VydmVyXCIgPT09IHIuc291cmNlID8gaS5yZWplY3QobmV3IEZpcmVzdG9yZUVycm9yKE4uVU5BVkFJTEFCTEUsICdGYWlsZWQgdG8gZ2V0IGRvY3VtZW50cyBmcm9tIHNlcnZlci4gKEhvd2V2ZXIsIHRoZXNlIGRvY3VtZW50cyBtYXkgZXhpc3QgaW4gdGhlIGxvY2FsIGNhY2hlLiBSdW4gYWdhaW4gd2l0aG91dCBzZXR0aW5nIHNvdXJjZSB0byBcInNlcnZlclwiIHRvIHJldHJpZXZlIHRoZSBjYWNoZWQgZG9jdW1lbnRzLiknKSkgOiBpLnJlc29sdmUobik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGUgPT4gaS5yZWplY3QoZSlcbiAgICAgICAgfSksIG8gPSBuZXcgX19QUklWQVRFX1F1ZXJ5TGlzdGVuZXIobiwgcywge1xuICAgICAgICAgICAgaW5jbHVkZU1ldGFkYXRhQ2hhbmdlczogITAsXG4gICAgICAgICAgICBxYTogITBcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyTGlzdGVuKGUsIG8pO1xuICAgIH0oYXdhaXQgX19QUklWQVRFX2dldEV2ZW50TWFuYWdlcihlKSwgZS5hc3luY1F1ZXVlLCB0LCBuLCByKSkpLCByLnByb21pc2U7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRSdW5BZ2dyZWdhdGVRdWVyeShlLCB0LCBuKSB7XG4gICAgY29uc3QgciA9IG5ldyBfX1BSSVZBVEVfRGVmZXJyZWQ7XG4gICAgcmV0dXJuIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiB7XG4gICAgICAgIC8vIEltcGxlbWVudCBhbmQgY2FsbCBleGVjdXRlQWdncmVnYXRlUXVlcnlWaWFTbmFwc2hvdExpc3RlbmVyLCBzaW1pbGFyXG4gICAgICAgIC8vIHRvIHRoZSBpbXBsZW1lbnRhdGlvbiBpbiBmaXJlc3RvcmVDbGllbnRHZXREb2N1bWVudHNWaWFTbmFwc2hvdExpc3RlbmVyXG4gICAgICAgIC8vIGFib3ZlXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBUT0RPKGIvMjc3NjI4Mzg0KTogY2hlY2sgYGNhblVzZU5ldHdvcmsoKWAgYW5kIGhhbmRsZSBtdWx0aS10YWIuXG4gICAgICAgICAgICBjb25zdCBpID0gYXdhaXQgX19QUklWQVRFX2dldERhdGFzdG9yZShlKTtcbiAgICAgICAgICAgIHIucmVzb2x2ZShhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfaW52b2tlUnVuQWdncmVnYXRpb25RdWVyeVJwYyhlLCB0LCBuKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIHtyZXF1ZXN0OiBpLCBndDogcywgcGFyZW50OiBvfSA9IF9fUFJJVkFURV90b1J1bkFnZ3JlZ2F0aW9uUXVlcnlSZXF1ZXN0KHIuc2VyaWFsaXplciwgX19QUklWQVRFX3F1ZXJ5VG9BZ2dyZWdhdGVUYXJnZXQodCksIG4pO1xuICAgICAgICAgICAgICAgIHIuY29ubmVjdGlvbi4kbyB8fCBkZWxldGUgaS5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgY29uc3QgXyA9IChhd2FpdCByLkhvKFwiUnVuQWdncmVnYXRpb25RdWVyeVwiLCByLnNlcmlhbGl6ZXIuZGF0YWJhc2VJZCwgbywgaSwgXG4gICAgICAgICAgICAgICAgLypleHBlY3RlZFJlc3BvbnNlQ291bnQ9Ki8gMSkpLmZpbHRlcigoZSA9PiAhIWUucmVzdWx0KSk7XG4gICAgICAgICAgICAgICAgLy8gT21pdCBSdW5BZ2dyZWdhdGlvblF1ZXJ5UmVzcG9uc2UgdGhhdCBvbmx5IGNvbnRhaW4gcmVhZFRpbWVzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfX1BSSVZBVEVfaGFyZEFzc2VydCgxID09PSBfLmxlbmd0aCwgNjQ3MjcpO1xuICAgICAgICAgICAgICAgIC8vIFJlbWFwIHRoZSBzaG9ydC1mb3JtIGFsaWFzZXMgdGhhdCB3ZXJlIHNlbnQgdG8gdGhlIHNlcnZlclxuICAgICAgICAgICAgICAgIC8vIHRvIHRoZSBjbGllbnQtc2lkZSBhbGlhc2VzLiBVc2VycyB3aWxsIGFjY2VzcyB0aGUgcmVzdWx0c1xuICAgICAgICAgICAgICAgIC8vIHVzaW5nIHRoZSBjbGllbnQtc2lkZSBhbGlhcy5cbiAgICAgICAgICAgICAgICBjb25zdCBhID0gX1swXS5yZXN1bHQ/LmFnZ3JlZ2F0ZUZpZWxkcztcbiAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMoYSkucmVkdWNlKCgoZSwgdCkgPT4gKGVbc1t0XV0gPSBhW3RdLCBlKSksIHt9KTtcbiAgICAgICAgICAgIH0oaSwgdCwgbikpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICByLnJlamVjdChlKTtcbiAgICAgICAgfVxuICAgIH0pKSwgci5wcm9taXNlO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50QWRkU25hcHNob3RzSW5TeW5jTGlzdGVuZXIoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBuZXcgX19QUklWQVRFX0FzeW5jT2JzZXJ2ZXIodCk7XG4gICAgcmV0dXJuIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBmdW5jdGlvbiBfX1BSSVZBVEVfYWRkU25hcHNob3RzSW5TeW5jTGlzdGVuZXIoZSwgdCkge1xuICAgICAgICBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLkNhLmFkZCh0KSwgXG4gICAgICAgIC8vIEltbWVkaWF0ZWx5IGZpcmUgYW4gaW5pdGlhbCBldmVudCwgaW5kaWNhdGluZyBhbGwgZXhpc3RpbmcgbGlzdGVuZXJzXG4gICAgICAgIC8vIGFyZSBpbi1zeW5jLlxuICAgICAgICB0Lm5leHQoKTtcbiAgICB9KGF3YWl0IF9fUFJJVkFURV9nZXRFdmVudE1hbmFnZXIoZSksIG4pKSksICgpID0+IHtcbiAgICAgICAgbi5OdSgpLCBlLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gZnVuY3Rpb24gX19QUklWQVRFX3JlbW92ZVNuYXBzaG90c0luU3luY0xpc3RlbmVyKGUsIHQpIHtcbiAgICAgICAgICAgIF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSkuQ2EuZGVsZXRlKHQpO1xuICAgICAgICB9KGF3YWl0IF9fUFJJVkFURV9nZXRFdmVudE1hbmFnZXIoZSksIG4pKSk7XG4gICAgfTtcbn1cblxuLyoqXG4gKiBUYWtlcyBhbiB1cGRhdGVGdW5jdGlvbiBpbiB3aGljaCBhIHNldCBvZiByZWFkcyBhbmQgd3JpdGVzIGNhbiBiZSBwZXJmb3JtZWRcbiAqIGF0b21pY2FsbHkuIEluIHRoZSB1cGRhdGVGdW5jdGlvbiwgdGhlIGNsaWVudCBjYW4gcmVhZCBhbmQgd3JpdGUgdmFsdWVzXG4gKiB1c2luZyB0aGUgc3VwcGxpZWQgdHJhbnNhY3Rpb24gb2JqZWN0LiBBZnRlciB0aGUgdXBkYXRlRnVuY3Rpb24sIGFsbFxuICogY2hhbmdlcyB3aWxsIGJlIGNvbW1pdHRlZC4gSWYgYSByZXRyeWFibGUgZXJyb3Igb2NjdXJzIChleDogc29tZSBvdGhlclxuICogY2xpZW50IGhhcyBjaGFuZ2VkIGFueSBvZiB0aGUgZGF0YSByZWZlcmVuY2VkKSwgdGhlbiB0aGUgdXBkYXRlRnVuY3Rpb25cbiAqIHdpbGwgYmUgY2FsbGVkIGFnYWluIGFmdGVyIGEgYmFja29mZi4gSWYgdGhlIHVwZGF0ZUZ1bmN0aW9uIHN0aWxsIGZhaWxzXG4gKiBhZnRlciBhbGwgcmV0cmllcywgdGhlbiB0aGUgdHJhbnNhY3Rpb24gd2lsbCBiZSByZWplY3RlZC5cbiAqXG4gKiBUaGUgdHJhbnNhY3Rpb24gb2JqZWN0IHBhc3NlZCB0byB0aGUgdXBkYXRlRnVuY3Rpb24gY29udGFpbnMgbWV0aG9kcyBmb3JcbiAqIGFjY2Vzc2luZyBkb2N1bWVudHMgYW5kIGNvbGxlY3Rpb25zLiBVbmxpa2Ugb3RoZXIgZGF0YXN0b3JlIGFjY2VzcywgZGF0YVxuICogYWNjZXNzZWQgd2l0aCB0aGUgdHJhbnNhY3Rpb24gd2lsbCBub3QgcmVmbGVjdCBsb2NhbCBjaGFuZ2VzIHRoYXQgaGF2ZSBub3RcbiAqIGJlZW4gY29tbWl0dGVkLiBGb3IgdGhpcyByZWFzb24sIGl0IGlzIHJlcXVpcmVkIHRoYXQgYWxsIHJlYWRzIGFyZVxuICogcGVyZm9ybWVkIGJlZm9yZSBhbnkgd3JpdGVzLiBUcmFuc2FjdGlvbnMgbXVzdCBiZSBwZXJmb3JtZWQgd2hpbGUgb25saW5lLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRMb2FkQnVuZGxlKGUsIHQsIG4sIHIpIHtcbiAgICBjb25zdCBpID0gZnVuY3Rpb24gX19QUklWQVRFX2NyZWF0ZUJ1bmRsZVJlYWRlcihlLCB0KSB7XG4gICAgICAgIGxldCBuO1xuICAgICAgICBuID0gXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSA/IF9fUFJJVkFURV9uZXdUZXh0RW5jb2RlcigpLmVuY29kZShlKSA6IGU7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3QnVuZGxlUmVhZGVyKGUsIHQpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX0J1bmRsZVJlYWRlckltcGwoZSwgdCk7XG4gICAgICAgIH0oZnVuY3Rpb24gX19QUklWQVRFX3RvQnl0ZVN0cmVhbVJlYWRlcihlLCB0KSB7XG4gICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHJldHVybiBfX1BSSVZBVEVfdG9CeXRlU3RyZWFtUmVhZGVySGVscGVyKGUsIHQpO1xuICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikgcmV0dXJuIF9fUFJJVkFURV90b0J5dGVTdHJlYW1SZWFkZXJIZWxwZXIobmV3IFVpbnQ4QXJyYXkoZSksIHQpO1xuICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBSZWFkYWJsZVN0cmVhbSkgcmV0dXJuIGUuZ2V0UmVhZGVyKCk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTb3VyY2Ugb2YgYHRvQnl0ZVN0cmVhbVJlYWRlcmAgaGFzIHRvIGJlIGEgQXJyYXlCdWZmZXIgb3IgUmVhZGFibGVTdHJlYW1cIik7XG4gICAgICAgIH0obiksIHQpO1xuICAgIH0obiwgX19QUklWQVRFX25ld1NlcmlhbGl6ZXIodCkpO1xuICAgIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiB7XG4gICAgICAgIF9fUFJJVkFURV9zeW5jRW5naW5lTG9hZEJ1bmRsZShhd2FpdCBfX1BSSVZBVEVfZ2V0U3luY0VuZ2luZShlKSwgaSwgcik7XG4gICAgfSkpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50R2V0TmFtZWRRdWVyeShlLCB0KSB7XG4gICAgcmV0dXJuIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlKChhc3luYyAoKSA9PiBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZUdldE5hbWVkUXVlcnkoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgbmFtZWQgcXVlcnlcIiwgXCJyZWFkb25seVwiLCAoZSA9PiBuLklpLmdldE5hbWVkUXVlcnkoZSwgdCkpKTtcbiAgICB9KGF3YWl0IF9fUFJJVkFURV9nZXRMb2NhbFN0b3JlKGUpLCB0KSkpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfY3JlYXRlQnVuZGxlUmVhZGVyU3luYyhlLCB0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdCdW5kbGVSZWFkZXJTeW5jKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfQnVuZGxlUmVhZGVyU3luY0ltcGwoZSwgdCk7XG4gICAgfShlLCB0KTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudFNldEluZGV4Q29uZmlndXJhdGlvbihlLCB0KSB7XG4gICAgcmV0dXJuIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlKChhc3luYyAoKSA9PiBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZUNvbmZpZ3VyZUZpZWxkSW5kZXhlcyhlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCByID0gbi5pbmRleE1hbmFnZXIsIGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJDb25maWd1cmUgaW5kZXhlc1wiLCBcInJlYWR3cml0ZVwiLCAoZSA9PiByLmdldEZpZWxkSW5kZXhlcyhlKS5uZXh0KChuID0+IFxuICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgICAgICAvKipcbiAqIENvbXBhcmVzIHR3byBhcnJheSBmb3IgZXF1YWxpdHkgdXNpbmcgY29tcGFyYXRvci4gVGhlIG1ldGhvZCBjb21wdXRlcyB0aGVcbiAqIGludGVyc2VjdGlvbiBhbmQgaW52b2tlcyBgb25BZGRgIGZvciBldmVyeSBlbGVtZW50IHRoYXQgaXMgaW4gYGFmdGVyYCBidXQgbm90XG4gKiBgYmVmb3JlYC4gYG9uUmVtb3ZlYCBpcyBpbnZva2VkIGZvciBldmVyeSBlbGVtZW50IGluIGBiZWZvcmVgIGJ1dCBtaXNzaW5nXG4gKiBmcm9tIGBhZnRlcmAuXG4gKlxuICogVGhlIG1ldGhvZCBjcmVhdGVzIGEgY29weSBvZiBib3RoIGBiZWZvcmVgIGFuZCBgYWZ0ZXJgIGFuZCBydW5zIGluIE8obiBsb2dcbiAqIG4pLCB3aGVyZSBuIGlzIHRoZSBzaXplIG9mIHRoZSB0d28gbGlzdHMuXG4gKlxuICogQHBhcmFtIGJlZm9yZSAtIFRoZSBlbGVtZW50cyB0aGF0IGV4aXN0IGluIHRoZSBvcmlnaW5hbCBhcnJheS5cbiAqIEBwYXJhbSBhZnRlciAtIFRoZSBlbGVtZW50cyB0byBkaWZmIGFnYWluc3QgdGhlIG9yaWdpbmFsIGFycmF5LlxuICogQHBhcmFtIGNvbXBhcmF0b3IgLSBUaGUgY29tcGFyYXRvciBmb3IgdGhlIGVsZW1lbnRzIGluIGJlZm9yZSBhbmQgYWZ0ZXIuXG4gKiBAcGFyYW0gb25BZGQgLSBBIGZ1bmN0aW9uIHRvIGludm9rZSBmb3IgZXZlcnkgZWxlbWVudCB0aGF0IGlzIHBhcnQgb2YgYFxuICogYWZ0ZXJgIGJ1dCBub3QgYGJlZm9yZWAuXG4gKiBAcGFyYW0gb25SZW1vdmUgLSBBIGZ1bmN0aW9uIHRvIGludm9rZSBmb3IgZXZlcnkgZWxlbWVudCB0aGF0IGlzIHBhcnQgb2ZcbiAqIGBiZWZvcmVgIGJ1dCBub3QgYGFmdGVyYC5cbiAqL1xuICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfZGlmZkFycmF5cyhlLCB0LCBuLCByLCBpKSB7XG4gICAgICAgICAgICBlID0gWyAuLi5lIF0sIHQgPSBbIC4uLnQgXSwgZS5zb3J0KG4pLCB0LnNvcnQobik7XG4gICAgICAgICAgICBjb25zdCBzID0gZS5sZW5ndGgsIG8gPSB0Lmxlbmd0aDtcbiAgICAgICAgICAgIGxldCBfID0gMCwgYSA9IDA7XG4gICAgICAgICAgICBmb3IgKDtfIDwgbyAmJiBhIDwgczsgKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IG4oZVthXSwgdFtfXSk7XG4gICAgICAgICAgICAgICAgcyA8IDAgPyBcbiAgICAgICAgICAgICAgICAvLyBUaGUgZWxlbWVudCB3YXMgcmVtb3ZlZCBpZiB0aGUgbmV4dCBlbGVtZW50IGluIG91ciBvcmRlcmVkXG4gICAgICAgICAgICAgICAgLy8gd2Fsa3Rocm91Z2ggaXMgb25seSBpbiBgYmVmb3JlYC5cbiAgICAgICAgICAgICAgICBpKGVbYSsrXSkgOiBzID4gMCA/IFxuICAgICAgICAgICAgICAgIC8vIFRoZSBlbGVtZW50IHdhcyBhZGRlZCBpZiB0aGUgbmV4dCBlbGVtZW50IGluIG91ciBvcmRlcmVkIHdhbGt0aHJvdWdoXG4gICAgICAgICAgICAgICAgLy8gaXMgb25seSBpbiBgYWZ0ZXJgLlxuICAgICAgICAgICAgICAgIHIodFtfKytdKSA6IChfKyssIGErKyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKDtfIDwgbzsgKSByKHRbXysrXSk7XG4gICAgICAgICAgICBmb3IgKDthIDwgczsgKSBpKGVbYSsrXSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBWZXJpZmllcyBlcXVhbGl0eSBmb3IgYW4gYXJyYXkgb2YgcHJpbWl0aXZlcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGludGVybmFsXG4gKiBAcGFyYW0gbGVmdCBBcnJheSBvZiBwcmltaXRpdmVzLlxuICogQHBhcmFtIHJpZ2h0IEFycmF5IG9mIHByaW1pdGl2ZXMuXG4gKiBAcmV0dXJuIFRydWUgaWYgYXJyYXlzIGFyZSBlcXVhbC5cbiAqLyAobiwgdCwgX19QUklWQVRFX2ZpZWxkSW5kZXhTZW1hbnRpY0NvbXBhcmF0b3IsICh0ID0+IHtcbiAgICAgICAgICAgIGkucHVzaChyLmFkZEZpZWxkSW5kZXgoZSwgdCkpO1xuICAgICAgICB9KSwgKHQgPT4ge1xuICAgICAgICAgICAgaS5wdXNoKHIuZGVsZXRlRmllbGRJbmRleChlLCB0KSk7XG4gICAgICAgIH0pKSkpLm5leHQoKCgpID0+IFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKGkpKSkpKTtcbiAgICB9KGF3YWl0IF9fUFJJVkFURV9nZXRMb2NhbFN0b3JlKGUpLCB0KSkpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50U2V0UGVyc2lzdGVudENhY2hlSW5kZXhBdXRvQ3JlYXRpb25FbmFibGVkKGUsIHQpIHtcbiAgICByZXR1cm4gZS5hc3luY1F1ZXVlLmVucXVldWUoKGFzeW5jICgpID0+IGZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlU2V0SW5kZXhBdXRvQ3JlYXRpb25FbmFibGVkKGUsIHQpIHtcbiAgICAgICAgX19QUklWQVRFX2RlYnVnQ2FzdChlKS5Gcy5WcyA9IHQ7XG4gICAgfShhd2FpdCBfX1BSSVZBVEVfZ2V0TG9jYWxTdG9yZShlKSwgdCkpKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudERlbGV0ZUFsbEZpZWxkSW5kZXhlcyhlKSB7XG4gICAgcmV0dXJuIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlKChhc3luYyAoKSA9PiBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZURlbGV0ZUFsbEZpZWxkSW5kZXhlcyhlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCBuID0gdC5pbmRleE1hbmFnZXI7XG4gICAgICAgIHJldHVybiB0LnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiRGVsZXRlIEFsbCBJbmRleGVzXCIsIFwicmVhZHdyaXRlXCIsIChlID0+IG4uZGVsZXRlQWxsRmllbGRJbmRleGVzKGUpKSk7XG4gICAgfShhd2FpdCBfX1BSSVZBVEVfZ2V0TG9jYWxTdG9yZShlKSkpKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQ29tcGFyZXMgdHdvIGBFeHBlcmltZW50YWxMb25nUG9sbGluZ09wdGlvbnNgIG9iamVjdHMgZm9yIGVxdWFsaXR5LlxuICovXG4vKipcbiAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSBuZXcgYEV4cGVyaW1lbnRhbExvbmdQb2xsaW5nT3B0aW9uc2Agd2l0aCB0aGUgc2FtZVxuICogb3B0aW9uIHZhbHVlcyBhcyB0aGUgZ2l2ZW4gaW5zdGFuY2UuXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9jbG9uZUxvbmdQb2xsaW5nT3B0aW9ucyhlKSB7XG4gICAgY29uc3QgdCA9IHt9O1xuICAgIHJldHVybiB2b2lkIDAgIT09IGUudGltZW91dFNlY29uZHMgJiYgKHQudGltZW91dFNlY29uZHMgPSBlLnRpbWVvdXRTZWNvbmRzKSwgdDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgX24gPSBuZXcgTWFwO1xuXG4vKipcbiAqIEFuIGluc3RhbmNlIG1hcCB0aGF0IGVuc3VyZXMgb25seSBvbmUgRGF0YXN0b3JlIGV4aXN0cyBwZXIgRmlyZXN0b3JlXG4gKiBpbnN0YW5jZS5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIHNldHRpbmdzKCkgZGVmYXVsdHM6XG5jb25zdCBhbiA9IFwiZmlyZXN0b3JlLmdvb2dsZWFwaXMuY29tXCIsIHVuID0gITA7XG5cbi8qKlxuICogQSBjb25jcmV0ZSB0eXBlIGRlc2NyaWJpbmcgYWxsIHRoZSB2YWx1ZXMgdGhhdCBjYW4gYmUgYXBwbGllZCB2aWEgYVxuICogdXNlci1zdXBwbGllZCBgRmlyZXN0b3JlU2V0dGluZ3NgIG9iamVjdC4gVGhpcyBpcyBhIHNlcGFyYXRlIHR5cGUgc28gdGhhdFxuICogZGVmYXVsdHMgY2FuIGJlIHN1cHBsaWVkIGFuZCB0aGUgdmFsdWUgY2FuIGJlIGNoZWNrZWQgZm9yIGVxdWFsaXR5LlxuICovXG5jbGFzcyBGaXJlc3RvcmVTZXR0aW5nc0ltcGwge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gZS5ob3N0KSB7XG4gICAgICAgICAgICBpZiAodm9pZCAwICE9PSBlLnNzbCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKE4uSU5WQUxJRF9BUkdVTUVOVCwgXCJDYW4ndCBwcm92aWRlIHNzbCBvcHRpb24gaWYgaG9zdCBvcHRpb24gaXMgbm90IHNldFwiKTtcbiAgICAgICAgICAgIHRoaXMuaG9zdCA9IGFuLCB0aGlzLnNzbCA9IHVuO1xuICAgICAgICB9IGVsc2UgdGhpcy5ob3N0ID0gZS5ob3N0LCB0aGlzLnNzbCA9IGUuc3NsID8/IHVuO1xuICAgICAgICBpZiAodGhpcy5pc1VzaW5nRW11bGF0b3IgPSB2b2lkIDAgIT09IGUuZW11bGF0b3JPcHRpb25zLCB0aGlzLmNyZWRlbnRpYWxzID0gZS5jcmVkZW50aWFscywgXG4gICAgICAgIHRoaXMuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyA9ICEhZS5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzLCB0aGlzLmxvY2FsQ2FjaGUgPSBlLmxvY2FsQ2FjaGUsIFxuICAgICAgICB2b2lkIDAgPT09IGUuY2FjaGVTaXplQnl0ZXMpIHRoaXMuY2FjaGVTaXplQnl0ZXMgPSBPdDsgZWxzZSB7XG4gICAgICAgICAgICBpZiAoLTEgIT09IGUuY2FjaGVTaXplQnl0ZXMgJiYgZS5jYWNoZVNpemVCeXRlcyA8IEJ0KSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoTi5JTlZBTElEX0FSR1VNRU5ULCBcImNhY2hlU2l6ZUJ5dGVzIG11c3QgYmUgYXQgbGVhc3QgMTA0ODU3NlwiKTtcbiAgICAgICAgICAgIHRoaXMuY2FjaGVTaXplQnl0ZXMgPSBlLmNhY2hlU2l6ZUJ5dGVzO1xuICAgICAgICB9XG4gICAgICAgIF9fUFJJVkFURV92YWxpZGF0ZUlzTm90VXNlZFRvZ2V0aGVyKFwiZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZ1wiLCBlLmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcsIFwiZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nXCIsIGUuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nKSwgXG4gICAgICAgIHRoaXMuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZyA9ICEhZS5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nLCB0aGlzLmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcgPyB0aGlzLmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyA9ICExIDogdm9pZCAwID09PSBlLmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyA/IHRoaXMuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nID0gdHJ1ZSA6IFxuICAgICAgICAvLyBGb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHksIGNvZXJjZSB0aGUgdmFsdWUgdG8gYm9vbGVhbiBldmVuIHRob3VnaFxuICAgICAgICAvLyB0aGUgVHlwZVNjcmlwdCBjb21waWxlciBoYXMgbmFycm93ZWQgdGhlIHR5cGUgdG8gYm9vbGVhbiBhbHJlYWR5LlxuICAgICAgICAvLyBub2luc3BlY3Rpb24gUG9pbnRsZXNzQm9vbGVhbkV4cHJlc3Npb25KU1xuICAgICAgICB0aGlzLmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyA9ICEhZS5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcsIFxuICAgICAgICB0aGlzLmV4cGVyaW1lbnRhbExvbmdQb2xsaW5nT3B0aW9ucyA9IF9fUFJJVkFURV9jbG9uZUxvbmdQb2xsaW5nT3B0aW9ucyhlLmV4cGVyaW1lbnRhbExvbmdQb2xsaW5nT3B0aW9ucyA/PyB7fSksIFxuICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfdmFsaWRhdGVMb25nUG9sbGluZ09wdGlvbnMoZSkge1xuICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gZS50aW1lb3V0U2Vjb25kcykge1xuICAgICAgICAgICAgICAgIGlmIChpc05hTihlLnRpbWVvdXRTZWNvbmRzKSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKE4uSU5WQUxJRF9BUkdVTUVOVCwgYGludmFsaWQgbG9uZyBwb2xsaW5nIHRpbWVvdXQ6ICR7ZS50aW1lb3V0U2Vjb25kc30gKG11c3Qgbm90IGJlIE5hTilgKTtcbiAgICAgICAgICAgICAgICBpZiAoZS50aW1lb3V0U2Vjb25kcyA8IDUpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihOLklOVkFMSURfQVJHVU1FTlQsIGBpbnZhbGlkIGxvbmcgcG9sbGluZyB0aW1lb3V0OiAke2UudGltZW91dFNlY29uZHN9IChtaW5pbXVtIGFsbG93ZWQgdmFsdWUgaXMgNSlgKTtcbiAgICAgICAgICAgICAgICBpZiAoZS50aW1lb3V0U2Vjb25kcyA+IDMwKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoTi5JTlZBTElEX0FSR1VNRU5ULCBgaW52YWxpZCBsb25nIHBvbGxpbmcgdGltZW91dDogJHtlLnRpbWVvdXRTZWNvbmRzfSAobWF4aW11bSBhbGxvd2VkIHZhbHVlIGlzIDMwKWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4gICAgICAgIC8qKlxuICogVGhlIENsb3VkIEZpcmVzdG9yZSBzZXJ2aWNlIGludGVyZmFjZS5cbiAqXG4gKiBEbyBub3QgY2FsbCB0aGlzIGNvbnN0cnVjdG9yIGRpcmVjdGx5LiBJbnN0ZWFkLCB1c2Uge0BsaW5rIChnZXRGaXJlc3RvcmU6MSl9LlxuICovICh0aGlzLmV4cGVyaW1lbnRhbExvbmdQb2xsaW5nT3B0aW9ucyksIHRoaXMudXNlRmV0Y2hTdHJlYW1zID0gISFlLnVzZUZldGNoU3RyZWFtcztcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhvc3QgPT09IGUuaG9zdCAmJiB0aGlzLnNzbCA9PT0gZS5zc2wgJiYgdGhpcy5jcmVkZW50aWFscyA9PT0gZS5jcmVkZW50aWFscyAmJiB0aGlzLmNhY2hlU2l6ZUJ5dGVzID09PSBlLmNhY2hlU2l6ZUJ5dGVzICYmIHRoaXMuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZyA9PT0gZS5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nICYmIHRoaXMuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nID09PSBlLmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyAmJiBmdW5jdGlvbiBfX1BSSVZBVEVfbG9uZ1BvbGxpbmdPcHRpb25zRXF1YWwoZSwgdCkge1xuICAgICAgICAgICAgcmV0dXJuIGUudGltZW91dFNlY29uZHMgPT09IHQudGltZW91dFNlY29uZHM7XG4gICAgICAgIH0odGhpcy5leHBlcmltZW50YWxMb25nUG9sbGluZ09wdGlvbnMsIGUuZXhwZXJpbWVudGFsTG9uZ1BvbGxpbmdPcHRpb25zKSAmJiB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgPT09IGUuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyAmJiB0aGlzLnVzZUZldGNoU3RyZWFtcyA9PT0gZS51c2VGZXRjaFN0cmVhbXM7XG4gICAgfVxufVxuXG5jbGFzcyBGaXJlc3RvcmUkMSB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByKSB7XG4gICAgICAgIHRoaXMuX2F1dGhDcmVkZW50aWFscyA9IGUsIHRoaXMuX2FwcENoZWNrQ3JlZGVudGlhbHMgPSB0LCB0aGlzLl9kYXRhYmFzZUlkID0gbiwgXG4gICAgICAgIHRoaXMuX2FwcCA9IHIsIFxuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciBpdCdzIGEgRmlyZXN0b3JlIG9yIEZpcmVzdG9yZSBMaXRlIGluc3RhbmNlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJmaXJlc3RvcmUtbGl0ZVwiLCB0aGlzLl9wZXJzaXN0ZW5jZUtleSA9IFwiKGxpdGUpXCIsIHRoaXMuX3NldHRpbmdzID0gbmV3IEZpcmVzdG9yZVNldHRpbmdzSW1wbCh7fSksIFxuICAgICAgICB0aGlzLl9zZXR0aW5nc0Zyb3plbiA9ICExLCB0aGlzLl9lbXVsYXRvck9wdGlvbnMgPSB7fSwgXG4gICAgICAgIC8vIEEgdGFzayB0aGF0IGlzIGFzc2lnbmVkIHdoZW4gdGhlIHRlcm1pbmF0ZSgpIGlzIGludm9rZWQgYW5kIHJlc29sdmVkIHdoZW5cbiAgICAgICAgLy8gYWxsIGNvbXBvbmVudHMgaGF2ZSBzaHV0IGRvd24uIE90aGVyd2lzZSwgRmlyZXN0b3JlIGlzIG5vdCB0ZXJtaW5hdGVkLFxuICAgICAgICAvLyB3aGljaCBjYW4gbWVhbiBlaXRoZXIgdGhlIEZpcmVzdG9yZUNsaWVudCBpcyBpbiB0aGUgcHJvY2VzcyBvZiBzdGFydGluZyxcbiAgICAgICAgLy8gb3IgcmVzdGFydGluZy5cbiAgICAgICAgdGhpcy5fdGVybWluYXRlVGFzayA9IFwibm90VGVybWluYXRlZFwiO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9IGFzc29jaWF0ZWQgd2l0aCB0aGlzIGBGaXJlc3RvcmVgIHNlcnZpY2VcbiAgICAgKiBpbnN0YW5jZS5cbiAgICAgKi8gICAgZ2V0IGFwcCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9hcHApIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihOLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiRmlyZXN0b3JlIHdhcyBub3QgaW5pdGlhbGl6ZWQgdXNpbmcgdGhlIEZpcmViYXNlIFNESy4gJ2FwcCcgaXMgbm90IGF2YWlsYWJsZVwiKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FwcDtcbiAgICB9XG4gICAgZ2V0IF9pbml0aWFsaXplZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldHRpbmdzRnJvemVuO1xuICAgIH1cbiAgICBnZXQgX3Rlcm1pbmF0ZWQoKSB7XG4gICAgICAgIHJldHVybiBcIm5vdFRlcm1pbmF0ZWRcIiAhPT0gdGhpcy5fdGVybWluYXRlVGFzaztcbiAgICB9XG4gICAgX3NldFNldHRpbmdzKGUpIHtcbiAgICAgICAgaWYgKHRoaXMuX3NldHRpbmdzRnJvemVuKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoTi5GQUlMRURfUFJFQ09ORElUSU9OLCBcIkZpcmVzdG9yZSBoYXMgYWxyZWFkeSBiZWVuIHN0YXJ0ZWQgYW5kIGl0cyBzZXR0aW5ncyBjYW4gbm8gbG9uZ2VyIGJlIGNoYW5nZWQuIFlvdSBjYW4gb25seSBtb2RpZnkgc2V0dGluZ3MgYmVmb3JlIGNhbGxpbmcgYW55IG90aGVyIG1ldGhvZHMgb24gYSBGaXJlc3RvcmUgb2JqZWN0LlwiKTtcbiAgICAgICAgdGhpcy5fc2V0dGluZ3MgPSBuZXcgRmlyZXN0b3JlU2V0dGluZ3NJbXBsKGUpLCB0aGlzLl9lbXVsYXRvck9wdGlvbnMgPSBlLmVtdWxhdG9yT3B0aW9ucyB8fCB7fSwgXG4gICAgICAgIHZvaWQgMCAhPT0gZS5jcmVkZW50aWFscyAmJiAodGhpcy5fYXV0aENyZWRlbnRpYWxzID0gZnVuY3Rpb24gX19QUklWQVRFX21ha2VBdXRoQ3JlZGVudGlhbHNQcm92aWRlcihlKSB7XG4gICAgICAgICAgICBpZiAoIWUpIHJldHVybiBuZXcgX19QUklWQVRFX0VtcHR5QXV0aENyZWRlbnRpYWxzUHJvdmlkZXI7XG4gICAgICAgICAgICBzd2l0Y2ggKGUudHlwZSkge1xuICAgICAgICAgICAgICBjYXNlIFwiZmlyc3RQYXJ0eVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX0ZpcnN0UGFydHlBdXRoQ3JlZGVudGlhbHNQcm92aWRlcihlLnNlc3Npb25JbmRleCB8fCBcIjBcIiwgZS5pYW1Ub2tlbiB8fCBudWxsLCBlLmF1dGhUb2tlbkZhY3RvcnkgfHwgbnVsbCk7XG5cbiAgICAgICAgICAgICAgY2FzZSBcInByb3ZpZGVyXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUuY2xpZW50O1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKE4uSU5WQUxJRF9BUkdVTUVOVCwgXCJtYWtlQXV0aENyZWRlbnRpYWxzUHJvdmlkZXIgZmFpbGVkIGR1ZSB0byBpbnZhbGlkIGNyZWRlbnRpYWwgdHlwZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfShlLmNyZWRlbnRpYWxzKSk7XG4gICAgfVxuICAgIF9nZXRTZXR0aW5ncygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldHRpbmdzO1xuICAgIH1cbiAgICBfZ2V0RW11bGF0b3JPcHRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZW11bGF0b3JPcHRpb25zO1xuICAgIH1cbiAgICBfZnJlZXplU2V0dGluZ3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZXR0aW5nc0Zyb3plbiA9ICEwLCB0aGlzLl9zZXR0aW5ncztcbiAgICB9XG4gICAgX2RlbGV0ZSgpIHtcbiAgICAgICAgLy8gVGhlIGBfdGVybWluYXRlVGFza2AgbXVzdCBiZSBhc3NpZ25lZCBmdXR1cmUgdGhhdCBjb21wbGV0ZXMgd2hlblxuICAgICAgICAvLyB0ZXJtaW5hdGUgaXMgY29tcGxldGUuIFRoZSBleGlzdGVuY2Ugb2YgdGhpcyBmdXR1cmUgcHV0cyBTREsgaW4gc3RhdGVcbiAgICAgICAgLy8gdGhhdCB3aWxsIG5vdCBhY2NlcHQgZnVydGhlciBBUEkgaW50ZXJhY3Rpb24uXG4gICAgICAgIHJldHVybiBcIm5vdFRlcm1pbmF0ZWRcIiA9PT0gdGhpcy5fdGVybWluYXRlVGFzayAmJiAodGhpcy5fdGVybWluYXRlVGFzayA9IHRoaXMuX3Rlcm1pbmF0ZSgpKSwgXG4gICAgICAgIHRoaXMuX3Rlcm1pbmF0ZVRhc2s7XG4gICAgfVxuICAgIGFzeW5jIF9yZXN0YXJ0KCkge1xuICAgICAgICAvLyBUaGUgYF90ZXJtaW5hdGVUYXNrYCBtdXN0IGVxdWFsICdub3RUZXJtaW5hdGVkJyBhZnRlciByZXN0YXJ0IHRvXG4gICAgICAgIC8vIHNpZ25hbCB0aGF0IGNsaWVudCBpcyBpbiBhIHN0YXRlIHRoYXQgYWNjZXB0cyBBUEkgY2FsbHMuXG4gICAgICAgIFwibm90VGVybWluYXRlZFwiID09PSB0aGlzLl90ZXJtaW5hdGVUYXNrID8gYXdhaXQgdGhpcy5fdGVybWluYXRlKCkgOiB0aGlzLl90ZXJtaW5hdGVUYXNrID0gXCJub3RUZXJtaW5hdGVkXCI7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgSlNPTi1zZXJpYWxpemFibGUgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBgRmlyZXN0b3JlYCBpbnN0YW5jZS4gKi8gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYXBwOiB0aGlzLl9hcHAsXG4gICAgICAgICAgICBkYXRhYmFzZUlkOiB0aGlzLl9kYXRhYmFzZUlkLFxuICAgICAgICAgICAgc2V0dGluZ3M6IHRoaXMuX3NldHRpbmdzXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRlcm1pbmF0ZXMgYWxsIGNvbXBvbmVudHMgdXNlZCBieSB0aGlzIGNsaWVudC4gU3ViY2xhc3NlcyBjYW4gb3ZlcnJpZGVcbiAgICAgKiB0aGlzIG1ldGhvZCB0byBjbGVhbiB1cCB0aGVpciBvd24gZGVwZW5kZW5jaWVzLCBidXQgbXVzdCBhbHNvIGNhbGwgdGhpc1xuICAgICAqIG1ldGhvZC5cbiAgICAgKlxuICAgICAqIE9ubHkgZXZlciBjYWxsZWQgb25jZS5cbiAgICAgKi8gICAgX3Rlcm1pbmF0ZSgpIHtcbiAgICAgICAgLyoqXG4gKiBSZW1vdmVzIGFsbCBjb21wb25lbnRzIGFzc29jaWF0ZWQgd2l0aCB0aGUgcHJvdmlkZWQgaW5zdGFuY2UuIE11c3QgYmUgY2FsbGVkXG4gKiB3aGVuIHRoZSBgRmlyZXN0b3JlYCBpbnN0YW5jZSBpcyB0ZXJtaW5hdGVkLlxuICovXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfcmVtb3ZlQ29tcG9uZW50cyhlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gX24uZ2V0KGUpO1xuICAgICAgICAgICAgdCAmJiAoX19QUklWQVRFX2xvZ0RlYnVnKFwiQ29tcG9uZW50UHJvdmlkZXJcIiwgXCJSZW1vdmluZyBEYXRhc3RvcmVcIiksIF9uLmRlbGV0ZShlKSwgXG4gICAgICAgICAgICB0LnRlcm1pbmF0ZSgpKTtcbiAgICAgICAgfSh0aGlzKSwgUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIE1vZGlmeSB0aGlzIGluc3RhbmNlIHRvIGNvbW11bmljYXRlIHdpdGggdGhlIENsb3VkIEZpcmVzdG9yZSBlbXVsYXRvci5cbiAqXG4gKiBOb3RlOiBUaGlzIG11c3QgYmUgY2FsbGVkIGJlZm9yZSB0aGlzIGluc3RhbmNlIGhhcyBiZWVuIHVzZWQgdG8gZG8gYW55XG4gKiBvcGVyYXRpb25zLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBUaGUgYEZpcmVzdG9yZWAgaW5zdGFuY2UgdG8gY29uZmlndXJlIHRvIGNvbm5lY3QgdG8gdGhlXG4gKiBlbXVsYXRvci5cbiAqIEBwYXJhbSBob3N0IC0gdGhlIGVtdWxhdG9yIGhvc3QgKGV4OiBsb2NhbGhvc3QpLlxuICogQHBhcmFtIHBvcnQgLSB0aGUgZW11bGF0b3IgcG9ydCAoZXg6IDkwMDApLlxuICogQHBhcmFtIG9wdGlvbnMubW9ja1VzZXJUb2tlbiAtIHRoZSBtb2NrIGF1dGggdG9rZW4gdG8gdXNlIGZvciB1bml0IHRlc3RpbmdcbiAqIFNlY3VyaXR5IFJ1bGVzLlxuICovIGZ1bmN0aW9uIGNvbm5lY3RGaXJlc3RvcmVFbXVsYXRvcihlLCB0LCBuLCByID0ge30pIHtcbiAgICBlID0gX19QUklWQVRFX2Nhc3QoZSwgRmlyZXN0b3JlJDEpO1xuICAgIGNvbnN0IGkgPSBpc0Nsb3VkV29ya3N0YXRpb24odCksIHMgPSBlLl9nZXRTZXR0aW5ncygpLCBvID0ge1xuICAgICAgICAuLi5zLFxuICAgICAgICBlbXVsYXRvck9wdGlvbnM6IGUuX2dldEVtdWxhdG9yT3B0aW9ucygpXG4gICAgfSwgXyA9IGAke3R9OiR7bn1gO1xuICAgIGkgJiYgKHBpbmdTZXJ2ZXIoYGh0dHBzOi8vJHtffWApLCB1cGRhdGVFbXVsYXRvckJhbm5lcihcIkZpcmVzdG9yZVwiLCAhMCkpLCBzLmhvc3QgIT09IGFuICYmIHMuaG9zdCAhPT0gXyAmJiBfX1BSSVZBVEVfbG9nV2FybihcIkhvc3QgaGFzIGJlZW4gc2V0IGluIGJvdGggc2V0dGluZ3MoKSBhbmQgY29ubmVjdEZpcmVzdG9yZUVtdWxhdG9yKCksIGVtdWxhdG9yIGhvc3Qgd2lsbCBiZSB1c2VkLlwiKTtcbiAgICBjb25zdCBhID0ge1xuICAgICAgICAuLi5zLFxuICAgICAgICBob3N0OiBfLFxuICAgICAgICBzc2w6IGksXG4gICAgICAgIGVtdWxhdG9yT3B0aW9uczogclxuICAgIH07XG4gICAgLy8gTm8tb3AgaWYgdGhlIG5ldyBjb25maWd1cmF0aW9uIG1hdGNoZXMgdGhlIGN1cnJlbnQgY29uZmlndXJhdGlvbi4gVGhpcyBzdXBwb3J0cyBTU1JcbiAgICAvLyBlbnZpb3JubWVudHMgd2hpY2ggbWlnaHQgY2FsbCBgY29ubmVjdEZpcmVzdG9yZUVtdWxhdG9yYCBtdWx0aXBsZSB0aW1lcyBhcyBhIHN0YW5kYXJkIHByYWN0aWNlLlxuICAgICAgICBpZiAoIWRlZXBFcXVhbChhLCBvKSAmJiAoZS5fc2V0U2V0dGluZ3MoYSksIHIubW9ja1VzZXJUb2tlbikpIHtcbiAgICAgICAgbGV0IHQsIG47XG4gICAgICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiByLm1vY2tVc2VyVG9rZW4pIHQgPSByLm1vY2tVc2VyVG9rZW4sIG4gPSBVc2VyLk1PQ0tfVVNFUjsgZWxzZSB7XG4gICAgICAgICAgICAvLyBMZXQgY3JlYXRlTW9ja1VzZXJUb2tlbiB2YWxpZGF0ZSBmaXJzdCAoY2F0Y2hlcyBjb21tb24gbWlzdGFrZXMgbGlrZVxuICAgICAgICAgICAgLy8gaW52YWxpZCBmaWVsZCBcInVpZFwiIGFuZCBtaXNzaW5nIGZpZWxkIFwic3ViXCIgLyBcInVzZXJfaWRcIi4pXG4gICAgICAgICAgICB0ID0gY3JlYXRlTW9ja1VzZXJUb2tlbihyLm1vY2tVc2VyVG9rZW4sIGUuX2FwcD8ub3B0aW9ucy5wcm9qZWN0SWQpO1xuICAgICAgICAgICAgY29uc3QgaSA9IHIubW9ja1VzZXJUb2tlbi5zdWIgfHwgci5tb2NrVXNlclRva2VuLnVzZXJfaWQ7XG4gICAgICAgICAgICBpZiAoIWkpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihOLklOVkFMSURfQVJHVU1FTlQsIFwibW9ja1VzZXJUb2tlbiBtdXN0IGNvbnRhaW4gJ3N1Yicgb3IgJ3VzZXJfaWQnIGZpZWxkIVwiKTtcbiAgICAgICAgICAgIG4gPSBuZXcgVXNlcihpKTtcbiAgICAgICAgfVxuICAgICAgICBlLl9hdXRoQ3JlZGVudGlhbHMgPSBuZXcgX19QUklWQVRFX0VtdWxhdG9yQXV0aENyZWRlbnRpYWxzUHJvdmlkZXIobmV3IF9fUFJJVkFURV9PQXV0aFRva2VuKHQsIG4pKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgYFF1ZXJ5YCByZWZlcnMgdG8gYSBxdWVyeSB3aGljaCB5b3UgY2FuIHJlYWQgb3IgbGlzdGVuIHRvLiBZb3UgY2FuIGFsc29cbiAqIGNvbnN0cnVjdCByZWZpbmVkIGBRdWVyeWAgb2JqZWN0cyBieSBhZGRpbmcgZmlsdGVycyBhbmQgb3JkZXJpbmcuXG4gKi8gY2xhc3MgUXVlcnkge1xuICAgIC8vIFRoaXMgaXMgdGhlIGxpdGUgdmVyc2lvbiBvZiB0aGUgUXVlcnkgY2xhc3MgaW4gdGhlIG1haW4gU0RLLlxuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yIHByb3RlY3RlZCAqL1xuICAgIGNvbnN0cnVjdG9yKGUsIFxuICAgIC8qKlxuICAgICAqIElmIHByb3ZpZGVkLCB0aGUgYEZpcmVzdG9yZURhdGFDb252ZXJ0ZXJgIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGluc3RhbmNlLlxuICAgICAqL1xuICAgIHQsIG4pIHtcbiAgICAgICAgdGhpcy5jb252ZXJ0ZXIgPSB0LCB0aGlzLl9xdWVyeSA9IG4sIFxuICAgICAgICAvKiogVGhlIHR5cGUgb2YgdGhpcyBGaXJlc3RvcmUgcmVmZXJlbmNlLiAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcInF1ZXJ5XCIsIHRoaXMuZmlyZXN0b3JlID0gZTtcbiAgICB9XG4gICAgd2l0aENvbnZlcnRlcihlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5maXJlc3RvcmUsIGUsIHRoaXMuX3F1ZXJ5KTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBgRG9jdW1lbnRSZWZlcmVuY2VgIHJlZmVycyB0byBhIGRvY3VtZW50IGxvY2F0aW9uIGluIGEgRmlyZXN0b3JlIGRhdGFiYXNlXG4gKiBhbmQgY2FuIGJlIHVzZWQgdG8gd3JpdGUsIHJlYWQsIG9yIGxpc3RlbiB0byB0aGUgbG9jYXRpb24uIFRoZSBkb2N1bWVudCBhdFxuICogdGhlIHJlZmVyZW5jZWQgbG9jYXRpb24gbWF5IG9yIG1heSBub3QgZXhpc3QuXG4gKi8gY2xhc3MgRG9jdW1lbnRSZWZlcmVuY2Uge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IoZSwgXG4gICAgLyoqXG4gICAgICogSWYgcHJvdmlkZWQsIHRoZSBgRmlyZXN0b3JlRGF0YUNvbnZlcnRlcmAgYXNzb2NpYXRlZCB3aXRoIHRoaXMgaW5zdGFuY2UuXG4gICAgICovXG4gICAgdCwgbikge1xuICAgICAgICB0aGlzLmNvbnZlcnRlciA9IHQsIHRoaXMuX2tleSA9IG4sIFxuICAgICAgICAvKiogVGhlIHR5cGUgb2YgdGhpcyBGaXJlc3RvcmUgcmVmZXJlbmNlLiAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcImRvY3VtZW50XCIsIHRoaXMuZmlyZXN0b3JlID0gZTtcbiAgICB9XG4gICAgZ2V0IF9wYXRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fa2V5LnBhdGg7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBkb2N1bWVudCdzIGlkZW50aWZpZXIgd2l0aGluIGl0cyBjb2xsZWN0aW9uLlxuICAgICAqLyAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9rZXkucGF0aC5sYXN0U2VnbWVudCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHBhdGggb2YgdGhlIHJlZmVyZW5jZWQgZG9jdW1lbnQgKHJlbGF0aXZlXG4gICAgICogdG8gdGhlIHJvb3Qgb2YgdGhlIGRhdGFiYXNlKS5cbiAgICAgKi8gICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9rZXkucGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGNvbGxlY3Rpb24gdGhpcyBgRG9jdW1lbnRSZWZlcmVuY2VgIGJlbG9uZ3MgdG8uXG4gICAgICovICAgIGdldCBwYXJlbnQoKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ29sbGVjdGlvblJlZmVyZW5jZSh0aGlzLmZpcmVzdG9yZSwgdGhpcy5jb252ZXJ0ZXIsIHRoaXMuX2tleS5wYXRoLnBvcExhc3QoKSk7XG4gICAgfVxuICAgIHdpdGhDb252ZXJ0ZXIoZSkge1xuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50UmVmZXJlbmNlKHRoaXMuZmlyZXN0b3JlLCBlLCB0aGlzLl9rZXkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgSlNPTi1zZXJpYWxpemFibGUgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBgRG9jdW1lbnRSZWZlcmVuY2VgIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQHJldHVybnMgYSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgb2JqZWN0LlxuICAgICAqLyAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBEb2N1bWVudFJlZmVyZW5jZS5fanNvblNjaGVtYVZlcnNpb24sXG4gICAgICAgICAgICByZWZlcmVuY2VQYXRoOiB0aGlzLl9rZXkudG9TdHJpbmcoKVxuICAgICAgICB9O1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbUpTT04oZSwgdCwgbikge1xuICAgICAgICBpZiAoX19QUklWQVRFX3ZhbGlkYXRlSlNPTih0LCBEb2N1bWVudFJlZmVyZW5jZS5fanNvblNjaGVtYSkpIHJldHVybiBuZXcgRG9jdW1lbnRSZWZlcmVuY2UoZSwgbiB8fCBudWxsLCBuZXcgRG9jdW1lbnRLZXkoUmVzb3VyY2VQYXRoLmZyb21TdHJpbmcodC5yZWZlcmVuY2VQYXRoKSkpO1xuICAgIH1cbn1cblxuRG9jdW1lbnRSZWZlcmVuY2UuX2pzb25TY2hlbWFWZXJzaW9uID0gXCJmaXJlc3RvcmUvZG9jdW1lbnRSZWZlcmVuY2UvMS4wXCIsIERvY3VtZW50UmVmZXJlbmNlLl9qc29uU2NoZW1hID0ge1xuICAgIHR5cGU6IHByb3BlcnR5KFwic3RyaW5nXCIsIERvY3VtZW50UmVmZXJlbmNlLl9qc29uU2NoZW1hVmVyc2lvbiksXG4gICAgcmVmZXJlbmNlUGF0aDogcHJvcGVydHkoXCJzdHJpbmdcIilcbn07XG5cbi8qKlxuICogQSBgQ29sbGVjdGlvblJlZmVyZW5jZWAgb2JqZWN0IGNhbiBiZSB1c2VkIGZvciBhZGRpbmcgZG9jdW1lbnRzLCBnZXR0aW5nXG4gKiBkb2N1bWVudCByZWZlcmVuY2VzLCBhbmQgcXVlcnlpbmcgZm9yIGRvY3VtZW50cyAodXNpbmcge0BsaW5rIChxdWVyeToxKX0pLlxuICovXG5jbGFzcyBDb2xsZWN0aW9uUmVmZXJlbmNlIGV4dGVuZHMgUXVlcnkge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IoZSwgdCwgbikge1xuICAgICAgICBzdXBlcihlLCB0LCBfX1BSSVZBVEVfbmV3UXVlcnlGb3JQYXRoKG4pKSwgdGhpcy5fcGF0aCA9IG4sIFxuICAgICAgICAvKiogVGhlIHR5cGUgb2YgdGhpcyBGaXJlc3RvcmUgcmVmZXJlbmNlLiAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcImNvbGxlY3Rpb25cIjtcbiAgICB9XG4gICAgLyoqIFRoZSBjb2xsZWN0aW9uJ3MgaWRlbnRpZmllci4gKi8gICAgZ2V0IGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcXVlcnkucGF0aC5sYXN0U2VnbWVudCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHBhdGggb2YgdGhlIHJlZmVyZW5jZWQgY29sbGVjdGlvbiAocmVsYXRpdmVcbiAgICAgKiB0byB0aGUgcm9vdCBvZiB0aGUgZGF0YWJhc2UpLlxuICAgICAqLyAgICBnZXQgcGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3F1ZXJ5LnBhdGguY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgcmVmZXJlbmNlIHRvIHRoZSBjb250YWluaW5nIGBEb2N1bWVudFJlZmVyZW5jZWAgaWYgdGhpcyBpcyBhXG4gICAgICogc3ViY29sbGVjdGlvbi4gSWYgdGhpcyBpc24ndCBhIHN1YmNvbGxlY3Rpb24sIHRoZSByZWZlcmVuY2UgaXMgbnVsbC5cbiAgICAgKi8gICAgZ2V0IHBhcmVudCgpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuX3BhdGgucG9wTGFzdCgpO1xuICAgICAgICByZXR1cm4gZS5pc0VtcHR5KCkgPyBudWxsIDogbmV3IERvY3VtZW50UmVmZXJlbmNlKHRoaXMuZmlyZXN0b3JlLCBcbiAgICAgICAgLyogY29udmVydGVyPSAqLyBudWxsLCBuZXcgRG9jdW1lbnRLZXkoZSkpO1xuICAgIH1cbiAgICB3aXRoQ29udmVydGVyKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb2xsZWN0aW9uUmVmZXJlbmNlKHRoaXMuZmlyZXN0b3JlLCBlLCB0aGlzLl9wYXRoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNvbGxlY3Rpb24oZSwgdCwgLi4ubikge1xuICAgIGlmIChlID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpLCBfX1BSSVZBVEVfdmFsaWRhdGVOb25FbXB0eUFyZ3VtZW50KFwiY29sbGVjdGlvblwiLCBcInBhdGhcIiwgdCksIGUgaW5zdGFuY2VvZiBGaXJlc3RvcmUkMSkge1xuICAgICAgICBjb25zdCByID0gUmVzb3VyY2VQYXRoLmZyb21TdHJpbmcodCwgLi4ubik7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfdmFsaWRhdGVDb2xsZWN0aW9uUGF0aChyKSwgbmV3IENvbGxlY3Rpb25SZWZlcmVuY2UoZSwgLyogY29udmVydGVyPSAqLyBudWxsLCByKTtcbiAgICB9XG4gICAge1xuICAgICAgICBpZiAoIShlIGluc3RhbmNlb2YgRG9jdW1lbnRSZWZlcmVuY2UgfHwgZSBpbnN0YW5jZW9mIENvbGxlY3Rpb25SZWZlcmVuY2UpKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoTi5JTlZBTElEX0FSR1VNRU5ULCBcIkV4cGVjdGVkIGZpcnN0IGFyZ3VtZW50IHRvIGNvbGxlY3Rpb24oKSB0byBiZSBhIENvbGxlY3Rpb25SZWZlcmVuY2UsIGEgRG9jdW1lbnRSZWZlcmVuY2Ugb3IgRmlyZWJhc2VGaXJlc3RvcmVcIik7XG4gICAgICAgIGNvbnN0IHIgPSBlLl9wYXRoLmNoaWxkKFJlc291cmNlUGF0aC5mcm9tU3RyaW5nKHQsIC4uLm4pKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV92YWxpZGF0ZUNvbGxlY3Rpb25QYXRoKHIpLCBuZXcgQ29sbGVjdGlvblJlZmVyZW5jZShlLmZpcmVzdG9yZSwgXG4gICAgICAgIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCwgcik7XG4gICAgfVxufVxuXG4vLyBUT0RPKGZpcmVzdG9yZWxpdGUpOiBDb25zaWRlciB1c2luZyBFcnJvckZhY3RvcnkgLVxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2ZpcmViYXNlL2ZpcmViYXNlLWpzLXNkay9ibG9iLzAxMzFlMWYvcGFja2FnZXMvdXRpbC9zcmMvZXJyb3JzLnRzI0wxMDZcbi8qKlxuICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIG5ldyBgUXVlcnlgIGluc3RhbmNlIHRoYXQgaW5jbHVkZXMgYWxsIGRvY3VtZW50cyBpbiB0aGVcbiAqIGRhdGFiYXNlIHRoYXQgYXJlIGNvbnRhaW5lZCBpbiBhIGNvbGxlY3Rpb24gb3Igc3ViY29sbGVjdGlvbiB3aXRoIHRoZVxuICogZ2l2ZW4gYGNvbGxlY3Rpb25JZGAuXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIEEgcmVmZXJlbmNlIHRvIHRoZSByb290IGBGaXJlc3RvcmVgIGluc3RhbmNlLlxuICogQHBhcmFtIGNvbGxlY3Rpb25JZCAtIElkZW50aWZpZXMgdGhlIGNvbGxlY3Rpb25zIHRvIHF1ZXJ5IG92ZXIuIEV2ZXJ5XG4gKiBjb2xsZWN0aW9uIG9yIHN1YmNvbGxlY3Rpb24gd2l0aCB0aGlzIElEIGFzIHRoZSBsYXN0IHNlZ21lbnQgb2YgaXRzIHBhdGhcbiAqIHdpbGwgYmUgaW5jbHVkZWQuIENhbm5vdCBjb250YWluIGEgc2xhc2guXG4gKiBAcmV0dXJucyBUaGUgY3JlYXRlZCBgUXVlcnlgLlxuICovIGZ1bmN0aW9uIGNvbGxlY3Rpb25Hcm91cChlLCB0KSB7XG4gICAgaWYgKGUgPSBfX1BSSVZBVEVfY2FzdChlLCBGaXJlc3RvcmUkMSksIF9fUFJJVkFURV92YWxpZGF0ZU5vbkVtcHR5QXJndW1lbnQoXCJjb2xsZWN0aW9uR3JvdXBcIiwgXCJjb2xsZWN0aW9uIGlkXCIsIHQpLCBcbiAgICB0LmluZGV4T2YoXCIvXCIpID49IDApIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihOLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIGNvbGxlY3Rpb24gSUQgJyR7dH0nIHBhc3NlZCB0byBmdW5jdGlvbiBjb2xsZWN0aW9uR3JvdXAoKS4gQ29sbGVjdGlvbiBJRHMgbXVzdCBub3QgY29udGFpbiAnLycuYCk7XG4gICAgcmV0dXJuIG5ldyBRdWVyeShlLCBcbiAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdRdWVyeUZvckNvbGxlY3Rpb25Hcm91cChlKSB7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1F1ZXJ5SW1wbChSZXNvdXJjZVBhdGguZW1wdHlQYXRoKCksIGUpO1xuICAgIH0odCkpO1xufVxuXG5mdW5jdGlvbiBkb2MoZSwgdCwgLi4ubikge1xuICAgIGlmIChlID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpLCBcbiAgICAvLyBXZSBhbGxvdyBvbWlzc2lvbiBvZiAncGF0aFN0cmluZycgYnV0IGV4cGxpY2l0bHkgcHJvaGliaXQgcGFzc2luZyBpbiBib3RoXG4gICAgLy8gJ3VuZGVmaW5lZCcgYW5kICdudWxsJy5cbiAgICAxID09PSBhcmd1bWVudHMubGVuZ3RoICYmICh0ID0gX19QUklWQVRFX0F1dG9JZC5uZXdJZCgpKSwgX19QUklWQVRFX3ZhbGlkYXRlTm9uRW1wdHlBcmd1bWVudChcImRvY1wiLCBcInBhdGhcIiwgdCksIFxuICAgIGUgaW5zdGFuY2VvZiBGaXJlc3RvcmUkMSkge1xuICAgICAgICBjb25zdCByID0gUmVzb3VyY2VQYXRoLmZyb21TdHJpbmcodCwgLi4ubik7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfdmFsaWRhdGVEb2N1bWVudFBhdGgociksIG5ldyBEb2N1bWVudFJlZmVyZW5jZShlLCBcbiAgICAgICAgLyogY29udmVydGVyPSAqLyBudWxsLCBuZXcgRG9jdW1lbnRLZXkocikpO1xuICAgIH1cbiAgICB7XG4gICAgICAgIGlmICghKGUgaW5zdGFuY2VvZiBEb2N1bWVudFJlZmVyZW5jZSB8fCBlIGluc3RhbmNlb2YgQ29sbGVjdGlvblJlZmVyZW5jZSkpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihOLklOVkFMSURfQVJHVU1FTlQsIFwiRXhwZWN0ZWQgZmlyc3QgYXJndW1lbnQgdG8gY29sbGVjdGlvbigpIHRvIGJlIGEgQ29sbGVjdGlvblJlZmVyZW5jZSwgYSBEb2N1bWVudFJlZmVyZW5jZSBvciBGaXJlYmFzZUZpcmVzdG9yZVwiKTtcbiAgICAgICAgY29uc3QgciA9IGUuX3BhdGguY2hpbGQoUmVzb3VyY2VQYXRoLmZyb21TdHJpbmcodCwgLi4ubikpO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3ZhbGlkYXRlRG9jdW1lbnRQYXRoKHIpLCBuZXcgRG9jdW1lbnRSZWZlcmVuY2UoZS5maXJlc3RvcmUsIGUgaW5zdGFuY2VvZiBDb2xsZWN0aW9uUmVmZXJlbmNlID8gZS5jb252ZXJ0ZXIgOiBudWxsLCBuZXcgRG9jdW1lbnRLZXkocikpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIHByb3ZpZGVkIHJlZmVyZW5jZXMgYXJlIGVxdWFsLlxuICpcbiAqIEBwYXJhbSBsZWZ0IC0gQSByZWZlcmVuY2UgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSByaWdodCAtIEEgcmVmZXJlbmNlIHRvIGNvbXBhcmUuXG4gKiBAcmV0dXJucyB0cnVlIGlmIHRoZSByZWZlcmVuY2VzIHBvaW50IHRvIHRoZSBzYW1lIGxvY2F0aW9uIGluIHRoZSBzYW1lXG4gKiBGaXJlc3RvcmUgZGF0YWJhc2UuXG4gKi8gZnVuY3Rpb24gcmVmRXF1YWwoZSwgdCkge1xuICAgIHJldHVybiBlID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpLCB0ID0gZ2V0TW9kdWxhckluc3RhbmNlKHQpLCAoZSBpbnN0YW5jZW9mIERvY3VtZW50UmVmZXJlbmNlIHx8IGUgaW5zdGFuY2VvZiBDb2xsZWN0aW9uUmVmZXJlbmNlKSAmJiAodCBpbnN0YW5jZW9mIERvY3VtZW50UmVmZXJlbmNlIHx8IHQgaW5zdGFuY2VvZiBDb2xsZWN0aW9uUmVmZXJlbmNlKSAmJiAoZS5maXJlc3RvcmUgPT09IHQuZmlyZXN0b3JlICYmIGUucGF0aCA9PT0gdC5wYXRoICYmIGUuY29udmVydGVyID09PSB0LmNvbnZlcnRlcik7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBwcm92aWRlZCBxdWVyaWVzIHBvaW50IHRvIHRoZSBzYW1lIGNvbGxlY3Rpb24gYW5kIGFwcGx5XG4gKiB0aGUgc2FtZSBjb25zdHJhaW50cy5cbiAqXG4gKiBAcGFyYW0gbGVmdCAtIEEgYFF1ZXJ5YCB0byBjb21wYXJlLlxuICogQHBhcmFtIHJpZ2h0IC0gQSBgUXVlcnlgIHRvIGNvbXBhcmUuXG4gKiBAcmV0dXJucyB0cnVlIGlmIHRoZSByZWZlcmVuY2VzIHBvaW50IHRvIHRoZSBzYW1lIGxvY2F0aW9uIGluIHRoZSBzYW1lXG4gKiBGaXJlc3RvcmUgZGF0YWJhc2UuXG4gKi8gZnVuY3Rpb24gcXVlcnlFcXVhbChlLCB0KSB7XG4gICAgcmV0dXJuIGUgPSBnZXRNb2R1bGFySW5zdGFuY2UoZSksIHQgPSBnZXRNb2R1bGFySW5zdGFuY2UodCksIGUgaW5zdGFuY2VvZiBRdWVyeSAmJiB0IGluc3RhbmNlb2YgUXVlcnkgJiYgKGUuZmlyZXN0b3JlID09PSB0LmZpcmVzdG9yZSAmJiBfX1BSSVZBVEVfcXVlcnlFcXVhbHMoZS5fcXVlcnksIHQuX3F1ZXJ5KSAmJiBlLmNvbnZlcnRlciA9PT0gdC5jb252ZXJ0ZXIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBjbiA9IFwiQXN5bmNRdWV1ZVwiO1xuXG5jbGFzcyBfX1BSSVZBVEVfQXN5bmNRdWV1ZUltcGwge1xuICAgIGNvbnN0cnVjdG9yKGUgPSBQcm9taXNlLnJlc29sdmUoKSkge1xuICAgICAgICAvLyBBIGxpc3Qgb2YgcmV0cnlhYmxlIG9wZXJhdGlvbnMuIFJldHJ5YWJsZSBvcGVyYXRpb25zIGFyZSBydW4gaW4gb3JkZXIgYW5kXG4gICAgICAgIC8vIHJldHJpZWQgd2l0aCBiYWNrb2ZmLlxuICAgICAgICB0aGlzLlh1ID0gW10sIFxuICAgICAgICAvLyBJcyB0aGlzIEFzeW5jUXVldWUgYmVpbmcgc2h1dCBkb3duPyBPbmNlIGl0IGlzIHNldCB0byB0cnVlLCBpdCB3aWxsIG5vdFxuICAgICAgICAvLyBiZSBjaGFuZ2VkIGFnYWluLlxuICAgICAgICB0aGlzLmVjID0gITEsIFxuICAgICAgICAvLyBPcGVyYXRpb25zIHNjaGVkdWxlZCB0byBiZSBxdWV1ZWQgaW4gdGhlIGZ1dHVyZS4gT3BlcmF0aW9ucyBhcmVcbiAgICAgICAgLy8gYXV0b21hdGljYWxseSByZW1vdmVkIGFmdGVyIHRoZXkgYXJlIHJ1biBvciBjYW5jZWxlZC5cbiAgICAgICAgdGhpcy50YyA9IFtdLCBcbiAgICAgICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgICAgICB0aGlzLm5jID0gbnVsbCwgXG4gICAgICAgIC8vIEZsYWcgc2V0IHdoaWxlIHRoZXJlJ3MgYW4gb3V0c3RhbmRpbmcgQXN5bmNRdWV1ZSBvcGVyYXRpb24sIHVzZWQgZm9yXG4gICAgICAgIC8vIGFzc2VydGlvbiBzYW5pdHktY2hlY2tzLlxuICAgICAgICB0aGlzLnJjID0gITEsIFxuICAgICAgICAvLyBFbmFibGVkIGR1cmluZyBzaHV0ZG93biBvbiBTYWZhcmkgdG8gcHJldmVudCBmdXR1cmUgYWNjZXNzIHRvIEluZGV4ZWREQi5cbiAgICAgICAgdGhpcy5zYyA9ICExLCBcbiAgICAgICAgLy8gTGlzdCBvZiBUaW1lcklkcyB0byBmYXN0LWZvcndhcmQgZGVsYXlzIGZvci5cbiAgICAgICAgdGhpcy5vYyA9IFtdLCBcbiAgICAgICAgLy8gQmFja29mZiB0aW1lciB1c2VkIHRvIHNjaGVkdWxlIHJldHJpZXMgZm9yIHJldHJ5YWJsZSBvcGVyYXRpb25zXG4gICAgICAgIHRoaXMuTV8gPSBuZXcgX19QUklWQVRFX0V4cG9uZW50aWFsQmFja29mZih0aGlzLCBcImFzeW5jX3F1ZXVlX3JldHJ5XCIgLyogVGltZXJJZC5Bc3luY1F1ZXVlUmV0cnkgKi8pLCBcbiAgICAgICAgLy8gVmlzaWJpbGl0eSBoYW5kbGVyIHRoYXQgdHJpZ2dlcnMgYW4gaW1tZWRpYXRlIHJldHJ5IG9mIGFsbCByZXRyeWFibGVcbiAgICAgICAgLy8gb3BlcmF0aW9ucy4gTWVhbnQgdG8gc3BlZWQgdXAgcmVjb3Zlcnkgd2hlbiB3ZSByZWdhaW4gZmlsZSBzeXN0ZW0gYWNjZXNzXG4gICAgICAgIC8vIGFmdGVyIHBhZ2UgY29tZXMgaW50byBmb3JlZ3JvdW5kLlxuICAgICAgICB0aGlzLl9jID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZSA9IGdldERvY3VtZW50KCk7XG4gICAgICAgICAgICBlICYmIF9fUFJJVkFURV9sb2dEZWJ1ZyhjbiwgXCJWaXNpYmlsaXR5IHN0YXRlIGNoYW5nZWQgdG8gXCIgKyBlLnZpc2liaWxpdHlTdGF0ZSksIFxuICAgICAgICAgICAgdGhpcy5NXy53XygpO1xuICAgICAgICB9LCB0aGlzLmFjID0gZTtcbiAgICAgICAgY29uc3QgdCA9IGdldERvY3VtZW50KCk7XG4gICAgICAgIHQgJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiB0LmFkZEV2ZW50TGlzdGVuZXIgJiYgdC5hZGRFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCB0aGlzLl9jKTtcbiAgICB9XG4gICAgZ2V0IGlzU2h1dHRpbmdEb3duKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lYztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhIG5ldyBvcGVyYXRpb24gdG8gdGhlIHF1ZXVlIHdpdGhvdXQgd2FpdGluZyBmb3IgaXQgdG8gY29tcGxldGUgKGkuZS5cbiAgICAgKiB3ZSBpZ25vcmUgdGhlIFByb21pc2UgcmVzdWx0KS5cbiAgICAgKi8gICAgZW5xdWV1ZUFuZEZvcmdldChlKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcbiAgICAgICAgdGhpcy5lbnF1ZXVlKGUpO1xuICAgIH1cbiAgICBlbnF1ZXVlQW5kRm9yZ2V0RXZlbldoaWxlUmVzdHJpY3RlZChlKSB7XG4gICAgICAgIHRoaXMudWMoKSwgXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcbiAgICAgICAgdGhpcy5jYyhlKTtcbiAgICB9XG4gICAgZW50ZXJSZXN0cmljdGVkTW9kZShlKSB7XG4gICAgICAgIGlmICghdGhpcy5lYykge1xuICAgICAgICAgICAgdGhpcy5lYyA9ICEwLCB0aGlzLnNjID0gZSB8fCAhMTtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBnZXREb2N1bWVudCgpO1xuICAgICAgICAgICAgdCAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIHQucmVtb3ZlRXZlbnRMaXN0ZW5lciAmJiB0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHRoaXMuX2MpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVucXVldWUoZSkge1xuICAgICAgICBpZiAodGhpcy51YygpLCB0aGlzLmVjKSBcbiAgICAgICAgLy8gUmV0dXJuIGEgUHJvbWlzZSB3aGljaCBuZXZlciByZXNvbHZlcy5cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKCgoKSA9PiB7fSkpO1xuICAgICAgICAvLyBDcmVhdGUgYSBkZWZlcnJlZCBQcm9taXNlIHRoYXQgd2UgY2FuIHJldHVybiB0byB0aGUgY2FsbGVlLiBUaGlzXG4gICAgICAgIC8vIGFsbG93cyB1cyB0byByZXR1cm4gYSBcImhhbmdpbmcgUHJvbWlzZVwiIG9ubHkgdG8gdGhlIGNhbGxlZSBhbmQgc3RpbGxcbiAgICAgICAgLy8gYWR2YW5jZSB0aGUgcXVldWUgZXZlbiB3aGVuIHRoZSBvcGVyYXRpb24gaXMgbm90IHJ1bi5cbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gbmV3IF9fUFJJVkFURV9EZWZlcnJlZDtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2MoKCgpID0+IHRoaXMuZWMgJiYgdGhpcy5zYyA/IFByb21pc2UucmVzb2x2ZSgpIDogKGUoKS50aGVuKHQucmVzb2x2ZSwgdC5yZWplY3QpLCBcbiAgICAgICAgdC5wcm9taXNlKSkpLnRoZW4oKCgpID0+IHQucHJvbWlzZSkpO1xuICAgIH1cbiAgICBlbnF1ZXVlUmV0cnlhYmxlKGUpIHtcbiAgICAgICAgdGhpcy5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiAodGhpcy5YdS5wdXNoKGUpLCB0aGlzLmxjKCkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJ1bnMgdGhlIG5leHQgb3BlcmF0aW9uIGZyb20gdGhlIHJldHJ5YWJsZSBxdWV1ZS4gSWYgdGhlIG9wZXJhdGlvbiBmYWlscyxcbiAgICAgKiByZXNjaGVkdWxlcyB3aXRoIGJhY2tvZmYuXG4gICAgICovICAgIGFzeW5jIGxjKCkge1xuICAgICAgICBpZiAoMCAhPT0gdGhpcy5YdS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5YdVswXSgpLCB0aGlzLlh1LnNoaWZ0KCksIHRoaXMuTV8ucmVzZXQoKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIV9fUFJJVkFURV9pc0luZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IoZSkpIHRocm93IGU7XG4gLy8gRmFpbHVyZSB3aWxsIGJlIGhhbmRsZWQgYnkgQXN5bmNRdWV1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoY24sIFwiT3BlcmF0aW9uIGZhaWxlZCB3aXRoIHJldHJ5YWJsZSBlcnJvcjogXCIgKyBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuWHUubGVuZ3RoID4gMCAmJiBcbiAgICAgICAgICAgIC8vIElmIHRoZXJlIGFyZSBhZGRpdGlvbmFsIG9wZXJhdGlvbnMsIHdlIHJlLXNjaGVkdWxlIGByZXRyeU5leHRPcCgpYC5cbiAgICAgICAgICAgIC8vIFRoaXMgaXMgbmVjZXNzYXJ5IHRvIHJ1biByZXRyeWFibGUgb3BlcmF0aW9ucyB0aGF0IGZhaWxlZCBkdXJpbmdcbiAgICAgICAgICAgIC8vIHRoZWlyIGluaXRpYWwgYXR0ZW1wdCBzaW5jZSB3ZSBkb24ndCBrbm93IHdoZXRoZXIgdGhleSBhcmUgYWxyZWFkeVxuICAgICAgICAgICAgLy8gZW5xdWV1ZWQuIElmLCBmb3IgZXhhbXBsZSwgYG9wMWAsIGBvcDJgLCBgb3AzYCBhcmUgZW5xdWV1ZWQgYW5kIGBvcDFgXG4gICAgICAgICAgICAvLyBuZWVkcyB0byAgYmUgcmUtcnVuLCB3ZSB3aWxsIHJ1biBgb3AxYCwgYG9wMWAsIGBvcDJgIHVzaW5nIHRoZVxuICAgICAgICAgICAgLy8gYWxyZWFkeSBlbnF1ZXVlZCBjYWxscyB0byBgcmV0cnlOZXh0T3AoKWAuIGBvcDMoKWAgd2lsbCB0aGVuIHJ1biBpbiB0aGVcbiAgICAgICAgICAgIC8vIGNhbGwgc2NoZWR1bGVkIGhlcmUuXG4gICAgICAgICAgICAvLyBTaW5jZSBgYmFja29mZkFuZFJ1bigpYCBjYW5jZWxzIGFuIGV4aXN0aW5nIGJhY2tvZmYgYW5kIHNjaGVkdWxlcyBhXG4gICAgICAgICAgICAvLyBuZXcgYmFja29mZiBvbiBldmVyeSBjYWxsLCB0aGVyZSBpcyBvbmx5IGV2ZXIgYSBzaW5nbGUgYWRkaXRpb25hbFxuICAgICAgICAgICAgLy8gb3BlcmF0aW9uIGluIHRoZSBxdWV1ZS5cbiAgICAgICAgICAgIHRoaXMuTV8ucF8oKCgpID0+IHRoaXMubGMoKSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNjKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuYWMudGhlbigoKCkgPT4gKHRoaXMucmMgPSAhMCwgZSgpLmNhdGNoKChlID0+IHtcbiAgICAgICAgICAgIHRoaXMubmMgPSBlLCB0aGlzLnJjID0gITE7XG4gICAgICAgICAgICAvLyBSZS10aHJvdyB0aGUgZXJyb3Igc28gdGhhdCB0aGlzLnRhaWwgYmVjb21lcyBhIHJlamVjdGVkIFByb21pc2UgYW5kXG4gICAgICAgICAgICAvLyBhbGwgZnVydGhlciBhdHRlbXB0cyB0byBjaGFpbiAodmlhIC50aGVuKSB3aWxsIGp1c3Qgc2hvcnQtY2lyY3VpdFxuICAgICAgICAgICAgLy8gYW5kIHJldHVybiB0aGUgcmVqZWN0ZWQgUHJvbWlzZS5cbiAgICAgICAgICAgIHRocm93IF9fUFJJVkFURV9sb2dFcnJvcihcIklOVEVSTkFMIFVOSEFORExFRCBFUlJPUjogXCIsIF9fUFJJVkFURV9nZXRNZXNzYWdlT3JTdGFjayhlKSksIFxuICAgICAgICAgICAgZTtcbiAgICAgICAgfSkpLnRoZW4oKGUgPT4gKHRoaXMucmMgPSAhMSwgZSkpKSkpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWMgPSB0LCB0O1xuICAgIH1cbiAgICBlbnF1ZXVlQWZ0ZXJEZWxheShlLCB0LCBuKSB7XG4gICAgICAgIHRoaXMudWMoKSwgXG4gICAgICAgIC8vIEZhc3QtZm9yd2FyZCBkZWxheXMgZm9yIHRpbWVySWRzIHRoYXQgaGF2ZSBiZWVuIG92ZXJyaWRkZW4uXG4gICAgICAgIHRoaXMub2MuaW5kZXhPZihlKSA+IC0xICYmICh0ID0gMCk7XG4gICAgICAgIGNvbnN0IHIgPSBEZWxheWVkT3BlcmF0aW9uLmNyZWF0ZUFuZFNjaGVkdWxlKHRoaXMsIGUsIHQsIG4sIChlID0+IHRoaXMuaGMoZSkpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMudGMucHVzaChyKSwgcjtcbiAgICB9XG4gICAgdWMoKSB7XG4gICAgICAgIHRoaXMubmMgJiYgZmFpbCg0NzEyNSwge1xuICAgICAgICAgICAgUGM6IF9fUFJJVkFURV9nZXRNZXNzYWdlT3JTdGFjayh0aGlzLm5jKVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdmVyaWZ5T3BlcmF0aW9uSW5Qcm9ncmVzcygpIHt9XG4gICAgLyoqXG4gICAgICogV2FpdHMgdW50aWwgYWxsIGN1cnJlbnRseSBxdWV1ZWQgdGFza3MgYXJlIGZpbmlzaGVkIGV4ZWN1dGluZy4gRGVsYXllZFxuICAgICAqIG9wZXJhdGlvbnMgYXJlIG5vdCBydW4uXG4gICAgICovICAgIGFzeW5jIFRjKCkge1xuICAgICAgICAvLyBPcGVyYXRpb25zIGluIHRoZSBxdWV1ZSBwcmlvciB0byBkcmFpbmluZyBtYXkgaGF2ZSBlbnF1ZXVlZCBhZGRpdGlvbmFsXG4gICAgICAgIC8vIG9wZXJhdGlvbnMuIEtlZXAgZHJhaW5pbmcgdGhlIHF1ZXVlIHVudGlsIHRoZSB0YWlsIGlzIG5vIGxvbmdlciBhZHZhbmNlZCxcbiAgICAgICAgLy8gd2hpY2ggaW5kaWNhdGVzIHRoYXQgbm8gbW9yZSBuZXcgb3BlcmF0aW9ucyB3ZXJlIGVucXVldWVkIGFuZCB0aGF0IGFsbFxuICAgICAgICAvLyBvcGVyYXRpb25zIHdlcmUgZXhlY3V0ZWQuXG4gICAgICAgIGxldCBlO1xuICAgICAgICBkbyB7XG4gICAgICAgICAgICBlID0gdGhpcy5hYywgYXdhaXQgZTtcbiAgICAgICAgfSB3aGlsZSAoZSAhPT0gdGhpcy5hYyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvciBUZXN0czogRGV0ZXJtaW5lIGlmIGEgZGVsYXllZCBvcGVyYXRpb24gd2l0aCBhIHBhcnRpY3VsYXIgVGltZXJJZFxuICAgICAqIGV4aXN0cy5cbiAgICAgKi8gICAgSWMoZSkge1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgdGhpcy50YykgaWYgKHQudGltZXJJZCA9PT0gZSkgcmV0dXJuICEwO1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvciBUZXN0czogUnVucyBzb21lIG9yIGFsbCBkZWxheWVkIG9wZXJhdGlvbnMgZWFybHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbGFzdFRpbWVySWQgLSBEZWxheWVkIG9wZXJhdGlvbnMgdXAgdG8gYW5kIGluY2x1ZGluZyB0aGlzIFRpbWVySWRcbiAgICAgKiB3aWxsIGJlIGRyYWluZWQuIFBhc3MgVGltZXJJZC5BbGwgdG8gcnVuIGFsbCBkZWxheWVkIG9wZXJhdGlvbnMuXG4gICAgICogQHJldHVybnMgYSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgb25jZSBhbGwgb3BlcmF0aW9ucyBoYXZlIGJlZW4gcnVuLlxuICAgICAqLyAgICBFYyhlKSB7XG4gICAgICAgIC8vIE5vdGUgdGhhdCBkcmFpbmluZyBtYXkgZ2VuZXJhdGUgbW9yZSBkZWxheWVkIG9wcywgc28gd2UgZG8gdGhhdCBmaXJzdC5cbiAgICAgICAgcmV0dXJuIHRoaXMuVGMoKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBSdW4gb3BzIGluIHRoZSBzYW1lIG9yZGVyIHRoZXknZCBydW4gaWYgdGhleSByYW4gbmF0dXJhbGx5LlxuICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlcyAqL1xuICAgICAgICAgICAgdGhpcy50Yy5zb3J0KCgoZSwgdCkgPT4gZS50YXJnZXRUaW1lTXMgLSB0LnRhcmdldFRpbWVNcykpO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMudGMpIGlmICh0LnNraXBEZWxheSgpLCBcImFsbFwiIC8qIFRpbWVySWQuQWxsICovICE9PSBlICYmIHQudGltZXJJZCA9PT0gZSkgYnJlYWs7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5UYygpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvciBUZXN0czogU2tpcCBhbGwgc3Vic2VxdWVudCBkZWxheXMgZm9yIGEgdGltZXIgaWQuXG4gICAgICovICAgIGRjKGUpIHtcbiAgICAgICAgdGhpcy5vYy5wdXNoKGUpO1xuICAgIH1cbiAgICAvKiogQ2FsbGVkIG9uY2UgYSBEZWxheWVkT3BlcmF0aW9uIGlzIHJ1biBvciBjYW5jZWxlZC4gKi8gICAgaGMoZSkge1xuICAgICAgICAvLyBOT1RFOiBpbmRleE9mIC8gc2xpY2UgYXJlIE8obiksIGJ1dCBkZWxheWVkT3BlcmF0aW9ucyBpcyBleHBlY3RlZCB0byBiZSBzbWFsbC5cbiAgICAgICAgY29uc3QgdCA9IHRoaXMudGMuaW5kZXhPZihlKTtcbiAgICAgICAgLyogZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlcyAqLyAgICAgICAgdGhpcy50Yy5zcGxpY2UodCwgMSk7XG4gICAgfVxufVxuXG4vKipcbiAqIENocm9tZSBpbmNsdWRlcyBFcnJvci5tZXNzYWdlIGluIEVycm9yLnN0YWNrLiBPdGhlciBicm93c2VycyBkbyBub3QuXG4gKiBUaGlzIHJldHVybnMgZXhwZWN0ZWQgb3V0cHV0IG9mIG1lc3NhZ2UgKyBzdGFjayB3aGVuIGF2YWlsYWJsZS5cbiAqIEBwYXJhbSBlcnJvciAtIEVycm9yIG9yIEZpcmVzdG9yZUVycm9yXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2dldE1lc3NhZ2VPclN0YWNrKGUpIHtcbiAgICBsZXQgdCA9IGUubWVzc2FnZSB8fCBcIlwiO1xuICAgIHJldHVybiBlLnN0YWNrICYmICh0ID0gZS5zdGFjay5pbmNsdWRlcyhlLm1lc3NhZ2UpID8gZS5zdGFjayA6IGUubWVzc2FnZSArIFwiXFxuXCIgKyBlLnN0YWNrKSwgXG4gICAgdDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2lzUGFydGlhbE9ic2VydmVyKGUpIHtcbiAgICAvKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBvYmogaXMgYW4gb2JqZWN0IGFuZCBjb250YWlucyBhdCBsZWFzdCBvbmUgb2YgdGhlIHNwZWNpZmllZFxuICogbWV0aG9kcy5cbiAqL1xuICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfaW1wbGVtZW50c0FueU1ldGhvZHMoZSwgdCkge1xuICAgICAgICBpZiAoXCJvYmplY3RcIiAhPSB0eXBlb2YgZSB8fCBudWxsID09PSBlKSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IG4gPSBlO1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdCkgaWYgKGUgaW4gbiAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIG5bZV0pIHJldHVybiAhMDtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgIC8qKlxuICogUmVwcmVzZW50cyB0aGUgdGFzayBvZiBsb2FkaW5nIGEgRmlyZXN0b3JlIGJ1bmRsZS4gSXQgcHJvdmlkZXMgcHJvZ3Jlc3Mgb2YgYnVuZGxlXG4gKiBsb2FkaW5nLCBhcyB3ZWxsIGFzIHRhc2sgY29tcGxldGlvbiBhbmQgZXJyb3IgZXZlbnRzLlxuICpcbiAqIFRoZSBBUEkgaXMgY29tcGF0aWJsZSB3aXRoIGBQcm9taXNlPExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3M+YC5cbiAqLyAoZSwgWyBcIm5leHRcIiwgXCJlcnJvclwiLCBcImNvbXBsZXRlXCIgXSk7XG59XG5cbmNsYXNzIExvYWRCdW5kbGVUYXNrIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlciA9IHt9LCB0aGlzLl90YXNrQ29tcGxldGlvblJlc29sdmVyID0gbmV3IF9fUFJJVkFURV9EZWZlcnJlZCwgXG4gICAgICAgIHRoaXMuX2xhc3RQcm9ncmVzcyA9IHtcbiAgICAgICAgICAgIHRhc2tTdGF0ZTogXCJSdW5uaW5nXCIsXG4gICAgICAgICAgICB0b3RhbEJ5dGVzOiAwLFxuICAgICAgICAgICAgdG90YWxEb2N1bWVudHM6IDAsXG4gICAgICAgICAgICBieXRlc0xvYWRlZDogMCxcbiAgICAgICAgICAgIGRvY3VtZW50c0xvYWRlZDogMFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlcnMgZnVuY3Rpb25zIHRvIGxpc3RlbiB0byBidW5kbGUgbG9hZGluZyBwcm9ncmVzcyBldmVudHMuXG4gICAgICogQHBhcmFtIG5leHQgLSBDYWxsZWQgd2hlbiB0aGVyZSBpcyBhIHByb2dyZXNzIHVwZGF0ZSBmcm9tIGJ1bmRsZSBsb2FkaW5nLiBUeXBpY2FsbHkgYG5leHRgIGNhbGxzIG9jY3VyXG4gICAgICogICBlYWNoIHRpbWUgYSBGaXJlc3RvcmUgZG9jdW1lbnQgaXMgbG9hZGVkIGZyb20gdGhlIGJ1bmRsZS5cbiAgICAgKiBAcGFyYW0gZXJyb3IgLSBDYWxsZWQgd2hlbiBhbiBlcnJvciBvY2N1cnMgZHVyaW5nIGJ1bmRsZSBsb2FkaW5nLiBUaGUgdGFzayBhYm9ydHMgYWZ0ZXIgcmVwb3J0aW5nIHRoZVxuICAgICAqICAgZXJyb3IsIGFuZCB0aGVyZSBzaG91bGQgYmUgbm8gbW9yZSB1cGRhdGVzIGFmdGVyIHRoaXMuXG4gICAgICogQHBhcmFtIGNvbXBsZXRlIC0gQ2FsbGVkIHdoZW4gdGhlIGxvYWRpbmcgdGFzayBpcyBjb21wbGV0ZS5cbiAgICAgKi8gICAgb25Qcm9ncmVzcyhlLCB0LCBuKSB7XG4gICAgICAgIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIgPSB7XG4gICAgICAgICAgICBuZXh0OiBlLFxuICAgICAgICAgICAgZXJyb3I6IHQsXG4gICAgICAgICAgICBjb21wbGV0ZTogblxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbXBsZW1lbnRzIHRoZSBgUHJvbWlzZTxMb2FkQnVuZGxlVGFza1Byb2dyZXNzPi5jYXRjaGAgaW50ZXJmYWNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9uUmVqZWN0ZWQgLSBDYWxsZWQgd2hlbiBhbiBlcnJvciBvY2N1cnMgZHVyaW5nIGJ1bmRsZSBsb2FkaW5nLlxuICAgICAqLyAgICBjYXRjaChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90YXNrQ29tcGxldGlvblJlc29sdmVyLnByb21pc2UuY2F0Y2goZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEltcGxlbWVudHMgdGhlIGBQcm9taXNlPExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3M+LnRoZW5gIGludGVyZmFjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvbkZ1bGZpbGxlZCAtIENhbGxlZCBvbiB0aGUgY29tcGxldGlvbiBvZiB0aGUgbG9hZGluZyB0YXNrIHdpdGggYSBmaW5hbCBgTG9hZEJ1bmRsZVRhc2tQcm9ncmVzc2AgdXBkYXRlLlxuICAgICAqICAgVGhlIHVwZGF0ZSB3aWxsIGFsd2F5cyBoYXZlIGl0cyBgdGFza1N0YXRlYCBzZXQgdG8gYFwiU3VjY2Vzc1wiYC5cbiAgICAgKiBAcGFyYW0gb25SZWplY3RlZCAtIENhbGxlZCB3aGVuIGFuIGVycm9yIG9jY3VycyBkdXJpbmcgYnVuZGxlIGxvYWRpbmcuXG4gICAgICovICAgIHRoZW4oZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGFza0NvbXBsZXRpb25SZXNvbHZlci5wcm9taXNlLnRoZW4oZSwgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE5vdGlmaWVzIGFsbCBvYnNlcnZlcnMgdGhhdCBidW5kbGUgbG9hZGluZyBoYXMgY29tcGxldGVkLCB3aXRoIGEgcHJvdmlkZWRcbiAgICAgKiBgTG9hZEJ1bmRsZVRhc2tQcm9ncmVzc2Agb2JqZWN0LlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi8gICAgX2NvbXBsZXRlV2l0aChlKSB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZVByb2dyZXNzKGUpLCB0aGlzLl9wcm9ncmVzc09ic2VydmVyLmNvbXBsZXRlICYmIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIuY29tcGxldGUoKSwgXG4gICAgICAgIHRoaXMuX3Rhc2tDb21wbGV0aW9uUmVzb2x2ZXIucmVzb2x2ZShlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTm90aWZpZXMgYWxsIG9ic2VydmVycyB0aGF0IGJ1bmRsZSBsb2FkaW5nIGhhcyBmYWlsZWQsIHdpdGggYSBwcm92aWRlZFxuICAgICAqIGBFcnJvcmAgYXMgdGhlIHJlYXNvbi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovICAgIF9mYWlsV2l0aChlKSB7XG4gICAgICAgIHRoaXMuX2xhc3RQcm9ncmVzcy50YXNrU3RhdGUgPSBcIkVycm9yXCIsIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIubmV4dCAmJiB0aGlzLl9wcm9ncmVzc09ic2VydmVyLm5leHQodGhpcy5fbGFzdFByb2dyZXNzKSwgXG4gICAgICAgIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIuZXJyb3IgJiYgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5lcnJvcihlKSwgdGhpcy5fdGFza0NvbXBsZXRpb25SZXNvbHZlci5yZWplY3QoZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE5vdGlmaWVzIGEgcHJvZ3Jlc3MgdXBkYXRlIG9mIGxvYWRpbmcgYSBidW5kbGUuXG4gICAgICogQHBhcmFtIHByb2dyZXNzIC0gVGhlIG5ldyBwcm9ncmVzcy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovICAgIF91cGRhdGVQcm9ncmVzcyhlKSB7XG4gICAgICAgIHRoaXMuX2xhc3RQcm9ncmVzcyA9IGUsIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIubmV4dCAmJiB0aGlzLl9wcm9ncmVzc09ic2VydmVyLm5leHQoZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBDb25zdGFudCB1c2VkIHRvIGluZGljYXRlIHRoZSBMUlUgZ2FyYmFnZSBjb2xsZWN0aW9uIHNob3VsZCBiZSBkaXNhYmxlZC5cbiAqIFNldCB0aGlzIHZhbHVlIGFzIHRoZSBgY2FjaGVTaXplQnl0ZXNgIG9uIHRoZSBzZXR0aW5ncyBwYXNzZWQgdG8gdGhlXG4gKiB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZS5cbiAqLyBjb25zdCBsbiA9IC0xO1xuXG4vKipcbiAqIFRoZSBDbG91ZCBGaXJlc3RvcmUgc2VydmljZSBpbnRlcmZhY2UuXG4gKlxuICogRG8gbm90IGNhbGwgdGhpcyBjb25zdHJ1Y3RvciBkaXJlY3RseS4gSW5zdGVhZCwgdXNlIHtAbGluayAoZ2V0RmlyZXN0b3JlOjEpfS5cbiAqLyBjbGFzcyBGaXJlc3RvcmUgZXh0ZW5kcyBGaXJlc3RvcmUkMSB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByKSB7XG4gICAgICAgIHN1cGVyKGUsIHQsIG4sIHIpLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgaXQncyBhIHtAbGluayBGaXJlc3RvcmV9IG9yIEZpcmVzdG9yZSBMaXRlIGluc3RhbmNlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJmaXJlc3RvcmVcIiwgdGhpcy5fcXVldWUgPSBuZXcgX19QUklWQVRFX0FzeW5jUXVldWVJbXBsLCB0aGlzLl9wZXJzaXN0ZW5jZUtleSA9IHI/Lm5hbWUgfHwgXCJbREVGQVVMVF1cIjtcbiAgICB9XG4gICAgYXN5bmMgX3Rlcm1pbmF0ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2ZpcmVzdG9yZUNsaWVudCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuX2ZpcmVzdG9yZUNsaWVudC50ZXJtaW5hdGUoKTtcbiAgICAgICAgICAgIHRoaXMuX3F1ZXVlID0gbmV3IF9fUFJJVkFURV9Bc3luY1F1ZXVlSW1wbChlKSwgdGhpcy5fZmlyZXN0b3JlQ2xpZW50ID0gdm9pZCAwLCBhd2FpdCBlO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIEluaXRpYWxpemVzIGEgbmV3IGluc3RhbmNlIG9mIHtAbGluayBGaXJlc3RvcmV9IHdpdGggdGhlIHByb3ZpZGVkIHNldHRpbmdzLlxuICogQ2FuIG9ubHkgYmUgY2FsbGVkIGJlZm9yZSBhbnkgb3RoZXIgZnVuY3Rpb24sIGluY2x1ZGluZ1xuICoge0BsaW5rIChnZXRGaXJlc3RvcmU6MSl9LiBJZiB0aGUgY3VzdG9tIHNldHRpbmdzIGFyZSBlbXB0eSwgdGhpcyBmdW5jdGlvbiBpc1xuICogZXF1aXZhbGVudCB0byBjYWxsaW5nIHtAbGluayAoZ2V0RmlyZXN0b3JlOjEpfS5cbiAqXG4gKiBAcGFyYW0gYXBwIC0gVGhlIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfSB3aXRoIHdoaWNoIHRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB3aWxsXG4gKiBiZSBhc3NvY2lhdGVkLlxuICogQHBhcmFtIHNldHRpbmdzIC0gQSBzZXR0aW5ncyBvYmplY3QgdG8gY29uZmlndXJlIHRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZS5cbiAqIEBwYXJhbSBkYXRhYmFzZUlkIC0gVGhlIG5hbWUgb2YgdGhlIGRhdGFiYXNlLlxuICogQHJldHVybnMgQSBuZXdseSBpbml0aWFsaXplZCB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZS5cbiAqLyBmdW5jdGlvbiBpbml0aWFsaXplRmlyZXN0b3JlKGUsIHQsIG4pIHtcbiAgICBuIHx8IChuID0gbHQpO1xuICAgIGNvbnN0IHIgPSBfZ2V0UHJvdmlkZXIoZSwgXCJmaXJlc3RvcmVcIik7XG4gICAgaWYgKHIuaXNJbml0aWFsaXplZChuKSkge1xuICAgICAgICBjb25zdCBlID0gci5nZXRJbW1lZGlhdGUoe1xuICAgICAgICAgICAgaWRlbnRpZmllcjogblxuICAgICAgICB9KSwgaSA9IHIuZ2V0T3B0aW9ucyhuKTtcbiAgICAgICAgaWYgKGRlZXBFcXVhbChpLCB0KSkgcmV0dXJuIGU7XG4gICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihOLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiaW5pdGlhbGl6ZUZpcmVzdG9yZSgpIGhhcyBhbHJlYWR5IGJlZW4gY2FsbGVkIHdpdGggZGlmZmVyZW50IG9wdGlvbnMuIFRvIGF2b2lkIHRoaXMgZXJyb3IsIGNhbGwgaW5pdGlhbGl6ZUZpcmVzdG9yZSgpIHdpdGggdGhlIHNhbWUgb3B0aW9ucyBhcyB3aGVuIGl0IHdhcyBvcmlnaW5hbGx5IGNhbGxlZCwgb3IgY2FsbCBnZXRGaXJlc3RvcmUoKSB0byByZXR1cm4gdGhlIGFscmVhZHkgaW5pdGlhbGl6ZWQgaW5zdGFuY2UuXCIpO1xuICAgIH1cbiAgICBpZiAodm9pZCAwICE9PSB0LmNhY2hlU2l6ZUJ5dGVzICYmIHZvaWQgMCAhPT0gdC5sb2NhbENhY2hlKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoTi5JTlZBTElEX0FSR1VNRU5ULCBcImNhY2hlIGFuZCBjYWNoZVNpemVCeXRlcyBjYW5ub3QgYmUgc3BlY2lmaWVkIGF0IHRoZSBzYW1lIHRpbWUgYXMgY2FjaGVTaXplQnl0ZXMgd2lsbGJlIGRlcHJlY2F0ZWQuIEluc3RlYWQsIHNwZWNpZnkgdGhlIGNhY2hlIHNpemUgaW4gdGhlIGNhY2hlIG9iamVjdFwiKTtcbiAgICBpZiAodm9pZCAwICE9PSB0LmNhY2hlU2l6ZUJ5dGVzICYmIC0xICE9PSB0LmNhY2hlU2l6ZUJ5dGVzICYmIHQuY2FjaGVTaXplQnl0ZXMgPCBCdCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKE4uSU5WQUxJRF9BUkdVTUVOVCwgXCJjYWNoZVNpemVCeXRlcyBtdXN0IGJlIGF0IGxlYXN0IDEwNDg1NzZcIik7XG4gICAgLy8gV29ya2Fyb3VuZCB0byBnZXQgY29va2llcyBpbiBGaXJlYmFzZSBTdHVkaW9cbiAgICAgICAgcmV0dXJuIHQuaG9zdCAmJiBpc0Nsb3VkV29ya3N0YXRpb24odC5ob3N0KSAmJiBwaW5nU2VydmVyKHQuaG9zdCksIHIuaW5pdGlhbGl6ZSh7XG4gICAgICAgIG9wdGlvbnM6IHQsXG4gICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogblxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBnZXRGaXJlc3RvcmUoZSwgbikge1xuICAgIGNvbnN0IHIgPSBcIm9iamVjdFwiID09IHR5cGVvZiBlID8gZSA6IGdldEFwcCgpLCBpID0gXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSA/IGUgOiBuIHx8IGx0LCBzID0gX2dldFByb3ZpZGVyKHIsIFwiZmlyZXN0b3JlXCIpLmdldEltbWVkaWF0ZSh7XG4gICAgICAgIGlkZW50aWZpZXI6IGlcbiAgICB9KTtcbiAgICBpZiAoIXMuX2luaXRpYWxpemVkKSB7XG4gICAgICAgIGNvbnN0IGUgPSBnZXREZWZhdWx0RW11bGF0b3JIb3N0bmFtZUFuZFBvcnQoXCJmaXJlc3RvcmVcIik7XG4gICAgICAgIGUgJiYgY29ubmVjdEZpcmVzdG9yZUVtdWxhdG9yKHMsIC4uLmUpO1xuICAgIH1cbiAgICByZXR1cm4gcztcbn1cblxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqLyBmdW5jdGlvbiBlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkKGUpIHtcbiAgICBpZiAoZS5fdGVybWluYXRlZCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKE4uRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJUaGUgY2xpZW50IGhhcyBhbHJlYWR5IGJlZW4gdGVybWluYXRlZC5cIik7XG4gICAgcmV0dXJuIGUuX2ZpcmVzdG9yZUNsaWVudCB8fCBfX1BSSVZBVEVfY29uZmlndXJlRmlyZXN0b3JlKGUpLCBlLl9maXJlc3RvcmVDbGllbnQ7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9jb25maWd1cmVGaXJlc3RvcmUoZSkge1xuICAgIGNvbnN0IHQgPSBlLl9mcmVlemVTZXR0aW5ncygpLCBuID0gZnVuY3Rpb24gX19QUklWQVRFX21ha2VEYXRhYmFzZUluZm8oZSwgdCwgbiwgcikge1xuICAgICAgICByZXR1cm4gbmV3IERhdGFiYXNlSW5mbyhlLCB0LCBuLCByLmhvc3QsIHIuc3NsLCByLmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcsIHIuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nLCBfX1BSSVZBVEVfY2xvbmVMb25nUG9sbGluZ09wdGlvbnMoci5leHBlcmltZW50YWxMb25nUG9sbGluZ09wdGlvbnMpLCByLnVzZUZldGNoU3RyZWFtcywgci5pc1VzaW5nRW11bGF0b3IpO1xuICAgIH0oZS5fZGF0YWJhc2VJZCwgZS5fYXBwPy5vcHRpb25zLmFwcElkIHx8IFwiXCIsIGUuX3BlcnNpc3RlbmNlS2V5LCB0KTtcbiAgICBlLl9jb21wb25lbnRzUHJvdmlkZXIgfHwgdC5sb2NhbENhY2hlPy5fb2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyICYmIHQubG9jYWxDYWNoZT8uX29ubGluZUNvbXBvbmVudFByb3ZpZGVyICYmIChlLl9jb21wb25lbnRzUHJvdmlkZXIgPSB7XG4gICAgICAgIF9vZmZsaW5lOiB0LmxvY2FsQ2FjaGUuX29mZmxpbmVDb21wb25lbnRQcm92aWRlcixcbiAgICAgICAgX29ubGluZTogdC5sb2NhbENhY2hlLl9vbmxpbmVDb21wb25lbnRQcm92aWRlclxuICAgIH0pLCBlLl9maXJlc3RvcmVDbGllbnQgPSBuZXcgRmlyZXN0b3JlQ2xpZW50KGUuX2F1dGhDcmVkZW50aWFscywgZS5fYXBwQ2hlY2tDcmVkZW50aWFscywgZS5fcXVldWUsIG4sIGUuX2NvbXBvbmVudHNQcm92aWRlciAmJiBmdW5jdGlvbiBfX1BSSVZBVEVfYnVpbGRDb21wb25lbnRQcm92aWRlcihlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlPy5fb25saW5lLmJ1aWxkKCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBfb2ZmbGluZTogZT8uX29mZmxpbmUuYnVpbGQodCksXG4gICAgICAgICAgICBfb25saW5lOiB0XG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICogQXR0ZW1wdHMgdG8gZW5hYmxlIHBlcnNpc3RlbnQgc3RvcmFnZSwgaWYgcG9zc2libGUuXG4gKlxuICogT24gZmFpbHVyZSwgYGVuYWJsZUluZGV4ZWREYlBlcnNpc3RlbmNlKClgIHdpbGwgcmVqZWN0IHRoZSBwcm9taXNlIG9yXG4gKiB0aHJvdyBhbiBleGNlcHRpb24uIFRoZXJlIGFyZSBzZXZlcmFsIHJlYXNvbnMgd2h5IHRoaXMgY2FuIGZhaWwsIHdoaWNoIGNhbiBiZVxuICogaWRlbnRpZmllZCBieSB0aGUgYGNvZGVgIG9uIHRoZSBlcnJvci5cbiAqXG4gKiAgICogZmFpbGVkLXByZWNvbmRpdGlvbjogVGhlIGFwcCBpcyBhbHJlYWR5IG9wZW4gaW4gYW5vdGhlciBicm93c2VyIHRhYi5cbiAqICAgKiB1bmltcGxlbWVudGVkOiBUaGUgYnJvd3NlciBpcyBpbmNvbXBhdGlibGUgd2l0aCB0aGUgb2ZmbGluZSBwZXJzaXN0ZW5jZVxuICogICAgIGltcGxlbWVudGF0aW9uLlxuICpcbiAqIE5vdGUgdGhhdCBldmVuIGFmdGVyIGEgZmFpbHVyZSwgdGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHdpbGwgcmVtYWluXG4gKiB1c2FibGUsIGhvd2V2ZXIgb2ZmbGluZSBwZXJzaXN0ZW5jZSB3aWxsIGJlIGRpc2FibGVkLlxuICpcbiAqIE5vdGU6IGBlbmFibGVJbmRleGVkRGJQZXJzaXN0ZW5jZSgpYCBtdXN0IGJlIGNhbGxlZCBiZWZvcmUgYW55IG90aGVyIGZ1bmN0aW9uc1xuICogKG90aGVyIHRoYW4ge0BsaW5rIGluaXRpYWxpemVGaXJlc3RvcmV9LCB7QGxpbmsgKGdldEZpcmVzdG9yZToxKX0gb3JcbiAqIHtAbGluayBjbGVhckluZGV4ZWREYlBlcnNpc3RlbmNlfS5cbiAqXG4gKiBQZXJzaXN0ZW5jZSBjYW5ub3QgYmUgdXNlZCBpbiBhIE5vZGUuanMgZW52aXJvbm1lbnQuXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIFRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB0byBlbmFibGUgcGVyc2lzdGVuY2UgZm9yLlxuICogQHBhcmFtIHBlcnNpc3RlbmNlU2V0dGluZ3MgLSBPcHRpb25hbCBzZXR0aW5ncyBvYmplY3QgdG8gY29uZmlndXJlXG4gKiBwZXJzaXN0ZW5jZS5cbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgcmVwcmVzZW50cyBzdWNjZXNzZnVsbHkgZW5hYmxpbmcgcGVyc2lzdGVudCBzdG9yYWdlLlxuICogQGRlcHJlY2F0ZWQgVGhpcyBmdW5jdGlvbiB3aWxsIGJlIHJlbW92ZWQgaW4gYSBmdXR1cmUgbWFqb3IgcmVsZWFzZS4gSW5zdGVhZCwgc2V0XG4gKiBgRmlyZXN0b3JlU2V0dGluZ3MubG9jYWxDYWNoZWAgdG8gYW4gaW5zdGFuY2Ugb2YgYFBlcnNpc3RlbnRMb2NhbENhY2hlYCB0b1xuICogdHVybiBvbiBJbmRleGVkRGIgY2FjaGUuIENhbGxpbmcgdGhpcyBmdW5jdGlvbiB3aGVuIGBGaXJlc3RvcmVTZXR0aW5ncy5sb2NhbENhY2hlYFxuICogaXMgYWxyZWFkeSBzcGVjaWZpZWQgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24uXG4gKi8gKGUuX2NvbXBvbmVudHNQcm92aWRlcikpO1xufVxuXG5mdW5jdGlvbiBlbmFibGVJbmRleGVkRGJQZXJzaXN0ZW5jZShlLCB0KSB7XG4gICAgX19QUklWQVRFX2xvZ1dhcm4oXCJlbmFibGVJbmRleGVkRGJQZXJzaXN0ZW5jZSgpIHdpbGwgYmUgZGVwcmVjYXRlZCBpbiB0aGUgZnV0dXJlLCB5b3UgY2FuIHVzZSBgRmlyZXN0b3JlU2V0dGluZ3MuY2FjaGVgIGluc3RlYWQuXCIpO1xuICAgIGNvbnN0IG4gPSBlLl9mcmVlemVTZXR0aW5ncygpO1xuICAgIHJldHVybiBfX1BSSVZBVEVfc2V0UGVyc2lzdGVuY2VQcm92aWRlcnMoZSwgT25saW5lQ29tcG9uZW50UHJvdmlkZXIucHJvdmlkZXIsIHtcbiAgICAgICAgYnVpbGQ6IGUgPT4gbmV3IF9fUFJJVkFURV9JbmRleGVkRGJPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIoZSwgbi5jYWNoZVNpemVCeXRlcywgdD8uZm9yY2VPd25lcnNoaXApXG4gICAgfSksIFByb21pc2UucmVzb2x2ZSgpO1xufVxuXG4vKipcbiAqIEF0dGVtcHRzIHRvIGVuYWJsZSBtdWx0aS10YWIgcGVyc2lzdGVudCBzdG9yYWdlLCBpZiBwb3NzaWJsZS4gSWYgZW5hYmxlZFxuICogYWNyb3NzIGFsbCB0YWJzLCBhbGwgb3BlcmF0aW9ucyBzaGFyZSBhY2Nlc3MgdG8gbG9jYWwgcGVyc2lzdGVuY2UsIGluY2x1ZGluZ1xuICogc2hhcmVkIGV4ZWN1dGlvbiBvZiBxdWVyaWVzIGFuZCBsYXRlbmN5LWNvbXBlbnNhdGVkIGxvY2FsIGRvY3VtZW50IHVwZGF0ZXNcbiAqIGFjcm9zcyBhbGwgY29ubmVjdGVkIGluc3RhbmNlcy5cbiAqXG4gKiBPbiBmYWlsdXJlLCBgZW5hYmxlTXVsdGlUYWJJbmRleGVkRGJQZXJzaXN0ZW5jZSgpYCB3aWxsIHJlamVjdCB0aGUgcHJvbWlzZSBvclxuICogdGhyb3cgYW4gZXhjZXB0aW9uLiBUaGVyZSBhcmUgc2V2ZXJhbCByZWFzb25zIHdoeSB0aGlzIGNhbiBmYWlsLCB3aGljaCBjYW4gYmVcbiAqIGlkZW50aWZpZWQgYnkgdGhlIGBjb2RlYCBvbiB0aGUgZXJyb3IuXG4gKlxuICogICAqIGZhaWxlZC1wcmVjb25kaXRpb246IFRoZSBhcHAgaXMgYWxyZWFkeSBvcGVuIGluIGFub3RoZXIgYnJvd3NlciB0YWIgYW5kXG4gKiAgICAgbXVsdGktdGFiIGlzIG5vdCBlbmFibGVkLlxuICogICAqIHVuaW1wbGVtZW50ZWQ6IFRoZSBicm93c2VyIGlzIGluY29tcGF0aWJsZSB3aXRoIHRoZSBvZmZsaW5lIHBlcnNpc3RlbmNlXG4gKiAgICAgaW1wbGVtZW50YXRpb24uXG4gKlxuICogTm90ZSB0aGF0IGV2ZW4gYWZ0ZXIgYSBmYWlsdXJlLCB0aGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2Ugd2lsbCByZW1haW5cbiAqIHVzYWJsZSwgaG93ZXZlciBvZmZsaW5lIHBlcnNpc3RlbmNlIHdpbGwgYmUgZGlzYWJsZWQuXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIFRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB0byBlbmFibGUgcGVyc2lzdGVuY2UgZm9yLlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCByZXByZXNlbnRzIHN1Y2Nlc3NmdWxseSBlbmFibGluZyBwZXJzaXN0ZW50XG4gKiBzdG9yYWdlLlxuICogQGRlcHJlY2F0ZWQgVGhpcyBmdW5jdGlvbiB3aWxsIGJlIHJlbW92ZWQgaW4gYSBmdXR1cmUgbWFqb3IgcmVsZWFzZS4gSW5zdGVhZCwgc2V0XG4gKiBgRmlyZXN0b3JlU2V0dGluZ3MubG9jYWxDYWNoZWAgdG8gYW4gaW5zdGFuY2Ugb2YgYFBlcnNpc3RlbnRMb2NhbENhY2hlYCB0b1xuICogdHVybiBvbiBpbmRleGVkZGIgY2FjaGUuIENhbGxpbmcgdGhpcyBmdW5jdGlvbiB3aGVuIGBGaXJlc3RvcmVTZXR0aW5ncy5sb2NhbENhY2hlYFxuICogaXMgYWxyZWFkeSBzcGVjaWZpZWQgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24uXG4gKi8gYXN5bmMgZnVuY3Rpb24gZW5hYmxlTXVsdGlUYWJJbmRleGVkRGJQZXJzaXN0ZW5jZShlKSB7XG4gICAgX19QUklWQVRFX2xvZ1dhcm4oXCJlbmFibGVNdWx0aVRhYkluZGV4ZWREYlBlcnNpc3RlbmNlKCkgd2lsbCBiZSBkZXByZWNhdGVkIGluIHRoZSBmdXR1cmUsIHlvdSBjYW4gdXNlIGBGaXJlc3RvcmVTZXR0aW5ncy5jYWNoZWAgaW5zdGVhZC5cIik7XG4gICAgY29uc3QgdCA9IGUuX2ZyZWV6ZVNldHRpbmdzKCk7XG4gICAgX19QUklWQVRFX3NldFBlcnNpc3RlbmNlUHJvdmlkZXJzKGUsIE9ubGluZUNvbXBvbmVudFByb3ZpZGVyLnByb3ZpZGVyLCB7XG4gICAgICAgIGJ1aWxkOiBlID0+IG5ldyBfX1BSSVZBVEVfTXVsdGlUYWJPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIoZSwgdC5jYWNoZVNpemVCeXRlcylcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBSZWdpc3RlcnMgYm90aCB0aGUgYE9mZmxpbmVDb21wb25lbnRQcm92aWRlcmAgYW5kIGBPbmxpbmVDb21wb25lbnRQcm92aWRlcmAuXG4gKiBJZiB0aGUgb3BlcmF0aW9uIGZhaWxzIHdpdGggYSByZWNvdmVyYWJsZSBlcnJvciAoc2VlXG4gKiBgY2FuUmVjb3ZlckZyb21JbmRleGVkRGJFcnJvcigpYCBiZWxvdyksIHRoZSByZXR1cm5lZCBQcm9taXNlIGlzIHJlamVjdGVkXG4gKiBidXQgdGhlIGNsaWVudCByZW1haW5zIHVzYWJsZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfc2V0UGVyc2lzdGVuY2VQcm92aWRlcnMoZSwgdCwgbikge1xuICAgIGlmICgoZSA9IF9fUFJJVkFURV9jYXN0KGUsIEZpcmVzdG9yZSkpLl9maXJlc3RvcmVDbGllbnQgfHwgZS5fdGVybWluYXRlZCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKE4uRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJGaXJlc3RvcmUgaGFzIGFscmVhZHkgYmVlbiBzdGFydGVkIGFuZCBwZXJzaXN0ZW5jZSBjYW4gbm8gbG9uZ2VyIGJlIGVuYWJsZWQuIFlvdSBjYW4gb25seSBlbmFibGUgcGVyc2lzdGVuY2UgYmVmb3JlIGNhbGxpbmcgYW55IG90aGVyIG1ldGhvZHMgb24gYSBGaXJlc3RvcmUgb2JqZWN0LlwiKTtcbiAgICBpZiAoZS5fY29tcG9uZW50c1Byb3ZpZGVyIHx8IGUuX2dldFNldHRpbmdzKCkubG9jYWxDYWNoZSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKE4uRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJTREsgY2FjaGUgaXMgYWxyZWFkeSBzcGVjaWZpZWQuXCIpO1xuICAgIGUuX2NvbXBvbmVudHNQcm92aWRlciA9IHtcbiAgICAgICAgX29ubGluZTogdCxcbiAgICAgICAgX29mZmxpbmU6IG5cbiAgICB9LCBfX1BSSVZBVEVfY29uZmlndXJlRmlyZXN0b3JlKGUpO1xufVxuXG4vKipcbiAqIENsZWFycyB0aGUgcGVyc2lzdGVudCBzdG9yYWdlLiBUaGlzIGluY2x1ZGVzIHBlbmRpbmcgd3JpdGVzIGFuZCBjYWNoZWRcbiAqIGRvY3VtZW50cy5cbiAqXG4gKiBNdXN0IGJlIGNhbGxlZCB3aGlsZSB0aGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgaXMgbm90IHN0YXJ0ZWQgKGFmdGVyIHRoZSBhcHAgaXNcbiAqIHRlcm1pbmF0ZWQgb3Igd2hlbiB0aGUgYXBwIGlzIGZpcnN0IGluaXRpYWxpemVkKS4gT24gc3RhcnR1cCwgdGhpcyBmdW5jdGlvblxuICogbXVzdCBiZSBjYWxsZWQgYmVmb3JlIG90aGVyIGZ1bmN0aW9ucyAob3RoZXIgdGhhbiB7QGxpbmtcbiAqIGluaXRpYWxpemVGaXJlc3RvcmV9IG9yIHtAbGluayAoZ2V0RmlyZXN0b3JlOjEpfSkpLiBJZiB0aGUge0BsaW5rIEZpcmVzdG9yZX1cbiAqIGluc3RhbmNlIGlzIHN0aWxsIHJ1bm5pbmcsIHRoZSBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQgd2l0aCB0aGUgZXJyb3IgY29kZVxuICogb2YgYGZhaWxlZC1wcmVjb25kaXRpb25gLlxuICpcbiAqIE5vdGU6IGBjbGVhckluZGV4ZWREYlBlcnNpc3RlbmNlKClgIGlzIHByaW1hcmlseSBpbnRlbmRlZCB0byBoZWxwIHdyaXRlXG4gKiByZWxpYWJsZSB0ZXN0cyB0aGF0IHVzZSBDbG91ZCBGaXJlc3RvcmUuIEl0IHVzZXMgYW4gZWZmaWNpZW50IG1lY2hhbmlzbSBmb3JcbiAqIGRyb3BwaW5nIGV4aXN0aW5nIGRhdGEgYnV0IGRvZXMgbm90IGF0dGVtcHQgdG8gc2VjdXJlbHkgb3ZlcndyaXRlIG9yXG4gKiBvdGhlcndpc2UgbWFrZSBjYWNoZWQgZGF0YSB1bnJlY292ZXJhYmxlLiBGb3IgYXBwbGljYXRpb25zIHRoYXQgYXJlIHNlbnNpdGl2ZVxuICogdG8gdGhlIGRpc2Nsb3N1cmUgb2YgY2FjaGVkIGRhdGEgaW4gYmV0d2VlbiB1c2VyIHNlc3Npb25zLCB3ZSBzdHJvbmdseVxuICogcmVjb21tZW5kIG5vdCBlbmFibGluZyBwZXJzaXN0ZW5jZSBhdCBhbGwuXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIFRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB0byBjbGVhciBwZXJzaXN0ZW5jZSBmb3IuXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IGlzIHJlc29sdmVkIHdoZW4gdGhlIHBlcnNpc3RlbnQgc3RvcmFnZSBpc1xuICogY2xlYXJlZC4gT3RoZXJ3aXNlLCB0aGUgcHJvbWlzZSBpcyByZWplY3RlZCB3aXRoIGFuIGVycm9yLlxuICovIGZ1bmN0aW9uIGNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2UoZSkge1xuICAgIGlmIChlLl9pbml0aWFsaXplZCAmJiAhZS5fdGVybWluYXRlZCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKE4uRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJQZXJzaXN0ZW5jZSBjYW4gb25seSBiZSBjbGVhcmVkIGJlZm9yZSBhIEZpcmVzdG9yZSBpbnN0YW5jZSBpcyBpbml0aWFsaXplZCBvciBhZnRlciBpdCBpcyB0ZXJtaW5hdGVkLlwiKTtcbiAgICBjb25zdCB0ID0gbmV3IF9fUFJJVkFURV9EZWZlcnJlZDtcbiAgICByZXR1cm4gZS5fcXVldWUuZW5xdWV1ZUFuZEZvcmdldEV2ZW5XaGlsZVJlc3RyaWN0ZWQoKGFzeW5jICgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9pbmRleGVkRGJDbGVhclBlcnNpc3RlbmNlKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIV9fUFJJVkFURV9TaW1wbGVEYi52KCkpIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZSArICR0O1xuICAgICAgICAgICAgICAgIGF3YWl0IF9fUFJJVkFURV9TaW1wbGVEYi5kZWxldGUodCk7XG4gICAgICAgICAgICB9KF9fUFJJVkFURV9pbmRleGVkRGJTdG9yYWdlUHJlZml4KGUuX2RhdGFiYXNlSWQsIGUuX3BlcnNpc3RlbmNlS2V5KSksIHQucmVzb2x2ZSgpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0LnJlamVjdChlKTtcbiAgICAgICAgfVxuICAgIH0pKSwgdC5wcm9taXNlO1xufVxuXG4vKipcbiAqIFdhaXRzIHVudGlsIGFsbCBjdXJyZW50bHkgcGVuZGluZyB3cml0ZXMgZm9yIHRoZSBhY3RpdmUgdXNlciBoYXZlIGJlZW5cbiAqIGFja25vd2xlZGdlZCBieSB0aGUgYmFja2VuZC5cbiAqXG4gKiBUaGUgcmV0dXJuZWQgcHJvbWlzZSByZXNvbHZlcyBpbW1lZGlhdGVseSBpZiB0aGVyZSBhcmUgbm8gb3V0c3RhbmRpbmcgd3JpdGVzLlxuICogT3RoZXJ3aXNlLCB0aGUgcHJvbWlzZSB3YWl0cyBmb3IgYWxsIHByZXZpb3VzbHkgaXNzdWVkIHdyaXRlcyAoaW5jbHVkaW5nXG4gKiB0aG9zZSB3cml0dGVuIGluIGEgcHJldmlvdXMgYXBwIHNlc3Npb24pLCBidXQgaXQgZG9lcyBub3Qgd2FpdCBmb3Igd3JpdGVzXG4gKiB0aGF0IHdlcmUgYWRkZWQgYWZ0ZXIgdGhlIGZ1bmN0aW9uIGlzIGNhbGxlZC4gSWYgeW91IHdhbnQgdG8gd2FpdCBmb3JcbiAqIGFkZGl0aW9uYWwgd3JpdGVzLCBjYWxsIGB3YWl0Rm9yUGVuZGluZ1dyaXRlcygpYCBhZ2Fpbi5cbiAqXG4gKiBBbnkgb3V0c3RhbmRpbmcgYHdhaXRGb3JQZW5kaW5nV3JpdGVzKClgIHByb21pc2VzIGFyZSByZWplY3RlZCBkdXJpbmcgdXNlclxuICogY2hhbmdlcy5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB3aGljaCByZXNvbHZlcyB3aGVuIGFsbCBjdXJyZW50bHkgcGVuZGluZyB3cml0ZXMgaGF2ZSBiZWVuXG4gKiBhY2tub3dsZWRnZWQgYnkgdGhlIGJhY2tlbmQuXG4gKi8gZnVuY3Rpb24gd2FpdEZvclBlbmRpbmdXcml0ZXMoZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50V2FpdEZvclBlbmRpbmdXcml0ZXMoZSkge1xuICAgICAgICBjb25zdCB0ID0gbmV3IF9fUFJJVkFURV9EZWZlcnJlZDtcbiAgICAgICAgcmV0dXJuIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBfX1BSSVZBVEVfc3luY0VuZ2luZVJlZ2lzdGVyUGVuZGluZ1dyaXRlc0NhbGxiYWNrKGF3YWl0IF9fUFJJVkFURV9nZXRTeW5jRW5naW5lKGUpLCB0KSkpLCBcbiAgICAgICAgdC5wcm9taXNlO1xuICAgIH0oZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZChlID0gX19QUklWQVRFX2Nhc3QoZSwgRmlyZXN0b3JlKSkpO1xufVxuXG4vKipcbiAqIFJlLWVuYWJsZXMgdXNlIG9mIHRoZSBuZXR3b3JrIGZvciB0aGlzIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIGFmdGVyIGEgcHJpb3JcbiAqIGNhbGwgdG8ge0BsaW5rIGRpc2FibGVOZXR3b3JrfS5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IGlzIHJlc29sdmVkIG9uY2UgdGhlIG5ldHdvcmsgaGFzIGJlZW4gZW5hYmxlZC5cbiAqLyBmdW5jdGlvbiBlbmFibGVOZXR3b3JrKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudEVuYWJsZU5ldHdvcmsoZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZChlID0gX19QUklWQVRFX2Nhc3QoZSwgRmlyZXN0b3JlKSkpO1xufVxuXG4vKipcbiAqIERpc2FibGVzIG5ldHdvcmsgdXNhZ2UgZm9yIHRoaXMgaW5zdGFuY2UuIEl0IGNhbiBiZSByZS1lbmFibGVkIHZpYSB7QGxpbmtcbiAqIGVuYWJsZU5ldHdvcmt9LiBXaGlsZSB0aGUgbmV0d29yayBpcyBkaXNhYmxlZCwgYW55IHNuYXBzaG90IGxpc3RlbmVycyxcbiAqIGBnZXREb2MoKWAgb3IgYGdldERvY3MoKWAgY2FsbHMgd2lsbCByZXR1cm4gcmVzdWx0cyBmcm9tIGNhY2hlLCBhbmQgYW55IHdyaXRlXG4gKiBvcGVyYXRpb25zIHdpbGwgYmUgcXVldWVkIHVudGlsIHRoZSBuZXR3b3JrIGlzIHJlc3RvcmVkLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgaXMgcmVzb2x2ZWQgb25jZSB0aGUgbmV0d29yayBoYXMgYmVlbiBkaXNhYmxlZC5cbiAqLyBmdW5jdGlvbiBkaXNhYmxlTmV0d29yayhlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnREaXNhYmxlTmV0d29yayhlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkKGUgPSBfX1BSSVZBVEVfY2FzdChlLCBGaXJlc3RvcmUpKSk7XG59XG5cbi8qKlxuICogVGVybWluYXRlcyB0aGUgcHJvdmlkZWQge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UuXG4gKlxuICogQWZ0ZXIgY2FsbGluZyBgdGVybWluYXRlKClgIG9ubHkgdGhlIGBjbGVhckluZGV4ZWREYlBlcnNpc3RlbmNlKClgIGZ1bmN0aW9uXG4gKiBtYXkgYmUgdXNlZC4gQW55IG90aGVyIGZ1bmN0aW9uIHdpbGwgdGhyb3cgYSBgRmlyZXN0b3JlRXJyb3JgLlxuICpcbiAqIFRvIHJlc3RhcnQgYWZ0ZXIgdGVybWluYXRpb24sIGNyZWF0ZSBhIG5ldyBpbnN0YW5jZSBvZiBGaXJlYmFzZUZpcmVzdG9yZSB3aXRoXG4gKiB7QGxpbmsgKGdldEZpcmVzdG9yZToxKX0uXG4gKlxuICogVGVybWluYXRpb24gZG9lcyBub3QgY2FuY2VsIGFueSBwZW5kaW5nIHdyaXRlcywgYW5kIGFueSBwcm9taXNlcyB0aGF0IGFyZVxuICogYXdhaXRpbmcgYSByZXNwb25zZSBmcm9tIHRoZSBzZXJ2ZXIgd2lsbCBub3QgYmUgcmVzb2x2ZWQuIElmIHlvdSBoYXZlXG4gKiBwZXJzaXN0ZW5jZSBlbmFibGVkLCB0aGUgbmV4dCB0aW1lIHlvdSBzdGFydCB0aGlzIGluc3RhbmNlLCBpdCB3aWxsIHJlc3VtZVxuICogc2VuZGluZyB0aGVzZSB3cml0ZXMgdG8gdGhlIHNlcnZlci5cbiAqXG4gKiBOb3RlOiBVbmRlciBub3JtYWwgY2lyY3Vtc3RhbmNlcywgY2FsbGluZyBgdGVybWluYXRlKClgIGlzIG5vdCByZXF1aXJlZC4gVGhpc1xuICogZnVuY3Rpb24gaXMgdXNlZnVsIG9ubHkgd2hlbiB5b3Ugd2FudCB0byBmb3JjZSB0aGlzIGluc3RhbmNlIHRvIHJlbGVhc2UgYWxsXG4gKiBvZiBpdHMgcmVzb3VyY2VzIG9yIGluIGNvbWJpbmF0aW9uIHdpdGggYGNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2UoKWAgdG9cbiAqIGVuc3VyZSB0aGF0IGFsbCBsb2NhbCBzdGF0ZSBpcyBkZXN0cm95ZWQgYmV0d2VlbiB0ZXN0IHJ1bnMuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCBpcyByZXNvbHZlZCB3aGVuIHRoZSBpbnN0YW5jZSBoYXMgYmVlbiBzdWNjZXNzZnVsbHlcbiAqIHRlcm1pbmF0ZWQuXG4gKi8gZnVuY3Rpb24gdGVybWluYXRlKGUpIHtcbiAgICByZXR1cm4gX3JlbW92ZVNlcnZpY2VJbnN0YW5jZShlLmFwcCwgXCJmaXJlc3RvcmVcIiwgZS5fZGF0YWJhc2VJZC5kYXRhYmFzZSksIGUuX2RlbGV0ZSgpO1xufVxuXG4vKipcbiAqIExvYWRzIGEgRmlyZXN0b3JlIGJ1bmRsZSBpbnRvIHRoZSBsb2NhbCBjYWNoZS5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gVGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHRvIGxvYWQgYnVuZGxlcyBmb3IuXG4gKiBAcGFyYW0gYnVuZGxlRGF0YSAtIEFuIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIGJ1bmRsZSB0byBiZSBsb2FkZWQuIFZhbGlkXG4gKiBvYmplY3RzIGFyZSBgQXJyYXlCdWZmZXJgLCBgUmVhZGFibGVTdHJlYW08VWludDhBcnJheT5gIG9yIGBzdHJpbmdgLlxuICpcbiAqIEByZXR1cm5zIEEgYExvYWRCdW5kbGVUYXNrYCBvYmplY3QsIHdoaWNoIG5vdGlmaWVzIGNhbGxlcnMgd2l0aCBwcm9ncmVzc1xuICogdXBkYXRlcywgYW5kIGNvbXBsZXRpb24gb3IgZXJyb3IgZXZlbnRzLiBJdCBjYW4gYmUgdXNlZCBhcyBhXG4gKiBgUHJvbWlzZTxMb2FkQnVuZGxlVGFza1Byb2dyZXNzPmAuXG4gKi8gZnVuY3Rpb24gbG9hZEJ1bmRsZShlLCB0KSB7XG4gICAgY29uc3QgbiA9IGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQoZSA9IF9fUFJJVkFURV9jYXN0KGUsIEZpcmVzdG9yZSkpLCByID0gbmV3IExvYWRCdW5kbGVUYXNrO1xuICAgIHJldHVybiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50TG9hZEJ1bmRsZShuLCBlLl9kYXRhYmFzZUlkLCB0LCByKSwgcjtcbn1cblxuLyoqXG4gKiBSZWFkcyBhIEZpcmVzdG9yZSB7QGxpbmsgUXVlcnl9IGZyb20gbG9jYWwgY2FjaGUsIGlkZW50aWZpZWQgYnkgdGhlIGdpdmVuXG4gKiBuYW1lLlxuICpcbiAqIFRoZSBuYW1lZCBxdWVyaWVzIGFyZSBwYWNrYWdlZCAgaW50byBidW5kbGVzIG9uIHRoZSBzZXJ2ZXIgc2lkZSAoYWxvbmdcbiAqIHdpdGggcmVzdWx0aW5nIGRvY3VtZW50cyksIGFuZCBsb2FkZWQgdG8gbG9jYWwgY2FjaGUgdXNpbmcgYGxvYWRCdW5kbGVgLiBPbmNlXG4gKiBpbiBsb2NhbCBjYWNoZSwgdXNlIHRoaXMgbWV0aG9kIHRvIGV4dHJhY3QgYSB7QGxpbmsgUXVlcnl9IGJ5IG5hbWUuXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIFRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB0byByZWFkIHRoZSBxdWVyeSBmcm9tLlxuICogQHBhcmFtIG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgcXVlcnkuXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IGlzIHJlc29sdmVkIHdpdGggdGhlIFF1ZXJ5IG9yIGBudWxsYC5cbiAqLyBmdW5jdGlvbiBuYW1lZFF1ZXJ5KGUsIHQpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudEdldE5hbWVkUXVlcnkoZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZChlID0gX19QUklWQVRFX2Nhc3QoZSwgRmlyZXN0b3JlKSksIHQpLnRoZW4oKHQgPT4gdCA/IG5ldyBRdWVyeShlLCBudWxsLCB0LnF1ZXJ5KSA6IG51bGwpKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlcHJlc2VudHMgYW4gYWdncmVnYXRpb24gdGhhdCBjYW4gYmUgcGVyZm9ybWVkIGJ5IEZpcmVzdG9yZS5cbiAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xuY2xhc3MgQWdncmVnYXRlRmllbGQge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBBZ2dyZWdhdGVGaWVsZDxUPlxuICAgICAqIEBwYXJhbSBhZ2dyZWdhdGVUeXBlIFNwZWNpZmllcyB0aGUgdHlwZSBvZiBhZ2dyZWdhdGlvbiBvcGVyYXRpb24gdG8gcGVyZm9ybS5cbiAgICAgKiBAcGFyYW0gX2ludGVybmFsRmllbGRQYXRoIE9wdGlvbmFsbHkgc3BlY2lmaWVzIHRoZSBmaWVsZCB0aGF0IGlzIGFnZ3JlZ2F0ZWQuXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZSA9IFwiY291bnRcIiwgdCkge1xuICAgICAgICB0aGlzLl9pbnRlcm5hbEZpZWxkUGF0aCA9IHQsIFxuICAgICAgICAvKiogQSB0eXBlIHN0cmluZyB0byB1bmlxdWVseSBpZGVudGlmeSBpbnN0YW5jZXMgb2YgdGhpcyBjbGFzcy4gKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJBZ2dyZWdhdGVGaWVsZFwiLCB0aGlzLmFnZ3JlZ2F0ZVR5cGUgPSBlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBUaGUgcmVzdWx0cyBvZiBleGVjdXRpbmcgYW4gYWdncmVnYXRpb24gcXVlcnkuXG4gKi8gY2xhc3MgQWdncmVnYXRlUXVlcnlTbmFwc2hvdCB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuKSB7XG4gICAgICAgIHRoaXMuX3VzZXJEYXRhV3JpdGVyID0gdCwgdGhpcy5fZGF0YSA9IG4sIFxuICAgICAgICAvKiogQSB0eXBlIHN0cmluZyB0byB1bmlxdWVseSBpZGVudGlmeSBpbnN0YW5jZXMgb2YgdGhpcyBjbGFzcy4gKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJBZ2dyZWdhdGVRdWVyeVNuYXBzaG90XCIsIHRoaXMucXVlcnkgPSBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSByZXN1bHRzIG9mIHRoZSBhZ2dyZWdhdGlvbnMgcGVyZm9ybWVkIG92ZXIgdGhlIHVuZGVybHlpbmdcbiAgICAgKiBxdWVyeS5cbiAgICAgKlxuICAgICAqIFRoZSBrZXlzIG9mIHRoZSByZXR1cm5lZCBvYmplY3Qgd2lsbCBiZSB0aGUgc2FtZSBhcyB0aG9zZSBvZiB0aGVcbiAgICAgKiBgQWdncmVnYXRlU3BlY2Agb2JqZWN0IHNwZWNpZmllZCB0byB0aGUgYWdncmVnYXRpb24gbWV0aG9kLCBhbmQgdGhlIHZhbHVlc1xuICAgICAqIHdpbGwgYmUgdGhlIGNvcnJlc3BvbmRpbmcgYWdncmVnYXRpb24gcmVzdWx0LlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIHJlc3VsdHMgb2YgdGhlIGFnZ3JlZ2F0aW9ucyBwZXJmb3JtZWQgb3ZlciB0aGUgdW5kZXJseWluZ1xuICAgICAqIHF1ZXJ5LlxuICAgICAqLyAgICBkYXRhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdXNlckRhdGFXcml0ZXIuY29udmVydE9iamVjdE1hcCh0aGlzLl9kYXRhKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGltbXV0YWJsZSBvYmplY3QgcmVwcmVzZW50aW5nIGFuIGFycmF5IG9mIGJ5dGVzLlxuICovIGNsYXNzIEJ5dGVzIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5fYnl0ZVN0cmluZyA9IGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgYEJ5dGVzYCBvYmplY3QgZnJvbSB0aGUgZ2l2ZW4gQmFzZTY0IHN0cmluZywgY29udmVydGluZyBpdCB0b1xuICAgICAqIGJ5dGVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGJhc2U2NCAtIFRoZSBCYXNlNjQgc3RyaW5nIHVzZWQgdG8gY3JlYXRlIHRoZSBgQnl0ZXNgIG9iamVjdC5cbiAgICAgKi8gICAgc3RhdGljIGZyb21CYXNlNjRTdHJpbmcoZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBCeXRlcyhCeXRlU3RyaW5nLmZyb21CYXNlNjRTdHJpbmcoZSkpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoTi5JTlZBTElEX0FSR1VNRU5ULCBcIkZhaWxlZCB0byBjb25zdHJ1Y3QgZGF0YSBmcm9tIEJhc2U2NCBzdHJpbmc6IFwiICsgZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBgQnl0ZXNgIG9iamVjdCBmcm9tIHRoZSBnaXZlbiBVaW50OEFycmF5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGFycmF5IC0gVGhlIFVpbnQ4QXJyYXkgdXNlZCB0byBjcmVhdGUgdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqLyAgICBzdGF0aWMgZnJvbVVpbnQ4QXJyYXkoZSkge1xuICAgICAgICByZXR1cm4gbmV3IEJ5dGVzKEJ5dGVTdHJpbmcuZnJvbVVpbnQ4QXJyYXkoZSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB1bmRlcmx5aW5nIGJ5dGVzIGFzIGEgQmFzZTY0LWVuY29kZWQgc3RyaW5nLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIEJhc2U2NC1lbmNvZGVkIHN0cmluZyBjcmVhdGVkIGZyb20gdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqLyAgICB0b0Jhc2U2NCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J5dGVTdHJpbmcudG9CYXNlNjQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdW5kZXJseWluZyBieXRlcyBpbiBhIG5ldyBgVWludDhBcnJheWAuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgVWludDhBcnJheSBjcmVhdGVkIGZyb20gdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqLyAgICB0b1VpbnQ4QXJyYXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ieXRlU3RyaW5nLnRvVWludDhBcnJheSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBgQnl0ZXNgIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBgQnl0ZXNgIG9iamVjdC5cbiAgICAgKi8gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBcIkJ5dGVzKGJhc2U2NDogXCIgKyB0aGlzLnRvQmFzZTY0KCkgKyBcIilcIjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgYEJ5dGVzYCBvYmplY3QgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBgQnl0ZXNgIG9iamVjdCB0byBjb21wYXJlIGFnYWluc3QuXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGlzIGBCeXRlc2Agb2JqZWN0IGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICovICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnl0ZVN0cmluZy5pc0VxdWFsKGUuX2J5dGVTdHJpbmcpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgSlNPTi1zZXJpYWxpemFibGUgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBgQnl0ZXNgIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQHJldHVybnMgYSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgb2JqZWN0LlxuICAgICAqLyAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBCeXRlcy5fanNvblNjaGVtYVZlcnNpb24sXG4gICAgICAgICAgICBieXRlczogdGhpcy50b0Jhc2U2NCgpXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJ1aWxkcyBhIGBCeXRlc2AgaW5zdGFuY2UgZnJvbSBhIEpTT04gb2JqZWN0IGNyZWF0ZWQgYnkge0BsaW5rIEJ5dGVzLnRvSlNPTn0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ganNvbiBhIEpTT04gb2JqZWN0IHJlcHJlc2VudGlvbiBvZiBhIGBCeXRlc2AgaW5zdGFuY2VcbiAgICAgKiBAcmV0dXJucyBhbiBpbnN0YW5jZSBvZiB7QGxpbmsgQnl0ZXN9IGlmIHRoZSBKU09OIG9iamVjdCBjb3VsZCBiZSBwYXJzZWQuIFRocm93cyBhXG4gICAgICoge0BsaW5rIEZpcmVzdG9yZUVycm9yfSBpZiBhbiBlcnJvciBvY2N1cnMuXG4gICAgICovICAgIHN0YXRpYyBmcm9tSlNPTihlKSB7XG4gICAgICAgIGlmIChfX1BSSVZBVEVfdmFsaWRhdGVKU09OKGUsIEJ5dGVzLl9qc29uU2NoZW1hKSkgcmV0dXJuIEJ5dGVzLmZyb21CYXNlNjRTdHJpbmcoZS5ieXRlcyk7XG4gICAgfVxufVxuXG5CeXRlcy5fanNvblNjaGVtYVZlcnNpb24gPSBcImZpcmVzdG9yZS9ieXRlcy8xLjBcIiwgQnl0ZXMuX2pzb25TY2hlbWEgPSB7XG4gICAgdHlwZTogcHJvcGVydHkoXCJzdHJpbmdcIiwgQnl0ZXMuX2pzb25TY2hlbWFWZXJzaW9uKSxcbiAgICBieXRlczogcHJvcGVydHkoXCJzdHJpbmdcIilcbn07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgYEZpZWxkUGF0aGAgcmVmZXJzIHRvIGEgZmllbGQgaW4gYSBkb2N1bWVudC4gVGhlIHBhdGggbWF5IGNvbnNpc3Qgb2YgYVxuICogc2luZ2xlIGZpZWxkIG5hbWUgKHJlZmVycmluZyB0byBhIHRvcC1sZXZlbCBmaWVsZCBpbiB0aGUgZG9jdW1lbnQpLCBvciBhXG4gKiBsaXN0IG9mIGZpZWxkIG5hbWVzIChyZWZlcnJpbmcgdG8gYSBuZXN0ZWQgZmllbGQgaW4gdGhlIGRvY3VtZW50KS5cbiAqXG4gKiBDcmVhdGUgYSBgRmllbGRQYXRoYCBieSBwcm92aWRpbmcgZmllbGQgbmFtZXMuIElmIG1vcmUgdGhhbiBvbmUgZmllbGRcbiAqIG5hbWUgaXMgcHJvdmlkZWQsIHRoZSBwYXRoIHdpbGwgcG9pbnQgdG8gYSBuZXN0ZWQgZmllbGQgaW4gYSBkb2N1bWVudC5cbiAqL1xuY2xhc3MgRmllbGRQYXRoIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgYEZpZWxkUGF0aGAgZnJvbSB0aGUgcHJvdmlkZWQgZmllbGQgbmFtZXMuIElmIG1vcmUgdGhhbiBvbmUgZmllbGRcbiAgICAgKiBuYW1lIGlzIHByb3ZpZGVkLCB0aGUgcGF0aCB3aWxsIHBvaW50IHRvIGEgbmVzdGVkIGZpZWxkIGluIGEgZG9jdW1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmllbGROYW1lcyAtIEEgbGlzdCBvZiBmaWVsZCBuYW1lcy5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvciguLi5lKSB7XG4gICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgZS5sZW5ndGg7ICsrdCkgaWYgKDAgPT09IGVbdF0ubGVuZ3RoKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoTi5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgZmllbGQgbmFtZSBhdCBhcmd1bWVudCAkKGkgKyAxKS4gRmllbGQgbmFtZXMgbXVzdCBub3QgYmUgZW1wdHkuXCIpO1xuICAgICAgICB0aGlzLl9pbnRlcm5hbFBhdGggPSBuZXcgRmllbGRQYXRoJDEoZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGBGaWVsZFBhdGhgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgYEZpZWxkUGF0aGAgdG8gY29tcGFyZSBhZ2FpbnN0LlxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhpcyBgRmllbGRQYXRoYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqLyAgICBpc0VxdWFsKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ludGVybmFsUGF0aC5pc0VxdWFsKGUuX2ludGVybmFsUGF0aCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgYSBzcGVjaWFsIHNlbnRpbmVsIGBGaWVsZFBhdGhgIHRvIHJlZmVyIHRvIHRoZSBJRCBvZiBhIGRvY3VtZW50LlxuICogSXQgY2FuIGJlIHVzZWQgaW4gcXVlcmllcyB0byBzb3J0IG9yIGZpbHRlciBieSB0aGUgZG9jdW1lbnQgSUQuXG4gKi8gZnVuY3Rpb24gZG9jdW1lbnRJZCgpIHtcbiAgICByZXR1cm4gbmV3IEZpZWxkUGF0aChrKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogU2VudGluZWwgdmFsdWVzIHRoYXQgY2FuIGJlIHVzZWQgd2hlbiB3cml0aW5nIGRvY3VtZW50IGZpZWxkcyB3aXRoIGBzZXQoKWBcbiAqIG9yIGB1cGRhdGUoKWAuXG4gKi8gY2xhc3MgRmllbGRWYWx1ZSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIF9tZXRob2ROYW1lIC0gVGhlIHB1YmxpYyBBUEkgZW5kcG9pbnQgdGhhdCByZXR1cm5zIHRoaXMgY2xhc3MuXG4gICAgICogQGhpZGVjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5fbWV0aG9kTmFtZSA9IGU7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbW11dGFibGUgb2JqZWN0IHJlcHJlc2VudGluZyBhIGdlb2dyYXBoaWMgbG9jYXRpb24gaW4gRmlyZXN0b3JlLiBUaGVcbiAqIGxvY2F0aW9uIGlzIHJlcHJlc2VudGVkIGFzIGxhdGl0dWRlL2xvbmdpdHVkZSBwYWlyLlxuICpcbiAqIExhdGl0dWRlIHZhbHVlcyBhcmUgaW4gdGhlIHJhbmdlIG9mIFstOTAsIDkwXS5cbiAqIExvbmdpdHVkZSB2YWx1ZXMgYXJlIGluIHRoZSByYW5nZSBvZiBbLTE4MCwgMTgwXS5cbiAqLyBjbGFzcyBHZW9Qb2ludCB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBpbW11dGFibGUgYEdlb1BvaW50YCBvYmplY3Qgd2l0aCB0aGUgcHJvdmlkZWQgbGF0aXR1ZGUgYW5kXG4gICAgICogbG9uZ2l0dWRlIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gbGF0aXR1ZGUgLSBUaGUgbGF0aXR1ZGUgYXMgbnVtYmVyIGJldHdlZW4gLTkwIGFuZCA5MC5cbiAgICAgKiBAcGFyYW0gbG9uZ2l0dWRlIC0gVGhlIGxvbmdpdHVkZSBhcyBudW1iZXIgYmV0d2VlbiAtMTgwIGFuZCAxODAuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICBpZiAoIWlzRmluaXRlKGUpIHx8IGUgPCAtOTAgfHwgZSA+IDkwKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoTi5JTlZBTElEX0FSR1VNRU5ULCBcIkxhdGl0dWRlIG11c3QgYmUgYSBudW1iZXIgYmV0d2VlbiAtOTAgYW5kIDkwLCBidXQgd2FzOiBcIiArIGUpO1xuICAgICAgICBpZiAoIWlzRmluaXRlKHQpIHx8IHQgPCAtMTgwIHx8IHQgPiAxODApIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihOLklOVkFMSURfQVJHVU1FTlQsIFwiTG9uZ2l0dWRlIG11c3QgYmUgYSBudW1iZXIgYmV0d2VlbiAtMTgwIGFuZCAxODAsIGJ1dCB3YXM6IFwiICsgdCk7XG4gICAgICAgIHRoaXMuX2xhdCA9IGUsIHRoaXMuX2xvbmcgPSB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgbGF0aXR1ZGUgb2YgdGhpcyBgR2VvUG9pbnRgIGluc3RhbmNlLlxuICAgICAqLyAgICBnZXQgbGF0aXR1ZGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9sYXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBsb25naXR1ZGUgb2YgdGhpcyBgR2VvUG9pbnRgIGluc3RhbmNlLlxuICAgICAqLyAgICBnZXQgbG9uZ2l0dWRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbG9uZztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgYEdlb1BvaW50YCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIC0gVGhlIGBHZW9Qb2ludGAgdG8gY29tcGFyZSBhZ2FpbnN0LlxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhpcyBgR2VvUG9pbnRgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICovICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbGF0ID09PSBlLl9sYXQgJiYgdGhpcy5fbG9uZyA9PT0gZS5fbG9uZztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWN0dWFsbHkgcHJpdmF0ZSB0byBKUyBjb25zdW1lcnMgb2Ygb3VyIEFQSSwgc28gdGhpcyBmdW5jdGlvbiBpcyBwcmVmaXhlZFxuICAgICAqIHdpdGggYW4gdW5kZXJzY29yZS5cbiAgICAgKi8gICAgX2NvbXBhcmVUbyhlKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcih0aGlzLl9sYXQsIGUuX2xhdCkgfHwgX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IodGhpcy5fbG9uZywgZS5fbG9uZyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBKU09OLXNlcmlhbGl6YWJsZSByZXByZXNlbnRhdGlvbiBvZiB0aGlzIGBHZW9Qb2ludGAgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBhIEpTT04gcmVwcmVzZW50YXRpb24gb2YgdGhpcyBvYmplY3QuXG4gICAgICovICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGxhdGl0dWRlOiB0aGlzLl9sYXQsXG4gICAgICAgICAgICBsb25naXR1ZGU6IHRoaXMuX2xvbmcsXG4gICAgICAgICAgICB0eXBlOiBHZW9Qb2ludC5fanNvblNjaGVtYVZlcnNpb25cbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQnVpbGRzIGEgYEdlb1BvaW50YCBpbnN0YW5jZSBmcm9tIGEgSlNPTiBvYmplY3QgY3JlYXRlZCBieSB7QGxpbmsgR2VvUG9pbnQudG9KU09OfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBqc29uIGEgSlNPTiBvYmplY3QgcmVwcmVzZW50aW9uIG9mIGEgYEdlb1BvaW50YCBpbnN0YW5jZVxuICAgICAqIEByZXR1cm5zIGFuIGluc3RhbmNlIG9mIHtAbGluayBHZW9Qb2ludH0gaWYgdGhlIEpTT04gb2JqZWN0IGNvdWxkIGJlIHBhcnNlZC4gVGhyb3dzIGFcbiAgICAgKiB7QGxpbmsgRmlyZXN0b3JlRXJyb3J9IGlmIGFuIGVycm9yIG9jY3Vycy5cbiAgICAgKi8gICAgc3RhdGljIGZyb21KU09OKGUpIHtcbiAgICAgICAgaWYgKF9fUFJJVkFURV92YWxpZGF0ZUpTT04oZSwgR2VvUG9pbnQuX2pzb25TY2hlbWEpKSByZXR1cm4gbmV3IEdlb1BvaW50KGUubGF0aXR1ZGUsIGUubG9uZ2l0dWRlKTtcbiAgICB9XG59XG5cbkdlb1BvaW50Ll9qc29uU2NoZW1hVmVyc2lvbiA9IFwiZmlyZXN0b3JlL2dlb1BvaW50LzEuMFwiLCBHZW9Qb2ludC5fanNvblNjaGVtYSA9IHtcbiAgICB0eXBlOiBwcm9wZXJ0eShcInN0cmluZ1wiLCBHZW9Qb2ludC5fanNvblNjaGVtYVZlcnNpb24pLFxuICAgIGxhdGl0dWRlOiBwcm9wZXJ0eShcIm51bWJlclwiKSxcbiAgICBsb25naXR1ZGU6IHByb3BlcnR5KFwibnVtYmVyXCIpXG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyNCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXByZXNlbnRzIGEgdmVjdG9yIHR5cGUgaW4gRmlyZXN0b3JlIGRvY3VtZW50cy5cbiAqIENyZWF0ZSBhbiBpbnN0YW5jZSB3aXRoIDxjb2RlPntAbGluayB2ZWN0b3J9PC9jb2RlPi5cbiAqXG4gKiBAY2xhc3MgVmVjdG9yVmFsdWVcbiAqL1xuY2xhc3MgVmVjdG9yVmFsdWUge1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICAvLyBNYWtpbmcgYSBjb3B5IG9mIHRoZSBwYXJhbWV0ZXIuXG4gICAgICAgIHRoaXMuX3ZhbHVlcyA9IChlIHx8IFtdKS5tYXAoKGUgPT4gZSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgY29weSBvZiB0aGUgcmF3IG51bWJlciBhcnJheSBmb3JtIG9mIHRoZSB2ZWN0b3IuXG4gICAgICovICAgIHRvQXJyYXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl92YWx1ZXMubWFwKChlID0+IGUpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHR3byBgVmVjdG9yVmFsdWVgIHZhbHVlcyBoYXZlIHRoZSBzYW1lIHJhdyBudW1iZXIgYXJyYXlzLCByZXR1cm5zIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqLyAgICBpc0VxdWFsKGUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9pc1ByaW1pdGl2ZUFycmF5RXF1YWwoZSwgdCkge1xuICAgICAgICAgICAgaWYgKGUubGVuZ3RoICE9PSB0Lmxlbmd0aCkgcmV0dXJuICExO1xuICAgICAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCBlLmxlbmd0aDsgKytuKSBpZiAoZVtuXSAhPT0gdFtuXSkgcmV0dXJuICExO1xuICAgICAgICAgICAgcmV0dXJuICEwO1xuICAgICAgICB9KHRoaXMuX3ZhbHVlcywgZS5fdmFsdWVzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIEpTT04tc2VyaWFsaXphYmxlIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgYFZlY3RvclZhbHVlYCBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIGEgSlNPTiByZXByZXNlbnRhdGlvbiBvZiB0aGlzIG9iamVjdC5cbiAgICAgKi8gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogVmVjdG9yVmFsdWUuX2pzb25TY2hlbWFWZXJzaW9uLFxuICAgICAgICAgICAgdmVjdG9yVmFsdWVzOiB0aGlzLl92YWx1ZXNcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQnVpbGRzIGEgYFZlY3RvclZhbHVlYCBpbnN0YW5jZSBmcm9tIGEgSlNPTiBvYmplY3QgY3JlYXRlZCBieSB7QGxpbmsgVmVjdG9yVmFsdWUudG9KU09OfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBqc29uIGEgSlNPTiBvYmplY3QgcmVwcmVzZW50aW9uIG9mIGEgYFZlY3RvclZhbHVlYCBpbnN0YW5jZS5cbiAgICAgKiBAcmV0dXJucyBhbiBpbnN0YW5jZSBvZiB7QGxpbmsgVmVjdG9yVmFsdWV9IGlmIHRoZSBKU09OIG9iamVjdCBjb3VsZCBiZSBwYXJzZWQuIFRocm93cyBhXG4gICAgICoge0BsaW5rIEZpcmVzdG9yZUVycm9yfSBpZiBhbiBlcnJvciBvY2N1cnMuXG4gICAgICovICAgIHN0YXRpYyBmcm9tSlNPTihlKSB7XG4gICAgICAgIGlmIChfX1BSSVZBVEVfdmFsaWRhdGVKU09OKGUsIFZlY3RvclZhbHVlLl9qc29uU2NoZW1hKSkge1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZS52ZWN0b3JWYWx1ZXMpICYmIGUudmVjdG9yVmFsdWVzLmV2ZXJ5KChlID0+IFwibnVtYmVyXCIgPT0gdHlwZW9mIGUpKSkgcmV0dXJuIG5ldyBWZWN0b3JWYWx1ZShlLnZlY3RvclZhbHVlcyk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoTi5JTlZBTElEX0FSR1VNRU5ULCBcIkV4cGVjdGVkICd2ZWN0b3JWYWx1ZXMnIGZpZWxkIHRvIGJlIGEgbnVtYmVyIGFycmF5XCIpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5WZWN0b3JWYWx1ZS5fanNvblNjaGVtYVZlcnNpb24gPSBcImZpcmVzdG9yZS92ZWN0b3JWYWx1ZS8xLjBcIiwgVmVjdG9yVmFsdWUuX2pzb25TY2hlbWEgPSB7XG4gICAgdHlwZTogcHJvcGVydHkoXCJzdHJpbmdcIiwgVmVjdG9yVmFsdWUuX2pzb25TY2hlbWFWZXJzaW9uKSxcbiAgICB2ZWN0b3JWYWx1ZXM6IHByb3BlcnR5KFwib2JqZWN0XCIpXG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY29uc3QgaG4gPSAvXl9fLipfXyQvO1xuXG4vKiogVGhlIHJlc3VsdCBvZiBwYXJzaW5nIGRvY3VtZW50IGRhdGEgKGUuZy4gZm9yIGEgc2V0RGF0YSBjYWxsKS4gKi8gY2xhc3MgUGFyc2VkU2V0RGF0YSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbikge1xuICAgICAgICB0aGlzLmRhdGEgPSBlLCB0aGlzLmZpZWxkTWFzayA9IHQsIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gbjtcbiAgICB9XG4gICAgdG9NdXRhdGlvbihlLCB0KSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0aGlzLmZpZWxkTWFzayA/IG5ldyBfX1BSSVZBVEVfUGF0Y2hNdXRhdGlvbihlLCB0aGlzLmRhdGEsIHRoaXMuZmllbGRNYXNrLCB0LCB0aGlzLmZpZWxkVHJhbnNmb3JtcykgOiBuZXcgX19QUklWQVRFX1NldE11dGF0aW9uKGUsIHRoaXMuZGF0YSwgdCwgdGhpcy5maWVsZFRyYW5zZm9ybXMpO1xuICAgIH1cbn1cblxuLyoqIFRoZSByZXN1bHQgb2YgcGFyc2luZyBcInVwZGF0ZVwiIGRhdGEgKGkuZS4gZm9yIGFuIHVwZGF0ZURhdGEgY2FsbCkuICovIGNsYXNzIFBhcnNlZFVwZGF0ZURhdGEge1xuICAgIGNvbnN0cnVjdG9yKGUsIFxuICAgIC8vIFRoZSBmaWVsZE1hc2sgZG9lcyBub3QgaW5jbHVkZSBkb2N1bWVudCB0cmFuc2Zvcm1zLlxuICAgIHQsIG4pIHtcbiAgICAgICAgdGhpcy5kYXRhID0gZSwgdGhpcy5maWVsZE1hc2sgPSB0LCB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IG47XG4gICAgfVxuICAgIHRvTXV0YXRpb24oZSwgdCkge1xuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9QYXRjaE11dGF0aW9uKGUsIHRoaXMuZGF0YSwgdGhpcy5maWVsZE1hc2ssIHQsIHRoaXMuZmllbGRUcmFuc2Zvcm1zKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9pc1dyaXRlKGUpIHtcbiAgICBzd2l0Y2ggKGUpIHtcbiAgICAgIGNhc2UgMCAvKiBVc2VyRGF0YVNvdXJjZS5TZXQgKi8gOlxuIC8vIGZhbGwgdGhyb3VnaFxuICAgICAgICAgICAgICBjYXNlIDIgLyogVXNlckRhdGFTb3VyY2UuTWVyZ2VTZXQgKi8gOlxuIC8vIGZhbGwgdGhyb3VnaFxuICAgICAgICAgICAgICBjYXNlIDEgLyogVXNlckRhdGFTb3VyY2UuVXBkYXRlICovIDpcbiAgICAgICAgcmV0dXJuICEwO1xuXG4gICAgICBjYXNlIDMgLyogVXNlckRhdGFTb3VyY2UuQXJndW1lbnQgKi8gOlxuICAgICAgY2FzZSA0IC8qIFVzZXJEYXRhU291cmNlLkFycmF5QXJndW1lbnQgKi8gOlxuICAgICAgICByZXR1cm4gITE7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IGZhaWwoNDAwMTEsIHtcbiAgICAgICAgICAgIEFjOiBlXG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuLyoqIEEgXCJjb250ZXh0XCIgb2JqZWN0IHBhc3NlZCBhcm91bmQgd2hpbGUgcGFyc2luZyB1c2VyIGRhdGEuICovIGNsYXNzIF9fUFJJVkFURV9QYXJzZUNvbnRleHRJbXBsIHtcbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplcyBhIFBhcnNlQ29udGV4dCB3aXRoIHRoZSBnaXZlbiBzb3VyY2UgYW5kIHBhdGguXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2V0dGluZ3MgLSBUaGUgc2V0dGluZ3MgZm9yIHRoZSBwYXJzZXIuXG4gICAgICogQHBhcmFtIGRhdGFiYXNlSWQgLSBUaGUgZGF0YWJhc2UgSUQgb2YgdGhlIEZpcmVzdG9yZSBpbnN0YW5jZS5cbiAgICAgKiBAcGFyYW0gc2VyaWFsaXplciAtIFRoZSBzZXJpYWxpemVyIHRvIHVzZSB0byBnZW5lcmF0ZSB0aGUgVmFsdWUgcHJvdG8uXG4gICAgICogQHBhcmFtIGlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgLSBXaGV0aGVyIHRvIGlnbm9yZSB1bmRlZmluZWQgcHJvcGVydGllc1xuICAgICAqIHJhdGhlciB0aGFuIHRocm93LlxuICAgICAqIEBwYXJhbSBmaWVsZFRyYW5zZm9ybXMgLSBBIG11dGFibGUgbGlzdCBvZiBmaWVsZCB0cmFuc2Zvcm1zIGVuY291bnRlcmVkXG4gICAgICogd2hpbGUgcGFyc2luZyB0aGUgZGF0YS5cbiAgICAgKiBAcGFyYW0gZmllbGRNYXNrIC0gQSBtdXRhYmxlIGxpc3Qgb2YgZmllbGQgcGF0aHMgZW5jb3VudGVyZWQgd2hpbGUgcGFyc2luZ1xuICAgICAqIHRoZSBkYXRhLlxuICAgICAqXG4gICAgICogVE9ETyhiLzM0ODcxMTMxKTogV2UgZG9uJ3Qgc3VwcG9ydCBhcnJheSBwYXRocyByaWdodCBub3csIHNvIHBhdGggY2FuIGJlXG4gICAgICogbnVsbCB0byBpbmRpY2F0ZSB0aGUgY29udGV4dCByZXByZXNlbnRzIGFueSBsb2NhdGlvbiB3aXRoaW4gYW4gYXJyYXkgKGluXG4gICAgICogd2hpY2ggY2FzZSBjZXJ0YWluIGZlYXR1cmVzIHdpbGwgbm90IHdvcmsgYW5kIGVycm9ycyB3aWxsIGJlIHNvbWV3aGF0XG4gICAgICogY29tcHJvbWlzZWQpLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIHIsIGksIHMpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IGUsIHRoaXMuZGF0YWJhc2VJZCA9IHQsIHRoaXMuc2VyaWFsaXplciA9IG4sIHRoaXMuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyA9IHIsIFxuICAgICAgICAvLyBNaW5vciBoYWNrOiBJZiBmaWVsZFRyYW5zZm9ybXMgaXMgdW5kZWZpbmVkLCB3ZSBhc3N1bWUgdGhpcyBpcyBhblxuICAgICAgICAvLyBleHRlcm5hbCBjYWxsIGFuZCB3ZSBuZWVkIHRvIHZhbGlkYXRlIHRoZSBlbnRpcmUgcGF0aC5cbiAgICAgICAgdm9pZCAwID09PSBpICYmIHRoaXMuUmMoKSwgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBpIHx8IFtdLCB0aGlzLmZpZWxkTWFzayA9IHMgfHwgW107XG4gICAgfVxuICAgIGdldCBwYXRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXR0aW5ncy5wYXRoO1xuICAgIH1cbiAgICBnZXQgQWMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzLkFjO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIG5ldyBjb250ZXh0IHdpdGggdGhlIHNwZWNpZmllZCBzZXR0aW5ncyBvdmVyd3JpdHRlbi4gKi8gICAgVmMoZSkge1xuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9QYXJzZUNvbnRleHRJbXBsKHtcbiAgICAgICAgICAgIC4uLnRoaXMuc2V0dGluZ3MsXG4gICAgICAgICAgICAuLi5lXG4gICAgICAgIH0sIHRoaXMuZGF0YWJhc2VJZCwgdGhpcy5zZXJpYWxpemVyLCB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMsIHRoaXMuZmllbGRUcmFuc2Zvcm1zLCB0aGlzLmZpZWxkTWFzayk7XG4gICAgfVxuICAgIG1jKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMucGF0aD8uY2hpbGQoZSksIG4gPSB0aGlzLlZjKHtcbiAgICAgICAgICAgIHBhdGg6IHQsXG4gICAgICAgICAgICBmYzogITFcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBuLmdjKGUpLCBuO1xuICAgIH1cbiAgICB5YyhlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnBhdGg/LmNoaWxkKGUpLCBuID0gdGhpcy5WYyh7XG4gICAgICAgICAgICBwYXRoOiB0LFxuICAgICAgICAgICAgZmM6ICExXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbi5SYygpLCBuO1xuICAgIH1cbiAgICB3YyhlKSB7XG4gICAgICAgIC8vIFRPRE8oYi8zNDg3MTEzMSk6IFdlIGRvbid0IHN1cHBvcnQgYXJyYXkgcGF0aHMgcmlnaHQgbm93OyBzbyBtYWtlIHBhdGhcbiAgICAgICAgLy8gdW5kZWZpbmVkLlxuICAgICAgICByZXR1cm4gdGhpcy5WYyh7XG4gICAgICAgICAgICBwYXRoOiB2b2lkIDAsXG4gICAgICAgICAgICBmYzogITBcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFNjKGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9jcmVhdGVFcnJvcihlLCB0aGlzLnNldHRpbmdzLm1ldGhvZE5hbWUsIHRoaXMuc2V0dGluZ3MuYmMgfHwgITEsIHRoaXMucGF0aCwgdGhpcy5zZXR0aW5ncy5EYyk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zICd0cnVlJyBpZiAnZmllbGRQYXRoJyB3YXMgdHJhdmVyc2VkIHdoZW4gY3JlYXRpbmcgdGhpcyBjb250ZXh0LiAqLyAgICBjb250YWlucyhlKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IHRoaXMuZmllbGRNYXNrLmZpbmQoKHQgPT4gZS5pc1ByZWZpeE9mKHQpKSkgfHwgdm9pZCAwICE9PSB0aGlzLmZpZWxkVHJhbnNmb3Jtcy5maW5kKCh0ID0+IGUuaXNQcmVmaXhPZih0LmZpZWxkKSkpO1xuICAgIH1cbiAgICBSYygpIHtcbiAgICAgICAgLy8gVE9ETyhiLzM0ODcxMTMxKTogUmVtb3ZlIG51bGwgY2hlY2sgb25jZSB3ZSBoYXZlIHByb3BlciBwYXRocyBmb3IgZmllbGRzXG4gICAgICAgIC8vIHdpdGhpbiBhcnJheXMuXG4gICAgICAgIGlmICh0aGlzLnBhdGgpIGZvciAobGV0IGUgPSAwOyBlIDwgdGhpcy5wYXRoLmxlbmd0aDsgZSsrKSB0aGlzLmdjKHRoaXMucGF0aC5nZXQoZSkpO1xuICAgIH1cbiAgICBnYyhlKSB7XG4gICAgICAgIGlmICgwID09PSBlLmxlbmd0aCkgdGhyb3cgdGhpcy5TYyhcIkRvY3VtZW50IGZpZWxkcyBtdXN0IG5vdCBiZSBlbXB0eVwiKTtcbiAgICAgICAgaWYgKF9fUFJJVkFURV9pc1dyaXRlKHRoaXMuQWMpICYmIGhuLnRlc3QoZSkpIHRocm93IHRoaXMuU2MoJ0RvY3VtZW50IGZpZWxkcyBjYW5ub3QgYmVnaW4gYW5kIGVuZCB3aXRoIFwiX19cIicpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgZm9yIHBhcnNpbmcgcmF3IHVzZXIgaW5wdXQgKHByb3ZpZGVkIHZpYSB0aGUgQVBJKSBpbnRvIGludGVybmFsIG1vZGVsXG4gKiBjbGFzc2VzLlxuICovIGNsYXNzIF9fUFJJVkFURV9Vc2VyRGF0YVJlYWRlciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbikge1xuICAgICAgICB0aGlzLmRhdGFiYXNlSWQgPSBlLCB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgPSB0LCB0aGlzLnNlcmlhbGl6ZXIgPSBuIHx8IF9fUFJJVkFURV9uZXdTZXJpYWxpemVyKGUpO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlcyBhIG5ldyB0b3AtbGV2ZWwgcGFyc2UgY29udGV4dC4gKi8gICAgQ2MoZSwgdCwgbiwgciA9ICExKSB7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1BhcnNlQ29udGV4dEltcGwoe1xuICAgICAgICAgICAgQWM6IGUsXG4gICAgICAgICAgICBtZXRob2ROYW1lOiB0LFxuICAgICAgICAgICAgRGM6IG4sXG4gICAgICAgICAgICBwYXRoOiBGaWVsZFBhdGgkMS5lbXB0eVBhdGgoKSxcbiAgICAgICAgICAgIGZjOiAhMSxcbiAgICAgICAgICAgIGJjOiByXG4gICAgICAgIH0sIHRoaXMuZGF0YWJhc2VJZCwgdGhpcy5zZXJpYWxpemVyLCB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX25ld1VzZXJEYXRhUmVhZGVyKGUpIHtcbiAgICBjb25zdCB0ID0gZS5fZnJlZXplU2V0dGluZ3MoKSwgbiA9IF9fUFJJVkFURV9uZXdTZXJpYWxpemVyKGUuX2RhdGFiYXNlSWQpO1xuICAgIHJldHVybiBuZXcgX19QUklWQVRFX1VzZXJEYXRhUmVhZGVyKGUuX2RhdGFiYXNlSWQsICEhdC5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzLCBuKTtcbn1cblxuLyoqIFBhcnNlIGRvY3VtZW50IGRhdGEgZnJvbSBhIHNldCgpIGNhbGwuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9wYXJzZVNldERhdGEoZSwgdCwgbiwgciwgaSwgcyA9IHt9KSB7XG4gICAgY29uc3QgbyA9IGUuQ2Mocy5tZXJnZSB8fCBzLm1lcmdlRmllbGRzID8gMiAvKiBVc2VyRGF0YVNvdXJjZS5NZXJnZVNldCAqLyA6IDAgLyogVXNlckRhdGFTb3VyY2UuU2V0ICovICwgdCwgbiwgaSk7XG4gICAgX19QUklWQVRFX3ZhbGlkYXRlUGxhaW5PYmplY3QoXCJEYXRhIG11c3QgYmUgYW4gb2JqZWN0LCBidXQgaXQgd2FzOlwiLCBvLCByKTtcbiAgICBjb25zdCBfID0gX19QUklWQVRFX3BhcnNlT2JqZWN0KHIsIG8pO1xuICAgIGxldCBhLCB1O1xuICAgIGlmIChzLm1lcmdlKSBhID0gbmV3IEZpZWxkTWFzayhvLmZpZWxkTWFzayksIHUgPSBvLmZpZWxkVHJhbnNmb3JtczsgZWxzZSBpZiAocy5tZXJnZUZpZWxkcykge1xuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIGZvciAoY29uc3QgciBvZiBzLm1lcmdlRmllbGRzKSB7XG4gICAgICAgICAgICBjb25zdCBpID0gX19QUklWQVRFX2ZpZWxkUGF0aEZyb21Bcmd1bWVudCQxKHQsIHIsIG4pO1xuICAgICAgICAgICAgaWYgKCFvLmNvbnRhaW5zKGkpKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoTi5JTlZBTElEX0FSR1VNRU5ULCBgRmllbGQgJyR7aX0nIGlzIHNwZWNpZmllZCBpbiB5b3VyIGZpZWxkIG1hc2sgYnV0IG1pc3NpbmcgZnJvbSB5b3VyIGlucHV0IGRhdGEuYCk7XG4gICAgICAgICAgICBfX1BSSVZBVEVfZmllbGRNYXNrQ29udGFpbnMoZSwgaSkgfHwgZS5wdXNoKGkpO1xuICAgICAgICB9XG4gICAgICAgIGEgPSBuZXcgRmllbGRNYXNrKGUpLCB1ID0gby5maWVsZFRyYW5zZm9ybXMuZmlsdGVyKChlID0+IGEuY292ZXJzKGUuZmllbGQpKSk7XG4gICAgfSBlbHNlIGEgPSBudWxsLCB1ID0gby5maWVsZFRyYW5zZm9ybXM7XG4gICAgcmV0dXJuIG5ldyBQYXJzZWRTZXREYXRhKG5ldyBPYmplY3RWYWx1ZShfKSwgYSwgdSk7XG59XG5cbmNsYXNzIF9fUFJJVkFURV9EZWxldGVGaWVsZFZhbHVlSW1wbCBleHRlbmRzIEZpZWxkVmFsdWUge1xuICAgIF90b0ZpZWxkVHJhbnNmb3JtKGUpIHtcbiAgICAgICAgaWYgKDIgLyogVXNlckRhdGFTb3VyY2UuTWVyZ2VTZXQgKi8gIT09IGUuQWMpIHRocm93IDEgLyogVXNlckRhdGFTb3VyY2UuVXBkYXRlICovID09PSBlLkFjID8gZS5TYyhgJHt0aGlzLl9tZXRob2ROYW1lfSgpIGNhbiBvbmx5IGFwcGVhciBhdCB0aGUgdG9wIGxldmVsIG9mIHlvdXIgdXBkYXRlIGRhdGFgKSA6IGUuU2MoYCR7dGhpcy5fbWV0aG9kTmFtZX0oKSBjYW5ub3QgYmUgdXNlZCB3aXRoIHNldCgpIHVubGVzcyB5b3UgcGFzcyB7bWVyZ2U6dHJ1ZX1gKTtcbiAgICAgICAgLy8gTm8gdHJhbnNmb3JtIHRvIGFkZCBmb3IgYSBkZWxldGUsIGJ1dCB3ZSBuZWVkIHRvIGFkZCBpdCB0byBvdXJcbiAgICAgICAgLy8gZmllbGRNYXNrIHNvIGl0IGdldHMgZGVsZXRlZC5cbiAgICAgICAgcmV0dXJuIGUuZmllbGRNYXNrLnB1c2goZS5wYXRoKSwgbnVsbDtcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIHJldHVybiBlIGluc3RhbmNlb2YgX19QUklWQVRFX0RlbGV0ZUZpZWxkVmFsdWVJbXBsO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgY2hpbGQgY29udGV4dCBmb3IgcGFyc2luZyBTZXJpYWxpemFibGVGaWVsZFZhbHVlcy5cbiAqXG4gKiBUaGlzIGlzIGRpZmZlcmVudCB0aGFuIGNhbGxpbmcgYFBhcnNlQ29udGV4dC5jb250ZXh0V2l0aGAgYmVjYXVzZSBpdCBrZWVwc1xuICogdGhlIGZpZWxkVHJhbnNmb3JtcyBhbmQgZmllbGRNYXNrIHNlcGFyYXRlLlxuICpcbiAqIFRoZSBjcmVhdGVkIGNvbnRleHQgaGFzIGl0cyBgZGF0YVNvdXJjZWAgc2V0IHRvIGBVc2VyRGF0YVNvdXJjZS5Bcmd1bWVudGAuXG4gKiBBbHRob3VnaCB0aGVzZSB2YWx1ZXMgYXJlIHVzZWQgd2l0aCB3cml0ZXMsIGFueSBlbGVtZW50cyBpbiB0aGVzZSBGaWVsZFZhbHVlc1xuICogYXJlIG5vdCBjb25zaWRlcmVkIHdyaXRlcyBzaW5jZSB0aGV5IGNhbm5vdCBjb250YWluIGFueSBGaWVsZFZhbHVlIHNlbnRpbmVscyxcbiAqIGV0Yy5cbiAqXG4gKiBAcGFyYW0gZmllbGRWYWx1ZSAtIFRoZSBzZW50aW5lbCBGaWVsZFZhbHVlIGZvciB3aGljaCB0byBjcmVhdGUgYSBjaGlsZFxuICogICAgIGNvbnRleHQuXG4gKiBAcGFyYW0gY29udGV4dCAtIFRoZSBwYXJlbnQgY29udGV4dC5cbiAqIEBwYXJhbSBhcnJheUVsZW1lbnQgLSBXaGV0aGVyIG9yIG5vdCB0aGUgRmllbGRWYWx1ZSBoYXMgYW4gYXJyYXkuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2NyZWF0ZVNlbnRpbmVsQ2hpbGRDb250ZXh0KGUsIHQsIG4pIHtcbiAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9QYXJzZUNvbnRleHRJbXBsKHtcbiAgICAgICAgQWM6IDMgLyogVXNlckRhdGFTb3VyY2UuQXJndW1lbnQgKi8gLFxuICAgICAgICBEYzogdC5zZXR0aW5ncy5EYyxcbiAgICAgICAgbWV0aG9kTmFtZTogZS5fbWV0aG9kTmFtZSxcbiAgICAgICAgZmM6IG5cbiAgICB9LCB0LmRhdGFiYXNlSWQsIHQuc2VyaWFsaXplciwgdC5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzKTtcbn1cblxuY2xhc3MgX19QUklWQVRFX1NlcnZlclRpbWVzdGFtcEZpZWxkVmFsdWVJbXBsIGV4dGVuZHMgRmllbGRWYWx1ZSB7XG4gICAgX3RvRmllbGRUcmFuc2Zvcm0oZSkge1xuICAgICAgICByZXR1cm4gbmV3IEZpZWxkVHJhbnNmb3JtKGUucGF0aCwgbmV3IF9fUFJJVkFURV9TZXJ2ZXJUaW1lc3RhbXBUcmFuc2Zvcm0pO1xuICAgIH1cbiAgICBpc0VxdWFsKGUpIHtcbiAgICAgICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBfX1BSSVZBVEVfU2VydmVyVGltZXN0YW1wRmllbGRWYWx1ZUltcGw7XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfQXJyYXlVbmlvbkZpZWxkVmFsdWVJbXBsIGV4dGVuZHMgRmllbGRWYWx1ZSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICBzdXBlcihlKSwgdGhpcy52YyA9IHQ7XG4gICAgfVxuICAgIF90b0ZpZWxkVHJhbnNmb3JtKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9jcmVhdGVTZW50aW5lbENoaWxkQ29udGV4dCh0aGlzLCBlLCBcbiAgICAgICAgLyphcnJheT0qLyAhMCksIG4gPSB0aGlzLnZjLm1hcCgoZSA9PiBfX1BSSVZBVEVfcGFyc2VEYXRhKGUsIHQpKSksIHIgPSBuZXcgX19QUklWQVRFX0FycmF5VW5pb25UcmFuc2Zvcm1PcGVyYXRpb24obik7XG4gICAgICAgIHJldHVybiBuZXcgRmllbGRUcmFuc2Zvcm0oZS5wYXRoLCByKTtcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIHJldHVybiBlIGluc3RhbmNlb2YgX19QUklWQVRFX0FycmF5VW5pb25GaWVsZFZhbHVlSW1wbCAmJiBkZWVwRXF1YWwodGhpcy52YywgZS52Yyk7XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfQXJyYXlSZW1vdmVGaWVsZFZhbHVlSW1wbCBleHRlbmRzIEZpZWxkVmFsdWUge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgc3VwZXIoZSksIHRoaXMudmMgPSB0O1xuICAgIH1cbiAgICBfdG9GaWVsZFRyYW5zZm9ybShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfY3JlYXRlU2VudGluZWxDaGlsZENvbnRleHQodGhpcywgZSwgXG4gICAgICAgIC8qYXJyYXk9Ki8gITApLCBuID0gdGhpcy52Yy5tYXAoKGUgPT4gX19QUklWQVRFX3BhcnNlRGF0YShlLCB0KSkpLCByID0gbmV3IF9fUFJJVkFURV9BcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbihuKTtcbiAgICAgICAgcmV0dXJuIG5ldyBGaWVsZFRyYW5zZm9ybShlLnBhdGgsIHIpO1xuICAgIH1cbiAgICBpc0VxdWFsKGUpIHtcbiAgICAgICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBfX1BSSVZBVEVfQXJyYXlSZW1vdmVGaWVsZFZhbHVlSW1wbCAmJiBkZWVwRXF1YWwodGhpcy52YywgZS52Yyk7XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfTnVtZXJpY0luY3JlbWVudEZpZWxkVmFsdWVJbXBsIGV4dGVuZHMgRmllbGRWYWx1ZSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICBzdXBlcihlKSwgdGhpcy5GYyA9IHQ7XG4gICAgfVxuICAgIF90b0ZpZWxkVHJhbnNmb3JtKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IG5ldyBfX1BSSVZBVEVfTnVtZXJpY0luY3JlbWVudFRyYW5zZm9ybU9wZXJhdGlvbihlLnNlcmlhbGl6ZXIsIHRvTnVtYmVyKGUuc2VyaWFsaXplciwgdGhpcy5GYykpO1xuICAgICAgICByZXR1cm4gbmV3IEZpZWxkVHJhbnNmb3JtKGUucGF0aCwgdCk7XG4gICAgfVxuICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gZSBpbnN0YW5jZW9mIF9fUFJJVkFURV9OdW1lcmljSW5jcmVtZW50RmllbGRWYWx1ZUltcGwgJiYgdGhpcy5GYyA9PT0gZS5GYztcbiAgICB9XG59XG5cbi8qKiBQYXJzZSB1cGRhdGUgZGF0YSBmcm9tIGFuIHVwZGF0ZSgpIGNhbGwuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9wYXJzZVVwZGF0ZURhdGEoZSwgdCwgbiwgcikge1xuICAgIGNvbnN0IGkgPSBlLkNjKDEgLyogVXNlckRhdGFTb3VyY2UuVXBkYXRlICovICwgdCwgbik7XG4gICAgX19QUklWQVRFX3ZhbGlkYXRlUGxhaW5PYmplY3QoXCJEYXRhIG11c3QgYmUgYW4gb2JqZWN0LCBidXQgaXQgd2FzOlwiLCBpLCByKTtcbiAgICBjb25zdCBzID0gW10sIG8gPSBPYmplY3RWYWx1ZS5lbXB0eSgpO1xuICAgIGZvckVhY2gociwgKChlLCByKSA9PiB7XG4gICAgICAgIGNvbnN0IF8gPSBfX1BSSVZBVEVfZmllbGRQYXRoRnJvbURvdFNlcGFyYXRlZFN0cmluZyh0LCBlLCBuKTtcbiAgICAgICAgLy8gRm9yIENvbXBhdCB0eXBlcywgd2UgaGF2ZSB0byBcImV4dHJhY3RcIiB0aGUgdW5kZXJseWluZyB0eXBlcyBiZWZvcmVcbiAgICAgICAgLy8gcGVyZm9ybWluZyB2YWxpZGF0aW9uLlxuICAgICAgICAgICAgICAgIHIgPSBnZXRNb2R1bGFySW5zdGFuY2Uocik7XG4gICAgICAgIGNvbnN0IGEgPSBpLnljKF8pO1xuICAgICAgICBpZiAociBpbnN0YW5jZW9mIF9fUFJJVkFURV9EZWxldGVGaWVsZFZhbHVlSW1wbCkgXG4gICAgICAgIC8vIEFkZCBpdCB0byB0aGUgZmllbGQgbWFzaywgYnV0IGRvbid0IGFkZCBhbnl0aGluZyB0byB1cGRhdGVEYXRhLlxuICAgICAgICBzLnB1c2goXyk7IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZSA9IF9fUFJJVkFURV9wYXJzZURhdGEociwgYSk7XG4gICAgICAgICAgICBudWxsICE9IGUgJiYgKHMucHVzaChfKSwgby5zZXQoXywgZSkpO1xuICAgICAgICB9XG4gICAgfSkpO1xuICAgIGNvbnN0IF8gPSBuZXcgRmllbGRNYXNrKHMpO1xuICAgIHJldHVybiBuZXcgUGFyc2VkVXBkYXRlRGF0YShvLCBfLCBpLmZpZWxkVHJhbnNmb3Jtcyk7XG59XG5cbi8qKiBQYXJzZSB1cGRhdGUgZGF0YSBmcm9tIGEgbGlzdCBvZiBmaWVsZC92YWx1ZSBhcmd1bWVudHMuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9wYXJzZVVwZGF0ZVZhcmFyZ3MoZSwgdCwgbiwgciwgaSwgcykge1xuICAgIGNvbnN0IG8gPSBlLkNjKDEgLyogVXNlckRhdGFTb3VyY2UuVXBkYXRlICovICwgdCwgbiksIF8gPSBbIF9fUFJJVkFURV9maWVsZFBhdGhGcm9tQXJndW1lbnQkMSh0LCByLCBuKSBdLCBhID0gWyBpIF07XG4gICAgaWYgKHMubGVuZ3RoICUgMiAhPSAwKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoTi5JTlZBTElEX0FSR1VNRU5ULCBgRnVuY3Rpb24gJHt0fSgpIG5lZWRzIHRvIGJlIGNhbGxlZCB3aXRoIGFuIGV2ZW4gbnVtYmVyIG9mIGFyZ3VtZW50cyB0aGF0IGFsdGVybmF0ZSBiZXR3ZWVuIGZpZWxkIG5hbWVzIGFuZCB2YWx1ZXMuYCk7XG4gICAgZm9yIChsZXQgZSA9IDA7IGUgPCBzLmxlbmd0aDsgZSArPSAyKSBfLnB1c2goX19QUklWQVRFX2ZpZWxkUGF0aEZyb21Bcmd1bWVudCQxKHQsIHNbZV0pKSwgXG4gICAgYS5wdXNoKHNbZSArIDFdKTtcbiAgICBjb25zdCB1ID0gW10sIGMgPSBPYmplY3RWYWx1ZS5lbXB0eSgpO1xuICAgIC8vIFdlIGl0ZXJhdGUgaW4gcmV2ZXJzZSBvcmRlciB0byBwaWNrIHRoZSBsYXN0IHZhbHVlIGZvciBhIGZpZWxkIGlmIHRoZVxuICAgIC8vIHVzZXIgc3BlY2lmaWVkIHRoZSBmaWVsZCBtdWx0aXBsZSB0aW1lcy5cbiAgICBmb3IgKGxldCBlID0gXy5sZW5ndGggLSAxOyBlID49IDA7IC0tZSkgaWYgKCFfX1BSSVZBVEVfZmllbGRNYXNrQ29udGFpbnModSwgX1tlXSkpIHtcbiAgICAgICAgY29uc3QgdCA9IF9bZV07XG4gICAgICAgIGxldCBuID0gYVtlXTtcbiAgICAgICAgLy8gRm9yIENvbXBhdCB0eXBlcywgd2UgaGF2ZSB0byBcImV4dHJhY3RcIiB0aGUgdW5kZXJseWluZyB0eXBlcyBiZWZvcmVcbiAgICAgICAgLy8gcGVyZm9ybWluZyB2YWxpZGF0aW9uLlxuICAgICAgICAgICAgICAgIG4gPSBnZXRNb2R1bGFySW5zdGFuY2Uobik7XG4gICAgICAgIGNvbnN0IHIgPSBvLnljKHQpO1xuICAgICAgICBpZiAobiBpbnN0YW5jZW9mIF9fUFJJVkFURV9EZWxldGVGaWVsZFZhbHVlSW1wbCkgXG4gICAgICAgIC8vIEFkZCBpdCB0byB0aGUgZmllbGQgbWFzaywgYnV0IGRvbid0IGFkZCBhbnl0aGluZyB0byB1cGRhdGVEYXRhLlxuICAgICAgICB1LnB1c2godCk7IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZSA9IF9fUFJJVkFURV9wYXJzZURhdGEobiwgcik7XG4gICAgICAgICAgICBudWxsICE9IGUgJiYgKHUucHVzaCh0KSwgYy5zZXQodCwgZSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGwgPSBuZXcgRmllbGRNYXNrKHUpO1xuICAgIHJldHVybiBuZXcgUGFyc2VkVXBkYXRlRGF0YShjLCBsLCBvLmZpZWxkVHJhbnNmb3Jtcyk7XG59XG5cbi8qKlxuICogUGFyc2UgYSBcInF1ZXJ5IHZhbHVlXCIgKGUuZy4gdmFsdWUgaW4gYSB3aGVyZSBmaWx0ZXIgb3IgYSB2YWx1ZSBpbiBhIGN1cnNvclxuICogYm91bmQpLlxuICpcbiAqIEBwYXJhbSBhbGxvd0FycmF5cyAtIFdoZXRoZXIgdGhlIHF1ZXJ5IHZhbHVlIGlzIGFuIGFycmF5IHRoYXQgbWF5IGRpcmVjdGx5XG4gKiBjb250YWluIGFkZGl0aW9uYWwgYXJyYXlzIChlLmcuIHRoZSBvcGVyYW5kIG9mIGFuIGBpbmAgcXVlcnkpLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9wYXJzZVF1ZXJ5VmFsdWUoZSwgdCwgbiwgciA9ICExKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9wYXJzZURhdGEobiwgZS5DYyhyID8gNCAvKiBVc2VyRGF0YVNvdXJjZS5BcnJheUFyZ3VtZW50ICovIDogMyAvKiBVc2VyRGF0YVNvdXJjZS5Bcmd1bWVudCAqLyAsIHQpKTtcbn1cblxuLyoqXG4gKiBQYXJzZXMgdXNlciBkYXRhIHRvIFByb3RvYnVmIFZhbHVlcy5cbiAqXG4gKiBAcGFyYW0gaW5wdXQgLSBEYXRhIHRvIGJlIHBhcnNlZC5cbiAqIEBwYXJhbSBjb250ZXh0IC0gQSBjb250ZXh0IG9iamVjdCByZXByZXNlbnRpbmcgdGhlIGN1cnJlbnQgcGF0aCBiZWluZyBwYXJzZWQsXG4gKiB0aGUgc291cmNlIG9mIHRoZSBkYXRhIGJlaW5nIHBhcnNlZCwgZXRjLlxuICogQHJldHVybnMgVGhlIHBhcnNlZCB2YWx1ZSwgb3IgbnVsbCBpZiB0aGUgdmFsdWUgd2FzIGEgRmllbGRWYWx1ZSBzZW50aW5lbFxuICogdGhhdCBzaG91bGQgbm90IGJlIGluY2x1ZGVkIGluIHRoZSByZXN1bHRpbmcgcGFyc2VkIGRhdGEuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3BhcnNlRGF0YShlLCB0KSB7XG4gICAgaWYgKF9fUFJJVkFURV9sb29rc0xpa2VKc29uT2JqZWN0KFxuICAgIC8vIFVud3JhcCB0aGUgQVBJIHR5cGUgZnJvbSB0aGUgQ29tcGF0IFNESy4gVGhpcyB3aWxsIHJldHVybiB0aGUgQVBJIHR5cGVcbiAgICAvLyBmcm9tIGZpcmVzdG9yZS1leHAuXG4gICAgZSA9IGdldE1vZHVsYXJJbnN0YW5jZShlKSkpIHJldHVybiBfX1BSSVZBVEVfdmFsaWRhdGVQbGFpbk9iamVjdChcIlVuc3VwcG9ydGVkIGZpZWxkIHZhbHVlOlwiLCB0LCBlKSwgXG4gICAgX19QUklWQVRFX3BhcnNlT2JqZWN0KGUsIHQpO1xuICAgIGlmIChlIGluc3RhbmNlb2YgRmllbGRWYWx1ZSkgXG4gICAgLy8gRmllbGRWYWx1ZXMgdXN1YWxseSBwYXJzZSBpbnRvIHRyYW5zZm9ybXMgKGV4Y2VwdCBkZWxldGVGaWVsZCgpKVxuICAgIC8vIGluIHdoaWNoIGNhc2Ugd2UgZG8gbm90IHdhbnQgdG8gaW5jbHVkZSB0aGlzIGZpZWxkIGluIG91ciBwYXJzZWQgZGF0YVxuICAgIC8vIChhcyBkb2luZyBzbyB3aWxsIG92ZXJ3cml0ZSB0aGUgZmllbGQgZGlyZWN0bHkgcHJpb3IgdG8gdGhlIHRyYW5zZm9ybVxuICAgIC8vIHRyeWluZyB0byB0cmFuc2Zvcm0gaXQpLiBTbyB3ZSBkb24ndCBhZGQgdGhpcyBsb2NhdGlvbiB0b1xuICAgIC8vIGNvbnRleHQuZmllbGRNYXNrIGFuZCB3ZSByZXR1cm4gbnVsbCBhcyBvdXIgcGFyc2luZyByZXN1bHQuXG4gICAgLyoqXG4gKiBcIlBhcnNlc1wiIHRoZSBwcm92aWRlZCBGaWVsZFZhbHVlSW1wbCwgYWRkaW5nIGFueSBuZWNlc3NhcnkgdHJhbnNmb3JtcyB0b1xuICogY29udGV4dC5maWVsZFRyYW5zZm9ybXMuXG4gKi9cbiAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX3BhcnNlU2VudGluZWxGaWVsZFZhbHVlKGUsIHQpIHtcbiAgICAgICAgLy8gU2VudGluZWxzIGFyZSBvbmx5IHN1cHBvcnRlZCB3aXRoIHdyaXRlcywgYW5kIG5vdCB3aXRoaW4gYXJyYXlzLlxuICAgICAgICBpZiAoIV9fUFJJVkFURV9pc1dyaXRlKHQuQWMpKSB0aHJvdyB0LlNjKGAke2UuX21ldGhvZE5hbWV9KCkgY2FuIG9ubHkgYmUgdXNlZCB3aXRoIHVwZGF0ZSgpIGFuZCBzZXQoKWApO1xuICAgICAgICBpZiAoIXQucGF0aCkgdGhyb3cgdC5TYyhgJHtlLl9tZXRob2ROYW1lfSgpIGlzIG5vdCBjdXJyZW50bHkgc3VwcG9ydGVkIGluc2lkZSBhcnJheXNgKTtcbiAgICAgICAgY29uc3QgbiA9IGUuX3RvRmllbGRUcmFuc2Zvcm0odCk7XG4gICAgICAgIG4gJiYgdC5maWVsZFRyYW5zZm9ybXMucHVzaChuKTtcbiAgICB9XG4gICAgLyoqXG4gKiBIZWxwZXIgdG8gcGFyc2UgYSBzY2FsYXIgdmFsdWUgKGkuZS4gbm90IGFuIE9iamVjdCwgQXJyYXksIG9yIEZpZWxkVmFsdWUpXG4gKlxuICogQHJldHVybnMgVGhlIHBhcnNlZCB2YWx1ZVxuICovIChlLCB0KSwgbnVsbDtcbiAgICBpZiAodm9pZCAwID09PSBlICYmIHQuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcykgXG4gICAgLy8gSWYgdGhlIGlucHV0IGlzIHVuZGVmaW5lZCBpdCBjYW4gbmV2ZXIgcGFydGljaXBhdGUgaW4gdGhlIGZpZWxkTWFzaywgc29cbiAgICAvLyBkb24ndCBoYW5kbGUgdGhpcyBiZWxvdy4gSWYgYGlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXNgIGlzIGZhbHNlLFxuICAgIC8vIGBwYXJzZVNjYWxhclZhbHVlYCB3aWxsIHJlamVjdCBhbiB1bmRlZmluZWQgdmFsdWUuXG4gICAgcmV0dXJuIG51bGw7XG4gICAgaWYgKFxuICAgIC8vIElmIGNvbnRleHQucGF0aCBpcyBudWxsIHdlIGFyZSBpbnNpZGUgYW4gYXJyYXkgYW5kIHdlIGRvbid0IHN1cHBvcnRcbiAgICAvLyBmaWVsZCBtYXNrIHBhdGhzIG1vcmUgZ3JhbnVsYXIgdGhhbiB0aGUgdG9wLWxldmVsIGFycmF5LlxuICAgIHQucGF0aCAmJiB0LmZpZWxkTWFzay5wdXNoKHQucGF0aCksIGUgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAvLyBUT0RPKGIvMzQ4NzExMzEpOiBJbmNsdWRlIHRoZSBwYXRoIGNvbnRhaW5pbmcgdGhlIGFycmF5IGluIHRoZSBlcnJvclxuICAgICAgICAvLyBtZXNzYWdlLlxuICAgICAgICAvLyBJbiB0aGUgY2FzZSBvZiBJTiBxdWVyaWVzLCB0aGUgcGFyc2VkIGRhdGEgaXMgYW4gYXJyYXkgKHJlcHJlc2VudGluZ1xuICAgICAgICAvLyB0aGUgc2V0IG9mIHZhbHVlcyB0byBiZSBpbmNsdWRlZCBmb3IgdGhlIElOIHF1ZXJ5KSB0aGF0IG1heSBkaXJlY3RseVxuICAgICAgICAvLyBjb250YWluIGFkZGl0aW9uYWwgYXJyYXlzIChlYWNoIHJlcHJlc2VudGluZyBhbiBpbmRpdmlkdWFsIGZpZWxkXG4gICAgICAgIC8vIHZhbHVlKSwgc28gd2UgZGlzYWJsZSB0aGlzIHZhbGlkYXRpb24uXG4gICAgICAgIGlmICh0LnNldHRpbmdzLmZjICYmIDQgLyogVXNlckRhdGFTb3VyY2UuQXJyYXlBcmd1bWVudCAqLyAhPT0gdC5BYykgdGhyb3cgdC5TYyhcIk5lc3RlZCBhcnJheXMgYXJlIG5vdCBzdXBwb3J0ZWRcIik7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfcGFyc2VBcnJheShlLCB0KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gW107XG4gICAgICAgICAgICBsZXQgciA9IDA7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGkgb2YgZSkge1xuICAgICAgICAgICAgICAgIGxldCBlID0gX19QUklWQVRFX3BhcnNlRGF0YShpLCB0LndjKHIpKTtcbiAgICAgICAgICAgICAgICBudWxsID09IGUgJiYgKFxuICAgICAgICAgICAgICAgIC8vIEp1c3QgaW5jbHVkZSBudWxscyBpbiB0aGUgYXJyYXkgZm9yIGZpZWxkcyBiZWluZyByZXBsYWNlZCB3aXRoIGFcbiAgICAgICAgICAgICAgICAvLyBzZW50aW5lbC5cbiAgICAgICAgICAgICAgICBlID0ge1xuICAgICAgICAgICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgICAgICAgICAgfSksIG4ucHVzaChlKSwgcisrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBhcnJheVZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlczogblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0oZSwgdCk7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfcGFyc2VTY2FsYXJWYWx1ZShlLCB0KSB7XG4gICAgICAgIGlmIChudWxsID09PSAoZSA9IGdldE1vZHVsYXJJbnN0YW5jZShlKSkpIHJldHVybiB7XG4gICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgIH07XG4gICAgICAgIGlmIChcIm51bWJlclwiID09IHR5cGVvZiBlKSByZXR1cm4gdG9OdW1iZXIodC5zZXJpYWxpemVyLCBlKTtcbiAgICAgICAgaWYgKFwiYm9vbGVhblwiID09IHR5cGVvZiBlKSByZXR1cm4ge1xuICAgICAgICAgICAgYm9vbGVhblZhbHVlOiBlXG4gICAgICAgIH07XG4gICAgICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiBlKSByZXR1cm4ge1xuICAgICAgICAgICAgc3RyaW5nVmFsdWU6IGVcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gVGltZXN0YW1wLmZyb21EYXRlKGUpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXBWYWx1ZTogdG9UaW1lc3RhbXAodC5zZXJpYWxpemVyLCBuKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIFRpbWVzdGFtcCkge1xuICAgICAgICAgICAgLy8gRmlyZXN0b3JlIGJhY2tlbmQgdHJ1bmNhdGVzIHByZWNpc2lvbiBkb3duIHRvIG1pY3Jvc2Vjb25kcy4gVG8gZW5zdXJlXG4gICAgICAgICAgICAvLyBvZmZsaW5lIG1vZGUgd29ya3MgdGhlIHNhbWUgd2l0aCByZWdhcmRzIHRvIHRydW5jYXRpb24sIHBlcmZvcm0gdGhlXG4gICAgICAgICAgICAvLyB0cnVuY2F0aW9uIGltbWVkaWF0ZWx5IHdpdGhvdXQgd2FpdGluZyBmb3IgdGhlIGJhY2tlbmQgdG8gZG8gdGhhdC5cbiAgICAgICAgICAgIGNvbnN0IG4gPSBuZXcgVGltZXN0YW1wKGUuc2Vjb25kcywgMWUzICogTWF0aC5mbG9vcihlLm5hbm9zZWNvbmRzIC8gMWUzKSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRpbWVzdGFtcFZhbHVlOiB0b1RpbWVzdGFtcCh0LnNlcmlhbGl6ZXIsIG4pXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgR2VvUG9pbnQpIHJldHVybiB7XG4gICAgICAgICAgICBnZW9Qb2ludFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgbGF0aXR1ZGU6IGUubGF0aXR1ZGUsXG4gICAgICAgICAgICAgICAgbG9uZ2l0dWRlOiBlLmxvbmdpdHVkZVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEJ5dGVzKSByZXR1cm4ge1xuICAgICAgICAgICAgYnl0ZXNWYWx1ZTogX19QUklWQVRFX3RvQnl0ZXModC5zZXJpYWxpemVyLCBlLl9ieXRlU3RyaW5nKVxuICAgICAgICB9O1xuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIERvY3VtZW50UmVmZXJlbmNlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC5kYXRhYmFzZUlkLCByID0gZS5maXJlc3RvcmUuX2RhdGFiYXNlSWQ7XG4gICAgICAgICAgICBpZiAoIXIuaXNFcXVhbChuKSkgdGhyb3cgdC5TYyhgRG9jdW1lbnQgcmVmZXJlbmNlIGlzIGZvciBkYXRhYmFzZSAke3IucHJvamVjdElkfS8ke3IuZGF0YWJhc2V9IGJ1dCBzaG91bGQgYmUgZm9yIGRhdGFiYXNlICR7bi5wcm9qZWN0SWR9LyR7bi5kYXRhYmFzZX1gKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcmVmZXJlbmNlVmFsdWU6IF9fUFJJVkFURV90b1Jlc291cmNlTmFtZShlLmZpcmVzdG9yZS5fZGF0YWJhc2VJZCB8fCB0LmRhdGFiYXNlSWQsIGUuX2tleS5wYXRoKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIFZlY3RvclZhbHVlKSBcbiAgICAgICAgLyoqXG4gKiBDcmVhdGVzIGEgbmV3IFZlY3RvclZhbHVlIHByb3RvIHZhbHVlICh1c2luZyB0aGUgaW50ZXJuYWwgZm9ybWF0KS5cbiAqL1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX3BhcnNlVmVjdG9yVmFsdWUoZSwgdCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHtcbiAgICAgICAgICAgICAgICBmaWVsZHM6IHtcbiAgICAgICAgICAgICAgICAgICAgW2h0XToge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nVmFsdWU6IEl0XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIFtFdF06IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5VmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IGUudG9BcnJheSgpLm1hcCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcIm51bWJlclwiICE9IHR5cGVvZiBlKSB0aHJvdyB0LlNjKFwiVmVjdG9yVmFsdWVzIG11c3Qgb25seSBjb250YWluIG51bWVyaWMgdmFsdWVzLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9fUFJJVkFURV90b0RvdWJsZSh0LnNlcmlhbGl6ZXIsIGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbWFwVmFsdWU6IG5cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBDaGVja3Mgd2hldGhlciBhbiBvYmplY3QgbG9va3MgbGlrZSBhIEpTT04gb2JqZWN0IHRoYXQgc2hvdWxkIGJlIGNvbnZlcnRlZFxuICogaW50byBhIHN0cnVjdC4gTm9ybWFsIGNsYXNzL3Byb3RvdHlwZSBpbnN0YW5jZXMgYXJlIGNvbnNpZGVyZWQgdG8gbG9vayBsaWtlXG4gKiBKU09OIG9iamVjdHMgc2luY2UgdGhleSBzaG91bGQgYmUgY29udmVydGVkIHRvIGEgc3RydWN0IHZhbHVlLiBBcnJheXMsIERhdGVzLFxuICogR2VvUG9pbnRzLCBldGMuIGFyZSBub3QgY29uc2lkZXJlZCB0byBsb29rIGxpa2UgSlNPTiBvYmplY3RzIHNpbmNlIHRoZXkgbWFwXG4gKiB0byBzcGVjaWZpYyBGaWVsZFZhbHVlIHR5cGVzIG90aGVyIHRoYW4gT2JqZWN0VmFsdWUuXG4gKi8gKGUsIHQpO1xuICAgICAgICB0aHJvdyB0LlNjKGBVbnN1cHBvcnRlZCBmaWVsZCB2YWx1ZTogJHtfX1BSSVZBVEVfdmFsdWVEZXNjcmlwdGlvbihlKX1gKTtcbiAgICB9KGUsIHQpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfcGFyc2VPYmplY3QoZSwgdCkge1xuICAgIGNvbnN0IG4gPSB7fTtcbiAgICByZXR1cm4gaXNFbXB0eShlKSA/IFxuICAgIC8vIElmIHdlIGVuY291bnRlciBhbiBlbXB0eSBvYmplY3QsIHdlIGV4cGxpY2l0bHkgYWRkIGl0IHRvIHRoZSB1cGRhdGVcbiAgICAvLyBtYXNrIHRvIGVuc3VyZSB0aGF0IHRoZSBzZXJ2ZXIgY3JlYXRlcyBhIG1hcCBlbnRyeS5cbiAgICB0LnBhdGggJiYgdC5wYXRoLmxlbmd0aCA+IDAgJiYgdC5maWVsZE1hc2sucHVzaCh0LnBhdGgpIDogZm9yRWFjaChlLCAoKGUsIHIpID0+IHtcbiAgICAgICAgY29uc3QgaSA9IF9fUFJJVkFURV9wYXJzZURhdGEociwgdC5tYyhlKSk7XG4gICAgICAgIG51bGwgIT0gaSAmJiAobltlXSA9IGkpO1xuICAgIH0pKSwge1xuICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgZmllbGRzOiBuXG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfbG9va3NMaWtlSnNvbk9iamVjdChlKSB7XG4gICAgcmV0dXJuICEoXCJvYmplY3RcIiAhPSB0eXBlb2YgZSB8fCBudWxsID09PSBlIHx8IGUgaW5zdGFuY2VvZiBBcnJheSB8fCBlIGluc3RhbmNlb2YgRGF0ZSB8fCBlIGluc3RhbmNlb2YgVGltZXN0YW1wIHx8IGUgaW5zdGFuY2VvZiBHZW9Qb2ludCB8fCBlIGluc3RhbmNlb2YgQnl0ZXMgfHwgZSBpbnN0YW5jZW9mIERvY3VtZW50UmVmZXJlbmNlIHx8IGUgaW5zdGFuY2VvZiBGaWVsZFZhbHVlIHx8IGUgaW5zdGFuY2VvZiBWZWN0b3JWYWx1ZSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV92YWxpZGF0ZVBsYWluT2JqZWN0KGUsIHQsIG4pIHtcbiAgICBpZiAoIV9fUFJJVkFURV9sb29rc0xpa2VKc29uT2JqZWN0KG4pIHx8ICFfX1BSSVZBVEVfaXNQbGFpbk9iamVjdChuKSkge1xuICAgICAgICBjb25zdCByID0gX19QUklWQVRFX3ZhbHVlRGVzY3JpcHRpb24obik7XG4gICAgICAgIHRocm93IFwiYW4gb2JqZWN0XCIgPT09IHIgPyB0LlNjKGUgKyBcIiBhIGN1c3RvbSBvYmplY3RcIikgOiB0LlNjKGUgKyBcIiBcIiArIHIpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgdGhhdCBjYWxscyBmcm9tRG90U2VwYXJhdGVkU3RyaW5nKCkgYnV0IHdyYXBzIGFueSBlcnJvciB0aHJvd24uXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2ZpZWxkUGF0aEZyb21Bcmd1bWVudCQxKGUsIHQsIG4pIHtcbiAgICBpZiAoKFxuICAgIC8vIElmIHJlcXVpcmVkLCByZXBsYWNlIHRoZSBGaWVsZFBhdGggQ29tcGF0IGNsYXNzIHdpdGggdGhlIGZpcmVzdG9yZS1leHBcbiAgICAvLyBGaWVsZFBhdGguXG4gICAgdCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSkgaW5zdGFuY2VvZiBGaWVsZFBhdGgpIHJldHVybiB0Ll9pbnRlcm5hbFBhdGg7XG4gICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHQpIHJldHVybiBfX1BSSVZBVEVfZmllbGRQYXRoRnJvbURvdFNlcGFyYXRlZFN0cmluZyhlLCB0KTtcbiAgICB0aHJvdyBfX1BSSVZBVEVfY3JlYXRlRXJyb3IoXCJGaWVsZCBwYXRoIGFyZ3VtZW50cyBtdXN0IGJlIG9mIHR5cGUgc3RyaW5nIG9yIFwiLCBlLCBcbiAgICAvKiBoYXNDb252ZXJ0ZXI9ICovICExLCBcbiAgICAvKiBwYXRoPSAqLyB2b2lkIDAsIG4pO1xufVxuXG4vKipcbiAqIE1hdGNoZXMgYW55IGNoYXJhY3RlcnMgaW4gYSBmaWVsZCBwYXRoIHN0cmluZyB0aGF0IGFyZSByZXNlcnZlZC5cbiAqLyBjb25zdCBQbiA9IG5ldyBSZWdFeHAoXCJbflxcXFwqL1xcXFxbXFxcXF1dXCIpO1xuXG4vKipcbiAqIFdyYXBzIGZyb21Eb3RTZXBhcmF0ZWRTdHJpbmcgd2l0aCBhbiBlcnJvciBtZXNzYWdlIGFib3V0IHRoZSBtZXRob2QgdGhhdFxuICogd2FzIHRocm93bi5cbiAqIEBwYXJhbSBtZXRob2ROYW1lIC0gVGhlIHB1YmxpY2x5IHZpc2libGUgbWV0aG9kIG5hbWVcbiAqIEBwYXJhbSBwYXRoIC0gVGhlIGRvdC1zZXBhcmF0ZWQgc3RyaW5nIGZvcm0gb2YgYSBmaWVsZCBwYXRoIHdoaWNoIHdpbGwgYmVcbiAqIHNwbGl0IG9uIGRvdHMuXG4gKiBAcGFyYW0gdGFyZ2V0RG9jIC0gVGhlIGRvY3VtZW50IGFnYWluc3Qgd2hpY2ggdGhlIGZpZWxkIHBhdGggd2lsbCBiZVxuICogZXZhbHVhdGVkLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9maWVsZFBhdGhGcm9tRG90U2VwYXJhdGVkU3RyaW5nKGUsIHQsIG4pIHtcbiAgICBpZiAodC5zZWFyY2goUG4pID49IDApIHRocm93IF9fUFJJVkFURV9jcmVhdGVFcnJvcihgSW52YWxpZCBmaWVsZCBwYXRoICgke3R9KS4gUGF0aHMgbXVzdCBub3QgY29udGFpbiAnficsICcqJywgJy8nLCAnWycsIG9yICddJ2AsIGUsIFxuICAgIC8qIGhhc0NvbnZlcnRlcj0gKi8gITEsIFxuICAgIC8qIHBhdGg9ICovIHZvaWQgMCwgbik7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIG5ldyBGaWVsZFBhdGgoLi4udC5zcGxpdChcIi5cIikpLl9pbnRlcm5hbFBhdGg7XG4gICAgfSBjYXRjaCAocikge1xuICAgICAgICB0aHJvdyBfX1BSSVZBVEVfY3JlYXRlRXJyb3IoYEludmFsaWQgZmllbGQgcGF0aCAoJHt0fSkuIFBhdGhzIG11c3Qgbm90IGJlIGVtcHR5LCBiZWdpbiB3aXRoICcuJywgZW5kIHdpdGggJy4nLCBvciBjb250YWluICcuLidgLCBlLCBcbiAgICAgICAgLyogaGFzQ29udmVydGVyPSAqLyAhMSwgXG4gICAgICAgIC8qIHBhdGg9ICovIHZvaWQgMCwgbik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfY3JlYXRlRXJyb3IoZSwgdCwgbiwgciwgaSkge1xuICAgIGNvbnN0IHMgPSByICYmICFyLmlzRW1wdHkoKSwgbyA9IHZvaWQgMCAhPT0gaTtcbiAgICBsZXQgXyA9IGBGdW5jdGlvbiAke3R9KCkgY2FsbGVkIHdpdGggaW52YWxpZCBkYXRhYDtcbiAgICBuICYmIChfICs9IFwiICh2aWEgYHRvRmlyZXN0b3JlKClgKVwiKSwgXyArPSBcIi4gXCI7XG4gICAgbGV0IGEgPSBcIlwiO1xuICAgIHJldHVybiAocyB8fCBvKSAmJiAoYSArPSBcIiAoZm91bmRcIiwgcyAmJiAoYSArPSBgIGluIGZpZWxkICR7cn1gKSwgbyAmJiAoYSArPSBgIGluIGRvY3VtZW50ICR7aX1gKSwgXG4gICAgYSArPSBcIilcIiksIG5ldyBGaXJlc3RvcmVFcnJvcihOLklOVkFMSURfQVJHVU1FTlQsIF8gKyBlICsgYSk7XG59XG5cbi8qKiBDaGVja3MgYGhheXN0YWNrYCBpZiBGaWVsZFBhdGggYG5lZWRsZWAgaXMgcHJlc2VudC4gUnVucyBpbiBPKG4pLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZmllbGRNYXNrQ29udGFpbnMoZSwgdCkge1xuICAgIHJldHVybiBlLnNvbWUoKGUgPT4gZS5pc0VxdWFsKHQpKSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgYERvY3VtZW50U25hcHNob3RgIGNvbnRhaW5zIGRhdGEgcmVhZCBmcm9tIGEgZG9jdW1lbnQgaW4geW91ciBGaXJlc3RvcmVcbiAqIGRhdGFiYXNlLiBUaGUgZGF0YSBjYW4gYmUgZXh0cmFjdGVkIHdpdGggYC5kYXRhKClgIG9yIGAuZ2V0KDxmaWVsZD4pYCB0b1xuICogZ2V0IGEgc3BlY2lmaWMgZmllbGQuXG4gKlxuICogRm9yIGEgYERvY3VtZW50U25hcHNob3RgIHRoYXQgcG9pbnRzIHRvIGEgbm9uLWV4aXN0aW5nIGRvY3VtZW50LCBhbnkgZGF0YVxuICogYWNjZXNzIHdpbGwgcmV0dXJuICd1bmRlZmluZWQnLiBZb3UgY2FuIHVzZSB0aGUgYGV4aXN0cygpYCBtZXRob2QgdG9cbiAqIGV4cGxpY2l0bHkgdmVyaWZ5IGEgZG9jdW1lbnQncyBleGlzdGVuY2UuXG4gKi8gY2xhc3MgRG9jdW1lbnRTbmFwc2hvdCQxIHtcbiAgICAvLyBOb3RlOiBUaGlzIGNsYXNzIGlzIHN0cmlwcGVkIGRvd24gdmVyc2lvbiBvZiB0aGUgRG9jdW1lbnRTbmFwc2hvdCBpblxuICAgIC8vIHRoZSBsZWdhY3kgU0RLLiBUaGUgY2hhbmdlcyBhcmU6XG4gICAgLy8gLSBObyBzdXBwb3J0IGZvciBTbmFwc2hvdE1ldGFkYXRhLlxuICAgIC8vIC0gTm8gc3VwcG9ydCBmb3IgU25hcHNob3RPcHRpb25zLlxuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yIHByb3RlY3RlZCAqL1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIHIsIGkpIHtcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlID0gZSwgdGhpcy5fdXNlckRhdGFXcml0ZXIgPSB0LCB0aGlzLl9rZXkgPSBuLCB0aGlzLl9kb2N1bWVudCA9IHIsIFxuICAgICAgICB0aGlzLl9jb252ZXJ0ZXIgPSBpO1xuICAgIH1cbiAgICAvKiogUHJvcGVydHkgb2YgdGhlIGBEb2N1bWVudFNuYXBzaG90YCB0aGF0IHByb3ZpZGVzIHRoZSBkb2N1bWVudCdzIElELiAqLyAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9rZXkucGF0aC5sYXN0U2VnbWVudCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgYERvY3VtZW50UmVmZXJlbmNlYCBmb3IgdGhlIGRvY3VtZW50IGluY2x1ZGVkIGluIHRoZSBgRG9jdW1lbnRTbmFwc2hvdGAuXG4gICAgICovICAgIGdldCByZWYoKSB7XG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRSZWZlcmVuY2UodGhpcy5fZmlyZXN0b3JlLCB0aGlzLl9jb252ZXJ0ZXIsIHRoaXMuX2tleSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNpZ25hbHMgd2hldGhlciBvciBub3QgdGhlIGRvY3VtZW50IGF0IHRoZSBzbmFwc2hvdCdzIGxvY2F0aW9uIGV4aXN0cy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhlIGRvY3VtZW50IGV4aXN0cy5cbiAgICAgKi8gICAgZXhpc3RzKCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdGhpcy5fZG9jdW1lbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudCBhcyBhbiBgT2JqZWN0YC4gUmV0dXJucyBgdW5kZWZpbmVkYCBpZlxuICAgICAqIHRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LlxuICAgICAqXG4gICAgICogQHJldHVybnMgQW4gYE9iamVjdGAgY29udGFpbmluZyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudCBvciBgdW5kZWZpbmVkYFxuICAgICAqIGlmIHRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LlxuICAgICAqLyAgICBkYXRhKCkge1xuICAgICAgICBpZiAodGhpcy5fZG9jdW1lbnQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9jb252ZXJ0ZXIpIHtcbiAgICAgICAgICAgICAgICAvLyBXZSBvbmx5IHdhbnQgdG8gdXNlIHRoZSBjb252ZXJ0ZXIgYW5kIGNyZWF0ZSBhIG5ldyBEb2N1bWVudFNuYXBzaG90XG4gICAgICAgICAgICAgICAgLy8gaWYgYSBjb252ZXJ0ZXIgaGFzIGJlZW4gcHJvdmlkZWQuXG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBRdWVyeURvY3VtZW50U25hcHNob3QkMSh0aGlzLl9maXJlc3RvcmUsIHRoaXMuX3VzZXJEYXRhV3JpdGVyLCB0aGlzLl9rZXksIHRoaXMuX2RvY3VtZW50LCBcbiAgICAgICAgICAgICAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jb252ZXJ0ZXIuZnJvbUZpcmVzdG9yZShlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl91c2VyRGF0YVdyaXRlci5jb252ZXJ0VmFsdWUodGhpcy5fZG9jdW1lbnQuZGF0YS52YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIHRoZSBmaWVsZCBzcGVjaWZpZWQgYnkgYGZpZWxkUGF0aGAuIFJldHVybnMgYHVuZGVmaW5lZGAgaWYgdGhlXG4gICAgICogZG9jdW1lbnQgb3IgZmllbGQgZG9lc24ndCBleGlzdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaWVsZFBhdGggLSBUaGUgcGF0aCAoZm9yIGV4YW1wbGUgJ2Zvbycgb3IgJ2Zvby5iYXInKSB0byBhIHNwZWNpZmljXG4gICAgICogZmllbGQuXG4gICAgICogQHJldHVybnMgVGhlIGRhdGEgYXQgdGhlIHNwZWNpZmllZCBmaWVsZCBsb2NhdGlvbiBvciB1bmRlZmluZWQgaWYgbm8gc3VjaFxuICAgICAqIGZpZWxkIGV4aXN0cyBpbiB0aGUgZG9jdW1lbnQuXG4gICAgICovXG4gICAgLy8gV2UgYXJlIHVzaW5nIGBhbnlgIGhlcmUgdG8gYXZvaWQgYW4gZXhwbGljaXQgY2FzdCBieSBvdXIgdXNlcnMuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBnZXQoZSkge1xuICAgICAgICBpZiAodGhpcy5fZG9jdW1lbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLl9kb2N1bWVudC5kYXRhLmZpZWxkKF9fUFJJVkFURV9maWVsZFBhdGhGcm9tQXJndW1lbnQoXCJEb2N1bWVudFNuYXBzaG90LmdldFwiLCBlKSk7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gdCkgcmV0dXJuIHRoaXMuX3VzZXJEYXRhV3JpdGVyLmNvbnZlcnRWYWx1ZSh0KTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBBIGBRdWVyeURvY3VtZW50U25hcHNob3RgIGNvbnRhaW5zIGRhdGEgcmVhZCBmcm9tIGEgZG9jdW1lbnQgaW4geW91clxuICogRmlyZXN0b3JlIGRhdGFiYXNlIGFzIHBhcnQgb2YgYSBxdWVyeS4gVGhlIGRvY3VtZW50IGlzIGd1YXJhbnRlZWQgdG8gZXhpc3RcbiAqIGFuZCBpdHMgZGF0YSBjYW4gYmUgZXh0cmFjdGVkIHdpdGggYC5kYXRhKClgIG9yIGAuZ2V0KDxmaWVsZD4pYCB0byBnZXQgYVxuICogc3BlY2lmaWMgZmllbGQuXG4gKlxuICogQSBgUXVlcnlEb2N1bWVudFNuYXBzaG90YCBvZmZlcnMgdGhlIHNhbWUgQVBJIHN1cmZhY2UgYXMgYVxuICogYERvY3VtZW50U25hcHNob3RgLiBTaW5jZSBxdWVyeSByZXN1bHRzIGNvbnRhaW4gb25seSBleGlzdGluZyBkb2N1bWVudHMsIHRoZVxuICogYGV4aXN0c2AgcHJvcGVydHkgd2lsbCBhbHdheXMgYmUgdHJ1ZSBhbmQgYGRhdGEoKWAgd2lsbCBuZXZlciByZXR1cm5cbiAqICd1bmRlZmluZWQnLlxuICovIGNsYXNzIFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCQxIGV4dGVuZHMgRG9jdW1lbnRTbmFwc2hvdCQxIHtcbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQgYXMgYW4gYE9iamVjdGAuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcmV0dXJucyBBbiBgT2JqZWN0YCBjb250YWluaW5nIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50LlxuICAgICAqL1xuICAgIGRhdGEoKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5kYXRhKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0aGF0IGNhbGxzIGBmcm9tRG90U2VwYXJhdGVkU3RyaW5nKClgIGJ1dCB3cmFwcyBhbnkgZXJyb3IgdGhyb3duLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9maWVsZFBhdGhGcm9tQXJndW1lbnQoZSwgdCkge1xuICAgIHJldHVybiBcInN0cmluZ1wiID09IHR5cGVvZiB0ID8gX19QUklWQVRFX2ZpZWxkUGF0aEZyb21Eb3RTZXBhcmF0ZWRTdHJpbmcoZSwgdCkgOiB0IGluc3RhbmNlb2YgRmllbGRQYXRoID8gdC5faW50ZXJuYWxQYXRoIDogdC5fZGVsZWdhdGUuX2ludGVybmFsUGF0aDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3ZhbGlkYXRlSGFzRXhwbGljaXRPcmRlckJ5Rm9yTGltaXRUb0xhc3QoZSkge1xuICAgIGlmIChcIkxcIiAvKiBMaW1pdFR5cGUuTGFzdCAqLyA9PT0gZS5saW1pdFR5cGUgJiYgMCA9PT0gZS5leHBsaWNpdE9yZGVyQnkubGVuZ3RoKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoTi5VTklNUExFTUVOVEVELCBcImxpbWl0VG9MYXN0KCkgcXVlcmllcyByZXF1aXJlIHNwZWNpZnlpbmcgYXQgbGVhc3Qgb25lIG9yZGVyQnkoKSBjbGF1c2VcIik7XG59XG5cbi8qKlxuICogQW4gYEFwcGxpYWJsZUNvbnN0cmFpbnRgIGlzIGFuIGFic3RyYWN0aW9uIG9mIGEgY29uc3RyYWludCB0aGF0IGNhbiBiZSBhcHBsaWVkXG4gKiB0byBhIEZpcmVzdG9yZSBxdWVyeS5cbiAqLyBjbGFzcyBBcHBsaWFibGVDb25zdHJhaW50IHt9XG5cbi8qKlxuICogQSBgUXVlcnlDb25zdHJhaW50YCBpcyB1c2VkIHRvIG5hcnJvdyB0aGUgc2V0IG9mIGRvY3VtZW50cyByZXR1cm5lZCBieSBhXG4gKiBGaXJlc3RvcmUgcXVlcnkuIGBRdWVyeUNvbnN0cmFpbnRgcyBhcmUgY3JlYXRlZCBieSBpbnZva2luZyB7QGxpbmsgd2hlcmV9LFxuICoge0BsaW5rIG9yZGVyQnl9LCB7QGxpbmsgKHN0YXJ0QXQ6MSl9LCB7QGxpbmsgKHN0YXJ0QWZ0ZXI6MSl9LCB7QGxpbmtcbiAqIChlbmRCZWZvcmU6MSl9LCB7QGxpbmsgKGVuZEF0OjEpfSwge0BsaW5rIGxpbWl0fSwge0BsaW5rIGxpbWl0VG9MYXN0fSBhbmRcbiAqIGNhbiB0aGVuIGJlIHBhc3NlZCB0byB7QGxpbmsgKHF1ZXJ5OjEpfSB0byBjcmVhdGUgYSBuZXcgcXVlcnkgaW5zdGFuY2UgdGhhdFxuICogYWxzbyBjb250YWlucyB0aGlzIGBRdWVyeUNvbnN0cmFpbnRgLlxuICovIGNsYXNzIFF1ZXJ5Q29uc3RyYWludCBleHRlbmRzIEFwcGxpYWJsZUNvbnN0cmFpbnQge31cblxuZnVuY3Rpb24gcXVlcnkoZSwgdCwgLi4ubikge1xuICAgIGxldCByID0gW107XG4gICAgdCBpbnN0YW5jZW9mIEFwcGxpYWJsZUNvbnN0cmFpbnQgJiYgci5wdXNoKHQpLCByID0gci5jb25jYXQobiksIGZ1bmN0aW9uIF9fUFJJVkFURV92YWxpZGF0ZVF1ZXJ5Q29uc3RyYWludEFycmF5KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGUuZmlsdGVyKChlID0+IGUgaW5zdGFuY2VvZiBRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnQpKS5sZW5ndGgsIG4gPSBlLmZpbHRlcigoZSA9PiBlIGluc3RhbmNlb2YgUXVlcnlGaWVsZEZpbHRlckNvbnN0cmFpbnQpKS5sZW5ndGg7XG4gICAgICAgIGlmICh0ID4gMSB8fCB0ID4gMCAmJiBuID4gMCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKE4uSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkUXVlcnkuIFdoZW4gdXNpbmcgY29tcG9zaXRlIGZpbHRlcnMsIHlvdSBjYW5ub3QgdXNlIG1vcmUgdGhhbiBvbmUgZmlsdGVyIGF0IHRoZSB0b3AgbGV2ZWwuIENvbnNpZGVyIG5lc3RpbmcgdGhlIG11bHRpcGxlIGZpbHRlcnMgd2l0aGluIGFuIGBhbmQoLi4uKWAgc3RhdGVtZW50LiBGb3IgZXhhbXBsZTogY2hhbmdlIGBxdWVyeShxdWVyeSwgd2hlcmUoLi4uKSwgb3IoLi4uKSlgIHRvIGBxdWVyeShxdWVyeSwgYW5kKHdoZXJlKC4uLiksIG9yKC4uLikpKWAuXCIpO1xuICAgIH1cbiAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgIC8qKlxuICogQ29udmVydHMgRmlyZXN0b3JlJ3MgaW50ZXJuYWwgdHlwZXMgdG8gdGhlIEphdmFTY3JpcHQgdHlwZXMgdGhhdCB3ZSBleHBvc2VcbiAqIHRvIHRoZSB1c2VyLlxuICpcbiAqIEBpbnRlcm5hbFxuICovIChyKTtcbiAgICBmb3IgKGNvbnN0IHQgb2YgcikgZSA9IHQuX2FwcGx5KGUpO1xuICAgIHJldHVybiBlO1xufVxuXG4vKipcbiAqIEEgYFF1ZXJ5RmllbGRGaWx0ZXJDb25zdHJhaW50YCBpcyB1c2VkIHRvIG5hcnJvdyB0aGUgc2V0IG9mIGRvY3VtZW50cyByZXR1cm5lZCBieVxuICogYSBGaXJlc3RvcmUgcXVlcnkgYnkgZmlsdGVyaW5nIG9uIG9uZSBvciBtb3JlIGRvY3VtZW50IGZpZWxkcy5cbiAqIGBRdWVyeUZpZWxkRmlsdGVyQ29uc3RyYWludGBzIGFyZSBjcmVhdGVkIGJ5IGludm9raW5nIHtAbGluayB3aGVyZX0gYW5kIGNhbiB0aGVuXG4gKiBiZSBwYXNzZWQgdG8ge0BsaW5rIChxdWVyeToxKX0gdG8gY3JlYXRlIGEgbmV3IHF1ZXJ5IGluc3RhbmNlIHRoYXQgYWxzbyBjb250YWluc1xuICogdGhpcyBgUXVlcnlGaWVsZEZpbHRlckNvbnN0cmFpbnRgLlxuICovIGNsYXNzIFF1ZXJ5RmllbGRGaWx0ZXJDb25zdHJhaW50IGV4dGVuZHMgUXVlcnlDb25zdHJhaW50IHtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuX2ZpZWxkID0gZSwgdGhpcy5fb3AgPSB0LCB0aGlzLl92YWx1ZSA9IG4sIFxuICAgICAgICAvKiogVGhlIHR5cGUgb2YgdGhpcyBxdWVyeSBjb25zdHJhaW50ICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwid2hlcmVcIjtcbiAgICB9XG4gICAgc3RhdGljIF9jcmVhdGUoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5RmllbGRGaWx0ZXJDb25zdHJhaW50KGUsIHQsIG4pO1xuICAgIH1cbiAgICBfYXBwbHkoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5fcGFyc2UoZSk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfdmFsaWRhdGVOZXdGaWVsZEZpbHRlcihlLl9xdWVyeSwgdCksIG5ldyBRdWVyeShlLmZpcmVzdG9yZSwgZS5jb252ZXJ0ZXIsIF9fUFJJVkFURV9xdWVyeVdpdGhBZGRlZEZpbHRlcihlLl9xdWVyeSwgdCkpO1xuICAgIH1cbiAgICBfcGFyc2UoZSkge1xuICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX25ld1VzZXJEYXRhUmVhZGVyKGUuZmlyZXN0b3JlKSwgbiA9IGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdRdWVyeUZpbHRlcihlLCB0LCBuLCByLCBpLCBzLCBvKSB7XG4gICAgICAgICAgICBsZXQgXztcbiAgICAgICAgICAgIGlmIChpLmlzS2V5RmllbGQoKSkge1xuICAgICAgICAgICAgICAgIGlmIChcImFycmF5LWNvbnRhaW5zXCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlMgKi8gPT09IHMgfHwgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlkgKi8gPT09IHMpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihOLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIFF1ZXJ5LiBZb3UgY2FuJ3QgcGVyZm9ybSAnJHtzfScgcXVlcmllcyBvbiBkb2N1bWVudElkKCkuYCk7XG4gICAgICAgICAgICAgICAgaWYgKFwiaW5cIiAvKiBPcGVyYXRvci5JTiAqLyA9PT0gcyB8fCBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyA9PT0gcykge1xuICAgICAgICAgICAgICAgICAgICBfX1BSSVZBVEVfdmFsaWRhdGVEaXNqdW5jdGl2ZUZpbHRlckVsZW1lbnRzKG8sIHMpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiBvKSB0LnB1c2goX19QUklWQVRFX3BhcnNlRG9jdW1lbnRJZFZhbHVlKHIsIGUsIG4pKTtcbiAgICAgICAgICAgICAgICAgICAgXyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5VmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IHRcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgXyA9IF9fUFJJVkFURV9wYXJzZURvY3VtZW50SWRWYWx1ZShyLCBlLCBvKTtcbiAgICAgICAgICAgIH0gZWxzZSBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gIT09IHMgJiYgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gIT09IHMgJiYgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlkgKi8gIT09IHMgfHwgX19QUklWQVRFX3ZhbGlkYXRlRGlzanVuY3RpdmVGaWx0ZXJFbGVtZW50cyhvLCBzKSwgXG4gICAgICAgICAgICBfID0gX19QUklWQVRFX3BhcnNlUXVlcnlWYWx1ZShuLCB0LCBvLCBcbiAgICAgICAgICAgIC8qIGFsbG93QXJyYXlzPSAqLyBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gPT09IHMgfHwgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gPT09IHMpO1xuICAgICAgICAgICAgY29uc3QgYSA9IEZpZWxkRmlsdGVyLmNyZWF0ZShpLCBzLCBfKTtcbiAgICAgICAgICAgIHJldHVybiBhO1xuICAgICAgICB9KGUuX3F1ZXJ5LCBcIndoZXJlXCIsIHQsIGUuZmlyZXN0b3JlLl9kYXRhYmFzZUlkLCB0aGlzLl9maWVsZCwgdGhpcy5fb3AsIHRoaXMuX3ZhbHVlKTtcbiAgICAgICAgcmV0dXJuIG47XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgUXVlcnlGaWVsZEZpbHRlckNvbnN0cmFpbnR9IHRoYXQgZW5mb3JjZXMgdGhhdCBkb2N1bWVudHNcbiAqIG11c3QgY29udGFpbiB0aGUgc3BlY2lmaWVkIGZpZWxkIGFuZCB0aGF0IHRoZSB2YWx1ZSBzaG91bGQgc2F0aXNmeSB0aGVcbiAqIHJlbGF0aW9uIGNvbnN0cmFpbnQgcHJvdmlkZWQuXG4gKlxuICogQHBhcmFtIGZpZWxkUGF0aCAtIFRoZSBwYXRoIHRvIGNvbXBhcmVcbiAqIEBwYXJhbSBvcFN0ciAtIFRoZSBvcGVyYXRpb24gc3RyaW5nIChlLmcgXCImbHQ7XCIsIFwiJmx0Oz1cIiwgXCI9PVwiLCBcIiZsdDtcIixcbiAqICAgXCImbHQ7PVwiLCBcIiE9XCIpLlxuICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIGZvciBjb21wYXJpc29uXG4gKiBAcmV0dXJucyBUaGUgY3JlYXRlZCB7QGxpbmsgUXVlcnlGaWVsZEZpbHRlckNvbnN0cmFpbnR9LlxuICovIGZ1bmN0aW9uIHdoZXJlKGUsIHQsIG4pIHtcbiAgICBjb25zdCByID0gdCwgaSA9IF9fUFJJVkFURV9maWVsZFBhdGhGcm9tQXJndW1lbnQoXCJ3aGVyZVwiLCBlKTtcbiAgICByZXR1cm4gUXVlcnlGaWVsZEZpbHRlckNvbnN0cmFpbnQuX2NyZWF0ZShpLCByLCBuKTtcbn1cblxuLyoqXG4gKiBBIGBRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnRgIGlzIHVzZWQgdG8gbmFycm93IHRoZSBzZXQgb2YgZG9jdW1lbnRzXG4gKiByZXR1cm5lZCBieSBhIEZpcmVzdG9yZSBxdWVyeSBieSBwZXJmb3JtaW5nIHRoZSBsb2dpY2FsIE9SIG9yIEFORCBvZiBtdWx0aXBsZVxuICoge0BsaW5rIFF1ZXJ5RmllbGRGaWx0ZXJDb25zdHJhaW50fXMgb3Ige0BsaW5rIFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludH1zLlxuICogYFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludGBzIGFyZSBjcmVhdGVkIGJ5IGludm9raW5nIHtAbGluayBvcn0gb3JcbiAqIHtAbGluayBhbmR9IGFuZCBjYW4gdGhlbiBiZSBwYXNzZWQgdG8ge0BsaW5rIChxdWVyeToxKX0gdG8gY3JlYXRlIGEgbmV3IHF1ZXJ5XG4gKiBpbnN0YW5jZSB0aGF0IGFsc28gY29udGFpbnMgdGhlIGBRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnRgLlxuICovIGNsYXNzIFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludCBleHRlbmRzIEFwcGxpYWJsZUNvbnN0cmFpbnQge1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIHF1ZXJ5IGNvbnN0cmFpbnQgKi9cbiAgICBlLCB0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMudHlwZSA9IGUsIHRoaXMuX3F1ZXJ5Q29uc3RyYWludHMgPSB0O1xuICAgIH1cbiAgICBzdGF0aWMgX2NyZWF0ZShlLCB0KSB7XG4gICAgICAgIHJldHVybiBuZXcgUXVlcnlDb21wb3NpdGVGaWx0ZXJDb25zdHJhaW50KGUsIHQpO1xuICAgIH1cbiAgICBfcGFyc2UoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5fcXVlcnlDb25zdHJhaW50cy5tYXAoKHQgPT4gdC5fcGFyc2UoZSkpKS5maWx0ZXIoKGUgPT4gZS5nZXRGaWx0ZXJzKCkubGVuZ3RoID4gMCkpO1xuICAgICAgICByZXR1cm4gMSA9PT0gdC5sZW5ndGggPyB0WzBdIDogQ29tcG9zaXRlRmlsdGVyLmNyZWF0ZSh0LCB0aGlzLl9nZXRPcGVyYXRvcigpKTtcbiAgICB9XG4gICAgX2FwcGx5KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuX3BhcnNlKGUpO1xuICAgICAgICByZXR1cm4gMCA9PT0gdC5nZXRGaWx0ZXJzKCkubGVuZ3RoID8gZSA6IChmdW5jdGlvbiBfX1BSSVZBVEVfdmFsaWRhdGVOZXdGaWx0ZXIoZSwgdCkge1xuICAgICAgICAgICAgbGV0IG4gPSBlO1xuICAgICAgICAgICAgY29uc3QgciA9IHQuZ2V0RmxhdHRlbmVkRmlsdGVycygpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIHIpIF9fUFJJVkFURV92YWxpZGF0ZU5ld0ZpZWxkRmlsdGVyKG4sIGUpLCBuID0gX19QUklWQVRFX3F1ZXJ5V2l0aEFkZGVkRmlsdGVyKG4sIGUpO1xuICAgICAgICB9XG4gICAgICAgIC8vIENoZWNrcyBpZiBhbnkgb2YgdGhlIHByb3ZpZGVkIGZpbHRlciBvcGVyYXRvcnMgYXJlIGluY2x1ZGVkIGluIHRoZSBnaXZlbiBsaXN0IG9mIGZpbHRlcnMgYW5kXG4gICAgICAgIC8vIHJldHVybnMgdGhlIGZpcnN0IG9uZSB0aGF0IGlzLCBvciBudWxsIGlmIG5vbmUgYXJlLlxuICAgICAgICAoZS5fcXVlcnksIHQpLCBuZXcgUXVlcnkoZS5maXJlc3RvcmUsIGUuY29udmVydGVyLCBfX1BSSVZBVEVfcXVlcnlXaXRoQWRkZWRGaWx0ZXIoZS5fcXVlcnksIHQpKSk7XG4gICAgfVxuICAgIF9nZXRRdWVyeUNvbnN0cmFpbnRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcXVlcnlDb25zdHJhaW50cztcbiAgICB9XG4gICAgX2dldE9wZXJhdG9yKCkge1xuICAgICAgICByZXR1cm4gXCJhbmRcIiA9PT0gdGhpcy50eXBlID8gXCJhbmRcIiAvKiBDb21wb3NpdGVPcGVyYXRvci5BTkQgKi8gOiBcIm9yXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuT1IgKi87XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcge0BsaW5rIFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludH0gdGhhdCBpcyBhIGRpc2p1bmN0aW9uIG9mXG4gKiB0aGUgZ2l2ZW4gZmlsdGVyIGNvbnN0cmFpbnRzLiBBIGRpc2p1bmN0aW9uIGZpbHRlciBpbmNsdWRlcyBhIGRvY3VtZW50IGlmIGl0XG4gKiBzYXRpc2ZpZXMgYW55IG9mIHRoZSBnaXZlbiBmaWx0ZXJzLlxuICpcbiAqIEBwYXJhbSBxdWVyeUNvbnN0cmFpbnRzIC0gT3B0aW9uYWwuIFRoZSBsaXN0IG9mXG4gKiB7QGxpbmsgUXVlcnlGaWx0ZXJDb25zdHJhaW50fXMgdG8gcGVyZm9ybSBhIGRpc2p1bmN0aW9uIGZvci4gVGhlc2UgbXVzdCBiZVxuICogY3JlYXRlZCB3aXRoIGNhbGxzIHRvIHtAbGluayB3aGVyZX0sIHtAbGluayBvcn0sIG9yIHtAbGluayBhbmR9LlxuICogQHJldHVybnMgVGhlIG5ld2x5IGNyZWF0ZWQge0BsaW5rIFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludH0uXG4gKi8gZnVuY3Rpb24gb3IoLi4uZSkge1xuICAgIC8vIE9ubHkgc3VwcG9ydCBRdWVyeUZpbHRlckNvbnN0cmFpbnRzXG4gICAgcmV0dXJuIGUuZm9yRWFjaCgoZSA9PiBfX1BSSVZBVEVfdmFsaWRhdGVRdWVyeUZpbHRlckNvbnN0cmFpbnQoXCJvclwiLCBlKSkpLCBRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnQuX2NyZWF0ZShcIm9yXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuT1IgKi8gLCBlKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHtAbGluayBRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnR9IHRoYXQgaXMgYSBjb25qdW5jdGlvbiBvZlxuICogdGhlIGdpdmVuIGZpbHRlciBjb25zdHJhaW50cy4gQSBjb25qdW5jdGlvbiBmaWx0ZXIgaW5jbHVkZXMgYSBkb2N1bWVudCBpZiBpdFxuICogc2F0aXNmaWVzIGFsbCBvZiB0aGUgZ2l2ZW4gZmlsdGVycy5cbiAqXG4gKiBAcGFyYW0gcXVlcnlDb25zdHJhaW50cyAtIE9wdGlvbmFsLiBUaGUgbGlzdCBvZlxuICoge0BsaW5rIFF1ZXJ5RmlsdGVyQ29uc3RyYWludH1zIHRvIHBlcmZvcm0gYSBjb25qdW5jdGlvbiBmb3IuIFRoZXNlIG11c3QgYmVcbiAqIGNyZWF0ZWQgd2l0aCBjYWxscyB0byB7QGxpbmsgd2hlcmV9LCB7QGxpbmsgb3J9LCBvciB7QGxpbmsgYW5kfS5cbiAqIEByZXR1cm5zIFRoZSBuZXdseSBjcmVhdGVkIHtAbGluayBRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnR9LlxuICovIGZ1bmN0aW9uIGFuZCguLi5lKSB7XG4gICAgLy8gT25seSBzdXBwb3J0IFF1ZXJ5RmlsdGVyQ29uc3RyYWludHNcbiAgICByZXR1cm4gZS5mb3JFYWNoKChlID0+IF9fUFJJVkFURV92YWxpZGF0ZVF1ZXJ5RmlsdGVyQ29uc3RyYWludChcImFuZFwiLCBlKSkpLCBRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnQuX2NyZWF0ZShcImFuZFwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLkFORCAqLyAsIGUpO1xufVxuXG4vKipcbiAqIEEgYFF1ZXJ5T3JkZXJCeUNvbnN0cmFpbnRgIGlzIHVzZWQgdG8gc29ydCB0aGUgc2V0IG9mIGRvY3VtZW50cyByZXR1cm5lZCBieSBhXG4gKiBGaXJlc3RvcmUgcXVlcnkuIGBRdWVyeU9yZGVyQnlDb25zdHJhaW50YHMgYXJlIGNyZWF0ZWQgYnkgaW52b2tpbmdcbiAqIHtAbGluayBvcmRlckJ5fSBhbmQgY2FuIHRoZW4gYmUgcGFzc2VkIHRvIHtAbGluayAocXVlcnk6MSl9IHRvIGNyZWF0ZSBhIG5ldyBxdWVyeVxuICogaW5zdGFuY2UgdGhhdCBhbHNvIGNvbnRhaW5zIHRoaXMgYFF1ZXJ5T3JkZXJCeUNvbnN0cmFpbnRgLlxuICpcbiAqIE5vdGU6IERvY3VtZW50cyB0aGF0IGRvIG5vdCBjb250YWluIHRoZSBvcmRlckJ5IGZpZWxkIHdpbGwgbm90IGJlIHByZXNlbnQgaW5cbiAqIHRoZSBxdWVyeSByZXN1bHQuXG4gKi8gY2xhc3MgUXVlcnlPcmRlckJ5Q29uc3RyYWludCBleHRlbmRzIFF1ZXJ5Q29uc3RyYWludCB7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLl9maWVsZCA9IGUsIHRoaXMuX2RpcmVjdGlvbiA9IHQsIFxuICAgICAgICAvKiogVGhlIHR5cGUgb2YgdGhpcyBxdWVyeSBjb25zdHJhaW50ICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwib3JkZXJCeVwiO1xuICAgIH1cbiAgICBzdGF0aWMgX2NyZWF0ZShlLCB0KSB7XG4gICAgICAgIHJldHVybiBuZXcgUXVlcnlPcmRlckJ5Q29uc3RyYWludChlLCB0KTtcbiAgICB9XG4gICAgX2FwcGx5KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdRdWVyeU9yZGVyQnkoZSwgdCwgbikge1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IGUuc3RhcnRBdCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKE4uSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIHF1ZXJ5LiBZb3UgbXVzdCBub3QgY2FsbCBzdGFydEF0KCkgb3Igc3RhcnRBZnRlcigpIGJlZm9yZSBjYWxsaW5nIG9yZGVyQnkoKS5cIik7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gZS5lbmRBdCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKE4uSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIHF1ZXJ5LiBZb3UgbXVzdCBub3QgY2FsbCBlbmRBdCgpIG9yIGVuZEJlZm9yZSgpIGJlZm9yZSBjYWxsaW5nIG9yZGVyQnkoKS5cIik7XG4gICAgICAgICAgICBjb25zdCByID0gbmV3IE9yZGVyQnkodCwgbik7XG4gICAgICAgICAgICByZXR1cm4gcjtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIENyZWF0ZSBhIGBCb3VuZGAgZnJvbSBhIHF1ZXJ5IGFuZCBhIGRvY3VtZW50LlxuICpcbiAqIE5vdGUgdGhhdCB0aGUgYEJvdW5kYCB3aWxsIGFsd2F5cyBpbmNsdWRlIHRoZSBrZXkgb2YgdGhlIGRvY3VtZW50XG4gKiBhbmQgc28gb25seSB0aGUgcHJvdmlkZWQgZG9jdW1lbnQgd2lsbCBjb21wYXJlIGVxdWFsIHRvIHRoZSByZXR1cm5lZFxuICogcG9zaXRpb24uXG4gKlxuICogV2lsbCB0aHJvdyBpZiB0aGUgZG9jdW1lbnQgZG9lcyBub3QgY29udGFpbiBhbGwgZmllbGRzIG9mIHRoZSBvcmRlciBieVxuICogb2YgdGhlIHF1ZXJ5IG9yIGlmIGFueSBvZiB0aGUgZmllbGRzIGluIHRoZSBvcmRlciBieSBhcmUgYW4gdW5jb21taXR0ZWRcbiAqIHNlcnZlciB0aW1lc3RhbXAuXG4gKi8gKGUuX3F1ZXJ5LCB0aGlzLl9maWVsZCwgdGhpcy5fZGlyZWN0aW9uKTtcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeShlLmZpcmVzdG9yZSwgZS5jb252ZXJ0ZXIsIGZ1bmN0aW9uIF9fUFJJVkFURV9xdWVyeVdpdGhBZGRlZE9yZGVyQnkoZSwgdCkge1xuICAgICAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiB2YWxpZGF0ZSB0aGF0IG9yZGVyQnkgZG9lcyBub3QgbGlzdCB0aGUgc2FtZSBrZXkgdHdpY2UuXG4gICAgICAgICAgICBjb25zdCBuID0gZS5leHBsaWNpdE9yZGVyQnkuY29uY2F0KFsgdCBdKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1F1ZXJ5SW1wbChlLnBhdGgsIGUuY29sbGVjdGlvbkdyb3VwLCBuLCBlLmZpbHRlcnMuc2xpY2UoKSwgZS5saW1pdCwgZS5saW1pdFR5cGUsIGUuc3RhcnRBdCwgZS5lbmRBdCk7XG4gICAgICAgIH0oZS5fcXVlcnksIHQpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHtAbGluayBRdWVyeU9yZGVyQnlDb25zdHJhaW50fSB0aGF0IHNvcnRzIHRoZSBxdWVyeSByZXN1bHQgYnkgdGhlXG4gKiBzcGVjaWZpZWQgZmllbGQsIG9wdGlvbmFsbHkgaW4gZGVzY2VuZGluZyBvcmRlciBpbnN0ZWFkIG9mIGFzY2VuZGluZy5cbiAqXG4gKiBOb3RlOiBEb2N1bWVudHMgdGhhdCBkbyBub3QgY29udGFpbiB0aGUgc3BlY2lmaWVkIGZpZWxkIHdpbGwgbm90IGJlIHByZXNlbnRcbiAqIGluIHRoZSBxdWVyeSByZXN1bHQuXG4gKlxuICogQHBhcmFtIGZpZWxkUGF0aCAtIFRoZSBmaWVsZCB0byBzb3J0IGJ5LlxuICogQHBhcmFtIGRpcmVjdGlvblN0ciAtIE9wdGlvbmFsIGRpcmVjdGlvbiB0byBzb3J0IGJ5ICgnYXNjJyBvciAnZGVzYycpLiBJZlxuICogbm90IHNwZWNpZmllZCwgb3JkZXIgd2lsbCBiZSBhc2NlbmRpbmcuXG4gKiBAcmV0dXJucyBUaGUgY3JlYXRlZCB7QGxpbmsgUXVlcnlPcmRlckJ5Q29uc3RyYWludH0uXG4gKi8gZnVuY3Rpb24gb3JkZXJCeShlLCB0ID0gXCJhc2NcIikge1xuICAgIGNvbnN0IG4gPSB0LCByID0gX19QUklWQVRFX2ZpZWxkUGF0aEZyb21Bcmd1bWVudChcIm9yZGVyQnlcIiwgZSk7XG4gICAgcmV0dXJuIFF1ZXJ5T3JkZXJCeUNvbnN0cmFpbnQuX2NyZWF0ZShyLCBuKTtcbn1cblxuLyoqXG4gKiBBIGBRdWVyeUxpbWl0Q29uc3RyYWludGAgaXMgdXNlZCB0byBsaW1pdCB0aGUgbnVtYmVyIG9mIGRvY3VtZW50cyByZXR1cm5lZCBieVxuICogYSBGaXJlc3RvcmUgcXVlcnkuXG4gKiBgUXVlcnlMaW1pdENvbnN0cmFpbnRgcyBhcmUgY3JlYXRlZCBieSBpbnZva2luZyB7QGxpbmsgbGltaXR9IG9yXG4gKiB7QGxpbmsgbGltaXRUb0xhc3R9IGFuZCBjYW4gdGhlbiBiZSBwYXNzZWQgdG8ge0BsaW5rIChxdWVyeToxKX0gdG8gY3JlYXRlIGEgbmV3XG4gKiBxdWVyeSBpbnN0YW5jZSB0aGF0IGFsc28gY29udGFpbnMgdGhpcyBgUXVlcnlMaW1pdENvbnN0cmFpbnRgLlxuICovIGNsYXNzIFF1ZXJ5TGltaXRDb25zdHJhaW50IGV4dGVuZHMgUXVlcnlDb25zdHJhaW50IHtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogVGhlIHR5cGUgb2YgdGhpcyBxdWVyeSBjb25zdHJhaW50ICovXG4gICAgZSwgdCwgbikge1xuICAgICAgICBzdXBlcigpLCB0aGlzLnR5cGUgPSBlLCB0aGlzLl9saW1pdCA9IHQsIHRoaXMuX2xpbWl0VHlwZSA9IG47XG4gICAgfVxuICAgIHN0YXRpYyBfY3JlYXRlKGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeUxpbWl0Q29uc3RyYWludChlLCB0LCBuKTtcbiAgICB9XG4gICAgX2FwcGx5KGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeShlLmZpcmVzdG9yZSwgZS5jb252ZXJ0ZXIsIF9fUFJJVkFURV9xdWVyeVdpdGhMaW1pdChlLl9xdWVyeSwgdGhpcy5fbGltaXQsIHRoaXMuX2xpbWl0VHlwZSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIFF1ZXJ5TGltaXRDb25zdHJhaW50fSB0aGF0IG9ubHkgcmV0dXJucyB0aGUgZmlyc3QgbWF0Y2hpbmdcbiAqIGRvY3VtZW50cy5cbiAqXG4gKiBAcGFyYW0gbGltaXQgLSBUaGUgbWF4aW11bSBudW1iZXIgb2YgaXRlbXMgdG8gcmV0dXJuLlxuICogQHJldHVybnMgVGhlIGNyZWF0ZWQge0BsaW5rIFF1ZXJ5TGltaXRDb25zdHJhaW50fS5cbiAqLyBmdW5jdGlvbiBsaW1pdChlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV92YWxpZGF0ZVBvc2l0aXZlTnVtYmVyKFwibGltaXRcIiwgZSksIFF1ZXJ5TGltaXRDb25zdHJhaW50Ll9jcmVhdGUoXCJsaW1pdFwiLCBlLCBcIkZcIiAvKiBMaW1pdFR5cGUuRmlyc3QgKi8pO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgUXVlcnlMaW1pdENvbnN0cmFpbnR9IHRoYXQgb25seSByZXR1cm5zIHRoZSBsYXN0IG1hdGNoaW5nXG4gKiBkb2N1bWVudHMuXG4gKlxuICogWW91IG11c3Qgc3BlY2lmeSBhdCBsZWFzdCBvbmUgYG9yZGVyQnlgIGNsYXVzZSBmb3IgYGxpbWl0VG9MYXN0YCBxdWVyaWVzLFxuICogb3RoZXJ3aXNlIGFuIGV4Y2VwdGlvbiB3aWxsIGJlIHRocm93biBkdXJpbmcgZXhlY3V0aW9uLlxuICpcbiAqIEBwYXJhbSBsaW1pdCAtIFRoZSBtYXhpbXVtIG51bWJlciBvZiBpdGVtcyB0byByZXR1cm4uXG4gKiBAcmV0dXJucyBUaGUgY3JlYXRlZCB7QGxpbmsgUXVlcnlMaW1pdENvbnN0cmFpbnR9LlxuICovIGZ1bmN0aW9uIGxpbWl0VG9MYXN0KGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX3ZhbGlkYXRlUG9zaXRpdmVOdW1iZXIoXCJsaW1pdFRvTGFzdFwiLCBlKSwgUXVlcnlMaW1pdENvbnN0cmFpbnQuX2NyZWF0ZShcImxpbWl0VG9MYXN0XCIsIGUsIFwiTFwiIC8qIExpbWl0VHlwZS5MYXN0ICovKTtcbn1cblxuLyoqXG4gKiBBIGBRdWVyeVN0YXJ0QXRDb25zdHJhaW50YCBpcyB1c2VkIHRvIGV4Y2x1ZGUgZG9jdW1lbnRzIGZyb20gdGhlIHN0YXJ0IG9mIGFcbiAqIHJlc3VsdCBzZXQgcmV0dXJuZWQgYnkgYSBGaXJlc3RvcmUgcXVlcnkuXG4gKiBgUXVlcnlTdGFydEF0Q29uc3RyYWludGBzIGFyZSBjcmVhdGVkIGJ5IGludm9raW5nIHtAbGluayAoc3RhcnRBdDoxKX0gb3JcbiAqIHtAbGluayAoc3RhcnRBZnRlcjoxKX0gYW5kIGNhbiB0aGVuIGJlIHBhc3NlZCB0byB7QGxpbmsgKHF1ZXJ5OjEpfSB0byBjcmVhdGUgYVxuICogbmV3IHF1ZXJ5IGluc3RhbmNlIHRoYXQgYWxzbyBjb250YWlucyB0aGlzIGBRdWVyeVN0YXJ0QXRDb25zdHJhaW50YC5cbiAqLyBjbGFzcyBRdWVyeVN0YXJ0QXRDb25zdHJhaW50IGV4dGVuZHMgUXVlcnlDb25zdHJhaW50IHtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogVGhlIHR5cGUgb2YgdGhpcyBxdWVyeSBjb25zdHJhaW50ICovXG4gICAgZSwgdCwgbikge1xuICAgICAgICBzdXBlcigpLCB0aGlzLnR5cGUgPSBlLCB0aGlzLl9kb2NPckZpZWxkcyA9IHQsIHRoaXMuX2luY2x1c2l2ZSA9IG47XG4gICAgfVxuICAgIHN0YXRpYyBfY3JlYXRlKGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeVN0YXJ0QXRDb25zdHJhaW50KGUsIHQsIG4pO1xuICAgIH1cbiAgICBfYXBwbHkoZSkge1xuICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX25ld1F1ZXJ5Qm91bmRGcm9tRG9jT3JGaWVsZHMoZSwgdGhpcy50eXBlLCB0aGlzLl9kb2NPckZpZWxkcywgdGhpcy5faW5jbHVzaXZlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeShlLmZpcmVzdG9yZSwgZS5jb252ZXJ0ZXIsIGZ1bmN0aW9uIF9fUFJJVkFURV9xdWVyeVdpdGhTdGFydEF0KGUsIHQpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1F1ZXJ5SW1wbChlLnBhdGgsIGUuY29sbGVjdGlvbkdyb3VwLCBlLmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLCBlLmZpbHRlcnMuc2xpY2UoKSwgZS5saW1pdCwgZS5saW1pdFR5cGUsIHQsIGUuZW5kQXQpO1xuICAgICAgICB9KGUuX3F1ZXJ5LCB0KSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBzdGFydEF0KC4uLmUpIHtcbiAgICByZXR1cm4gUXVlcnlTdGFydEF0Q29uc3RyYWludC5fY3JlYXRlKFwic3RhcnRBdFwiLCBlLCBcbiAgICAvKmluY2x1c2l2ZT0qLyAhMCk7XG59XG5cbmZ1bmN0aW9uIHN0YXJ0QWZ0ZXIoLi4uZSkge1xuICAgIHJldHVybiBRdWVyeVN0YXJ0QXRDb25zdHJhaW50Ll9jcmVhdGUoXCJzdGFydEFmdGVyXCIsIGUsIFxuICAgIC8qaW5jbHVzaXZlPSovICExKTtcbn1cblxuLyoqXG4gKiBBIGBRdWVyeUVuZEF0Q29uc3RyYWludGAgaXMgdXNlZCB0byBleGNsdWRlIGRvY3VtZW50cyBmcm9tIHRoZSBlbmQgb2YgYVxuICogcmVzdWx0IHNldCByZXR1cm5lZCBieSBhIEZpcmVzdG9yZSBxdWVyeS5cbiAqIGBRdWVyeUVuZEF0Q29uc3RyYWludGBzIGFyZSBjcmVhdGVkIGJ5IGludm9raW5nIHtAbGluayAoZW5kQXQ6MSl9IG9yXG4gKiB7QGxpbmsgKGVuZEJlZm9yZToxKX0gYW5kIGNhbiB0aGVuIGJlIHBhc3NlZCB0byB7QGxpbmsgKHF1ZXJ5OjEpfSB0byBjcmVhdGUgYSBuZXdcbiAqIHF1ZXJ5IGluc3RhbmNlIHRoYXQgYWxzbyBjb250YWlucyB0aGlzIGBRdWVyeUVuZEF0Q29uc3RyYWludGAuXG4gKi8gY2xhc3MgUXVlcnlFbmRBdENvbnN0cmFpbnQgZXh0ZW5kcyBRdWVyeUNvbnN0cmFpbnQge1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIHF1ZXJ5IGNvbnN0cmFpbnQgKi9cbiAgICBlLCB0LCBuKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMudHlwZSA9IGUsIHRoaXMuX2RvY09yRmllbGRzID0gdCwgdGhpcy5faW5jbHVzaXZlID0gbjtcbiAgICB9XG4gICAgc3RhdGljIF9jcmVhdGUoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5RW5kQXRDb25zdHJhaW50KGUsIHQsIG4pO1xuICAgIH1cbiAgICBfYXBwbHkoZSkge1xuICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX25ld1F1ZXJ5Qm91bmRGcm9tRG9jT3JGaWVsZHMoZSwgdGhpcy50eXBlLCB0aGlzLl9kb2NPckZpZWxkcywgdGhpcy5faW5jbHVzaXZlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeShlLmZpcmVzdG9yZSwgZS5jb252ZXJ0ZXIsIGZ1bmN0aW9uIF9fUFJJVkFURV9xdWVyeVdpdGhFbmRBdChlLCB0KSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9RdWVyeUltcGwoZS5wYXRoLCBlLmNvbGxlY3Rpb25Hcm91cCwgZS5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSwgZS5maWx0ZXJzLnNsaWNlKCksIGUubGltaXQsIGUubGltaXRUeXBlLCBlLnN0YXJ0QXQsIHQpO1xuICAgICAgICB9KGUuX3F1ZXJ5LCB0KSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBlbmRCZWZvcmUoLi4uZSkge1xuICAgIHJldHVybiBRdWVyeUVuZEF0Q29uc3RyYWludC5fY3JlYXRlKFwiZW5kQmVmb3JlXCIsIGUsIFxuICAgIC8qaW5jbHVzaXZlPSovICExKTtcbn1cblxuZnVuY3Rpb24gZW5kQXQoLi4uZSkge1xuICAgIHJldHVybiBRdWVyeUVuZEF0Q29uc3RyYWludC5fY3JlYXRlKFwiZW5kQXRcIiwgZSwgXG4gICAgLyppbmNsdXNpdmU9Ki8gITApO1xufVxuXG4vKiogSGVscGVyIGZ1bmN0aW9uIHRvIGNyZWF0ZSBhIGJvdW5kIGZyb20gYSBkb2N1bWVudCBvciBmaWVsZHMgKi8gZnVuY3Rpb24gX19QUklWQVRFX25ld1F1ZXJ5Qm91bmRGcm9tRG9jT3JGaWVsZHMoZSwgdCwgbiwgcikge1xuICAgIGlmIChuWzBdID0gZ2V0TW9kdWxhckluc3RhbmNlKG5bMF0pLCBuWzBdIGluc3RhbmNlb2YgRG9jdW1lbnRTbmFwc2hvdCQxKSByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX25ld1F1ZXJ5Qm91bmRGcm9tRG9jdW1lbnQoZSwgdCwgbiwgciwgaSkge1xuICAgICAgICBpZiAoIXIpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihOLk5PVF9GT1VORCwgYENhbid0IHVzZSBhIERvY3VtZW50U25hcHNob3QgdGhhdCBkb2Vzbid0IGV4aXN0IGZvciAke259KCkuYCk7XG4gICAgICAgIGNvbnN0IHMgPSBbXTtcbiAgICAgICAgLy8gQmVjYXVzZSBwZW9wbGUgZXhwZWN0IHRvIGNvbnRpbnVlL2VuZCBhIHF1ZXJ5IGF0IHRoZSBleGFjdCBkb2N1bWVudFxuICAgICAgICAvLyBwcm92aWRlZCwgd2UgbmVlZCB0byB1c2UgdGhlIGltcGxpY2l0IHNvcnQgb3JkZXIgcmF0aGVyIHRoYW4gdGhlIGV4cGxpY2l0XG4gICAgICAgIC8vIHNvcnQgb3JkZXIsIGJlY2F1c2UgaXQncyBndWFyYW50ZWVkIHRvIGNvbnRhaW4gdGhlIGRvY3VtZW50IGtleS4gVGhhdCB3YXlcbiAgICAgICAgLy8gdGhlIHBvc2l0aW9uIGJlY29tZXMgdW5hbWJpZ3VvdXMgYW5kIHRoZSBxdWVyeSBjb250aW51ZXMvZW5kcyBleGFjdGx5IGF0XG4gICAgICAgIC8vIHRoZSBwcm92aWRlZCBkb2N1bWVudC4gV2l0aG91dCB0aGUga2V5IChieSB1c2luZyB0aGUgZXhwbGljaXQgc29ydFxuICAgICAgICAvLyBvcmRlcnMpLCBtdWx0aXBsZSBkb2N1bWVudHMgY291bGQgbWF0Y2ggdGhlIHBvc2l0aW9uLCB5aWVsZGluZyBkdXBsaWNhdGVcbiAgICAgICAgLy8gcmVzdWx0cy5cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgX19QUklWQVRFX3F1ZXJ5Tm9ybWFsaXplZE9yZGVyQnkoZSkpIGlmIChuLmZpZWxkLmlzS2V5RmllbGQoKSkgcy5wdXNoKF9fUFJJVkFURV9yZWZWYWx1ZSh0LCByLmtleSkpOyBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSByLmRhdGEuZmllbGQobi5maWVsZCk7XG4gICAgICAgICAgICBpZiAoX19QUklWQVRFX2lzU2VydmVyVGltZXN0YW1wKGUpKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoTi5JTlZBTElEX0FSR1VNRU5ULCAnSW52YWxpZCBxdWVyeS4gWW91IGFyZSB0cnlpbmcgdG8gc3RhcnQgb3IgZW5kIGEgcXVlcnkgdXNpbmcgYSBkb2N1bWVudCBmb3Igd2hpY2ggdGhlIGZpZWxkIFwiJyArIG4uZmllbGQgKyAnXCIgaXMgYW4gdW5jb21taXR0ZWQgc2VydmVyIHRpbWVzdGFtcC4gKFNpbmNlIHRoZSB2YWx1ZSBvZiB0aGlzIGZpZWxkIGlzIHVua25vd24sIHlvdSBjYW5ub3Qgc3RhcnQvZW5kIGEgcXVlcnkgd2l0aCBpdC4pJyk7XG4gICAgICAgICAgICBpZiAobnVsbCA9PT0gZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBuLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihOLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBZb3UgYXJlIHRyeWluZyB0byBzdGFydCBvciBlbmQgYSBxdWVyeSB1c2luZyBhIGRvY3VtZW50IGZvciB3aGljaCB0aGUgZmllbGQgJyR7ZX0nICh1c2VkIGFzIHRoZSBvcmRlckJ5KSBkb2VzIG5vdCBleGlzdC5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHMucHVzaChlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IEJvdW5kKHMsIGkpO1xuICAgIH1cbiAgICAvKipcbiAqIENvbnZlcnRzIGEgbGlzdCBvZiBmaWVsZCB2YWx1ZXMgdG8gYSBgQm91bmRgIGZvciB0aGUgZ2l2ZW4gcXVlcnkuXG4gKi8gKGUuX3F1ZXJ5LCBlLmZpcmVzdG9yZS5fZGF0YWJhc2VJZCwgdCwgblswXS5fZG9jdW1lbnQsIHIpO1xuICAgIHtcbiAgICAgICAgY29uc3QgaSA9IF9fUFJJVkFURV9uZXdVc2VyRGF0YVJlYWRlcihlLmZpcmVzdG9yZSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3UXVlcnlCb3VuZEZyb21GaWVsZHMoZSwgdCwgbiwgciwgaSwgcykge1xuICAgICAgICAgICAgLy8gVXNlIGV4cGxpY2l0IG9yZGVyIGJ5J3MgYmVjYXVzZSBpdCBoYXMgdG8gbWF0Y2ggdGhlIHF1ZXJ5IHRoZSB1c2VyIG1hZGVcbiAgICAgICAgICAgIGNvbnN0IG8gPSBlLmV4cGxpY2l0T3JkZXJCeTtcbiAgICAgICAgICAgIGlmIChpLmxlbmd0aCA+IG8ubGVuZ3RoKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoTi5JTlZBTElEX0FSR1VNRU5ULCBgVG9vIG1hbnkgYXJndW1lbnRzIHByb3ZpZGVkIHRvICR7cn0oKS4gVGhlIG51bWJlciBvZiBhcmd1bWVudHMgbXVzdCBiZSBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gdGhlIG51bWJlciBvZiBvcmRlckJ5KCkgY2xhdXNlc2ApO1xuICAgICAgICAgICAgY29uc3QgXyA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgcyA9IDA7IHMgPCBpLmxlbmd0aDsgcysrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYSA9IGlbc107XG4gICAgICAgICAgICAgICAgaWYgKG9bc10uZmllbGQuaXNLZXlGaWVsZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChcInN0cmluZ1wiICE9IHR5cGVvZiBhKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoTi5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gRXhwZWN0ZWQgYSBzdHJpbmcgZm9yIGRvY3VtZW50IElEIGluICR7cn0oKSwgYnV0IGdvdCBhICR7dHlwZW9mIGF9YCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghX19QUklWQVRFX2lzQ29sbGVjdGlvbkdyb3VwUXVlcnkoZSkgJiYgLTEgIT09IGEuaW5kZXhPZihcIi9cIikpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihOLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIGEgY29sbGVjdGlvbiBhbmQgb3JkZXJpbmcgYnkgZG9jdW1lbnRJZCgpLCB0aGUgdmFsdWUgcGFzc2VkIHRvICR7cn0oKSBtdXN0IGJlIGEgcGxhaW4gZG9jdW1lbnQgSUQsIGJ1dCAnJHthfScgY29udGFpbnMgYSBzbGFzaC5gKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IGUucGF0aC5jaGlsZChSZXNvdXJjZVBhdGguZnJvbVN0cmluZyhhKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghRG9jdW1lbnRLZXkuaXNEb2N1bWVudEtleShuKSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKE4uSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgYSBjb2xsZWN0aW9uIGdyb3VwIGFuZCBvcmRlcmluZyBieSBkb2N1bWVudElkKCksIHRoZSB2YWx1ZSBwYXNzZWQgdG8gJHtyfSgpIG11c3QgcmVzdWx0IGluIGEgdmFsaWQgZG9jdW1lbnQgcGF0aCwgYnV0ICcke259JyBpcyBub3QgYmVjYXVzZSBpdCBjb250YWlucyBhbiBvZGQgbnVtYmVyIG9mIHNlZ21lbnRzLmApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpID0gbmV3IERvY3VtZW50S2V5KG4pO1xuICAgICAgICAgICAgICAgICAgICBfLnB1c2goX19QUklWQVRFX3JlZlZhbHVlKHQsIGkpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gX19QUklWQVRFX3BhcnNlUXVlcnlWYWx1ZShuLCByLCBhKTtcbiAgICAgICAgICAgICAgICAgICAgXy5wdXNoKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgQm91bmQoXywgcyk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBQYXJzZXMgdGhlIGdpdmVuIGBkb2N1bWVudElkVmFsdWVgIGludG8gYSBgUmVmZXJlbmNlVmFsdWVgLCB0aHJvd2luZ1xuICogYXBwcm9wcmlhdGUgZXJyb3JzIGlmIHRoZSB2YWx1ZSBpcyBhbnl0aGluZyBvdGhlciB0aGFuIGEgYERvY3VtZW50UmVmZXJlbmNlYFxuICogb3IgYHN0cmluZ2AsIG9yIGlmIHRoZSBzdHJpbmcgaXMgbWFsZm9ybWVkLlxuICovIChlLl9xdWVyeSwgZS5maXJlc3RvcmUuX2RhdGFiYXNlSWQsIGksIHQsIG4sIHIpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3BhcnNlRG9jdW1lbnRJZFZhbHVlKGUsIHQsIG4pIHtcbiAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgKG4gPSBnZXRNb2R1bGFySW5zdGFuY2UobikpKSB7XG4gICAgICAgIGlmIChcIlwiID09PSBuKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoTi5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgd2l0aCBkb2N1bWVudElkKCksIHlvdSBtdXN0IHByb3ZpZGUgYSB2YWxpZCBkb2N1bWVudCBJRCwgYnV0IGl0IHdhcyBhbiBlbXB0eSBzdHJpbmcuXCIpO1xuICAgICAgICBpZiAoIV9fUFJJVkFURV9pc0NvbGxlY3Rpb25Hcm91cFF1ZXJ5KHQpICYmIC0xICE9PSBuLmluZGV4T2YoXCIvXCIpKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoTi5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyBhIGNvbGxlY3Rpb24gYnkgZG9jdW1lbnRJZCgpLCB5b3UgbXVzdCBwcm92aWRlIGEgcGxhaW4gZG9jdW1lbnQgSUQsIGJ1dCAnJHtufScgY29udGFpbnMgYSAnLycgY2hhcmFjdGVyLmApO1xuICAgICAgICBjb25zdCByID0gdC5wYXRoLmNoaWxkKFJlc291cmNlUGF0aC5mcm9tU3RyaW5nKG4pKTtcbiAgICAgICAgaWYgKCFEb2N1bWVudEtleS5pc0RvY3VtZW50S2V5KHIpKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoTi5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyBhIGNvbGxlY3Rpb24gZ3JvdXAgYnkgZG9jdW1lbnRJZCgpLCB0aGUgdmFsdWUgcHJvdmlkZWQgbXVzdCByZXN1bHQgaW4gYSB2YWxpZCBkb2N1bWVudCBwYXRoLCBidXQgJyR7cn0nIGlzIG5vdCBiZWNhdXNlIGl0IGhhcyBhbiBvZGQgbnVtYmVyIG9mIHNlZ21lbnRzICgke3IubGVuZ3RofSkuYCk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfcmVmVmFsdWUoZSwgbmV3IERvY3VtZW50S2V5KHIpKTtcbiAgICB9XG4gICAgaWYgKG4gaW5zdGFuY2VvZiBEb2N1bWVudFJlZmVyZW5jZSkgcmV0dXJuIF9fUFJJVkFURV9yZWZWYWx1ZShlLCBuLl9rZXkpO1xuICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihOLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIHdpdGggZG9jdW1lbnRJZCgpLCB5b3UgbXVzdCBwcm92aWRlIGEgdmFsaWQgc3RyaW5nIG9yIGEgRG9jdW1lbnRSZWZlcmVuY2UsIGJ1dCBpdCB3YXM6ICR7X19QUklWQVRFX3ZhbHVlRGVzY3JpcHRpb24obil9LmApO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlcyB0aGF0IHRoZSB2YWx1ZSBwYXNzZWQgaW50byBhIGRpc2p1bmN0aXZlIGZpbHRlciBzYXRpc2ZpZXMgYWxsXG4gKiBhcnJheSByZXF1aXJlbWVudHMuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3ZhbGlkYXRlRGlzanVuY3RpdmVGaWx0ZXJFbGVtZW50cyhlLCB0KSB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGUpIHx8IDAgPT09IGUubGVuZ3RoKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoTi5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBRdWVyeS4gQSBub24tZW1wdHkgYXJyYXkgaXMgcmVxdWlyZWQgZm9yICcke3QudG9TdHJpbmcoKX0nIGZpbHRlcnMuYCk7XG59XG5cbi8qKlxuICogR2l2ZW4gYW4gb3BlcmF0b3IsIHJldHVybnMgdGhlIHNldCBvZiBvcGVyYXRvcnMgdGhhdCBjYW5ub3QgYmUgdXNlZCB3aXRoIGl0LlxuICpcbiAqIFRoaXMgaXMgbm90IGEgY29tcHJlaGVuc2l2ZSBjaGVjaywgYW5kIHRoaXMgZnVuY3Rpb24gc2hvdWxkIGJlIHJlbW92ZWQgaW4gdGhlXG4gKiBsb25nIHRlcm0uIFZhbGlkYXRpb25zIHNob3VsZCBvY2N1ciBpbiB0aGUgRmlyZXN0b3JlIGJhY2tlbmQuXG4gKlxuICogT3BlcmF0b3JzIGluIGEgcXVlcnkgbXVzdCBhZGhlcmUgdG8gdGhlIGZvbGxvd2luZyBzZXQgb2YgcnVsZXM6XG4gKiAxLiBPbmx5IG9uZSBpbmVxdWFsaXR5IHBlciBxdWVyeS5cbiAqIDIuIGBOT1RfSU5gIGNhbm5vdCBiZSB1c2VkIHdpdGggYXJyYXksIGRpc2p1bmN0aXZlLCBvciBgTk9UX0VRVUFMYCBvcGVyYXRvcnMuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3ZhbGlkYXRlTmV3RmllbGRGaWx0ZXIoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBmdW5jdGlvbiBfX1BSSVZBVEVfZmluZE9wSW5zaWRlRmlsdGVycyhlLCB0KSB7XG4gICAgICAgIGZvciAoY29uc3QgbiBvZiBlKSBmb3IgKGNvbnN0IGUgb2Ygbi5nZXRGbGF0dGVuZWRGaWx0ZXJzKCkpIGlmICh0LmluZGV4T2YoZS5vcCkgPj0gMCkgcmV0dXJuIGUub3A7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH0oZS5maWx0ZXJzLCBmdW5jdGlvbiBfX1BSSVZBVEVfY29uZmxpY3RpbmdPcHMoZSkge1xuICAgICAgICBzd2l0Y2ggKGUpIHtcbiAgICAgICAgICBjYXNlIFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIFsgXCIhPVwiIC8qIE9wZXJhdG9yLk5PVF9FUVVBTCAqLyAsIFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovIF07XG5cbiAgICAgICAgICBjYXNlIFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZICovIDpcbiAgICAgICAgICBjYXNlIFwiaW5cIiAvKiBPcGVyYXRvci5JTiAqLyA6XG4gICAgICAgICAgICByZXR1cm4gWyBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyBdO1xuXG4gICAgICAgICAgY2FzZSBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyA6XG4gICAgICAgICAgICByZXR1cm4gWyBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWSAqLyAsIFwiaW5cIiAvKiBPcGVyYXRvci5JTiAqLyAsIFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovICwgXCIhPVwiIC8qIE9wZXJhdG9yLk5PVF9FUVVBTCAqLyBdO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuICAgIH0odC5vcCkpO1xuICAgIGlmIChudWxsICE9PSBuKSBcbiAgICAvLyBTcGVjaWFsIGNhc2Ugd2hlbiBpdCdzIGEgZHVwbGljYXRlIG9wIHRvIGdpdmUgYSBzbGlnaHRseSBjbGVhcmVyIGVycm9yIG1lc3NhZ2UuXG4gICAgdGhyb3cgbiA9PT0gdC5vcCA/IG5ldyBGaXJlc3RvcmVFcnJvcihOLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBZb3UgY2Fubm90IHVzZSBtb3JlIHRoYW4gb25lICcke3Qub3AudG9TdHJpbmcoKX0nIGZpbHRlci5gKSA6IG5ldyBGaXJlc3RvcmVFcnJvcihOLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBZb3UgY2Fubm90IHVzZSAnJHt0Lm9wLnRvU3RyaW5nKCl9JyBmaWx0ZXJzIHdpdGggJyR7bi50b1N0cmluZygpfScgZmlsdGVycy5gKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3ZhbGlkYXRlUXVlcnlGaWx0ZXJDb25zdHJhaW50KGUsIHQpIHtcbiAgICBpZiAoISh0IGluc3RhbmNlb2YgUXVlcnlGaWVsZEZpbHRlckNvbnN0cmFpbnQgfHwgdCBpbnN0YW5jZW9mIFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludCkpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihOLklOVkFMSURfQVJHVU1FTlQsIGBGdW5jdGlvbiAke2V9KCkgcmVxdWlyZXMgQXBwbGlhYmxlQ29uc3RyYWludHMgY3JlYXRlZCB3aXRoIGEgY2FsbCB0byAnd2hlcmUoLi4uKScsICdvciguLi4pJywgb3IgJ2FuZCguLi4pJy5gKTtcbn1cblxuY2xhc3MgQWJzdHJhY3RVc2VyRGF0YVdyaXRlciB7XG4gICAgY29udmVydFZhbHVlKGUsIHQgPSBcIm5vbmVcIikge1xuICAgICAgICBzd2l0Y2ggKF9fUFJJVkFURV90eXBlT3JkZXIoZSkpIHtcbiAgICAgICAgICBjYXNlIDAgLyogVHlwZU9yZGVyLk51bGxWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcblxuICAgICAgICAgIGNhc2UgMSAvKiBUeXBlT3JkZXIuQm9vbGVhblZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiBlLmJvb2xlYW5WYWx1ZTtcblxuICAgICAgICAgIGNhc2UgMiAvKiBUeXBlT3JkZXIuTnVtYmVyVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIoZS5pbnRlZ2VyVmFsdWUgfHwgZS5kb3VibGVWYWx1ZSk7XG5cbiAgICAgICAgICBjYXNlIDMgLyogVHlwZU9yZGVyLlRpbWVzdGFtcFZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRUaW1lc3RhbXAoZS50aW1lc3RhbXBWYWx1ZSk7XG5cbiAgICAgICAgICBjYXNlIDQgLyogVHlwZU9yZGVyLlNlcnZlclRpbWVzdGFtcFZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRTZXJ2ZXJUaW1lc3RhbXAoZSwgdCk7XG5cbiAgICAgICAgICBjYXNlIDUgLyogVHlwZU9yZGVyLlN0cmluZ1ZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiBlLnN0cmluZ1ZhbHVlO1xuXG4gICAgICAgICAgY2FzZSA2IC8qIFR5cGVPcmRlci5CbG9iVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydEJ5dGVzKF9fUFJJVkFURV9ub3JtYWxpemVCeXRlU3RyaW5nKGUuYnl0ZXNWYWx1ZSkpO1xuXG4gICAgICAgICAgY2FzZSA3IC8qIFR5cGVPcmRlci5SZWZWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0UmVmZXJlbmNlKGUucmVmZXJlbmNlVmFsdWUpO1xuXG4gICAgICAgICAgY2FzZSA4IC8qIFR5cGVPcmRlci5HZW9Qb2ludFZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRHZW9Qb2ludChlLmdlb1BvaW50VmFsdWUpO1xuXG4gICAgICAgICAgY2FzZSA5IC8qIFR5cGVPcmRlci5BcnJheVZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRBcnJheShlLmFycmF5VmFsdWUsIHQpO1xuXG4gICAgICAgICAgY2FzZSAxMSAvKiBUeXBlT3JkZXIuT2JqZWN0VmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydE9iamVjdChlLm1hcFZhbHVlLCB0KTtcblxuICAgICAgICAgIGNhc2UgMTAgLyogVHlwZU9yZGVyLlZlY3RvclZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRWZWN0b3JWYWx1ZShlLm1hcFZhbHVlKTtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBmYWlsKDYyMTE0LCB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IGVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnZlcnRPYmplY3QoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0T2JqZWN0TWFwKGUuZmllbGRzLCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovICAgIGNvbnZlcnRPYmplY3RNYXAoZSwgdCA9IFwibm9uZVwiKSB7XG4gICAgICAgIGNvbnN0IG4gPSB7fTtcbiAgICAgICAgcmV0dXJuIGZvckVhY2goZSwgKChlLCByKSA9PiB7XG4gICAgICAgICAgICBuW2VdID0gdGhpcy5jb252ZXJ0VmFsdWUociwgdCk7XG4gICAgICAgIH0pKSwgbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovICAgIGNvbnZlcnRWZWN0b3JWYWx1ZShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlLmZpZWxkcz8uW0V0XS5hcnJheVZhbHVlPy52YWx1ZXM/Lm1hcCgoZSA9PiBfX1BSSVZBVEVfbm9ybWFsaXplTnVtYmVyKGUuZG91YmxlVmFsdWUpKSk7XG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yVmFsdWUodCk7XG4gICAgfVxuICAgIGNvbnZlcnRHZW9Qb2ludChlKSB7XG4gICAgICAgIHJldHVybiBuZXcgR2VvUG9pbnQoX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcihlLmxhdGl0dWRlKSwgX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcihlLmxvbmdpdHVkZSkpO1xuICAgIH1cbiAgICBjb252ZXJ0QXJyYXkoZSwgdCkge1xuICAgICAgICByZXR1cm4gKGUudmFsdWVzIHx8IFtdKS5tYXAoKGUgPT4gdGhpcy5jb252ZXJ0VmFsdWUoZSwgdCkpKTtcbiAgICB9XG4gICAgY29udmVydFNlcnZlclRpbWVzdGFtcChlLCB0KSB7XG4gICAgICAgIHN3aXRjaCAodCkge1xuICAgICAgICAgIGNhc2UgXCJwcmV2aW91c1wiOlxuICAgICAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9nZXRQcmV2aW91c1ZhbHVlKGUpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gbiA/IG51bGwgOiB0aGlzLmNvbnZlcnRWYWx1ZShuLCB0KTtcblxuICAgICAgICAgIGNhc2UgXCJlc3RpbWF0ZVwiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydFRpbWVzdGFtcChfX1BSSVZBVEVfZ2V0TG9jYWxXcml0ZVRpbWUoZSkpO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnZlcnRUaW1lc3RhbXAoZSkge1xuICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX25vcm1hbGl6ZVRpbWVzdGFtcChlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBUaW1lc3RhbXAodC5zZWNvbmRzLCB0Lm5hbm9zKTtcbiAgICB9XG4gICAgY29udmVydERvY3VtZW50S2V5KGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IFJlc291cmNlUGF0aC5mcm9tU3RyaW5nKGUpO1xuICAgICAgICBfX1BSSVZBVEVfaGFyZEFzc2VydChfX1BSSVZBVEVfaXNWYWxpZFJlc291cmNlTmFtZShuKSwgOTY4OCwge1xuICAgICAgICAgICAgbmFtZTogZVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgciA9IG5ldyBEYXRhYmFzZUlkKG4uZ2V0KDEpLCBuLmdldCgzKSksIGkgPSBuZXcgRG9jdW1lbnRLZXkobi5wb3BGaXJzdCg1KSk7XG4gICAgICAgIHJldHVybiByLmlzRXF1YWwodCkgfHwgXG4gICAgICAgIC8vIFRPRE8oYi82NDEzMDIwMik6IFNvbWVob3cgc3VwcG9ydCBmb3JlaWduIHJlZmVyZW5jZXMuXG4gICAgICAgIF9fUFJJVkFURV9sb2dFcnJvcihgRG9jdW1lbnQgJHtpfSBjb250YWlucyBhIGRvY3VtZW50IHJlZmVyZW5jZSB3aXRoaW4gYSBkaWZmZXJlbnQgZGF0YWJhc2UgKCR7ci5wcm9qZWN0SWR9LyR7ci5kYXRhYmFzZX0pIHdoaWNoIGlzIG5vdCBzdXBwb3J0ZWQuIEl0IHdpbGwgYmUgdHJlYXRlZCBhcyBhIHJlZmVyZW5jZSBpbiB0aGUgY3VycmVudCBkYXRhYmFzZSAoJHt0LnByb2plY3RJZH0vJHt0LmRhdGFiYXNlfSkgaW5zdGVhZC5gKSwgXG4gICAgICAgIGk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBDb252ZXJ0cyBjdXN0b20gbW9kZWwgb2JqZWN0IG9mIHR5cGUgVCBpbnRvIGBEb2N1bWVudERhdGFgIGJ5IGFwcGx5aW5nIHRoZVxuICogY29udmVydGVyIGlmIGl0IGV4aXN0cy5cbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgd2hlbiBjb252ZXJ0aW5nIHVzZXIgb2JqZWN0cyB0byBgRG9jdW1lbnREYXRhYFxuICogYmVjYXVzZSB3ZSB3YW50IHRvIHByb3ZpZGUgdGhlIHVzZXIgd2l0aCBhIG1vcmUgc3BlY2lmaWMgZXJyb3IgbWVzc2FnZSBpZlxuICogdGhlaXIgYHNldCgpYCBvciBmYWlscyBkdWUgdG8gaW52YWxpZCBkYXRhIG9yaWdpbmF0aW5nIGZyb20gYSBgdG9GaXJlc3RvcmUoKWBcbiAqIGNhbGwuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2FwcGx5RmlyZXN0b3JlRGF0YUNvbnZlcnRlcihlLCB0LCBuKSB7XG4gICAgbGV0IHI7XG4gICAgLy8gQ2FzdCB0byBgYW55YCBpbiBvcmRlciB0byBzYXRpc2Z5IHRoZSB1bmlvbiB0eXBlIGNvbnN0cmFpbnQgb25cbiAgICAvLyB0b0ZpcmVzdG9yZSgpLlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgcmV0dXJuIHIgPSBlID8gbiAmJiAobi5tZXJnZSB8fCBuLm1lcmdlRmllbGRzKSA/IGUudG9GaXJlc3RvcmUodCwgbikgOiBlLnRvRmlyZXN0b3JlKHQpIDogdCwgXG4gICAgcjtcbn1cblxuY2xhc3MgX19QUklWQVRFX0xpdGVVc2VyRGF0YVdyaXRlciBleHRlbmRzIEFic3RyYWN0VXNlckRhdGFXcml0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5maXJlc3RvcmUgPSBlO1xuICAgIH1cbiAgICBjb252ZXJ0Qnl0ZXMoZSkge1xuICAgICAgICByZXR1cm4gbmV3IEJ5dGVzKGUpO1xuICAgIH1cbiAgICBjb252ZXJ0UmVmZXJlbmNlKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuY29udmVydERvY3VtZW50S2V5KGUsIHRoaXMuZmlyZXN0b3JlLl9kYXRhYmFzZUlkKTtcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudFJlZmVyZW5jZSh0aGlzLmZpcmVzdG9yZSwgLyogY29udmVydGVyPSAqLyBudWxsLCB0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIENyZWF0ZSBhbiBBZ2dyZWdhdGVGaWVsZCBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCB0byBjb21wdXRlIHRoZSBzdW0gb2ZcbiAqIGEgc3BlY2lmaWVkIGZpZWxkIG92ZXIgYSByYW5nZSBvZiBkb2N1bWVudHMgaW4gdGhlIHJlc3VsdCBzZXQgb2YgYSBxdWVyeS5cbiAqIEBwYXJhbSBmaWVsZCBTcGVjaWZpZXMgdGhlIGZpZWxkIHRvIHN1bSBhY3Jvc3MgdGhlIHJlc3VsdCBzZXQuXG4gKi8gZnVuY3Rpb24gc3VtKGUpIHtcbiAgICByZXR1cm4gbmV3IEFnZ3JlZ2F0ZUZpZWxkKFwic3VtXCIsIF9fUFJJVkFURV9maWVsZFBhdGhGcm9tQXJndW1lbnQkMShcInN1bVwiLCBlKSk7XG59XG5cbi8qKlxuICogQ3JlYXRlIGFuIEFnZ3JlZ2F0ZUZpZWxkIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIHRvIGNvbXB1dGUgdGhlIGF2ZXJhZ2Ugb2ZcbiAqIGEgc3BlY2lmaWVkIGZpZWxkIG92ZXIgYSByYW5nZSBvZiBkb2N1bWVudHMgaW4gdGhlIHJlc3VsdCBzZXQgb2YgYSBxdWVyeS5cbiAqIEBwYXJhbSBmaWVsZCBTcGVjaWZpZXMgdGhlIGZpZWxkIHRvIGF2ZXJhZ2UgYWNyb3NzIHRoZSByZXN1bHQgc2V0LlxuICovIGZ1bmN0aW9uIGF2ZXJhZ2UoZSkge1xuICAgIHJldHVybiBuZXcgQWdncmVnYXRlRmllbGQoXCJhdmdcIiwgX19QUklWQVRFX2ZpZWxkUGF0aEZyb21Bcmd1bWVudCQxKFwiYXZlcmFnZVwiLCBlKSk7XG59XG5cbi8qKlxuICogQ3JlYXRlIGFuIEFnZ3JlZ2F0ZUZpZWxkIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIHRvIGNvbXB1dGUgdGhlIGNvdW50IG9mXG4gKiBkb2N1bWVudHMgaW4gdGhlIHJlc3VsdCBzZXQgb2YgYSBxdWVyeS5cbiAqLyBmdW5jdGlvbiBjb3VudCgpIHtcbiAgICByZXR1cm4gbmV3IEFnZ3JlZ2F0ZUZpZWxkKFwiY291bnRcIik7XG59XG5cbi8qKlxuICogQ29tcGFyZXMgdHdvICdBZ2dyZWdhdGVGaWVsZGAgaW5zdGFuY2VzIGZvciBlcXVhbGl0eS5cbiAqXG4gKiBAcGFyYW0gbGVmdCBDb21wYXJlIHRoaXMgQWdncmVnYXRlRmllbGQgdG8gdGhlIGByaWdodGAuXG4gKiBAcGFyYW0gcmlnaHQgQ29tcGFyZSB0aGlzIEFnZ3JlZ2F0ZUZpZWxkIHRvIHRoZSBgbGVmdGAuXG4gKi8gZnVuY3Rpb24gYWdncmVnYXRlRmllbGRFcXVhbChlLCB0KSB7XG4gICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBBZ2dyZWdhdGVGaWVsZCAmJiB0IGluc3RhbmNlb2YgQWdncmVnYXRlRmllbGQgJiYgZS5hZ2dyZWdhdGVUeXBlID09PSB0LmFnZ3JlZ2F0ZVR5cGUgJiYgZS5faW50ZXJuYWxGaWVsZFBhdGg/LmNhbm9uaWNhbFN0cmluZygpID09PSB0Ll9pbnRlcm5hbEZpZWxkUGF0aD8uY2Fub25pY2FsU3RyaW5nKCk7XG59XG5cbi8qKlxuICogQ29tcGFyZXMgdHdvIGBBZ2dyZWdhdGVRdWVyeVNuYXBzaG90YCBpbnN0YW5jZXMgZm9yIGVxdWFsaXR5LlxuICpcbiAqIFR3byBgQWdncmVnYXRlUXVlcnlTbmFwc2hvdGAgaW5zdGFuY2VzIGFyZSBjb25zaWRlcmVkIFwiZXF1YWxcIiBpZiB0aGV5IGhhdmVcbiAqIHVuZGVybHlpbmcgcXVlcmllcyB0aGF0IGNvbXBhcmUgZXF1YWwsIGFuZCB0aGUgc2FtZSBkYXRhLlxuICpcbiAqIEBwYXJhbSBsZWZ0IC0gVGhlIGZpcnN0IGBBZ2dyZWdhdGVRdWVyeVNuYXBzaG90YCB0byBjb21wYXJlLlxuICogQHBhcmFtIHJpZ2h0IC0gVGhlIHNlY29uZCBgQWdncmVnYXRlUXVlcnlTbmFwc2hvdGAgdG8gY29tcGFyZS5cbiAqXG4gKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9iamVjdHMgYXJlIFwiZXF1YWxcIiwgYXMgZGVmaW5lZCBhYm92ZSwgb3IgYGZhbHNlYFxuICogb3RoZXJ3aXNlLlxuICovIGZ1bmN0aW9uIGFnZ3JlZ2F0ZVF1ZXJ5U25hcHNob3RFcXVhbChlLCB0KSB7XG4gICAgcmV0dXJuIHF1ZXJ5RXF1YWwoZS5xdWVyeSwgdC5xdWVyeSkgJiYgZGVlcEVxdWFsKGUuZGF0YSgpLCB0LmRhdGEoKSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDI1IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY29uc3QgVG4gPSBcIk5PVCBTVVBQT1JURURcIjtcblxuLyoqXG4gKiBNZXRhZGF0YSBhYm91dCBhIHNuYXBzaG90LCBkZXNjcmliaW5nIHRoZSBzdGF0ZSBvZiB0aGUgc25hcHNob3QuXG4gKi8gY2xhc3MgU25hcHNob3RNZXRhZGF0YSB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMuaGFzUGVuZGluZ1dyaXRlcyA9IGUsIHRoaXMuZnJvbUNhY2hlID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgYFNuYXBzaG90TWV0YWRhdGFgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgYFNuYXBzaG90TWV0YWRhdGFgIHRvIGNvbXBhcmUgYWdhaW5zdC5cbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoaXMgYFNuYXBzaG90TWV0YWRhdGFgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICovICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5oYXNQZW5kaW5nV3JpdGVzID09PSBlLmhhc1BlbmRpbmdXcml0ZXMgJiYgdGhpcy5mcm9tQ2FjaGUgPT09IGUuZnJvbUNhY2hlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGBEb2N1bWVudFNuYXBzaG90YCBjb250YWlucyBkYXRhIHJlYWQgZnJvbSBhIGRvY3VtZW50IGluIHlvdXIgRmlyZXN0b3JlXG4gKiBkYXRhYmFzZS4gVGhlIGRhdGEgY2FuIGJlIGV4dHJhY3RlZCB3aXRoIGAuZGF0YSgpYCBvciBgLmdldCg8ZmllbGQ+KWAgdG9cbiAqIGdldCBhIHNwZWNpZmljIGZpZWxkLlxuICpcbiAqIEZvciBhIGBEb2N1bWVudFNuYXBzaG90YCB0aGF0IHBvaW50cyB0byBhIG5vbi1leGlzdGluZyBkb2N1bWVudCwgYW55IGRhdGFcbiAqIGFjY2VzcyB3aWxsIHJldHVybiAndW5kZWZpbmVkJy4gWW91IGNhbiB1c2UgdGhlIGBleGlzdHMoKWAgbWV0aG9kIHRvXG4gKiBleHBsaWNpdGx5IHZlcmlmeSBhIGRvY3VtZW50J3MgZXhpc3RlbmNlLlxuICovIGNsYXNzIERvY3VtZW50U25hcHNob3QgZXh0ZW5kcyBEb2N1bWVudFNuYXBzaG90JDEge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yIHByb3RlY3RlZCAqL1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIHIsIGksIHMpIHtcbiAgICAgICAgc3VwZXIoZSwgdCwgbiwgciwgcyksIHRoaXMuX2ZpcmVzdG9yZSA9IGUsIHRoaXMuX2ZpcmVzdG9yZUltcGwgPSBlLCB0aGlzLm1ldGFkYXRhID0gaTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgZGF0YSBleGlzdHMuIFRydWUgaWYgdGhlIGRvY3VtZW50IGV4aXN0cy5cbiAgICAgKi8gICAgZXhpc3RzKCkge1xuICAgICAgICByZXR1cm4gc3VwZXIuZXhpc3RzKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudCBhcyBhbiBgT2JqZWN0YC4gUmV0dXJucyBgdW5kZWZpbmVkYCBpZlxuICAgICAqIHRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LlxuICAgICAqXG4gICAgICogQnkgZGVmYXVsdCwgYHNlcnZlclRpbWVzdGFtcCgpYCB2YWx1ZXMgdGhhdCBoYXZlIG5vdCB5ZXQgYmVlblxuICAgICAqIHNldCB0byB0aGVpciBmaW5hbCB2YWx1ZSB3aWxsIGJlIHJldHVybmVkIGFzIGBudWxsYC4gWW91IGNhbiBvdmVycmlkZVxuICAgICAqIHRoaXMgYnkgcGFzc2luZyBhbiBvcHRpb25zIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb3B0aW9ucyBvYmplY3QgdG8gY29uZmlndXJlIGhvdyBkYXRhIGlzIHJldHJpZXZlZCBmcm9tXG4gICAgICogdGhlIHNuYXBzaG90IChmb3IgZXhhbXBsZSB0aGUgZGVzaXJlZCBiZWhhdmlvciBmb3Igc2VydmVyIHRpbWVzdGFtcHMgdGhhdFxuICAgICAqIGhhdmUgbm90IHlldCBiZWVuIHNldCB0byB0aGVpciBmaW5hbCB2YWx1ZSkuXG4gICAgICogQHJldHVybnMgQW4gYE9iamVjdGAgY29udGFpbmluZyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudCBvciBgdW5kZWZpbmVkYCBpZlxuICAgICAqIHRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LlxuICAgICAqLyAgICBkYXRhKGUgPSB7fSkge1xuICAgICAgICBpZiAodGhpcy5fZG9jdW1lbnQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9jb252ZXJ0ZXIpIHtcbiAgICAgICAgICAgICAgICAvLyBXZSBvbmx5IHdhbnQgdG8gdXNlIHRoZSBjb252ZXJ0ZXIgYW5kIGNyZWF0ZSBhIG5ldyBEb2N1bWVudFNuYXBzaG90XG4gICAgICAgICAgICAgICAgLy8gaWYgYSBjb252ZXJ0ZXIgaGFzIGJlZW4gcHJvdmlkZWQuXG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBRdWVyeURvY3VtZW50U25hcHNob3QodGhpcy5fZmlyZXN0b3JlLCB0aGlzLl91c2VyRGF0YVdyaXRlciwgdGhpcy5fa2V5LCB0aGlzLl9kb2N1bWVudCwgdGhpcy5tZXRhZGF0YSwgXG4gICAgICAgICAgICAgICAgLyogY29udmVydGVyPSAqLyBudWxsKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY29udmVydGVyLmZyb21GaXJlc3RvcmUodCwgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdXNlckRhdGFXcml0ZXIuY29udmVydFZhbHVlKHRoaXMuX2RvY3VtZW50LmRhdGEudmFsdWUsIGUuc2VydmVyVGltZXN0YW1wcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIHRoZSBmaWVsZCBzcGVjaWZpZWQgYnkgYGZpZWxkUGF0aGAuIFJldHVybnMgYHVuZGVmaW5lZGAgaWYgdGhlXG4gICAgICogZG9jdW1lbnQgb3IgZmllbGQgZG9lc24ndCBleGlzdC5cbiAgICAgKlxuICAgICAqIEJ5IGRlZmF1bHQsIGEgYHNlcnZlclRpbWVzdGFtcCgpYCB0aGF0IGhhcyBub3QgeWV0IGJlZW4gc2V0IHRvXG4gICAgICogaXRzIGZpbmFsIHZhbHVlIHdpbGwgYmUgcmV0dXJuZWQgYXMgYG51bGxgLiBZb3UgY2FuIG92ZXJyaWRlIHRoaXMgYnlcbiAgICAgKiBwYXNzaW5nIGFuIG9wdGlvbnMgb2JqZWN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIGZpZWxkUGF0aCAtIFRoZSBwYXRoIChmb3IgZXhhbXBsZSAnZm9vJyBvciAnZm9vLmJhcicpIHRvIGEgc3BlY2lmaWNcbiAgICAgKiBmaWVsZC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9wdGlvbnMgb2JqZWN0IHRvIGNvbmZpZ3VyZSBob3cgdGhlIGZpZWxkIGlzIHJldHJpZXZlZFxuICAgICAqIGZyb20gdGhlIHNuYXBzaG90IChmb3IgZXhhbXBsZSB0aGUgZGVzaXJlZCBiZWhhdmlvciBmb3Igc2VydmVyIHRpbWVzdGFtcHNcbiAgICAgKiB0aGF0IGhhdmUgbm90IHlldCBiZWVuIHNldCB0byB0aGVpciBmaW5hbCB2YWx1ZSkuXG4gICAgICogQHJldHVybnMgVGhlIGRhdGEgYXQgdGhlIHNwZWNpZmllZCBmaWVsZCBsb2NhdGlvbiBvciB1bmRlZmluZWQgaWYgbm8gc3VjaFxuICAgICAqIGZpZWxkIGV4aXN0cyBpbiB0aGUgZG9jdW1lbnQuXG4gICAgICovXG4gICAgLy8gV2UgYXJlIHVzaW5nIGBhbnlgIGhlcmUgdG8gYXZvaWQgYW4gZXhwbGljaXQgY2FzdCBieSBvdXIgdXNlcnMuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBnZXQoZSwgdCA9IHt9KSB7XG4gICAgICAgIGlmICh0aGlzLl9kb2N1bWVudCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuX2RvY3VtZW50LmRhdGEuZmllbGQoX19QUklWQVRFX2ZpZWxkUGF0aEZyb21Bcmd1bWVudChcIkRvY3VtZW50U25hcHNob3QuZ2V0XCIsIGUpKTtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSBuKSByZXR1cm4gdGhpcy5fdXNlckRhdGFXcml0ZXIuY29udmVydFZhbHVlKG4sIHQuc2VydmVyVGltZXN0YW1wcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIEpTT04tc2VyaWFsaXphYmxlIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgYERvY3VtZW50U25hcHNob3RgIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQHJldHVybnMgYSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgb2JqZWN0LiAgVGhyb3dzIGEge0BsaW5rIEZpcmVzdG9yZUVycm9yfSBpZiB0aGlzXG4gICAgICogYERvY3VtZW50U25hcHNob3RgIGhhcyBwZW5kaW5nIHdyaXRlcy5cbiAgICAgKi8gICAgdG9KU09OKCkge1xuICAgICAgICBpZiAodGhpcy5tZXRhZGF0YS5oYXNQZW5kaW5nV3JpdGVzKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoTi5GQUlMRURfUFJFQ09ORElUSU9OLCBcIkRvY3VtZW50U25hcHNob3QudG9KU09OKCkgYXR0ZW1wdGVkIHRvIHNlcmlhbGl6ZSBhIGRvY3VtZW50IHdpdGggcGVuZGluZyB3cml0ZXMuIEF3YWl0IHdhaXRGb3JQZW5kaW5nV3JpdGVzKCkgYmVmb3JlIGludm9raW5nIHRvSlNPTigpLlwiKTtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuX2RvY3VtZW50LCB0ID0ge307XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgaWYgKHQudHlwZSA9IERvY3VtZW50U25hcHNob3QuX2pzb25TY2hlbWFWZXJzaW9uLCB0LmJ1bmRsZSA9IFwiXCIsIHQuYnVuZGxlU291cmNlID0gXCJEb2N1bWVudFNuYXBzaG90XCIsIFxuICAgICAgICB0LmJ1bmRsZU5hbWUgPSB0aGlzLl9rZXkudG9TdHJpbmcoKSwgIWUgfHwgIWUuaXNWYWxpZERvY3VtZW50KCkgfHwgIWUuaXNGb3VuZERvY3VtZW50KCkpIHJldHVybiB0O1xuICAgICAgICB0aGlzLl91c2VyRGF0YVdyaXRlci5jb252ZXJ0T2JqZWN0TWFwKGUuZGF0YS52YWx1ZS5tYXBWYWx1ZS5maWVsZHMsIFwicHJldmlvdXNcIik7XG4gICAgICAgIHJldHVybiB0LmJ1bmRsZSA9ICh0aGlzLl9maXJlc3RvcmUsIHRoaXMucmVmLnBhdGgsIFwiTk9UIFNVUFBPUlRFRFwiKSwgdDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRvY3VtZW50U25hcHNob3RGcm9tSlNPTihlLCB0LCBuKSB7XG4gICAgaWYgKF9fUFJJVkFURV92YWxpZGF0ZUpTT04odCwgRG9jdW1lbnRTbmFwc2hvdC5fanNvblNjaGVtYSkpIHtcbiAgICAgICAgaWYgKHQuYnVuZGxlID09PSBUbikgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKE4uSU5WQUxJRF9BUkdVTUVOVCwgXCJUaGUgcHJvdmlkZWQgSlNPTiBvYmplY3Qgd2FzIGNyZWF0ZWQgaW4gYSBjbGllbnQgZW52aXJvbm1lbnQsIHdoaWNoIGlzIG5vdCBzdXBwb3J0ZWQuXCIpO1xuICAgICAgICAvLyBQYXJzZSB0aGUgYnVuZGxlIGRhdGEuXG4gICAgICAgICAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9uZXdTZXJpYWxpemVyKGUuX2RhdGFiYXNlSWQpLCBpID0gX19QUklWQVRFX2NyZWF0ZUJ1bmRsZVJlYWRlclN5bmModC5idW5kbGUsIHIpLCBzID0gaS5XdSgpLCBvID0gbmV3IF9fUFJJVkFURV9CdW5kbGVMb2FkZXIoaS5nZXRNZXRhZGF0YSgpLCByKTtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHMpIG8uR2EoZSk7XG4gICAgICAgIC8vIEVuc3VyZSB0aGF0IHdlIGhhdmUgdGhlIGNvcnJlY3QgbnVtYmVyIG9mIGRvY3VtZW50cyBpbiB0aGUgYnVuZGxlLlxuICAgICAgICAgICAgICAgIGNvbnN0IF8gPSBvLmRvY3VtZW50cztcbiAgICAgICAgaWYgKDEgIT09IF8ubGVuZ3RoKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoTi5JTlZBTElEX0FSR1VNRU5ULCBgRXhwZWN0ZWQgYnVuZGxlIGRhdGEgdG8gY29udGFpbiAxIGRvY3VtZW50LCBidXQgaXQgY29udGFpbnMgJHtfLmxlbmd0aH0gZG9jdW1lbnRzLmApO1xuICAgICAgICAvLyBCdWlsZCBvdXQgdGhlIGludGVybmFsIGRvY3VtZW50IGRhdGEuXG4gICAgICAgICAgICAgICAgY29uc3QgYSA9IF9fUFJJVkFURV9mcm9tRG9jdW1lbnQociwgX1swXS5kb2N1bWVudCksIHUgPSBuZXcgRG9jdW1lbnRLZXkoUmVzb3VyY2VQYXRoLmZyb21TdHJpbmcodC5idW5kbGVOYW1lKSk7XG4gICAgICAgIC8vIFJldHVybiB0aGUgZXh0ZXJuYWwgZmFjaW5nIERvY3VtZW50U25hcHNob3QuXG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRTbmFwc2hvdChlLCBuZXcgX19QUklWQVRFX0xpdGVVc2VyRGF0YVdyaXRlcihlKSwgdSwgYSwgbmV3IFNuYXBzaG90TWV0YWRhdGEoXG4gICAgICAgIC8qIGhhc1BlbmRpbmdXcml0ZXM9ICovICExLCBcbiAgICAgICAgLyogZnJvbUNhY2hlPSAqLyAhMSksIG4gfHwgbnVsbCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgYFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdGAgY29udGFpbnMgZGF0YSByZWFkIGZyb20gYSBkb2N1bWVudCBpbiB5b3VyXG4gKiBGaXJlc3RvcmUgZGF0YWJhc2UgYXMgcGFydCBvZiBhIHF1ZXJ5LiBUaGUgZG9jdW1lbnQgaXMgZ3VhcmFudGVlZCB0byBleGlzdFxuICogYW5kIGl0cyBkYXRhIGNhbiBiZSBleHRyYWN0ZWQgd2l0aCBgLmRhdGEoKWAgb3IgYC5nZXQoPGZpZWxkPilgIHRvIGdldCBhXG4gKiBzcGVjaWZpYyBmaWVsZC5cbiAqXG4gKiBBIGBRdWVyeURvY3VtZW50U25hcHNob3RgIG9mZmVycyB0aGUgc2FtZSBBUEkgc3VyZmFjZSBhcyBhXG4gKiBgRG9jdW1lbnRTbmFwc2hvdGAuIFNpbmNlIHF1ZXJ5IHJlc3VsdHMgY29udGFpbiBvbmx5IGV4aXN0aW5nIGRvY3VtZW50cywgdGhlXG4gKiBgZXhpc3RzYCBwcm9wZXJ0eSB3aWxsIGFsd2F5cyBiZSB0cnVlIGFuZCBgZGF0YSgpYCB3aWxsIG5ldmVyIHJldHVyblxuICogJ3VuZGVmaW5lZCcuXG4gKi8gRG9jdW1lbnRTbmFwc2hvdC5fanNvblNjaGVtYVZlcnNpb24gPSBcImZpcmVzdG9yZS9kb2N1bWVudFNuYXBzaG90LzEuMFwiLCBEb2N1bWVudFNuYXBzaG90Ll9qc29uU2NoZW1hID0ge1xuICAgIHR5cGU6IHByb3BlcnR5KFwic3RyaW5nXCIsIERvY3VtZW50U25hcHNob3QuX2pzb25TY2hlbWFWZXJzaW9uKSxcbiAgICBidW5kbGVTb3VyY2U6IHByb3BlcnR5KFwic3RyaW5nXCIsIFwiRG9jdW1lbnRTbmFwc2hvdFwiKSxcbiAgICBidW5kbGVOYW1lOiBwcm9wZXJ0eShcInN0cmluZ1wiKSxcbiAgICBidW5kbGU6IHByb3BlcnR5KFwic3RyaW5nXCIpXG59O1xuXG5jbGFzcyBRdWVyeURvY3VtZW50U25hcHNob3QgZXh0ZW5kcyBEb2N1bWVudFNuYXBzaG90IHtcbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQgYXMgYW4gYE9iamVjdGAuXG4gICAgICpcbiAgICAgKiBCeSBkZWZhdWx0LCBgc2VydmVyVGltZXN0YW1wKClgIHZhbHVlcyB0aGF0IGhhdmUgbm90IHlldCBiZWVuXG4gICAgICogc2V0IHRvIHRoZWlyIGZpbmFsIHZhbHVlIHdpbGwgYmUgcmV0dXJuZWQgYXMgYG51bGxgLiBZb3UgY2FuIG92ZXJyaWRlXG4gICAgICogdGhpcyBieSBwYXNzaW5nIGFuIG9wdGlvbnMgb2JqZWN0LlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBBbiBvcHRpb25zIG9iamVjdCB0byBjb25maWd1cmUgaG93IGRhdGEgaXMgcmV0cmlldmVkIGZyb21cbiAgICAgKiB0aGUgc25hcHNob3QgKGZvciBleGFtcGxlIHRoZSBkZXNpcmVkIGJlaGF2aW9yIGZvciBzZXJ2ZXIgdGltZXN0YW1wcyB0aGF0XG4gICAgICogaGF2ZSBub3QgeWV0IGJlZW4gc2V0IHRvIHRoZWlyIGZpbmFsIHZhbHVlKS5cbiAgICAgKiBAcmV0dXJucyBBbiBgT2JqZWN0YCBjb250YWluaW5nIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50LlxuICAgICAqL1xuICAgIGRhdGEoZSA9IHt9KSB7XG4gICAgICAgIHJldHVybiBzdXBlci5kYXRhKGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGBRdWVyeVNuYXBzaG90YCBjb250YWlucyB6ZXJvIG9yIG1vcmUgYERvY3VtZW50U25hcHNob3RgIG9iamVjdHNcbiAqIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0cyBvZiBhIHF1ZXJ5LiBUaGUgZG9jdW1lbnRzIGNhbiBiZSBhY2Nlc3NlZCBhcyBhblxuICogYXJyYXkgdmlhIHRoZSBgZG9jc2AgcHJvcGVydHkgb3IgZW51bWVyYXRlZCB1c2luZyB0aGUgYGZvckVhY2hgIG1ldGhvZC4gVGhlXG4gKiBudW1iZXIgb2YgZG9jdW1lbnRzIGNhbiBiZSBkZXRlcm1pbmVkIHZpYSB0aGUgYGVtcHR5YCBhbmQgYHNpemVgXG4gKiBwcm9wZXJ0aWVzLlxuICovIGNsYXNzIFF1ZXJ5U25hcHNob3Qge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgcikge1xuICAgICAgICB0aGlzLl9maXJlc3RvcmUgPSBlLCB0aGlzLl91c2VyRGF0YVdyaXRlciA9IHQsIHRoaXMuX3NuYXBzaG90ID0gciwgdGhpcy5tZXRhZGF0YSA9IG5ldyBTbmFwc2hvdE1ldGFkYXRhKHIuaGFzUGVuZGluZ1dyaXRlcywgci5mcm9tQ2FjaGUpLCBcbiAgICAgICAgdGhpcy5xdWVyeSA9IG47XG4gICAgfVxuICAgIC8qKiBBbiBhcnJheSBvZiBhbGwgdGhlIGRvY3VtZW50cyBpbiB0aGUgYFF1ZXJ5U25hcHNob3RgLiAqLyAgICBnZXQgZG9jcygpIHtcbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoKCh0ID0+IGUucHVzaCh0KSkpLCBlO1xuICAgIH1cbiAgICAvKiogVGhlIG51bWJlciBvZiBkb2N1bWVudHMgaW4gdGhlIGBRdWVyeVNuYXBzaG90YC4gKi8gICAgZ2V0IHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zbmFwc2hvdC5kb2NzLnNpemU7XG4gICAgfVxuICAgIC8qKiBUcnVlIGlmIHRoZXJlIGFyZSBubyBkb2N1bWVudHMgaW4gdGhlIGBRdWVyeVNuYXBzaG90YC4gKi8gICAgZ2V0IGVtcHR5KCkge1xuICAgICAgICByZXR1cm4gMCA9PT0gdGhpcy5zaXplO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbnVtZXJhdGVzIGFsbCBvZiB0aGUgZG9jdW1lbnRzIGluIHRoZSBgUXVlcnlTbmFwc2hvdGAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgLSBBIGNhbGxiYWNrIHRvIGJlIGNhbGxlZCB3aXRoIGEgYFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdGAgZm9yXG4gICAgICogZWFjaCBkb2N1bWVudCBpbiB0aGUgc25hcHNob3QuXG4gICAgICogQHBhcmFtIHRoaXNBcmcgLSBUaGUgYHRoaXNgIGJpbmRpbmcgZm9yIHRoZSBjYWxsYmFjay5cbiAgICAgKi8gICAgZm9yRWFjaChlLCB0KSB7XG4gICAgICAgIHRoaXMuX3NuYXBzaG90LmRvY3MuZm9yRWFjaCgobiA9PiB7XG4gICAgICAgICAgICBlLmNhbGwodCwgbmV3IFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCh0aGlzLl9maXJlc3RvcmUsIHRoaXMuX3VzZXJEYXRhV3JpdGVyLCBuLmtleSwgbiwgbmV3IFNuYXBzaG90TWV0YWRhdGEodGhpcy5fc25hcHNob3QubXV0YXRlZEtleXMuaGFzKG4ua2V5KSwgdGhpcy5fc25hcHNob3QuZnJvbUNhY2hlKSwgdGhpcy5xdWVyeS5jb252ZXJ0ZXIpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIHRoZSBkb2N1bWVudHMgY2hhbmdlcyBzaW5jZSB0aGUgbGFzdCBzbmFwc2hvdC4gSWYgdGhpc1xuICAgICAqIGlzIHRoZSBmaXJzdCBzbmFwc2hvdCwgYWxsIGRvY3VtZW50cyB3aWxsIGJlIGluIHRoZSBsaXN0IGFzICdhZGRlZCdcbiAgICAgKiBjaGFuZ2VzLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBgU25hcHNob3RMaXN0ZW5PcHRpb25zYCB0aGF0IGNvbnRyb2wgd2hldGhlciBtZXRhZGF0YS1vbmx5XG4gICAgICogY2hhbmdlcyAoaS5lLiBvbmx5IGBEb2N1bWVudFNuYXBzaG90Lm1ldGFkYXRhYCBjaGFuZ2VkKSBzaG91bGQgdHJpZ2dlclxuICAgICAqIHNuYXBzaG90IGV2ZW50cy5cbiAgICAgKi8gICAgZG9jQ2hhbmdlcyhlID0ge30pIHtcbiAgICAgICAgY29uc3QgdCA9ICEhZS5pbmNsdWRlTWV0YWRhdGFDaGFuZ2VzO1xuICAgICAgICBpZiAodCAmJiB0aGlzLl9zbmFwc2hvdC5leGNsdWRlc01ldGFkYXRhQ2hhbmdlcykgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKE4uSU5WQUxJRF9BUkdVTUVOVCwgXCJUbyBpbmNsdWRlIG1ldGFkYXRhIGNoYW5nZXMgd2l0aCB5b3VyIGRvY3VtZW50IGNoYW5nZXMsIHlvdSBtdXN0IGFsc28gcGFzcyB7IGluY2x1ZGVNZXRhZGF0YUNoYW5nZXM6dHJ1ZSB9IHRvIG9uU25hcHNob3QoKS5cIik7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWNoZWRDaGFuZ2VzICYmIHRoaXMuX2NhY2hlZENoYW5nZXNJbmNsdWRlTWV0YWRhdGFDaGFuZ2VzID09PSB0IHx8ICh0aGlzLl9jYWNoZWRDaGFuZ2VzID0gXG4gICAgICAgIC8qKiBDYWxjdWxhdGVzIHRoZSBhcnJheSBvZiBgRG9jdW1lbnRDaGFuZ2VgcyBmb3IgYSBnaXZlbiBgVmlld1NuYXBzaG90YC4gKi9cbiAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX2NoYW5nZXNGcm9tU25hcHNob3QoZSwgdCkge1xuICAgICAgICAgICAgaWYgKGUuX3NuYXBzaG90Lm9sZERvY3MuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgbGV0IHQgPSAwO1xuICAgICAgICAgICAgICAgIHJldHVybiBlLl9zbmFwc2hvdC5kb2NDaGFuZ2VzLm1hcCgobiA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgUXVlcnlEb2N1bWVudFNuYXBzaG90KGUuX2ZpcmVzdG9yZSwgZS5fdXNlckRhdGFXcml0ZXIsIG4uZG9jLmtleSwgbi5kb2MsIG5ldyBTbmFwc2hvdE1ldGFkYXRhKGUuX3NuYXBzaG90Lm11dGF0ZWRLZXlzLmhhcyhuLmRvYy5rZXkpLCBlLl9zbmFwc2hvdC5mcm9tQ2FjaGUpLCBlLnF1ZXJ5LmNvbnZlcnRlcik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuLmRvYywge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJhZGRlZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jOiByLFxuICAgICAgICAgICAgICAgICAgICAgICAgb2xkSW5kZXg6IC0xLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3SW5kZXg6IHQrK1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAvLyBBIGBEb2N1bWVudFNldGAgdGhhdCBpcyB1cGRhdGVkIGluY3JlbWVudGFsbHkgYXMgY2hhbmdlcyBhcmUgYXBwbGllZCB0byB1c2VcbiAgICAgICAgICAgICAgICAvLyB0byBsb29rdXAgdGhlIGluZGV4IG9mIGEgZG9jdW1lbnQuXG4gICAgICAgICAgICAgICAgbGV0IG4gPSBlLl9zbmFwc2hvdC5vbGREb2NzO1xuICAgICAgICAgICAgICAgIHJldHVybiBlLl9zbmFwc2hvdC5kb2NDaGFuZ2VzLmZpbHRlcigoZSA9PiB0IHx8IDMgLyogQ2hhbmdlVHlwZS5NZXRhZGF0YSAqLyAhPT0gZS50eXBlKSkubWFwKCh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9IG5ldyBRdWVyeURvY3VtZW50U25hcHNob3QoZS5fZmlyZXN0b3JlLCBlLl91c2VyRGF0YVdyaXRlciwgdC5kb2Mua2V5LCB0LmRvYywgbmV3IFNuYXBzaG90TWV0YWRhdGEoZS5fc25hcHNob3QubXV0YXRlZEtleXMuaGFzKHQuZG9jLmtleSksIGUuX3NuYXBzaG90LmZyb21DYWNoZSksIGUucXVlcnkuY29udmVydGVyKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGkgPSAtMSwgcyA9IC0xO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovICE9PSB0LnR5cGUgJiYgKGkgPSBuLmluZGV4T2YodC5kb2Mua2V5KSwgbiA9IG4uZGVsZXRlKHQuZG9jLmtleSkpLCBcbiAgICAgICAgICAgICAgICAgICAgMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8gIT09IHQudHlwZSAmJiAobiA9IG4uYWRkKHQuZG9jKSwgcyA9IG4uaW5kZXhPZih0LmRvYy5rZXkpKSwgXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IF9fUFJJVkFURV9yZXN1bHRDaGFuZ2VUeXBlKHQudHlwZSksXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2M6IHIsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbGRJbmRleDogaSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0luZGV4OiBzXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KHRoaXMsIHQpLCB0aGlzLl9jYWNoZWRDaGFuZ2VzSW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyA9IHQpLCB0aGlzLl9jYWNoZWRDaGFuZ2VzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgSlNPTi1zZXJpYWxpemFibGUgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBgUXVlcnlTbmFwc2hvdGAgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBhIEpTT04gcmVwcmVzZW50YXRpb24gb2YgdGhpcyBvYmplY3QuIFRocm93cyBhIHtAbGluayBGaXJlc3RvcmVFcnJvcn0gaWYgdGhpc1xuICAgICAqIGBRdWVyeVNuYXBzaG90YCBoYXMgcGVuZGluZyB3cml0ZXMuXG4gICAgICovICAgIHRvSlNPTigpIHtcbiAgICAgICAgaWYgKHRoaXMubWV0YWRhdGEuaGFzUGVuZGluZ1dyaXRlcykgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKE4uRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJRdWVyeVNuYXBzaG90LnRvSlNPTigpIGF0dGVtcHRlZCB0byBzZXJpYWxpemUgYSBkb2N1bWVudCB3aXRoIHBlbmRpbmcgd3JpdGVzLiBBd2FpdCB3YWl0Rm9yUGVuZGluZ1dyaXRlcygpIGJlZm9yZSBpbnZva2luZyB0b0pTT04oKS5cIik7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHt9O1xuICAgICAgICBlLnR5cGUgPSBRdWVyeVNuYXBzaG90Ll9qc29uU2NoZW1hVmVyc2lvbiwgZS5idW5kbGVTb3VyY2UgPSBcIlF1ZXJ5U25hcHNob3RcIiwgZS5idW5kbGVOYW1lID0gX19QUklWQVRFX0F1dG9JZC5uZXdJZCgpLCBcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlLl9kYXRhYmFzZUlkLmRhdGFiYXNlLCB0aGlzLl9maXJlc3RvcmUuX2RhdGFiYXNlSWQucHJvamVjdElkO1xuICAgICAgICBjb25zdCB0ID0gW10sIG4gPSBbXSwgciA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5kb2NzLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgbnVsbCAhPT0gZS5fZG9jdW1lbnQgJiYgKHQucHVzaChlLl9kb2N1bWVudCksIG4ucHVzaCh0aGlzLl91c2VyRGF0YVdyaXRlci5jb252ZXJ0T2JqZWN0TWFwKGUuX2RvY3VtZW50LmRhdGEudmFsdWUubWFwVmFsdWUuZmllbGRzLCBcInByZXZpb3VzXCIpKSwgXG4gICAgICAgICAgICByLnB1c2goZS5yZWYucGF0aCkpO1xuICAgICAgICB9KSksIGUuYnVuZGxlID0gKHRoaXMuX2ZpcmVzdG9yZSwgdGhpcy5xdWVyeS5fcXVlcnksIGUuYnVuZGxlTmFtZSwgXCJOT1QgU1VQUE9SVEVEXCIpLCBcbiAgICAgICAgZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHF1ZXJ5U25hcHNob3RGcm9tSlNPTihlLCB0LCBuKSB7XG4gICAgaWYgKF9fUFJJVkFURV92YWxpZGF0ZUpTT04odCwgUXVlcnlTbmFwc2hvdC5fanNvblNjaGVtYSkpIHtcbiAgICAgICAgaWYgKHQuYnVuZGxlID09PSBUbikgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKE4uSU5WQUxJRF9BUkdVTUVOVCwgXCJUaGUgcHJvdmlkZWQgSlNPTiBvYmplY3Qgd2FzIGNyZWF0ZWQgaW4gYSBjbGllbnQgZW52aXJvbm1lbnQsIHdoaWNoIGlzIG5vdCBzdXBwb3J0ZWQuXCIpO1xuICAgICAgICAvLyBQYXJzZSB0aGUgYnVuZGxlIGRhdGEuXG4gICAgICAgICAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9uZXdTZXJpYWxpemVyKGUuX2RhdGFiYXNlSWQpLCBpID0gX19QUklWQVRFX2NyZWF0ZUJ1bmRsZVJlYWRlclN5bmModC5idW5kbGUsIHIpLCBzID0gaS5XdSgpLCBvID0gbmV3IF9fUFJJVkFURV9CdW5kbGVMb2FkZXIoaS5nZXRNZXRhZGF0YSgpLCByKTtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHMpIG8uR2EoZSk7XG4gICAgICAgIGlmICgxICE9PSBvLnF1ZXJpZXMubGVuZ3RoKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoTi5JTlZBTElEX0FSR1VNRU5ULCBgU25hcHNob3QgZGF0YSBleHBlY3RlZCAxIHF1ZXJ5IGJ1dCBmb3VuZCAke28ucXVlcmllcy5sZW5ndGh9IHF1ZXJpZXMuYCk7XG4gICAgICAgIC8vIENyZWF0ZSBhbiBpbnRlcm5hbCBRdWVyeSBvYmplY3QgZnJvbSB0aGUgbmFtZWQgcXVlcnkgaW4gdGhlIGJ1bmRsZS5cbiAgICAgICAgICAgICAgICBjb25zdCBfID0gX19QUklWQVRFX2Zyb21CdW5kbGVkUXVlcnkoby5xdWVyaWVzWzBdLmJ1bmRsZWRRdWVyeSksIGEgPSBvLmRvY3VtZW50cztcbiAgICAgICAgLy8gQ29uc3RydWN0IHRoZSBhcnJheXMgb2YgZG9jdW1lbnQgZGF0YSBmb3IgdGhlIHF1ZXJ5LlxuICAgICAgICAgICAgICAgIGxldCB1ID0gbmV3IERvY3VtZW50U2V0O1xuICAgICAgICBhLm1hcCgoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2Zyb21Eb2N1bWVudChyLCBlLmRvY3VtZW50KTtcbiAgICAgICAgICAgIHUgPSB1LmFkZCh0KTtcbiAgICAgICAgfSkpO1xuICAgICAgICAvLyBDcmVhdGUgYSB2aWV3IHNuYXBzaG90IG9mIHRoZSBxdWVyeSBhbmQgZG9jdW1lbnRzLlxuICAgICAgICBjb25zdCBjID0gVmlld1NuYXBzaG90LmZyb21Jbml0aWFsRG9jdW1lbnRzKF8sIHUsIF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpIC8qIFplcm8gbXV0YXRlZCBrZXlzIHNpZ25pZmllcyBubyBwZW5kaW5nIHdyaXRlcy4gKi8gLCBcbiAgICAgICAgLyogZnJvbUNhY2hlPSAqLyAhMSwgXG4gICAgICAgIC8qIGhhc0NhY2hlZFJlc3VsdHM9ICovICExKSwgbCA9IG5ldyBRdWVyeShlLCBuIHx8IG51bGwsIF8pO1xuICAgICAgICAvLyBDcmVhdGUgYW4gZXh0ZXJuYWwgUXVlcnkgb2JqZWN0LCByZXF1aXJlZCB0byBjb25zdHJ1Y3QgdGhlIFF1ZXJ5U25hcHNob3QuXG4gICAgICAgICAgICAgICAgLy8gUmV0dXJuIGEgbmV3IFF1ZXJ5U25hcHNob3Qgd2l0aCBhbGwgb2YgdGhlIGNvbGxlY3RlZCBkYXRhLlxuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5U25hcHNob3QoZSwgbmV3IF9fUFJJVkFURV9MaXRlVXNlckRhdGFXcml0ZXIoZSksIGwsIGMpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3Jlc3VsdENoYW5nZVR5cGUoZSkge1xuICAgIHN3aXRjaCAoZSkge1xuICAgICAgY2FzZSAwIC8qIENoYW5nZVR5cGUuQWRkZWQgKi8gOlxuICAgICAgICByZXR1cm4gXCJhZGRlZFwiO1xuXG4gICAgICBjYXNlIDIgLyogQ2hhbmdlVHlwZS5Nb2RpZmllZCAqLyA6XG4gICAgICBjYXNlIDMgLyogQ2hhbmdlVHlwZS5NZXRhZGF0YSAqLyA6XG4gICAgICAgIHJldHVybiBcIm1vZGlmaWVkXCI7XG5cbiAgICAgIGNhc2UgMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8gOlxuICAgICAgICByZXR1cm4gXCJyZW1vdmVkXCI7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBmYWlsKDYxNTAxLCB7XG4gICAgICAgICAgICB0eXBlOiBlXG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuLy8gVE9ETyhmaXJlc3RvcmVleHApOiBBZGQgdGVzdHMgZm9yIHNuYXBzaG90RXF1YWwgd2l0aCBkaWZmZXJlbnQgc25hcHNob3Rcbi8vIG1ldGFkYXRhXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcHJvdmlkZWQgc25hcHNob3RzIGFyZSBlcXVhbC5cbiAqXG4gKiBAcGFyYW0gbGVmdCAtIEEgc25hcHNob3QgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSByaWdodCAtIEEgc25hcHNob3QgdG8gY29tcGFyZS5cbiAqIEByZXR1cm5zIHRydWUgaWYgdGhlIHNuYXBzaG90cyBhcmUgZXF1YWwuXG4gKi8gZnVuY3Rpb24gc25hcHNob3RFcXVhbChlLCB0KSB7XG4gICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBEb2N1bWVudFNuYXBzaG90ICYmIHQgaW5zdGFuY2VvZiBEb2N1bWVudFNuYXBzaG90ID8gZS5fZmlyZXN0b3JlID09PSB0Ll9maXJlc3RvcmUgJiYgZS5fa2V5LmlzRXF1YWwodC5fa2V5KSAmJiAobnVsbCA9PT0gZS5fZG9jdW1lbnQgPyBudWxsID09PSB0Ll9kb2N1bWVudCA6IGUuX2RvY3VtZW50LmlzRXF1YWwodC5fZG9jdW1lbnQpKSAmJiBlLl9jb252ZXJ0ZXIgPT09IHQuX2NvbnZlcnRlciA6IGUgaW5zdGFuY2VvZiBRdWVyeVNuYXBzaG90ICYmIHQgaW5zdGFuY2VvZiBRdWVyeVNuYXBzaG90ICYmIChlLl9maXJlc3RvcmUgPT09IHQuX2ZpcmVzdG9yZSAmJiBxdWVyeUVxdWFsKGUucXVlcnksIHQucXVlcnkpICYmIGUubWV0YWRhdGEuaXNFcXVhbCh0Lm1ldGFkYXRhKSAmJiBlLl9zbmFwc2hvdC5pc0VxdWFsKHQuX3NuYXBzaG90KSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlYWRzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGlzIGBEb2N1bWVudFJlZmVyZW5jZWAuXG4gKlxuICogTm90ZTogYGdldERvYygpYCBhdHRlbXB0cyB0byBwcm92aWRlIHVwLXRvLWRhdGUgZGF0YSB3aGVuIHBvc3NpYmxlIGJ5IHdhaXRpbmdcbiAqIGZvciBkYXRhIGZyb20gdGhlIHNlcnZlciwgYnV0IGl0IG1heSByZXR1cm4gY2FjaGVkIGRhdGEgb3IgZmFpbCBpZiB5b3UgYXJlXG4gKiBvZmZsaW5lIGFuZCB0aGUgc2VydmVyIGNhbm5vdCBiZSByZWFjaGVkLiBUbyBzcGVjaWZ5IHRoaXMgYmVoYXZpb3IsIGludm9rZVxuICoge0BsaW5rIGdldERvY0Zyb21DYWNoZX0gb3Ige0BsaW5rIGdldERvY0Zyb21TZXJ2ZXJ9LlxuICpcbiAqIEBwYXJhbSByZWZlcmVuY2UgLSBUaGUgcmVmZXJlbmNlIG9mIHRoZSBkb2N1bWVudCB0byBmZXRjaC5cbiAqIEByZXR1cm5zIEEgUHJvbWlzZSByZXNvbHZlZCB3aXRoIGEgYERvY3VtZW50U25hcHNob3RgIGNvbnRhaW5pbmcgdGhlXG4gKiBjdXJyZW50IGRvY3VtZW50IGNvbnRlbnRzLlxuICovIGZ1bmN0aW9uIGdldERvYyhlKSB7XG4gICAgZSA9IF9fUFJJVkFURV9jYXN0KGUsIERvY3VtZW50UmVmZXJlbmNlKTtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX2Nhc3QoZS5maXJlc3RvcmUsIEZpcmVzdG9yZSk7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRHZXREb2N1bWVudFZpYVNuYXBzaG90TGlzdGVuZXIoZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZCh0KSwgZS5fa2V5KS50aGVuKChuID0+IF9fUFJJVkFURV9jb252ZXJ0VG9Eb2NTbmFwc2hvdCh0LCBlLCBuKSkpO1xufVxuXG5RdWVyeVNuYXBzaG90Ll9qc29uU2NoZW1hVmVyc2lvbiA9IFwiZmlyZXN0b3JlL3F1ZXJ5U25hcHNob3QvMS4wXCIsIFF1ZXJ5U25hcHNob3QuX2pzb25TY2hlbWEgPSB7XG4gICAgdHlwZTogcHJvcGVydHkoXCJzdHJpbmdcIiwgUXVlcnlTbmFwc2hvdC5fanNvblNjaGVtYVZlcnNpb24pLFxuICAgIGJ1bmRsZVNvdXJjZTogcHJvcGVydHkoXCJzdHJpbmdcIiwgXCJRdWVyeVNuYXBzaG90XCIpLFxuICAgIGJ1bmRsZU5hbWU6IHByb3BlcnR5KFwic3RyaW5nXCIpLFxuICAgIGJ1bmRsZTogcHJvcGVydHkoXCJzdHJpbmdcIilcbn07XG5cbmNsYXNzIF9fUFJJVkFURV9FeHBVc2VyRGF0YVdyaXRlciBleHRlbmRzIEFic3RyYWN0VXNlckRhdGFXcml0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5maXJlc3RvcmUgPSBlO1xuICAgIH1cbiAgICBjb252ZXJ0Qnl0ZXMoZSkge1xuICAgICAgICByZXR1cm4gbmV3IEJ5dGVzKGUpO1xuICAgIH1cbiAgICBjb252ZXJ0UmVmZXJlbmNlKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuY29udmVydERvY3VtZW50S2V5KGUsIHRoaXMuZmlyZXN0b3JlLl9kYXRhYmFzZUlkKTtcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudFJlZmVyZW5jZSh0aGlzLmZpcmVzdG9yZSwgLyogY29udmVydGVyPSAqLyBudWxsLCB0KTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVhZHMgdGhlIGRvY3VtZW50IHJlZmVycmVkIHRvIGJ5IHRoaXMgYERvY3VtZW50UmVmZXJlbmNlYCBmcm9tIGNhY2hlLlxuICogUmV0dXJucyBhbiBlcnJvciBpZiB0aGUgZG9jdW1lbnQgaXMgbm90IGN1cnJlbnRseSBjYWNoZWQuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgcmVzb2x2ZWQgd2l0aCBhIGBEb2N1bWVudFNuYXBzaG90YCBjb250YWluaW5nIHRoZVxuICogY3VycmVudCBkb2N1bWVudCBjb250ZW50cy5cbiAqLyBmdW5jdGlvbiBnZXREb2NGcm9tQ2FjaGUoZSkge1xuICAgIGUgPSBfX1BSSVZBVEVfY2FzdChlLCBEb2N1bWVudFJlZmVyZW5jZSk7XG4gICAgY29uc3QgdCA9IF9fUFJJVkFURV9jYXN0KGUuZmlyZXN0b3JlLCBGaXJlc3RvcmUpLCBuID0gZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZCh0KSwgciA9IG5ldyBfX1BSSVZBVEVfRXhwVXNlckRhdGFXcml0ZXIodCk7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRHZXREb2N1bWVudEZyb21Mb2NhbENhY2hlKG4sIGUuX2tleSkudGhlbigobiA9PiBuZXcgRG9jdW1lbnRTbmFwc2hvdCh0LCByLCBlLl9rZXksIG4sIG5ldyBTbmFwc2hvdE1ldGFkYXRhKG51bGwgIT09IG4gJiYgbi5oYXNMb2NhbE11dGF0aW9ucywgXG4gICAgLyogZnJvbUNhY2hlPSAqLyAhMCksIGUuY29udmVydGVyKSkpO1xufVxuXG4vKipcbiAqIFJlYWRzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGlzIGBEb2N1bWVudFJlZmVyZW5jZWAgZnJvbSB0aGUgc2VydmVyLlxuICogUmV0dXJucyBhbiBlcnJvciBpZiB0aGUgbmV0d29yayBpcyBub3QgYXZhaWxhYmxlLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHJlc29sdmVkIHdpdGggYSBgRG9jdW1lbnRTbmFwc2hvdGAgY29udGFpbmluZyB0aGVcbiAqIGN1cnJlbnQgZG9jdW1lbnQgY29udGVudHMuXG4gKi8gZnVuY3Rpb24gZ2V0RG9jRnJvbVNlcnZlcihlKSB7XG4gICAgZSA9IF9fUFJJVkFURV9jYXN0KGUsIERvY3VtZW50UmVmZXJlbmNlKTtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX2Nhc3QoZS5maXJlc3RvcmUsIEZpcmVzdG9yZSk7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRHZXREb2N1bWVudFZpYVNuYXBzaG90TGlzdGVuZXIoZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZCh0KSwgZS5fa2V5LCB7XG4gICAgICAgIHNvdXJjZTogXCJzZXJ2ZXJcIlxuICAgIH0pLnRoZW4oKG4gPT4gX19QUklWQVRFX2NvbnZlcnRUb0RvY1NuYXBzaG90KHQsIGUsIG4pKSk7XG59XG5cbi8qKlxuICogRXhlY3V0ZXMgdGhlIHF1ZXJ5IGFuZCByZXR1cm5zIHRoZSByZXN1bHRzIGFzIGEgYFF1ZXJ5U25hcHNob3RgLlxuICpcbiAqIE5vdGU6IGBnZXREb2NzKClgIGF0dGVtcHRzIHRvIHByb3ZpZGUgdXAtdG8tZGF0ZSBkYXRhIHdoZW4gcG9zc2libGUgYnlcbiAqIHdhaXRpbmcgZm9yIGRhdGEgZnJvbSB0aGUgc2VydmVyLCBidXQgaXQgbWF5IHJldHVybiBjYWNoZWQgZGF0YSBvciBmYWlsIGlmXG4gKiB5b3UgYXJlIG9mZmxpbmUgYW5kIHRoZSBzZXJ2ZXIgY2Fubm90IGJlIHJlYWNoZWQuIFRvIHNwZWNpZnkgdGhpcyBiZWhhdmlvcixcbiAqIGludm9rZSB7QGxpbmsgZ2V0RG9jc0Zyb21DYWNoZX0gb3Ige0BsaW5rIGdldERvY3NGcm9tU2VydmVyfS5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgd2l0aCB0aGUgcmVzdWx0cyBvZiB0aGUgcXVlcnkuXG4gKi8gZnVuY3Rpb24gZ2V0RG9jcyhlKSB7XG4gICAgZSA9IF9fUFJJVkFURV9jYXN0KGUsIFF1ZXJ5KTtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX2Nhc3QoZS5maXJlc3RvcmUsIEZpcmVzdG9yZSksIG4gPSBlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkKHQpLCByID0gbmV3IF9fUFJJVkFURV9FeHBVc2VyRGF0YVdyaXRlcih0KTtcbiAgICByZXR1cm4gX19QUklWQVRFX3ZhbGlkYXRlSGFzRXhwbGljaXRPcmRlckJ5Rm9yTGltaXRUb0xhc3QoZS5fcXVlcnkpLCBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50R2V0RG9jdW1lbnRzVmlhU25hcHNob3RMaXN0ZW5lcihuLCBlLl9xdWVyeSkudGhlbigobiA9PiBuZXcgUXVlcnlTbmFwc2hvdCh0LCByLCBlLCBuKSkpO1xufVxuXG4vKipcbiAqIEV4ZWN1dGVzIHRoZSBxdWVyeSBhbmQgcmV0dXJucyB0aGUgcmVzdWx0cyBhcyBhIGBRdWVyeVNuYXBzaG90YCBmcm9tIGNhY2hlLlxuICogUmV0dXJucyBhbiBlbXB0eSByZXN1bHQgc2V0IGlmIG5vIGRvY3VtZW50cyBtYXRjaGluZyB0aGUgcXVlcnkgYXJlIGN1cnJlbnRseVxuICogY2FjaGVkLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgd2lsbCBiZSByZXNvbHZlZCB3aXRoIHRoZSByZXN1bHRzIG9mIHRoZSBxdWVyeS5cbiAqLyBmdW5jdGlvbiBnZXREb2NzRnJvbUNhY2hlKGUpIHtcbiAgICBlID0gX19QUklWQVRFX2Nhc3QoZSwgUXVlcnkpO1xuICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfY2FzdChlLmZpcmVzdG9yZSwgRmlyZXN0b3JlKSwgbiA9IGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQodCksIHIgPSBuZXcgX19QUklWQVRFX0V4cFVzZXJEYXRhV3JpdGVyKHQpO1xuICAgIHJldHVybiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50R2V0RG9jdW1lbnRzRnJvbUxvY2FsQ2FjaGUobiwgZS5fcXVlcnkpLnRoZW4oKG4gPT4gbmV3IFF1ZXJ5U25hcHNob3QodCwgciwgZSwgbikpKTtcbn1cblxuLyoqXG4gKiBFeGVjdXRlcyB0aGUgcXVlcnkgYW5kIHJldHVybnMgdGhlIHJlc3VsdHMgYXMgYSBgUXVlcnlTbmFwc2hvdGAgZnJvbSB0aGVcbiAqIHNlcnZlci4gUmV0dXJucyBhbiBlcnJvciBpZiB0aGUgbmV0d29yayBpcyBub3QgYXZhaWxhYmxlLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgd2lsbCBiZSByZXNvbHZlZCB3aXRoIHRoZSByZXN1bHRzIG9mIHRoZSBxdWVyeS5cbiAqLyBmdW5jdGlvbiBnZXREb2NzRnJvbVNlcnZlcihlKSB7XG4gICAgZSA9IF9fUFJJVkFURV9jYXN0KGUsIFF1ZXJ5KTtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX2Nhc3QoZS5maXJlc3RvcmUsIEZpcmVzdG9yZSksIG4gPSBlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkKHQpLCByID0gbmV3IF9fUFJJVkFURV9FeHBVc2VyRGF0YVdyaXRlcih0KTtcbiAgICByZXR1cm4gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudEdldERvY3VtZW50c1ZpYVNuYXBzaG90TGlzdGVuZXIobiwgZS5fcXVlcnksIHtcbiAgICAgICAgc291cmNlOiBcInNlcnZlclwiXG4gICAgfSkudGhlbigobiA9PiBuZXcgUXVlcnlTbmFwc2hvdCh0LCByLCBlLCBuKSkpO1xufVxuXG5mdW5jdGlvbiBzZXREb2MoZSwgdCwgbikge1xuICAgIGUgPSBfX1BSSVZBVEVfY2FzdChlLCBEb2N1bWVudFJlZmVyZW5jZSk7XG4gICAgY29uc3QgciA9IF9fUFJJVkFURV9jYXN0KGUuZmlyZXN0b3JlLCBGaXJlc3RvcmUpLCBpID0gX19QUklWQVRFX2FwcGx5RmlyZXN0b3JlRGF0YUNvbnZlcnRlcihlLmNvbnZlcnRlciwgdCwgbik7XG4gICAgcmV0dXJuIGV4ZWN1dGVXcml0ZShyLCBbIF9fUFJJVkFURV9wYXJzZVNldERhdGEoX19QUklWQVRFX25ld1VzZXJEYXRhUmVhZGVyKHIpLCBcInNldERvY1wiLCBlLl9rZXksIGksIG51bGwgIT09IGUuY29udmVydGVyLCBuKS50b011dGF0aW9uKGUuX2tleSwgUHJlY29uZGl0aW9uLm5vbmUoKSkgXSk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZURvYyhlLCB0LCBuLCAuLi5yKSB7XG4gICAgZSA9IF9fUFJJVkFURV9jYXN0KGUsIERvY3VtZW50UmVmZXJlbmNlKTtcbiAgICBjb25zdCBpID0gX19QUklWQVRFX2Nhc3QoZS5maXJlc3RvcmUsIEZpcmVzdG9yZSksIHMgPSBfX1BSSVZBVEVfbmV3VXNlckRhdGFSZWFkZXIoaSk7XG4gICAgbGV0IG87XG4gICAgbyA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIChcbiAgICAvLyBGb3IgQ29tcGF0IHR5cGVzLCB3ZSBoYXZlIHRvIFwiZXh0cmFjdFwiIHRoZSB1bmRlcmx5aW5nIHR5cGVzIGJlZm9yZVxuICAgIC8vIHBlcmZvcm1pbmcgdmFsaWRhdGlvbi5cbiAgICB0ID0gZ2V0TW9kdWxhckluc3RhbmNlKHQpKSB8fCB0IGluc3RhbmNlb2YgRmllbGRQYXRoID8gX19QUklWQVRFX3BhcnNlVXBkYXRlVmFyYXJncyhzLCBcInVwZGF0ZURvY1wiLCBlLl9rZXksIHQsIG4sIHIpIDogX19QUklWQVRFX3BhcnNlVXBkYXRlRGF0YShzLCBcInVwZGF0ZURvY1wiLCBlLl9rZXksIHQpO1xuICAgIHJldHVybiBleGVjdXRlV3JpdGUoaSwgWyBvLnRvTXV0YXRpb24oZS5fa2V5LCBQcmVjb25kaXRpb24uZXhpc3RzKCEwKSkgXSk7XG59XG5cbi8qKlxuICogRGVsZXRlcyB0aGUgZG9jdW1lbnQgcmVmZXJyZWQgdG8gYnkgdGhlIHNwZWNpZmllZCBgRG9jdW1lbnRSZWZlcmVuY2VgLlxuICpcbiAqIEBwYXJhbSByZWZlcmVuY2UgLSBBIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgdG8gZGVsZXRlLlxuICogQHJldHVybnMgQSBQcm9taXNlIHJlc29sdmVkIG9uY2UgdGhlIGRvY3VtZW50IGhhcyBiZWVuIHN1Y2Nlc3NmdWxseVxuICogZGVsZXRlZCBmcm9tIHRoZSBiYWNrZW5kIChub3RlIHRoYXQgaXQgd29uJ3QgcmVzb2x2ZSB3aGlsZSB5b3UncmUgb2ZmbGluZSkuXG4gKi8gZnVuY3Rpb24gZGVsZXRlRG9jKGUpIHtcbiAgICByZXR1cm4gZXhlY3V0ZVdyaXRlKF9fUFJJVkFURV9jYXN0KGUuZmlyZXN0b3JlLCBGaXJlc3RvcmUpLCBbIG5ldyBfX1BSSVZBVEVfRGVsZXRlTXV0YXRpb24oZS5fa2V5LCBQcmVjb25kaXRpb24ubm9uZSgpKSBdKTtcbn1cblxuLyoqXG4gKiBBZGQgYSBuZXcgZG9jdW1lbnQgdG8gc3BlY2lmaWVkIGBDb2xsZWN0aW9uUmVmZXJlbmNlYCB3aXRoIHRoZSBnaXZlbiBkYXRhLFxuICogYXNzaWduaW5nIGl0IGEgZG9jdW1lbnQgSUQgYXV0b21hdGljYWxseS5cbiAqXG4gKiBAcGFyYW0gcmVmZXJlbmNlIC0gQSByZWZlcmVuY2UgdG8gdGhlIGNvbGxlY3Rpb24gdG8gYWRkIHRoaXMgZG9jdW1lbnQgdG8uXG4gKiBAcGFyYW0gZGF0YSAtIEFuIE9iamVjdCBjb250YWluaW5nIHRoZSBkYXRhIGZvciB0aGUgbmV3IGRvY3VtZW50LlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgcmVzb2x2ZWQgd2l0aCBhIGBEb2N1bWVudFJlZmVyZW5jZWAgcG9pbnRpbmcgdG8gdGhlXG4gKiBuZXdseSBjcmVhdGVkIGRvY3VtZW50IGFmdGVyIGl0IGhhcyBiZWVuIHdyaXR0ZW4gdG8gdGhlIGJhY2tlbmQgKE5vdGUgdGhhdCBpdFxuICogd29uJ3QgcmVzb2x2ZSB3aGlsZSB5b3UncmUgb2ZmbGluZSkuXG4gKi8gZnVuY3Rpb24gYWRkRG9jKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2Nhc3QoZS5maXJlc3RvcmUsIEZpcmVzdG9yZSksIHIgPSBkb2MoZSksIGkgPSBfX1BSSVZBVEVfYXBwbHlGaXJlc3RvcmVEYXRhQ29udmVydGVyKGUuY29udmVydGVyLCB0KTtcbiAgICByZXR1cm4gZXhlY3V0ZVdyaXRlKG4sIFsgX19QUklWQVRFX3BhcnNlU2V0RGF0YShfX1BSSVZBVEVfbmV3VXNlckRhdGFSZWFkZXIoZS5maXJlc3RvcmUpLCBcImFkZERvY1wiLCByLl9rZXksIGksIG51bGwgIT09IGUuY29udmVydGVyLCB7fSkudG9NdXRhdGlvbihyLl9rZXksIFByZWNvbmRpdGlvbi5leGlzdHMoITEpKSBdKS50aGVuKCgoKSA9PiByKSk7XG59XG5cbmZ1bmN0aW9uIG9uU25hcHNob3QoZSwgLi4udCkge1xuICAgIC8vIG9uU25hcHNob3QgZm9yIFF1ZXJ5IG9yIERvY3VtZW50LlxuICAgIGUgPSBnZXRNb2R1bGFySW5zdGFuY2UoZSk7XG4gICAgbGV0IG4gPSB7XG4gICAgICAgIGluY2x1ZGVNZXRhZGF0YUNoYW5nZXM6ICExLFxuICAgICAgICBzb3VyY2U6IFwiZGVmYXVsdFwiXG4gICAgfSwgciA9IDA7XG4gICAgXCJvYmplY3RcIiAhPSB0eXBlb2YgdFtyXSB8fCBfX1BSSVZBVEVfaXNQYXJ0aWFsT2JzZXJ2ZXIodFtyXSkgfHwgKG4gPSB0W3IrK10pO1xuICAgIGNvbnN0IGkgPSB7XG4gICAgICAgIGluY2x1ZGVNZXRhZGF0YUNoYW5nZXM6IG4uaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyxcbiAgICAgICAgc291cmNlOiBuLnNvdXJjZVxuICAgIH07XG4gICAgaWYgKF9fUFJJVkFURV9pc1BhcnRpYWxPYnNlcnZlcih0W3JdKSkge1xuICAgICAgICBjb25zdCBlID0gdFtyXTtcbiAgICAgICAgdFtyXSA9IGUubmV4dD8uYmluZChlKSwgdFtyICsgMV0gPSBlLmVycm9yPy5iaW5kKGUpLCB0W3IgKyAyXSA9IGUuY29tcGxldGU/LmJpbmQoZSk7XG4gICAgfVxuICAgIGxldCBzLCBvLCBfO1xuICAgIGlmIChlIGluc3RhbmNlb2YgRG9jdW1lbnRSZWZlcmVuY2UpIG8gPSBfX1BSSVZBVEVfY2FzdChlLmZpcmVzdG9yZSwgRmlyZXN0b3JlKSwgXG4gICAgXyA9IF9fUFJJVkFURV9uZXdRdWVyeUZvclBhdGgoZS5fa2V5LnBhdGgpLCBzID0ge1xuICAgICAgICBuZXh0OiBuID0+IHtcbiAgICAgICAgICAgIHRbcl0gJiYgdFtyXShfX1BSSVZBVEVfY29udmVydFRvRG9jU25hcHNob3QobywgZSwgbikpO1xuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogdFtyICsgMV0sXG4gICAgICAgIGNvbXBsZXRlOiB0W3IgKyAyXVxuICAgIH07IGVsc2Uge1xuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2Nhc3QoZSwgUXVlcnkpO1xuICAgICAgICBvID0gX19QUklWQVRFX2Nhc3Qobi5maXJlc3RvcmUsIEZpcmVzdG9yZSksIF8gPSBuLl9xdWVyeTtcbiAgICAgICAgY29uc3QgaSA9IG5ldyBfX1BSSVZBVEVfRXhwVXNlckRhdGFXcml0ZXIobyk7XG4gICAgICAgIHMgPSB7XG4gICAgICAgICAgICBuZXh0OiBlID0+IHtcbiAgICAgICAgICAgICAgICB0W3JdICYmIHRbcl0obmV3IFF1ZXJ5U25hcHNob3QobywgaSwgbiwgZSkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiB0W3IgKyAxXSxcbiAgICAgICAgICAgIGNvbXBsZXRlOiB0W3IgKyAyXVxuICAgICAgICB9LCBfX1BSSVZBVEVfdmFsaWRhdGVIYXNFeHBsaWNpdE9yZGVyQnlGb3JMaW1pdFRvTGFzdChlLl9xdWVyeSk7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50TGlzdGVuKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgY29uc3QgaSA9IG5ldyBfX1BSSVZBVEVfQXN5bmNPYnNlcnZlcihyKSwgcyA9IG5ldyBfX1BSSVZBVEVfUXVlcnlMaXN0ZW5lcih0LCBpLCBuKTtcbiAgICAgICAgcmV0dXJuIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyTGlzdGVuKGF3YWl0IF9fUFJJVkFURV9nZXRFdmVudE1hbmFnZXIoZSksIHMpKSksIFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICBpLk51KCksIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyVW5saXN0ZW4oYXdhaXQgX19QUklWQVRFX2dldEV2ZW50TWFuYWdlcihlKSwgcykpKTtcbiAgICAgICAgfTtcbiAgICB9KGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQobyksIF8sIGksIHMpO1xufVxuXG5mdW5jdGlvbiBvblNuYXBzaG90UmVzdW1lKGUsIHQsIC4uLm4pIHtcbiAgICBjb25zdCByID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpLCBpID0gXG4gICAgLyoqXG4gKiBFbnN1cmVzIHRoZSBkYXRhIHJlcXVpcmVkIHRvIGNvbnN0cnVjdCBhbiB7QGxpbmsgb25TbmFwc2hvdH0gbGlzdGVuZXIgZXhpc3QgaW4gYSBgc25hcHNob3RKc29uYFxuICogb2JqZWN0IHRoYXQgb3JpZ2luYXRlcyBmcm9tIHtAbGluayBEb2N1bWVudFNuYXBzaG90LnRvSlNPTn0gb3Ige0BsaW5rIFF1ZXJ5c25hcHNob3QudG9KU09OfS4gVGhlXG4gKiBkYXRhIGlzIG5vcm1hbGl6ZWQgaW50byBhIHR5cGVkIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0gc25hcHNob3RKc29uIC0gVGhlIEpTT04gb2JqZWN0IHRoYXQgdGhlIGFwcCBwcm92aWRlZCB0byB7QGxpbmsgb25TbmFwc2hvdH0uXG4gKiBAcmV0dXJucyBBIG5vcm1hbGl6ZWQgb2JqZWN0IHRoYXQgY29udGFpbnMgYWxsIG9mIHRoZSByZXF1aXJlZCBidW5kbGUgSlNPTiBmaWVsZHMuIElmXG4gKiB7QGxpbmsgc25hcHNob3RKc29ufSBkb2Vzbid0IGNvbnRhaW4gdGhlIHJlcXVpcmVkIGZpZWxkcywgb3IgaWYgdGhlIGZpZWxkcyBleGlzdCBhcyBlbXB0eVxuICogc3RyaW5ncywgdGhlbiB0aGUge0BsaW5rIHNuYXBzaG90SnNvbi5lcnJvcn0gZmllbGQgd2lsbCBiZSBhIG5vbiBlbXB0eSBzdHJpbmcuXG4gKlxuICogQGludGVybmFsXG4gKi9cbiAgICBmdW5jdGlvbiBfX1BSSVZBVEVfbm9ybWFsaXplU25hcHNob3RKc29uRmllbGRzKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHtcbiAgICAgICAgICAgIGJ1bmRsZTogXCJcIixcbiAgICAgICAgICAgIGJ1bmRsZU5hbWU6IFwiXCIsXG4gICAgICAgICAgICBidW5kbGVTb3VyY2U6IFwiXCJcbiAgICAgICAgfSwgbiA9IFsgXCJidW5kbGVcIiwgXCJidW5kbGVOYW1lXCIsIFwiYnVuZGxlU291cmNlXCIgXTtcbiAgICAgICAgZm9yIChjb25zdCByIG9mIG4pIHtcbiAgICAgICAgICAgIGlmICghKHIgaW4gZSkpIHtcbiAgICAgICAgICAgICAgICB0LmVycm9yID0gYHNuYXBzaG90SnNvbiBtaXNzaW5nIHJlcXVpcmVkIGZpZWxkOiAke3J9YDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gZVtyXTtcbiAgICAgICAgICAgIGlmIChcInN0cmluZ1wiICE9IHR5cGVvZiBuKSB7XG4gICAgICAgICAgICAgICAgdC5lcnJvciA9IGBzbmFwc2hvdEpzb24gZmllbGQgJyR7cn0nIG11c3QgYmUgYSBzdHJpbmcuYDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgwID09PSBuLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHQuZXJyb3IgPSBgc25hcHNob3RKc29uIGZpZWxkICcke3J9JyBjYW5ub3QgYmUgYW4gZW1wdHkgc3RyaW5nLmA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcImJ1bmRsZVwiID09PSByID8gdC5idW5kbGUgPSBuIDogXCJidW5kbGVOYW1lXCIgPT09IHIgPyB0LmJ1bmRsZU5hbWUgPSBuIDogXCJidW5kbGVTb3VyY2VcIiA9PT0gciAmJiAodC5idW5kbGVTb3VyY2UgPSBuKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdDtcbiAgICB9XG4gICAgLyoqXG4gKiBMb2FkcyB0aGUgYnVuZGxlIGluIGEgc2VwYXJhdGUgdGFzayBhbmQgdGhlbiBpbnZva2VzIHtAbGluayBvblNuYXBzaG90fSB3aXRoIGFcbiAqIHtAbGluayBEb2N1bWVudFJlZmVyZW5jZX0gZm9yIHRoZSBkb2N1bWVudCBpbiB0aGUgYnVuZGxlLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBUaGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgZm9yIHRoZSB7QGxpbmsgb25TbmFwc2hvdH0gb3BlcmF0aW9uIHJlcXVlc3QuXG4gKiBAcGFyYW0ganNvbiAtIFRoZSBKU09OIGJ1bmRsZSB0byBsb2FkLCBwcm9kdWNlZCBieSB7QGxpbmsgRG9jdW1lbnRTbmFwc2hvdC50b0pTT059LlxuICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25zIGNvbnRyb2xsaW5nIHRoZSBsaXN0ZW4gYmVoYXZpb3IuXG4gKiBAcGFyYW0gb2JzZXJ2ZXIgLSBBIHNpbmdsZSBvYmplY3QgY29udGFpbmluZyBgbmV4dGAgYW5kIGBlcnJvcmAgY2FsbGJhY2tzLlxuICogQHBhcmFtIGNvbnZlcnRlciAtIEFuIG9wdGlvbmFsIG9iamVjdCB0aGF0IGNvbnZlcnRzIG9iamVjdHMgZnJvbSBGaXJlc3RvcmUgYmVmb3JlIHRoZSBvbk5leHRcbiAqIGxpc3RlbmVyIGlzIGludm9rZWQuXG4gKiBAcmV0dXJucyBBbiB1bnN1YnNjcmliZSBmdW5jdGlvbiB0aGF0IGNhbiBiZSBjYWxsZWQgdG8gY2FuY2VsIHRoZSBzbmFwc2hvdFxuICogbGlzdGVuZXIuXG4gKlxuICogQGludGVybmFsXG4gKi8gKHQpO1xuICAgIGlmIChpLmVycm9yKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoTi5JTlZBTElEX0FSR1VNRU5ULCBpLmVycm9yKTtcbiAgICBsZXQgcywgbyA9IDA7XG4gICAgaWYgKFwib2JqZWN0XCIgIT0gdHlwZW9mIG5bb10gfHwgX19QUklWQVRFX2lzUGFydGlhbE9ic2VydmVyKG5bb10pIHx8IChzID0gbltvKytdKSwgXG4gICAgXCJRdWVyeVNuYXBzaG90XCIgPT09IGkuYnVuZGxlU291cmNlKSB7XG4gICAgICAgIGxldCBlID0gbnVsbDtcbiAgICAgICAgaWYgKFwib2JqZWN0XCIgPT0gdHlwZW9mIG5bb10gJiYgX19QUklWQVRFX2lzUGFydGlhbE9ic2VydmVyKG5bb10pKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gbltvKytdO1xuICAgICAgICAgICAgZSA9IHtcbiAgICAgICAgICAgICAgICBuZXh0OiB0Lm5leHQsXG4gICAgICAgICAgICAgICAgZXJyb3I6IHQuZXJyb3IsXG4gICAgICAgICAgICAgICAgY29tcGxldGU6IHQuY29tcGxldGVcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSBlID0ge1xuICAgICAgICAgICAgbmV4dDogbltvKytdLFxuICAgICAgICAgICAgZXJyb3I6IG5bbysrXSxcbiAgICAgICAgICAgIGNvbXBsZXRlOiBuW28rK11cbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gKiBMb2FkcyB0aGUgYnVuZGxlIGluIGEgc2VwYXJhdGUgdGFzayBhbmQgdGhlbiBpbnZva2VzIHtAbGluayBvblNuYXBzaG90fSB3aXRoIGFcbiAqIHtAbGluayBRdWVyeX0gdGhhdCByZXByZXNlbnRzIHRoZSBRdWVyeSBpbiB0aGUgYnVuZGxlLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBUaGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgZm9yIHRoZSB7QGxpbmsgb25TbmFwc2hvdH0gb3BlcmF0aW9uIHJlcXVlc3QuXG4gKiBAcGFyYW0ganNvbiAtIFRoZSBKU09OIGJ1bmRsZSB0byBsb2FkLCBwcm9kdWNlZCBieSB7QGxpbmsgUXVlcnlTbmFwc2hvdC50b0pTT059LlxuICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25zIGNvbnRyb2xsaW5nIHRoZSBsaXN0ZW4gYmVoYXZpb3IuXG4gKiBAcGFyYW0gb2JzZXJ2ZXIgLSBBIHNpbmdsZSBvYmplY3QgY29udGFpbmluZyBgbmV4dGAgYW5kIGBlcnJvcmAgY2FsbGJhY2tzLlxuICogQHBhcmFtIGNvbnZlcnRlciAtIEFuIG9wdGlvbmFsIG9iamVjdCB0aGF0IGNvbnZlcnRzIG9iamVjdHMgZnJvbSBGaXJlc3RvcmUgYmVmb3JlIHRoZSBvbk5leHRcbiAqIGxpc3RlbmVyIGlzIGludm9rZWQuXG4gKiBAcmV0dXJucyBBbiB1bnN1YnNjcmliZSBmdW5jdGlvbiB0aGF0IGNhbiBiZSBjYWxsZWQgdG8gY2FuY2VsIHRoZSBzbmFwc2hvdFxuICogbGlzdGVuZXIuXG4gKlxuICogQGludGVybmFsXG4gKi9cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9vblNuYXBzaG90UXVlcnlTbmFwc2hvdEJ1bmRsZShlLCB0LCBuLCByLCBpKSB7XG4gICAgICAgICAgICBsZXQgcywgbyA9ICExO1xuICAgICAgICAgICAgY29uc3QgXyA9IGxvYWRCdW5kbGUoZSwgdC5idW5kbGUpO1xuICAgICAgICAgICAgcmV0dXJuIF8udGhlbigoKCkgPT4gbmFtZWRRdWVyeShlLCB0LmJ1bmRsZU5hbWUpKSkudGhlbigoZSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGUgJiYgIW8pIHtcbiAgICAgICAgICAgICAgICAgICAgaSAmJiBlLndpdGhDb252ZXJ0ZXIoaSksIHMgPSBvblNuYXBzaG90KGUsIG4gfHwge30sIHIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKS5jYXRjaCgoZSA9PiAoci5lcnJvciAmJiByLmVycm9yKGUpLCAoKSA9PiB7fSkpKSwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIG8gfHwgKG8gPSAhMCwgcyAmJiBzKCkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgICAgICAvKipcbiAqIENhbGN1bGF0ZXMgdGhlIG51bWJlciBvZiBkb2N1bWVudHMgaW4gdGhlIHJlc3VsdCBzZXQgb2YgdGhlIGdpdmVuIHF1ZXJ5XG4gKiB3aXRob3V0IGFjdHVhbGx5IGRvd25sb2FkaW5nIHRoZSBkb2N1bWVudHMuXG4gKlxuICogVXNpbmcgdGhpcyBmdW5jdGlvbiB0byBjb3VudCB0aGUgZG9jdW1lbnRzIGlzIGVmZmljaWVudCBiZWNhdXNlIG9ubHkgdGhlXG4gKiBmaW5hbCBjb3VudCwgbm90IHRoZSBkb2N1bWVudHMnIGRhdGEsIGlzIGRvd25sb2FkZWQuIFRoaXMgZnVuY3Rpb24gY2FuXG4gKiBjb3VudCB0aGUgZG9jdW1lbnRzIGluIGNhc2VzIHdoZXJlIHRoZSByZXN1bHQgc2V0IGlzIHByb2hpYml0aXZlbHkgbGFyZ2UgdG9cbiAqIGRvd25sb2FkIGVudGlyZWx5ICh0aG91c2FuZHMgb2YgZG9jdW1lbnRzKS5cbiAqXG4gKiBUaGUgcmVzdWx0IHJlY2VpdmVkIGZyb20gdGhlIHNlcnZlciBpcyBwcmVzZW50ZWQsIHVuYWx0ZXJlZCwgd2l0aG91dFxuICogY29uc2lkZXJpbmcgYW55IGxvY2FsIHN0YXRlLiBUaGF0IGlzLCBkb2N1bWVudHMgaW4gdGhlIGxvY2FsIGNhY2hlIGFyZSBub3RcbiAqIHRha2VuIGludG8gY29uc2lkZXJhdGlvbiwgbmVpdGhlciBhcmUgbG9jYWwgbW9kaWZpY2F0aW9ucyBub3QgeWV0XG4gKiBzeW5jaHJvbml6ZWQgd2l0aCB0aGUgc2VydmVyLiBQcmV2aW91c2x5LWRvd25sb2FkZWQgcmVzdWx0cywgaWYgYW55LCBhcmUgbm90XG4gKiB1c2VkLiBFdmVyeSBpbnZvY2F0aW9uIG9mIHRoaXMgZnVuY3Rpb24gbmVjZXNzYXJpbHkgaW52b2x2ZXMgYSByb3VuZCB0cmlwIHRvXG4gKiB0aGUgc2VydmVyLlxuICpcbiAqIEBwYXJhbSBxdWVyeSBUaGUgcXVlcnkgd2hvc2UgcmVzdWx0IHNldCBzaXplIGlzIGNhbGN1bGF0ZWQuXG4gKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCB3aWxsIGJlIHJlc29sdmVkIHdpdGggdGhlIGNvdW50OyB0aGUgY291bnQgY2FuIGJlXG4gKiByZXRyaWV2ZWQgZnJvbSBgc25hcHNob3QuZGF0YSgpLmNvdW50YCwgd2hlcmUgYHNuYXBzaG90YCBpcyB0aGVcbiAqIGBBZ2dyZWdhdGVRdWVyeVNuYXBzaG90YCB0byB3aGljaCB0aGUgcmV0dXJuZWQgUHJvbWlzZSByZXNvbHZlcy5cbiAqLyAociwgaSwgcywgZSwgbltvXSk7XG4gICAgfVxuICAgIGlmIChcIkRvY3VtZW50U25hcHNob3RcIiA9PT0gaS5idW5kbGVTb3VyY2UpIHtcbiAgICAgICAgbGV0IGUgPSBudWxsO1xuICAgICAgICBpZiAoXCJvYmplY3RcIiA9PSB0eXBlb2YgbltvXSAmJiBfX1BSSVZBVEVfaXNQYXJ0aWFsT2JzZXJ2ZXIobltvXSkpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBuW28rK107XG4gICAgICAgICAgICBlID0ge1xuICAgICAgICAgICAgICAgIG5leHQ6IHQubmV4dCxcbiAgICAgICAgICAgICAgICBlcnJvcjogdC5lcnJvcixcbiAgICAgICAgICAgICAgICBjb21wbGV0ZTogdC5jb21wbGV0ZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIGUgPSB7XG4gICAgICAgICAgICBuZXh0OiBuW28rK10sXG4gICAgICAgICAgICBlcnJvcjogbltvKytdLFxuICAgICAgICAgICAgY29tcGxldGU6IG5bbysrXVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX29uU25hcHNob3REb2N1bWVudFNuYXBzaG90QnVuZGxlKGUsIHQsIG4sIHIsIGkpIHtcbiAgICAgICAgICAgIGxldCBzLCBvID0gITE7XG4gICAgICAgICAgICBjb25zdCBfID0gbG9hZEJ1bmRsZShlLCB0LmJ1bmRsZSk7XG4gICAgICAgICAgICByZXR1cm4gXy50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFvKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG8gPSBuZXcgRG9jdW1lbnRSZWZlcmVuY2UoZSwgaSB8fCBudWxsLCBEb2N1bWVudEtleS5mcm9tUGF0aCh0LmJ1bmRsZU5hbWUpKTtcbiAgICAgICAgICAgICAgICAgICAgcyA9IG9uU25hcHNob3QobywgbiB8fCB7fSwgcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpLmNhdGNoKChlID0+IChyLmVycm9yICYmIHIuZXJyb3IoZSksICgpID0+IHt9KSkpLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbyB8fCAobyA9ICEwLCBzICYmIHMoKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KHIsIGksIHMsIGUsIG5bb10pO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoTi5JTlZBTElEX0FSR1VNRU5ULCBgdW5zdXBwb3J0ZWQgYnVuZGxlIHNvdXJjZTogJHtpLmJ1bmRsZVNvdXJjZX1gKTtcbn1cblxuZnVuY3Rpb24gb25TbmFwc2hvdHNJblN5bmMoZSwgdCkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50QWRkU25hcHNob3RzSW5TeW5jTGlzdGVuZXIoZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZChlID0gX19QUklWQVRFX2Nhc3QoZSwgRmlyZXN0b3JlKSksIF9fUFJJVkFURV9pc1BhcnRpYWxPYnNlcnZlcih0KSA/IHQgOiB7XG4gICAgICAgIG5leHQ6IHRcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBMb2NhbGx5IHdyaXRlcyBgbXV0YXRpb25zYCBvbiB0aGUgYXN5bmMgcXVldWUuXG4gKiBAaW50ZXJuYWxcbiAqLyBmdW5jdGlvbiBleGVjdXRlV3JpdGUoZSwgdCkge1xuICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50V3JpdGUoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gbmV3IF9fUFJJVkFURV9EZWZlcnJlZDtcbiAgICAgICAgcmV0dXJuIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBfX1BSSVZBVEVfc3luY0VuZ2luZVdyaXRlKGF3YWl0IF9fUFJJVkFURV9nZXRTeW5jRW5naW5lKGUpLCB0LCBuKSkpLCBcbiAgICAgICAgbi5wcm9taXNlO1xuICAgIH0oZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZChlKSwgdCk7XG59XG5cbi8qKlxuICogQ29udmVydHMgYSB7QGxpbmsgVmlld1NuYXBzaG90fSB0aGF0IGNvbnRhaW5zIHRoZSBzaW5nbGUgZG9jdW1lbnQgc3BlY2lmaWVkIGJ5IGByZWZgXG4gKiB0byBhIHtAbGluayBEb2N1bWVudFNuYXBzaG90fS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfY29udmVydFRvRG9jU25hcHNob3QoZSwgdCwgbikge1xuICAgIGNvbnN0IHIgPSBuLmRvY3MuZ2V0KHQuX2tleSksIGkgPSBuZXcgX19QUklWQVRFX0V4cFVzZXJEYXRhV3JpdGVyKGUpO1xuICAgIHJldHVybiBuZXcgRG9jdW1lbnRTbmFwc2hvdChlLCBpLCB0Ll9rZXksIHIsIG5ldyBTbmFwc2hvdE1ldGFkYXRhKG4uaGFzUGVuZGluZ1dyaXRlcywgbi5mcm9tQ2FjaGUpLCB0LmNvbnZlcnRlcik7XG59XG5cbmZ1bmN0aW9uIGdldENvdW50RnJvbVNlcnZlcihlKSB7XG4gICAgcmV0dXJuIGdldEFnZ3JlZ2F0ZUZyb21TZXJ2ZXIoZSwge1xuICAgICAgICBjb3VudDogY291bnQoKVxuICAgIH0pO1xufVxuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIHNwZWNpZmllZCBhZ2dyZWdhdGlvbnMgb3ZlciB0aGUgZG9jdW1lbnRzIGluIHRoZSByZXN1bHRcbiAqIHNldCBvZiB0aGUgZ2l2ZW4gcXVlcnkgd2l0aG91dCBhY3R1YWxseSBkb3dubG9hZGluZyB0aGUgZG9jdW1lbnRzLlxuICpcbiAqIFVzaW5nIHRoaXMgZnVuY3Rpb24gdG8gcGVyZm9ybSBhZ2dyZWdhdGlvbnMgaXMgZWZmaWNpZW50IGJlY2F1c2Ugb25seSB0aGVcbiAqIGZpbmFsIGFnZ3JlZ2F0aW9uIHZhbHVlcywgbm90IHRoZSBkb2N1bWVudHMnIGRhdGEsIGFyZSBkb3dubG9hZGVkLiBUaGlzXG4gKiBmdW5jdGlvbiBjYW4gcGVyZm9ybSBhZ2dyZWdhdGlvbnMgb2YgdGhlIGRvY3VtZW50cyBpbiBjYXNlcyB3aGVyZSB0aGUgcmVzdWx0XG4gKiBzZXQgaXMgcHJvaGliaXRpdmVseSBsYXJnZSB0byBkb3dubG9hZCBlbnRpcmVseSAodGhvdXNhbmRzIG9mIGRvY3VtZW50cykuXG4gKlxuICogVGhlIHJlc3VsdCByZWNlaXZlZCBmcm9tIHRoZSBzZXJ2ZXIgaXMgcHJlc2VudGVkLCB1bmFsdGVyZWQsIHdpdGhvdXRcbiAqIGNvbnNpZGVyaW5nIGFueSBsb2NhbCBzdGF0ZS4gVGhhdCBpcywgZG9jdW1lbnRzIGluIHRoZSBsb2NhbCBjYWNoZSBhcmUgbm90XG4gKiB0YWtlbiBpbnRvIGNvbnNpZGVyYXRpb24sIG5laXRoZXIgYXJlIGxvY2FsIG1vZGlmaWNhdGlvbnMgbm90IHlldFxuICogc3luY2hyb25pemVkIHdpdGggdGhlIHNlcnZlci4gUHJldmlvdXNseS1kb3dubG9hZGVkIHJlc3VsdHMsIGlmIGFueSwgYXJlIG5vdFxuICogdXNlZC4gRXZlcnkgaW52b2NhdGlvbiBvZiB0aGlzIGZ1bmN0aW9uIG5lY2Vzc2FyaWx5IGludm9sdmVzIGEgcm91bmQgdHJpcCB0b1xuICogdGhlIHNlcnZlci5cbiAqXG4gKiBAcGFyYW0gcXVlcnkgVGhlIHF1ZXJ5IHdob3NlIHJlc3VsdCBzZXQgaXMgYWdncmVnYXRlZCBvdmVyLlxuICogQHBhcmFtIGFnZ3JlZ2F0ZVNwZWMgQW4gYEFnZ3JlZ2F0ZVNwZWNgIG9iamVjdCB0aGF0IHNwZWNpZmllcyB0aGUgYWdncmVnYXRlc1xuICogdG8gcGVyZm9ybSBvdmVyIHRoZSByZXN1bHQgc2V0LiBUaGUgQWdncmVnYXRlU3BlYyBzcGVjaWZpZXMgYWxpYXNlcyBmb3IgZWFjaFxuICogYWdncmVnYXRlLCB3aGljaCBjYW4gYmUgdXNlZCB0byByZXRyaWV2ZSB0aGUgYWdncmVnYXRlIHJlc3VsdC5cbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBhZ2dyZWdhdGVTbmFwc2hvdCA9IGF3YWl0IGdldEFnZ3JlZ2F0ZUZyb21TZXJ2ZXIocXVlcnksIHtcbiAqICAgY291bnRPZkRvY3M6IGNvdW50KCksXG4gKiAgIHRvdGFsSG91cnM6IHN1bSgnaG91cnMnKSxcbiAqICAgYXZlcmFnZVNjb3JlOiBhdmVyYWdlKCdzY29yZScpXG4gKiB9KTtcbiAqXG4gKiBjb25zdCBjb3VudE9mRG9jczogbnVtYmVyID0gYWdncmVnYXRlU25hcHNob3QuZGF0YSgpLmNvdW50T2ZEb2NzO1xuICogY29uc3QgdG90YWxIb3VyczogbnVtYmVyID0gYWdncmVnYXRlU25hcHNob3QuZGF0YSgpLnRvdGFsSG91cnM7XG4gKiBjb25zdCBhdmVyYWdlU2NvcmU6IG51bWJlciB8IG51bGwgPSBhZ2dyZWdhdGVTbmFwc2hvdC5kYXRhKCkuYXZlcmFnZVNjb3JlO1xuICogYGBgXG4gKi8gZnVuY3Rpb24gZ2V0QWdncmVnYXRlRnJvbVNlcnZlcihlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9jYXN0KGUuZmlyZXN0b3JlLCBGaXJlc3RvcmUpLCByID0gZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZChuKSwgaSA9IF9fUFJJVkFURV9tYXBUb0FycmF5KHQsICgoZSwgdCkgPT4gbmV3IF9fUFJJVkFURV9BZ2dyZWdhdGVJbXBsKHQsIGUuYWdncmVnYXRlVHlwZSwgZS5faW50ZXJuYWxGaWVsZFBhdGgpKSk7XG4gICAgLy8gUnVuIHRoZSBhZ2dyZWdhdGlvbiBhbmQgY29udmVydCB0aGUgcmVzdWx0c1xuICAgIHJldHVybiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50UnVuQWdncmVnYXRlUXVlcnkociwgZS5fcXVlcnksIGkpLnRoZW4oKHQgPT4gXG4gICAgLyoqXG4gKiBDb252ZXJ0cyB0aGUgY29yZSBhZ2dyZWdhdGlvbiByZXN1bHQgdG8gYW4gYEFnZ3JlZ2F0ZVF1ZXJ5U25hcHNob3RgXG4gKiB0aGF0IGNhbiBiZSByZXR1cm5lZCB0byB0aGUgY29uc3VtZXIuXG4gKiBAcGFyYW0gcXVlcnlcbiAqIEBwYXJhbSBhZ2dyZWdhdGVSZXN1bHQgQ29yZSBhZ2dyZWdhdGlvbiByZXN1bHRcbiAqIEBpbnRlcm5hbFxuICovXG4gICAgZnVuY3Rpb24gX19QUklWQVRFX2NvbnZlcnRUb0FnZ3JlZ2F0ZVF1ZXJ5U25hcHNob3QoZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gbmV3IF9fUFJJVkFURV9FeHBVc2VyRGF0YVdyaXRlcihlKSwgaSA9IG5ldyBBZ2dyZWdhdGVRdWVyeVNuYXBzaG90KHQsIHIsIG4pO1xuICAgICAgICByZXR1cm4gaTtcbiAgICB9XG4gICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKG4sIGUsIHQpKSk7XG59XG5cbmNsYXNzIF9fUFJJVkFURV9NZW1vcnlMb2NhbENhY2hlSW1wbCB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLmtpbmQgPSBcIm1lbW9yeVwiLCB0aGlzLl9vbmxpbmVDb21wb25lbnRQcm92aWRlciA9IE9ubGluZUNvbXBvbmVudFByb3ZpZGVyLnByb3ZpZGVyLCBcbiAgICAgICAgdGhpcy5fb2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyID0gZT8uZ2FyYmFnZUNvbGxlY3RvciA/IGUuZ2FyYmFnZUNvbGxlY3Rvci5fb2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyIDoge1xuICAgICAgICAgICAgYnVpbGQ6ICgpID0+IG5ldyBfX1BSSVZBVEVfTHJ1R2NNZW1vcnlPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIodm9pZCAwKVxuICAgICAgICB9O1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBraW5kOiB0aGlzLmtpbmRcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9QZXJzaXN0ZW50TG9jYWxDYWNoZUltcGwge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgbGV0IHQ7XG4gICAgICAgIHRoaXMua2luZCA9IFwicGVyc2lzdGVudFwiLCBlPy50YWJNYW5hZ2VyID8gKGUudGFiTWFuYWdlci5faW5pdGlhbGl6ZShlKSwgdCA9IGUudGFiTWFuYWdlcikgOiAodCA9IHBlcnNpc3RlbnRTaW5nbGVUYWJNYW5hZ2VyKHZvaWQgMCksIFxuICAgICAgICB0Ll9pbml0aWFsaXplKGUpKSwgdGhpcy5fb25saW5lQ29tcG9uZW50UHJvdmlkZXIgPSB0Ll9vbmxpbmVDb21wb25lbnRQcm92aWRlciwgdGhpcy5fb2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyID0gdC5fb2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBraW5kOiB0aGlzLmtpbmRcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9NZW1vcnlFYWdlckdhcmJhZ2VDb2xsZWN0b3JJbXBsIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5raW5kID0gXCJtZW1vcnlFYWdlclwiLCB0aGlzLl9vZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIgPSBfX1BSSVZBVEVfTWVtb3J5T2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyLnByb3ZpZGVyO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBraW5kOiB0aGlzLmtpbmRcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9NZW1vcnlMcnVHYXJiYWdlQ29sbGVjdG9ySW1wbCB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLmtpbmQgPSBcIm1lbW9yeUxydVwiLCB0aGlzLl9vZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIgPSB7XG4gICAgICAgICAgICBidWlsZDogKCkgPT4gbmV3IF9fUFJJVkFURV9McnVHY01lbW9yeU9mZmxpbmVDb21wb25lbnRQcm92aWRlcihlKVxuICAgICAgICB9O1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBraW5kOiB0aGlzLmtpbmRcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBgTWVtb3J5RWFnZXJHYXJiYWdlQ29sbGVjdG9yYC4gVGhpcyBpcyBhbHNvIHRoZVxuICogZGVmYXVsdCBnYXJiYWdlIGNvbGxlY3RvciB1bmxlc3MgaXQgaXMgZXhwbGljaXRseSBzcGVjaWZpZWQgb3RoZXJ3aXNlLlxuICovIGZ1bmN0aW9uIG1lbW9yeUVhZ2VyR2FyYmFnZUNvbGxlY3RvcigpIHtcbiAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9NZW1vcnlFYWdlckdhcmJhZ2VDb2xsZWN0b3JJbXBsO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgYE1lbW9yeUxydUdhcmJhZ2VDb2xsZWN0b3JgLlxuICpcbiAqIEEgdGFyZ2V0IHNpemUgY2FuIGJlIHNwZWNpZmllZCBhcyBwYXJ0IG9mIHRoZSBzZXR0aW5nIHBhcmFtZXRlci4gVGhlXG4gKiBjb2xsZWN0b3Igd2lsbCBzdGFydCBkZWxldGluZyBkb2N1bWVudHMgb25jZSB0aGUgY2FjaGUgc2l6ZSBleGNlZWRzXG4gKiB0aGUgZ2l2ZW4gc2l6ZS4gVGhlIGRlZmF1bHQgY2FjaGUgc2l6ZSBpcyA0ME1CICg0MCAqIDEwMjQgKiAxMDI0IGJ5dGVzKS5cbiAqLyBmdW5jdGlvbiBtZW1vcnlMcnVHYXJiYWdlQ29sbGVjdG9yKGUpIHtcbiAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9NZW1vcnlMcnVHYXJiYWdlQ29sbGVjdG9ySW1wbChlPy5jYWNoZVNpemVCeXRlcyk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBgTWVtb3J5TG9jYWxDYWNoZWAuIFRoZSBpbnN0YW5jZSBjYW4gYmUgc2V0IHRvXG4gKiBgRmlyZXN0b3JlU2V0dGluZ3MuY2FjaGVgIHRvIHRlbGwgdGhlIFNESyB3aGljaCBjYWNoZSBsYXllciB0byB1c2UuXG4gKi8gZnVuY3Rpb24gbWVtb3J5TG9jYWxDYWNoZShlKSB7XG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfTWVtb3J5TG9jYWxDYWNoZUltcGwoZSk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBgUGVyc2lzdGVudExvY2FsQ2FjaGVgLiBUaGUgaW5zdGFuY2UgY2FuIGJlIHNldCB0b1xuICogYEZpcmVzdG9yZVNldHRpbmdzLmNhY2hlYCB0byB0ZWxsIHRoZSBTREsgd2hpY2ggY2FjaGUgbGF5ZXIgdG8gdXNlLlxuICpcbiAqIFBlcnNpc3RlbnQgY2FjaGUgY2Fubm90IGJlIHVzZWQgaW4gYSBOb2RlLmpzIGVudmlyb25tZW50LlxuICovIGZ1bmN0aW9uIHBlcnNpc3RlbnRMb2NhbENhY2hlKGUpIHtcbiAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9QZXJzaXN0ZW50TG9jYWxDYWNoZUltcGwoZSk7XG59XG5cbmNsYXNzIF9fUFJJVkFURV9TaW5nbGVUYWJNYW5hZ2VySW1wbCB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLmZvcmNlT3duZXJzaGlwID0gZSwgdGhpcy5raW5kID0gXCJwZXJzaXN0ZW50U2luZ2xlVGFiXCI7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGtpbmQ6IHRoaXMua2luZFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi8gICAgX2luaXRpYWxpemUoZSkge1xuICAgICAgICB0aGlzLl9vbmxpbmVDb21wb25lbnRQcm92aWRlciA9IE9ubGluZUNvbXBvbmVudFByb3ZpZGVyLnByb3ZpZGVyLCB0aGlzLl9vZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIgPSB7XG4gICAgICAgICAgICBidWlsZDogdCA9PiBuZXcgX19QUklWQVRFX0luZGV4ZWREYk9mZmxpbmVDb21wb25lbnRQcm92aWRlcih0LCBlPy5jYWNoZVNpemVCeXRlcywgdGhpcy5mb3JjZU93bmVyc2hpcClcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9NdWx0aVRhYk1hbmFnZXJJbXBsIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5raW5kID0gXCJQZXJzaXN0ZW50TXVsdGlwbGVUYWJcIjtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAga2luZDogdGhpcy5raW5kXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqLyAgICBfaW5pdGlhbGl6ZShlKSB7XG4gICAgICAgIHRoaXMuX29ubGluZUNvbXBvbmVudFByb3ZpZGVyID0gT25saW5lQ29tcG9uZW50UHJvdmlkZXIucHJvdmlkZXIsIHRoaXMuX29mZmxpbmVDb21wb25lbnRQcm92aWRlciA9IHtcbiAgICAgICAgICAgIGJ1aWxkOiB0ID0+IG5ldyBfX1BSSVZBVEVfTXVsdGlUYWJPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIodCwgZT8uY2FjaGVTaXplQnl0ZXMpXG4gICAgICAgIH07XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgYFBlcnNpc3RlbnRTaW5nbGVUYWJNYW5hZ2VyYC5cbiAqXG4gKiBAcGFyYW0gc2V0dGluZ3MgQ29uZmlndXJlcyB0aGUgY3JlYXRlZCB0YWIgbWFuYWdlci5cbiAqLyBmdW5jdGlvbiBwZXJzaXN0ZW50U2luZ2xlVGFiTWFuYWdlcihlKSB7XG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfU2luZ2xlVGFiTWFuYWdlckltcGwoZT8uZm9yY2VPd25lcnNoaXApO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgYFBlcnNpc3RlbnRNdWx0aXBsZVRhYk1hbmFnZXJgLlxuICovIGZ1bmN0aW9uIHBlcnNpc3RlbnRNdWx0aXBsZVRhYk1hbmFnZXIoKSB7XG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfTXVsdGlUYWJNYW5hZ2VySW1wbDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgSW4gPSB7XG4gICAgbWF4QXR0ZW1wdHM6IDVcbn07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgd3JpdGUgYmF0Y2gsIHVzZWQgdG8gcGVyZm9ybSBtdWx0aXBsZSB3cml0ZXMgYXMgYSBzaW5nbGUgYXRvbWljIHVuaXQuXG4gKlxuICogQSBgV3JpdGVCYXRjaGAgb2JqZWN0IGNhbiBiZSBhY3F1aXJlZCBieSBjYWxsaW5nIHtAbGluayB3cml0ZUJhdGNofS4gSXRcbiAqIHByb3ZpZGVzIG1ldGhvZHMgZm9yIGFkZGluZyB3cml0ZXMgdG8gdGhlIHdyaXRlIGJhdGNoLiBOb25lIG9mIHRoZSB3cml0ZXNcbiAqIHdpbGwgYmUgY29tbWl0dGVkIChvciB2aXNpYmxlIGxvY2FsbHkpIHVudGlsIHtAbGluayBXcml0ZUJhdGNoLmNvbW1pdH0gaXNcbiAqIGNhbGxlZC5cbiAqL1xuY2xhc3MgV3JpdGVCYXRjaCB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZSA9IGUsIHRoaXMuX2NvbW1pdEhhbmRsZXIgPSB0LCB0aGlzLl9tdXRhdGlvbnMgPSBbXSwgdGhpcy5fY29tbWl0dGVkID0gITEsIFxuICAgICAgICB0aGlzLl9kYXRhUmVhZGVyID0gX19QUklWQVRFX25ld1VzZXJEYXRhUmVhZGVyKGUpO1xuICAgIH1cbiAgICBzZXQoZSwgdCwgbikge1xuICAgICAgICB0aGlzLl92ZXJpZnlOb3RDb21taXR0ZWQoKTtcbiAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV92YWxpZGF0ZVJlZmVyZW5jZShlLCB0aGlzLl9maXJlc3RvcmUpLCBpID0gX19QUklWQVRFX2FwcGx5RmlyZXN0b3JlRGF0YUNvbnZlcnRlcihyLmNvbnZlcnRlciwgdCwgbiksIHMgPSBfX1BSSVZBVEVfcGFyc2VTZXREYXRhKHRoaXMuX2RhdGFSZWFkZXIsIFwiV3JpdGVCYXRjaC5zZXRcIiwgci5fa2V5LCBpLCBudWxsICE9PSByLmNvbnZlcnRlciwgbik7XG4gICAgICAgIHJldHVybiB0aGlzLl9tdXRhdGlvbnMucHVzaChzLnRvTXV0YXRpb24oci5fa2V5LCBQcmVjb25kaXRpb24ubm9uZSgpKSksIHRoaXM7XG4gICAgfVxuICAgIHVwZGF0ZShlLCB0LCBuLCAuLi5yKSB7XG4gICAgICAgIHRoaXMuX3ZlcmlmeU5vdENvbW1pdHRlZCgpO1xuICAgICAgICBjb25zdCBpID0gX19QUklWQVRFX3ZhbGlkYXRlUmVmZXJlbmNlKGUsIHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIC8vIEZvciBDb21wYXQgdHlwZXMsIHdlIGhhdmUgdG8gXCJleHRyYWN0XCIgdGhlIHVuZGVybHlpbmcgdHlwZXMgYmVmb3JlXG4gICAgICAgIC8vIHBlcmZvcm1pbmcgdmFsaWRhdGlvbi5cbiAgICAgICAgICAgICAgICBsZXQgcztcbiAgICAgICAgcmV0dXJuIHMgPSBcInN0cmluZ1wiID09IHR5cGVvZiAodCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSkgfHwgdCBpbnN0YW5jZW9mIEZpZWxkUGF0aCA/IF9fUFJJVkFURV9wYXJzZVVwZGF0ZVZhcmFyZ3ModGhpcy5fZGF0YVJlYWRlciwgXCJXcml0ZUJhdGNoLnVwZGF0ZVwiLCBpLl9rZXksIHQsIG4sIHIpIDogX19QUklWQVRFX3BhcnNlVXBkYXRlRGF0YSh0aGlzLl9kYXRhUmVhZGVyLCBcIldyaXRlQmF0Y2gudXBkYXRlXCIsIGkuX2tleSwgdCksIFxuICAgICAgICB0aGlzLl9tdXRhdGlvbnMucHVzaChzLnRvTXV0YXRpb24oaS5fa2V5LCBQcmVjb25kaXRpb24uZXhpc3RzKCEwKSkpLCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGVzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGUgcHJvdmlkZWQge0BsaW5rIERvY3VtZW50UmVmZXJlbmNlfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudFJlZiAtIEEgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCB0byBiZSBkZWxldGVkLlxuICAgICAqIEByZXR1cm5zIFRoaXMgYFdyaXRlQmF0Y2hgIGluc3RhbmNlLiBVc2VkIGZvciBjaGFpbmluZyBtZXRob2QgY2FsbHMuXG4gICAgICovICAgIGRlbGV0ZShlKSB7XG4gICAgICAgIHRoaXMuX3ZlcmlmeU5vdENvbW1pdHRlZCgpO1xuICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX3ZhbGlkYXRlUmVmZXJlbmNlKGUsIHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9tdXRhdGlvbnMgPSB0aGlzLl9tdXRhdGlvbnMuY29uY2F0KG5ldyBfX1BSSVZBVEVfRGVsZXRlTXV0YXRpb24odC5fa2V5LCBQcmVjb25kaXRpb24ubm9uZSgpKSksIFxuICAgICAgICB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21taXRzIGFsbCBvZiB0aGUgd3JpdGVzIGluIHRoaXMgd3JpdGUgYmF0Y2ggYXMgYSBzaW5nbGUgYXRvbWljIHVuaXQuXG4gICAgICpcbiAgICAgKiBUaGUgcmVzdWx0IG9mIHRoZXNlIHdyaXRlcyB3aWxsIG9ubHkgYmUgcmVmbGVjdGVkIGluIGRvY3VtZW50IHJlYWRzIHRoYXRcbiAgICAgKiBvY2N1ciBhZnRlciB0aGUgcmV0dXJuZWQgcHJvbWlzZSByZXNvbHZlcy4gSWYgdGhlIGNsaWVudCBpcyBvZmZsaW5lLCB0aGVcbiAgICAgKiB3cml0ZSBmYWlscy4gSWYgeW91IHdvdWxkIGxpa2UgdG8gc2VlIGxvY2FsIG1vZGlmaWNhdGlvbnMgb3IgYnVmZmVyIHdyaXRlc1xuICAgICAqIHVudGlsIHRoZSBjbGllbnQgaXMgb25saW5lLCB1c2UgdGhlIGZ1bGwgRmlyZXN0b3JlIFNESy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgYFByb21pc2VgIHJlc29sdmVkIG9uY2UgYWxsIG9mIHRoZSB3cml0ZXMgaW4gdGhlIGJhdGNoIGhhdmUgYmVlblxuICAgICAqIHN1Y2Nlc3NmdWxseSB3cml0dGVuIHRvIHRoZSBiYWNrZW5kIGFzIGFuIGF0b21pYyB1bml0IChub3RlIHRoYXQgaXQgd29uJ3RcbiAgICAgKiByZXNvbHZlIHdoaWxlIHlvdSdyZSBvZmZsaW5lKS5cbiAgICAgKi8gICAgY29tbWl0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdmVyaWZ5Tm90Q29tbWl0dGVkKCksIHRoaXMuX2NvbW1pdHRlZCA9ICEwLCB0aGlzLl9tdXRhdGlvbnMubGVuZ3RoID4gMCA/IHRoaXMuX2NvbW1pdEhhbmRsZXIodGhpcy5fbXV0YXRpb25zKSA6IFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBfdmVyaWZ5Tm90Q29tbWl0dGVkKCkge1xuICAgICAgICBpZiAodGhpcy5fY29tbWl0dGVkKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoTi5GQUlMRURfUFJFQ09ORElUSU9OLCBcIkEgd3JpdGUgYmF0Y2ggY2FuIG5vIGxvbmdlciBiZSB1c2VkIGFmdGVyIGNvbW1pdCgpIGhhcyBiZWVuIGNhbGxlZC5cIik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdmFsaWRhdGVSZWZlcmVuY2UoZSwgdCkge1xuICAgIGlmICgoZSA9IGdldE1vZHVsYXJJbnN0YW5jZShlKSkuZmlyZXN0b3JlICE9PSB0KSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoTi5JTlZBTElEX0FSR1VNRU5ULCBcIlByb3ZpZGVkIGRvY3VtZW50IHJlZmVyZW5jZSBpcyBmcm9tIGEgZGlmZmVyZW50IEZpcmVzdG9yZSBpbnN0YW5jZS5cIik7XG4gICAgcmV0dXJuIGU7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBUT0RPKG1yc2NobWlkdCkgQ29uc2lkZXIgdXNpbmcgYEJhc2VUcmFuc2FjdGlvbmAgYXMgdGhlIGJhc2UgY2xhc3MgaW4gdGhlXG4vLyBsZWdhY3kgU0RLLlxuLyoqXG4gKiBBIHJlZmVyZW5jZSB0byBhIHRyYW5zYWN0aW9uLlxuICpcbiAqIFRoZSBgVHJhbnNhY3Rpb25gIG9iamVjdCBwYXNzZWQgdG8gYSB0cmFuc2FjdGlvbidzIGB1cGRhdGVGdW5jdGlvbmAgcHJvdmlkZXNcbiAqIHRoZSBtZXRob2RzIHRvIHJlYWQgYW5kIHdyaXRlIGRhdGEgd2l0aGluIHRoZSB0cmFuc2FjdGlvbiBjb250ZXh0LiBTZWVcbiAqIHtAbGluayBydW5UcmFuc2FjdGlvbn0uXG4gKi8gY2xhc3MgVHJhbnNhY3Rpb24kMSB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZSA9IGUsIHRoaXMuX3RyYW5zYWN0aW9uID0gdCwgdGhpcy5fZGF0YVJlYWRlciA9IF9fUFJJVkFURV9uZXdVc2VyRGF0YVJlYWRlcihlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVhZHMgdGhlIGRvY3VtZW50IHJlZmVyZW5jZWQgYnkgdGhlIHByb3ZpZGVkIHtAbGluayBEb2N1bWVudFJlZmVyZW5jZX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRSZWYgLSBBIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgdG8gYmUgcmVhZC5cbiAgICAgKiBAcmV0dXJucyBBIGBEb2N1bWVudFNuYXBzaG90YCB3aXRoIHRoZSByZWFkIGRhdGEuXG4gICAgICovICAgIGdldChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfdmFsaWRhdGVSZWZlcmVuY2UoZSwgdGhpcy5fZmlyZXN0b3JlKSwgbiA9IG5ldyBfX1BSSVZBVEVfTGl0ZVVzZXJEYXRhV3JpdGVyKHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIHJldHVybiB0aGlzLl90cmFuc2FjdGlvbi5sb29rdXAoWyB0Ll9rZXkgXSkudGhlbigoZSA9PiB7XG4gICAgICAgICAgICBpZiAoIWUgfHwgMSAhPT0gZS5sZW5ndGgpIHJldHVybiBmYWlsKDI0MDQxKTtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBlWzBdO1xuICAgICAgICAgICAgaWYgKHIuaXNGb3VuZERvY3VtZW50KCkpIHJldHVybiBuZXcgRG9jdW1lbnRTbmFwc2hvdCQxKHRoaXMuX2ZpcmVzdG9yZSwgbiwgci5rZXksIHIsIHQuY29udmVydGVyKTtcbiAgICAgICAgICAgIGlmIChyLmlzTm9Eb2N1bWVudCgpKSByZXR1cm4gbmV3IERvY3VtZW50U25hcHNob3QkMSh0aGlzLl9maXJlc3RvcmUsIG4sIHQuX2tleSwgbnVsbCwgdC5jb252ZXJ0ZXIpO1xuICAgICAgICAgICAgdGhyb3cgZmFpbCgxODQzMywge1xuICAgICAgICAgICAgICAgIGRvYzogclxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc2V0KGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV92YWxpZGF0ZVJlZmVyZW5jZShlLCB0aGlzLl9maXJlc3RvcmUpLCBpID0gX19QUklWQVRFX2FwcGx5RmlyZXN0b3JlRGF0YUNvbnZlcnRlcihyLmNvbnZlcnRlciwgdCwgbiksIHMgPSBfX1BSSVZBVEVfcGFyc2VTZXREYXRhKHRoaXMuX2RhdGFSZWFkZXIsIFwiVHJhbnNhY3Rpb24uc2V0XCIsIHIuX2tleSwgaSwgbnVsbCAhPT0gci5jb252ZXJ0ZXIsIG4pO1xuICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnNhY3Rpb24uc2V0KHIuX2tleSwgcyksIHRoaXM7XG4gICAgfVxuICAgIHVwZGF0ZShlLCB0LCBuLCAuLi5yKSB7XG4gICAgICAgIGNvbnN0IGkgPSBfX1BSSVZBVEVfdmFsaWRhdGVSZWZlcmVuY2UoZSwgdGhpcy5fZmlyZXN0b3JlKTtcbiAgICAgICAgLy8gRm9yIENvbXBhdCB0eXBlcywgd2UgaGF2ZSB0byBcImV4dHJhY3RcIiB0aGUgdW5kZXJseWluZyB0eXBlcyBiZWZvcmVcbiAgICAgICAgLy8gcGVyZm9ybWluZyB2YWxpZGF0aW9uLlxuICAgICAgICAgICAgICAgIGxldCBzO1xuICAgICAgICByZXR1cm4gcyA9IFwic3RyaW5nXCIgPT0gdHlwZW9mICh0ID0gZ2V0TW9kdWxhckluc3RhbmNlKHQpKSB8fCB0IGluc3RhbmNlb2YgRmllbGRQYXRoID8gX19QUklWQVRFX3BhcnNlVXBkYXRlVmFyYXJncyh0aGlzLl9kYXRhUmVhZGVyLCBcIlRyYW5zYWN0aW9uLnVwZGF0ZVwiLCBpLl9rZXksIHQsIG4sIHIpIDogX19QUklWQVRFX3BhcnNlVXBkYXRlRGF0YSh0aGlzLl9kYXRhUmVhZGVyLCBcIlRyYW5zYWN0aW9uLnVwZGF0ZVwiLCBpLl9rZXksIHQpLCBcbiAgICAgICAgdGhpcy5fdHJhbnNhY3Rpb24udXBkYXRlKGkuX2tleSwgcyksIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlbGV0ZXMgdGhlIGRvY3VtZW50IHJlZmVycmVkIHRvIGJ5IHRoZSBwcm92aWRlZCB7QGxpbmsgRG9jdW1lbnRSZWZlcmVuY2V9LlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50UmVmIC0gQSByZWZlcmVuY2UgdG8gdGhlIGRvY3VtZW50IHRvIGJlIGRlbGV0ZWQuXG4gICAgICogQHJldHVybnMgVGhpcyBgVHJhbnNhY3Rpb25gIGluc3RhbmNlLiBVc2VkIGZvciBjaGFpbmluZyBtZXRob2QgY2FsbHMuXG4gICAgICovICAgIGRlbGV0ZShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfdmFsaWRhdGVSZWZlcmVuY2UoZSwgdGhpcy5fZmlyZXN0b3JlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zYWN0aW9uLmRlbGV0ZSh0Ll9rZXkpLCB0aGlzO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSByZWZlcmVuY2UgdG8gYSB0cmFuc2FjdGlvbi5cbiAqXG4gKiBUaGUgYFRyYW5zYWN0aW9uYCBvYmplY3QgcGFzc2VkIHRvIGEgdHJhbnNhY3Rpb24ncyBgdXBkYXRlRnVuY3Rpb25gIHByb3ZpZGVzXG4gKiB0aGUgbWV0aG9kcyB0byByZWFkIGFuZCB3cml0ZSBkYXRhIHdpdGhpbiB0aGUgdHJhbnNhY3Rpb24gY29udGV4dC4gU2VlXG4gKiB7QGxpbmsgcnVuVHJhbnNhY3Rpb259LlxuICovIGNsYXNzIFRyYW5zYWN0aW9uIGV4dGVuZHMgVHJhbnNhY3Rpb24kMSB7XG4gICAgLy8gVGhpcyBjbGFzcyBpbXBsZW1lbnRzIHRoZSBzYW1lIGxvZ2ljIGFzIHRoZSBUcmFuc2FjdGlvbiBBUEkgaW4gdGhlIExpdGUgU0RLXG4gICAgLy8gYnV0IGlzIHN1YmNsYXNzZWQgaW4gb3JkZXIgdG8gcmV0dXJuIGl0cyBvd24gRG9jdW1lbnRTbmFwc2hvdCB0eXBlcy5cbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgc3VwZXIoZSwgdCksIHRoaXMuX2ZpcmVzdG9yZSA9IGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYWRzIHRoZSBkb2N1bWVudCByZWZlcmVuY2VkIGJ5IHRoZSBwcm92aWRlZCB7QGxpbmsgRG9jdW1lbnRSZWZlcmVuY2V9LlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50UmVmIC0gQSByZWZlcmVuY2UgdG8gdGhlIGRvY3VtZW50IHRvIGJlIHJlYWQuXG4gICAgICogQHJldHVybnMgQSBgRG9jdW1lbnRTbmFwc2hvdGAgd2l0aCB0aGUgcmVhZCBkYXRhLlxuICAgICAqLyAgICBnZXQoZSkge1xuICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX3ZhbGlkYXRlUmVmZXJlbmNlKGUsIHRoaXMuX2ZpcmVzdG9yZSksIG4gPSBuZXcgX19QUklWQVRFX0V4cFVzZXJEYXRhV3JpdGVyKHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIHJldHVybiBzdXBlci5nZXQoZSkudGhlbigoZSA9PiBuZXcgRG9jdW1lbnRTbmFwc2hvdCh0aGlzLl9maXJlc3RvcmUsIG4sIHQuX2tleSwgZS5fZG9jdW1lbnQsIG5ldyBTbmFwc2hvdE1ldGFkYXRhKFxuICAgICAgICAvKiBoYXNQZW5kaW5nV3JpdGVzPSAqLyAhMSwgXG4gICAgICAgIC8qIGZyb21DYWNoZT0gKi8gITEpLCB0LmNvbnZlcnRlcikpKTtcbiAgICB9XG59XG5cbi8qKlxuICogRXhlY3V0ZXMgdGhlIGdpdmVuIGB1cGRhdGVGdW5jdGlvbmAgYW5kIHRoZW4gYXR0ZW1wdHMgdG8gY29tbWl0IHRoZSBjaGFuZ2VzXG4gKiBhcHBsaWVkIHdpdGhpbiB0aGUgdHJhbnNhY3Rpb24uIElmIGFueSBkb2N1bWVudCByZWFkIHdpdGhpbiB0aGUgdHJhbnNhY3Rpb25cbiAqIGhhcyBjaGFuZ2VkLCBDbG91ZCBGaXJlc3RvcmUgcmV0cmllcyB0aGUgYHVwZGF0ZUZ1bmN0aW9uYC4gSWYgaXQgZmFpbHMgdG9cbiAqIGNvbW1pdCBhZnRlciA1IGF0dGVtcHRzLCB0aGUgdHJhbnNhY3Rpb24gZmFpbHMuXG4gKlxuICogVGhlIG1heGltdW0gbnVtYmVyIG9mIHdyaXRlcyBhbGxvd2VkIGluIGEgc2luZ2xlIHRyYW5zYWN0aW9uIGlzIDUwMC5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gQSByZWZlcmVuY2UgdG8gdGhlIEZpcmVzdG9yZSBkYXRhYmFzZSB0byBydW4gdGhpc1xuICogdHJhbnNhY3Rpb24gYWdhaW5zdC5cbiAqIEBwYXJhbSB1cGRhdGVGdW5jdGlvbiAtIFRoZSBmdW5jdGlvbiB0byBleGVjdXRlIHdpdGhpbiB0aGUgdHJhbnNhY3Rpb25cbiAqIGNvbnRleHQuXG4gKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9wdGlvbnMgb2JqZWN0IHRvIGNvbmZpZ3VyZSBtYXhpbXVtIG51bWJlciBvZiBhdHRlbXB0cyB0b1xuICogY29tbWl0LlxuICogQHJldHVybnMgSWYgdGhlIHRyYW5zYWN0aW9uIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkgb3Igd2FzIGV4cGxpY2l0bHkgYWJvcnRlZFxuICogKHRoZSBgdXBkYXRlRnVuY3Rpb25gIHJldHVybmVkIGEgZmFpbGVkIHByb21pc2UpLCB0aGUgcHJvbWlzZSByZXR1cm5lZCBieSB0aGVcbiAqIGB1cGRhdGVGdW5jdGlvbiBgaXMgcmV0dXJuZWQgaGVyZS4gT3RoZXJ3aXNlLCBpZiB0aGUgdHJhbnNhY3Rpb24gZmFpbGVkLCBhXG4gKiByZWplY3RlZCBwcm9taXNlIHdpdGggdGhlIGNvcnJlc3BvbmRpbmcgZmFpbHVyZSBlcnJvciBpcyByZXR1cm5lZC5cbiAqLyBmdW5jdGlvbiBydW5UcmFuc2FjdGlvbihlLCB0LCBuKSB7XG4gICAgZSA9IF9fUFJJVkFURV9jYXN0KGUsIEZpcmVzdG9yZSk7XG4gICAgY29uc3QgciA9IHtcbiAgICAgICAgLi4uSW4sXG4gICAgICAgIC4uLm5cbiAgICB9O1xuICAgICFmdW5jdGlvbiBfX1BSSVZBVEVfdmFsaWRhdGVUcmFuc2FjdGlvbk9wdGlvbnMoZSkge1xuICAgICAgICBpZiAoZS5tYXhBdHRlbXB0cyA8IDEpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihOLklOVkFMSURfQVJHVU1FTlQsIFwiTWF4IGF0dGVtcHRzIG11c3QgYmUgYXQgbGVhc3QgMVwiKTtcbiAgICB9KHIpO1xuICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50VHJhbnNhY3Rpb24oZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gbmV3IF9fUFJJVkFURV9EZWZlcnJlZDtcbiAgICAgICAgcmV0dXJuIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gYXdhaXQgX19QUklWQVRFX2dldERhdGFzdG9yZShlKTtcbiAgICAgICAgICAgIG5ldyBfX1BSSVZBVEVfVHJhbnNhY3Rpb25SdW5uZXIoZS5hc3luY1F1ZXVlLCBpLCBuLCB0LCByKS5qdSgpO1xuICAgICAgICB9KSksIHIucHJvbWlzZTtcbiAgICB9KGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQoZSksIChuID0+IHQobmV3IFRyYW5zYWN0aW9uKGUsIG4pKSksIHIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIGEgc2VudGluZWwgZm9yIHVzZSB3aXRoIHtAbGluayBAZmlyZWJhc2UvZmlyZXN0b3JlL2xpdGUjKHVwZGF0ZURvYzoxKX0gb3JcbiAqIHtAbGluayBAZmlyZWJhc2UvZmlyZXN0b3JlL2xpdGUjKHNldERvYzoxKX0gd2l0aCBge21lcmdlOiB0cnVlfWAgdG8gbWFyayBhIGZpZWxkIGZvciBkZWxldGlvbi5cbiAqLyBmdW5jdGlvbiBkZWxldGVGaWVsZCgpIHtcbiAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9EZWxldGVGaWVsZFZhbHVlSW1wbChcImRlbGV0ZUZpZWxkXCIpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBzZW50aW5lbCB1c2VkIHdpdGgge0BsaW5rIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSMoc2V0RG9jOjEpfSBvciB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyh1cGRhdGVEb2M6MSl9IHRvXG4gKiBpbmNsdWRlIGEgc2VydmVyLWdlbmVyYXRlZCB0aW1lc3RhbXAgaW4gdGhlIHdyaXR0ZW4gZGF0YS5cbiAqLyBmdW5jdGlvbiBzZXJ2ZXJUaW1lc3RhbXAoKSB7XG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfU2VydmVyVGltZXN0YW1wRmllbGRWYWx1ZUltcGwoXCJzZXJ2ZXJUaW1lc3RhbXBcIik7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHNwZWNpYWwgdmFsdWUgdGhhdCBjYW4gYmUgdXNlZCB3aXRoIHtAbGluayBAZmlyZWJhc2UvZmlyZXN0b3JlL2xpdGUjKHNldERvYzoxKX0gb3Ige0BsaW5rXG4gKiBAZmlyZWJhc2UvZmlyZXN0b3JlL2xpdGUjKHVwZGF0ZURvYzoxKX0gdGhhdCB0ZWxscyB0aGUgc2VydmVyIHRvIHVuaW9uIHRoZSBnaXZlbiBlbGVtZW50cyB3aXRoIGFueSBhcnJheVxuICogdmFsdWUgdGhhdCBhbHJlYWR5IGV4aXN0cyBvbiB0aGUgc2VydmVyLiBFYWNoIHNwZWNpZmllZCBlbGVtZW50IHRoYXQgZG9lc24ndFxuICogYWxyZWFkeSBleGlzdCBpbiB0aGUgYXJyYXkgd2lsbCBiZSBhZGRlZCB0byB0aGUgZW5kLiBJZiB0aGUgZmllbGQgYmVpbmdcbiAqIG1vZGlmaWVkIGlzIG5vdCBhbHJlYWR5IGFuIGFycmF5IGl0IHdpbGwgYmUgb3ZlcndyaXR0ZW4gd2l0aCBhbiBhcnJheVxuICogY29udGFpbmluZyBleGFjdGx5IHRoZSBzcGVjaWZpZWQgZWxlbWVudHMuXG4gKlxuICogQHBhcmFtIGVsZW1lbnRzIC0gVGhlIGVsZW1lbnRzIHRvIHVuaW9uIGludG8gdGhlIGFycmF5LlxuICogQHJldHVybnMgVGhlIGBGaWVsZFZhbHVlYCBzZW50aW5lbCBmb3IgdXNlIGluIGEgY2FsbCB0byBgc2V0RG9jKClgIG9yXG4gKiBgdXBkYXRlRG9jKClgLlxuICovIGZ1bmN0aW9uIGFycmF5VW5pb24oLi4uZSkge1xuICAgIC8vIE5PVEU6IFdlIGRvbid0IGFjdHVhbGx5IHBhcnNlIHRoZSBkYXRhIHVudGlsIGl0J3MgdXNlZCBpbiBzZXQoKSBvclxuICAgIC8vIHVwZGF0ZSgpIHNpbmNlIHdlJ2QgbmVlZCB0aGUgRmlyZXN0b3JlIGluc3RhbmNlIHRvIGRvIHRoaXMuXG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfQXJyYXlVbmlvbkZpZWxkVmFsdWVJbXBsKFwiYXJyYXlVbmlvblwiLCBlKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc3BlY2lhbCB2YWx1ZSB0aGF0IGNhbiBiZSB1c2VkIHdpdGgge0BsaW5rIChzZXREb2M6MSl9IG9yIHtAbGlua1xuICogdXBkYXRlRG9jOjF9IHRoYXQgdGVsbHMgdGhlIHNlcnZlciB0byByZW1vdmUgdGhlIGdpdmVuIGVsZW1lbnRzIGZyb20gYW55XG4gKiBhcnJheSB2YWx1ZSB0aGF0IGFscmVhZHkgZXhpc3RzIG9uIHRoZSBzZXJ2ZXIuIEFsbCBpbnN0YW5jZXMgb2YgZWFjaCBlbGVtZW50XG4gKiBzcGVjaWZpZWQgd2lsbCBiZSByZW1vdmVkIGZyb20gdGhlIGFycmF5LiBJZiB0aGUgZmllbGQgYmVpbmcgbW9kaWZpZWQgaXMgbm90XG4gKiBhbHJlYWR5IGFuIGFycmF5IGl0IHdpbGwgYmUgb3ZlcndyaXR0ZW4gd2l0aCBhbiBlbXB0eSBhcnJheS5cbiAqXG4gKiBAcGFyYW0gZWxlbWVudHMgLSBUaGUgZWxlbWVudHMgdG8gcmVtb3ZlIGZyb20gdGhlIGFycmF5LlxuICogQHJldHVybnMgVGhlIGBGaWVsZFZhbHVlYCBzZW50aW5lbCBmb3IgdXNlIGluIGEgY2FsbCB0byBgc2V0RG9jKClgIG9yXG4gKiBgdXBkYXRlRG9jKClgXG4gKi8gZnVuY3Rpb24gYXJyYXlSZW1vdmUoLi4uZSkge1xuICAgIC8vIE5PVEU6IFdlIGRvbid0IGFjdHVhbGx5IHBhcnNlIHRoZSBkYXRhIHVudGlsIGl0J3MgdXNlZCBpbiBzZXQoKSBvclxuICAgIC8vIHVwZGF0ZSgpIHNpbmNlIHdlJ2QgbmVlZCB0aGUgRmlyZXN0b3JlIGluc3RhbmNlIHRvIGRvIHRoaXMuXG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfQXJyYXlSZW1vdmVGaWVsZFZhbHVlSW1wbChcImFycmF5UmVtb3ZlXCIsIGUpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBzcGVjaWFsIHZhbHVlIHRoYXQgY2FuIGJlIHVzZWQgd2l0aCB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyhzZXREb2M6MSl9IG9yIHtAbGlua1xuICogQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyh1cGRhdGVEb2M6MSl9IHRoYXQgdGVsbHMgdGhlIHNlcnZlciB0byBpbmNyZW1lbnQgdGhlIGZpZWxkJ3MgY3VycmVudCB2YWx1ZSBieVxuICogdGhlIGdpdmVuIHZhbHVlLlxuICpcbiAqIElmIGVpdGhlciB0aGUgb3BlcmFuZCBvciB0aGUgY3VycmVudCBmaWVsZCB2YWx1ZSB1c2VzIGZsb2F0aW5nIHBvaW50XG4gKiBwcmVjaXNpb24sIGFsbCBhcml0aG1ldGljIGZvbGxvd3MgSUVFRSA3NTQgc2VtYW50aWNzLiBJZiBib3RoIHZhbHVlcyBhcmVcbiAqIGludGVnZXJzLCB2YWx1ZXMgb3V0c2lkZSBvZiBKYXZhU2NyaXB0J3Mgc2FmZSBudW1iZXIgcmFuZ2VcbiAqIChgTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVJgIHRvIGBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUmApIGFyZSBhbHNvIHN1YmplY3QgdG9cbiAqIHByZWNpc2lvbiBsb3NzLiBGdXJ0aGVybW9yZSwgb25jZSBwcm9jZXNzZWQgYnkgdGhlIEZpcmVzdG9yZSBiYWNrZW5kLCBhbGxcbiAqIGludGVnZXIgb3BlcmF0aW9ucyBhcmUgY2FwcGVkIGJldHdlZW4gLTJeNjMgYW5kIDJeNjMtMS5cbiAqXG4gKiBJZiB0aGUgY3VycmVudCBmaWVsZCB2YWx1ZSBpcyBub3Qgb2YgdHlwZSBgbnVtYmVyYCwgb3IgaWYgdGhlIGZpZWxkIGRvZXMgbm90XG4gKiB5ZXQgZXhpc3QsIHRoZSB0cmFuc2Zvcm1hdGlvbiBzZXRzIHRoZSBmaWVsZCB0byB0aGUgZ2l2ZW4gdmFsdWUuXG4gKlxuICogQHBhcmFtIG4gLSBUaGUgdmFsdWUgdG8gaW5jcmVtZW50IGJ5LlxuICogQHJldHVybnMgVGhlIGBGaWVsZFZhbHVlYCBzZW50aW5lbCBmb3IgdXNlIGluIGEgY2FsbCB0byBgc2V0RG9jKClgIG9yXG4gKiBgdXBkYXRlRG9jKClgXG4gKi8gZnVuY3Rpb24gaW5jcmVtZW50KGUpIHtcbiAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9OdW1lcmljSW5jcmVtZW50RmllbGRWYWx1ZUltcGwoXCJpbmNyZW1lbnRcIiwgZSk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBgVmVjdG9yVmFsdWVgIGNvbnN0cnVjdGVkIHdpdGggYSBjb3B5IG9mIHRoZSBnaXZlbiBhcnJheSBvZiBudW1iZXJzLlxuICpcbiAqIEBwYXJhbSB2YWx1ZXMgLSBDcmVhdGUgYSBgVmVjdG9yVmFsdWVgIGluc3RhbmNlIHdpdGggYSBjb3B5IG9mIHRoaXMgYXJyYXkgb2YgbnVtYmVycy5cbiAqXG4gKiBAcmV0dXJucyBBIG5ldyBgVmVjdG9yVmFsdWVgIGNvbnN0cnVjdGVkIHdpdGggYSBjb3B5IG9mIHRoZSBnaXZlbiBhcnJheSBvZiBudW1iZXJzLlxuICovIGZ1bmN0aW9uIHZlY3RvcihlKSB7XG4gICAgcmV0dXJuIG5ldyBWZWN0b3JWYWx1ZShlKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQ3JlYXRlcyBhIHdyaXRlIGJhdGNoLCB1c2VkIGZvciBwZXJmb3JtaW5nIG11bHRpcGxlIHdyaXRlcyBhcyBhIHNpbmdsZVxuICogYXRvbWljIG9wZXJhdGlvbi4gVGhlIG1heGltdW0gbnVtYmVyIG9mIHdyaXRlcyBhbGxvd2VkIGluIGEgc2luZ2xlIHtAbGluayBXcml0ZUJhdGNofVxuICogaXMgNTAwLlxuICpcbiAqIFVubGlrZSB0cmFuc2FjdGlvbnMsIHdyaXRlIGJhdGNoZXMgYXJlIHBlcnNpc3RlZCBvZmZsaW5lIGFuZCB0aGVyZWZvcmUgYXJlXG4gKiBwcmVmZXJhYmxlIHdoZW4geW91IGRvbid0IG5lZWQgdG8gY29uZGl0aW9uIHlvdXIgd3JpdGVzIG9uIHJlYWQgZGF0YS5cbiAqXG4gKiBAcmV0dXJucyBBIHtAbGluayBXcml0ZUJhdGNofSB0aGF0IGNhbiBiZSB1c2VkIHRvIGF0b21pY2FsbHkgZXhlY3V0ZSBtdWx0aXBsZVxuICogd3JpdGVzLlxuICovIGZ1bmN0aW9uIHdyaXRlQmF0Y2goZSkge1xuICAgIHJldHVybiBlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkKGUgPSBfX1BSSVZBVEVfY2FzdChlLCBGaXJlc3RvcmUpKSwgbmV3IFdyaXRlQmF0Y2goZSwgKHQgPT4gZXhlY3V0ZVdyaXRlKGUsIHQpKSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGZ1bmN0aW9uIHNldEluZGV4Q29uZmlndXJhdGlvbihlLCB0KSB7XG4gICAgY29uc3QgbiA9IGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQoZSA9IF9fUFJJVkFURV9jYXN0KGUsIEZpcmVzdG9yZSkpO1xuICAgIGlmICghbi5fdW5pbml0aWFsaXplZENvbXBvbmVudHNQcm92aWRlciB8fCBcIm1lbW9yeVwiID09PSBuLl91bmluaXRpYWxpemVkQ29tcG9uZW50c1Byb3ZpZGVyLl9vZmZsaW5lLmtpbmQpIFxuICAgIC8vIFBPUlRJTkcgTk9URTogV2UgZG9uJ3QgcmV0dXJuIGFuIGVycm9yIGlmIHRoZSB1c2VyIGhhcyBub3QgZW5hYmxlZFxuICAgIC8vIHBlcnNpc3RlbmNlIHNpbmNlIGBlbmFibGVJbmRleGVkZGJQZXJzaXN0ZW5jZSgpYCBjYW4gZmFpbCBvbiB0aGUgV2ViLlxuICAgIHJldHVybiBfX1BSSVZBVEVfbG9nV2FybihcIkNhbm5vdCBlbmFibGUgaW5kZXhlcyB3aGVuIHBlcnNpc3RlbmNlIGlzIGRpc2FibGVkXCIpLCBcbiAgICBQcm9taXNlLnJlc29sdmUoKTtcbiAgICBjb25zdCByID0gZnVuY3Rpb24gX19QUklWQVRFX3BhcnNlSW5kZXhlcyhlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBcInN0cmluZ1wiID09IHR5cGVvZiBlID8gZnVuY3Rpb24gX19QUklWQVRFX3RyeVBhcnNlSnNvbihlKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKGUpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihOLklOVkFMSURfQVJHVU1FTlQsIFwiRmFpbGVkIHRvIHBhcnNlIEpTT046IFwiICsgZT8ubWVzc2FnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0oZSkgOiBlLCBuID0gW107XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHQuaW5kZXhlcykpIGZvciAoY29uc3QgZSBvZiB0LmluZGV4ZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfdHJ5R2V0U3RyaW5nKGUsIFwiY29sbGVjdGlvbkdyb3VwXCIpLCByID0gW107XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShlLmZpZWxkcykpIGZvciAoY29uc3QgdCBvZiBlLmZpZWxkcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBfX1BSSVZBVEVfZmllbGRQYXRoRnJvbURvdFNlcGFyYXRlZFN0cmluZyhcInNldEluZGV4Q29uZmlndXJhdGlvblwiLCBfX1BSSVZBVEVfdHJ5R2V0U3RyaW5nKHQsIFwiZmllbGRQYXRoXCIpKTtcbiAgICAgICAgICAgICAgICBcIkNPTlRBSU5TXCIgPT09IHQuYXJyYXlDb25maWcgPyByLnB1c2gobmV3IEluZGV4U2VnbWVudChlLCAyIC8qIEluZGV4S2luZC5DT05UQUlOUyAqLykpIDogXCJBU0NFTkRJTkdcIiA9PT0gdC5vcmRlciA/IHIucHVzaChuZXcgSW5kZXhTZWdtZW50KGUsIDAgLyogSW5kZXhLaW5kLkFTQ0VORElORyAqLykpIDogXCJERVNDRU5ESU5HXCIgPT09IHQub3JkZXIgJiYgci5wdXNoKG5ldyBJbmRleFNlZ21lbnQoZSwgMSAvKiBJbmRleEtpbmQuREVTQ0VORElORyAqLykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbi5wdXNoKG5ldyBGaWVsZEluZGV4KEZpZWxkSW5kZXguVU5LTk9XTl9JRCwgdCwgciwgSW5kZXhTdGF0ZS5lbXB0eSgpKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG47XG4gICAgfSh0KTtcbiAgICByZXR1cm4gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudFNldEluZGV4Q29uZmlndXJhdGlvbihuLCByKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3RyeUdldFN0cmluZyhlLCB0KSB7XG4gICAgaWYgKFwic3RyaW5nXCIgIT0gdHlwZW9mIGVbdF0pIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihOLklOVkFMSURfQVJHVU1FTlQsIFwiTWlzc2luZyBzdHJpbmcgdmFsdWUgZm9yOiBcIiArIHQpO1xuICAgIHJldHVybiBlW3RdO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGBQZXJzaXN0ZW50Q2FjaGVJbmRleE1hbmFnZXJgIGZvciBjb25maWd1cmluZyBwZXJzaXN0ZW50IGNhY2hlIGluZGV4ZXMgdXNlZFxuICogZm9yIGxvY2FsIHF1ZXJ5IGV4ZWN1dGlvbi5cbiAqXG4gKiBUbyB1c2UsIGNhbGwgYGdldFBlcnNpc3RlbnRDYWNoZUluZGV4TWFuYWdlcigpYCB0byBnZXQgYW4gaW5zdGFuY2UuXG4gKi8gY2xhc3MgUGVyc2lzdGVudENhY2hlSW5kZXhNYW5hZ2VyIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlID0gZSwgXG4gICAgICAgIC8qKiBBIHR5cGUgc3RyaW5nIHRvIHVuaXF1ZWx5IGlkZW50aWZ5IGluc3RhbmNlcyBvZiB0aGlzIGNsYXNzLiAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcIlBlcnNpc3RlbnRDYWNoZUluZGV4TWFuYWdlclwiO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBQZXJzaXN0ZW50Q2FjaGUgSW5kZXggTWFuYWdlciB1c2VkIGJ5IHRoZSBnaXZlbiBgRmlyZXN0b3JlYFxuICogb2JqZWN0LlxuICpcbiAqIEByZXR1cm4gVGhlIGBQZXJzaXN0ZW50Q2FjaGVJbmRleE1hbmFnZXJgIGluc3RhbmNlLCBvciBgbnVsbGAgaWYgbG9jYWxcbiAqIHBlcnNpc3RlbnQgc3RvcmFnZSBpcyBub3QgaW4gdXNlLlxuICovIGZ1bmN0aW9uIGdldFBlcnNpc3RlbnRDYWNoZUluZGV4TWFuYWdlcihlKSB7XG4gICAgZSA9IF9fUFJJVkFURV9jYXN0KGUsIEZpcmVzdG9yZSk7XG4gICAgY29uc3QgdCA9IEVuLmdldChlKTtcbiAgICBpZiAodCkgcmV0dXJuIHQ7XG4gICAgY29uc3QgbiA9IGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQoZSk7XG4gICAgaWYgKFwicGVyc2lzdGVudFwiICE9PSBuLl91bmluaXRpYWxpemVkQ29tcG9uZW50c1Byb3ZpZGVyPy5fb2ZmbGluZS5raW5kKSByZXR1cm4gbnVsbDtcbiAgICBjb25zdCByID0gbmV3IFBlcnNpc3RlbnRDYWNoZUluZGV4TWFuYWdlcihlKTtcbiAgICByZXR1cm4gRW4uc2V0KGUsIHIpLCByO1xufVxuXG4vKipcbiAqIEVuYWJsZXMgdGhlIFNESyB0byBjcmVhdGUgcGVyc2lzdGVudCBjYWNoZSBpbmRleGVzIGF1dG9tYXRpY2FsbHkgZm9yIGxvY2FsXG4gKiBxdWVyeSBleGVjdXRpb24gd2hlbiB0aGUgU0RLIGJlbGlldmVzIGNhY2hlIGluZGV4ZXMgY2FuIGhlbHAgaW1wcm92ZVxuICogcGVyZm9ybWFuY2UuXG4gKlxuICogVGhpcyBmZWF0dXJlIGlzIGRpc2FibGVkIGJ5IGRlZmF1bHQuXG4gKi8gZnVuY3Rpb24gZW5hYmxlUGVyc2lzdGVudENhY2hlSW5kZXhBdXRvQ3JlYXRpb24oZSkge1xuICAgIF9fUFJJVkFURV9zZXRQZXJzaXN0ZW50Q2FjaGVJbmRleEF1dG9DcmVhdGlvbkVuYWJsZWQoZSwgITApO1xufVxuXG4vKipcbiAqIFN0b3BzIGNyZWF0aW5nIHBlcnNpc3RlbnQgY2FjaGUgaW5kZXhlcyBhdXRvbWF0aWNhbGx5IGZvciBsb2NhbCBxdWVyeVxuICogZXhlY3V0aW9uLiBUaGUgaW5kZXhlcyB3aGljaCBoYXZlIGJlZW4gY3JlYXRlZCBieSBjYWxsaW5nXG4gKiBgZW5hYmxlUGVyc2lzdGVudENhY2hlSW5kZXhBdXRvQ3JlYXRpb24oKWAgc3RpbGwgdGFrZSBlZmZlY3QuXG4gKi8gZnVuY3Rpb24gZGlzYWJsZVBlcnNpc3RlbnRDYWNoZUluZGV4QXV0b0NyZWF0aW9uKGUpIHtcbiAgICBfX1BSSVZBVEVfc2V0UGVyc2lzdGVudENhY2hlSW5kZXhBdXRvQ3JlYXRpb25FbmFibGVkKGUsICExKTtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIGFsbCBwZXJzaXN0ZW50IGNhY2hlIGluZGV4ZXMuXG4gKlxuICogUGxlYXNlIG5vdGUgdGhpcyBmdW5jdGlvbiB3aWxsIGFsc28gZGVsZXRlcyBpbmRleGVzIGdlbmVyYXRlZCBieVxuICogYHNldEluZGV4Q29uZmlndXJhdGlvbigpYCwgd2hpY2ggaXMgZGVwcmVjYXRlZC5cbiAqLyBmdW5jdGlvbiBkZWxldGVBbGxQZXJzaXN0ZW50Q2FjaGVJbmRleGVzKGUpIHtcbiAgICBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50RGVsZXRlQWxsRmllbGRJbmRleGVzKGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQoZS5fZmlyZXN0b3JlKSkudGhlbigoZSA9PiBfX1BSSVZBVEVfbG9nRGVidWcoXCJkZWxldGluZyBhbGwgcGVyc2lzdGVudCBjYWNoZSBpbmRleGVzIHN1Y2NlZWRlZFwiKSkpLmNhdGNoKChlID0+IF9fUFJJVkFURV9sb2dXYXJuKFwiZGVsZXRpbmcgYWxsIHBlcnNpc3RlbnQgY2FjaGUgaW5kZXhlcyBmYWlsZWRcIiwgZSkpKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3NldFBlcnNpc3RlbnRDYWNoZUluZGV4QXV0b0NyZWF0aW9uRW5hYmxlZChlLCB0KSB7XG4gICAgX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudFNldFBlcnNpc3RlbnRDYWNoZUluZGV4QXV0b0NyZWF0aW9uRW5hYmxlZChlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkKGUuX2ZpcmVzdG9yZSksIHQpLnRoZW4oKGUgPT4gX19QUklWQVRFX2xvZ0RlYnVnKGBzZXR0aW5nIHBlcnNpc3RlbnQgY2FjaGUgaW5kZXggYXV0byBjcmVhdGlvbiBpc0VuYWJsZWQ9JHt0fSBzdWNjZWVkZWRgKSkpLmNhdGNoKChlID0+IF9fUFJJVkFURV9sb2dXYXJuKGBzZXR0aW5nIHBlcnNpc3RlbnQgY2FjaGUgaW5kZXggYXV0byBjcmVhdGlvbiBpc0VuYWJsZWQ9JHt0fSBmYWlsZWRgLCBlKSkpO1xufVxuXG4vKipcbiAqIE1hcHMgYEZpcmVzdG9yZWAgaW5zdGFuY2VzIHRvIHRoZWlyIGNvcnJlc3BvbmRpbmdcbiAqIGBQZXJzaXN0ZW50Q2FjaGVJbmRleE1hbmFnZXJgIGluc3RhbmNlcy5cbiAqXG4gKiBVc2UgYSBgV2Vha01hcGAgc28gdGhhdCB0aGUgbWFwcGluZyB3aWxsIGJlIGF1dG9tYXRpY2FsbHkgZHJvcHBlZCB3aGVuIHRoZVxuICogYEZpcmVzdG9yZWAgaW5zdGFuY2UgaXMgZ2FyYmFnZSBjb2xsZWN0ZWQuIFRoaXMgZW11bGF0ZXMgYSBwcml2YXRlIG1lbWJlclxuICogYXMgZGVzY3JpYmVkIGluIGh0dHBzOi8vZ29vLmdsZS80NTR5dnVnLlxuICovIGNvbnN0IEVuID0gbmV3IFdlYWtNYXA7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEBpbnRlcm5hbFxuICogQHByaXZhdGVcbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIGlzIGZvciBpbnRlcm5hbCB1c2Ugb25seS5cbiAqXG4gKiBSZXR1cm5zIHRoZSBgUXVlcnlUYXJnZXRgIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBnaXZlbiBxdWVyeS4gUmV0dXJucyBgbnVsbGBcbiAqIGlmIHRoZSBGaXJlc3RvcmUgY2xpZW50IGFzc29jaWF0ZWQgd2l0aCB0aGUgZ2l2ZW4gcXVlcnkgaGFzIG5vdCBiZWVuXG4gKiBpbml0aWFsaXplZCBvciBoYXMgYmVlbiB0ZXJtaW5hdGVkLlxuICpcbiAqIEBwYXJhbSBxdWVyeSAtIFRoZSBRdWVyeSB0byBjb252ZXJ0IHRvIHByb3RvIHJlcHJlc2VudGF0aW9uLlxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZnVuY3Rpb24gX2ludGVybmFsUXVlcnlUb1Byb3RvUXVlcnlUYXJnZXQoZSkge1xuICAgIGNvbnN0IHQgPSBlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkKF9fUFJJVkFURV9jYXN0KGUuZmlyZXN0b3JlLCBGaXJlc3RvcmUpKSwgbiA9IHQuX29ubGluZUNvbXBvbmVudHM/LmRhdGFzdG9yZS5zZXJpYWxpemVyO1xuICAgIHJldHVybiB2b2lkIDAgPT09IG4gPyBudWxsIDogX19QUklWQVRFX3RvUXVlcnlUYXJnZXQobiwgX19QUklWQVRFX3F1ZXJ5VG9UYXJnZXQoZS5fcXVlcnkpKS5mdDtcbn1cblxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqIEBwcml2YXRlXG4gKlxuICogVGhpcyBmdW5jdGlvbiBpcyBmb3IgaW50ZXJuYWwgdXNlIG9ubHkuXG4gKlxuICogUmV0dXJucyBgUnVuQWdncmVnYXRpb25RdWVyeVJlcXVlc3RgIHdoaWNoIGNvbnRhaW5zIHRoZSBwcm90byByZXByZXNlbnRhdGlvblxuICogb2YgdGhlIGdpdmVuIGFnZ3JlZ2F0aW9uIHF1ZXJ5IHJlcXVlc3QuIFJldHVybnMgbnVsbCBpZiB0aGUgRmlyZXN0b3JlIGNsaWVudFxuICogYXNzb2NpYXRlZCB3aXRoIHRoZSBnaXZlbiBxdWVyeSBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQgb3IgaGFzIGJlZW5cbiAqIHRlcm1pbmF0ZWQuXG4gKlxuICogQHBhcmFtIHF1ZXJ5IC0gVGhlIFF1ZXJ5IHRvIGNvbnZlcnQgdG8gcHJvdG8gcmVwcmVzZW50YXRpb24uXG4gKiBAcGFyYW0gYWdncmVnYXRlU3BlYyAtIFRoZSBzZXQgb2YgYWdncmVnYXRpb25zIGFuZCB0aGVpciBhbGlhc2VzLlxuICovIGZ1bmN0aW9uIF9pbnRlcm5hbEFnZ3JlZ2F0aW9uUXVlcnlUb1Byb3RvUnVuQWdncmVnYXRpb25RdWVyeVJlcXVlc3QoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfbWFwVG9BcnJheSh0LCAoKGUsIHQpID0+IG5ldyBfX1BSSVZBVEVfQWdncmVnYXRlSW1wbCh0LCBlLmFnZ3JlZ2F0ZVR5cGUsIGUuX2ludGVybmFsRmllbGRQYXRoKSkpLCByID0gZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZChfX1BSSVZBVEVfY2FzdChlLmZpcmVzdG9yZSwgRmlyZXN0b3JlKSksIGkgPSByLl9vbmxpbmVDb21wb25lbnRzPy5kYXRhc3RvcmUuc2VyaWFsaXplcjtcbiAgICByZXR1cm4gdm9pZCAwID09PSBpID8gbnVsbCA6IF9fUFJJVkFURV90b1J1bkFnZ3JlZ2F0aW9uUXVlcnlSZXF1ZXN0KGksIF9fUFJJVkFURV9xdWVyeVRvQWdncmVnYXRlVGFyZ2V0KGUuX3F1ZXJ5KSwgbiwgXG4gICAgLyogc2tpcEFsaWFzaW5nPSAqLyAhMCkucmVxdWVzdDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVGVzdGluZyBob29rcyBmb3IgdXNlIGJ5IEZpcmVzdG9yZSdzIGludGVncmF0aW9uIHRlc3Qgc3VpdGUgdG8gcmVhY2ggaW50byB0aGVcbiAqIFNESyBpbnRlcm5hbHMgdG8gdmFsaWRhdGUgbG9naWMgYW5kIGJlaGF2aW9yIHRoYXQgaXMgbm90IHZpc2libGUgZnJvbSB0aGVcbiAqIHB1YmxpYyBBUEkgc3VyZmFjZS5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyBUZXN0aW5nSG9va3Mge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBzaG91bGQgbm90IGJlIGNyZWF0ZWRcIik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBhIGNhbGxiYWNrIHRvIGJlIG5vdGlmaWVkIHdoZW4gYW4gZXhpc3RlbmNlIGZpbHRlciBtaXNtYXRjaFxuICAgICAqIG9jY3VycyBpbiB0aGUgV2F0Y2ggbGlzdGVuIHN0cmVhbS5cbiAgICAgKlxuICAgICAqIFRoZSByZWxhdGl2ZSBvcmRlciBpbiB3aGljaCBjYWxsYmFja3MgYXJlIG5vdGlmaWVkIGlzIHVuc3BlY2lmaWVkOyBkbyBub3RcbiAgICAgKiByZWx5IG9uIGFueSBwYXJ0aWN1bGFyIG9yZGVyaW5nLiBJZiBhIGdpdmVuIGNhbGxiYWNrIGlzIHJlZ2lzdGVyZWQgbXVsdGlwbGVcbiAgICAgKiB0aW1lcyB0aGVuIGl0IHdpbGwgYmUgbm90aWZpZWQgbXVsdGlwbGUgdGltZXMsIG9uY2UgcGVyIHJlZ2lzdHJhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjYWxsYmFjayB0aGUgY2FsbGJhY2sgdG8gaW52b2tlIHVwb24gZXhpc3RlbmNlIGZpbHRlciBtaXNtYXRjaC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4gYSBmdW5jdGlvbiB0aGF0LCB3aGVuIGNhbGxlZCwgdW5yZWdpc3RlcnMgdGhlIGdpdmVuIGNhbGxiYWNrOyBvbmx5XG4gICAgICogdGhlIGZpcnN0IGludm9jYXRpb24gb2YgdGhlIHJldHVybmVkIGZ1bmN0aW9uIGRvZXMgYW55dGhpbmc7IGFsbCBzdWJzZXF1ZW50XG4gICAgICogaW52b2NhdGlvbnMgZG8gbm90aGluZy5cbiAgICAgKi8gICAgc3RhdGljIG9uRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2goZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX1Rlc3RpbmdIb29rc1NwaUltcGwuaW5zdGFuY2Uub25FeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaChlKTtcbiAgICB9XG59XG5cbi8qKlxuICogVGhlIGltcGxlbWVudGF0aW9uIG9mIGBUZXN0aW5nSG9va3NTcGlgLlxuICovIGNsYXNzIF9fUFJJVkFURV9UZXN0aW5nSG9va3NTcGlJbXBsIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5NYyA9IG5ldyBNYXA7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgaW5zdGFuY2UoKSB7XG4gICAgICAgIHJldHVybiBkbiB8fCAoZG4gPSBuZXcgX19QUklWQVRFX1Rlc3RpbmdIb29rc1NwaUltcGwsIGZ1bmN0aW9uIF9fUFJJVkFURV9zZXRUZXN0aW5nSG9va3NTcGkoZSkge1xuICAgICAgICAgICAgaWYgKHd0KSB0aHJvdyBuZXcgRXJyb3IoXCJhIFRlc3RpbmdIb29rc1NwaSBpbnN0YW5jZSBpcyBhbHJlYWR5IHNldFwiKTtcbiAgICAgICAgICAgIHd0ID0gZTtcbiAgICAgICAgfShkbikpLCBkbjtcbiAgICB9XG4gICAgbHQoZSkge1xuICAgICAgICB0aGlzLk1jLmZvckVhY2goKHQgPT4gdChlKSkpO1xuICAgIH1cbiAgICBvbkV4aXN0ZW5jZUZpbHRlck1pc21hdGNoKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IFN5bWJvbCgpLCBuID0gdGhpcy5NYztcbiAgICAgICAgcmV0dXJuIG4uc2V0KHQsIGUpLCAoKSA9PiBuLmRlbGV0ZSh0KTtcbiAgICB9XG59XG5cbmxldCBkbiA9IG51bGw7XG5cbi8qKlxuICogQ2xvdWQgRmlyZXN0b3JlXG4gKlxuICogQHBhY2thZ2VEb2N1bWVudGF0aW9uXG4gKi8gIWZ1bmN0aW9uIF9fUFJJVkFURV9yZWdpc3RlckZpcmVzdG9yZShlLCB0ID0gITApIHtcbiAgICAhZnVuY3Rpb24gX19QUklWQVRFX3NldFNES1ZlcnNpb24oZSkge1xuICAgICAgICB4ID0gZTtcbiAgICB9KFNES19WRVJTSU9OKSwgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoXCJmaXJlc3RvcmVcIiwgKChlLCB7aW5zdGFuY2VJZGVudGlmaWVyOiBuLCBvcHRpb25zOiByfSkgPT4ge1xuICAgICAgICBjb25zdCBpID0gZS5nZXRQcm92aWRlcihcImFwcFwiKS5nZXRJbW1lZGlhdGUoKSwgcyA9IG5ldyBGaXJlc3RvcmUobmV3IF9fUFJJVkFURV9GaXJlYmFzZUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyKGUuZ2V0UHJvdmlkZXIoXCJhdXRoLWludGVybmFsXCIpKSwgbmV3IF9fUFJJVkFURV9GaXJlYmFzZUFwcENoZWNrVG9rZW5Qcm92aWRlcihpLCBlLmdldFByb3ZpZGVyKFwiYXBwLWNoZWNrLWludGVybmFsXCIpKSwgZnVuY3Rpb24gX19QUklWQVRFX2RhdGFiYXNlSWRGcm9tQXBwKGUsIHQpIHtcbiAgICAgICAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5hcHBseShlLm9wdGlvbnMsIFsgXCJwcm9qZWN0SWRcIiBdKSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKE4uSU5WQUxJRF9BUkdVTUVOVCwgJ1wicHJvamVjdElkXCIgbm90IHByb3ZpZGVkIGluIGZpcmViYXNlLmluaXRpYWxpemVBcHAuJyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IERhdGFiYXNlSWQoZS5vcHRpb25zLnByb2plY3RJZCwgdCk7XG4gICAgICAgIH0oaSwgbiksIGkpO1xuICAgICAgICByZXR1cm4gciA9IHtcbiAgICAgICAgICAgIHVzZUZldGNoU3RyZWFtczogdCxcbiAgICAgICAgICAgIC4uLnJcbiAgICAgICAgfSwgcy5fc2V0U2V0dGluZ3MociksIHM7XG4gICAgfSksIFwiUFVCTElDXCIpLnNldE11bHRpcGxlSW5zdGFuY2VzKCEwKSksIHJlZ2lzdGVyVmVyc2lvbihGLCBNLCBlKSwgXG4gICAgLy8gQlVJTERfVEFSR0VUIHdpbGwgYmUgcmVwbGFjZWQgYnkgdmFsdWVzIGxpa2UgZXNtLCBjanMsIGV0YyBkdXJpbmcgdGhlIGNvbXBpbGF0aW9uXG4gICAgcmVnaXN0ZXJWZXJzaW9uKEYsIE0sIFwiZXNtMjAyMFwiKTtcbn0oKTtcblxuZXhwb3J0IHsgQWJzdHJhY3RVc2VyRGF0YVdyaXRlciwgQWdncmVnYXRlRmllbGQsIEFnZ3JlZ2F0ZVF1ZXJ5U25hcHNob3QsIEJ5dGVzLCBsbiBhcyBDQUNIRV9TSVpFX1VOTElNSVRFRCwgQ29sbGVjdGlvblJlZmVyZW5jZSwgRG9jdW1lbnRSZWZlcmVuY2UsIERvY3VtZW50U25hcHNob3QsIEZpZWxkUGF0aCwgRmllbGRWYWx1ZSwgRmlyZXN0b3JlLCBGaXJlc3RvcmVFcnJvciwgR2VvUG9pbnQsIExvYWRCdW5kbGVUYXNrLCBQZXJzaXN0ZW50Q2FjaGVJbmRleE1hbmFnZXIsIFF1ZXJ5LCBRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnQsIFF1ZXJ5Q29uc3RyYWludCwgUXVlcnlEb2N1bWVudFNuYXBzaG90LCBRdWVyeUVuZEF0Q29uc3RyYWludCwgUXVlcnlGaWVsZEZpbHRlckNvbnN0cmFpbnQsIFF1ZXJ5TGltaXRDb25zdHJhaW50LCBRdWVyeU9yZGVyQnlDb25zdHJhaW50LCBRdWVyeVNuYXBzaG90LCBRdWVyeVN0YXJ0QXRDb25zdHJhaW50LCBTbmFwc2hvdE1ldGFkYXRhLCBUaW1lc3RhbXAsIFRyYW5zYWN0aW9uLCBWZWN0b3JWYWx1ZSwgV3JpdGVCYXRjaCwgX19QUklWQVRFX0F1dG9JZCBhcyBfQXV0b0lkLCBCeXRlU3RyaW5nIGFzIF9CeXRlU3RyaW5nLCBEYXRhYmFzZUlkIGFzIF9EYXRhYmFzZUlkLCBEb2N1bWVudEtleSBhcyBfRG9jdW1lbnRLZXksIF9fUFJJVkFURV9FbXB0eUFwcENoZWNrVG9rZW5Qcm92aWRlciBhcyBfRW1wdHlBcHBDaGVja1Rva2VuUHJvdmlkZXIsIF9fUFJJVkFURV9FbXB0eUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyIGFzIF9FbXB0eUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyLCBGaWVsZFBhdGgkMSBhcyBfRmllbGRQYXRoLCBUZXN0aW5nSG9va3MgYXMgX1Rlc3RpbmdIb29rcywgX19QUklWQVRFX2Nhc3QgYXMgX2Nhc3QsIF9fUFJJVkFURV9kZWJ1Z0Fzc2VydCBhcyBfZGVidWdBc3NlcnQsIF9pbnRlcm5hbEFnZ3JlZ2F0aW9uUXVlcnlUb1Byb3RvUnVuQWdncmVnYXRpb25RdWVyeVJlcXVlc3QsIF9pbnRlcm5hbFF1ZXJ5VG9Qcm90b1F1ZXJ5VGFyZ2V0LCBfX1BSSVZBVEVfaXNCYXNlNjRBdmFpbGFibGUgYXMgX2lzQmFzZTY0QXZhaWxhYmxlLCBfX1BSSVZBVEVfbG9nV2FybiBhcyBfbG9nV2FybiwgX19QUklWQVRFX3ZhbGlkYXRlSXNOb3RVc2VkVG9nZXRoZXIgYXMgX3ZhbGlkYXRlSXNOb3RVc2VkVG9nZXRoZXIsIGFkZERvYywgYWdncmVnYXRlRmllbGRFcXVhbCwgYWdncmVnYXRlUXVlcnlTbmFwc2hvdEVxdWFsLCBhbmQsIGFycmF5UmVtb3ZlLCBhcnJheVVuaW9uLCBhdmVyYWdlLCBjbGVhckluZGV4ZWREYlBlcnNpc3RlbmNlLCBjb2xsZWN0aW9uLCBjb2xsZWN0aW9uR3JvdXAsIGNvbm5lY3RGaXJlc3RvcmVFbXVsYXRvciwgY291bnQsIGRlbGV0ZUFsbFBlcnNpc3RlbnRDYWNoZUluZGV4ZXMsIGRlbGV0ZURvYywgZGVsZXRlRmllbGQsIGRpc2FibGVOZXR3b3JrLCBkaXNhYmxlUGVyc2lzdGVudENhY2hlSW5kZXhBdXRvQ3JlYXRpb24sIGRvYywgZG9jdW1lbnRJZCwgZG9jdW1lbnRTbmFwc2hvdEZyb21KU09OLCBlbmFibGVJbmRleGVkRGJQZXJzaXN0ZW5jZSwgZW5hYmxlTXVsdGlUYWJJbmRleGVkRGJQZXJzaXN0ZW5jZSwgZW5hYmxlTmV0d29yaywgZW5hYmxlUGVyc2lzdGVudENhY2hlSW5kZXhBdXRvQ3JlYXRpb24sIGVuZEF0LCBlbmRCZWZvcmUsIGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQsIGV4ZWN1dGVXcml0ZSwgZ2V0QWdncmVnYXRlRnJvbVNlcnZlciwgZ2V0Q291bnRGcm9tU2VydmVyLCBnZXREb2MsIGdldERvY0Zyb21DYWNoZSwgZ2V0RG9jRnJvbVNlcnZlciwgZ2V0RG9jcywgZ2V0RG9jc0Zyb21DYWNoZSwgZ2V0RG9jc0Zyb21TZXJ2ZXIsIGdldEZpcmVzdG9yZSwgZ2V0UGVyc2lzdGVudENhY2hlSW5kZXhNYW5hZ2VyLCBpbmNyZW1lbnQsIGluaXRpYWxpemVGaXJlc3RvcmUsIGxpbWl0LCBsaW1pdFRvTGFzdCwgbG9hZEJ1bmRsZSwgbWVtb3J5RWFnZXJHYXJiYWdlQ29sbGVjdG9yLCBtZW1vcnlMb2NhbENhY2hlLCBtZW1vcnlMcnVHYXJiYWdlQ29sbGVjdG9yLCBuYW1lZFF1ZXJ5LCBvblNuYXBzaG90LCBvblNuYXBzaG90UmVzdW1lLCBvblNuYXBzaG90c0luU3luYywgb3IsIG9yZGVyQnksIHBlcnNpc3RlbnRMb2NhbENhY2hlLCBwZXJzaXN0ZW50TXVsdGlwbGVUYWJNYW5hZ2VyLCBwZXJzaXN0ZW50U2luZ2xlVGFiTWFuYWdlciwgcXVlcnksIHF1ZXJ5RXF1YWwsIHF1ZXJ5U25hcHNob3RGcm9tSlNPTiwgcmVmRXF1YWwsIHJ1blRyYW5zYWN0aW9uLCBzZXJ2ZXJUaW1lc3RhbXAsIHNldERvYywgc2V0SW5kZXhDb25maWd1cmF0aW9uLCBzZXRMb2dMZXZlbCwgc25hcHNob3RFcXVhbCwgc3RhcnRBZnRlciwgc3RhcnRBdCwgc3VtLCB0ZXJtaW5hdGUsIHVwZGF0ZURvYywgdmVjdG9yLCB3YWl0Rm9yUGVuZGluZ1dyaXRlcywgd2hlcmUsIHdyaXRlQmF0Y2ggfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbS5qcy5tYXBcbiIsImltcG9ydCB7IGluaXRpYWxpemVBcHAgfSBmcm9tIFwiZmlyZWJhc2UvYXBwXCI7XHJcbmltcG9ydCB7IGNvbGxlY3Rpb24sIHF1ZXJ5LCBvcmRlckJ5LCBsaW1pdCwgc3RhcnRBZnRlciwgZ2V0RG9jcywgZ2V0RmlyZXN0b3JlIH0gZnJvbSBcImZpcmViYXNlL2ZpcmVzdG9yZVwiXHJcblxyXG5jb25zdCBmaXJlYmFzZUNvbmZpZyA9IHtcclxuICAgIGFwaUtleTogXCJBSXphU3lDRlJzRU9BdjU3VkgyU3Z5WGN4T3ZhSFl0b2JlYjVpaFFcIixcclxuICAgIGF1dGhEb21haW46IFwidGVzdC0xZTNlNS5maXJlYmFzZWFwcC5jb21cIixcclxuICAgIGRhdGFiYXNlVVJMOiBcImh0dHBzOi8vdGVzdC0xZTNlNS1kZWZhdWx0LXJ0ZGIuZXVyb3BlLXdlc3QxLmZpcmViYXNlZGF0YWJhc2UuYXBwXCIsXHJcbiAgICBwcm9qZWN0SWQ6IFwidGVzdC0xZTNlNVwiLFxyXG4gICAgc3RvcmFnZUJ1Y2tldDogXCJ0ZXN0LTFlM2U1LmZpcmViYXNlc3RvcmFnZS5hcHBcIixcclxuICAgIG1lc3NhZ2luZ1NlbmRlcklkOiBcIjcyMzYzMDIzMjQwXCIsXHJcbiAgICBhcHBJZDogXCIxOjcyMzYzMDIzMjQwOndlYjo0NmU5YmMzNWVmNGE0YWEzMWZmODNkXCIsXHJcbiAgICBtZWFzdXJlbWVudElkOiBcIkctRUJHS0hMSkRUVlwiXHJcbn07XHJcblxyXG5jb25zdCBhcHAgPSBpbml0aWFsaXplQXBwKGZpcmViYXNlQ29uZmlnKTtcclxuY29uc3QgZGIgPSBnZXRGaXJlc3RvcmUoYXBwKTtcclxuXHJcblxyXG5jb25zdCBmYWN0c0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicXVpY2tGYWN0c1wiKTtcclxuY29uc3QgZmFjdHNJbmZvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmYWN0c0luZm9cIik7XHJcbmNvbnN0IHNlYXJjaElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzZWFyY2hGYWN0SW5wdXRcIik7XHJcblxyXG5sZXQgY3VycmVudFBhZ2UgPSAxO1xyXG5sZXQgbGFzdFZpc2libGUgPSBudWxsO1xyXG5jb25zdCBQQUdFX1NJWkUgPSAxMDtcclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGxvYWRRdWlja0ZhY3RzKGN1c3RvbVF1ZXJ5KSB7XHJcbiAgICBsZXQgcSA9IGN1c3RvbVF1ZXJ5IHx8IHF1ZXJ5KFxyXG4gICAgICAgIGNvbGxlY3Rpb24oZGIsIFwicXVpY2tGYWN0c1wiKSxcclxuICAgICAgICBvcmRlckJ5KFwiZGF0ZVwiLCBcImRlc2NcIiksXHJcbiAgICAgICAgbGltaXQoUEFHRV9TSVpFKVxyXG4gICAgKTtcclxuXHJcbiAgICBpZiAoY3VycmVudFBhZ2UgPiAxICYmIGxhc3RWaXNpYmxlKSB7XHJcbiAgICAgICAgcSA9IHF1ZXJ5KHEsIHN0YXJ0QWZ0ZXIobGFzdFZpc2libGUpKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XHJcblxyXG4gICAgZmFjdHNDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcclxuXHJcbiAgICBjb25zdCBmYWN0cyA9IFtdO1xyXG4gICAgc25hcHNob3QuZm9yRWFjaChkb2MgPT4ge1xyXG4gICAgICAgIGNvbnN0IGZhY3QgPSBkb2MuZGF0YSgpO1xyXG4gICAgICAgIGZhY3QuaWQgPSBkb2MuaWQ7XHJcbiAgICAgICAgZmFjdHMucHVzaChmYWN0KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGlmIChmYWN0cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICBmYWN0c0NvbnRhaW5lci5pbm5lckhUTUwgPSBcIjxwPtmE2Kcg2KrZiNis2K8g2K3Zgtin2KbZgiDYs9ix2YrYudipINmF2LfYp9io2YLYqS48L3A+XCI7XHJcbiAgICAgICAgZmFjdHNJbmZvLnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmVuZGVyXHJcbiAgICBmYWN0cy5mb3JFYWNoKGZhY3QgPT4ge1xyXG4gICAgICAgIGNvbnN0IGRhdGVTdHIgPSBmYWN0LmRhdGU/LnRvRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygpIHx8IFwi2LrZitixINmF2K3Yr9ivXCI7XHJcbiAgICAgICAgZmFjdHNDb250YWluZXIuaW5uZXJIVE1MICs9IGBcclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZhY3QtY2FyZFwiPlxyXG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCIke2ZhY3QuaW1hZ2VVUkwgfHwgJ3BsYWNlaG9sZGVyLnBuZyd9XCIgYWx0PVwiaWNvblwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZhY3QtY29udGVudFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxoMj48c3Ryb25nPtin2YTYp9iv2LnYp9ihOjwvc3Ryb25nPiAke2ZhY3QuY2xhaW19PC9oMj5cclxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImFjY3VyYWN5XCI+PHN0cm9uZz7Yp9mE2K/ZgtipOjwvc3Ryb25nPiAke2ZhY3QuYWNjdXJhY3l9PC9wPlxyXG4gICAgICAgICAgICAgICAgICAgIDxoMj48c3Ryb25nPtin2YTYqti12K3ZititOjwvc3Ryb25nPiAke2ZhY3QuY29ycmVjdGlvbn08L2gyPlxyXG4gICAgICAgICAgICAgICAgICAgIDxwPjxzdHJvbmc+2KfZhNmF2LXYr9ixOjwvc3Ryb25nPiA8YSBocmVmPVwiJHtmYWN0LnNvdXJjZX1cIiB0YXJnZXQ9XCJfYmxhbmtcIj4ke2ZhY3Quc291cmNlfTwvYT48L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgPHA+PHN0cm9uZz7Yp9mE2KrYtdmG2YrZgTo8L3N0cm9uZz4gJHtmYWN0LnRhZyB8fCAn2LnYp9mFJ308L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgPHA+PHN0cm9uZz7Yp9mE2KrYp9ix2YrYrjo8L3N0cm9uZz4gJHtkYXRlU3RyfTwvcD5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICBgO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZmFjdHNJbmZvLnRleHRDb250ZW50ID0gYNin2YTYtdmB2K3YqSAke2N1cnJlbnRQYWdlfSDigJQgJHtmYWN0cy5sZW5ndGh9INmF2YYg2KPYtdmEICR7c25hcHNob3Quc2l6ZX1gO1xyXG5cclxuICAgIGxhc3RWaXNpYmxlID0gc25hcHNob3QuZG9jc1tzbmFwc2hvdC5kb2NzLmxlbmd0aCAtIDFdO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcmV2RmFjdEJ0blwiKS5kaXNhYmxlZCA9IGN1cnJlbnRQYWdlID09PSAxO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJuZXh0RmFjdEJ0blwiKS5kaXNhYmxlZCA9IHNuYXBzaG90LnNpemUgPCBQQUdFX1NJWkU7XHJcbn1cclxuXHJcbi8vIFNlYXJjaFxyXG5hc3luYyBmdW5jdGlvbiBzZWFyY2hGYWN0cygpIHtcclxuICAgIGNvbnN0IHRlcm0gPSBzZWFyY2hJbnB1dC52YWx1ZS50cmltKCk7XHJcbiAgICBjdXJyZW50UGFnZSA9IDE7XHJcbiAgICBsYXN0VmlzaWJsZSA9IG51bGw7XHJcblxyXG4gICAgaWYgKCF0ZXJtKSB7XHJcbiAgICAgICAgbG9hZFF1aWNrRmFjdHMoKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2xpZW50LXNpZGUgc2VhcmNoIChPUiB0YWcvY2xhaW0pXHJcbiAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvY3MoY29sbGVjdGlvbihkYiwgXCJxdWlja0ZhY3RzXCIpKTtcclxuICAgIGNvbnN0IGZpbHRlcmVkID0gW107XHJcbiAgICBzbmFwc2hvdC5mb3JFYWNoKGRvYyA9PiB7XHJcbiAgICAgICAgY29uc3QgZmFjdCA9IGRvYy5kYXRhKCk7XHJcbiAgICAgICAgZmFjdC5pZCA9IGRvYy5pZDtcclxuICAgICAgICBpZiAoZmFjdC50YWc/LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXModGVybS50b0xvd2VyQ2FzZSgpKSB8fCBmYWN0LmNsYWltPy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHRlcm0udG9Mb3dlckNhc2UoKSkpIHtcclxuICAgICAgICAgICAgZmlsdGVyZWQucHVzaChmYWN0KTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBTb3J0IGJ5IGRhdGUgZGVzY2VuZGluZ1xyXG4gICAgZmlsdGVyZWQuc29ydCgoYSwgYikgPT4gYi5kYXRlLnRvRGF0ZSgpIC0gYS5kYXRlLnRvRGF0ZSgpKTtcclxuXHJcbiAgICBmYWN0c0NvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgZmlsdGVyZWQuc2xpY2UoMCwgUEFHRV9TSVpFKS5mb3JFYWNoKGZhY3QgPT4ge1xyXG4gICAgICAgIGNvbnN0IGRhdGVTdHIgPSBmYWN0LmRhdGU/LnRvRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygpIHx8IFwi2LrZitixINmF2K3Yr9ivXCI7XHJcbiAgICAgICAgZmFjdHNDb250YWluZXIuaW5uZXJIVE1MICs9IGBcclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZhY3QtY2FyZFwiPlxyXG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCIke2ZhY3QuaW1hZ2VVUkwgfHwgJ3BsYWNlaG9sZGVyLnBuZyd9XCIgYWx0PVwiaWNvblwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZhY3QtY29udGVudFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxwPjxzdHJvbmc+2KfZhNin2K/Yudin2KE6PC9zdHJvbmc+ICR7ZmFjdC5jbGFpbX08L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJhY2N1cmFjeVwiPjxzdHJvbmc+2KfZhNiv2YLYqTo8L3N0cm9uZz4gJHtmYWN0LmFjY3VyYWN5fTwvcD5cclxuICAgICAgICAgICAgICAgICAgICA8cD48c3Ryb25nPtin2YTYqti12K3ZititOjwvc3Ryb25nPiAke2ZhY3QuY29ycmVjdGlvbn08L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgPHA+PHN0cm9uZz7Yp9mE2YXYtdiv2LE6PC9zdHJvbmc+IDxhIGhyZWY9XCIke2ZhY3Quc291cmNlfVwiIHRhcmdldD1cIl9ibGFua1wiPiR7ZmFjdC5zb3VyY2V9PC9hPjwvcD5cclxuICAgICAgICAgICAgICAgICAgICA8cD48c3Ryb25nPtin2YTYqti12YbZitmBOjwvc3Ryb25nPiAke2ZhY3QudGFnIHx8ICfYudin2YUnfTwvcD5cclxuICAgICAgICAgICAgICAgICAgICA8cD48c3Ryb25nPtin2YTYqtin2LHZitiuOjwvc3Ryb25nPiAke2RhdGVTdHJ9PC9wPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIGA7XHJcbiAgICB9KTtcclxuXHJcbiAgICBmYWN0c0luZm8udGV4dENvbnRlbnQgPSBg2KfZhNi12YHYrdipICR7Y3VycmVudFBhZ2V9IOKAlCAke2ZpbHRlcmVkLmxlbmd0aH0g2YbYqtmK2KzYqWA7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByZXZGYWN0QnRuXCIpLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmV4dEZhY3RCdG5cIikuZGlzYWJsZWQgPSBmaWx0ZXJlZC5sZW5ndGggPD0gUEFHRV9TSVpFO1xyXG59XHJcblxyXG4vLyBOYXZpZ2F0aW9uXHJcbmZ1bmN0aW9uIG5leHRQYWdlRmFjdHMoKSB7XHJcbiAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJuZXh0RmFjdEJ0blwiKS5kaXNhYmxlZCkgcmV0dXJuO1xyXG4gICAgY3VycmVudFBhZ2UrKztcclxuICAgIGxvYWRRdWlja0ZhY3RzKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHByZXZQYWdlRmFjdHMoKSB7XHJcbiAgICBpZiAoY3VycmVudFBhZ2UgPT09IDEpIHJldHVybjtcclxuICAgIGN1cnJlbnRQYWdlLS07XHJcbiAgICBsb2FkUXVpY2tGYWN0cygpO1xyXG59XHJcblxyXG53aW5kb3cubmV4dFBhZ2VGYWN0cyA9IG5leHRQYWdlRmFjdHM7XHJcbndpbmRvdy5wcmV2UGFnZUZhY3RzID0gcHJldlBhZ2VGYWN0cztcclxuXHJcbnNlYXJjaElucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChldmVudCkgPT4ge1xyXG4gICAgaWYgKGV2ZW50LmtleSA9PT0gXCJFbnRlclwiKSBzZWFyY2hGYWN0cygpO1xyXG59KTtcclxuXHJcbi8vIEluaXRpYWwgbG9hZFxyXG5sb2FkUXVpY2tGYWN0cygpOyJdLCJuYW1lcyI6WyJERUZBVUxUX0VOVFJZX05BTUUiLCJuYW1lIiwidmVyc2lvbiIsImNvbW1vbmpzR2xvYmFsIl0sIm1hcHBpbmdzIjoiOzs7SUFBQSxNQUFNLDBCQUEwQixHQUFHLE9BQU8sU0FBUyxDQUFDOztJQ3NFcEQ7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQSxNQUFNLG1CQUFtQixHQUFHLFVBQVUsR0FBRyxFQUFFO0lBQzNDO0lBQ0EsSUFBSSxNQUFNLEdBQUcsR0FBRyxFQUFFO0lBQ2xCLElBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQztJQUNiLElBQUksS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7SUFDekMsUUFBUSxJQUFJLENBQUMsR0FBRyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQztJQUNqQyxRQUFRLElBQUksQ0FBQyxHQUFHLEdBQUcsRUFBRTtJQUNyQixZQUFZLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUM7SUFDeEIsUUFBUTtJQUNSLGFBQWEsSUFBSSxDQUFDLEdBQUcsSUFBSSxFQUFFO0lBQzNCLFlBQVksR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLEdBQUc7SUFDckMsWUFBWSxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxFQUFFLElBQUksR0FBRztJQUNyQyxRQUFRO0lBQ1IsYUFBYSxJQUFJLENBQUMsQ0FBQyxHQUFHLE1BQU0sTUFBTSxNQUFNO0lBQ3hDLFlBQVksQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUMsTUFBTTtJQUM5QixZQUFZLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsTUFBTSxNQUFNLE1BQU0sRUFBRTtJQUN6RDtJQUNBLFlBQVksQ0FBQyxHQUFHLE9BQU8sSUFBSSxDQUFDLENBQUMsR0FBRyxNQUFNLEtBQUssRUFBRSxDQUFDLElBQUksR0FBRyxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQztJQUMvRSxZQUFZLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxHQUFHO0lBQ3RDLFlBQVksR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEdBQUc7SUFDN0MsWUFBWSxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksR0FBRztJQUM1QyxZQUFZLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsSUFBSSxHQUFHO0lBQ3JDLFFBQVE7SUFDUixhQUFhO0lBQ2IsWUFBWSxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLElBQUksR0FBRztJQUN0QyxZQUFZLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxHQUFHO0lBQzVDLFlBQVksR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxJQUFJLEdBQUc7SUFDckMsUUFBUTtJQUNSLElBQUk7SUFDSixJQUFJLE9BQU8sR0FBRztJQUNkLENBQUM7SUFDRDtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQSxNQUFNLGlCQUFpQixHQUFHLFVBQVUsS0FBSyxFQUFFO0lBQzNDO0lBQ0EsSUFBSSxNQUFNLEdBQUcsR0FBRyxFQUFFO0lBQ2xCLElBQUksSUFBSSxHQUFHLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDO0lBQ3RCLElBQUksT0FBTyxHQUFHLEdBQUcsS0FBSyxDQUFDLE1BQU0sRUFBRTtJQUMvQixRQUFRLE1BQU0sRUFBRSxHQUFHLEtBQUssQ0FBQyxHQUFHLEVBQUUsQ0FBQztJQUMvQixRQUFRLElBQUksRUFBRSxHQUFHLEdBQUcsRUFBRTtJQUN0QixZQUFZLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDO0lBQzlDLFFBQVE7SUFDUixhQUFhLElBQUksRUFBRSxHQUFHLEdBQUcsSUFBSSxFQUFFLEdBQUcsR0FBRyxFQUFFO0lBQ3ZDLFlBQVksTUFBTSxFQUFFLEdBQUcsS0FBSyxDQUFDLEdBQUcsRUFBRSxDQUFDO0lBQ25DLFlBQVksR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLEVBQUUsS0FBSyxDQUFDLEtBQUssRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQ3hFLFFBQVE7SUFDUixhQUFhLElBQUksRUFBRSxHQUFHLEdBQUcsSUFBSSxFQUFFLEdBQUcsR0FBRyxFQUFFO0lBQ3ZDO0lBQ0EsWUFBWSxNQUFNLEVBQUUsR0FBRyxLQUFLLENBQUMsR0FBRyxFQUFFLENBQUM7SUFDbkMsWUFBWSxNQUFNLEVBQUUsR0FBRyxLQUFLLENBQUMsR0FBRyxFQUFFLENBQUM7SUFDbkMsWUFBWSxNQUFNLEVBQUUsR0FBRyxLQUFLLENBQUMsR0FBRyxFQUFFLENBQUM7SUFDbkMsWUFBWSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFLEdBQUcsRUFBRSxLQUFLLENBQUMsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLENBQUM7SUFDMUYsZ0JBQWdCLE9BQU87SUFDdkIsWUFBWSxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxNQUFNLENBQUMsWUFBWSxDQUFDLE1BQU0sSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7SUFDOUQsWUFBWSxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxNQUFNLENBQUMsWUFBWSxDQUFDLE1BQU0sSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUM7SUFDL0QsUUFBUTtJQUNSLGFBQWE7SUFDYixZQUFZLE1BQU0sRUFBRSxHQUFHLEtBQUssQ0FBQyxHQUFHLEVBQUUsQ0FBQztJQUNuQyxZQUFZLE1BQU0sRUFBRSxHQUFHLEtBQUssQ0FBQyxHQUFHLEVBQUUsQ0FBQztJQUNuQyxZQUFZLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxLQUFLLENBQUMsRUFBRSxHQUFHLEVBQUUsS0FBSyxDQUFDLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDNUYsUUFBUTtJQUNSLElBQUk7SUFDSixJQUFJLE9BQU8sR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUM7SUFDdkIsQ0FBQztJQUNEO0lBQ0E7SUFDQTtJQUNBO0lBQ0EsTUFB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LEdBQUcsT0FBTyxNQUFNLEtBQUssV0FBVyxHQUFHLE1BQU0sR0FBRyxPQUFPLElBQUksS0FBSyxXQUFXLEdBQUcsSUFBSSxHQUFHLEVBQUU7O0lBSS9MO0lBQ0E7SUFDQTtJQUNBOztJQUVBLElBQUksT0FBTztJQUNYLElBQUksR0FBRztJQUNQLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDOztJQUVuQjtJQUNBO0lBQ0E7SUFDQSxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDeGhCLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxPQUFPLENBQUMsR0FBRyxRQUFRLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLEtBQUssSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztJQUNyZixDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLFVBQVU7SUFDcGYsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7SUFDcGYsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDcGYsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxVQUFVO0lBQ3pmLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsVUFBVTtJQUM1ZixDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO0lBQ3ZmLFVBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLFVBQVU7SUFDNWYsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLFVBQVU7SUFDeGYsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUM7SUFDbGIsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsT0FBTyxDQUFDLEdBQUcsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEtBQUssS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUN0VyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sTUFBTSxDQUFDLFNBQVMsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxJQUFJLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLE9BQU8sSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLFVBQVUsQ0FBQyxPQUFPLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDM3dCLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLE1BQU0sS0FBSyxDQUFDLG1DQUFtQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsTUFBTSxLQUFLLENBQUMsc0JBQXNCLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsTUFBTSxLQUFLLENBQUMsNkNBQTZDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDO0lBQzdmLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsVUFBVSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDOUssQ0FBQyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLE1BQU0sS0FBSyxDQUFDLHNCQUFzQixDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxPQUFPLEtBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxPQUFPLEtBQUUsQ0FBQyxPQUFPLElBQUU7SUFDL2UsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDaGYsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDbEMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7SUFDM2YsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUM3TCxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxLQUFLLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxLQUFLLENBQUMsZ0RBQWdELENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFO0lBQ3pmLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNuZSxDQUFDLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLE9BQU8sSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQXlCLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxPQUFPLEdBQTZCLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLE9BQU9BLGdCQUFjLEtBQUssV0FBVyxHQUFHQSxnQkFBYyxHQUFHLE9B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LEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDOztJQUVySjtJQUNBO0lBQ0E7SUFDQSxJQUFJLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxFQUFFLFFBQVEsRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRSxVQUFVLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3BXLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLE9BQU8sWUFBWSxHQUFHLFdBQVcsRUFBRSxPQUFPLFlBQVksQ0FBQyxRQUFRLEdBQUcsVUFBVSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsWUFBWSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsRUFBRSxPQUFPLEVBQUUsQ0FBQyxFQUFFLFFBQVEsRUFBRSxPQUFPLENBQUMsQ0FBQyxNQUFNLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLFdBQVcsRUFBRSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFFLENBQUMsRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQUUsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEtBQUUsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLEtBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsSUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDLE1BQU0sQ0FBQyxjQUFjLENBQUMsT0FBTyxLQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBRSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsY0FBYyxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxJQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsbUJBQW1CLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUMvL0UsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsY0FBYyxFQUFFLENBQUMsQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsYUFBYSxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsRUFBRSxVQUFVLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsT0FBTztBQUN4ZixVQUFNLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLGdCQUFnQixFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLGNBQWMsRUFBRSxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsS0FBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxxQkFBcUIsRUFBRSxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEtBQUUsQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBRSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQywrRkFBK0YsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEtBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsS0FBSyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN2bkQsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDLGFBQWEsRUFBRSxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFtQyxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNoWSxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsTUFBTSxLQUFLLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLEdBQUcsQ0FBQyxDQUFDLEtBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLE1BQU0sS0FBSyxDQUFDLG1EQUFtRCxDQUFDLENBQUMsT0FBTyxDQUFDO0lBQ3JlLFNBQVMsRUFBRSxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLENBQ2pGLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDcFgsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxPQUFPLENBQUMsR0FBRyxRQUFRLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQyxjQUFjLEVBQUUsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUM7SUFDMWUsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsWUFBWSxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxzQkFBc0IsRUFBRSxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsT0FBTyxDQUFDLEdBQUcsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUUsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLG1CQUFtQixDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2pZLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLEdBQUcsT0FBTyxDQUFDLEdBQUcsUUFBUSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ2hYLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDMVQsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsT0FBTyxJQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFFLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLGdCQUFnQixDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxHQUFHLFVBQVUsQ0FBQyxHQUFHLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQyxXQUFXLEVBQUUsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLE1BQU0sS0FBSyxDQUFDLDJCQUEyQixDQUFDLENBQUMsT0FBTyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sRUFBRSxTQUFTLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFFLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsRUFBRSxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLE1BQU0sS0FBSyxDQUFDLDBDQUEwQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQUUsRUFBRSxDQUFDLENBQUMsU0FBUyxFQUFFLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFNBQVMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxFQUFFLENBQUMsT0FBTyxFQUFFLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsb0JBQW9CLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxXQUFXLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLGFBQWEsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ2p0RCxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxPQUFPLENBQUMsR0FBRyxVQUFVLENBQUMsTUFBTSxLQUFLLENBQUMsNENBQTRDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBRSxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sZUFBZSxDQUFDLENBQUMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNsaUIsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLE9BQU8sZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDOVMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsT0FBTyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLENBQUMsRUFBRSxPQUFPLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLGtCQUFrQixDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLGlCQUFpQixDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLGtCQUFrQixDQUFDLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLFNBQVMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxPQUFPLElBQUksY0FBYyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sa0JBQWtCLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsU0FBUyxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUUsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNyd0MsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLGtCQUFrQixDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxLQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxDQUFDLG1DQUFtQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDdmYsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUM5SixDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsaUJBQWlCLENBQUMseUJBQXlCLENBQUMsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLHdEQUF3RCxDQUFDO0lBQ3JpQixJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLHVCQUF1QixDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDemYsQ0FBQyxDQUFDLDRCQUE0QixDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLHNEQUFzRCxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7SUFDOWMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUMsT0FBTyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsT0FBTyxXQUFXLEdBQUcsV0FBVyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEtBQUU7SUFDdlgsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsTUFBTSxLQUFLLENBQUMseUJBQXlCLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNoYSxDQUFDLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDLE9BQU8sRUFBRSxVQUFVLEVBQUUsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUM7SUFDaFYsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztJQUMvZixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLE9BQU8sQ0FBQyxHQUFHLFFBQVEsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLCtCQUErQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLGlCQUFpQixDQUFDLHdCQUF3QixDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUFFO0lBQzdmLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxpQkFBaUIsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsMkJBQTJCLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsZ0JBQWdCLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxlQUFlLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxlQUFlLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsU0FBUyxFQUFFLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxTQUFTLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUUsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFFO0lBQ2pnQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxNQUFNLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxNQUFNLENBQUMsbUlBQW1JLENBQUMsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUUsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDNXNDLENBQUMsQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLHNCQUFzQixDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxJQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUFFLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQzlhLENBQUMsQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLE1BQU07SUFDM2YsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLEtBQUssQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsWUFBWSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDcGYsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsVUFBVSxDQUFDLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsVUFBVSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLE9BQU8sQ0FBQyxHQUFHLFFBQVEsRUFBRSxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLHNCQUFzQixDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsUUFBUSxDQUFDLEVBQUUsQ0FBQztJQUM5YyxJQUFJLEVBQUUsQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLE9BQU8sSUFBSSxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2hlLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxHQUFHLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLE9BQU8sSUFBSSxDQUFDO0lBQzlkLENBQUMsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxPQUFPLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQzFiLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyx1QkFBdUIsQ0FBQyxJQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsc0JBQXNCLENBQUMsS0FBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLHNCQUFzQixDQUFDLEtBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyx3QkFBd0IsQ0FBQyxLQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsS0FBRSxDQUFDLENBQUM7SUFDdm1CLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxlQUFlLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMseUJBQXlCLENBQUMsS0FBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLG9CQUFvQixDQUFDLElBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLDhCQUE4QixDQUFDLEtBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLHVCQUF1QixDQUFDLEtBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsS0FBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsT0FBTyxJQUFJLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLFNBQVM7SUFDejRCLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUMsQ0FBQyxNQUFNLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQyxLQUFLLENBQUMsOEJBQThCLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFDLE1BQU0sSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLEtBQUssQ0FBQyw2QkFBNkIsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLE1BQU0sSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLEtBQUssQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEtBQUssQ0FBQyxJQUFJLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN4Z0IsQ0FBQyxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksT0FBTyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUUsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzFQLENBQUMsQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFlBQVksR0FBRyxhQUFhLENBQUMsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxPQUFPLENBQUMsQ0FBQyxjQUFjLEdBQUcsV0FBVyxFQUFFLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sS0FBSyxDQUFDLHFFQUFxRSxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVE7SUFDM2YsRUFBRSxDQUFDLENBQUMsS0FBSyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxXQUFXLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2xkLENBQUMsQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLGdCQUFnQixDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLGlCQUFpQixDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsT0FBTyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUM7SUFDeFcsQ0FBQyxDQUFDLHFCQUFxQixDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxrQkFBa0IsRUFBRSxDQUFDLENBQUMsa0JBQWtCLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLGNBQWMsQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLGlCQUFpQixDQUFDLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxPQUFPLElBQUksQ0FBQyxDQUFDLEdBQUcsU0FBUyxDQUFDLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFFLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFHLFFBQVEsRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsV0FBVyxDQUFDLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUMxMUIsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxNQUFNLEtBQUssQ0FBQyx5REFBeUQsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsa0JBQWtCLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUMsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLE9BQU8sQ0FBQyxDQUFDLElBQUksR0FBRyxVQUFVO0lBQ3hmLE9BQU8sQ0FBQyxDQUFDLEdBQUcsR0FBRyxVQUFVLENBQUMsSUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssTUFBTSxLQUFLLENBQUMsc0NBQXNDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxjQUFjLEVBQUUsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxZQUFZLENBQUMsQ0FBQyxRQUFRLENBQUMsRUFBRSxLQUFLLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsY0FBYyxDQUFDLGlEQUFpRCxDQUFDLENBQUMsSUFBSSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsZUFBZTtJQUNwZixJQUFJLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxZQUFZLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDM2EsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDL00sU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLE9BQU8sRUFBRSxFQUFFLFdBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFFLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUUsS0FBSyxHQUFHLENBQUMsS0FBSyxHQUFHLENBQUMsS0FBSyxHQUFHLENBQUMsS0FBSyxHQUFHLENBQUMsS0FBSyxHQUFHLENBQUMsS0FBSyxHQUFHLENBQUMsS0FBSyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDMWYsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsT0FBTyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUM7SUFDdmMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sSUFBSSxDQUFDLEdBQUcsVUFBVSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsS0FBSyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxLQUFLLGFBQWEsQ0FBQyxHQUFHLHdCQUF3QixHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLHNCQUFzQixDQUFDLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsT0FBTyxJQUFJLENBQUM7SUFDbFgsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLHFCQUFxQixFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxHQUFHLFFBQVEsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLE9BQU8sSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLE9BQU8sT0FBTyxJQUFJLENBQUMsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLENBQUMscUJBQXFCLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDL2QsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLEtBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLGtCQUFrQixDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxrQkFBa0IsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsMEJBQTBCLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLGdDQUFnQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsY0FBYyxFQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRTtJQUN6ZixDQUFDLEVBQUUsQ0FBQyxDQUFDLGVBQWUsRUFBRSxLQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLHNCQUFzQixFQUFFLEtBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsc0JBQXNCLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxhQUFhLEVBQUUsS0FBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyx3QkFBd0IsRUFBRSxLQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxLQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLGdCQUFnQixHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLG9CQUFvQixFQUFFLEtBQUUsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLGtCQUFrQixFQUFFLENBQUMsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNyZixTQUFFLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsTUFBTSxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDNU0sU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxHQUFHLENBQUMsSUFBSSxLQUFLLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNyWixTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQyxHQUFHLFFBQVEsRUFBRSxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLEtBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxPQUFPLEtBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsT0FBTyxJQUFFO0lBQy9aLENBQUMsQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsVUFBVSxHQUFHLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxHQUFHLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQztJQUMzZixHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDL1csU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNoWSxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFFLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBRSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsWUFBWSxHQUFHLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUM5ZixDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLE9BQU8sS0FBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxPQUFPLElBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLEVBQUUsSUFBSSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsOEJBQThCLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3hjLENBQUMsQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsK0JBQStCLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxzREFBc0QsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxHQUFHLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDOVAsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsSUFBSSxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxHQUFHLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDM2IsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLE9BQU8sR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLE1BQU0sS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3hhLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUFFLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsc0NBQXNDLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxRQUFRLENBQUMsUUFBUSxFQUFFLE1BQU0sRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxnQ0FBZ0MsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQywyQkFBMkIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDOWUsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQztJQUN2YyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLEtBQUssQ0FBQyxxREFBcUQsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLE9BQU8sSUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN6YixTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxnQkFBZ0IsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLDRCQUE0QixHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUMsbUJBQW1CLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsa0JBQWtCLEVBQUUsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsa0JBQWtCLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQywyQkFBMkIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsQ0FBQywyQkFBMkIsQ0FBQyxDQUFDLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsNkJBQTZCLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLDZCQUE2QixDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN6ZixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLHNCQUFzQixFQUFFLEtBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsV0FBVyxFQUFFLEtBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLGtCQUFrQixHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDNVgsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsT0FBTyxDQUFDLEdBQUcsUUFBUSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUM5USxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxTQUFTLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3pkLENBQUMsQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsZ0JBQWdCLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMseUJBQXlCLEdBQW9ELFVBQVUsQ0FBQyxPQUFPLElBQUksRUFBRSxDQUFDLENBQUMsa0JBQWtCLEdBQTZDLFVBQVUsQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUFDLENBQUMsS0FBSyxHQUFnQyxDQUFDLENBQUMsSUFBSSxHQUErQixDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQ3pwQixTQUFTLEdBQW9DLEVBQUUsQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxTQUFTLEdBQW9DLEVBQUUsQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxVQUFVLEdBQXFDLEVBQUUsQ0FBcUUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLEVB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Q0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJO0lBQ3ZCLFFBQVEsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDL0csUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsTUFBTTtJQUN0RSxZQUFZLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsWUFBWSxFQUFFLENBQUM7SUFDL0ksWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUU7SUFDL0IsZ0JBQWdCLElBQUksQ0FBQyxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsRUFBRSxPQUFPLFFBQVEsQ0FBQyxLQUFLO0lBQzVELGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxLQUFLLEVBQUUs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SUFDMUQsSUFBSSxPQUFPLENBQUMsS0FBSyxFQUFFO0lBQ25COztJQUVBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBLFNBQVMsMEJBQTBCLENBQUMsQ0FBQyxFQUFFO0lBQ3ZDLElBQUksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDO0lBQ25DLElBQUksT0FBTywyQkFBMkIsQ0FBQyxDQUFDLENBQUMsR0FBRywwQkFBMEIsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDO0lBQzdFOztJQUVBO0lBQ0E7SUFDQSxJQUFJLFNBQVMsMkJBQTJCLENBQUMsQ0FBQyxFQUFFO0lBQzVDLElBQUksTUFBTSxDQUFDLEdBQUcsNEJBQTRCLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUMsY0FBYyxDQUFDO0lBQ2hGLElBQUksT0FBTyxJQUFJLFNBQVMsQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUM7SUFDNUM7O0lBRUE7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0EsSUFBSSxNQUFNLFlBQVksQ0FBQztJQUN2QjtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQSxJQUFJLFdBQVcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7SUFDOUMsUUFBUSxJQUFJLENBQUMsVUFBVSxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsS0FBSyxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsY0FBYyxHQUFHLENBQUMsRUFBRSxJQUFJLENB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QyxFQUFFLENBQUMsV0FBVyxHQUFHLEVBQUUsQ0FBQyxHQUFHLGFBQWEsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUMsR0FBRyxXQUFXOztJQTJCL0c7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBLFNBQVMsd0JBQXdCLEdBQUc7SUFDcEMsSUFBSSxPQUFPLElBQUksV0FBVztJQUMxQjs7SUFFQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBLE1BQU0sRUFBRSxHQUFHLElBQUksT0FBTyxDQUFDLEVBQUUsVUFBVSxFQUFFLFVBQVUsRUFBRSxFQUFFLENBQUMsQ0FBQzs7SUFFckQ7SUFDQSxTQUFTLHlCQUF5QixDQUFDLENBQUMsRUFBRTtJQUN0QyxJQUFJLE1BQU0sQ0FBQyxHQUFHLHdCQUF3QixFQUFFLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLEdBQUc7SUFDL0QsSUFBSSxPQUFPLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxVQUFVLENBQUMsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBQ2xEOztJQUVBO0lBQ0E7SUFDQSxTQUFTLHVCQUF1QixDQUFDLENBQUMsRUFBRTtJQUNwQyxJQUFJLE1BQU0sQ0FBQyxHQUFHLElBQUksUUFBUSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLHNCQUFzQixJQUFFLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLHNCQUFzQixJQUFFLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FB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QUFJO0lBQ0o7O0lBRUE7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0EsSUFBSSxNQUFNLEVBQUUsR0FBRyxrQkFBa0I7O0lBRWpDO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBLE1BQU0sMEJBQTBCLENBQUM7SUFDakMsSUFBSSxXQUFXLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRTtJQUN4QyxRQUFRLElBQUksQ0FBQyxFQUFFLEdBQUcsQ0FBQyxFQUFFLElBQUksQ0FBQyxFQUFFLEdBQUcsQ0FBQyxFQUFFLElBQUksQ0FBQyxFQUFFLEdBQUcsQ0FBQyxFQUFFLElBQUksQ0FBQyxVQUFVLEdBQUcsQ0FBQyxFQUFFLElBQUksQ0FBQyx1QkFBdUIsR0FBRyxDQUFDO0lBQ3BHLFFBQVEsSUFBSSxDQUFDLDJCQUEyQixHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsUUFBUSxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsS0FBSyxHQUFHLENBQUM7SUFDL0U7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBLFFBQVEsSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLEVBQUUsR0FBRyxJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQUUsR0FBRyxJQUFJLEVBQUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJO0lBQ3ZFO0lBQ0E7SUFDQTtJQUNBLFFBQVEsSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLEVBQUUsR0FBRyxJQUFJLDRCQUE0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QUMsQ0FBQyxRQUFRLEVBQUUsT0FBTztJQUNoRSxJQUFJLFdBQVcsRUFBRSxDQUFDO0lBQ2xCLElBQUksY0FBYyxFQUFFLENBQUM7SUFDckIsQ0FBQztBQUNEO0lBQ0EsU0FBUyxhQUFhLEdBQUc7SUFDekIsSUFBSSxJQUFJLFdBQVcsS0FBSyxDQUFDLEVBQUUsT0FBTztJQUNsQyxJQUFJLFdBQVcsRUFBRSxDQUFDO0lBQ2xCLElBQUksY0FBYyxFQUFFLENBQUM7SUFDckIsQ0FBQztBQUNEO0lBQ0EsTUFBTSxDQUFDLGFBQWEsR0FBRyxhQUFhLENBQUM7SUFDckMsTUFBTSxDQUFDLGFBQWEsR0FBRyxhQUFhLENBQUM7QUFDckM7SUFDQSxXQUFXLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxFQUFFLENBQUMsS0FBSyxLQUFLO0lBQ25ELElBQUksSUFBSSxLQUFLLENBQUMsR0FBRyxLQUFLLE9BQU8sRUFBRSxXQUFXLEVBQUUsQ0FBQztJQUM3QyxDQUFDLENBQUMsQ0FBQztBQUNIO0lBQ0E7SUFDQSxjQUFjLEVBQUU7Ozs7OzsiLCJ4X2dvb2dsZV9pZ25vcmVMaXN0IjpbMCwxLDIsMyw0LDUsNiw3LDgsOSwxMF19
